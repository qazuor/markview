var xz=Object.defineProperty;var C=(t,e)=>()=>(t&&(e=t(t=0)),e);var ar=(t,e)=>{for(var r in e)xz(t,r,{get:e[r],enumerable:!0})};function nO(t){switch(t){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw new Error(`Unsupported alphabet: ${t}`)}}function Da(...t){let e=t.map(nO).join("");if(e.length===0)throw new Error("No valid characters provided for random string generation.");let r=e.length;return(i,...n)=>{if(i<=0)throw new Error("Length must be a positive integer.");let o=e,s=r;n.length>0&&(o=n.map(nO).join(""),s=o.length);let a=Math.floor(256/s)*s,c=new Uint8Array(i*2),u=c.length,l="",f=u,d;for(;l.length<i;)f>=u&&(crypto.getRandomValues(c),f=0),d=c[f++],d<a&&(l+=o[d%s]);return l}}var op=C(()=>{});function R6(t){return t?t!=="false":!1}function He(t,e){return typeof process<"u"&&process.env?process.env[t]??e:typeof Deno<"u"?Deno.env.get(t)??e:typeof Bun<"u"?Bun.env[t]??e:e}function zp(t,e=!0){let r=He(t);return r?r!=="0"&&r.toLowerCase()!=="false"&&r!=="":e}function jp(){if(He("FORCE_COLOR")!==void 0)switch(He("FORCE_COLOR")){case"":case"1":case"true":return er;case"2":return Ni;case"3":return sn;default:return ll}if(He("NODE_DISABLE_COLORS")!==void 0&&He("NODE_DISABLE_COLORS")!==""||He("NO_COLOR")!==void 0&&He("NO_COLOR")!==""||He("TERM")==="dumb")return ll;if(He("TMUX"))return sn;if("TF_BUILD"in je&&"AGENT_NAME"in je)return er;if("CI"in je){for(let{0:t,1:e}of U6)if(t in je)return e;return He("CI_NAME")==="codeship"?Ni:ll}if("TEAMCITY_VERSION"in je)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(He("TEAMCITY_VERSION"))!==null?er:ll;switch(He("TERM_PROGRAM")){case"iTerm.app":return!He("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(He("TERM_PROGRAM_VERSION"))!==null?Ni:sn;case"HyperTerm":case"MacTerm":return sn;case"Apple_Terminal":return Ni}if(He("COLORTERM")==="truecolor"||He("COLORTERM")==="24bit")return sn;if(He("TERM")){if(/truecolor/.exec(He("TERM"))!==null)return sn;if(/^xterm-256/.exec(He("TERM"))!==null)return Ni;let t=He("TERM").toLowerCase();if(XO[t])return XO[t];if(D6.some(e=>e.exec(t)!==null))return er}return He("COLORTERM")?er:ll}function Za(t,e){return Lp.indexOf(e)>=Lp.indexOf(t)}var Dp,ul,je,dl,ko,Es,Hi,lv,ll,er,Ni,sn,XO,U6,D6,zt,Lp,L6,z6,Ji,ye,Qi=C(()=>{Dp=Object.create(null),ul=t=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(t?Dp:globalThis),je=new Proxy(Dp,{get(t,e){return ul()[e]??Dp[e]},has(t,e){return e in ul()||e in Dp},set(t,e,r){let i=ul(!0);return i[e]=r,!0},deleteProperty(t,e){if(!e)return!1;let r=ul(!0);return delete r[e],!0},ownKeys(){let t=ul(!0);return Object.keys(t)}});dl=typeof process<"u"&&process.env&&"production"||"",ko=dl==="production",Es=()=>dl==="dev"||dl==="development",Hi=()=>dl==="test"||R6(je.TEST);lv=Object.freeze({get BETTER_AUTH_SECRET(){return He("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return He("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return He("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return He("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return He("NODE_ENV","development")},get PACKAGE_VERSION(){return He("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return He("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),ll=1,er=4,Ni=8,sn=24,XO={eterm:er,cons25:er,console:er,cygwin:er,dtterm:er,gnome:er,hurd:er,jfbterm:er,konsole:er,kterm:er,mlterm:er,mosh:sn,putty:er,st:er,"rxvt-unicode-24bit":sn,terminator:sn,"xterm-kitty":sn},U6=new Map(Object.entries({APPVEYOR:Ni,BUILDKITE:Ni,CIRCLECI:sn,DRONE:Ni,GITEA_ACTIONS:sn,GITHUB_ACTIONS:sn,GITLAB_CI:Ni,TRAVIS:Ni})),D6=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];zt={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},Lp=["debug","info","success","warn","error"];L6={info:zt.fg.blue,success:zt.fg.green,warn:zt.fg.yellow,error:zt.fg.red,debug:zt.fg.magenta},z6=(t,e,r)=>{let i=new Date().toISOString();return r?`${zt.dim}${i}${zt.reset} ${L6[t]}${t.toUpperCase()}${zt.reset} ${zt.bright}[Better Auth]:${zt.reset} ${e}`:`${i} ${t.toUpperCase()} [Better Auth]: ${e}`},Ji=t=>{let e=t?.disabled!==!0,r=t?.level??"error",i=t?.disableColors!==void 0?!t.disableColors:jp()!==1,n=(o,s,a=[])=>{if(!e||!Za(r,o))return;let c=z6(o,s,i);if(!t||typeof t.log!="function"){o==="error"?console.error(c,...a):o==="warn"?console.warn(c,...a):console.log(c,...a);return}t.log(o==="success"?"info":o,s,...a)};return{...Object.fromEntries(Lp.map(o=>[o,(...[s,...a])=>n(o,s,a)])),get level(){return r}}},ye=Ji()});function wt(t){function e(r,i){if(typeof i=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(i)){let n=new Date(i);if(!isNaN(n.getTime()))return n}return i}try{return typeof t!="string"?t:JSON.parse(t,e)}catch(r){return ye.error("Error parsing JSON",{error:r}),null}}var vn,Ga=C(()=>{Qi();op();vn=t=>Da("a-z","A-Z","0-9")(t||32)});var ge,de,Bp=C(()=>{Ga();ge={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."},de=class extends Error{constructor(t,e){super(t),this.name="BetterAuthError",this.message=t,this.cause=e,this.stack=""}}});var dr=C(()=>{Qi()});var En,jA=C(()=>{En=t=>{let e=(t.plugins??[]).reduce((l,f)=>{let d=f.schema;if(!d)return l;for(let[m,h]of Object.entries(d))l[m]={fields:{...l[m]?.fields,...h.fields},modelName:h.modelName||m};return l},{}),r=t.rateLimit?.storage==="database",i={rateLimit:{modelName:t.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:t.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:t.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:t.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:n,session:o,account:s,verification:a,...c}=e,u={session:{modelName:t.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:t.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:t.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:t.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:t.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:t.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:t.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:t.session?.fields?.userId||"userId",references:{model:t.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...o?.fields,...t.session?.additionalFields},order:2}};return{user:{modelName:t.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:t.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:t.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:t.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:t.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:t.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:t.user?.fields?.updatedAt||"updatedAt"},...n?.fields,...t.user?.additionalFields},order:1},...!t.secondaryStorage||t.session?.storeSessionInDatabase?u:{},account:{modelName:t.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:t.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:t.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:t.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:t.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,fieldName:t.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:t.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:t.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:t.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:t.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:t.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:t.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:t.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:t.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...s?.fields,...t.account?.additionalFields},order:3},verification:{modelName:t.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:t.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:t.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:t.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:t.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:t.verification?.fields?.updatedAt||"updatedAt"},...a?.fields,...t.verification?.additionalFields},order:4},...c,...r?i:{}}}});function SM(t,e,r){return r==="update"?t===void 0&&e.onUpdate!==void 0?typeof e.onUpdate=="function"?e.onUpdate():e.onUpdate:t:r==="create"&&(t===void 0||e.required===!0&&t===null)&&e.defaultValue!==void 0?typeof e.defaultValue=="function"?e.defaultValue():e.defaultValue:t}function At(t){return jp()<8?`#${t}`:`${zt.fg.magenta}#${t}${zt.reset}`}function _t(t,e){return`${zt.bg.black}${zt.fg.yellow}[${t}/${e}]${zt.reset}`}function Et(t){return`${zt.bright}${t}${zt.reset}`}function Kt(t){return`${zt.dim}(${t})${zt.reset}`}var _c,MA,kP,xM,qA,WA,Xh,Nr,NM,Fo,Ed=C(()=>{jA();Qi();Ga();Bp();_c=({usePlural:t,schema:e})=>i=>{if(t&&i.charAt(i.length-1)==="s"){let o=i.slice(0,-1),s=e[o]?o:void 0;if(s||(s=Object.entries(e).find(([a,c])=>c.modelName===o)?.[0]),s)return s}let n=e[i]?i:void 0;if(n||(n=Object.entries(e).find(([o,s])=>s.modelName===i)?.[0]),!n)throw new de(`Model "${i}" not found in schema`);return n},MA=({schema:t,usePlural:e})=>{let r=_c({schema:t,usePlural:e});return({field:n,model:o})=>{if(n==="id"||n==="_id")return"id";let s=r(o),a=t[s]?.fields[n];if(!a){let c=Object.entries(t[s].fields).find(([u,l])=>l.fieldName===n);c&&(a=c[1],n=c[0])}if(!a)throw new de(`Field ${n} not found in model ${s}`);return n}},kP=({usePlural:t,schema:e,disableIdGeneration:r,options:i,customIdGenerator:n,supportsUUIDs:o})=>{let s=_c({usePlural:t,schema:e});return({customModelName:c,forceAllowId:u})=>{let l=i.advanced?.database?.useNumberId||i.advanced?.database?.generateId==="serial",f=i.advanced?.database?.generateId==="uuid",d=r||l&&!u?!1:f?!o:!0,m=s(c??"id");return{type:l?"number":"string",required:!!d,...d?{defaultValue(){if(r)return;let h=i.advanced?.database?.generateId;if(!(h===!1||l))return typeof h=="function"?h({model:m}):n?n({model:m}):h==="uuid"?crypto.randomUUID():vn()}}:{},transform:{input:h=>{if(h){if(l){let p=Number(h);return isNaN(p)?void 0:p}if(f){if(d&&!u)return h;if(r||o)return;if(u&&typeof h=="string"){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h))return h;{let p=new Error().stack?.split(`
`).filter((y,b)=>b!==1).join(`
`).replace("Error:","");ye.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",p)}}return typeof h!="string"&&!o?crypto.randomUUID():void 0}return h}},output:h=>{if(h)return String(h)}}}}},xM=({usePlural:t,schema:e,options:r,customIdGenerator:i,disableIdGeneration:n})=>{let o=_c({usePlural:t,schema:e}),s=MA({usePlural:t,schema:e}),a=kP({usePlural:t,schema:e,options:r,customIdGenerator:i,disableIdGeneration:n});return({model:u,field:l})=>{let f=o(u),d=s({field:l,model:f}),m=e[f].fields;m.id=a({customModelName:f});let h=m[d];if(!h)throw new de(`Field ${l} not found in model ${u}`);return h}},qA=({schema:t,usePlural:e})=>{let r=_c({schema:t,usePlural:e}),i=MA({schema:t,usePlural:e});function n({model:o,field:s}){let a=r(o),c=i({model:a,field:s});return t[a]?.fields[c]?.fieldName||c}return n},WA=({usePlural:t,schema:e})=>{let r=_c({schema:e,usePlural:t});return n=>{let o=r(n);return e&&e[o]&&e[o].modelName!==n?t?`${e[o].modelName}s`:e[o].modelName:t?`${n}s`:n}};Xh=[],Nr=-1,NM=t=>e=>e(t),Fo=({adapter:t,config:e})=>r=>{let i=Math.random().toString(36).substring(2,15),n={...e,supportsBooleans:e.supportsBooleans??!0,supportsDates:e.supportsDates??!0,supportsJSON:e.supportsJSON??!1,adapterName:e.adapterName??e.adapterId,supportsNumericIds:e.supportsNumericIds??!0,supportsUUIDs:e.supportsUUIDs??!1,supportsArrays:e.supportsArrays??!1,transaction:e.transaction??!1,disableTransformInput:e.disableTransformInput??!1,disableTransformOutput:e.disableTransformOutput??!1,disableTransformJoin:e.disableTransformJoin??!1};if((r.advanced?.database?.useNumberId===!0||r.advanced?.database?.generateId==="serial")&&n.supportsNumericIds===!1)throw new de(`[${n.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let o=En(r),s=(...v)=>{if(n.debugLogs===!0||typeof n.debugLogs=="object"){let S=Ji({level:"info"});if(typeof n.debugLogs=="object"&&"isRunningAdapterTests"in n.debugLogs){n.debugLogs.isRunningAdapterTests&&(v.shift(),Xh.push({instance:i,args:v}));return}if(typeof n.debugLogs=="object"&&n.debugLogs.logCondition&&!n.debugLogs.logCondition?.())return;if(typeof v[0]=="object"&&"method"in v[0]){let E=v.shift().method;if(typeof n.debugLogs=="object"){if(E==="create"&&!n.debugLogs.create)return;if(E==="update"&&!n.debugLogs.update)return;if(E==="updateMany"&&!n.debugLogs.updateMany)return;if(E==="findOne"&&!n.debugLogs.findOne)return;if(E==="findMany"&&!n.debugLogs.findMany)return;if(E==="delete"&&!n.debugLogs.delete)return;if(E==="deleteMany"&&!n.debugLogs.deleteMany)return;if(E==="count"&&!n.debugLogs.count)return}S.info(`[${n.adapterName}]`,...v)}else S.info(`[${n.adapterName}]`,...v)}},a=Ji(r.logger),c=_c({usePlural:n.usePlural,schema:o}),u=MA({usePlural:n.usePlural,schema:o}),l=WA({usePlural:n.usePlural,schema:o}),f=qA({schema:o,usePlural:n.usePlural}),d=kP({schema:o,options:r,usePlural:n.usePlural,disableIdGeneration:n.disableIdGeneration,customIdGenerator:n.customIdGenerator,supportsUUIDs:n.supportsUUIDs}),m=xM({schema:o,options:r,usePlural:n.usePlural,disableIdGeneration:n.disableIdGeneration,customIdGenerator:n.customIdGenerator}),h=async(v,S,E,_)=>{let O={},R=o[S].fields,B=n.mapKeysTransformInput??{},D=r.advanced?.database?.useNumberId||r.advanced?.database?.generateId==="serial";R.id=d({customModelName:S,forceAllowId:_&&"id"in v});for(let P in R){let z=v[P],W=R[P],Q=B[P]||R[P].fieldName||P;if(z===void 0&&(W.defaultValue===void 0&&!W.transform?.input&&!(E==="update"&&W.onUpdate)||E==="update"&&!W.onUpdate))continue;if(W&&W.type==="date"&&!(z instanceof Date)&&typeof z=="string")try{z=new Date(z)}catch{a.error("[Adapter Factory] Failed to convert string to date",{value:z,field:P})}let G=SM(z,W,E);W.transform?.input&&(G=await W.transform.input(G)),W.references?.field==="id"&&D?Array.isArray(G)?G=G.map(J=>J!==null?Number(J):null):G=G!==null?Number(G):null:n.supportsJSON===!1&&typeof G=="object"&&W.type==="json"||n.supportsArrays===!1&&Array.isArray(G)&&(W.type==="string[]"||W.type==="number[]")?G=JSON.stringify(G):n.supportsDates===!1&&G instanceof Date&&W.type==="date"?G=G.toISOString():n.supportsBooleans===!1&&typeof G=="boolean"&&(G=G?1:0),n.customTransformInput&&(G=n.customTransformInput({data:G,action:E,field:Q,fieldAttributes:W,model:l(S),schema:o,options:r})),G!==void 0&&(O[Q]=G)}return O},p=async(v,S,E=[],_)=>{let O=async(D,P,z=[])=>{if(!D)return null;let W=n.mapKeysTransformOutput??{},Q={},G=o[c(P)].fields,J=Object.entries(W).find(([le,se])=>se==="id")?.[0];G[J??"id"]={type:r.advanced?.database?.useNumberId||r.advanced?.database?.generateId==="serial"?"number":"string"};for(let le in G){if(z.length&&!z.includes(le))continue;let se=G[le];if(se){let be=se.fieldName||le,Re=D[Object.entries(W).find(([jn,wn])=>wn===be)?.[0]||be];se.transform?.output&&(Re=await se.transform.output(Re));let Lt=W[le]||le;be==="id"||se.references?.field==="id"?typeof Re<"u"&&Re!==null&&(Re=String(Re)):n.supportsJSON===!1&&typeof Re=="string"&&se.type==="json"?Re=wt(Re):n.supportsArrays===!1&&typeof Re=="string"&&(se.type==="string[]"||se.type==="number[]")?Re=wt(Re):n.supportsDates===!1&&typeof Re=="string"&&se.type==="date"?Re=new Date(Re):n.supportsBooleans===!1&&typeof Re=="number"&&se.type==="boolean"&&(Re=Re===1),n.customTransformOutput&&(Re=n.customTransformOutput({data:Re,field:Lt,fieldAttributes:se,select:z,model:l(P),schema:o,options:r})),Q[Lt]=Re}}return Q};if(!_||Object.keys(_).length===0)return await O(v,S,E);S=c(S);let R=await O(v,S,E),B=Object.entries(_).map(([D,P])=>({modelName:l(D),defaultModelName:c(D),joinConfig:P}));if(!v)return null;for(let{modelName:D,defaultModelName:P,joinConfig:z}of B){let W=await(async()=>r.experimental?.joins?v[D]:await N({baseModel:S,baseData:R,joinModel:D,specificJoinConfig:z}))();W==null&&(W=z.relation==="one-to-one"?null:[]),z.relation==="one-to-many"&&!Array.isArray(W)&&(W=[W]);let Q=[];if(Array.isArray(W))for(let G of W){let J=await O(G,D,[]);Q.push(J)}else{let G=await O(W,D,[]);Q.push(G)}R[P]=(z.relation==="one-to-one"?Q[0]:Q)??null}return R},y=({model:v,where:S,action:E})=>{if(!S)return;let _=n.mapKeysTransformInput??{};return S.map(O=>{let{field:R,value:B,operator:D="eq",connector:P="AND"}=O;if(D==="in"&&!Array.isArray(B))throw new de("Value must be an array");let z=B,W=c(v),Q=u({field:R,model:v}),G=_[Q]||f({field:Q,model:W}),J=m({field:Q,model:W}),le=r.advanced?.database?.useNumberId||r.advanced?.database?.generateId==="serial";if((Q==="id"||J.references?.field==="id")&&le&&(Array.isArray(B)?z=B.map(Number):z=Number(B)),J.type==="date"&&B instanceof Date&&!n.supportsDates&&(z=B.toISOString()),J.type==="boolean"&&typeof B=="boolean"&&!n.supportsBooleans&&(z=B?1:0),J.type==="json"&&typeof B=="object"&&!n.supportsJSON)try{z=JSON.stringify(B)}catch(se){throw new Error(`Failed to stringify JSON value for field ${G}`,{cause:se})}return n.customTransformInput&&(z=n.customTransformInput({data:z,fieldAttributes:J,field:G,model:l(v),schema:o,options:r,action:E})),{operator:D,connector:P,field:G,value:z}})},b=(v,S,E)=>{if(!S||Object.keys(S).length===0)return;let _={};for(let[O,R]of Object.entries(S)){if(!R)continue;let B=c(O),D=c(v),P=Object.entries(o[B].fields).filter(([Re,Lt])=>Lt.references&&c(Lt.references.model)===D),z=!0;if(P.length||(P=Object.entries(o[D].fields).filter(([Re,Lt])=>Lt.references&&c(Lt.references.model)===B),z=!1),P.length){if(P.length>1)throw new de(`Multiple foreign keys found for model ${O} and base model ${v} while performing join operation. Only one foreign key is supported.`)}else throw new de(`No foreign key found for model ${O} and base model ${v} while performing join operation.`);let[W,Q]=P[0];if(!Q.references)throw new de(`No references found for foreign key ${W} on model ${O} while performing join operation.`);let G,J,le;z?(le=Q.references.field,G=f({model:v,field:le}),J=f({model:O,field:W})):(le=W,G=f({model:v,field:le}),J=f({model:O,field:Q.references.field})),E&&!E.includes(le)&&E.push(le);let se=J==="id"?!0:Q.unique??!1,be=r.advanced?.database?.defaultFindManyLimit??100;se?be=1:typeof R=="object"&&typeof R.limit=="number"&&(be=R.limit),_[l(O)]={on:{from:G,to:J},limit:be,relation:se?"one-to-one":"one-to-many"}}return{join:_,select:E}},N=async({baseModel:v,baseData:S,joinModel:E,specificJoinConfig:_})=>{if(!S)return S;let O=l(E),R=_.on.to,B=S[u({field:_.on.from,model:v})];if(B==null)return _.relation==="one-to-one"?null:[];let D,P=y({model:O,where:[{field:R,value:B,operator:"eq",connector:"AND"}],action:"findOne"});try{if(_.relation==="one-to-one")D=await T.findOne({model:O,where:P});else{let z=_.limit??r.advanced?.database?.defaultFindManyLimit??100;D=await T.findMany({model:O,where:P,limit:z})}}catch(z){throw a.error(`Failed to query fallback join for model ${O}:`,{where:P,limit:_.limit}),console.error(z),z}return D},T=t({options:r,schema:o,debugLog:s,getFieldName:f,getModelName:l,getDefaultModelName:c,getDefaultFieldName:u,getFieldAttributes:m,transformInput:h,transformOutput:p,transformWhereClause:y}),I=null,$={transaction:async v=>(I||(n.transaction?(a.debug(`[${n.adapterName}] - Using provided transaction implementation.`),I=n.transaction):I=NM($)),I(v)),create:async({data:v,model:S,select:E,forceAllowId:_=!1})=>{Nr++;let O=Nr,R=l(S);if(S=c(S),"id"in v&&typeof v.id<"u"&&!_){a.warn(`[${n.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let z=new Error().stack?.split(`
`).filter((W,Q)=>Q!==1).join(`
`).replace("Error:","Create method with `id` being called at:");console.log(z),v.id=void 0}s({method:"create"},`${At(O)} ${_t(1,4)}`,`${Et("create")} ${Kt("Unsafe Input")}:`,{model:R,data:v});let B=v;n.disableTransformInput||(B=await h(v,S,"create",_)),s({method:"create"},`${At(O)} ${_t(2,4)}`,`${Et("create")} ${Kt("Parsed Input")}:`,{model:R,data:B});let D=await T.create({data:B,model:R});s({method:"create"},`${At(O)} ${_t(3,4)}`,`${Et("create")} ${Kt("DB Result")}:`,{model:R,res:D});let P=D;return n.disableTransformOutput||(P=await p(D,S,E,void 0)),s({method:"create"},`${At(O)} ${_t(4,4)}`,`${Et("create")} ${Kt("Parsed Result")}:`,{model:R,data:P}),P},update:async({model:v,where:S,update:E})=>{Nr++;let _=Nr;v=c(v);let O=l(v),R=y({model:v,where:S,action:"update"});s({method:"update"},`${At(_)} ${_t(1,4)}`,`${Et("update")} ${Kt("Unsafe Input")}:`,{model:O,data:E});let B=E;n.disableTransformInput||(B=await h(E,v,"update")),s({method:"update"},`${At(_)} ${_t(2,4)}`,`${Et("update")} ${Kt("Parsed Input")}:`,{model:O,data:B});let D=await T.update({model:O,where:R,update:B});s({method:"update"},`${At(_)} ${_t(3,4)}`,`${Et("update")} ${Kt("DB Result")}:`,{model:O,data:D});let P=D;return n.disableTransformOutput||(P=await p(D,v,void 0,void 0)),s({method:"update"},`${At(_)} ${_t(4,4)}`,`${Et("update")} ${Kt("Parsed Result")}:`,{model:O,data:P}),P},updateMany:async({model:v,where:S,update:E})=>{Nr++;let _=Nr,O=l(v),R=y({model:v,where:S,action:"updateMany"});v=c(v),s({method:"updateMany"},`${At(_)} ${_t(1,4)}`,`${Et("updateMany")} ${Kt("Unsafe Input")}:`,{model:O,data:E});let B=E;n.disableTransformInput||(B=await h(E,v,"update")),s({method:"updateMany"},`${At(_)} ${_t(2,4)}`,`${Et("updateMany")} ${Kt("Parsed Input")}:`,{model:O,data:B});let D=await T.updateMany({model:O,where:R,update:B});return s({method:"updateMany"},`${At(_)} ${_t(3,4)}`,`${Et("updateMany")} ${Kt("DB Result")}:`,{model:O,data:D}),s({method:"updateMany"},`${At(_)} ${_t(4,4)}`,`${Et("updateMany")} ${Kt("Parsed Result")}:`,{model:O,data:D}),D},findOne:async({model:v,where:S,select:E,join:_})=>{Nr++;let O=Nr,R=l(v),B=y({model:v,where:S,action:"findOne"});v=c(v);let D,P=!0;if(n.disableTransformJoin)D=_;else{let Q=b(v,_,E);Q&&(D=Q.join,E=Q.select),!r.experimental?.joins&&D&&Object.keys(D).length>0&&(P=!1)}s({method:"findOne"},`${At(O)} ${_t(1,3)}`,`${Et("findOne")}:`,{model:R,where:B,select:E,join:D});let z=await T.findOne({model:R,where:B,select:E,join:P?D:void 0});s({method:"findOne"},`${At(O)} ${_t(2,3)}`,`${Et("findOne")} ${Kt("DB Result")}:`,{model:R,data:z});let W=z;return n.disableTransformOutput||(W=await p(z,v,E,D)),s({method:"findOne"},`${At(O)} ${_t(3,3)}`,`${Et("findOne")} ${Kt("Parsed Result")}:`,{model:R,data:W}),W},findMany:async({model:v,where:S,limit:E,sortBy:_,offset:O,join:R})=>{Nr++;let B=Nr,D=E??r.advanced?.database?.defaultFindManyLimit??100,P=l(v),z=y({model:v,where:S,action:"findMany"});v=c(v);let W,Q=!0;if(n.disableTransformJoin)W=R;else{let le=b(v,R,void 0);le&&(W=le.join),!r.experimental?.joins&&W&&Object.keys(W).length>0&&(Q=!1)}s({method:"findMany"},`${At(B)} ${_t(1,3)}`,`${Et("findMany")}:`,{model:P,where:z,limit:D,sortBy:_,offset:O,join:W});let G=await T.findMany({model:P,where:z,limit:D,sortBy:_,offset:O,join:Q?W:void 0});s({method:"findMany"},`${At(B)} ${_t(2,3)}`,`${Et("findMany")} ${Kt("DB Result")}:`,{model:P,data:G});let J=G;return n.disableTransformOutput||(J=await Promise.all(G.map(async le=>await p(le,v,void 0,W)))),s({method:"findMany"},`${At(B)} ${_t(3,3)}`,`${Et("findMany")} ${Kt("Parsed Result")}:`,{model:P,data:J}),J},delete:async({model:v,where:S})=>{Nr++;let E=Nr,_=l(v),O=y({model:v,where:S,action:"delete"});v=c(v),s({method:"delete"},`${At(E)} ${_t(1,2)}`,`${Et("delete")}:`,{model:_,where:O}),await T.delete({model:_,where:O}),s({method:"delete"},`${At(E)} ${_t(2,2)}`,`${Et("delete")} ${Kt("DB Result")}:`,{model:_})},deleteMany:async({model:v,where:S})=>{Nr++;let E=Nr,_=l(v),O=y({model:v,where:S,action:"deleteMany"});v=c(v),s({method:"deleteMany"},`${At(E)} ${_t(1,2)}`,`${Et("deleteMany")} ${Kt("DeleteMany")}:`,{model:_,where:O});let R=await T.deleteMany({model:_,where:O});return s({method:"deleteMany"},`${At(E)} ${_t(2,2)}`,`${Et("deleteMany")} ${Kt("DB Result")}:`,{model:_,data:R}),R},count:async({model:v,where:S})=>{Nr++;let E=Nr,_=l(v),O=y({model:v,where:S,action:"count"});v=c(v),s({method:"count"},`${At(E)} ${_t(1,2)}`,`${Et("count")}:`,{model:_,where:O});let R=await T.count({model:_,where:O});return s({method:"count"},`${At(E)} ${_t(2,2)}`,`${Et("count")}:`,{model:_,data:R}),R},createSchema:T.createSchema?async(v,S)=>{let E=En(r);return r.secondaryStorage&&!r.session?.storeSessionInDatabase&&delete E.session,r.rateLimit&&r.rateLimit.storage==="database"&&(typeof r.rateLimit.enabled>"u"||r.rateLimit.enabled===!0)&&(E.ratelimit={modelName:r.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:r.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:r.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:r.rateLimit.fields?.lastRequest??"lastRequest"}}}),T.createSchema({file:S,tables:E})}:void 0,options:{adapterConfig:n,...T.options??{}},id:n.adapterId,...n.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){Xh=Xh.filter(v=>v.instance!==i)},printDebugLogs(){let v="\u2500".repeat(80),S=Xh.filter(_=>_.instance===i);if(S.length===0)return;let E=S.reverse().map(_=>(_.args[0]=`
${_.args[0]}`,[..._.args,`
`])).reduce((_,O)=>[...O,..._],[`
${v}`]);console.log(...E)}}}:{}};return $}});var TP,IP=C(()=>{dr();Ed();TP=(t,e)=>{let r=null,i=Fo({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:e?.debugLogs||!1,customTransformInput(n){return(n.options.advanced?.database?.useNumberId||n.options.advanced?.database?.generateId==="serial")&&n.field==="id"&&n.action==="create"?t[n.model].length+1:n.data},transaction:async n=>{let o=structuredClone(t);try{return await n(i(r))}catch(s){throw Object.keys(t).forEach(a=>{t[a]=o[a]}),s}}},adapter:({getFieldName:n,options:o,getModelName:s})=>{let a=(u,l,f)=>l?u.sort((d,m)=>{let h=n({model:f,field:l.field}),p=d[h],y=m[h],b=0;return p==null&&y==null?b=0:p==null?b=-1:y==null?b=1:typeof p=="string"&&typeof y=="string"?b=p.localeCompare(y):p instanceof Date&&y instanceof Date?b=p.getTime()-y.getTime():typeof p=="number"&&typeof y=="number"?b=p-y:typeof p=="boolean"&&typeof y=="boolean"?b=p===y?0:p?1:-1:b=String(p).localeCompare(String(y)),l.direction==="asc"?b:-b}):u;function c(u,l,f){let d=(y,b)=>{let N=t[b];if(!N)throw ye.error(`[MemoryAdapter] Model ${b} not found in the DB`,Object.keys(t)),new Error(`Model ${b} not found`);let T=(I,$)=>{let{field:v,value:S,operator:E}=$;switch(E){case"in":if(!Array.isArray(S))throw new Error("Value must be an array");return S.includes(I[v]);case"not_in":if(!Array.isArray(S))throw new Error("Value must be an array");return!S.includes(I[v]);case"contains":return I[v].includes(S);case"starts_with":return I[v].startsWith(S);case"ends_with":return I[v].endsWith(S);case"ne":return I[v]!==S;case"gt":return S!=null&&I[v]>S;case"gte":return S!=null&&I[v]>=S;case"lt":return S!=null&&I[v]<S;case"lte":return S!=null&&I[v]<=S;default:return I[v]===S}};return N.filter(I=>{if(!y.length||y.length===0)return!0;let $=T(I,y[0]);for(let v of y){let S=T(I,v);v.connector==="OR"?$=$||S:$=$&&S}return $})};if(!f)return d(u,l);let m=d(u,l),h=new Map,p=new Map;for(let y of m){let b=String(y.id);if(!h.has(b)){let T={...y};for(let[I,$]of Object.entries(f)){let v=s(I);$.relation==="one-to-one"?T[v]=null:(T[v]=[],p.set(`${b}-${I}`,new Set))}h.set(b,T)}let N=h.get(b);for(let[T,I]of Object.entries(f)){let $=s(T),v=t[$];if(!v)throw ye.error(`[MemoryAdapter] JoinOption model ${$} not found in the DB`,Object.keys(t)),new Error(`JoinOption model ${$} not found`);let S=v.filter(E=>E[I.on.to]===y[I.on.from]);if(I.relation==="one-to-one")N[$]=S[0]||null;else{let E=p.get(`${b}-${T}`),_=I.limit??100,O=0;for(let R of S){if(O>=_)break;E.has(R.id)||(N[$].push(R),E.add(R.id),O++)}}}}return Array.from(h.values())}return{create:async({model:u,data:l})=>((o.advanced?.database?.useNumberId||o.advanced?.database?.generateId==="serial")&&(l.id=t[s(u)].length+1),t[u]||(t[u]=[]),t[u].push(l),l),findOne:async({model:u,where:l,join:f})=>{let d=c(l,u,f);if(f){let m=d;return m.length?m[0]:null}return d[0]||null},findMany:async({model:u,where:l,sortBy:f,limit:d,offset:m,join:h})=>{let p=c(l||[],u,h);if(h){let b=p;if(!b.length)return[];a(b,f,u);let N=b;return m!==void 0&&(N=N.slice(m)),d!==void 0&&(N=N.slice(0,d)),N}let y=a(p,f,u);return m!==void 0&&(y=y.slice(m)),d!==void 0&&(y=y.slice(0,d)),y||[]},count:async({model:u,where:l})=>l?c(l,u).length:t[u].length,update:async({model:u,where:l,update:f})=>{let d=c(l,u);return d.forEach(m=>{Object.assign(m,f)}),d[0]||null},delete:async({model:u,where:l})=>{let f=t[u],d=c(l,u);t[u]=f.filter(m=>!d.includes(m))},deleteMany:async({model:u,where:l})=>{let f=t[u],d=c(l,u),m=0;return t[u]=f.filter(h=>d.includes(h)?(m++,!1):!d.includes(h)),m},updateMany({model:u,where:l,update:f}){let d=c(l,u);return d.forEach(m=>{Object.assign(m,f)}),d[0]||null}}}});return n=>(r=n,i(n))}});var $P={};ar($P,{memoryAdapter:()=>TP});var OP=C(()=>{IP()});function Ur(t){return typeof t>"u"||t===void 0}function Qe(t){return typeof t=="string"}function Xn(t){return typeof t=="number"}function no(t){return typeof t=="boolean"}function Vo(t){return t===null}function tg(t){return t instanceof Date}function Ko(t){return typeof t=="bigint"}function CP(t){return typeof Buffer<"u"&&Buffer.isBuffer(t)}function Ze(t){return typeof t=="function"}function Rt(t){return typeof t=="object"&&t!==null}function w(t){return Object.freeze(t)}function kd(t){return Ar(t)?t:[t]}function Ar(t){return Array.isArray(t)}function Dr(t){return t}var q=C(()=>{});var Be,ta=C(()=>{q();Be=w({is(t){return t.kind==="AlterTableNode"},create(t){return w({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return w({...t,...e})},cloneWithColumnAlteration(t,e){return w({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}})});var we,ot=C(()=>{q();we=w({is(t){return t.kind==="IdentifierNode"},create(t){return w({kind:"IdentifierNode",name:t})}})});var ei,rg=C(()=>{q();ot();ei=w({is(t){return t.kind==="CreateIndexNode"},create(t){return w({kind:"CreateIndexNode",name:we.create(t)})},cloneWith(t,e){return w({...t,...e})},cloneWithColumns(t,e){return w({...t,columns:[...t.columns||[],...e]})}})});var ng,ig=C(()=>{q();ot();ng=w({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return w({kind:"CreateSchemaNode",schema:we.create(t),...e})},cloneWith(t,e){return w({...t,...e})}})});var PP,_r,Ec=C(()=>{q();PP=["preserve rows","delete rows","drop"],_r=w({is(t){return t.kind==="CreateTableNode"},create(t){return w({kind:"CreateTableNode",table:t,columns:w([])})},cloneWithColumn(t,e){return w({...t,columns:w([...t.columns,e])})},cloneWithConstraint(t,e){return w({...t,constraints:t.constraints?w([...t.constraints,e]):w([e])})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):w([e])})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):w([e])})},cloneWith(t,e){return w({...t,...e})}})});var Er,io=C(()=>{q();ot();Er=w({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return w({kind:"SchemableIdentifierNode",identifier:we.create(t)})},createWithSchema(t,e){return w({kind:"SchemableIdentifierNode",schema:we.create(t),identifier:we.create(e)})}})});var Ho,Td=C(()=>{q();io();Ho=w({is(t){return t.kind==="DropIndexNode"},create(t,e){return w({kind:"DropIndexNode",name:Er.create(t),...e})},cloneWith(t,e){return w({...t,...e})}})});var Id,og=C(()=>{q();ot();Id=w({is(t){return t.kind==="DropSchemaNode"},create(t,e){return w({kind:"DropSchemaNode",schema:we.create(t),...e})},cloneWith(t,e){return w({...t,...e})}})});var $d,sg=C(()=>{q();$d=w({is(t){return t.kind==="DropTableNode"},create(t,e){return w({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return w({...t,...e})}})});var rr,ti=C(()=>{q();rr=w({is(t){return t.kind==="AliasNode"},create(t,e){return w({kind:"AliasNode",node:t,alias:e})}})});var Vr,kc=C(()=>{q();io();Vr=w({is(t){return t.kind==="TableNode"},create(t){return w({kind:"TableNode",table:Er.create(t)})},createWithSchema(t,e){return w({kind:"TableNode",table:Er.createWithSchema(t,e)})}})});function dt(t){return Rt(t)&&Ze(t.toOperationNode)}var Kr=C(()=>{q()});function ag(t){return Rt(t)&&"expressionType"in t&&dt(t)}function RP(t){return Rt(t)&&"expression"in t&&Qe(t.alias)&&dt(t)}var cg=C(()=>{Kr();q()});var Ii,FA=C(()=>{q();Ii=w({is(t){return t.kind==="SelectModifierNode"},create(t,e){return w({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return w({kind:"SelectModifierNode",rawModifier:t})}})});var Hr,Jo=C(()=>{q();Hr=w({is(t){return t.kind==="AndNode"},create(t,e){return w({kind:"AndNode",left:t,right:e})}})});var ri,ra=C(()=>{q();ri=w({is(t){return t.kind==="OrNode"},create(t,e){return w({kind:"OrNode",left:t,right:e})}})});var ug,VA=C(()=>{q();Jo();ra();ug=w({is(t){return t.kind==="OnNode"},create(t){return w({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return w({...t,on:e==="And"?Hr.create(t.on,r):ri.create(t.on,r)})}})});var ni,Tc=C(()=>{q();VA();ni=w({is(t){return t.kind==="JoinNode"},create(t,e){return w({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return w({kind:"JoinNode",joinType:t,table:e,on:ug.create(r)})},cloneWithOn(t,e){return w({...t,on:t.on?ug.cloneWithOperation(t.on,"And",e):ug.create(e)})}})});var Qo,lg=C(()=>{q();Qo=w({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return w({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}})});function KA(t){return Qe(t)&&UP.includes(t)}var AM,_M,UP,EM,kM,TM,DP,dn,na=C(()=>{q();AM=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],_M=["+","-","*","/","%","^","&","|","#","<<",">>"],UP=["->","->>"],EM=[...AM,..._M,"&&","||"],kM=["exists","not exists"],TM=["not","-",...kM],DP=[...EM,...UP,...TM,"between","between symmetric"],dn=w({is(t){return t.kind==="OperatorNode"},create(t){return w({kind:"OperatorNode",operator:t})}})});var Le,kr=C(()=>{q();ot();Le=w({is(t){return t.kind==="ColumnNode"},create(t){return w({kind:"ColumnNode",column:we.create(t)})}})});var Ic,Od=C(()=>{q();Ic=w({is(t){return t.kind==="SelectAllNode"},create(){return w({kind:"SelectAllNode"})}})});var $c,dg=C(()=>{Od();q();$c=w({is(t){return t.kind==="ReferenceNode"},create(t,e){return w({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return w({kind:"ReferenceNode",table:t,column:Ic.create()})}})});function pg(t){return Rt(t)&&dt(t)&&Qe(t.dynamicReference)}var fg,Cd=C(()=>{Kr();fr();q();fg=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return HA(this.#e)}}});var ii,mg=C(()=>{q();ii=w({is(t){return t.kind==="OrderByItemNode"},create(t,e){return w({kind:"OrderByItemNode",orderBy:t,direction:e})},cloneWith(t,e){return w({...t,...e})}})});var Me,kn=C(()=>{q();Me=w({is(t){return t.kind==="RawNode"},create(t,e){return w({kind:"RawNode",sqlFragments:w(t),parameters:w(e)})},createWithSql(t){return Me.create([t],[])},createWithChild(t){return Me.create(["",""],[t])},createWithChildren(t){return Me.create(new Array(t.length+1).fill(""),t)}})});var LP,JA=C(()=>{q();ot();LP=w({is(t){return t.kind==="CollateNode"},create(t){return w({kind:"CollateNode",collation:we.create(t)})}})});var hg,QA=C(()=>{JA();mg();kn();q();hg=class t{#e;constructor(e){this.#e=w(e)}desc(){return new t({node:ii.cloneWith(this.#e.node,{direction:Me.createWithSql("desc")})})}asc(){return new t({node:ii.cloneWith(this.#e.node,{direction:Me.createWithSql("asc")})})}nullsLast(){return new t({node:ii.cloneWith(this.#e.node,{nulls:"last"})})}nullsFirst(){return new t({node:ii.cloneWith(this.#e.node,{nulls:"first"})})}collate(e){return new t({node:ii.cloneWith(this.#e.node,{collation:LP.create(e)})})}toOperationNode(){return this.#e.node}}});function $i(t){zP.has(t)||(zP.add(t),console.log(t))}var zP,Pd=C(()=>{zP=new Set});function GA(t){return t==="asc"||t==="desc"}function pn(t){if(t.length===2)return[ZA(t[0],t[1])];if(t.length===1){let[e]=t;return Array.isArray(e)?($i("orderBy(array) is deprecated, use multiple orderBy calls instead."),e.map(r=>ZA(r))):[ZA(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function ZA(t,e){let r=IM(t);if(ii.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return jP(r,e)}function IM(t){if(oo(t))return Jr(t);if(pg(t))return t.toOperationNode();let[e,r]=t.split(" ");return r?($i("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),jP(fn(e),r)):fn(t)}function jP(t,e){if(typeof e=="string"){if(!GA(e))throw new Error(`Invalid order by direction: ${e}`);return ii.create(t,Me.createWithSql(e))}if(ag(e))return $i("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),ii.create(t,e.toOperationNode());let r=ii.create(t);return e?e(new hg({node:r})).toOperationNode():r}var ia=C(()=>{Cd();cg();mg();kn();QA();Pd();oi();fr()});var Oc,gg=C(()=>{q();Oc=w({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return w({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return w({...t,traversal:e})}})});var yg,wg=C(()=>{q();yg=w({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return w({kind:"JSONOperatorChainNode",operator:t,values:w([])})},cloneWithValue(t,e){return w({...t,values:w([...t.values,e])})}})});var Zo,Rd=C(()=>{q();Zo=w({is(t){return t.kind==="JSONPathNode"},create(t){return w({kind:"JSONPathNode",inOperator:t,pathLegs:w([])})},cloneWithLeg(t,e){return w({...t,pathLegs:w([...t.pathLegs,e])})}})});function HA(t){return Qe(t)?fn(t):t.toOperationNode()}function so(t){return Ar(t)?t.map(e=>pr(e)):[pr(t)]}function pr(t){return oo(t)?Jr(t):HA(t)}function BP(t,e){let r=fn(t);if(KA(e))return Oc.create(r,yg.create(dn.create(e)));let i=e.slice(0,-1);if(KA(i))return Oc.create(r,Zo.create(dn.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function fn(t){if(!t.includes("."))return $c.create(Le.create(t));let r=t.split(".").map(XA);if(r.length===3)return $M(r);if(r.length===2)return OM(r);throw new Error(`invalid column reference ${t}`)}function MP(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(XA);return rr.create(fn(r),we.create(i))}else return fn(t)}function YA(t){return Le.create(t)}function Cc(t){if(t.includes(" ")){let[r,i]=t.split(" ").map(XA);if(!GA(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return pn([r,i])[0]}else return YA(t)}function $M(t){let[e,r,i]=t;return $c.create(Le.create(i),Vr.createWithSchema(e,r))}function OM(t){let[e,r]=t;return $c.create(Le.create(r),Vr.create(e))}function XA(t){return t.trim()}var fr=C(()=>{ti();kr();dg();kc();q();oi();ot();ia();na();gg();wg();Rd()});var bg,vg=C(()=>{q();bg=w({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return w({kind:"PrimitiveValueListNode",values:w([...t])})}})});var Go,Pc=C(()=>{q();Go=w({is(t){return t.kind==="ValueListNode"},create(t){return w({kind:"ValueListNode",values:w(t)})}})});var Bt,Oi=C(()=>{q();Bt=w({is(t){return t.kind==="ValueNode"},create(t){return w({kind:"ValueNode",value:t})},createImmediate(t){return w({kind:"ValueNode",value:t,immediate:!0})}})});function qP(t){return Ar(t)?CM(t):tt(t)}function tt(t){return oo(t)?Jr(t):Bt.create(t)}function xg(t){return Xn(t)||no(t)||Vo(t)}function Ud(t){if(!xg(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Bt.createImmediate(t)}function CM(t){return t.some(oo)?Go.create(t.map(e=>tt(e))):bg.create(t)}var Ci=C(()=>{vg();Pc();Oi();q();oi()});var mn,Rc=C(()=>{q();mn=w({is(t){return t.kind==="ParensNode"},create(t){return w({kind:"ParensNode",node:t})}})});function st(t){if(t.length===3)return Sg(t[0],t[1],t[2]);if(t.length===1)return tt(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Sg(t,e,r){return PM(e)&&FP(r)?Qo.create(pr(t),e_(e),Bt.createImmediate(r)):Qo.create(pr(t),e_(e),qP(r))}function nr(t,e,r){return Qo.create(pr(t),e_(e),pr(r))}function t_(t,e){return Uc(Object.entries(t).filter(([,r])=>!Ur(r)).map(([r,i])=>Sg(r,FP(i)?"is":"=",i)),e)}function Uc(t,e,r=!0){let i=e==="and"?Hr.create:ri.create;if(t.length===0)return Qo.create(Bt.createImmediate(1),dn.create("="),Bt.createImmediate(e==="and"?1:0));let n=WP(t[0]);for(let o=1;o<t.length;++o)n=i(n,WP(t[o]));return t.length>1&&r?mn.create(n):n}function PM(t){return t==="is"||t==="is not"}function FP(t){return Vo(t)||no(t)}function e_(t){if(Qe(t)&&DP.includes(t))return dn.create(t);if(dt(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function WP(t){return dt(t)?t.toOperationNode():t}var hn=C(()=>{lg();q();Kr();na();fr();Ci();Oi();Jo();Rc();ra()});var ao,Dd=C(()=>{q();ao=w({is(t){return t.kind==="OrderByNode"},create(t){return w({kind:"OrderByNode",items:w([...t])})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}})});var r_,n_=C(()=>{q();r_=w({is(t){return t.kind==="PartitionByNode"},create(t){return w({kind:"PartitionByNode",items:w(t)})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}})});var Ld,Ng=C(()=>{q();Dd();n_();Ld=w({is(t){return t.kind==="OverNode"},create(){return w({kind:"OverNode"})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?ao.cloneWithItems(t.orderBy,e):ao.create(e)})},cloneWithPartitionByItems(t,e){return w({...t,partitionBy:t.partitionBy?r_.cloneWithItems(t.partitionBy,e):r_.create(e)})}})});var oa,zd=C(()=>{q();oa=w({is(t){return t.kind==="FromNode"},create(t){return w({kind:"FromNode",froms:w(t)})},cloneWithFroms(t,e){return w({...t,froms:w([...t.froms,...e])})}})});var i_,o_=C(()=>{q();i_=w({is(t){return t.kind==="GroupByNode"},create(t){return w({kind:"GroupByNode",items:w(t)})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}})});var s_,a_=C(()=>{q();Jo();ra();s_=w({is(t){return t.kind==="HavingNode"},create(t){return w({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return w({...t,having:e==="And"?Hr.create(t.having,r):ri.create(t.having,r)})}})});var It,sa=C(()=>{q();It=w({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return w({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},createWithoutInto(){return w({kind:"InsertQueryNode"})},cloneWith(t,e){return w({...t,...e})}})});var Ag,_g=C(()=>{q();Ag=w({is(t){return t.kind==="ListNode"},create(t){return w({kind:"ListNode",items:w(t)})}})});var Pi,Dc=C(()=>{q();zd();_g();Pi=w({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return w({kind:"UpdateQueryNode",table:t.length===1?t[0]:Ag.create(t),...e&&{with:e}})},createWithoutTable(){return w({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return w({...t,from:t.from?oa.cloneWithFroms(t.from,e):oa.create(e)})},cloneWithUpdates(t,e){return w({...t,updates:t.updates?w([...t.updates,...e]):e})},cloneWithLimit(t,e){return w({...t,limit:e})}})});var jd,Eg=C(()=>{q();jd=w({is(t){return t.kind==="UsingNode"},create(t){return w({kind:"UsingNode",tables:w(t)})},cloneWithTables(t,e){return w({...t,tables:w([...t.tables,...e])})}})});var Yo,Bd=C(()=>{q();zd();Eg();Tn();Yo=w({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return w({kind:"DeleteQueryNode",from:oa.create(t),...e&&{with:e}})},cloneWithOrderByItems:(t,e)=>ie.cloneWithOrderByItems(t,e),cloneWithoutOrderBy:t=>ie.cloneWithoutOrderBy(t),cloneWithLimit(t,e){return w({...t,limit:e})},cloneWithoutLimit(t){return w({...t,limit:void 0})},cloneWithUsing(t,e){return w({...t,using:t.using!==void 0?jd.cloneWithTables(t.using,e):jd.create(e)})}})});var mr,Md=C(()=>{q();Jo();ra();mr=w({is(t){return t.kind==="WhereNode"},create(t){return w({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return w({...t,where:e==="And"?Hr.create(t.where,r):ri.create(t.where,r)})}})});var c_,u_=C(()=>{q();c_=w({is(t){return t.kind==="ReturningNode"},create(t){return w({kind:"ReturningNode",selections:w(t)})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})}})});var VP,l_=C(()=>{q();VP=w({is(t){return t.kind==="ExplainNode"},create(t,e){return w({kind:"ExplainNode",format:t,options:e})}})});var In,aa=C(()=>{q();In=w({is(t){return t.kind==="WhenNode"},create(t){return w({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return w({...t,result:e})}})});var gn,qd=C(()=>{q();aa();gn=w({is(t){return t.kind==="MergeQueryNode"},create(t,e){return w({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return w({...t,using:e})},cloneWithWhen(t,e){return w({...t,whens:t.whens?w([...t.whens,e]):w([e])})},cloneWithThen(t,e){return w({...t,whens:t.whens?w([...t.whens.slice(0,-1),In.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}})});var d_,f_=C(()=>{q();d_=w({is(t){return t.kind==="OutputNode"},create(t){return w({kind:"OutputNode",selections:w(t)})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})}})});var ie,Tn=C(()=>{sa();ca();Dc();Bd();Md();q();u_();l_();qd();f_();Dd();ie=w({is(t){return Ke.is(t)||It.is(t)||Pi.is(t)||Yo.is(t)||gn.is(t)},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):w([e])})},cloneWithWhere(t,e){return w({...t,where:t.where?mr.cloneWithOperation(t.where,"And",e):mr.create(e)})},cloneWithJoin(t,e){return w({...t,joins:t.joins?w([...t.joins,e]):w([e])})},cloneWithReturning(t,e){return w({...t,returning:t.returning?c_.cloneWithSelections(t.returning,e):c_.create(e)})},cloneWithoutReturning(t){return w({...t,returning:void 0})},cloneWithoutWhere(t){return w({...t,where:void 0})},cloneWithExplain(t,e,r){return w({...t,explain:VP.create(e,r?.toOperationNode())})},cloneWithTop(t,e){return w({...t,top:e})},cloneWithOutput(t,e){return w({...t,output:t.output?d_.cloneWithSelections(t.output,e):d_.create(e)})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?ao.cloneWithItems(t.orderBy,e):ao.create(e)})},cloneWithoutOrderBy(t){return w({...t,orderBy:void 0})}})});var Ke,ca=C(()=>{q();zd();o_();a_();Tn();Ke=w({is(t){return t.kind==="SelectQueryNode"},create(t){return w({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return w({kind:"SelectQueryNode",from:oa.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})},cloneWithDistinctOn(t,e){return w({...t,distinctOn:t.distinctOn?w([...t.distinctOn,...e]):w(e)})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):w([e])})},cloneWithOrderByItems:(t,e)=>ie.cloneWithOrderByItems(t,e),cloneWithGroupByItems(t,e){return w({...t,groupBy:t.groupBy?i_.cloneWithItems(t.groupBy,e):i_.create(e)})},cloneWithLimit(t,e){return w({...t,limit:e})},cloneWithOffset(t,e){return w({...t,offset:e})},cloneWithFetch(t,e){return w({...t,fetch:e})},cloneWithHaving(t,e){return w({...t,having:t.having?s_.cloneWithOperation(t.having,"And",e):s_.create(e)})},cloneWithSetOperations(t,e){return w({...t,setOperations:t.setOperations?w([...t.setOperations,...e]):w([...e])})},cloneWithoutSelections(t){return w({...t,selections:[]})},cloneWithoutLimit(t){return w({...t,limit:void 0})},cloneWithoutOffset(t){return w({...t,offset:void 0})},cloneWithoutOrderBy:t=>ie.cloneWithoutOrderBy(t),cloneWithoutGroupBy(t){return w({...t,groupBy:void 0})}})});var kg,p_=C(()=>{Tc();kn();hn();q();kg=class t{#e;constructor(e){this.#e=w(e)}on(...e){return new t({...this.#e,joinNode:ni.cloneWithOn(this.#e.joinNode,st(e))})}onRef(e,r,i){return new t({...this.#e,joinNode:ni.cloneWithOn(this.#e.joinNode,nr(e,r,i))})}onTrue(){return new t({...this.#e,joinNode:ni.cloneWithOn(this.#e.joinNode,Me.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}});var KP,m_=C(()=>{q();KP=w({is(t){return t.kind==="PartitionByItemNode"},create(t){return w({kind:"PartitionByItemNode",partitionBy:t})}})});function HP(t){return so(t).map(KP.create)}var JP=C(()=>{m_();fr()});var Tg,QP=C(()=>{Ng();Tn();ia();JP();q();Tg=class t{#e;constructor(e){this.#e=w(e)}orderBy(...e){return new t({overNode:Ld.cloneWithOrderByItems(this.#e.overNode,pn(e))})}clearOrderBy(){return new t({overNode:ie.cloneWithoutOrderBy(this.#e.overNode)})}partitionBy(e){return new t({overNode:Ld.cloneWithPartitionByItems(this.#e.overNode,HP(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}});var Lc,h_=C(()=>{q();dg();Od();Lc=w({is(t){return t.kind==="SelectionNode"},create(t){return w({kind:"SelectionNode",selection:t})},createSelectAll(){return w({kind:"SelectionNode",selection:Ic.create()})},createSelectAllFromTable(t){return w({kind:"SelectionNode",selection:$c.createSelectAll(t)})}})});function Ht(t){return Ze(t)?Ht(t(si())):Ar(t)?t.map(e=>ZP(e)):[ZP(t)]}function ZP(t){return Qe(t)?Lc.create(MP(t)):pg(t)?Lc.create(t.toOperationNode()):Lc.create(Ig(t))}function ir(t){return t?Array.isArray(t)?t.map(GP):[GP(t)]:[Lc.createSelectAll()]}function GP(t){if(Qe(t))return Lc.createSelectAllFromTable(qe(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}var Xo=C(()=>{q();h_();fr();Cd();oi();hr();ua()});var YP,g_=C(()=>{q();YP=w({is(t){return t.kind==="ValuesNode"},create(t){return w({kind:"ValuesNode",values:w(t)})}})});var XP,y_=C(()=>{q();XP=w({is(t){return t.kind==="DefaultInsertValueNode"},create(){return w({kind:"DefaultInsertValueNode"})}})});function $g(t){let e=Ze(t)?t(si()):t,r=Ar(e)?e:w([e]);return RM(r)}function RM(t){let e=UM(t);return[w([...e.keys()].map(Le.create)),YP.create(t.map(r=>DM(r,e)))]}function UM(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let n of i)!e.has(n)&&r[n]!==void 0&&e.set(n,e.size)}return e}function DM(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),n=!1,o=r.length;for(let a of r){let c=e.get(a);if(Ur(c)){o--;continue}let u=t[a];(Ur(u)||oo(u))&&(n=!0),i[c]=u}if(o<e.size||n){let a=XP.create();return Go.create(i.map(c=>Ur(c)?a:tt(c)))}return bg.create(i)}var w_=C(()=>{kr();vg();Pc();q();Ci();g_();oi();y_();ua()});var b_,v_=C(()=>{q();b_=w({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return w({kind:"ColumnUpdateNode",column:t,value:e})}})});function eR(...t){return t.length===2?[b_.create(pr(t[0]),tt(t[1]))]:Wd(t[0])}function Wd(t){let e=Ze(t)?t(si()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>b_.create(Le.create(r),tt(i)))}var Og=C(()=>{kr();v_();ua();q();Ci();fr()});var tR,x_=C(()=>{q();tR=w({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return w({kind:"OnDuplicateKeyNode",updates:t})}})});var Cg,S_=C(()=>{Cg=class{insertId;numInsertedOrUpdatedRows;constructor(e,r){this.insertId=e,this.numInsertedOrUpdatedRows=r}}});function Ri(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}var $n,la=C(()=>{$n=class extends Error{node;constructor(e){super("no result"),this.node=e}}});var Lr,Pg=C(()=>{q();Md();Lr=w({is(t){return t.kind==="OnConflictNode"},create(){return w({kind:"OnConflictNode"})},cloneWith(t,e){return w({...t,...e})},cloneWithIndexWhere(t,e){return w({...t,indexWhere:t.indexWhere?mr.cloneWithOperation(t.indexWhere,"And",e):mr.create(e)})},cloneWithIndexOrWhere(t,e){return w({...t,indexWhere:t.indexWhere?mr.cloneWithOperation(t.indexWhere,"Or",e):mr.create(e)})},cloneWithUpdateWhere(t,e){return w({...t,updateWhere:t.updateWhere?mr.cloneWithOperation(t.updateWhere,"And",e):mr.create(e)})},cloneWithUpdateOrWhere(t,e){return w({...t,updateWhere:t.updateWhere?mr.cloneWithOperation(t.updateWhere,"Or",e):mr.create(e)})},cloneWithoutIndexWhere(t){return w({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return w({...t,updateWhere:void 0})}})});var Rg,N_,A_,__=C(()=>{kr();ot();Pg();hn();Og();q();Rg=class t{#e;constructor(e){this.#e=w(e)}column(e){let r=Le.create(e);return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?w([...this.#e.onConflictNode.columns,r]):w([r])})})}columns(e){let r=e.map(Le.create);return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?w([...this.#e.onConflictNode.columns,...r]):w(r)})})}constraint(e){return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{constraint:we.create(e)})})}expression(e){return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new t({...this.#e,onConflictNode:Lr.cloneWithIndexWhere(this.#e.onConflictNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:Lr.cloneWithIndexWhere(this.#e.onConflictNode,nr(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:Lr.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new N_({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new A_({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{updates:Wd(e)})})}$call(e){return e(this)}},N_=class{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.onConflictNode}},A_=class t{#e;constructor(e){this.#e=w(e)}where(...e){return new t({...this.#e,onConflictNode:Lr.cloneWithUpdateWhere(this.#e.onConflictNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:Lr.cloneWithUpdateWhere(this.#e.onConflictNode,nr(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:Lr.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}});var rR,E_=C(()=>{q();rR=w({is(t){return t.kind==="TopNode"},create(t,e){return w({kind:"TopNode",expression:t,modifiers:e})}})});function ai(t,e){if(!Xn(t)&&!Ko(t))throw new Error(`Invalid top expression: ${t}`);if(!Ur(e)&&!LM(e))throw new Error(`Invalid top modifiers: ${e}`);return rR.create(t,e)}function LM(t){return t==="percent"||t==="with ties"||t==="percent with ties"}var zc=C(()=>{E_();q()});var da,k_=C(()=>{q();da=w({is(t){return t.kind==="OrActionNode"},create(t){return w({kind:"OrActionNode",action:t})}})});var Fd,T_=C(()=>{Xo();w_();sa();Tn();Og();q();x_();S_();la();oi();kr();__();Pg();zc();k_();Fd=class t{#e;constructor(e){this.#e=w(e)}values(e){let[r,i]=$g(e);return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{columns:w(e.map(Le.create))})})}expression(e){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{values:Jr(e)})})}defaultValues(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{orAction:da.create("ignore")})})}orIgnore(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{orAction:da.create("ignore")})})}orAbort(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{orAction:da.create("abort")})})}orFail(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{orAction:da.create("fail")})})}orReplace(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{orAction:da.create("replace")})})}orRollback(){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{orAction:da.create("rollback")})})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ai(e,r))})}onConflict(e){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{onConflict:e(new Rg({onConflictNode:Lr.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new t({...this.#e,queryNode:It.cloneWith(this.#e.queryNode,{onDuplicateKey:tR.create(Wd(e))})})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,ir())})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,ir(e))})}clearReturning(){return new t({...this.#e,queryNode:ie.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Cg(r.insertId,r.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=$n){let r=await this.executeTakeFirst();if(r===void 0)throw Ri(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}}});var Ug,I_=C(()=>{Ug=class{numDeletedRows;constructor(e){this.numDeletedRows=e}}});var jc,Vd=C(()=>{q();jc=w({is(t){return t.kind==="LimitNode"},create(t){return w({kind:"LimitNode",limit:t})}})});var Dg,$_=C(()=>{Kd();hr();Xo();Tn();q();la();I_();Bd();Vd();ia();hn();Ci();zc();Dg=class t{#e;constructor(e){this.#e=w(e)}where(...e){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,nr(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:ie.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ai(e,r))})}using(e){return new t({...this.#e,queryNode:Yo.cloneWithUsing(this.#e.queryNode,ci(e))})}innerJoin(...e){return this.#t("InnerJoin",e)}leftJoin(...e){return this.#t("LeftJoin",e)}rightJoin(...e){return this.#t("RightJoin",e)}fullJoin(...e){return this.#t("FullJoin",e)}#t(e,r){return new t({...this.#e,queryNode:ie.cloneWithJoin(this.#e.queryNode,es(e,r))})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,ir(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,ir(e))})}clearReturning(){return new t({...this.#e,queryNode:ie.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:Yo.cloneWithoutLimit(this.#e.queryNode)})}orderBy(...e){return new t({...this.#e,queryNode:ie.cloneWithOrderByItems(this.#e.queryNode,pn(e))})}clearOrderBy(){return new t({...this.#e,queryNode:ie.cloneWithoutOrderBy(this.#e.queryNode)})}limit(e){return new t({...this.#e,queryNode:Yo.cloneWithLimit(this.#e.queryNode,jc.create(tt(e)))})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Ug(r.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=$n){let r=await this.executeTakeFirst();if(r===void 0)throw Ri(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}}});var Lg,O_=C(()=>{Lg=class{numUpdatedRows;numChangedRows;constructor(e,r){this.numUpdatedRows=e,this.numChangedRows=r}}});var Bc,zg=C(()=>{Kd();hr();Xo();Tn();Dc();Og();q();O_();la();hn();Ci();Vd();zc();ia();Bc=class t{#e;constructor(e){this.#e=w(e)}where(...e){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,nr(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:ie.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ai(e,r))})}from(e){return new t({...this.#e,queryNode:Pi.cloneWithFromItems(this.#e.queryNode,ci(e))})}innerJoin(...e){return this.#t("InnerJoin",e)}leftJoin(...e){return this.#t("LeftJoin",e)}rightJoin(...e){return this.#t("RightJoin",e)}fullJoin(...e){return this.#t("FullJoin",e)}#t(e,r){return new t({...this.#e,queryNode:ie.cloneWithJoin(this.#e.queryNode,es(e,r))})}orderBy(...e){return new t({...this.#e,queryNode:ie.cloneWithOrderByItems(this.#e.queryNode,pn(e))})}clearOrderBy(){return new t({...this.#e,queryNode:ie.cloneWithoutOrderBy(this.#e.queryNode)})}limit(e){return new t({...this.#e,queryNode:Pi.cloneWithLimit(this.#e.queryNode,jc.create(tt(e)))})}set(...e){return new t({...this.#e,queryNode:Pi.cloneWithUpdates(this.#e.queryNode,eR(...e))})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,ir(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,ir(e))})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new t({...this.#e,queryNode:ie.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Lg(r.numAffectedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=$n){let r=await this.executeTakeFirst();if(r===void 0)throw Ri(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}}});var C_,P_=C(()=>{q();kr();kc();C_=w({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return w({kind:"CommonTableExpressionNameNode",table:Vr.create(t),columns:e?w(e.map(Le.create)):void 0})}})});var Mc,jg=C(()=>{q();Mc=w({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return w({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return w({...t,...e})}})});var Bg,nR=C(()=>{jg();q();Bg=class t{#e;constructor(e){this.#e=w(e)}materialized(){return new t({...this.#e,node:Mc.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new t({...this.#e,node:Mc.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}});function R_(t,e){let r=e(sR()).toOperationNode();return Ze(t)?t(zM(r)).toOperationNode():Mc.create(iR(t),r)}function zM(t){return e=>new Bg({node:Mc.create(iR(e),t)})}function iR(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(n=>n.trim());return C_.create(r,i)}else return C_.create(t)}var oR=C(()=>{P_();Mg();q();nR();jg()});var Hd,U_=C(()=>{q();Hd=w({is(t){return t.kind==="WithNode"},create(t,e){return w({kind:"WithNode",expressions:w([t]),...e})},cloneWithExpression(t,e){return w({...t,expressions:w([...t.expressions,e])})}})});function qg(t){let e="";for(let r=0;r<t;++r)e+=jM();return e}function jM(){return aR[~~(Math.random()*aR.length)]}var aR,D_=C(()=>{aR=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]});function xe(){return new L_}var L_,Ui=C(()=>{D_();L_=class{#e;get queryId(){return this.#e===void 0&&(this.#e=qg(8)),this.#e}}});var qc,Wg=C(()=>{q();qc=class{nodeStack=[];#e=w({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(e,r){if(!e)return e;this.nodeStack.push(e);let i=this.transformNodeImpl(e,r);return this.nodeStack.pop(),w(i)}transformNodeImpl(e,r){return this.#e[e.kind](e,r)}transformNodeList(e,r){return e&&w(e.map(i=>this.transformNode(i,r)))}transformSelectQuery(e,r){return{kind:"SelectQueryNode",from:this.transformNode(e.from,r),selections:this.transformNodeList(e.selections,r),distinctOn:this.transformNodeList(e.distinctOn,r),joins:this.transformNodeList(e.joins,r),groupBy:this.transformNode(e.groupBy,r),orderBy:this.transformNode(e.orderBy,r),where:this.transformNode(e.where,r),frontModifiers:this.transformNodeList(e.frontModifiers,r),endModifiers:this.transformNodeList(e.endModifiers,r),limit:this.transformNode(e.limit,r),offset:this.transformNode(e.offset,r),with:this.transformNode(e.with,r),having:this.transformNode(e.having,r),explain:this.transformNode(e.explain,r),setOperations:this.transformNodeList(e.setOperations,r),fetch:this.transformNode(e.fetch,r),top:this.transformNode(e.top,r)}}transformSelection(e,r){return{kind:"SelectionNode",selection:this.transformNode(e.selection,r)}}transformColumn(e,r){return{kind:"ColumnNode",column:this.transformNode(e.column,r)}}transformAlias(e,r){return{kind:"AliasNode",node:this.transformNode(e.node,r),alias:this.transformNode(e.alias,r)}}transformTable(e,r){return{kind:"TableNode",table:this.transformNode(e.table,r)}}transformFrom(e,r){return{kind:"FromNode",froms:this.transformNodeList(e.froms,r)}}transformReference(e,r){return{kind:"ReferenceNode",column:this.transformNode(e.column,r),table:this.transformNode(e.table,r)}}transformAnd(e,r){return{kind:"AndNode",left:this.transformNode(e.left,r),right:this.transformNode(e.right,r)}}transformOr(e,r){return{kind:"OrNode",left:this.transformNode(e.left,r),right:this.transformNode(e.right,r)}}transformValueList(e,r){return{kind:"ValueListNode",values:this.transformNodeList(e.values,r)}}transformParens(e,r){return{kind:"ParensNode",node:this.transformNode(e.node,r)}}transformJoin(e,r){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table,r),on:this.transformNode(e.on,r)}}transformRaw(e,r){return{kind:"RawNode",sqlFragments:w([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters,r)}}transformWhere(e,r){return{kind:"WhereNode",where:this.transformNode(e.where,r)}}transformInsertQuery(e,r){return{kind:"InsertQueryNode",into:this.transformNode(e.into,r),columns:this.transformNodeList(e.columns,r),values:this.transformNode(e.values,r),returning:this.transformNode(e.returning,r),onConflict:this.transformNode(e.onConflict,r),onDuplicateKey:this.transformNode(e.onDuplicateKey,r),endModifiers:this.transformNodeList(e.endModifiers,r),with:this.transformNode(e.with,r),ignore:e.ignore,orAction:this.transformNode(e.orAction,r),replace:e.replace,explain:this.transformNode(e.explain,r),defaultValues:e.defaultValues,top:this.transformNode(e.top,r),output:this.transformNode(e.output,r)}}transformValues(e,r){return{kind:"ValuesNode",values:this.transformNodeList(e.values,r)}}transformDeleteQuery(e,r){return{kind:"DeleteQueryNode",from:this.transformNode(e.from,r),using:this.transformNode(e.using,r),joins:this.transformNodeList(e.joins,r),where:this.transformNode(e.where,r),returning:this.transformNode(e.returning,r),endModifiers:this.transformNodeList(e.endModifiers,r),with:this.transformNode(e.with,r),orderBy:this.transformNode(e.orderBy,r),limit:this.transformNode(e.limit,r),explain:this.transformNode(e.explain,r),top:this.transformNode(e.top,r),output:this.transformNode(e.output,r)}}transformReturning(e,r){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections,r)}}transformCreateTable(e,r){return{kind:"CreateTableNode",table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r),constraints:this.transformNodeList(e.constraints,r),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers,r),endModifiers:this.transformNodeList(e.endModifiers,r),selectQuery:this.transformNode(e.selectQuery,r)}}transformColumnDefinition(e,r){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column,r),dataType:this.transformNode(e.dataType,r),references:this.transformNode(e.references,r),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo,r),check:this.transformNode(e.check,r),generated:this.transformNode(e.generated,r),frontModifiers:this.transformNodeList(e.frontModifiers,r),endModifiers:this.transformNodeList(e.endModifiers,r),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e,r){return{kind:"AddColumnNode",column:this.transformNode(e.column,r)}}transformDropTable(e,r){return{kind:"DropTableNode",table:this.transformNode(e.table,r),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e,r){return{kind:"OrderByNode",items:this.transformNodeList(e.items,r)}}transformOrderByItem(e,r){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy,r),direction:this.transformNode(e.direction,r),collation:this.transformNode(e.collation,r),nulls:e.nulls}}transformGroupBy(e,r){return{kind:"GroupByNode",items:this.transformNodeList(e.items,r)}}transformGroupByItem(e,r){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy,r)}}transformUpdateQuery(e,r){return{kind:"UpdateQueryNode",table:this.transformNode(e.table,r),from:this.transformNode(e.from,r),joins:this.transformNodeList(e.joins,r),where:this.transformNode(e.where,r),updates:this.transformNodeList(e.updates,r),returning:this.transformNode(e.returning,r),endModifiers:this.transformNodeList(e.endModifiers,r),with:this.transformNode(e.with,r),explain:this.transformNode(e.explain,r),limit:this.transformNode(e.limit,r),top:this.transformNode(e.top,r),output:this.transformNode(e.output,r),orderBy:this.transformNode(e.orderBy,r)}}transformColumnUpdate(e,r){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column,r),value:this.transformNode(e.value,r)}}transformLimit(e,r){return{kind:"LimitNode",limit:this.transformNode(e.limit,r)}}transformOffset(e,r){return{kind:"OffsetNode",offset:this.transformNode(e.offset,r)}}transformOnConflict(e,r){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns,r),constraint:this.transformNode(e.constraint,r),indexExpression:this.transformNode(e.indexExpression,r),indexWhere:this.transformNode(e.indexWhere,r),updates:this.transformNodeList(e.updates,r),updateWhere:this.transformNode(e.updateWhere,r),doNothing:e.doNothing}}transformOnDuplicateKey(e,r){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates,r)}}transformCreateIndex(e,r){return{kind:"CreateIndexNode",name:this.transformNode(e.name,r),table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r),unique:e.unique,using:this.transformNode(e.using,r),ifNotExists:e.ifNotExists,where:this.transformNode(e.where,r),nullsNotDistinct:e.nullsNotDistinct}}transformList(e,r){return{kind:"ListNode",items:this.transformNodeList(e.items,r)}}transformDropIndex(e,r){return{kind:"DropIndexNode",name:this.transformNode(e.name,r),table:this.transformNode(e.table,r),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e,r){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns,r),name:this.transformNode(e.name,r),deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformUniqueConstraint(e,r){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns,r),name:this.transformNode(e.name,r),nullsNotDistinct:e.nullsNotDistinct,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformForeignKeyConstraint(e,r){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns,r),references:this.transformNode(e.references,r),name:this.transformNode(e.name,r),onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformSetOperation(e,r){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression,r),all:e.all}}transformReferences(e,r){return{kind:"ReferencesNode",table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e,r){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression,r),name:this.transformNode(e.name,r)}}transformWith(e,r){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions,r),recursive:e.recursive}}transformCommonTableExpression(e,r){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name,r),materialized:e.materialized,expression:this.transformNode(e.expression,r)}}transformCommonTableExpressionName(e,r){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r)}}transformHaving(e,r){return{kind:"HavingNode",having:this.transformNode(e.having,r)}}transformCreateSchema(e,r){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema,r),ifNotExists:e.ifNotExists}}transformDropSchema(e,r){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema,r),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e,r){return{kind:"AlterTableNode",table:this.transformNode(e.table,r),renameTo:this.transformNode(e.renameTo,r),setSchema:this.transformNode(e.setSchema,r),columnAlterations:this.transformNodeList(e.columnAlterations,r),addConstraint:this.transformNode(e.addConstraint,r),dropConstraint:this.transformNode(e.dropConstraint,r),renameConstraint:this.transformNode(e.renameConstraint,r),addIndex:this.transformNode(e.addIndex,r),dropIndex:this.transformNode(e.dropIndex,r)}}transformDropColumn(e,r){return{kind:"DropColumnNode",column:this.transformNode(e.column,r)}}transformRenameColumn(e,r){return{kind:"RenameColumnNode",column:this.transformNode(e.column,r),renameTo:this.transformNode(e.renameTo,r)}}transformAlterColumn(e,r){return{kind:"AlterColumnNode",column:this.transformNode(e.column,r),dataType:this.transformNode(e.dataType,r),dataTypeExpression:this.transformNode(e.dataTypeExpression,r),setDefault:this.transformNode(e.setDefault,r),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e,r){return{kind:"ModifyColumnNode",column:this.transformNode(e.column,r)}}transformAddConstraint(e,r){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint,r)}}transformDropConstraint(e,r){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName,r),ifExists:e.ifExists,modifier:e.modifier}}transformRenameConstraint(e,r){return{kind:"RenameConstraintNode",oldName:this.transformNode(e.oldName,r),newName:this.transformNode(e.newName,r)}}transformCreateView(e,r){return{kind:"CreateViewNode",name:this.transformNode(e.name,r),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns,r),as:this.transformNode(e.as,r)}}transformRefreshMaterializedView(e,r){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(e.name,r),concurrently:e.concurrently,withNoData:e.withNoData}}transformDropView(e,r){return{kind:"DropViewNode",name:this.transformNode(e.name,r),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e,r){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression,r)}}transformDefaultValue(e,r){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue,r)}}transformOn(e,r){return{kind:"OnNode",on:this.transformNode(e.on,r)}}transformSelectModifier(e,r){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier,r),of:this.transformNodeList(e.of,r)}}transformCreateType(e,r){return{kind:"CreateTypeNode",name:this.transformNode(e.name,r),enum:this.transformNode(e.enum,r)}}transformDropType(e,r){return{kind:"DropTypeNode",name:this.transformNode(e.name,r),ifExists:e.ifExists}}transformExplain(e,r){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options,r)}}transformSchemableIdentifier(e,r){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema,r),identifier:this.transformNode(e.identifier,r)}}transformAggregateFunction(e,r){return{kind:"AggregateFunctionNode",func:e.func,aggregated:this.transformNodeList(e.aggregated,r),distinct:e.distinct,orderBy:this.transformNode(e.orderBy,r),withinGroup:this.transformNode(e.withinGroup,r),filter:this.transformNode(e.filter,r),over:this.transformNode(e.over,r)}}transformOver(e,r){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy,r),partitionBy:this.transformNode(e.partitionBy,r)}}transformPartitionBy(e,r){return{kind:"PartitionByNode",items:this.transformNodeList(e.items,r)}}transformPartitionByItem(e,r){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy,r)}}transformBinaryOperation(e,r){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand,r),operator:this.transformNode(e.operator,r),rightOperand:this.transformNode(e.rightOperand,r)}}transformUnaryOperation(e,r){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator,r),operand:this.transformNode(e.operand,r)}}transformUsing(e,r){return{kind:"UsingNode",tables:this.transformNodeList(e.tables,r)}}transformFunction(e,r){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments,r)}}transformCase(e,r){return{kind:"CaseNode",value:this.transformNode(e.value,r),when:this.transformNodeList(e.when,r),else:this.transformNode(e.else,r),isStatement:e.isStatement}}transformWhen(e,r){return{kind:"WhenNode",condition:this.transformNode(e.condition,r),result:this.transformNode(e.result,r)}}transformJSONReference(e,r){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference,r),traversal:this.transformNode(e.traversal,r)}}transformJSONPath(e,r){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator,r),pathLegs:this.transformNodeList(e.pathLegs,r)}}transformJSONPathLeg(e,r){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e,r){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator,r),values:this.transformNodeList(e.values,r)}}transformTuple(e,r){return{kind:"TupleNode",values:this.transformNodeList(e.values,r)}}transformMergeQuery(e,r){return{kind:"MergeQueryNode",into:this.transformNode(e.into,r),using:this.transformNode(e.using,r),whens:this.transformNodeList(e.whens,r),with:this.transformNode(e.with,r),top:this.transformNode(e.top,r),endModifiers:this.transformNodeList(e.endModifiers,r),output:this.transformNode(e.output,r),returning:this.transformNode(e.returning,r)}}transformMatched(e,r){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e,r){return{kind:"AddIndexNode",name:this.transformNode(e.name,r),columns:this.transformNodeList(e.columns,r),unique:e.unique,using:this.transformNode(e.using,r),ifNotExists:e.ifNotExists}}transformCast(e,r){return{kind:"CastNode",expression:this.transformNode(e.expression,r),dataType:this.transformNode(e.dataType,r)}}transformFetch(e,r){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount,r),modifier:e.modifier}}transformTop(e,r){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e,r){return{kind:"OutputNode",selections:this.transformNodeList(e.selections,r)}}transformDataType(e,r){return e}transformSelectAll(e,r){return e}transformIdentifier(e,r){return e}transformValue(e,r){return e}transformPrimitiveValueList(e,r){return e}transformOperator(e,r){return e}transformDefaultInsertValue(e,r){return e}transformOrAction(e,r){return e}transformCollate(e,r){return e}}});var BM,MM,Fg,cR=C(()=>{ti();ot();Tc();_g();Wg();io();kc();Eg();q();BM=w({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),MM={json_agg:!0,to_json:!0},Fg=class extends qc{#e;#t=new Set;#r=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e,r){if(!this.#i(e))return super.transformNodeImpl(e,r);let i=this.#a(e);for(let s of i)this.#r.add(s);let n=this.#o(e);for(let s of n)this.#t.add(s);let o=super.transformNodeImpl(e,r);for(let s of n)this.#t.delete(s);for(let s of i)this.#r.delete(s);return o}transformSchemableIdentifier(e,r){let i=super.transformSchemableIdentifier(e,r);return i.schema||!this.#t.has(e.identifier.name)?i:{...i,schema:we.create(this.#e)}}transformReferences(e,r){let i=super.transformReferences(e,r);return i.table.table.schema?i:{...i,table:Vr.createWithSchema(this.#e,i.table.table.identifier.name)}}transformAggregateFunction(e,r){return{...super.transformAggregateFunction({...e,aggregated:[]},r),aggregated:this.#n(e,r,"aggregated")}}transformFunction(e,r){return{...super.transformFunction({...e,arguments:[]},r),arguments:this.#n(e,r,"arguments")}}transformSelectModifier(e,r){return{...super.transformSelectModifier({...e,of:void 0},r),of:e.of?.map(i=>Vr.is(i)&&!i.table.schema?{...i,table:this.transformIdentifier(i.table.identifier,r)}:this.transformNode(i,r))}}#n(e,r,i){return MM[e.func]?e[i].map(n=>!Vr.is(n)||n.table.schema?this.transformNode(n,r):{...n,table:this.transformIdentifier(n.table.identifier,r)}):this.transformNodeList(e[i],r)}#i(e){return e.kind in BM}#o(e){let r=new Set;if("name"in e&&e.name&&Er.is(e.name)&&this.#c(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#s(i,r);if("into"in e&&e.into&&this.#s(e.into,r),"table"in e&&e.table&&this.#s(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#s(i.table,r);return"using"in e&&e.using&&(ni.is(e.using)?this.#s(e.using.table,r):this.#s(e.using,r)),r}#a(e){let r=new Set;return"with"in e&&e.with&&this.#u(e.with,r),r}#s(e,r){if(Vr.is(e))return this.#c(e.table,r);if(rr.is(e)&&Vr.is(e.node))return this.#c(e.node.table,r);if(Ag.is(e)){for(let i of e.items)this.#s(i,r);return}if(jd.is(e)){for(let i of e.tables)this.#s(i,r);return}}#c(e,r){let i=e.identifier.name;!this.#t.has(i)&&!this.#r.has(i)&&r.add(i)}#u(e,r){for(let i of e.expressions){let n=i.name.table.table.identifier.name;this.#r.has(n)||r.add(n)}}}});var On,Wc=C(()=>{cR();On=class{#e;constructor(e){this.#e=new Fg(e)}transformQuery(e){return this.#e.transformNode(e.node,e.queryId)}async transformResult(e){return e.result}}});var uR,z_=C(()=>{q();uR=w({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return w({kind:"MatchedNode",not:t,bySource:e})}})});function j_(t,e,r){return In.create(Uc([uR.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&r?nr(e[0],e[1],e[2]):st(e)]:[]],"and",!1))}function Fc(t){return Qe(t)?Me.create([t],[]):dt(t)?t.toOperationNode():t}var lR=C(()=>{z_();Kr();kn();aa();q();hn()});var co,B_=C(()=>{co=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}}});async function Vg(t){let e=new co,r=new co;return t.provideConnection(async i=>(e.resolve(i),await r.promise)).catch(i=>e.reject(i)),w({connection:await e.promise,release:r.resolve})}var M_=C(()=>{B_();q()});var qM,Vc,q_=C(()=>{q();M_();Pd();qM=w([]),Vc=class{#e;constructor(e=qM){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let n=i.transformQuery({node:e,queryId:r});if(n.kind===e.kind)e=n;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${n.kind}`].join(" "))}return e}async executeQuery(e){return await this.provideConnection(async r=>{let i=await r.executeQuery(e);return"numUpdatedOrDeletedRows"in i&&$i("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#t(i,e.queryId)})}async*stream(e,r){let{connection:i,release:n}=await Vg(this);try{for await(let o of i.streamQuery(e,r))yield await this.#t(o,e.queryId)}finally{n()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}}});var W_,ts,Kc=C(()=>{q_();W_=class t extends Vc{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new t([...this.plugins,e])}withPlugins(e){return new t([...this.plugins,...e])}withPluginAtFront(e){return new t([e,...this.plugins])}withoutPlugins(){return new t([])}},ts=new W_});var Kg,F_=C(()=>{Kg=class{numChangedRows;constructor(e){this.numChangedRows=e}}});var Hg,rs,Jg,V_,K_=C(()=>{sa();qd();Tn();Dc();w_();Kd();lR();Xo();zc();Kc();q();F_();la();zg();Hg=class t{#e;constructor(e){this.#e=w(e)}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ai(e,r))})}using(...e){return new rs({...this.#e,queryNode:gn.cloneWithUsing(this.#e.queryNode,es("Using",e))})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,ir(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,ir(e))})}},rs=class t{#e;constructor(e){this.#e=w(e)}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ai(e,r))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,r,i){return this.#t([e,r,i],!0)}#t(e,r){return new Jg({...this.#e,queryNode:gn.cloneWithWhen(this.#e.queryNode,j_({isMatched:!0},e,r))})}whenNotMatched(){return this.#r([])}whenNotMatchedAnd(...e){return this.#r(e)}whenNotMatchedAndRef(e,r,i){return this.#r([e,r,i],!0)}whenNotMatchedBySource(){return this.#r([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#r(e,!1,!0)}whenNotMatchedBySourceAndRef(e,r,i){return this.#r([e,r,i],!0,!0)}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,ir(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,ir(e))})}#r(e,r=!1,i=!1){let n={...this.#e,queryNode:gn.cloneWithWhen(this.#e.queryNode,j_({isMatched:!1,bySource:i},e,r))},o=i?Jg:V_;return new o(n)}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Kg(r.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=$n){let r=await this.executeTakeFirst();if(r===void 0)throw Ri(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}},Jg=class{#e;constructor(e){this.#e=w(e)}thenDelete(){return new rs({...this.#e,queryNode:gn.cloneWithThen(this.#e.queryNode,Fc("delete"))})}thenDoNothing(){return new rs({...this.#e,queryNode:gn.cloneWithThen(this.#e.queryNode,Fc("do nothing"))})}thenUpdate(e){return new rs({...this.#e,queryNode:gn.cloneWithThen(this.#e.queryNode,Fc(e(new Bc({queryId:this.#e.queryId,executor:ts,queryNode:Pi.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(r=>r.set(...e))}},V_=class{#e;constructor(e){this.#e=w(e)}thenDoNothing(){return new rs({...this.#e,queryNode:gn.cloneWithThen(this.#e.queryNode,Fc("do nothing"))})}thenInsertValues(e){let[r,i]=$g(e);return new rs({...this.#e,queryNode:gn.cloneWithThen(this.#e.queryNode,Fc(It.cloneWith(It.createWithoutInto(),{columns:r,values:i})))})}}});var Hc,Qg=C(()=>{Zg();T_();$_();zg();Bd();sa();ca();Dc();hr();oR();U_();Ui();Wc();q();Xo();K_();qd();Hc=class t{#e;constructor(e){this.#e=w(e)}selectFrom(e){return Jd({queryId:xe(),executor:this.#e.executor,queryNode:Ke.createFrom(ci(e),this.#e.withNode)})}selectNoFrom(e){return Jd({queryId:xe(),executor:this.#e.executor,queryNode:Ke.cloneWithSelections(Ke.create(this.#e.withNode),Ht(e))})}insertInto(e){return new Fd({queryId:xe(),executor:this.#e.executor,queryNode:It.create(qe(e),this.#e.withNode)})}replaceInto(e){return new Fd({queryId:xe(),executor:this.#e.executor,queryNode:It.create(qe(e),this.#e.withNode,!0)})}deleteFrom(e){return new Dg({queryId:xe(),executor:this.#e.executor,queryNode:Yo.create(ci(e),this.#e.withNode)})}updateTable(e){return new Bc({queryId:xe(),executor:this.#e.executor,queryNode:Pi.create(ci(e),this.#e.withNode)})}mergeInto(e){return new Hg({queryId:xe(),executor:this.#e.executor,queryNode:gn.create(H_(e),this.#e.withNode)})}with(e,r){let i=R_(e,r);return new t({...this.#e,withNode:this.#e.withNode?Hd.cloneWithExpression(this.#e.withNode,i):Hd.create(i)})}withRecursive(e,r){let i=R_(e,r);return new t({...this.#e,withNode:this.#e.withNode?Hd.cloneWithExpression(this.#e.withNode,i):Hd.create(i,{recursive:!0})})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new On(e))})}}});function sR(){return new Hc({executor:ts})}function dR(t,e){return new kg({joinNode:ni.create(t,fa(e))})}function fR(){return new Tg({overNode:Ld.create()})}var Mg=C(()=>{Tc();Ng();p_();QP();Qg();Kc();hr()});function es(t,e){if(e.length===3)return FM(t,e[0],e[1],e[2]);if(e.length===2)return WM(t,e[0],e[1]);if(e.length===1)return VM(t,e[0]);throw new Error("not implemented")}function WM(t,e,r){return r(dR(t,e)).toOperationNode()}function FM(t,e,r,i){return ni.createWithOn(t,fa(e),nr(r,"=",i))}function VM(t,e){return ni.create(t,fa(e))}var Kd=C(()=>{Tc();hn();Mg();hr()});var pR,J_=C(()=>{q();pR=w({is(t){return t.kind==="OffsetNode"},create(t){return w({kind:"OffsetNode",offset:t})}})});var mR,Q_=C(()=>{q();mR=w({is(t){return t.kind==="GroupByItemNode"},create(t){return w({kind:"GroupByItemNode",groupBy:t})}})});function hR(t){return t=Ze(t)?t(si()):t,so(t).map(mR.create)}var gR=C(()=>{Q_();ua();q();fr()});var Gg,Yg=C(()=>{q();Gg=w({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return w({kind:"SetOperationNode",operator:t,expression:e,all:r})}})});function pa(t,e,r){return Ze(e)&&(e=e(Xg())),Ar(e)||(e=[e]),e.map(i=>Gg.create(t,Jr(i),r))}var yR=C(()=>{ua();Yg();q();oi()});var Je,Qd,Z_,G_,Jc=C(()=>{ti();Jo();ot();Kr();ra();Rc();hn();Je=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Qd(this,e)}or(...e){return new Z_(ri.create(this.#e,st(e)))}and(...e){return new G_(Hr.create(this.#e,st(e)))}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}},Qd=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return rr.create(this.#e.toOperationNode(),dt(this.#t)?this.#t.toOperationNode():we.create(this.#t))}},Z_=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Qd(this,e)}or(...e){return new t(ri.create(this.#e,st(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return mn.create(this.#e)}},G_=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Qd(this,e)}and(...e){return new t(Hr.create(this.#e,st(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return mn.create(this.#e)}}});var wR,Y_=C(()=>{q();Oi();wR=w({is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:Bt.create(t),modifier:e}}})});function bR(t,e){if(!Xn(t)&&!Ko(t))throw new Error(`Invalid fetch row count: ${t}`);if(!KM(e))throw new Error(`Invalid fetch modifier: ${e}`);return wR.create(t,e)}function KM(t){return t==="only"||t==="with ties"}var vR=C(()=>{Y_();q()});function Jd(t){return new X_(t)}var X_,eE,Zg=C(()=>{ti();FA();Kd();hr();Xo();fr();ca();Tn();ia();Vd();J_();q();gR();la();ot();yR();hn();Jc();Ci();vR();zc();X_=class t{#e;constructor(e){this.#e=w(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,nr(e,r,i))})}having(...e){return new t({...this.#e,queryNode:Ke.cloneWithHaving(this.#e.queryNode,st(e))})}havingRef(e,r,i){return new t({...this.#e,queryNode:Ke.cloneWithHaving(this.#e.queryNode,nr(e,r,i))})}select(e){return new t({...this.#e,queryNode:Ke.cloneWithSelections(this.#e.queryNode,Ht(e))})}distinctOn(e){return new t({...this.#e,queryNode:Ke.cloneWithDistinctOn(this.#e.queryNode,so(e))})}modifyFront(e){return new t({...this.#e,queryNode:Ke.cloneWithFrontModifier(this.#e.queryNode,Ii.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.createWithExpression(e.toOperationNode()))})}distinct(){return new t({...this.#e,queryNode:Ke.cloneWithFrontModifier(this.#e.queryNode,Ii.create("Distinct"))})}forUpdate(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.create("ForUpdate",e?kd(e).map(qe):void 0))})}forShare(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.create("ForShare",e?kd(e).map(qe):void 0))})}forKeyShare(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.create("ForKeyShare",e?kd(e).map(qe):void 0))})}forNoKeyUpdate(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.create("ForNoKeyUpdate",e?kd(e).map(qe):void 0))})}skipLocked(){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.create("SkipLocked"))})}noWait(){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,Ii.create("NoWait"))})}selectAll(e){return new t({...this.#e,queryNode:Ke.cloneWithSelections(this.#e.queryNode,ir(e))})}innerJoin(...e){return this.#t("InnerJoin",e)}leftJoin(...e){return this.#t("LeftJoin",e)}rightJoin(...e){return this.#t("RightJoin",e)}fullJoin(...e){return this.#t("FullJoin",e)}crossJoin(...e){return this.#t("CrossJoin",e)}innerJoinLateral(...e){return this.#t("LateralInnerJoin",e)}leftJoinLateral(...e){return this.#t("LateralLeftJoin",e)}crossJoinLateral(...e){return this.#t("LateralCrossJoin",e)}crossApply(...e){return this.#t("CrossApply",e)}outerApply(...e){return this.#t("OuterApply",e)}#t(e,r){return new t({...this.#e,queryNode:ie.cloneWithJoin(this.#e.queryNode,es(e,r))})}orderBy(...e){return new t({...this.#e,queryNode:ie.cloneWithOrderByItems(this.#e.queryNode,pn(e))})}groupBy(e){return new t({...this.#e,queryNode:Ke.cloneWithGroupByItems(this.#e.queryNode,hR(e))})}limit(e){return new t({...this.#e,queryNode:Ke.cloneWithLimit(this.#e.queryNode,jc.create(tt(e)))})}offset(e){return new t({...this.#e,queryNode:Ke.cloneWithOffset(this.#e.queryNode,pR.create(tt(e)))})}fetch(e,r="only"){return new t({...this.#e,queryNode:Ke.cloneWithFetch(this.#e.queryNode,bR(e,r))})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ai(e,r))})}union(e){return new t({...this.#e,queryNode:Ke.cloneWithSetOperations(this.#e.queryNode,pa("union",e,!1))})}unionAll(e){return new t({...this.#e,queryNode:Ke.cloneWithSetOperations(this.#e.queryNode,pa("union",e,!0))})}intersect(e){return new t({...this.#e,queryNode:Ke.cloneWithSetOperations(this.#e.queryNode,pa("intersect",e,!1))})}intersectAll(e){return new t({...this.#e,queryNode:Ke.cloneWithSetOperations(this.#e.queryNode,pa("intersect",e,!0))})}except(e){return new t({...this.#e,queryNode:Ke.cloneWithSetOperations(this.#e.queryNode,pa("except",e,!1))})}exceptAll(e){return new t({...this.#e,queryNode:Ke.cloneWithSetOperations(this.#e.queryNode,pa("except",e,!0))})}as(e){return new eE(this,e)}clearSelect(){return new t({...this.#e,queryNode:Ke.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new t({...this.#e,queryNode:ie.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:Ke.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new t({...this.#e,queryNode:Ke.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:ie.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new t({...this.#e,queryNode:Ke.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}$asTuple(){return new Je(this.toOperationNode())}$asScalar(){return new Je(this.toOperationNode())}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=$n){let r=await this.executeTakeFirst();if(r===void 0)throw Ri(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};eE=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return rr.create(this.#e.toOperationNode(),we.create(this.#t))}}});var Di,ey=C(()=>{q();Md();Dd();Di=w({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return w({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return w({...t,distinct:!0})},cloneWithOrderBy(t,e,r=!1){let i=r?"withinGroup":"orderBy";return w({...t,[i]:t[i]?ao.cloneWithItems(t[i],e):ao.create(e)})},cloneWithFilter(t,e){return w({...t,filter:t.filter?mr.cloneWithOperation(t.filter,"And",e):mr.create(e)})},cloneWithOrFilter(t,e){return w({...t,filter:t.filter?mr.cloneWithOperation(t.filter,"Or",e):mr.create(e)})},cloneWithOver(t,e){return w({...t,over:e})}})});var tE,rE=C(()=>{q();tE=w({is(t){return t.kind==="FunctionNode"},create(t,e){return w({kind:"FunctionNode",func:t,arguments:e})}})});var Qc,nE,iE=C(()=>{q();ey();ti();ot();Mg();hn();ia();Tn();Qc=class t{#e;constructor(e){this.#e=w(e)}get expressionType(){}as(e){return new nE(this,e)}distinct(){return new t({...this.#e,aggregateFunctionNode:Di.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(...e){return new t({...this.#e,aggregateFunctionNode:ie.cloneWithOrderByItems(this.#e.aggregateFunctionNode,pn(e))})}clearOrderBy(){return new t({...this.#e,aggregateFunctionNode:ie.cloneWithoutOrderBy(this.#e.aggregateFunctionNode)})}withinGroupOrderBy(...e){return new t({...this.#e,aggregateFunctionNode:Di.cloneWithOrderBy(this.#e.aggregateFunctionNode,pn(e),!0)})}filterWhere(...e){return new t({...this.#e,aggregateFunctionNode:Di.cloneWithFilter(this.#e.aggregateFunctionNode,st(e))})}filterWhereRef(e,r,i){return new t({...this.#e,aggregateFunctionNode:Di.cloneWithFilter(this.#e.aggregateFunctionNode,nr(e,r,i))})}over(e){let r=fR();return new t({...this.#e,aggregateFunctionNode:Di.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}},nE=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return rr.create(this.#e.toOperationNode(),we.create(this.#t))}}});function ty(){let t=(r,i)=>new Je(tE.create(r,so(i??[]))),e=(r,i)=>new Qc({aggregateFunctionNode:Di.create(r,i?so(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new Qc({aggregateFunctionNode:Di.create("count",ir(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new Qc({aggregateFunctionNode:Di.create("json_agg",[Qe(r)?qe(r):r.toOperationNode()])})},toJson(r){return new Je(tE.create("to_json",[Qe(r)?qe(r):r.toOperationNode()]))}})}var ry=C(()=>{Jc();ey();rE();fr();Xo();iE();q();hr()});var xR,oE=C(()=>{q();xR=w({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return w({kind:"UnaryOperationNode",operator:t,operand:e})}})});function SR(t,e){return xR.create(dn.create(t),pr(e))}var NR=C(()=>{na();oE();fr()});var yn,Zd=C(()=>{q();aa();yn=w({is(t){return t.kind==="CaseNode"},create(t){return w({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return w({...t,when:w(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return w({...t,when:t.when?w([...t.when.slice(0,-1),In.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return w({...t,...e})}})});var Zc,ny,sE,aE,iy=C(()=>{Jc();q();Zd();aa();hn();Ci();Zc=class{#e;constructor(e){this.#e=w(e)}when(...e){return new ny({...this.#e,node:yn.cloneWithWhen(this.#e.node,In.create(st(e)))})}},ny=class{#e;constructor(e){this.#e=w(e)}then(e){return new sE({...this.#e,node:yn.cloneWithThen(this.#e.node,xg(e)?Ud(e):tt(e))})}},sE=class{#e;constructor(e){this.#e=w(e)}when(...e){return new ny({...this.#e,node:yn.cloneWithWhen(this.#e.node,In.create(st(e)))})}else(e){return new aE({...this.#e,node:yn.cloneWith(this.#e.node,{else:xg(e)?Ud(e):tt(e)})})}end(){return new Je(yn.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Je(yn.cloneWith(this.#e.node,{isStatement:!0}))}},aE=class{#e;constructor(e){this.#e=w(e)}end(){return new Je(yn.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Je(yn.cloneWith(this.#e.node,{isStatement:!0}))}}});var cE,uE=C(()=>{q();cE=w({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return w({kind:"JSONPathLegNode",type:t,value:e})}})});var Gc,oy,lE,dE=C(()=>{ti();ot();wg();uE();Rd();gg();Kr();Oi();Gc=class{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,r){return Oc.is(this.#e)?new oy(Oc.cloneWithTraversal(this.#e,Zo.is(this.#e.traversal)?Zo.cloneWithLeg(this.#e.traversal,cE.create(e,r)):yg.cloneWithValue(this.#e.traversal,Bt.createImmediate(r)))):new oy(Zo.cloneWithLeg(this.#e,cE.create(e,r)))}},oy=class t extends Gc{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new lE(this,e)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}},lE=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return rr.create(this.#e.toOperationNode(),dt(this.#t)?this.#t.toOperationNode():we.create(this.#t))}}});var fE,pE=C(()=>{q();fE=w({is(t){return t.kind==="TupleNode"},create(t){return w({kind:"TupleNode",values:w(t)})}})});function _R(t){return!!(HM.includes(t)||JM.some(e=>e.test(t)))}var HM,JM,AR,mE=C(()=>{q();HM=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],JM=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],AR=w({is(t){return t.kind==="DataTypeNode"},create(t){return w({kind:"DataTypeNode",dataType:t})}})});function ui(t){if(dt(t))return t.toOperationNode();if(_R(t))return AR.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}var Gd=C(()=>{mE();Kr()});var ER,hE=C(()=>{q();ER=w({is(t){return t.kind==="CastNode"},create(t,e){return w({kind:"CastNode",expression:t,dataType:e})}})});function Xg(t=ts){function e(n,o,s){return new Je(Sg(n,o,s))}function r(n,o){return new Je(SR(n,o))}let i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(n){return Jd({queryId:xe(),executor:t,queryNode:Ke.createFrom(ci(n))})},case(n){return new Zc({node:yn.create(Ur(n)?void 0:pr(n))})},ref(n,o){return Ur(o)?new Je(fn(n)):new Gc(BP(n,o))},jsonPath(){return new Gc(Zo.create())},table(n){return new Je(qe(n))},val(n){return new Je(tt(n))},refTuple(...n){return new Je(fE.create(n.map(pr)))},tuple(...n){return new Je(fE.create(n.map(tt)))},lit(n){return new Je(Ud(n))},unary:r,not(n){return r("not",n)},exists(n){return r("exists",n)},neg(n){return r("-",n)},between(n,o,s){return new Je(Qo.create(pr(n),dn.create("between"),Hr.create(tt(o),tt(s))))},betweenSymmetric(n,o,s){return new Je(Qo.create(pr(n),dn.create("between symmetric"),Hr.create(tt(o),tt(s))))},and(n){return Ar(n)?new Je(Uc(n,"and")):new Je(t_(n,"and"))},or(n){return Ar(n)?new Je(Uc(n,"or")):new Je(t_(n,"or"))},parens(...n){let o=st(n);return mn.is(o)?new Je(o):new Je(mn.create(o))},cast(n,o){return new Je(ER.create(pr(n),ui(o)))},withSchema(n){return Xg(t.withPluginAtFront(new On(n)))}});return i.fn=ty(),i.eb=i,i}function si(t){return Xg()}var ua=C(()=>{Zg();ca();hr();Wc();Ui();ry();fr();hn();Rc();Jc();na();NR();Ci();Kc();iy();Zd();q();dE();lg();Jo();pE();Rd();Gd();hE()});function Jr(t){if(dt(t))return t.toOperationNode();if(Ze(t))return t(si()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Ig(t){if(dt(t))return t.toOperationNode();if(Ze(t))return t(si()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function oo(t){return ag(t)||RP(t)||Ze(t)}var oi=C(()=>{cg();Kr();ua();q()});function kR(t){return Rt(t)&&dt(t)&&Qe(t.table)&&Qe(t.alias)}var sy,gE,ay=C(()=>{ti();ot();Kr();hr();q();sy=class{#e;get table(){return this.#e}constructor(e){this.#e=e}as(e){return new gE(this.#e,e)}},gE=class{#e;#t;get table(){return this.#e}get alias(){return this.#t}constructor(e,r){this.#e=e,this.#t=r}toOperationNode(){return rr.create(qe(this.#e),we.create(this.#t))}}});function ci(t){return Ar(t)?t.map(e=>fa(e)):[fa(t)]}function fa(t){return Qe(t)?H_(t):kR(t)?t.toOperationNode():Ig(t)}function H_(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(TR);return rr.create(qe(r),we.create(i))}else return qe(t)}function qe(t){if(t.includes(".")){let[r,i]=t.split(".").map(TR);return Vr.createWithSchema(r,i)}else return Vr.create(t)}function TR(t){return t.trim()}var hr=C(()=>{q();ti();kc();oi();ot();ay()});var yE,wE=C(()=>{q();yE=w({is(t){return t.kind==="AddColumnNode"},create(t){return w({kind:"AddColumnNode",column:t})}})});var ft,Yd=C(()=>{q();kr();ft=w({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return w({kind:"ColumnDefinitionNode",column:Le.create(t),dataType:e})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):[e]})},cloneWith(t,e){return w({...t,...e})}})});var bE,vE=C(()=>{q();kr();bE=w({is(t){return t.kind==="DropColumnNode"},create(t){return w({kind:"DropColumnNode",column:Le.create(t)})}})});var xE,SE=C(()=>{q();kr();xE=w({is(t){return t.kind==="RenameColumnNode"},create(t,e){return w({kind:"RenameColumnNode",column:Le.create(t),renameTo:Le.create(e)})}})});var Yc,Xd=C(()=>{q();ot();Yc=w({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return w({kind:"CheckConstraintNode",expression:t,name:e?we.create(e):void 0})}})});var IR,Xc,ef=C(()=>{q();IR=["no action","restrict","cascade","set null","set default"],Xc=w({is(t){return t.kind==="ReferencesNode"},create(t,e){return w({kind:"ReferencesNode",table:t,columns:w([...e])})},cloneWithOnDelete(t,e){return w({...t,onDelete:e})},cloneWithOnUpdate(t,e){return w({...t,onUpdate:e})}})});function cy(t){return dt(t)?t.toOperationNode():Bt.createImmediate(t)}var NE=C(()=>{Kr();Oi()});var tf,AE=C(()=>{q();tf=w({is(t){return t.kind==="GeneratedNode"},create(t){return w({kind:"GeneratedNode",...t})},createWithExpression(t){return w({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return w({...t,...e})}})});var $R,_E=C(()=>{q();$R=w({is(t){return t.kind==="DefaultValueNode"},create(t){return w({kind:"DefaultValueNode",defaultValue:t})}})});function eu(t){if(IR.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var EE=C(()=>{ef()});var uo,uy=C(()=>{Xd();ef();Od();fr();Yd();NE();AE();_E();EE();uo=class t{#e;constructor(e){this.#e=e}autoIncrement(){return new t(ft.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new t(ft.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new t(ft.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=fn(e);if(!r.table||Ic.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new t(ft.cloneWith(this.#e,{references:Xc.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new t(ft.cloneWith(this.#e,{references:Xc.cloneWithOnDelete(this.#e.references,eu(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new t(ft.cloneWith(this.#e,{references:Xc.cloneWithOnUpdate(this.#e.references,eu(e))}))}unique(){return new t(ft.cloneWith(this.#e,{unique:!0}))}notNull(){return new t(ft.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new t(ft.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new t(ft.cloneWith(this.#e,{defaultTo:$R.create(cy(e))}))}check(e){return new t(ft.cloneWith(this.#e,{check:Yc.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new t(ft.cloneWith(this.#e,{generated:tf.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new t(ft.cloneWith(this.#e,{generated:tf.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new t(ft.cloneWith(this.#e,{generated:tf.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new t(ft.cloneWith(this.#e,{generated:tf.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new t(ft.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new t(ft.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new t(ft.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new t(ft.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var kE,TE=C(()=>{q();kE=w({is(t){return t.kind==="ModifyColumnNode"},create(t){return w({kind:"ModifyColumnNode",column:t})}})});var li,rf=C(()=>{q();ot();ef();li=w({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return w({kind:"ForeignKeyConstraintNode",columns:t,references:Xc.create(e,r),name:i?we.create(i):void 0})},cloneWith(t,e){return w({...t,...e})}})});var tu,ly=C(()=>{rf();EE();tu=class t{#e;constructor(e){this.#e=e}onDelete(e){return new t(li.cloneWith(this.#e,{onDelete:eu(e)}))}onUpdate(e){return new t(li.cloneWith(this.#e,{onUpdate:eu(e)}))}deferrable(){return new t(li.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new t(li.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new t(li.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new t(li.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var ru,dy=C(()=>{q();ru=w({is(t){return t.kind==="AddConstraintNode"},create(t){return w({kind:"AddConstraintNode",constraint:t})}})});var Li,nf=C(()=>{q();kr();ot();Li=w({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return w({kind:"UniqueConstraintNode",columns:w(t.map(Le.create)),name:e?we.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return w({...t,...e})}})});var nu,fy=C(()=>{q();ot();nu=w({is(t){return t.kind==="DropConstraintNode"},create(t){return w({kind:"DropConstraintNode",constraintName:we.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var iu,IE=C(()=>{q();kr();iu=w({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return w({kind:"AlterColumnNode",column:Le.create(t),[e]:r})}})});var of,ma,$E=C(()=>{IE();Gd();NE();of=class{#e;constructor(e){this.#e=e}setDataType(e){return new ma(iu.create(this.#e,"dataType",ui(e)))}setDefault(e){return new ma(iu.create(this.#e,"setDefault",cy(e)))}dropDefault(){return new ma(iu.create(this.#e,"dropDefault",!0))}setNotNull(){return new ma(iu.create(this.#e,"setNotNull",!0))}dropNotNull(){return new ma(iu.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}},ma=class{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}});var lo,OR=C(()=>{q();lo=class{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var py,CR=C(()=>{dy();ta();q();py=class t{#e;constructor(e){this.#e=w(e)}onDelete(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}deferrable(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.deferrable()})}notDeferrable(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyImmediate()})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Be.cloneWithTableProps(this.#e.node,{addConstraint:ru.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var sf,PR=C(()=>{ta();fy();q();sf=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{dropConstraint:nu.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{dropConstraint:nu.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{dropConstraint:nu.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var fo,af=C(()=>{q();kr();ot();fo=w({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return w({kind:"PrimaryKeyConstraintNode",columns:w(t.map(Le.create)),name:e?we.create(e):void 0})},cloneWith(t,e){return w({...t,...e})}})});var ns,my=C(()=>{q();ot();ns=w({is(t){return t.kind==="AddIndexNode"},create(t){return w({kind:"AddIndexNode",name:we.create(t)})},cloneWith(t,e){return w({...t,...e})},cloneWithColumns(t,e){return w({...t,columns:[...t.columns||[],...e]})}})});var hy,RR=C(()=>{my();ta();kn();fr();q();hy=class t{#e;constructor(e){this.#e=w(e)}unique(){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addIndex:ns.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addIndex:ns.cloneWithColumns(this.#e.node.addIndex,[Cc(e)])})})}columns(e){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addIndex:ns.cloneWithColumns(this.#e.node.addIndex,e.map(Cc))})})}expression(e){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addIndex:ns.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new t({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addIndex:ns.cloneWith(this.#e.node.addIndex,{using:Me.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var ou,OE=C(()=>{nf();ou=class t{#e;constructor(e){this.#e=e}nullsNotDistinct(){return new t(Li.cloneWith(this.#e,{nullsNotDistinct:!0}))}deferrable(){return new t(Li.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new t(Li.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new t(Li.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new t(Li.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var su,CE=C(()=>{af();su=class t{#e;constructor(e){this.#e=e}deferrable(){return new t(fo.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new t(fo.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new t(fo.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new t(fo.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var au,PE=C(()=>{au=class{#e;constructor(e){this.#e=e}$call(e){return e(this)}toOperationNode(){return this.#e}}});var UR,RE=C(()=>{q();ot();UR=w({is(t){return t.kind==="RenameConstraintNode"},create(t,e){return w({kind:"RenameConstraintNode",oldName:we.create(t),newName:we.create(e)})}})});var gy,ha,UE=C(()=>{wE();ta();Yd();vE();ot();SE();q();uy();TE();Gd();ly();dy();nf();Xd();rf();kr();hr();fy();$E();OR();CR();PR();af();Td();my();RR();OE();CE();PE();RE();gy=class{#e;constructor(e){this.#e=w(e)}renameTo(e){return new lo({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{renameTo:qe(e)})})}setSchema(e){return new lo({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{setSchema:we.create(e)})})}alterColumn(e,r){let i=r(new of(e));return new ha({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new ha({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,bE.create(e))})}renameColumn(e,r){return new ha({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,xE.create(e,r))})}addColumn(e,r,i=Dr){let n=i(new uo(ft.create(e,ui(r))));return new ha({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,yE.create(n.toOperationNode()))})}modifyColumn(e,r,i=Dr){let n=i(new uo(ft.create(e,ui(r))));return new ha({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,kE.create(n.toOperationNode()))})}addUniqueConstraint(e,r,i=Dr){let n=i(new ou(Li.create(r,e)));return new lo({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addConstraint:ru.create(n.toOperationNode())})})}addCheckConstraint(e,r,i=Dr){let n=i(new au(Yc.create(r.toOperationNode(),e)));return new lo({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addConstraint:ru.create(n.toOperationNode())})})}addForeignKeyConstraint(e,r,i,n,o=Dr){let s=o(new tu(li.create(r.map(Le.create),qe(i),n.map(Le.create),e)));return new py({...this.#e,constraintBuilder:s})}addPrimaryKeyConstraint(e,r,i=Dr){let n=i(new su(fo.create(r,e)));return new lo({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addConstraint:ru.create(n.toOperationNode())})})}dropConstraint(e){return new sf({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{dropConstraint:nu.create(e)})})}renameConstraint(e,r){return new sf({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{renameConstraint:UR.create(e,r)})})}addIndex(e){return new hy({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{addIndex:ns.create(e)})})}dropIndex(e){return new lo({...this.#e,node:Be.cloneWithTableProps(this.#e.node,{dropIndex:Ho.create(e)})})}$call(e){return e(this)}},ha=class t{#e;constructor(e){this.#e=w(e)}alterColumn(e,r){let i=r(new of(e));return new t({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new t({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,bE.create(e))})}renameColumn(e,r){return new t({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,xE.create(e,r))})}addColumn(e,r,i=Dr){let n=i(new uo(ft.create(e,ui(r))));return new t({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,yE.create(n.toOperationNode()))})}modifyColumn(e,r,i=Dr){let n=i(new uo(ft.create(e,ui(r))));return new t({...this.#e,node:Be.cloneWithColumnAlteration(this.#e.node,kE.create(n.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var cu,DE=C(()=>{Wg();Pc();Oi();cu=class extends qc{transformPrimitiveValueList(e){return Go.create(e.values.map(Bt.createImmediate))}transformValue(e){return Bt.createImmediate(e.value)}}});var yy,LE=C(()=>{rg();kn();fr();hr();q();hn();Tn();DE();yy=class t{#e;constructor(e){this.#e=w(e)}ifNotExists(){return new t({...this.#e,node:ei.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new t({...this.#e,node:ei.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new t({...this.#e,node:ei.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new t({...this.#e,node:ei.cloneWith(this.#e.node,{table:qe(e)})})}column(e){return new t({...this.#e,node:ei.cloneWithColumns(this.#e.node,[Cc(e)])})}columns(e){return new t({...this.#e,node:ei.cloneWithColumns(this.#e.node,e.map(Cc))})}expression(e){return new t({...this.#e,node:ei.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new t({...this.#e,node:ei.cloneWith(this.#e.node,{using:Me.createWithSql(e)})})}where(...e){let r=new cu;return new t({...this.#e,node:ie.cloneWithWhere(this.#e.node,r.transformNode(st(e),this.#e.queryId))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var wy,zE=C(()=>{ig();q();wy=class t{#e;constructor(e){this.#e=w(e)}ifNotExists(){return new t({...this.#e,node:ng.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});function DR(t){if(PP.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var LR=C(()=>{Ec()});var by,jE=C(()=>{Yd();Ec();uy();q();rf();kr();ly();Gd();af();nf();Xd();hr();LR();OE();oi();CE();PE();by=class t{#e;constructor(e){this.#e=w(e)}temporary(){return new t({...this.#e,node:_r.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new t({...this.#e,node:_r.cloneWith(this.#e.node,{onCommit:DR(e)})})}ifNotExists(){return new t({...this.#e,node:_r.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=Dr){let n=i(new uo(ft.create(e,ui(r))));return new t({...this.#e,node:_r.cloneWithColumn(this.#e.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,r,i=Dr){let n=i(new su(fo.create(r,e)));return new t({...this.#e,node:_r.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addUniqueConstraint(e,r,i=Dr){let n=i(new ou(Li.create(r,e)));return new t({...this.#e,node:_r.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addCheckConstraint(e,r,i=Dr){let n=i(new au(Yc.create(r.toOperationNode(),e)));return new t({...this.#e,node:_r.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addForeignKeyConstraint(e,r,i,n,o=Dr){let s=o(new tu(li.create(r.map(Le.create),qe(i),n.map(Le.create),e)));return new t({...this.#e,node:_r.cloneWithConstraint(this.#e.node,s.toOperationNode())})}modifyFront(e){return new t({...this.#e,node:_r.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new t({...this.#e,node:_r.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new t({...this.#e,node:_r.cloneWith(this.#e.node,{selectQuery:Jr(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var vy,BE=C(()=>{Td();hr();q();vy=class t{#e;constructor(e){this.#e=w(e)}on(e){return new t({...this.#e,node:Ho.cloneWith(this.#e.node,{table:qe(e)})})}ifExists(){return new t({...this.#e,node:Ho.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Ho.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var xy,ME=C(()=>{og();q();xy=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:Id.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Id.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var Sy,qE=C(()=>{sg();q();Sy=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:$d.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:$d.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var di,cf=C(()=>{q();io();di=w({is(t){return t.kind==="CreateViewNode"},create(t){return w({kind:"CreateViewNode",name:Er.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var Ny,zR=C(()=>{DE();Ny=class{#e=new cu;transformQuery(e){return this.#e.transformNode(e.node,e.queryId)}transformResult(e){return Promise.resolve(e.result)}}});var Ay,WE=C(()=>{q();cf();fr();zR();Ay=class t{#e;constructor(e){this.#e=w(e)}temporary(){return new t({...this.#e,node:di.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new t({...this.#e,node:di.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new t({...this.#e,node:di.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new t({...this.#e,node:di.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new t({...this.#e,node:di.cloneWith(this.#e.node,{columns:e.map(YA)})})}as(e){let r=e.withPlugin(new Ny).toOperationNode();return new t({...this.#e,node:di.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var uu,_y=C(()=>{q();io();uu=w({is(t){return t.kind==="DropViewNode"},create(t){return w({kind:"DropViewNode",name:Er.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var Ey,FE=C(()=>{q();_y();Ey=class t{#e;constructor(e){this.#e=w(e)}materialized(){return new t({...this.#e,node:uu.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new t({...this.#e,node:uu.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:uu.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var ky,Ty=C(()=>{q();Pc();Oi();ky=w({is(t){return t.kind==="CreateTypeNode"},create(t){return w({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return w({...t,enum:Go.create(e.map(Bt.createImmediate))})}})});var Iy,VE=C(()=>{q();Ty();Iy=class t{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new t({...this.#e,node:ky.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var $y,Oy=C(()=>{q();$y=w({is(t){return t.kind==="DropTypeNode"},create(t){return w({kind:"DropTypeNode",name:t})},cloneWith(t,e){return w({...t,...e})}})});var Cy,KE=C(()=>{Oy();q();Cy=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:$y.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});function HE(t){if(t.includes(".")){let r=t.split(".").map(QM);if(r.length===2)return Er.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Er.create(t)}function QM(t){return t.trim()}var jR=C(()=>{io()});var lu,Py=C(()=>{q();io();lu=w({is(t){return t.kind==="RefreshMaterializedViewNode"},create(t){return w({kind:"RefreshMaterializedViewNode",name:Er.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var Ry,JE=C(()=>{q();Py();Ry=class t{#e;constructor(e){this.#e=w(e)}concurrently(){return new t({...this.#e,node:lu.cloneWith(this.#e.node,{concurrently:!0,withNoData:!1})})}withData(){return new t({...this.#e,node:lu.cloneWith(this.#e.node,{withNoData:!1})})}withNoData(){return new t({...this.#e,node:lu.cloneWith(this.#e.node,{withNoData:!0,concurrently:!1})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var Uy,QE=C(()=>{ta();rg();ig();Ec();Td();og();sg();hr();UE();LE();zE();jE();BE();ME();qE();Ui();Wc();WE();cf();FE();_y();VE();KE();Ty();Oy();jR();JE();Py();Uy=class t{#e;constructor(e){this.#e=e}createTable(e){return new by({queryId:xe(),executor:this.#e,node:_r.create(qe(e))})}dropTable(e){return new Sy({queryId:xe(),executor:this.#e,node:$d.create(qe(e))})}createIndex(e){return new yy({queryId:xe(),executor:this.#e,node:ei.create(e)})}dropIndex(e){return new vy({queryId:xe(),executor:this.#e,node:Ho.create(e)})}createSchema(e){return new wy({queryId:xe(),executor:this.#e,node:ng.create(e)})}dropSchema(e){return new xy({queryId:xe(),executor:this.#e,node:Id.create(e)})}alterTable(e){return new gy({queryId:xe(),executor:this.#e,node:Be.create(qe(e))})}createView(e){return new Ay({queryId:xe(),executor:this.#e,node:di.create(e)})}refreshMaterializedView(e){return new Ry({queryId:xe(),executor:this.#e,node:lu.create(e)})}dropView(e){return new Ey({queryId:xe(),executor:this.#e,node:uu.create(e)})}createType(e){return new Iy({queryId:xe(),executor:this.#e,node:ky.create(HE(e))})}dropType(e){return new Cy({queryId:xe(),executor:this.#e,node:$y.create(HE(e))})}withPlugin(e){return new t(this.#e.withPlugin(e))}withoutPlugins(){return new t(this.#e.withoutPlugins())}withSchema(e){return new t(this.#e.withPluginAtFront(new On(e)))}}});var Dy,ZE=C(()=>{Cd();ay();Dy=class{ref(e){return new fg(e)}table(e){return new sy(e)}}});var Ly,GE=C(()=>{Ly=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}}});var zy,YE=C(()=>{q_();zy=class t extends Vc{#e;#t;#r;constructor(e,r,i,n=[]){super(n),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e,r){return this.#e.compileQuery(e,r)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new t(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new t(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new t(this.#e,this.#t,this.#r,[])}}});function jy(){return typeof performance<"u"&&Ze(performance.now)?performance.now():Date.now()}var BR=C(()=>{q()});var By,MR=C(()=>{BR();By=class{#e;#t;#r;#n;#i;#o=new WeakSet;constructor(e,r){this.#n=!1,this.#e=e,this.#t=r}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||(this.#r=this.#e.init().then(()=>{this.#n=!0}).catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||await this.init();let e=await this.#e.acquireConnection();return this.#o.has(e)||(this.#a()&&this.#s(e),this.#o.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}savepoint(e,r,i){if(this.#e.savepoint)return this.#e.savepoint(e,r,i);throw new Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(e,r,i){if(this.#e.rollbackToSavepoint)return this.#e.rollbackToSavepoint(e,r,i);throw new Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(e,r,i){if(this.#e.releaseSavepoint)return this.#e.releaseSavepoint(e,r,i);throw new Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#r&&(await this.#r,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#a(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#s(e){let r=e.executeQuery,i=e.streamQuery,n=this;e.executeQuery=async o=>{let s,a=jy();try{return await r.call(e,o)}catch(c){throw s=c,await n.#c(c,o,a),c}finally{s||await n.#u(o,a)}},e.streamQuery=async function*(o,s){let a,c=jy();try{for await(let u of i.call(e,o,s))yield u}catch(u){throw a=u,await n.#c(u,o,c),u}finally{a||await n.#u(o,c,!0)}}}async#c(e,r,i){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#l(i)}))}async#u(e,r,i=!1){await this.#t.query(()=>({level:"query",isStream:i,query:e,queryDurationMillis:this.#l(r)}))}#l(e){return jy()-e}}});var ZM,du,XE=C(()=>{ZM=()=>{},du=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(ZM);return this.#t=this.#r(e).finally(()=>{this.#t=void 0}),this.#t}async#r(e){return await e(this.#e)}}});function ek(t){if(t.accessMode&&!GM.includes(t.accessMode))throw new Error(`invalid transaction access mode ${t.accessMode}`);if(t.isolationLevel&&!YM.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var GM,YM,tk=C(()=>{GM=["read only","read write"],YM=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});function eq(t){if(t.level==="query"){let e=`kysely:query:${t.isStream?"stream:":""}`;console.log(`${e} ${t.query.sql}`),console.log(`${e} duration: ${t.queryDurationMillis.toFixed(1)}ms`)}else t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}var XM,lme,My,rk=C(()=>{q();XM=["query","error"],lme=w(XM),My=class{#e;#t;constructor(e){Ze(e)?(this.#t=e,this.#e=w({query:!0,error:!0})):(this.#t=eq,this.#e=w({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}});function qR(t){return Rt(t)&&Ze(t.compile)}var nk=C(()=>{q()});function tq(t){return Rt(t)&&Rt(t.config)&&Rt(t.driver)&&Rt(t.executor)&&Rt(t.dialect)}function ya(t){if(t.isCommitted)throw new Error("Transaction is already committed");if(t.isRolledBack)throw new Error("Transaction is already rolled back")}var wa,qy,ik,ok,sk,ak,ga,ck,WR=C(()=>{QE();ZE();GE();Qg();YE();q();MR();XE();tk();ry();rk();Ui();nk();iy();Zd();oi();Wc();M_();Pd();Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");wa=class t extends Hc{#e;constructor(e){let r,i;if(tq(e))r={executor:e.executor},i={...e};else{let n=e.dialect,o=n.createDriver(),s=n.createQueryCompiler(),a=n.createAdapter(),c=new My(e.log??[]),u=new By(o,c),l=new Ly(u),f=new zy(s,a,l,e.plugins??[]);r={executor:f},i={config:e,executor:f,dialect:n,driver:u}}super(r),this.#e=w(i)}get schema(){return new Uy(this.#e.executor)}get dynamic(){return new Dy}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new Zc({node:yn.create(Ur(e)?void 0:Jr(e))})}get fn(){return ty()}transaction(){return new ok({...this.#e})}startTransaction(){return new sk({...this.#e})}connection(){return new ik({...this.#e})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new On(e))})}withTables(){return new t({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r){r!==void 0&&$i("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let i=qR(e)?e.compile():e;return this.getExecutor().executeQuery(i)}async[Symbol.asyncDispose](){await this.destroy()}},qy=class t extends wa{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new On(e))})}withTables(){return new t({...this.#e})}};ik=class{#e;constructor(e){this.#e=w(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new du(r)),n=new wa({...this.#e,executor:i});return await e(n)})}},ok=class t{#e;constructor(e){this.#e=w(e)}setAccessMode(e){return new t({...this.#e,accessMode:e})}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,accessMode:i,...n}=this.#e,o={isolationLevel:r,accessMode:i};return ek(o),this.#e.executor.provideConnection(async s=>{let a=this.#e.executor.withConnectionProvider(new du(s)),c=new qy({...n,executor:a}),u=!1;try{await this.#e.driver.beginTransaction(s,o),u=!0;let l=await e(c);return await this.#e.driver.commitTransaction(s),l}catch(l){throw u&&await this.#e.driver.rollbackTransaction(s),l}})}},sk=class t{#e;constructor(e){this.#e=w(e)}setAccessMode(e){return new t({...this.#e,accessMode:e})}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(){let{isolationLevel:e,accessMode:r,...i}=this.#e,n={isolationLevel:e,accessMode:r};ek(n);let o=await Vg(this.#e.executor);return await this.#e.driver.beginTransaction(o.connection,n),new ak({...i,connection:o,executor:this.#e.executor.withConnectionProvider(new du(o.connection))})}},ak=class t extends qy{#e;#t;#r;constructor(e){let r={isCommitted:!1,isRolledBack:!1};e={...e,executor:new ck(e.executor,r)};let{connection:i,...n}=e;super(n),this.#e=w(e),this.#r=r;let o=xe();this.#t=s=>e.executor.compileQuery(s,o)}get isCommitted(){return this.#r.isCommitted}get isRolledBack(){return this.#r.isRolledBack}commit(){return ya(this.#r),new ga(async()=>{await this.#e.driver.commitTransaction(this.#e.connection.connection),this.#r.isCommitted=!0,this.#e.connection.release()})}rollback(){return ya(this.#r),new ga(async()=>{await this.#e.driver.rollbackTransaction(this.#e.connection.connection),this.#r.isRolledBack=!0,this.#e.connection.release()})}savepoint(e){return ya(this.#r),new ga(async()=>(await this.#e.driver.savepoint?.(this.#e.connection.connection,e,this.#t),new t({...this.#e})))}rollbackToSavepoint(e){return ya(this.#r),new ga(async()=>(await this.#e.driver.rollbackToSavepoint?.(this.#e.connection.connection,e,this.#t),new t({...this.#e})))}releaseSavepoint(e){return ya(this.#r),new ga(async()=>(await this.#e.driver.releaseSavepoint?.(this.#e.connection.connection,e,this.#t),new t({...this.#e})))}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new On(e))})}withTables(){return new t({...this.#e})}},ga=class{#e;constructor(e){this.#e=e}async execute(){return await this.#e()}};ck=class t{#e;#t;constructor(e,r){e instanceof t?this.#e=e.#e:this.#e=e,this.#t=r}get adapter(){return this.#e.adapter}get plugins(){return this.#e.plugins}transformQuery(e,r){return this.#e.transformQuery(e,r)}compileQuery(e,r){return this.#e.compileQuery(e,r)}provideConnection(e){return this.#e.provideConnection(e)}executeQuery(e){return ya(this.#t),this.#e.executeQuery(e)}stream(e,r){return ya(this.#t),this.#e.stream(e,r)}withConnectionProvider(e){return new t(this.#e.withConnectionProvider(e),this.#t)}withPlugin(e){return new t(this.#e.withPlugin(e),this.#t)}withPlugins(e){return new t(this.#e.withPlugins(e),this.#t)}withPluginAtFront(e){return new t(this.#e.withPluginAtFront(e),this.#t)}withoutPlugins(){return new t(this.#e.withoutPlugins(),this.#t)}}});var FR=C(()=>{});var VR=C(()=>{});var KR=C(()=>{});var HR=C(()=>{});var JR=C(()=>{});function po(t){return new uk(t)}var uk,lk,dk=C(()=>{ti();q();Kc();ot();Kr();uk=class t{#e;constructor(e){this.#e=w(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new lk(this,e)}$castTo(){return new t({...this.#e})}$notNull(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,plugins:this.#e.plugins!==void 0?w([...this.#e.plugins,e]):w([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#n(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#n(r))}#t(e){let r=e!==void 0?e.getExecutor():ts;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#n(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};lk=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return rr.create(this.#e.toOperationNode(),dt(this.#t)?this.#t.toOperationNode():we.create(this.#t))}}});function QR(t){return dt(t)?t.toOperationNode():tt(t)}var Te,is=C(()=>{ot();Kr();kn();Oi();fr();hr();Ci();Ui();dk();Te=Object.assign((t,...e)=>po({queryId:xe(),rawNode:Me.create(t,e?.map(QR)??[])}),{ref(t){return po({queryId:xe(),rawNode:Me.createWithChild(fn(t))})},val(t){return po({queryId:xe(),rawNode:Me.createWithChild(tt(t))})},value(t){return this.val(t)},table(t){return po({queryId:xe(),rawNode:Me.createWithChild(qe(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",po({queryId:xe(),rawNode:Me.create(e,t.map(we.create))})},lit(t){return po({queryId:xe(),rawNode:Me.createWithChild(Bt.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return po({queryId:xe(),rawNode:Me.createWithSql(t)})},join(t,e=Te`, `){let r=new Array(Math.max(2*t.length-1,0)),i=e.toOperationNode();for(let n=0;n<t.length;++n)r[2*n]=QR(t[n]),n!==t.length-1&&(r[2*n+1]=i);return po({queryId:xe(),rawNode:Me.createWithChildren(r)})}})});var ZR=C(()=>{});var GR=C(()=>{});var Wy,fk=C(()=>{q();Wy=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=w({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}});var rq,Qr,nq,YR,iq,ba=C(()=>{Ec();sa();fk();na();Rc();kn();q();cf();Yg();aa();Pd();rq=/'/g,Qr=class extends Wy{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e,r){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),w({query:e,queryId:r,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!mn.is(this.parentNode)&&!It.is(this.parentNode)&&!_r.is(this.parentNode)&&!di.is(this.parentNode)&&!Gg.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let n=0;n<=i;n++)this.visitNode(e[n]),n<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.parentNode!==void 0&&!mn.is(this.parentNode)&&!Me.is(this.parentNode)&&!In.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&($i("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),e.orAction&&(this.append(" "),this.visitNode(e.orAction)),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.parentNode!==void 0&&!mn.is(this.parentNode)&&!Me.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Qe(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(iq[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let n=0;n<r.length;++n)this.append(r[n]),i.length>n&&this.visitNode(i[n])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.collation&&(this.append(" "),this.visitNode(e.collation)),e.direction&&(this.append(" "),this.visitNode(e.direction)),e.nulls&&(this.append(" nulls "),this.append(e.nulls))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.parentNode!==void 0&&!mn.is(this.parentNode)&&!Me.is(this.parentNode)&&!In.is(this.parentNode);if(this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins){if(!e.from)throw new Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(e.joins," ")}e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}buildDeferrable(e){e.deferrable!==void 0&&(e.deferrable?this.append(" deferrable"):this.append(" not deferrable")),e.initiallyDeferred!==void 0&&(e.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate)),this.buildDeferrable(e)}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),no(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.renameConstraint&&this.visitNode(e.renameConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitRenameConstraint(e){this.append("rename constraint "),this.visitNode(e.oldName),this.append(" to "),this.visitNode(e.newName)}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitRefreshMaterializedView(e){this.append("refresh materialized view "),e.concurrently&&this.append("concurrently "),this.visitNode(e.name),e.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(nq[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.withinGroup&&(this.append(" within group ("),this.visitNode(e.withinGroup),this.append(")")),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return dn.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(let r of e.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(e){let r=e.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(e.value)),r&&this.append("]")}visitJSONOperatorChain(e){for(let r=0,i=e.values.length;r<i;r++)r===i-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[r])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.returning&&(this.append(" "),this.visitNode(e.returning)),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}visitOrAction(e){this.append(e.action)}visitCollate(e){this.append("collate "),this.visitNode(e.collation)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),n="";for(let o of e)n+=o,o===r?n+=r:o===i&&(n+=i);return n}sanitizeStringLiteral(e){return e.replace(rq,"''")}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Qe(e))this.appendStringLiteral(e);else if(Xn(e)||no(e)||Ko(e))this.append(e.toString());else if(Vo(e))this.append("null");else if(tg(e))this.appendImmediateValue(e.toISOString());else throw new Error(`invalid immediate value ${e}`)}appendStringLiteral(e){this.append("'"),this.append(this.sanitizeStringLiteral(e)),this.append("'")}sortSelectModifiers(e){return e.sort((r,i)=>r.modifier&&i.modifier?YR[r.modifier]-YR[i.modifier]:1),w(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}},nq=w({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),YR=w({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),iq=w({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})});var kt,fu=C(()=>{kn();q();Ui();kt=w({raw(t,e=[]){return w({sql:t,query:Me.createWithSql(t),parameters:w(e),queryId:xe()})}})});var XR=C(()=>{});var eU=C(()=>{});var tU=C(()=>{});var rU=C(()=>{});var nU=C(()=>{});var zi,pu=C(()=>{zi=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}});var iU=C(()=>{});function Cn(t,e){return Me.createWithChildren([Me.createWithSql(`${t} `),we.create(e)])}var Fy=C(()=>{ot();kn()});var Vy,pk,mk,hk=C(()=>{ca();Fy();fu();q();Ui();Vy=class{#e;#t=new mk;#r;#n;constructor(e){this.#e=w({...e})}async init(){this.#r=Ze(this.#e.database)?await this.#e.database():this.#e.database,this.#n=new pk(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#n)}async acquireConnection(){return await this.#t.lock(),this.#n}async beginTransaction(e){await e.executeQuery(kt.raw("begin"))}async commitTransaction(e){await e.executeQuery(kt.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(kt.raw("rollback"))}async savepoint(e,r,i){await e.executeQuery(i(Cn("savepoint",r),xe()))}async rollbackToSavepoint(e,r,i){await e.executeQuery(i(Cn("rollback to",r),xe()))}async releaseSavepoint(e,r,i){await e.executeQuery(i(Cn("release",r),xe()))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},pk=class{#e;constructor(e){this.#e=e}executeQuery(e){let{sql:r,parameters:i}=e,n=this.#e.prepare(r);if(n.reader)return Promise.resolve({rows:n.all(i)});let{changes:o,lastInsertRowid:s}=n.run(i);return Promise.resolve({numAffectedRows:o!=null?BigInt(o):void 0,insertId:s!=null?BigInt(s):void 0,rows:[]})}async*streamQuery(e,r){let{sql:i,parameters:n,query:o}=e,s=this.#e.prepare(i);if(Ke.is(o)){let a=s.iterate(n);for(let c of a)yield{rows:[c]}}else throw new Error("Sqlite driver only supports streaming of select queries")}},mk=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(e=>{this.#t=e})}unlock(){let e=this.#t;this.#e=void 0,this.#t=void 0,e?.()}}});var oq,Ky,gk=C(()=>{ba();oq=/"/g,Ky=class extends Qr{visitOrAction(e){this.append("or "),this.append(e.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(oq,'""')}visitDefaultInsertValue(e){this.append("null")}}});var Zr,Pn,Ihe,va=C(()=>{q();Zr="kysely_migration",Pn="kysely_migration_lock",Ihe=w({__noMigrations__:!0})});var Hy,yk=C(()=>{va();is();Hy=class{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){return await this.#r(e)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e,r){let i=e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return r.withInternalKyselyTables||(i=i.where("name","!=",Zr).where("name","!=",Pn)),i}async#r(e){let r=await this.#t(this.#e,e).execute(),i=await this.#e.with("table_list",o=>this.#t(o,e)).selectFrom(["table_list as tl",Te`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),n={};for(let o of i)n[o.table]??=[],n[o.table].push(o);return r.map(({name:o,sql:s,type:a})=>{let c=s?.split(/[\(\),]/)?.find(l=>l.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),u=n[o]??[];if(!c){let l=u.filter(f=>f.pk>0);l.length===1&&l[0].type.toLowerCase()==="integer"&&(c=l[0].name)}return{name:o,isView:a==="view",columns:u.map(l=>({name:l.name,dataType:l.type,isNullable:!l.notnull,isAutoIncrementing:l.name===c,hasDefaultValue:l.dflt_value!=null,comment:void 0}))}})}}});var Jy,wk=C(()=>{pu();Jy=class extends zi{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}});var uf,oU=C(()=>{hk();gk();yk();wk();q();uf=class{#e;constructor(e){this.#e=w({...e})}createDriver(){return new Vy(this.#e)}createQueryCompiler(){return new Ky}createAdapter(){return new Jy}createIntrospector(e){return new Hy(e)}}});var sU=C(()=>{});var sq,Qy,bk=C(()=>{ba();sq=/"/g,Qy=class extends Qr{sanitizeIdentifier(e){return e.replace(sq,'""')}}});var Zy,vk=C(()=>{va();q();is();Zy=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",Te`col_description(a.attrelid, a.attnum)`.as("column_description"),Te`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(Te`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",Zr).where("c.relname","!=",Pn));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(o=>o.name===i.table&&o.schema===i.schema);return n||(n=w({name:i.table,isView:i.table_type==="v",schema:i.schema,columns:[]}),r.push(n)),n.columns.push(w({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:i.auto_incrementing!==null,hasDefaultValue:i.has_default,comment:i.column_description??void 0})),r},[])}}});var aq,Gy,xk=C(()=>{is();pu();aq=BigInt("3853314791062309107"),Gy=class extends zi{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,r){await Te`select pg_advisory_xact_lock(${Te.lit(aq)})`.execute(e)}async releaseMigrationLock(e,r){}}});function mu(t,e){if(cq(t)&&e.stack){let r=e.stack.split(`
`).slice(1).join(`
`);return t.stack+=`
${r}`,t}return t}function cq(t){return Rt(t)&&Qe(t.stack)}var Yy=C(()=>{q()});function uq(t){return Rt(t)&&"insertId"in t&&"affectedRows"in t}var aU,Xy,Sk,Nk=C(()=>{Fy();fu();q();Ui();Yy();aU=Symbol(),Xy=class{#e;#t=new WeakMap;#r;constructor(e){this.#e=w({...e})}async init(){this.#r=Ze(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#n(),r=this.#t.get(e);return r||(r=new Sk(e),this.#t.set(e,r),this.#e?.onCreateConnection&&await this.#e.onCreateConnection(r)),this.#e?.onReserveConnection&&await this.#e.onReserveConnection(r),r}async#n(){return new Promise((e,r)=>{this.#r.getConnection(async(i,n)=>{i?r(i):e(n)})})}async beginTransaction(e,r){if(r.isolationLevel||r.accessMode){let i=[];r.isolationLevel&&i.push(`isolation level ${r.isolationLevel}`),r.accessMode&&i.push(r.accessMode);let n=`set transaction ${i.join(", ")}`;await e.executeQuery(kt.raw(n))}await e.executeQuery(kt.raw("begin"))}async commitTransaction(e){await e.executeQuery(kt.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(kt.raw("rollback"))}async savepoint(e,r,i){await e.executeQuery(i(Cn("savepoint",r),xe()))}async rollbackToSavepoint(e,r,i){await e.executeQuery(i(Cn("rollback to",r),xe()))}async releaseSavepoint(e,r,i){await e.executeQuery(i(Cn("release savepoint",r),xe()))}async releaseConnection(e){e[aU]()}async destroy(){return new Promise((e,r)=>{this.#r.end(i=>{i?r(i):e()})})}};Sk=class{#e;constructor(e){this.#e=e}async executeQuery(e){try{let r=await this.#t(e);if(uq(r)){let{insertId:i,affectedRows:n,changedRows:o}=r;return{insertId:i!=null&&i.toString()!=="0"?BigInt(i):void 0,numAffectedRows:n!=null?BigInt(n):void 0,numChangedRows:o!=null?BigInt(o):void 0,rows:[]}}else if(Array.isArray(r))return{rows:r};return{rows:[]}}catch(r){throw mu(r,new Error)}}#t(e){return new Promise((r,i)=>{this.#e.query(e.sql,e.parameters,(n,o)=>{n?i(n):r(o)})})}async*streamQuery(e,r){let i=this.#e.query(e.sql,e.parameters).stream({objectMode:!0});try{for await(let n of i)yield{rows:[n]}}catch(n){if(n&&typeof n=="object"&&"code"in n&&n.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw n}}[aU](){this.#e.release()}}});var lq,ew,Ak=C(()=>{ba();lq=/`/g,ew=class extends Qr{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(lq,"``")}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.using&&(this.append(" using "),this.visitNode(e.using)),e.table&&(this.append(" on "),this.visitNode(e.table)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}}});var tw,_k=C(()=>{va();q();is();tw=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",n=>n.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",Te`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",Zr).where("columns.TABLE_NAME","!=",Pn));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(o=>o.name===i.TABLE_NAME);return n||(n=w({name:i.TABLE_NAME,isView:i.TABLE_TYPE==="VIEW",schema:i.TABLE_SCHEMA,columns:[]}),r.push(n)),n.columns.push(w({name:i.COLUMN_NAME,dataType:i.DATA_TYPE,isNullable:i.IS_NULLABLE==="YES",isAutoIncrementing:i.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:i.COLUMN_DEFAULT!==null,comment:i.COLUMN_COMMENT===""?void 0:i.COLUMN_COMMENT})),r},[])}}});var cU,dq,rw,Ek=C(()=>{is();pu();cU="ea586330-2c93-47c8-908d-981d9d270f9d",dq=3600,rw=class extends zi{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e,r){await Te`select get_lock(${Te.lit(cU)}, ${Te.lit(dq)})`.execute(e)}async releaseMigrationLock(e,r){await Te`select release_lock(${Te.lit(cU)})`.execute(e)}}});var lf,uU=C(()=>{Nk();Ak();_k();Ek();lf=class{#e;constructor(e){this.#e=e}createDriver(){return new Xy(this.#e)}createQueryCompiler(){return new ew}createAdapter(){return new rw}createIntrospector(e){return new tw(e)}}});var lU=C(()=>{});var dU,nw,kk,Tk=C(()=>{Fy();fu();q();Ui();Yy();dU=Symbol(),nw=class{#e;#t=new WeakMap;#r;constructor(e){this.#e=w({...e})}async init(){this.#r=Ze(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#r.connect(),r=this.#t.get(e);return r||(r=new kk(e,{cursor:this.#e.cursor??null}),this.#t.set(e,r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(r)),this.#e.onReserveConnection&&await this.#e.onReserveConnection(r),r}async beginTransaction(e,r){if(r.isolationLevel||r.accessMode){let i="start transaction";r.isolationLevel&&(i+=` isolation level ${r.isolationLevel}`),r.accessMode&&(i+=` ${r.accessMode}`),await e.executeQuery(kt.raw(i))}else await e.executeQuery(kt.raw("begin"))}async commitTransaction(e){await e.executeQuery(kt.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(kt.raw("rollback"))}async savepoint(e,r,i){await e.executeQuery(i(Cn("savepoint",r),xe()))}async rollbackToSavepoint(e,r,i){await e.executeQuery(i(Cn("rollback to",r),xe()))}async releaseSavepoint(e,r,i){await e.executeQuery(i(Cn("release",r),xe()))}async releaseConnection(e){e[dU]()}async destroy(){if(this.#r){let e=this.#r;this.#r=void 0,await e.end()}}},kk=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}async executeQuery(e){try{let{command:r,rowCount:i,rows:n}=await this.#e.query(e.sql,[...e.parameters]);return{numAffectedRows:r==="INSERT"||r==="UPDATE"||r==="DELETE"||r==="MERGE"?BigInt(i):void 0,rows:n??[]}}catch(r){throw mu(r,new Error)}}async*streamQuery(e,r){if(!this.#t.cursor)throw new Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(r)||r<=0)throw new Error("chunkSize must be a positive integer");let i=this.#e.query(new this.#t.cursor(e.sql,e.parameters.slice()));try{for(;;){let n=await i.read(r);if(n.length===0)break;yield{rows:n}}}finally{await i.close()}}[dU](){this.#e.release()}}});var fU=C(()=>{});var df,pU=C(()=>{Tk();vk();bk();xk();df=class{#e;constructor(e){this.#e=e}createDriver(){return new nw(this.#e)}createQueryCompiler(){return new Qy}createAdapter(){return new Gy}createIntrospector(e){return new Zy(e)}}});var iw,Ik=C(()=>{va();is();pu();iw=class extends zi{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(e){await Te`exec sp_getapplock @DbPrincipal = ${Te.lit("dbo")}, @Resource = ${Te.lit(Zr)}, @LockMode = ${Te.lit("Exclusive")}`.execute(e)}async releaseMigrationLock(){}}});var mU=C(()=>{});var hU,gU,yU,ow,$k,ff,Ok=C(()=>{q();fu();Yy();D_();B_();hU=Symbol(),gU=Symbol(),yU=Symbol(),ow=class{#e;#t;constructor(e){this.#e=w({...e});let{tarn:r,tedious:i,validateConnections:n}=this.#e,{validateConnections:o,...s}=r.options;this.#t=new r.Pool({...s,create:async()=>{let a=await i.connectionFactory();return await new $k(a,i).connect()},destroy:async a=>{await a[gU]()},validate:n===!1||o===!1?void 0:a=>a[yU]()})}async init(){}async acquireConnection(){return await this.#t.acquire().promise}async beginTransaction(e,r){await e.beginTransaction(r)}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async savepoint(e,r){await e.savepoint(r)}async rollbackToSavepoint(e,r){await e.rollbackTransaction(r)}async releaseConnection(e){(this.#e.resetConnectionsOnRelease||this.#e.tedious.resetConnectionOnRelease)&&await e[hU](),this.#t.release(e)}async destroy(){await this.#t.destroy()}},$k=class{#e;#t;#r;constructor(e,r){this.#e=e,this.#t=!1,this.#r=r}async beginTransaction(e){let{isolationLevel:r}=e;await new Promise((i,n)=>this.#e.beginTransaction(o=>{o?n(o):i(void 0)},r?qg(8):void 0,r?this.#n(r):void 0))}async commitTransaction(){await new Promise((e,r)=>this.#e.commitTransaction(i=>{i?r(i):e(void 0)}))}async connect(){let{promise:e,reject:r,resolve:i}=new co;this.#e.connect(o=>{if(o)return r(o);i()}),this.#e.on("error",o=>{o instanceof Error&&"code"in o&&o.code==="ESOCKET"&&(this.#t=!0),console.error(o),r(o)});function n(){r(new Error("The connection ended without ever completing the connection"))}return this.#e.once("end",n),await e,this.#e.off("end",n),this}async executeQuery(e){try{let r=new co,i=new ff({compiledQuery:e,tedious:this.#r,onDone:r});this.#e.execSql(i.request);let{rowCount:n,rows:o}=await r.promise;return{numAffectedRows:n!==void 0?BigInt(n):void 0,rows:o}}catch(r){throw mu(r,new Error)}}async rollbackTransaction(e){await new Promise((r,i)=>this.#e.rollbackTransaction(n=>{n?i(n):r(void 0)},e))}async savepoint(e){await new Promise((r,i)=>this.#e.saveTransaction(n=>{n?i(n):r(void 0)},e))}async*streamQuery(e,r){if(!Number.isInteger(r)||r<=0)throw new Error("chunkSize must be a positive integer");let i=new ff({compiledQuery:e,streamChunkSize:r,tedious:this.#r});this.#e.execSql(i.request);try{for(;;){let n=await i.readChunk();if(n.length===0||(yield{rows:n},n.length<r))break}}finally{await this.#i(i)}}#n(e){let{ISOLATION_LEVEL:r}=this.#r,n={"read committed":r.READ_COMMITTED,"read uncommitted":r.READ_UNCOMMITTED,"repeatable read":r.REPEATABLE_READ,serializable:r.SERIALIZABLE,snapshot:r.SNAPSHOT}[e];if(n===void 0)throw new Error(`Unknown isolation level: ${e}`);return n}#i(e){return new Promise(r=>{e.request.once("requestCompleted",r),this.#e.cancel()||(e.request.off("requestCompleted",r),r())})}[gU](){return"closed"in this.#e&&this.#e.closed?Promise.resolve():new Promise(e=>{this.#e.once("end",e),this.#e.close()})}async[hU](){await new Promise((e,r)=>{this.#e.reset(i=>{if(i)return r(i);e()})})}async[yU](){if(this.#t||this.#o())return!1;try{let e=new co,r=new ff({compiledQuery:kt.raw("select 1"),onDone:e,tedious:this.#r});return this.#e.execSql(r.request),await e.promise,!0}catch{return!1}}#o(){return"closed"in this.#e&&!!this.#e.closed}},ff=class{#e;#t;#r;#n;#i;#o;constructor(e){let{compiledQuery:r,onDone:i,streamChunkSize:n,tedious:o}=e;if(this.#t=[],this.#r=n,this.#n={},this.#i=o,i){let s="onDone";this.#n[s]=(a,c)=>{if(a!=="chunkReady"){if(delete this.#n[s],a==="error")return i.reject(c);i.resolve({rowCount:this.#o,rows:this.#t})}}}this.#e=new this.#i.Request(r.sql,(s,a)=>{if(s)return Object.values(this.#n).forEach(c=>c("error",s instanceof AggregateError?s.errors:s));this.#o=a}),this.#a(r.parameters),this.#s()}get request(){return this.#e}readChunk(){let e=this.readChunk.name;return new Promise((r,i)=>{this.#n[e]=(n,o)=>{if(delete this.#n[e],n==="error")return i(o);r(this.#t.splice(0,this.#r))},this.#e.resume()})}#a(e){for(let r=0;r<e.length;r++){let i=e[r];this.#e.addParameter(String(r+1),this.#c(i),i)}}#s(){let e=this.#r?()=>{this.#r<=this.#t.length&&(this.#e.pause(),Object.values(this.#n).forEach(i=>i("chunkReady")))}:()=>{},r=i=>{let n={};for(let o of i)n[o.metadata.colName]=o.value;this.#t.push(n),e()};this.#e.on("row",r),this.#e.once("requestCompleted",()=>{Object.values(this.#n).forEach(i=>i("completed")),this.#e.off("row",r)})}#c(e){return Vo(e)||Ur(e)||Qe(e)?this.#i.TYPES.NVarChar:Ko(e)||Xn(e)&&e%1===0?e<-2147483648||e>2147483647?this.#i.TYPES.BigInt:this.#i.TYPES.Int:Xn(e)?this.#i.TYPES.Float:no(e)?this.#i.TYPES.Bit:tg(e)?this.#i.TYPES.DateTime:CP(e)?this.#i.TYPES.VarBinary:this.#i.TYPES.NVarChar}}});var sw,Ck=C(()=>{va();q();sw=class{#e;constructor(e){this.#e=e}async getSchemas(){return await this.#e.selectFrom("sys.schemas").select("name").execute()}async getTables(e={withInternalKyselyTables:!1}){let r=await this.#e.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",n=>n.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!e.withInternalKyselyTables,n=>n.where("tables.name","!=",Zr).where("tables.name","!=",Pn)).select(["tables.name as table_name",n=>n.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#e.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",n=>n.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),i={};for(let n of r){let o=`${n.table_schema_name}.${n.table_name}`;(i[o]=i[o]||w({columns:[],isView:n.table_type==="V ",name:n.table_name,schema:n.table_schema_name??void 0})).columns.push(w({dataType:n.type_name,dataTypeSchema:n.type_schema_name??void 0,hasDefaultValue:n.column_default_object_id>0||n.column_generated_always_type!=="NOT_APPLICABLE"||n.column_is_identity||n.column_is_computed||n.column_is_rowguidcol,isAutoIncrementing:n.column_is_identity,isNullable:n.column_is_nullable&&n.type_is_nullable,name:n.column_name,comment:n.column_comment??void 0}))}return Object.values(i)}async getMetadata(e){return{tables:await this.getTables(e)}}}});var fq,aw,Pk=C(()=>{ba();fq=/^[a-z0-9_]$/i,aw=class extends Qr{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(e){super.visitOffset(e),this.append(" rows")}compileColumnAlterations(e){let r={};for(let n of e)r[n.kind]||(r[n.kind]=[]),r[n.kind].push(n);let i=!0;r.AddColumnNode&&(this.append("add "),this.compileList(r.AddColumnNode),i=!1),r.AlterColumnNode&&(i||this.append(", "),this.compileList(r.AlterColumnNode)),r.DropColumnNode&&(i||this.append(", "),this.append("drop column "),this.compileList(r.DropColumnNode)),r.ModifyColumnNode&&(i||this.append(", "),this.compileList(r.ModifyColumnNode)),r.RenameColumnNode&&(i||this.append(", "),this.compileList(r.RenameColumnNode))}visitAddColumn(e){this.visitNode(e.column)}visitDropColumn(e){this.visitNode(e.column)}visitMergeQuery(e){super.visitMergeQuery(e),this.append(";")}visitCollate(e){this.append("collate ");let{name:r}=e.collation;for(let i of r)if(!fq.test(i))throw new Error(`Invalid collation: ${r}`);this.append(r)}announcesNewColumnDataType(){return!1}}});var cw,wU=C(()=>{Ik();Ok();Ck();Pk();cw=class{#e;constructor(e){this.#e=e}createDriver(){return new ow(this.#e)}createQueryCompiler(){return new aw}createAdapter(){return new iw}createIntrospector(e){return new sw(e)}}});var bU=C(()=>{});var vU=C(()=>{});var xU=C(()=>{});var SU=C(()=>{});var NU=C(()=>{});var AU=C(()=>{});var _U=C(()=>{});var EU=C(()=>{});var kU=C(()=>{});var TU=C(()=>{});var IU=C(()=>{});var $U=C(()=>{});var OU=C(()=>{});var CU=C(()=>{});var PU=C(()=>{});var hu=C(()=>{WR();Qg();cg();Jc();FR();VR();KR();HR();JR();Zg();T_();zg();$_();la();p_();ry();S_();I_();O_();__();iE();iy();dE();K_();F_();QA();dk();is();ZR();YE();Kc();GR();ba();fu();QE();jE();VE();qE();KE();LE();BE();zE();ME();uy();ly();UE();WE();JE();FE();$E();ZE();Cd();ay();tk();XR();eU();GE();XE();tU();rU();nU();pu();iU();oU();sU();hk();bk();vk();xk();uU();lU();Nk();Ak();_k();Ek();Tk();fU();pU();gk();yk();wk();Ik();mU();wU();Ok();Ck();Pk();ba();bU();va();vU();xU();SU();NU();Wc();AU();_U();EU();wE();dy();my();ey();ti();IE();ta();Jo();lg();Zd();hE();Xd();JA();Yd();kr();v_();P_();jg();kU();rg();ig();Ec();Ty();cf();Py();mE();y_();_E();Bd();vE();fy();Td();og();sg();Oy();_y();l_();Y_();rf();zd();rE();AE();Q_();o_();a_();ot();sa();Tc();wg();uE();Rd();gg();Vd();_g();z_();qd();TE();J_();Pg();x_();VA();Kr();Wg();fk();TU();na();k_();ra();mg();Dd();f_();Ng();Rc();m_();n_();af();vg();Tn();kn();dg();ef();SE();RE();u_();io();Od();FA();ca();h_();Yg();IU();kc();E_();pE();oE();nf();Dc();Eg();Pc();Oi();g_();aa();Md();U_();$U();nk();OU();CU();rk();PU()});var RU={};ar(RU,{BunSqliteDialect:()=>bq});var pq,mq,hq,gq,yq,wq,bq,UU=C(()=>{hu();pq=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},mq=class{#e;#t=new gq;#r;#n;constructor(t){this.#e={...t}}async init(){this.#r=this.#e.database,this.#n=new hq(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#n)}async acquireConnection(){return await this.#t.lock(),this.#n}async beginTransaction(t){await t.executeQuery(kt.raw("begin"))}async commitTransaction(t){await t.executeQuery(kt.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(kt.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},hq=class{#e;constructor(t){this.#e=t}executeQuery(t){let{sql:e,parameters:r}=t,i=this.#e.prepare(e);return Promise.resolve({rows:i.all(r)})}async*streamQuery(){throw new Error("Streaming query is not supported by SQLite driver.")}},gq=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(t=>{this.#t=t})}unlock(){let t=this.#t;this.#e=void 0,this.#t=void 0,t?.()}},yq=class{#e;constructor(t){this.#e=t}async getSchemas(){return[]}async getTables(t={withInternalKyselyTables:!1}){let e=this.#e.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();t.withInternalKyselyTables||(e=e.where("name","!=",Zr).where("name","!=",Pn));let r=await e.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(t){return{tables:await this.getTables(t)}}async#t(t){let e=this.#e,r=(await e.selectFrom("sqlite_master").where("name","=",t).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(i=>i.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:t,columns:(await e.selectFrom(Te`pragma_table_info(${t})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(i=>({name:i.name,dataType:i.type,isNullable:!i.notnull,isAutoIncrementing:i.name===r,hasDefaultValue:i.dflt_value!=null})),isView:!0}}},wq=class extends Qr{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},bq=class{#e;constructor(t){this.#e={...t}}createDriver(){return new mq(this.#e)}createQueryCompiler(){return new wq}createAdapter(){return new pq}createIntrospector(t){return new yq(t)}}});var DU={};ar(DU,{NodeSqliteDialect:()=>Eq});var vq,xq,Sq,Nq,Aq,_q,Eq,LU=C(()=>{hu();vq=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},xq=class{#e;#t=new Nq;#r;#n;constructor(t){this.#e={...t}}async init(){this.#r=this.#e.database,this.#n=new Sq(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#n)}async acquireConnection(){return await this.#t.lock(),this.#n}async beginTransaction(t){await t.executeQuery(kt.raw("begin"))}async commitTransaction(t){await t.executeQuery(kt.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(kt.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},Sq=class{#e;constructor(t){this.#e=t}executeQuery(t){let{sql:e,parameters:r}=t,i=this.#e.prepare(e).all(...r);return Promise.resolve({rows:i})}async*streamQuery(){throw new Error("Streaming query is not supported by SQLite driver.")}},Nq=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(t=>{this.#t=t})}unlock(){let t=this.#t;this.#e=void 0,this.#t=void 0,t?.()}},Aq=class{#e;constructor(t){this.#e=t}async getSchemas(){return[]}async getTables(t={withInternalKyselyTables:!1}){let e=this.#e.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();t.withInternalKyselyTables||(e=e.where("name","!=",Zr).where("name","!=",Pn));let r=await e.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(t){return{tables:await this.getTables(t)}}async#t(t){let e=this.#e,r=(await e.selectFrom("sqlite_master").where("name","=",t).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(i=>i.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:t,columns:(await e.selectFrom(Te`pragma_table_info(${t})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(i=>({name:i.name,dataType:i.type,isNullable:!i.notnull,isAutoIncrementing:i.name===r,hasDefaultValue:i.dflt_value!=null})),isView:!0}}},_q=class extends Qr{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},Eq=class{#e;constructor(t){this.#e={...t}}createDriver(){return new xq(this.#e)}createQueryCompiler(){return new _q}createAdapter(){return new vq}createIntrospector(t){return new Aq(t)}}});function gu(t){if(!t)return null;if("dialect"in t)return gu(t.dialect);if("createDriver"in t){if(t instanceof uf)return"sqlite";if(t instanceof lf)return"mysql";if(t instanceof df)return"postgres";if(t instanceof cw)return"mssql"}return"aggregate"in t?"sqlite":"getConnection"in t?"mysql":"connect"in t?"postgres":"fileControl"in t||"open"in t&&"close"in t&&"prepare"in t?"sqlite":null}var uw,lw=C(()=>{hu();uw=async t=>{let e=t.database;if(!e)return{kysely:null,databaseType:null,transaction:void 0};if("db"in e)return{kysely:e.db,databaseType:e.type,transaction:e.transaction};if("dialect"in e)return{kysely:new wa({dialect:e.dialect}),databaseType:e.type,transaction:e.transaction};let r,i=gu(e);if("createDriver"in e&&(r=e),"aggregate"in e&&!("createSession"in e)&&(r=new uf({database:e})),"getConnection"in e&&(r=new lf(e)),"connect"in e&&(r=new df({pool:e})),"fileControl"in e){let{BunSqliteDialect:n}=await Promise.resolve().then(()=>(UU(),RU));r=new n({database:e})}if("createSession"in e&&typeof window>"u"){let n;try{({DatabaseSync:n}=await import("node:sqlite"))}catch(o){if(o!==null&&typeof o=="object"&&"code"in o&&o.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw o}if(n&&e instanceof n){let{NodeSqliteDialect:o}=await Promise.resolve().then(()=>(LU(),DU));r=new o({database:e})}}return{kysely:r?new wa({dialect:r}):null,databaseType:i,transaction:void 0}}});var zU,jU=C(()=>{hu();Ed();zU=(t,e)=>{let r=null,i=s=>({getFieldName:a,schema:c,getDefaultFieldName:u,getDefaultModelName:l,getFieldAttributes:f,getModelName:d})=>{let m=b=>{let N=[],T=[];if(b)for(let[I,$]of Object.entries(b)){let v=c[l(I)]?.fields,[S,E]=I.includes(".")?I.split("."):[void 0,I];if(v){v.id={type:"string"};for(let[_,O]of Object.entries(v))N.push(Te`${Te.ref(`join_${E}`)}.${Te.ref(O.fieldName||_)} as ${Te.ref(`_joined_${E}_${O.fieldName||_}`)}`),T.push({joinModel:I,joinModelRef:E,fieldName:O.fieldName||_})}}return{allSelectsStr:T,allSelects:N}},h=async(b,N,T,I)=>{let $;if(e?.type==="mysql"){await N.execute();let v=b.id?"id":I.length>0&&I[0]?.field?I[0].field:"id";if(!b.id&&I.length===0)return $=await s.selectFrom(T).selectAll().orderBy(a({model:T,field:v}),"desc").limit(1).executeTakeFirst(),$;let S=b[v]||I[0]?.value;return $=await s.selectFrom(T).selectAll().orderBy(a({model:T,field:v}),"desc").where(a({model:T,field:v}),"=",S).limit(1).executeTakeFirst(),$}return e?.type==="mssql"?($=await N.outputAll("inserted").executeTakeFirst(),$):($=await N.returningAll().executeTakeFirst(),$)};function p(b,N){if(!N)return{and:null,or:null};let T={and:[],or:[]};return N.forEach(I=>{let{field:$,value:v,operator:S="=",connector:E="AND"}=I,_=v,O=a({model:b,field:$}),R=B=>{let D=`${b}.${O}`;return S.toLowerCase()==="in"?B(D,"in",Array.isArray(_)?_:[_]):S.toLowerCase()==="not_in"?B(D,"not in",Array.isArray(_)?_:[_]):S==="contains"?B(D,"like",`%${_}%`):S==="starts_with"?B(D,"like",`${_}%`):S==="ends_with"?B(D,"like",`%${_}`):S==="eq"?B(D,"=",_):S==="ne"?B(D,"<>",_):S==="gt"?B(D,">",_):S==="gte"?B(D,">=",_):S==="lt"?B(D,"<",_):S==="lte"?B(D,"<=",_):B(D,S,_)};E==="OR"?T.or.push(R):T.and.push(R)}),{and:T.and.length?T.and:null,or:T.or.length?T.or:null}}function y(b,N,T){if(!N||!b.length)return b;let I=new Map;for(let v of b){let S={},E={};for(let[R]of Object.entries(N))E[d(R)]={};for(let[R,B]of Object.entries(v)){let D=String(R),P=!1;for(let{joinModel:z,fieldName:W,joinModelRef:Q}of T)if(D===`_joined_${Q}_${W}`){E[d(z)][a({model:z,field:W})]=B,P=!0;break}P||(S[R]=B)}let _=S.id;if(!_)continue;if(!I.has(_)){let R={...S};for(let[B,D]of Object.entries(N))R[d(B)]=D.relation==="one-to-one"?null:[];I.set(_,R)}let O=I.get(_);for(let[R,B]of Object.entries(N)){let D=B.relation==="one-to-one",P=B.limit??100,z=E[d(R)],W=z&&Object.keys(z).length>0&&Object.values(z).some(Q=>Q!=null);if(D)O[d(R)]=W?z:null;else{let Q=d(R);if(Array.isArray(O[Q])&&W){if(O[Q].length>=P)continue;let G=a({model:R,field:"id"}),J=z[G];J?!O[Q].some(le=>le[G]===J)&&O[Q].length<P&&O[Q].push(z):O[Q].length<P&&O[Q].push(z)}}}}let $=Array.from(I.values());for(let v of $)for(let[S,E]of Object.entries(N))if(E.relation!=="one-to-one"){let _=d(S);if(Array.isArray(v[_])){let O=E.limit??100;v[_].length>O&&(v[_]=v[_].slice(0,O))}}return $}return{async create({data:b,model:N}){return await h(b,s.insertInto(N).values(b),N,[])},async findOne({model:b,where:N,select:T,join:I}){let{and:$,or:v}=p(b,N),S=s.selectFrom(B=>{let D=B.selectFrom(b);return $&&(D=D.where(P=>P.and($.map(z=>z(P))))),v&&(D=D.where(P=>P.or(v.map(z=>z(P))))),D.selectAll().as("primary")}).selectAll("primary");if(I)for(let[B,D]of Object.entries(I)){let[P,z]=B.includes(".")?B.split("."):[void 0,B];S=S.leftJoin(`${B} as join_${z}`,W=>W.onRef(`join_${z}.${D.on.to}`,"=",`primary.${D.on.from}`))}let{allSelectsStr:E,allSelects:_}=m(I);S=S.select(_);let O=await S.execute();if(!O||!Array.isArray(O)||O.length===0)return null;let R=O[0];return I?y(O,I,E)[0]:R},async findMany({model:b,where:N,limit:T,offset:I,sortBy:$,join:v}){let{and:S,or:E}=p(b,N),_=s.selectFrom(D=>{let P=D.selectFrom(b);return e?.type==="mssql"?I!==void 0?($||(P=P.orderBy(a({model:b,field:"id"}))),P=P.offset(I).fetch(T||100)):T!==void 0&&(P=P.top(T)):(T!==void 0&&(P=P.limit(T)),I!==void 0&&(P=P.offset(I))),$?.field&&(P=P.orderBy(`${a({model:b,field:$.field})}`,$.direction)),S&&(P=P.where(z=>z.and(S.map(W=>W(z))))),E&&(P=P.where(z=>z.or(E.map(W=>W(z))))),P.selectAll().as("primary")}).selectAll("primary");if(v)for(let[D,P]of Object.entries(v)){let[z,W]=D.includes(".")?D.split("."):[void 0,D];_=_.leftJoin(`${D} as join_${W}`,Q=>Q.onRef(`join_${W}.${P.on.to}`,"=",`primary.${P.on.from}`))}let{allSelectsStr:O,allSelects:R}=m(v);_=_.select(R),$?.field&&(_=_.orderBy(`${a({model:b,field:$.field})}`,$.direction));let B=await _.execute();return B?v?y(B,v,O):B:[]},async update({model:b,where:N,update:T}){let{and:I,or:$}=p(b,N),v=s.updateTable(b).set(T);return I&&(v=v.where(S=>S.and(I.map(E=>E(S))))),$&&(v=v.where(S=>S.or($.map(E=>E(S))))),await h(T,v,b,N)},async updateMany({model:b,where:N,update:T}){let{and:I,or:$}=p(b,N),v=s.updateTable(b).set(T);I&&(v=v.where(E=>E.and(I.map(_=>_(E))))),$&&(v=v.where(E=>E.or($.map(_=>_(E)))));let S=(await v.executeTakeFirst()).numUpdatedRows;return S>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(S)},async count({model:b,where:N}){let{and:T,or:I}=p(b,N),$=s.selectFrom(b).select(s.fn.count("id").as("count"));T&&($=$.where(S=>S.and(T.map(E=>E(S))))),I&&($=$.where(S=>S.or(I.map(E=>E(S)))));let v=await $.execute();return typeof v[0].count=="number"?v[0].count:typeof v[0].count=="bigint"?Number(v[0].count):parseInt(v[0].count)},async delete({model:b,where:N}){let{and:T,or:I}=p(b,N),$=s.deleteFrom(b);T&&($=$.where(v=>v.and(T.map(S=>S(v))))),I&&($=$.where(v=>v.or(I.map(S=>S(v))))),await $.execute()},async deleteMany({model:b,where:N}){let{and:T,or:I}=p(b,N),$=s.deleteFrom(b);T&&($=$.where(S=>S.and(T.map(E=>E(S))))),I&&($=$.where(S=>S.or(I.map(E=>E(S)))));let v=(await $.executeTakeFirst()).numDeletedRows;return v>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(v)},options:e}},n=null;n={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:e?.usePlural,debugLogs:e?.debugLogs,supportsBooleans:!(e?.type==="sqlite"||e?.type==="mssql"||e?.type==="mysql"||!e?.type),supportsDates:!(e?.type==="sqlite"||e?.type==="mssql"||!e?.type),supportsJSON:e?.type==="postgres",supportsArrays:!1,supportsUUIDs:e?.type==="postgres",transaction:e?.transaction?s=>t.transaction().execute(a=>s(Fo({config:n.config,adapter:i(a)})(r))):!1},adapter:i(t)};let o=Fo(n);return s=>(r=s,o(s))}});var Rk={};ar(Rk,{createKyselyAdapter:()=>uw,getKyselyDatabaseType:()=>gu,kyselyAdapter:()=>zU});var Uk=C(()=>{lw();jU()});var Sb=(t,e,r)=>(i,n)=>{let o=-1;return s(0);async function s(a){if(a<=o)throw new Error("next() called multiple times");o=a;let c,u=!1,l;if(t[a]?(l=t[a][0][0],i.req.routeIndex=a):l=a===t.length&&n||void 0,l)try{c=await l(i,()=>s(a+1))}catch(f){if(f instanceof Error&&e)i.error=f,c=await e(f,i),u=!0;else throw f}else i.finalized===!1&&r&&(c=await r(i));return c&&(i.finalized===!1||u)&&(i.res=c),i}};var vo=class extends Error{res;status;constructor(t=500,e){super(e?.message,{cause:e?.cause}),this.res=e?.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};var T$=Symbol();var I$=async(t,e=Object.create(null))=>{let{all:r=!1,dot:i=!1}=e,o=(t instanceof Zf?t.raw.headers:t.headers).get("Content-Type");return o?.startsWith("multipart/form-data")||o?.startsWith("application/x-www-form-urlencoded")?Sz(t,{all:r,dot:i}):{}};async function Sz(t,e){let r=await t.formData();return r?Nz(r,e):{}}function Nz(t,e){let r=Object.create(null);return t.forEach((i,n)=>{e.all||n.endsWith("[]")?Az(r,n,i):r[n]=i}),e.dot&&Object.entries(r).forEach(([i,n])=>{i.includes(".")&&(_z(r,i,n),delete r[i])}),r}var Az=(t,e,r)=>{t[e]!==void 0?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:e.endsWith("[]")?t[e]=[r]:t[e]=r},_z=(t,e,r)=>{let i=t,n=e.split(".");n.forEach((o,s)=>{s===n.length-1?i[o]=r:((!i[o]||typeof i[o]!="object"||Array.isArray(i[o])||i[o]instanceof File)&&(i[o]=Object.create(null)),i=i[o])})};var Ab=t=>{let e=t.split("/");return e[0]===""&&e.shift(),e},$$=t=>{let{groups:e,path:r}=Ez(t),i=Ab(r);return kz(i,e)},Ez=t=>{let e=[];return t=t.replace(/\{[^}]+\}/g,(r,i)=>{let n=`@${i}`;return e.push([n,r]),n}),{groups:e,path:t}},kz=(t,e)=>{for(let r=e.length-1;r>=0;r--){let[i]=e[r];for(let n=t.length-1;n>=0;n--)if(t[n].includes(i)){t[n]=t[n].replace(i,e[r][1]);break}}return t},Gf={},O$=(t,e)=>{if(t==="*")return"*";let r=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let i=`${t}#${e}`;return Gf[i]||(r[2]?Gf[i]=e&&e[0]!==":"&&e[0]!=="*"?[i,r[1],new RegExp(`^${r[2]}(?=/${e})`)]:[t,r[1],new RegExp(`^${r[2]}$`)]:Gf[i]=[t,r[1],!0]),Gf[i]}return null},Ra=(t,e)=>{try{return e(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return e(r)}catch{return r}})}},Tz=t=>Ra(t,decodeURI),_b=t=>{let e=t.url,r=e.indexOf("/",e.indexOf(":")+4),i=r;for(;i<e.length;i++){let n=e.charCodeAt(i);if(n===37){let o=e.indexOf("?",i),s=e.slice(r,o===-1?void 0:o);return Tz(s.includes("%25")?s.replace(/%25/g,"%2525"):s)}else if(n===63)break}return e.slice(r,i)};var C$=t=>{let e=_b(t);return e.length>1&&e.at(-1)==="/"?e.slice(0,-1):e},hs=(t,e,...r)=>(r.length&&(e=hs(e,...r)),`${t?.[0]==="/"?"":"/"}${t}${e==="/"?"":`${t?.at(-1)==="/"?"":"/"}${e?.[0]==="/"?e.slice(1):e}`}`),Yf=t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let e=t.split("/"),r=[],i="";return e.forEach(n=>{if(n!==""&&!/\:/.test(n))i+="/"+n;else if(/\:/.test(n))if(/\?/.test(n)){r.length===0&&i===""?r.push("/"):r.push(i);let o=n.replace("?","");i+="/"+o,r.push(i)}else i+="/"+n}),r.filter((n,o,s)=>s.indexOf(n)===o)},Nb=t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?Ra(t,Fu):t):t,P$=(t,e,r)=>{let i;if(!r&&e&&!/[%+]/.test(e)){let s=t.indexOf("?",8);if(s===-1)return;for(t.startsWith(e,s+1)||(s=t.indexOf(`&${e}`,s+1));s!==-1;){let a=t.charCodeAt(s+e.length+1);if(a===61){let c=s+e.length+2,u=t.indexOf("&",c);return Nb(t.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";s=t.indexOf(`&${e}`,s+1)}if(i=/[%+]/.test(t),!i)return}let n={};i??=/[%+]/.test(t);let o=t.indexOf("?",8);for(;o!==-1;){let s=t.indexOf("&",o+1),a=t.indexOf("=",o);a>s&&s!==-1&&(a=-1);let c=t.slice(o+1,a===-1?s===-1?void 0:s:a);if(i&&(c=Nb(c)),o=s,c==="")continue;let u;a===-1?u="":(u=t.slice(a+1,s===-1?void 0:s),i&&(u=Nb(u))),r?(n[c]&&Array.isArray(n[c])||(n[c]=[]),n[c].push(u)):n[c]??=u}return e?n[e]:n},R$=P$,U$=(t,e)=>P$(t,e,!0),Fu=decodeURIComponent;var D$=t=>Ra(t,Fu),Zf=class{raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(t,e="/",r=[[]]){this.raw=t,this.path=e,this.#t=r,this.#e={}}param(t){return t?this.#r(t):this.#n()}#r(t){let e=this.#t[0][this.routeIndex][1][t],r=this.#i(e);return r&&/\%/.test(r)?D$(r):r}#n(){let t={},e=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of e){let i=this.#i(this.#t[0][this.routeIndex][1][r]);i!==void 0&&(t[r]=/\%/.test(i)?D$(i):i)}return t}#i(t){return this.#t[1]?this.#t[1][t]:t}query(t){return R$(this.url,t)}queries(t){return U$(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let e={};return this.raw.headers.forEach((r,i)=>{e[i]=r}),e}async parseBody(t){return this.bodyCache.parsedBody??=await I$(this,t)}#o=t=>{let{bodyCache:e,raw:r}=this,i=e[t];if(i)return i;let n=Object.keys(e)[0];return n?e[n].then(o=>(n==="json"&&(o=JSON.stringify(o)),new Response(o)[t]())):e[t]=r[t]()};json(){return this.#o("text").then(t=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,e){this.#e[t]=e}valid(t){return this.#e[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[T$](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,t]])=>t)}get routePath(){return this.#t[0].map(([[,t]])=>t)[this.routeIndex].path}};var L$={Stringify:1,BeforeStream:2,Stream:3},Iz=(t,e)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=e,r};var Eb=async(t,e,r,i,n)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));let o=t.callbacks;if(!o?.length)return Promise.resolve(t);n?n[0]+=t:n=[t];let s=Promise.all(o.map(a=>a({phase:e,buffer:n,context:i}))).then(a=>Promise.all(a.filter(Boolean).map(c=>Eb(c,e,!1,i,n))).then(()=>n[0]));return r?Iz(await s,o):s};var $z="text/plain; charset=UTF-8",kb=(t,e)=>({"Content-Type":t,...e}),z$=class{#e;#t;env={};#r;finalized=!1;error;#n;#i;#o;#a;#s;#c;#u;#l;#f;constructor(t,e){this.#e=t,e&&(this.#i=e.executionCtx,this.env=e.env,this.#c=e.notFoundHandler,this.#f=e.path,this.#l=e.matchResult)}get req(){return this.#t??=new Zf(this.#e,this.#f,this.#l),this.#t}get event(){if(this.#i&&"respondWith"in this.#i)return this.#i;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#i)return this.#i;throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#u??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[e,r]of this.#o.headers.entries())if(e!=="content-type")if(e==="set-cookie"){let i=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let n of i)t.headers.append("set-cookie",n)}else t.headers.set(e,r)}this.#o=t,this.finalized=!0}render=(...t)=>(this.#s??=e=>this.html(e),this.#s(...t));setLayout=t=>this.#a=t;getLayout=()=>this.#a;setRenderer=t=>{this.#s=t};header=(t,e,r)=>{this.finalized&&(this.#o=new Response(this.#o.body,this.#o));let i=this.#o?this.#o.headers:this.#u??=new Headers;e===void 0?i.delete(t):r?.append?i.append(t,e):i.set(t,e)};status=t=>{this.#n=t};set=(t,e)=>{this.#r??=new Map,this.#r.set(t,e)};get=t=>this.#r?this.#r.get(t):void 0;get var(){return this.#r?Object.fromEntries(this.#r):{}}#d(t,e,r){let i=this.#o?new Headers(this.#o.headers):this.#u??new Headers;if(typeof e=="object"&&"headers"in e){let o=e.headers instanceof Headers?e.headers:new Headers(e.headers);for(let[s,a]of o)s.toLowerCase()==="set-cookie"?i.append(s,a):i.set(s,a)}if(r)for(let[o,s]of Object.entries(r))if(typeof s=="string")i.set(o,s);else{i.delete(o);for(let a of s)i.append(o,a)}let n=typeof e=="number"?e:e?.status??this.#n;return new Response(t,{status:n,headers:i})}newResponse=(...t)=>this.#d(...t);body=(t,e,r)=>this.#d(t,e,r);text=(t,e,r)=>!this.#u&&!this.#n&&!e&&!r&&!this.finalized?new Response(t):this.#d(t,e,kb($z,r));json=(t,e,r)=>this.#d(JSON.stringify(t),e,kb("application/json",r));html=(t,e,r)=>{let i=n=>this.#d(n,e,kb("text/html; charset=UTF-8",r));return typeof t=="object"?Eb(t,L$.Stringify,!1,{}).then(i):i(t)};redirect=(t,e)=>{let r=String(t);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,e??302)};notFound=()=>(this.#c??=()=>new Response,this.#c(this))};var St="ALL",j$="all",B$=["get","post","put","delete","options","patch"],Xf="Can not add a route since the matcher is already built.",ep=class extends Error{};var M$="__COMPOSED_HANDLER";var Oz=t=>t.text("404 Not Found",404),q$=(t,e)=>{if("getResponse"in t){let r=t.getResponse();return e.newResponse(r.body,r)}return console.error(t),e.text("Internal Server Error",500)},W$=class F${get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(e={}){[...B$,j$].forEach(o=>{this[o]=(s,...a)=>(typeof s=="string"?this.#e=s:this.#n(o,this.#e,s),a.forEach(c=>{this.#n(o,this.#e,c)}),this)}),this.on=(o,s,...a)=>{for(let c of[s].flat()){this.#e=c;for(let u of[o].flat())a.map(l=>{this.#n(u.toUpperCase(),this.#e,l)})}return this},this.use=(o,...s)=>(typeof o=="string"?this.#e=o:(this.#e="*",s.unshift(o)),s.forEach(a=>{this.#n(St,this.#e,a)}),this);let{strict:i,...n}=e;Object.assign(this,n),this.getPath=i??!0?e.getPath??_b:C$}#t(){let e=new F$({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#r=this.#r,e.routes=this.routes,e}#r=Oz;errorHandler=q$;route(e,r){let i=this.basePath(e);return r.routes.map(n=>{let o;r.errorHandler===q$?o=n.handler:(o=async(s,a)=>(await Sb([],r.errorHandler)(s,()=>n.handler(s,a))).res,o[M$]=n.handler),i.#n(n.method,n.path,o)}),this}basePath(e){let r=this.#t();return r._basePath=hs(this._basePath,e),r}onError=e=>(this.errorHandler=e,this);notFound=e=>(this.#r=e,this);mount(e,r,i){let n,o;i&&(typeof i=="function"?o=i:(o=i.optionHandler,i.replaceRequest===!1?n=c=>c:n=i.replaceRequest));let s=o?c=>{let u=o(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};n||=(()=>{let c=hs(this._basePath,e),u=c==="/"?0:c.length;return l=>{let f=new URL(l.url);return f.pathname=f.pathname.slice(u)||"/",new Request(f,l)}})();let a=async(c,u)=>{let l=await r(n(c.req.raw),...s(c));if(l)return l;await u()};return this.#n(St,hs(e,"*"),a),this}#n(e,r,i){e=e.toUpperCase(),r=hs(this._basePath,r);let n={basePath:this._basePath,path:r,method:e,handler:i};this.router.add(e,r,[i,n]),this.routes.push(n)}#i(e,r){if(e instanceof Error)return this.errorHandler(e,r);throw e}#o(e,r,i,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(e,r,i,"GET")))();let o=this.getPath(e,{env:i}),s=this.router.match(n,o),a=new z$(e,{path:o,matchResult:s,env:i,executionCtx:r,notFoundHandler:this.#r});if(s[0].length===1){let u;try{u=s[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(l){return this.#i(l,a)}return u instanceof Promise?u.then(l=>l||(a.finalized?a.res:this.#r(a))).catch(l=>this.#i(l,a)):u??this.#r(a)}let c=Sb(s[0],this.errorHandler,this.#r);return(async()=>{try{let u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return this.#i(u,a)}})()}fetch=(e,...r)=>this.#o(e,r[1],r[0],e.method);request=(e,r,i,n)=>e instanceof Request?this.fetch(r?new Request(e,r):e,i,n):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${hs("/",e)}`,r),i,n));fire=()=>{addEventListener("fetch",e=>{e.respondWith(this.#o(e.request,e,void 0,e.request.method))})}};var tp=[];function Tb(t,e){let r=this.buildAllMatchers(),i=((n,o)=>{let s=r[n]||r[St],a=s[2][o];if(a)return a;let c=o.match(s[0]);if(!c)return[[],tp];let u=c.indexOf("",1);return[s[1][u],c]});return this.match=i,i(t,e)}var rp="[^/]+",Vu=".*",Ku="(?:|/.*)",gs=Symbol(),Cz=new Set(".\\+*[^]$()");function Pz(t,e){return t.length===1?e.length===1?t<e?-1:1:-1:e.length===1||t===Vu||t===Ku?1:e===Vu||e===Ku?-1:t===rp?1:e===rp?-1:t.length===e.length?t<e?-1:1:e.length-t.length}var V$=class Ib{#e;#t;#r=Object.create(null);insert(e,r,i,n,o){if(e.length===0){if(this.#e!==void 0)throw gs;if(o)return;this.#e=r;return}let[s,...a]=e,c=s==="*"?a.length===0?["","",Vu]:["","",rp]:s==="/*"?["","",Ku]:s.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),u;if(c){let l=c[1],f=c[2]||rp;if(l&&c[2]&&(f===".*"||(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f))))throw gs;if(u=this.#r[f],!u){if(Object.keys(this.#r).some(d=>d!==Vu&&d!==Ku))throw gs;if(o)return;u=this.#r[f]=new Ib,l!==""&&(u.#t=n.varIndex++)}!o&&l!==""&&i.push([l,u.#t])}else if(u=this.#r[s],!u){if(Object.keys(this.#r).some(l=>l.length>1&&l!==Vu&&l!==Ku))throw gs;if(o)return;u=this.#r[s]=new Ib}u.insert(a,r,i,n,o)}buildRegExpStr(){let r=Object.keys(this.#r).sort(Pz).map(i=>{let n=this.#r[i];return(typeof n.#t=="number"?`(${i})@${n.#t}`:Cz.has(i)?`\\${i}`:i)+n.buildRegExpStr()});return typeof this.#e=="number"&&r.unshift(`#${this.#e}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}};var K$=class{#e={varIndex:0};#t=new V$;insert(t,e,r){let i=[],n=[];for(let s=0;;){let a=!1;if(t=t.replace(/\{[^}]+\}/g,c=>{let u=`@\\${s}`;return n[s]=[u,c],s++,a=!0,u}),!a)break}let o=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let s=n.length-1;s>=0;s--){let[a]=n[s];for(let c=o.length-1;c>=0;c--)if(o[c].indexOf(a)!==-1){o[c]=o[c].replace(a,n[s][1]);break}}return this.#t.insert(o,e,i,this.#e,r),i}buildRegExp(){let t=this.#t.buildRegExpStr();if(t==="")return[/^$/,[],[]];let e=0,r=[],i=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(n,o,s)=>o!==void 0?(r[++e]=Number(o),"$()"):(s!==void 0&&(i[Number(s)]=++e),"")),[new RegExp(`^${t}`),r,i]}};var Rz=[/^$/,[],Object.create(null)],H$=Object.create(null);function J$(t){return H$[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}function Uz(){H$=Object.create(null)}function Dz(t){let e=new K$,r=[];if(t.length===0)return Rz;let i=t.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,l],[f,d])=>u?1:f?-1:l.length-d.length),n=Object.create(null);for(let u=0,l=-1,f=i.length;u<f;u++){let[d,m,h]=i[u];d?n[m]=[h.map(([y])=>[y,Object.create(null)]),tp]:l++;let p;try{p=e.insert(m,l,d)}catch(y){throw y===gs?new ep(m):y}d||(r[l]=h.map(([y,b])=>{let N=Object.create(null);for(b-=1;b>=0;b--){let[T,I]=p[b];N[T]=I}return[y,N]}))}let[o,s,a]=e.buildRegExp();for(let u=0,l=r.length;u<l;u++)for(let f=0,d=r[u].length;f<d;f++){let m=r[u][f]?.[1];if(!m)continue;let h=Object.keys(m);for(let p=0,y=h.length;p<y;p++)m[h[p]]=a[m[h[p]]]}let c=[];for(let u in s)c[u]=r[s[u]];return[o,c,n]}function Ua(t,e){if(t){for(let r of Object.keys(t).sort((i,n)=>n.length-i.length))if(J$(r).test(e))return[...t[r]]}}var np=class{name="RegExpRouter";#e;#t;constructor(){this.#e={[St]:Object.create(null)},this.#t={[St]:Object.create(null)}}add(t,e,r){let i=this.#e,n=this.#t;if(!i||!n)throw new Error(Xf);i[t]||[i,n].forEach(a=>{a[t]=Object.create(null),Object.keys(a[St]).forEach(c=>{a[t][c]=[...a[St][c]]})}),e==="/*"&&(e="*");let o=(e.match(/\/:/g)||[]).length;if(/\*$/.test(e)){let a=J$(e);t===St?Object.keys(i).forEach(c=>{i[c][e]||=Ua(i[c],e)||Ua(i[St],e)||[]}):i[t][e]||=Ua(i[t],e)||Ua(i[St],e)||[],Object.keys(i).forEach(c=>{(t===St||t===c)&&Object.keys(i[c]).forEach(u=>{a.test(u)&&i[c][u].push([r,o])})}),Object.keys(n).forEach(c=>{(t===St||t===c)&&Object.keys(n[c]).forEach(u=>a.test(u)&&n[c][u].push([r,o]))});return}let s=Yf(e)||[e];for(let a=0,c=s.length;a<c;a++){let u=s[a];Object.keys(n).forEach(l=>{(t===St||t===l)&&(n[l][u]||=[...Ua(i[l],u)||Ua(i[St],u)||[]],n[l][u].push([r,o-c+a+1]))})}}match=Tb;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(e=>{t[e]||=this.#r(e)}),this.#e=this.#t=void 0,Uz(),t}#r(t){let e=[],r=t===St;return[this.#e,this.#t].forEach(i=>{let n=i[t]?Object.keys(i[t]).map(o=>[o,i[t][o]]):[];n.length!==0?(r||=!0,e.push(...n)):t!==St&&e.push(...Object.keys(i[St]).map(o=>[o,i[St][o]]))}),r?Dz(e):null}};var $b=class{name="SmartRouter";#e=[];#t=[];constructor(t){this.#e=t.routers}add(t,e,r){if(!this.#t)throw new Error(Xf);this.#t.push([t,e,r])}match(t,e){if(!this.#t)throw new Error("Fatal error");let r=this.#e,i=this.#t,n=r.length,o=0,s;for(;o<n;o++){let a=r[o];try{for(let c=0,u=i.length;c<u;c++)a.add(...i[c]);s=a.match(t,e)}catch(c){if(c instanceof ep)continue;throw c}this.match=a.match.bind(a),this.#e=[a],this.#t=void 0;break}if(o===n)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,s}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}};var Hu=Object.create(null),Q$=class Z${#e;#t;#r;#n=0;#i=Hu;constructor(e,r,i){if(this.#t=i||Object.create(null),this.#e=[],e&&r){let n=Object.create(null);n[e]={handler:r,possibleKeys:[],score:0},this.#e=[n]}this.#r=[]}insert(e,r,i){this.#n=++this.#n;let n=this,o=$$(r),s=[];for(let a=0,c=o.length;a<c;a++){let u=o[a],l=o[a+1],f=O$(u,l),d=Array.isArray(f)?f[0]:u;if(d in n.#t){n=n.#t[d],f&&s.push(f[1]);continue}n.#t[d]=new Z$,f&&(n.#r.push(f),s.push(f[1])),n=n.#t[d]}return n.#e.push({[e]:{handler:i,possibleKeys:s.filter((a,c,u)=>u.indexOf(a)===c),score:this.#n}}),n}#o(e,r,i,n){let o=[];for(let s=0,a=e.#e.length;s<a;s++){let c=e.#e[s],u=c[r]||c[St],l={};if(u!==void 0&&(u.params=Object.create(null),o.push(u),i!==Hu||n&&n!==Hu))for(let f=0,d=u.possibleKeys.length;f<d;f++){let m=u.possibleKeys[f],h=l[u.score];u.params[m]=n?.[m]&&!h?n[m]:i[m]??n?.[m],l[u.score]=!0}}return o}search(e,r){let i=[];this.#i=Hu;let o=[this],s=Ab(r),a=[];for(let c=0,u=s.length;c<u;c++){let l=s[c],f=c===u-1,d=[];for(let m=0,h=o.length;m<h;m++){let p=o[m],y=p.#t[l];y&&(y.#i=p.#i,f?(y.#t["*"]&&i.push(...this.#o(y.#t["*"],e,p.#i)),i.push(...this.#o(y,e,p.#i))):d.push(y));for(let b=0,N=p.#r.length;b<N;b++){let T=p.#r[b],I=p.#i===Hu?{}:{...p.#i};if(T==="*"){let O=p.#t["*"];O&&(i.push(...this.#o(O,e,p.#i)),O.#i=I,d.push(O));continue}let[$,v,S]=T;if(!l&&!(S instanceof RegExp))continue;let E=p.#t[$],_=s.slice(c).join("/");if(S instanceof RegExp){let O=S.exec(_);if(O){if(I[v]=O[0],i.push(...this.#o(E,e,p.#i,I)),Object.keys(E.#t).length){E.#i=I;let R=O[0].match(/\//)?.length??0;(a[R]||=[]).push(E)}continue}}(S===!0||S.test(l))&&(I[v]=l,f?(i.push(...this.#o(E,e,I,p.#i)),E.#t["*"]&&i.push(...this.#o(E.#t["*"],e,I,p.#i))):(E.#i=I,d.push(E)))}}o=d.concat(a.shift()??[])}return i.length>1&&i.sort((c,u)=>c.score-u.score),[i.map(({handler:c,params:u})=>[c,u])]}};var Ob=class{name="TrieRouter";#e;constructor(){this.#e=new Q$}add(t,e,r){let i=Yf(e);if(i){for(let n=0,o=i.length;n<o;n++)this.#e.insert(t,i[n],r);return}this.#e.insert(t,e,r)}match(t,e){return this.#e.search(t,e)}};var qn=class extends W${constructor(t={}){super(t),this.router=t.router??new $b({routers:[new np,new Ob]})}};var G$=t=>{let r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...t},i=(o=>typeof o=="string"?o==="*"?()=>o:s=>o===s?s:null:typeof o=="function"?o:s=>o.includes(s)?s:null)(r.origin),n=(o=>typeof o=="function"?o:Array.isArray(o)?()=>o:()=>[])(r.allowMethods);return async function(s,a){function c(l,f){s.res.headers.set(l,f)}let u=await i(s.req.header("origin")||"",s);if(u&&c("Access-Control-Allow-Origin",u),r.credentials&&c("Access-Control-Allow-Credentials","true"),r.exposeHeaders?.length&&c("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),s.req.method==="OPTIONS"){r.origin!=="*"&&c("Vary","Origin"),r.maxAge!=null&&c("Access-Control-Max-Age",r.maxAge.toString());let l=await n(s.req.header("origin")||"",s);l.length&&c("Access-Control-Allow-Methods",l.join(","));let f=r.allowHeaders;if(!f?.length){let d=s.req.header("Access-Control-Request-Headers");d&&(f=d.split(/\s*,\s*/))}return f?.length&&(c("Access-Control-Allow-Headers",f.join(",")),s.res.headers.append("Vary","Access-Control-Request-Headers")),s.res.headers.delete("Content-Length"),s.res.headers.delete("Content-Type"),new Response(null,{headers:s.res.headers,status:204,statusText:"No Content"})}await a(),r.origin!=="*"&&s.header("Vary","Origin",{append:!0})}};function Lz(){let{process:t,Deno:e}=globalThis;return!(typeof e?.noColor=="boolean"?e.noColor:t!==void 0?"NO_COLOR"in t?.env:!1)}async function Y$(){let{navigator:t}=globalThis,e="cloudflare:workers";return!(t!==void 0&&t.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(e)).env??{})}catch{return!1}})():!Lz())}var zz=t=>{let[e,r]=[",","."];return t.map(n=>n.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e)).join(r)},jz=t=>{let e=Date.now()-t;return zz([e<1e3?e+"ms":Math.round(e/1e3)+"s"])},Bz=async t=>{if(await Y$())switch(t/100|0){case 5:return`\x1B[31m${t}\x1B[0m`;case 4:return`\x1B[33m${t}\x1B[0m`;case 3:return`\x1B[36m${t}\x1B[0m`;case 2:return`\x1B[32m${t}\x1B[0m`}return`${t}`};async function X$(t,e,r,i,n=0,o){let s=e==="<--"?`${e} ${r} ${i}`:`${e} ${r} ${i} ${await Bz(n)} ${o}`;t(s)}var eO=(t=console.log)=>async function(r,i){let{method:n,url:o}=r.req,s=o.slice(o.indexOf("/",8));await X$(t,"<--",n,s);let a=Date.now();await i(),await X$(t,"-->",n,s,r.res.status,jz(a))};var Mz={crossOriginEmbedderPolicy:["Cross-Origin-Embedder-Policy","require-corp"],crossOriginResourcePolicy:["Cross-Origin-Resource-Policy","same-origin"],crossOriginOpenerPolicy:["Cross-Origin-Opener-Policy","same-origin"],originAgentCluster:["Origin-Agent-Cluster","?1"],referrerPolicy:["Referrer-Policy","no-referrer"],strictTransportSecurity:["Strict-Transport-Security","max-age=15552000; includeSubDomains"],xContentTypeOptions:["X-Content-Type-Options","nosniff"],xDnsPrefetchControl:["X-DNS-Prefetch-Control","off"],xDownloadOptions:["X-Download-Options","noopen"],xFrameOptions:["X-Frame-Options","SAMEORIGIN"],xPermittedCrossDomainPolicies:["X-Permitted-Cross-Domain-Policies","none"],xXssProtection:["X-XSS-Protection","0"]},qz={crossOriginEmbedderPolicy:!1,crossOriginResourcePolicy:!0,crossOriginOpenerPolicy:!0,originAgentCluster:!0,referrerPolicy:!0,strictTransportSecurity:!0,xContentTypeOptions:!0,xDnsPrefetchControl:!0,xDownloadOptions:!0,xFrameOptions:!0,xPermittedCrossDomainPolicies:!0,xXssProtection:!0,removePoweredBy:!0,permissionsPolicy:{}};var Cb=t=>{let e={...qz,...t},r=Wz(e),i=[];if(e.contentSecurityPolicy){let[n,o]=tO(e.contentSecurityPolicy);n&&i.push(n),r.push(["Content-Security-Policy",o])}if(e.contentSecurityPolicyReportOnly){let[n,o]=tO(e.contentSecurityPolicyReportOnly);n&&i.push(n),r.push(["Content-Security-Policy-Report-Only",o])}return e.permissionsPolicy&&Object.keys(e.permissionsPolicy).length>0&&r.push(["Permissions-Policy",Fz(e.permissionsPolicy)]),e.reportingEndpoints&&r.push(["Reporting-Endpoints",Kz(e.reportingEndpoints)]),e.reportTo&&r.push(["Report-To",Hz(e.reportTo)]),async function(o,s){let a=i.length===0?r:i.reduce((c,u)=>u(o,c),r);await s(),Jz(o,a),e?.removePoweredBy&&o.res.headers.delete("X-Powered-By")}};function Wz(t){return Object.entries(Mz).filter(([e])=>t[e]).map(([e,r])=>{let i=t[e];return typeof i=="string"?[r[0],i]:r})}function tO(t){let e=[],r=[];for(let[i,n]of Object.entries(t)){let o=Array.isArray(n)?n:[n];o.forEach((s,a)=>{if(typeof s=="function"){let c=a*2+2+r.length;e.push((u,l)=>{l[c]=s(u,i)})}}),r.push(i.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(s,a)=>a?"-"+s.toLowerCase():s.toLowerCase()),...o.flatMap(s=>[" ",s]),"; ")}return r.pop(),e.length===0?[void 0,r.join("")]:[(i,n)=>n.map(o=>{if(o[0]==="Content-Security-Policy"||o[0]==="Content-Security-Policy-Report-Only"){let s=o[1].slice();return e.forEach(a=>{a(i,s)}),[o[0],s.join("")]}else return o}),r]}function Fz(t){return Object.entries(t).map(([e,r])=>{let i=Vz(e);if(typeof r=="boolean")return`${i}=${r?"*":"none"}`;if(Array.isArray(r)){if(r.length===0)return`${i}=()`;if(r.length===1&&(r[0]==="*"||r[0]==="none"))return`${i}=${r[0]}`;let n=r.map(o=>["self","src"].includes(o)?o:`"${o}"`);return`${i}=(${n.join(" ")})`}return""}).filter(Boolean).join(", ")}function Vz(t){return t.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function Kz(t=[]){return t.map(e=>`${e.name}="${e.url}"`).join(", ")}function Hz(t=[]){return t.map(e=>JSON.stringify(e)).join(", ")}function Jz(t,e){e.forEach(([r,i])=>{t.res.headers.set(r,i)})}var Qz=import("node:async_hooks").then(t=>t.AsyncLocalStorage).catch(t=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;if(typeof window<"u")return null;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),t});async function ip(){let t=await Qz;if(t===null)throw new Error("getAsyncLocalStorage is only available in server code");return t}var Pb=null,rO=async()=>(Pb||(Pb=new(await ip())),Pb);async function qi(){let t=(await rO()).getStore();if(!t)throw new Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return t}async function ys(t,e){return(await rO()).run(t,e)}var Rb=null,Lb=async()=>(Rb||(Rb=new(await ip())),Rb);async function zb(){return(await Lb()).getStore()!==void 0}async function Db(){let t=(await Lb()).getStore();if(!t)throw new Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return t}async function jb(t,e){return(await Lb()).run(t,e)}function Bb(t){let e=Object.freeze({});return{get ref(){return e},async get(){let r=await Db();if(!r.has(e)){let i=await t();return r.set(e,i),i}return r.get(e)},async set(r){(await Db()).set(e,r)}}}var Ub=null,Mb=async()=>(Ub||(Ub=new(await ip())),Ub);var ct=async t=>Mb().then(e=>e.getStore()||t).catch(()=>t),qb=async(t,e)=>{let r=!0;return Mb().then(i=>(r=!0,i.run(t,e))).catch(i=>{if(!r)return e();throw i})},Ju=async(t,e)=>{let r=!0;return Mb().then(i=>(r=!0,t.transaction(async n=>i.run(n,e)))).catch(i=>{if(!r)return e();throw i})};var{get:Zz,set:Wb}=Bb(()=>null);op();var La=Da("a-z","0-9","A-Z","-_");function Fb(t,e){typeof t=="string"&&(t=new TextEncoder().encode(t)),typeof e=="string"&&(e=new TextEncoder().encode(e));let r=new Uint8Array(t),i=new Uint8Array(e),n=r.length^i.length,o=Math.max(r.length,i.length);for(let s=0;s<o;s++)n|=(s<r.length?r[s]:0)^(s<i.length?i[s]:0);return n===0}function Gz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $r(t,e=""){if(!Number.isSafeInteger(t)||t<0){let r=e&&`"${e}" `;throw new Error(`${r}expected integer >= 0, got ${t}`)}}function Fi(t,e,r=""){let i=Gz(t),n=t?.length,o=e!==void 0;if(!i||o&&n!==e){let s=r&&`"${r}" `,a=o?` of length ${e}`:"",c=i?`length=${n}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+c)}return t}function ws(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");$r(t.outputLen),$r(t.blockLen)}function za(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function oO(t,e){Fi(t,void 0,"digestInto() output");let r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function sp(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function on(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function ja(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Wn(t,e){return t<<32-e|t>>>e}function We(t,e){return t<<e|t>>>32-e>>>0}var Yz=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Xz(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function e6(t){for(let e=0;e<t.length;e++)t[e]=Xz(t[e]);return t}var Vb=Yz?t=>t:e6,t6=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function";var Wi={_0:48,_9:57,A:65,F:70,a:97,f:102};function iO(t){if(t>=Wi._0&&t<=Wi._9)return t-Wi._0;if(t>=Wi.A&&t<=Wi.F)return t-(Wi.A-10);if(t>=Wi.a&&t<=Wi.f)return t-(Wi.a-10)}function sO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(t6)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let n=0,o=0;n<r;n++,o+=2){let s=iO(t.charCodeAt(o)),a=iO(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}i[n]=s*16+a}return i}var r6=async()=>{};async function ap(t,e,r){let i=Date.now();for(let n=0;n<t;n++){r(n);let o=Date.now()-i;o>=0&&o<e||(await r6(),i+=o)}}function n6(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Kb(t,e=""){return typeof t=="string"?n6(t):Fi(t,void 0,e)}function cp(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options must be object or undefined");return Object.assign(t,e)}function aO(t,e={}){let r=(n,o)=>t(o).update(n).digest(),i=t(void 0);return r.outputLen=i.outputLen,r.blockLen=i.blockLen,r.create=n=>t(n),Object.assign(r,e),Object.freeze(r)}var cO=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});var up=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,r){if(ws(e),Fi(r,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<n.length;o++)n[o]^=54;this.iHash.update(n),this.oHash=e.create();for(let o=0;o<n.length;o++)n[o]^=106;this.oHash.update(n),on(n)}update(e){return za(this),this.iHash.update(e),this}digestInto(e){za(this),Fi(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:r,iHash:i,finished:n,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ba=(t,e,r)=>new up(t,e).update(r).digest();Ba.create=(t,e)=>new up(t,e);function i6(t,e,r){return ws(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Ba(t,r,e)}var Hb=Uint8Array.of(0),uO=Uint8Array.of();function o6(t,e,r,i=32){ws(t),$r(i,"length");let n=t.outputLen;if(i>255*n)throw new Error("Length must be <= 255*HashLen");let o=Math.ceil(i/n);r===void 0?r=uO:Fi(r,void 0,"info");let s=new Uint8Array(o*n),a=Ba.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<o;l++)Hb[0]=l+1,c.update(l===0?uO:u).update(r).update(Hb).digestInto(u),s.set(u,n*l),a._cloneInto(c);return a.destroy(),c.destroy(),on(u,Hb),s.slice(0,i)}var Jb=(t,e,r,i,n)=>o6(t,i6(t,e,r),i,n);function lO(t,e,r){return t&e^~t&r}function dO(t,e,r){return t&e^t&r^e&r}var lp=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,i,n){this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.buffer=new Uint8Array(e),this.view=ja(this.buffer)}update(e){za(this),Fi(e);let{view:r,buffer:i,blockLen:n}=this,o=e.length;for(let s=0;s<o;){let a=Math.min(n-this.pos,o-s);if(a===n){let c=ja(e);for(;n<=o-s;s+=n)this.process(c,s);continue}i.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){za(this),oO(e,this),this.finished=!0;let{buffer:r,view:i,blockLen:n,isLE:o}=this,{pos:s}=this;r[s++]=128,on(this.buffer.subarray(s)),this.padOffset>n-s&&(this.process(i,0),s=0);for(let f=s;f<n;f++)r[f]=0;i.setBigUint64(n-8,BigInt(this.length*8),o),this.process(i,0);let a=ja(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||=new this.constructor,e.set(...this.get());let{blockLen:r,buffer:i,length:n,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=n,e.pos=a,n%r&&e.buffer.set(i),e}clone(){return this._cloneInto()}},Vi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var s6=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xo=new Uint32Array(64),Qb=class extends lp{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:r,C:i,D:n,E:o,F:s,G:a,H:c}=this;return[e,r,i,n,o,s,a,c]}set(e,r,i,n,o,s,a,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)xo[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let d=xo[f-15],m=xo[f-2],h=Wn(d,7)^Wn(d,18)^d>>>3,p=Wn(m,17)^Wn(m,19)^m>>>10;xo[f]=p+xo[f-7]+h+xo[f-16]|0}let{A:i,B:n,C:o,D:s,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){let d=Wn(a,6)^Wn(a,11)^Wn(a,25),m=l+d+lO(a,c,u)+s6[f]+xo[f]|0,p=(Wn(i,2)^Wn(i,13)^Wn(i,22))+dO(i,n,o)|0;l=u,u=c,c=a,a=s+m|0,s=o,o=n,n=i,i=m+p|0}i=i+this.A|0,n=n+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(i,n,o,s,a,c,u,l)}roundClean(){on(xo)}destroy(){this.set(0,0,0,0,0,0,0,0),on(this.buffer)}},Zb=class extends Qb{A=Vi[0]|0;B=Vi[1]|0;C=Vi[2]|0;D=Vi[3]|0;E=Vi[4]|0;F=Vi[5]|0;G=Vi[6]|0;H=Vi[7]|0;constructor(){super(32)}};var Ma=aO(()=>new Zb,cO(1));var Qu={};ar(Qu,{decode:()=>ht,encode:()=>Nt});var bs=new TextEncoder,cr=new TextDecoder,dp=2**32;function Yt(...t){let e=t.reduce((n,{length:o})=>n+o,0),r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}function Gb(t,e,r){if(e<0||e>=dp)throw new RangeError(`value must be >= 0 and <= ${dp-1}. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,e&255],r)}function fp(t){let e=Math.floor(t/dp),r=t%dp,i=new Uint8Array(8);return Gb(i,e,0),Gb(i,r,4),i}function pp(t){let e=new Uint8Array(4);return Gb(e,t),e}function Ct(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>127)throw new TypeError("non-ASCII string encountered in encode()");e[r]=i}return e}function fO(t){if(Uint8Array.prototype.toBase64)return t.toBase64();let e=32768,r=[];for(let i=0;i<t.length;i+=e)r.push(String.fromCharCode.apply(null,t.subarray(i,i+e)));return btoa(r.join(""))}function pO(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);let e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}function ht(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:cr.decode(t),{alphabet:"base64url"});let e=t;e instanceof Uint8Array&&(e=cr.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/");try{return pO(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Nt(t){let e=t;return typeof e=="string"&&(e=bs.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):fO(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var Ft=class extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,r){super(e,r),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},ur=class extends Ft{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,r,i="unspecified",n="unspecified"){super(e,{cause:{claim:i,reason:n,payload:r}}),this.claim=i,this.reason=n,this.payload=r}},vs=class extends Ft{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,r,i="unspecified",n="unspecified"){super(e,{cause:{claim:i,reason:n,payload:r}}),this.claim=i,this.reason=n,this.payload=r}},xs=class extends Ft{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"},Oe=class extends Ft{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"},qa=class extends Ft{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",r){super(e,r)}},pe=class extends Ft{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"},ut=class extends Ft{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"},yr=class extends Ft{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"},mp=class extends Ft{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"},Zu=class extends Ft{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"},Wa=class extends Ft{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",r){super(e,r)}},hp=class extends Ft{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",r){super(e,r)}},gp=class extends Ft{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",r){super(e,r)}},yp=class extends Ft{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",r){super(e,r)}};function Yb(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Oe(`Unsupported JWE Algorithm: ${t}`)}}var mO=t=>crypto.getRandomValues(new Uint8Array(Yb(t)>>3));function wp(t,e){if(e.length<<3!==Yb(t))throw new pe("Invalid Initialization Vector length")}function Fa(t,e){let r=t.byteLength<<3;if(r!==e)throw new pe(`Invalid Content Encryption Key length. Expected ${e} bits, got ${r} bits`)}var Xt=(t,e="algorithm.name")=>new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`),wi=(t,e)=>t.name===e;function bp(t){return parseInt(t.name.slice(4),10)}function a6(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function hO(t,e){if(e&&!t.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function gO(t,e,r){switch(e){case"HS256":case"HS384":case"HS512":{if(!wi(t.algorithm,"HMAC"))throw Xt("HMAC");let i=parseInt(e.slice(2),10);if(bp(t.algorithm.hash)!==i)throw Xt(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!wi(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Xt("RSASSA-PKCS1-v1_5");let i=parseInt(e.slice(2),10);if(bp(t.algorithm.hash)!==i)throw Xt(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!wi(t.algorithm,"RSA-PSS"))throw Xt("RSA-PSS");let i=parseInt(e.slice(2),10);if(bp(t.algorithm.hash)!==i)throw Xt(`SHA-${i}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!wi(t.algorithm,"Ed25519"))throw Xt("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!wi(t.algorithm,e))throw Xt(e);break}case"ES256":case"ES384":case"ES512":{if(!wi(t.algorithm,"ECDSA"))throw Xt("ECDSA");let i=a6(e);if(t.algorithm.namedCurve!==i)throw Xt(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}hO(t,r)}function Br(t,e,r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!wi(t.algorithm,"AES-GCM"))throw Xt("AES-GCM");let i=parseInt(e.slice(1,4),10);if(t.algorithm.length!==i)throw Xt(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!wi(t.algorithm,"AES-KW"))throw Xt("AES-KW");let i=parseInt(e.slice(1,4),10);if(t.algorithm.length!==i)throw Xt(i,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":break;default:throw Xt("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!wi(t.algorithm,"PBKDF2"))throw Xt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!wi(t.algorithm,"RSA-OAEP"))throw Xt("RSA-OAEP");let i=parseInt(e.slice(9),10)||1;if(bp(t.algorithm.hash)!==i)throw Xt(`SHA-${i}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}hO(t,r)}function yO(t,e,...r){if(r=r.filter(Boolean),r.length>2){let i=r.pop();t+=`one of type ${r.join(", ")}, or ${i}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor?.name&&(t+=` Received an instance of ${e.constructor.name}`),t}var bn=(t,...e)=>yO("Key must be ",t,...e),Xb=(t,e,...r)=>yO(`Key for the ${t} algorithm must be `,e,...r);function Ss(t){if(!bi(t))throw new Error("CryptoKey instance expected")}var bi=t=>{if(t?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return t instanceof CryptoKey}catch{return!1}},Gu=t=>t?.[Symbol.toStringTag]==="KeyObject",Yu=t=>bi(t)||Gu(t);async function c6(t,e){if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},i=await crypto.subtle.generateKey(r,!1,["sign"]),n=new Uint8Array(await crypto.subtle.sign(r,i,t)),o=new Uint8Array(await crypto.subtle.sign(r,i,e)),s=0,a=-1;for(;++a<32;)s|=n[a]^o[a];return s===0}async function u6(t,e,r,i,n,o){if(!(e instanceof Uint8Array))throw new TypeError(bn(e,"Uint8Array"));let s=parseInt(t.slice(1,4),10),a=await crypto.subtle.importKey("raw",e.subarray(s>>3),"AES-CBC",!1,["decrypt"]),c=await crypto.subtle.importKey("raw",e.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),u=Yt(o,i,r,fp(o.length<<3)),l=new Uint8Array((await crypto.subtle.sign("HMAC",c,u)).slice(0,s>>3)),f;try{f=await c6(n,l)}catch{}if(!f)throw new qa;let d;try{d=new Uint8Array(await crypto.subtle.decrypt({iv:i,name:"AES-CBC"},a,r))}catch{}if(!d)throw new qa;return d}async function l6(t,e,r,i,n,o){let s;e instanceof Uint8Array?s=await crypto.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(Br(e,t,"decrypt"),s=e);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:o,iv:i,name:"AES-GCM",tagLength:128},s,Yt(r,n)))}catch{throw new qa}}async function vp(t,e,r,i,n,o){if(!bi(e)&&!(e instanceof Uint8Array))throw new TypeError(bn(e,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!i)throw new pe("JWE Initialization Vector missing");if(!n)throw new pe("JWE Authentication Tag missing");switch(wp(t,i),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&Fa(e,parseInt(t.slice(-3),10)),u6(t,e,r,i,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&Fa(e,parseInt(t.slice(1,4),10)),l6(t,e,r,i,n,o);default:throw new Oe("Unsupported JWE Content Encryption Algorithm")}}function So(...t){let e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(let i of e){let n=Object.keys(i);if(!r||r.size===0){r=new Set(n);continue}for(let o of n){if(r.has(o))return!1;r.add(o)}}return!0}var d6=t=>typeof t=="object"&&t!==null;function yt(t){if(!d6(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function wO(t,e){if(t.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function bO(t,e,r){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"AES-KW",!0,[r]):(Br(t,e,r),t)}async function Xu(t,e,r){let i=await bO(e,t,"wrapKey");wO(i,t);let n=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",n,i,"AES-KW"))}async function el(t,e,r){let i=await bO(e,t,"unwrapKey");wO(i,t);let n=await crypto.subtle.unwrapKey("raw",r,i,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",n))}async function xp(t,e){let r=`SHA-${t.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,e))}function tv(t){return Yt(pp(t.length),t)}async function f6(t,e,r){let i=e>>3,n=32,o=Math.ceil(i/n),s=new Uint8Array(o*n);for(let a=1;a<=o;a++){let c=new Uint8Array(4+t.length+r.length);c.set(pp(a),0),c.set(t,4),c.set(r,4+t.length);let u=await xp("sha256",c);s.set(u,(a-1)*n)}return s.slice(0,i)}async function Sp(t,e,r,i,n=new Uint8Array,o=new Uint8Array){Br(t,"ECDH"),Br(e,"ECDH","deriveBits");let s=tv(Ct(r)),a=tv(n),c=tv(o),u=pp(i),l=new Uint8Array,f=Yt(s,a,c,u,l),d=new Uint8Array(await crypto.subtle.deriveBits({name:t.algorithm.name,public:t},e,p6(t)));return f6(d,i,f)}function p6(t){return t.algorithm.name==="X25519"?256:Math.ceil(parseInt(t.algorithm.namedCurve.slice(-3),10)/8)<<3}function Np(t){switch(t.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return t.algorithm.name==="X25519"}}function m6(t,e){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]):(Br(t,e,"deriveBits"),t)}var h6=(t,e)=>Yt(Ct(t),Uint8Array.of(0),e);async function xO(t,e,r,i){if(!(t instanceof Uint8Array)||t.length<8)throw new pe("PBES2 Salt Input must be 8 or more octets");let n=h6(e,t),o=parseInt(e.slice(13,16),10),s={hash:`SHA-${e.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:n},a=await m6(i,e);return new Uint8Array(await crypto.subtle.deriveBits(s,a,o))}async function SO(t,e,r,i=2048,n=crypto.getRandomValues(new Uint8Array(16))){let o=await xO(n,t,i,e);return{encryptedKey:await Xu(t.slice(-6),o,r),p2c:i,p2s:Nt(n)}}async function NO(t,e,r,i,n){let o=await xO(n,t,i,e);return el(t.slice(-6),o,r)}function Ns(t,e){if(t.startsWith("RS")||t.startsWith("PS")){let{modulusLength:r}=e.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}}var _O=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Oe(`alg ${t} is not supported either by JOSE or your javascript runtime`)}};async function EO(t,e,r){return Br(e,t,"encrypt"),Ns(t,e),new Uint8Array(await crypto.subtle.encrypt(_O(t),e,r))}async function kO(t,e,r){return Br(e,t,"decrypt"),Ns(t,e),new Uint8Array(await crypto.subtle.decrypt(_O(t),e,r))}function tl(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Oe(`Unsupported JWE Algorithm: ${t}`)}}var No=t=>crypto.getRandomValues(new Uint8Array(tl(t)>>3));function g6(t){let e,r;switch(t.kty){case"AKP":{switch(t.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":e={name:t.alg},r=t.priv?["sign"]:["verify"];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new Oe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Oe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}async function Va(t){if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:e,keyUsages:r}=g6(t),i={...t};return i.kty!=="AKP"&&delete i.alg,delete i.use,crypto.subtle.importKey("jwk",i,e,t.ext??!(t.d||t.priv),t.key_ops??r)}async function Ki(t,e,r){if(!yt(t))throw new TypeError("JWK must be an object");let i;switch(e??=t.alg,i??=r?.extractable??t.ext,t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return ht(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new Oe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return Va({...t,alg:e,ext:i});case"AKP":{if(typeof t.alg!="string"||!t.alg)throw new TypeError('missing "alg" (Algorithm) Parameter value');if(e!==void 0&&e!==t.alg)throw new TypeError("JWK alg and alg option value mismatch");return Va({...t,ext:i})}case"EC":case"OKP":return Va({...t,alg:e,ext:i});default:throw new Oe('Unsupported "kty" (Key Type) Parameter value')}}async function y6(t,e,r,i,n){if(!(r instanceof Uint8Array))throw new TypeError(bn(r,"Uint8Array"));let o=parseInt(t.slice(1,4),10),s=await crypto.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["encrypt"]),a=await crypto.subtle.importKey("raw",r.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:i,name:"AES-CBC"},s,e)),u=Yt(n,i,c,fp(n.length<<3)),l=new Uint8Array((await crypto.subtle.sign("HMAC",a,u)).slice(0,o>>3));return{ciphertext:c,tag:l,iv:i}}async function w6(t,e,r,i,n){let o;r instanceof Uint8Array?o=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Br(r,t,"encrypt"),o=r);let s=new Uint8Array(await crypto.subtle.encrypt({additionalData:n,iv:i,name:"AES-GCM",tagLength:128},o,e)),a=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:a,iv:i}}async function Ap(t,e,r,i,n){if(!bi(r)&&!(r instanceof Uint8Array))throw new TypeError(bn(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(i?wp(t,i):i=mO(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Fa(r,parseInt(t.slice(-3),10)),y6(t,e,r,i,n);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Fa(r,parseInt(t.slice(1,4),10)),w6(t,e,r,i,n);default:throw new Oe("Unsupported JWE Content Encryption Algorithm")}}async function IO(t,e,r,i){let n=t.slice(0,7),o=await Ap(n,r,e,i,new Uint8Array);return{encryptedKey:o.ciphertext,iv:Nt(o.iv),tag:Nt(o.tag)}}async function $O(t,e,r,i,n){let o=t.slice(0,7);return vp(o,e,r,i,n,new Uint8Array)}async function OO(t,e,r,i,n){switch(t){case"dir":{if(r!==void 0)throw new pe("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(r!==void 0)throw new pe("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!yt(i.epk))throw new pe('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(Ss(e),!Np(e))throw new Oe("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await Ki(i.epk,t);Ss(o);let s,a;if(i.apu!==void 0){if(typeof i.apu!="string")throw new pe('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{s=ht(i.apu)}catch{throw new pe("Failed to base64url decode the apu")}}if(i.apv!==void 0){if(typeof i.apv!="string")throw new pe('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=ht(i.apv)}catch{throw new pe("Failed to base64url decode the apv")}}let c=await Sp(o,e,t==="ECDH-ES"?i.enc:t,t==="ECDH-ES"?tl(i.enc):parseInt(t.slice(-5,-2),10),s,a);if(t==="ECDH-ES")return c;if(r===void 0)throw new pe("JWE Encrypted Key missing");return el(t.slice(-6),c,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new pe("JWE Encrypted Key missing");return Ss(e),kO(t,e,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new pe("JWE Encrypted Key missing");if(typeof i.p2c!="number")throw new pe('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=n?.maxPBES2Count||1e4;if(i.p2c>o)throw new pe('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof i.p2s!="string")throw new pe('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let s;try{s=ht(i.p2s)}catch{throw new pe("Failed to base64url decode the p2s")}return NO(t,e,r,i.p2c,s)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new pe("JWE Encrypted Key missing");return el(t,e,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new pe("JWE Encrypted Key missing");if(typeof i.iv!="string")throw new pe('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof i.tag!="string")throw new pe('JOSE Header "tag" (Authentication Tag) missing or invalid');let o;try{o=ht(i.iv)}catch{throw new pe("Failed to base64url decode the iv")}let s;try{s=ht(i.tag)}catch{throw new pe("Failed to base64url decode the tag")}return $O(t,e,r,o,s)}default:throw new Oe('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Ao(t,e,r,i,n){if(n.crit!==void 0&&i?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(s=>typeof s!="string"||s.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;r!==void 0?o=new Map([...Object.entries(r),...e.entries()]):o=e;for(let s of i.crit){if(!o.has(s))throw new Oe(`Extension Header Parameter "${s}" is not recognized`);if(n[s]===void 0)throw new t(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&i[s]===void 0)throw new t(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)}function rl(t,e){if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)}var As=t=>yt(t)&&typeof t.kty=="string",CO=t=>t.kty!=="oct"&&(t.kty==="AKP"&&typeof t.priv=="string"||typeof t.d=="string"),PO=t=>t.kty!=="oct"&&t.d===void 0&&t.priv===void 0,RO=t=>t.kty==="oct"&&typeof t.k=="string";var Ka,UO=async(t,e,r,i=!1)=>{Ka||=new WeakMap;let n=Ka.get(t);if(n?.[r])return n[r];let o=await Va({...e,alg:r});return i&&Object.freeze(t),n?n[r]=o:Ka.set(t,{[r]:o}),o},v6=(t,e)=>{Ka||=new WeakMap;let r=Ka.get(t);if(r?.[e])return r[e];let i=t.type==="public",n=!!i,o;if(t.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}o=t.toCryptoKey(t.asymmetricKeyType,n,i?[]:["deriveBits"])}if(t.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");o=t.toCryptoKey(t.asymmetricKeyType,n,[i?"verify":"sign"])}switch(t.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(e!==t.asymmetricKeyType.toUpperCase())throw new TypeError("given KeyObject instance cannot be used for this algorithm");o=t.toCryptoKey(t.asymmetricKeyType,n,[i?"verify":"sign"])}}if(t.asymmetricKeyType==="rsa"){let s;switch(e){case"RSA-OAEP":s="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":s="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":s="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":s="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:s},n,i?["encrypt"]:["decrypt"]);o=t.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:s},n,[i?"verify":"sign"])}if(t.asymmetricKeyType==="ec"){let a=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(t.asymmetricKeyDetails?.namedCurve);if(!a)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&a==="P-256"&&(o=t.toCryptoKey({name:"ECDSA",namedCurve:a},n,[i?"verify":"sign"])),e==="ES384"&&a==="P-384"&&(o=t.toCryptoKey({name:"ECDSA",namedCurve:a},n,[i?"verify":"sign"])),e==="ES512"&&a==="P-521"&&(o=t.toCryptoKey({name:"ECDSA",namedCurve:a},n,[i?"verify":"sign"])),e.startsWith("ECDH-ES")&&(o=t.toCryptoKey({name:"ECDH",namedCurve:a},n,i?[]:["deriveBits"]))}if(!o)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[e]=o:Ka.set(t,{[e]:o}),o};async function vi(t,e){if(t instanceof Uint8Array||bi(t))return t;if(Gu(t)){if(t.type==="secret")return t.export();if("toCryptoKey"in t&&typeof t.toCryptoKey=="function")try{return v6(t,e)}catch(i){if(i instanceof TypeError)throw i}let r=t.export({format:"jwk"});return UO(t,r,e)}if(As(t))return t.k?ht(t.k):UO(t,t,e,!0);throw new Error("unreachable")}var Ha=t=>t?.[Symbol.toStringTag],rv=(t,e,r)=>{if(e.use!==void 0){let i;switch(r){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(e.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(e.alg!==void 0&&e.alg!==t)throw new TypeError(`Invalid key for this operation, its "alg" must be "${t}" when present`);if(Array.isArray(e.key_ops)){let i;switch(!0){case(r==="sign"||r==="verify"):case t==="dir":case t.includes("CBC-HS"):i=r;break;case t.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):!t.includes("GCM")&&t.endsWith("KW")?i=r==="encrypt"?"wrapKey":"unwrapKey":i=r;break;case(r==="encrypt"&&t.startsWith("RSA")):i="wrapKey";break;case r==="decrypt":i=t.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&e.key_ops?.includes?.(i)===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},x6=(t,e,r)=>{if(!(e instanceof Uint8Array)){if(As(e)){if(RO(e)&&rv(t,e,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Yu(e))throw new TypeError(Xb(t,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Ha(e)} instances for symmetric algorithms must be of type "secret"`)}},S6=(t,e,r)=>{if(As(e))switch(r){case"decrypt":case"sign":if(CO(e)&&rv(t,e,r))return;throw new TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(PO(e)&&rv(t,e,r))return;throw new TypeError("JSON Web Key for this operation must be a public JWK")}if(!Yu(e))throw new TypeError(Xb(t,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Ha(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(r){case"sign":throw new TypeError(`${Ha(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Ha(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(r){case"verify":throw new TypeError(`${Ha(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Ha(e)} instances for asymmetric algorithm encryption must be of type "public"`)}};function _o(t,e,r){switch(t.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":x6(t,e,r);break;default:S6(t,e,r)}}async function DO(t,e,r){if(!yt(t))throw new pe("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new pe("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new pe("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new pe("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new pe("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new pe("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new pe("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new pe("JWE AAD incorrect type");if(t.header!==void 0&&!yt(t.header))throw new pe("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!yt(t.unprotected))throw new pe("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected)try{let I=ht(t.protected);i=JSON.parse(cr.decode(I))}catch{throw new pe("JWE Protected Header is invalid")}if(!So(i,t.header,t.unprotected))throw new pe("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let n={...i,...t.header,...t.unprotected};if(Ao(pe,new Map,r?.crit,i,n),n.zip!==void 0)throw new Oe('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:o,enc:s}=n;if(typeof o!="string"||!o)throw new pe("missing JWE Algorithm (alg) in JWE Header");if(typeof s!="string"||!s)throw new pe("missing JWE Encryption Algorithm (enc) in JWE Header");let a=r&&rl("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&rl("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(a&&!a.has(o)||!a&&o.startsWith("PBES2"))throw new xs('"alg" (Algorithm) Header Parameter value not allowed');if(c&&!c.has(s))throw new xs('"enc" (Encryption Algorithm) Header Parameter value not allowed');let u;if(t.encrypted_key!==void 0)try{u=ht(t.encrypted_key)}catch{throw new pe("Failed to base64url decode the encrypted_key")}let l=!1;typeof e=="function"&&(e=await e(i,t),l=!0),_o(o==="dir"?s:o,e,"decrypt");let f=await vi(e,o),d;try{d=await OO(o,f,u,n,r)}catch(I){if(I instanceof TypeError||I instanceof pe||I instanceof Oe)throw I;d=No(s)}let m,h;if(t.iv!==void 0)try{m=ht(t.iv)}catch{throw new pe("Failed to base64url decode the iv")}if(t.tag!==void 0)try{h=ht(t.tag)}catch{throw new pe("Failed to base64url decode the tag")}let p=t.protected!==void 0?Ct(t.protected):new Uint8Array,y;t.aad!==void 0?y=Yt(p,Ct("."),Ct(t.aad)):y=p;let b;try{b=ht(t.ciphertext)}catch{throw new pe("Failed to base64url decode the ciphertext")}let T={plaintext:await vp(s,d,b,m,h,y)};if(t.protected!==void 0&&(T.protectedHeader=i),t.aad!==void 0)try{T.additionalAuthenticatedData=ht(t.aad)}catch{throw new pe("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(T.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(T.unprotectedHeader=t.header),l?{...T,key:f}:T}async function LO(t,e,r){if(t instanceof Uint8Array&&(t=cr.decode(t)),typeof t!="string")throw new pe("Compact JWE must be a string or Uint8Array");let{0:i,1:n,2:o,3:s,4:a,length:c}=t.split(".");if(c!==5)throw new pe("Invalid Compact JWE");let u=await DO({ciphertext:s,iv:o||void 0,protected:i,tag:a||void 0,encrypted_key:n||void 0},e,r),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return typeof e=="function"?{...l,key:u.key}:l}var zO=Symbol();async function jO(t){if(Gu(t))if(t.type==="secret")t=t.export();else return t.export({format:"jwk"});if(t instanceof Uint8Array)return{kty:"oct",k:Nt(t)};if(!bi(t))throw new TypeError(bn(t,"CryptoKey","KeyObject","Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:e,key_ops:r,alg:i,use:n,...o}=await crypto.subtle.exportKey("jwk",t);return o.kty==="AKP"&&(o.alg=i),o}async function _p(t){return jO(t)}async function BO(t,e,r,i,n={}){let o,s,a;switch(t){case"dir":{a=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(Ss(r),!Np(r))throw new Oe("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=n,l;n.epk?l=await vi(n.epk,t):l=(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:f,y:d,crv:m,kty:h}=await _p(l),p=await Sp(r,l,t==="ECDH-ES"?e:t,t==="ECDH-ES"?tl(e):parseInt(t.slice(-5,-2),10),c,u);if(s={epk:{x:f,crv:m,kty:h}},h==="EC"&&(s.epk.y=d),c&&(s.apu=Nt(c)),u&&(s.apv=Nt(u)),t==="ECDH-ES"){a=p;break}a=i||No(e);let y=t.slice(-6);o=await Xu(y,p,a);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=i||No(e),Ss(r),o=await EO(t,r,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=i||No(e);let{p2c:c,p2s:u}=n;({encryptedKey:o,...s}=await SO(t,r,a,c,u));break}case"A128KW":case"A192KW":case"A256KW":{a=i||No(e),o=await Xu(t,r,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=i||No(e);let{iv:c}=n;({encryptedKey:o,...s}=await IO(t,r,a,c));break}default:throw new Oe('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:o,parameters:s}}var Ep=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#s)throw new TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setProtectedHeader(e){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw new TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#o)throw new TypeError("setContentEncryptionKey can only be called once");return this.#o=e,this}setInitializationVector(e){if(this.#a)throw new TypeError("setInitializationVector can only be called once");return this.#a=e,this}async encrypt(e,r){if(!this.#t&&!this.#n&&!this.#r)throw new pe("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!So(this.#t,this.#n,this.#r))throw new pe("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#t,...this.#n,...this.#r};if(Ao(pe,new Map,r?.crit,this.#t,i),i.zip!==void 0)throw new Oe('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:n,enc:o}=i;if(typeof n!="string"||!n)throw new pe('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof o!="string"||!o)throw new pe('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let s;if(this.#o&&(n==="dir"||n==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${n}`);_o(n==="dir"?o:n,e,"encrypt");let a;{let y,b=await vi(e,n);({cek:a,encryptedKey:s,parameters:y}=await BO(n,o,b,this.#o,this.#s)),y&&(r&&zO in r?this.#n?this.#n={...this.#n,...y}:this.setUnprotectedHeader(y):this.#t?this.#t={...this.#t,...y}:this.setProtectedHeader(y))}let c,u,l,f;if(this.#t?(u=Nt(JSON.stringify(this.#t)),l=Ct(u)):(u="",l=new Uint8Array),this.#i){f=Nt(this.#i);let y=Ct(f);c=Yt(l,Ct("."),y)}else c=l;let{ciphertext:d,tag:m,iv:h}=await Ap(o,this.#e,a,this.#a,c),p={ciphertext:Nt(d)};return h&&(p.iv=Nt(h)),m&&(p.tag=Nt(m)),s&&(p.encrypted_key=Nt(s)),f&&(p.aad=f),this.#t&&(p.protected=u),this.#r&&(p.unprotected=this.#r),this.#n&&(p.header=this.#n),p}};function kp(t,e){let r=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(t.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:t};default:throw new Oe(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}async function Tp(t,e,r){if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(bn(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[r])}return gO(e,t,r),e}async function MO(t,e,r,i){let n=await Tp(t,e,"verify");Ns(t,n);let o=kp(t,n.algorithm);try{return await crypto.subtle.verify(o,n,r,i)}catch{return!1}}async function qO(t,e,r){if(!yt(t))throw new ut("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new ut('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new ut("JWS Protected Header incorrect type");if(t.payload===void 0)throw new ut("JWS Payload missing");if(typeof t.signature!="string")throw new ut("JWS Signature missing or incorrect type");if(t.header!==void 0&&!yt(t.header))throw new ut("JWS Unprotected Header incorrect type");let i={};if(t.protected)try{let y=ht(t.protected);i=JSON.parse(cr.decode(y))}catch{throw new ut("JWS Protected Header is invalid")}if(!So(i,t.header))throw new ut("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...i,...t.header},o=Ao(ut,new Map([["b64",!0]]),r?.crit,i,n),s=!0;if(o.has("b64")&&(s=i.b64,typeof s!="boolean"))throw new ut('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=n;if(typeof a!="string"||!a)throw new ut('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=r&&rl("algorithms",r.algorithms);if(c&&!c.has(a))throw new xs('"alg" (Algorithm) Header Parameter value not allowed');if(s){if(typeof t.payload!="string")throw new ut("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new ut("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof e=="function"&&(e=await e(i,t),u=!0),_o(a,e,"verify");let l=Yt(t.protected!==void 0?Ct(t.protected):new Uint8Array,Ct("."),typeof t.payload=="string"?s?Ct(t.payload):bs.encode(t.payload):t.payload),f;try{f=ht(t.signature)}catch{throw new ut("Failed to base64url decode the signature")}let d=await vi(e,a);if(!await MO(a,d,f,l))throw new yp;let h;if(s)try{h=ht(t.payload)}catch{throw new ut("Failed to base64url decode the payload")}else typeof t.payload=="string"?h=bs.encode(t.payload):h=t.payload;let p={payload:h};return t.protected!==void 0&&(p.protectedHeader=i),t.header!==void 0&&(p.unprotectedHeader=t.header),u?{...p,key:d}:p}async function WO(t,e,r){if(t instanceof Uint8Array&&(t=cr.decode(t)),typeof t!="string")throw new ut("Compact JWS must be a string or Uint8Array");let{0:i,1:n,2:o,length:s}=t.split(".");if(s!==3)throw new ut("Invalid Compact JWS");let a=await qO({payload:n,protected:i,signature:o},e,r),c={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...c,key:a.key}:c}var Eo=t=>Math.floor(t.getTime()/1e3),VO=60,KO=VO*60,nv=KO*24,N6=nv*7,A6=nv*365.25,_6=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function nl(t){let e=_6.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");let r=parseFloat(e[2]),i=e[3].toLowerCase(),n;switch(i){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(r*VO);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(r*KO);break;case"day":case"days":case"d":n=Math.round(r*nv);break;case"week":case"weeks":case"w":n=Math.round(r*N6);break;default:n=Math.round(r*A6);break}return e[1]==="-"||e[4]==="ago"?-n:n}function _s(t,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${t} input`);return e}var FO=t=>t.includes("/")?t.toLowerCase():`application/${t.toLowerCase()}`,E6=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1;function Ip(t,e,r={}){let i;try{i=JSON.parse(cr.decode(e))}catch{}if(!yt(i))throw new yr("JWT Claims Set must be a top-level JSON object");let{typ:n}=r;if(n&&(typeof t.typ!="string"||FO(t.typ)!==FO(n)))throw new ur('unexpected "typ" JWT header value',i,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:a,audience:c,maxTokenAge:u}=r,l=[...o];u!==void 0&&l.push("iat"),c!==void 0&&l.push("aud"),a!==void 0&&l.push("sub"),s!==void 0&&l.push("iss");for(let h of new Set(l.reverse()))if(!(h in i))throw new ur(`missing required "${h}" claim`,i,h,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(i.iss))throw new ur('unexpected "iss" claim value',i,"iss","check_failed");if(a&&i.sub!==a)throw new ur('unexpected "sub" claim value',i,"sub","check_failed");if(c&&!E6(i.aud,typeof c=="string"?[c]:c))throw new ur('unexpected "aud" claim value',i,"aud","check_failed");let f;switch(typeof r.clockTolerance){case"string":f=nl(r.clockTolerance);break;case"number":f=r.clockTolerance;break;case"undefined":f=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:d}=r,m=Eo(d||new Date);if((i.iat!==void 0||u)&&typeof i.iat!="number")throw new ur('"iat" claim must be a number',i,"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new ur('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>m+f)throw new ur('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new ur('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=m-f)throw new vs('"exp" claim timestamp check failed',i,"exp","check_failed")}if(u){let h=m-i.iat,p=typeof u=="number"?u:nl(u);if(h-f>p)throw new vs('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(h<0-f)throw new ur('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i}var Ja=class{#e;constructor(e){if(!yt(e))throw new TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(e)}data(){return bs.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(e){this.#e.iss=e}get sub(){return this.#e.sub}set sub(e){this.#e.sub=e}get aud(){return this.#e.aud}set aud(e){this.#e.aud=e}set jti(e){this.#e.jti=e}set nbf(e){typeof e=="number"?this.#e.nbf=_s("setNotBefore",e):e instanceof Date?this.#e.nbf=_s("setNotBefore",Eo(e)):this.#e.nbf=Eo(new Date)+nl(e)}set exp(e){typeof e=="number"?this.#e.exp=_s("setExpirationTime",e):e instanceof Date?this.#e.exp=_s("setExpirationTime",Eo(e)):this.#e.exp=Eo(new Date)+nl(e)}set iat(e){e===void 0?this.#e.iat=Eo(new Date):e instanceof Date?this.#e.iat=_s("setIssuedAt",Eo(e)):typeof e=="string"?this.#e.iat=_s("setIssuedAt",Eo(new Date)+nl(e)):this.#e.iat=_s("setIssuedAt",e)}};async function xi(t,e,r){let i=await WO(t,e,r);if(i.protectedHeader.crit?.includes("b64")&&i.protectedHeader.b64===!1)throw new yr("JWTs MUST NOT use unencoded payload");let o={payload:Ip(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return typeof e=="function"?{...o,key:i.key}:o}async function iv(t,e,r){let i=await LO(t,e,r),n=Ip(i.protectedHeader,i.plaintext,r),{protectedHeader:o}=i;if(o.iss!==void 0&&o.iss!==n.iss)throw new ur('replicated "iss" claim header parameter mismatch',n,"iss","mismatch");if(o.sub!==void 0&&o.sub!==n.sub)throw new ur('replicated "sub" claim header parameter mismatch',n,"sub","mismatch");if(o.aud!==void 0&&JSON.stringify(o.aud)!==JSON.stringify(n.aud))throw new ur('replicated "aud" claim header parameter mismatch',n,"aud","mismatch");let s={payload:n,protectedHeader:o};return typeof e=="function"?{...s,key:i.key}:s}var $p=class{#e;constructor(e){this.#e=new Ep(e)}setContentEncryptionKey(e){return this.#e.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#e.setInitializationVector(e),this}setProtectedHeader(e){return this.#e.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#e.setKeyManagementParameters(e),this}async encrypt(e,r){let i=await this.#e.encrypt(e,r);return[i.protected,i.encrypted_key,i.iv,i.ciphertext,i.tag].join(".")}};async function HO(t,e,r){let i=await Tp(t,e,"sign");Ns(t,i);let n=await crypto.subtle.sign(kp(t,i.algorithm),i,r);return new Uint8Array(n)}var Op=class{#e;#t;#r;constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this.#e=e}setProtectedHeader(e){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setUnprotectedHeader(e){if(this.#r)throw new TypeError("setUnprotectedHeader can only be called once");return this.#r=e,this}async sign(e,r){if(!this.#t&&!this.#r)throw new ut("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!So(this.#t,this.#r))throw new ut("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...this.#t,...this.#r},n=Ao(ut,new Map([["b64",!0]]),r?.crit,this.#t,i),o=!0;if(n.has("b64")&&(o=this.#t.b64,typeof o!="boolean"))throw new ut('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=i;if(typeof s!="string"||!s)throw new ut('JWS "alg" (Algorithm) Header Parameter missing or invalid');_o(s,e,"sign");let a,c;o?(a=Nt(this.#e),c=Ct(a)):(c=this.#e,a="");let u,l;this.#t?(u=Nt(JSON.stringify(this.#t)),l=Ct(u)):(u="",l=new Uint8Array);let f=Yt(l,Ct("."),c),d=await vi(e,s),m=await HO(s,d,f),h={signature:Nt(m),payload:a};return this.#r&&(h.header=this.#r),this.#t&&(h.protected=u),h}};var Cp=class{#e;constructor(e){this.#e=new Op(e)}setProtectedHeader(e){return this.#e.setProtectedHeader(e),this}async sign(e,r){let i=await this.#e.sign(e,r);if(i.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`}};var il=class{#e;#t;constructor(e={}){this.#t=new Ja(e)}setIssuer(e){return this.#t.iss=e,this}setSubject(e){return this.#t.sub=e,this}setAudience(e){return this.#t.aud=e,this}setJti(e){return this.#t.jti=e,this}setNotBefore(e){return this.#t.nbf=e,this}setExpirationTime(e){return this.#t.exp=e,this}setIssuedAt(e){return this.#t.iat=e,this}setProtectedHeader(e){return this.#e=e,this}async sign(e,r){let i=new Cp(this.#t.data());if(i.setProtectedHeader(this.#e),Array.isArray(this.#e?.crit)&&this.#e.crit.includes("b64")&&this.#e.b64===!1)throw new yr("JWTs MUST NOT use unencoded payload");return i.sign(e,r)}};var ol=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e={}){this.#s=new Ja(e)}setIssuer(e){return this.#s.iss=e,this}setSubject(e){return this.#s.sub=e,this}setAudience(e){return this.#s.aud=e,this}setJti(e){return this.#s.jti=e,this}setNotBefore(e){return this.#s.nbf=e,this}setExpirationTime(e){return this.#s.exp=e,this}setIssuedAt(e){return this.#s.iat=e,this}setProtectedHeader(e){if(this.#n)throw new TypeError("setProtectedHeader can only be called once");return this.#n=e,this}setKeyManagementParameters(e){if(this.#r)throw new TypeError("setKeyManagementParameters can only be called once");return this.#r=e,this}setContentEncryptionKey(e){if(this.#e)throw new TypeError("setContentEncryptionKey can only be called once");return this.#e=e,this}setInitializationVector(e){if(this.#t)throw new TypeError("setInitializationVector can only be called once");return this.#t=e,this}replicateIssuerAsHeader(){return this.#i=!0,this}replicateSubjectAsHeader(){return this.#o=!0,this}replicateAudienceAsHeader(){return this.#a=!0,this}async encrypt(e,r){let i=new $p(this.#s.data());return this.#n&&(this.#i||this.#o||this.#a)&&(this.#n={...this.#n,iss:this.#i?this.#s.iss:void 0,sub:this.#o?this.#s.sub:void 0,aud:this.#a?this.#s.aud:void 0}),i.setProtectedHeader(this.#n),this.#t&&i.setInitializationVector(this.#t),this.#e&&i.setContentEncryptionKey(this.#e),this.#r&&i.setKeyManagementParameters(this.#r),i.encrypt(e,r)}};var Si=(t,e)=>{if(typeof t!="string"||!t)throw new mp(`${e} missing or invalid`)};async function Pp(t,e){let r;if(As(t))r=t;else if(Yu(t))r=await _p(t);else throw new TypeError(bn(t,"CryptoKey","KeyObject","JSON Web Key"));if(e??="sha256",e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let i;switch(r.kty){case"AKP":Si(r.alg,'"alg" (Algorithm) Parameter'),Si(r.pub,'"pub" (Public key) Parameter'),i={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":Si(r.crv,'"crv" (Curve) Parameter'),Si(r.x,'"x" (X Coordinate) Parameter'),Si(r.y,'"y" (Y Coordinate) Parameter'),i={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":Si(r.crv,'"crv" (Subtype of Key Pair) Parameter'),Si(r.x,'"x" (Public Key) Parameter'),i={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":Si(r.e,'"e" (Exponent) Parameter'),Si(r.n,'"n" (Modulus) Parameter'),i={e:r.e,kty:r.kty,n:r.n};break;case"oct":Si(r.k,'"k" (Key Value) Parameter'),i={k:r.k,kty:r.kty};break;default:throw new Oe('"kty" (Key Type) Parameter missing or unsupported')}let n=Ct(JSON.stringify(i));return Nt(await xp(e,n))}function k6(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new Oe('Unsupported "alg" value for a JSON Web Key Set')}}function T6(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(I6)}function I6(t){return yt(t)}var ov=class{#e;#t=new WeakMap;constructor(e){if(!T6(e))throw new Zu("JSON Web Key Set malformed");this.#e=structuredClone(e)}jwks(){return this.#e}async getKey(e,r){let{alg:i,kid:n}={...e,...r?.header},o=k6(i),s=this.#e.keys.filter(u=>{let l=o===u.kty;if(l&&typeof n=="string"&&(l=n===u.kid),l&&(typeof u.alg=="string"||o==="AKP")&&(l=i===u.alg),l&&typeof u.use=="string"&&(l=u.use==="sig"),l&&Array.isArray(u.key_ops)&&(l=u.key_ops.includes("verify")),l)switch(i){case"ES256":l=u.crv==="P-256";break;case"ES384":l=u.crv==="P-384";break;case"ES512":l=u.crv==="P-521";break;case"Ed25519":case"EdDSA":l=u.crv==="Ed25519";break}return l}),{0:a,length:c}=s;if(c===0)throw new Wa;if(c!==1){let u=new hp,l=this.#t;throw u[Symbol.asyncIterator]=async function*(){for(let f of s)try{yield await JO(l,f,i)}catch{}},u}return JO(this.#t,a,i)}};async function JO(t,e,r){let i=t.get(e)||t.set(e,{}).get(e);if(i[r]===void 0){let n=await Ki({...e,ext:!0},r);if(n instanceof Uint8Array||n.type!=="public")throw new Zu("JSON Web Key Set members must be public keys");i[r]=n}return i[r]}function sv(t){let e=new ov(t),r=async(i,n)=>e.getKey(i,n);return Object.defineProperties(r,{jwks:{value:()=>structuredClone(e.jwks()),enumerable:!1,configurable:!1,writable:!1}}),r}function $6(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var av;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(av="jose/v6.1.3");var QO=Symbol();async function O6(t,e,r,i=fetch){let n=await i(t,{method:"GET",signal:r,redirect:"manual",headers:e}).catch(o=>{throw o.name==="TimeoutError"?new gp:o});if(n.status!==200)throw new Ft("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await n.json()}catch{throw new Ft("Failed to parse the JSON Web Key Set HTTP response as JSON")}}var Rp=Symbol();function C6(t,e){return!(typeof t!="object"||t===null||!("uat"in t)||typeof t.uat!="number"||Date.now()-t.uat>=e||!("jwks"in t)||!yt(t.jwks)||!Array.isArray(t.jwks.keys)||!Array.prototype.every.call(t.jwks.keys,yt))}var cv=class{#e;#t;#r;#n;#i;#o;#a;#s;#c;#u;constructor(e,r){if(!(e instanceof URL))throw new TypeError("url must be an instance of URL");this.#e=new URL(e.href),this.#t=typeof r?.timeoutDuration=="number"?r?.timeoutDuration:5e3,this.#r=typeof r?.cooldownDuration=="number"?r?.cooldownDuration:3e4,this.#n=typeof r?.cacheMaxAge=="number"?r?.cacheMaxAge:6e5,this.#a=new Headers(r?.headers),av&&!this.#a.has("User-Agent")&&this.#a.set("User-Agent",av),this.#a.has("accept")||(this.#a.set("accept","application/json"),this.#a.append("accept","application/jwk-set+json")),this.#s=r?.[QO],r?.[Rp]!==void 0&&(this.#u=r?.[Rp],C6(r?.[Rp],this.#n)&&(this.#i=this.#u.uat,this.#c=sv(this.#u.jwks)))}pendingFetch(){return!!this.#o}coolingDown(){return typeof this.#i=="number"?Date.now()<this.#i+this.#r:!1}fresh(){return typeof this.#i=="number"?Date.now()<this.#i+this.#n:!1}jwks(){return this.#c?.jwks()}async getKey(e,r){(!this.#c||!this.fresh())&&await this.reload();try{return await this.#c(e,r)}catch(i){if(i instanceof Wa&&this.coolingDown()===!1)return await this.reload(),this.#c(e,r);throw i}}async reload(){this.#o&&$6()&&(this.#o=void 0),this.#o||=O6(this.#e.href,this.#a,AbortSignal.timeout(this.#t),this.#s).then(e=>{this.#c=sv(e),this.#u&&(this.#u.uat=Date.now(),this.#u.jwks=e),this.#i=Date.now(),this.#o=void 0}).catch(e=>{throw this.#o=void 0,e}),await this.#o}};function uv(t,e){let r=new cv(t,e),i=async(n,o)=>r.getKey(n,o);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>r.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>r.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}function sl(t){let e;if(typeof t=="string"){let r=t.split(".");(r.length===3||r.length===5)&&([e]=r)}else if(typeof t=="object"&&t)if("protected"in t)e=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;let r=JSON.parse(cr.decode(ht(e)));if(!yt(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function Fn(t){if(typeof t!="string")throw new yr("JWTs must use Compact JWS serialization, JWT must be a string");let{1:e,length:r}=t.split(".");if(r===5)throw new yr("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new yr("Invalid JWT");if(!e)throw new yr("JWTs must contain a payload");let i;try{i=ht(e)}catch{throw new yr("Failed to base64url decode the payload")}let n;try{n=JSON.parse(cr.decode(i))}catch{throw new yr("Failed to parse the decoded payload as JSON")}if(!yt(n))throw new yr("Invalid JWT Claims Set");return n}async function al(t,e,r=3600){return await new il(t).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+r).sign(new TextEncoder().encode(e))}async function Up(t,e){try{return(await xi(t,new TextEncoder().encode(e))).payload}catch{return null}}var ZO=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),P6=()=>Date.now()/1e3|0,GO="dir",YO="A256CBC-HS512";async function cl(t,e,r,i=3600){let n=Jb(Ma,new TextEncoder().encode(e),new TextEncoder().encode(r),ZO,64),o=await Pp({kty:"oct",k:Qu.encode(n)},"sha256");return await new ol(t).setProtectedHeader({alg:GO,enc:YO,kid:o}).setIssuedAt().setExpirationTime(P6()+i).setJti(crypto.randomUUID()).encrypt(n)}async function Qa(t,e,r){if(!t)return null;try{let{payload:i}=await iv(t,async({kid:n})=>{let o=Jb(Ma,new TextEncoder().encode(e),new TextEncoder().encode(r),ZO,64);if(n===void 0||n===await Pp({kty:"oct",k:Qu.encode(o)},"sha256"))return o;throw new Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[GO],contentEncryptionAlgorithms:[YO,"A256GCM"]});return i}catch{return null}}Qi();Ga();Bp();var B6="0123456789abcdef",Ya={encode:t=>{if(typeof t=="string"&&(t=new TextEncoder().encode(t)),t.byteLength===0)return"";let e=new Uint8Array(t),r="";for(let i of e)r+=i.toString(16).padStart(2,"0");return r},decode:t=>{if(!t)return"";if(typeof t=="string"){if(t.length%2!==0)throw new Error("Invalid hexadecimal string");if(!new RegExp(`^[${B6}]+$`).test(t))throw new Error("Invalid hexadecimal string");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.slice(r,r+2),16);return new TextDecoder().decode(e)}return new TextDecoder().decode(t)}};function M6(t,e,r,i){ws(t);let n=cp({dkLen:32,asyncTick:10},i),{c:o,dkLen:s,asyncTick:a}=n;if($r(o,"c"),$r(s,"dkLen"),$r(a,"asyncTick"),o<1)throw new Error("iterations (c) must be >= 1");let c=Kb(e,"password"),u=Kb(r,"salt"),l=new Uint8Array(s),f=Ba.create(t,c),d=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:l,PRF:f,PRFSalt:d}}function q6(t,e,r,i,n){return t.destroy(),e.destroy(),i&&i.destroy(),on(n),r}function dv(t,e,r,i){let{c:n,dkLen:o,DK:s,PRF:a,PRFSalt:c}=M6(t,e,r,i),u,l=new Uint8Array(4),f=ja(l),d=new Uint8Array(a.outputLen);for(let m=1,h=0;h<o;m++,h+=a.outputLen){let p=s.subarray(h,h+a.outputLen);f.setInt32(0,m,!1),(u=c._cloneInto(u)).update(l).digestInto(d),p.set(d.subarray(0,p.length));for(let y=1;y<n;y++){a._cloneInto(u).update(d).digestInto(d);for(let b=0;b<p.length;b++)p[b]^=d[b]}}return q6(a,c,s,u,d)}function eC(t,e,r,i,n,o){let s=t[e++]^r[i++],a=t[e++]^r[i++],c=t[e++]^r[i++],u=t[e++]^r[i++],l=t[e++]^r[i++],f=t[e++]^r[i++],d=t[e++]^r[i++],m=t[e++]^r[i++],h=t[e++]^r[i++],p=t[e++]^r[i++],y=t[e++]^r[i++],b=t[e++]^r[i++],N=t[e++]^r[i++],T=t[e++]^r[i++],I=t[e++]^r[i++],$=t[e++]^r[i++],v=s,S=a,E=c,_=u,O=l,R=f,B=d,D=m,P=h,z=p,W=y,Q=b,G=N,J=T,le=I,se=$;for(let be=0;be<8;be+=2)O^=We(v+G|0,7),P^=We(O+v|0,9),G^=We(P+O|0,13),v^=We(G+P|0,18),z^=We(R+S|0,7),J^=We(z+R|0,9),S^=We(J+z|0,13),R^=We(S+J|0,18),le^=We(W+B|0,7),E^=We(le+W|0,9),B^=We(E+le|0,13),W^=We(B+E|0,18),_^=We(se+Q|0,7),D^=We(_+se|0,9),Q^=We(D+_|0,13),se^=We(Q+D|0,18),S^=We(v+_|0,7),E^=We(S+v|0,9),_^=We(E+S|0,13),v^=We(_+E|0,18),B^=We(R+O|0,7),D^=We(B+R|0,9),O^=We(D+B|0,13),R^=We(O+D|0,18),Q^=We(W+z|0,7),P^=We(Q+W|0,9),z^=We(P+Q|0,13),W^=We(z+P|0,18),G^=We(se+le|0,7),J^=We(G+se|0,9),le^=We(J+G|0,13),se^=We(le+J|0,18);n[o++]=s+v|0,n[o++]=a+S|0,n[o++]=c+E|0,n[o++]=u+_|0,n[o++]=l+O|0,n[o++]=f+R|0,n[o++]=d+B|0,n[o++]=m+D|0,n[o++]=h+P|0,n[o++]=p+z|0,n[o++]=y+W|0,n[o++]=b+Q|0,n[o++]=N+G|0,n[o++]=T+J|0,n[o++]=I+le|0,n[o++]=$+se|0}function fv(t,e,r,i,n){let o=i+0,s=i+16*n;for(let a=0;a<16;a++)r[s+a]=t[e+(2*n-1)*16+a];for(let a=0;a<n;a++,o+=16,e+=16)eC(r,s,t,e,r,o),a>0&&(s+=16),eC(r,o,t,e+=16,r,s)}function W6(t,e,r){let i=cp({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:n,r:o,p:s,dkLen:a,asyncTick:c,maxmem:u,onProgress:l}=i;if($r(n,"N"),$r(o,"r"),$r(s,"p"),$r(a,"dkLen"),$r(c,"asyncTick"),$r(u,"maxmem"),l!==void 0&&typeof l!="function")throw new Error("progressCb must be a function");let f=128*o,d=f/4,m=Math.pow(2,32);if(n<=1||(n&n-1)!==0||n>m)throw new Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(s<1||s>(m-1)*32/f)throw new Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(a<1||a>(m-1)*32)throw new Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(f*(n+s)>u)throw new Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+u);let p=dv(Ma,t,e,{c:1,dkLen:f*s}),y=sp(p),b=sp(new Uint8Array(f*n)),N=sp(new Uint8Array(f)),T=()=>{};if(l){let I=2*n*s,$=Math.max(Math.floor(I/1e4),1),v=0;T=()=>{v++,l&&(!(v%$)||v===I)&&l(v/I)}}return{N:n,r:o,p:s,dkLen:a,blockSize32:d,V:b,B32:y,B:p,tmp:N,blockMixCb:T,asyncTick:c}}function F6(t,e,r,i,n){let o=dv(Ma,t,r,{c:1,dkLen:e});return on(r,i,n),o}async function tC(t,e,r){let{N:i,r:n,p:o,dkLen:s,blockSize32:a,V:c,B32:u,B:l,tmp:f,blockMixCb:d,asyncTick:m}=W6(t,e,r);Vb(u);for(let h=0;h<o;h++){let p=a*h;for(let b=0;b<a;b++)c[b]=u[p+b];let y=0;await ap(i-1,m,()=>{fv(c,y,c,y+=a,n),d()}),fv(c,(i-1)*a,u,p,n),d(),await ap(i,m,()=>{let b=(u[p+a-16]&i-1)>>>0;for(let N=0;N<a;N++)f[N]=u[p+N]^c[b*a+N];fv(f,0,u,p,n),d()})}return Vb(u),F6(t,s,l,c,f)}var Xa={N:16384,r:16,p:1,dkLen:64};async function rC(t,e){return await tC(t.normalize("NFKC"),e,{N:Xa.N,p:Xa.p,r:Xa.r,dkLen:Xa.dkLen,maxmem:128*Xa.N*Xa.r*2})}var pv=async t=>{let e=Ya.encode(crypto.getRandomValues(new Uint8Array(16))),r=await rC(t,e);return`${e}:${Ya.encode(r)}`},mv=async({hash:t,password:e})=>{let[r,i]=t.split(":");if(!r||!i)throw new de("Invalid password hash");return Fb(await rC(e,r),sO(i))};function Vn(){let t=typeof globalThis<"u"&&globalThis.crypto;if(t&&typeof t.subtle=="object"&&t.subtle!=null)return t.subtle;throw new Error("crypto.subtle must be defined")}function Mp(t){return t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function nC(t,e,r){let i="",n=0,o=0;for(let s of t)for(n=n<<8|s,o+=8;o>=6;)o-=6,i+=e[n>>o&63];if(o>0&&(i+=e[n<<6-o&63]),r){let s=(4-i.length%4)%4;i+="=".repeat(s)}return i}function iC(t,e){let r=new Map;for(let s=0;s<e.length;s++)r.set(e[s],s);let i=[],n=0,o=0;for(let s of t){if(s==="=")break;let a=r.get(s);if(a===void 0)throw new Error(`Invalid Base64 character: ${s}`);n=n<<6|a,o+=6,o>=8&&(o-=8,i.push(n>>o&255))}return Uint8Array.from(i)}var Or={encode(t,e={}){let r=Mp(!1),i=typeof t=="string"?new TextEncoder().encode(t):new Uint8Array(t);return nC(i,r,e.padding??!0)},decode(t){typeof t!="string"&&(t=new TextDecoder().decode(t));let e=t.includes("-")||t.includes("_"),r=Mp(e);return iC(t,r)}},Ai={encode(t,e={}){let r=Mp(!0),i=typeof t=="string"?new TextEncoder().encode(t):new Uint8Array(t);return nC(i,r,e.padding??!0)},decode(t){let e=t.includes("-")||t.includes("_"),r=Mp(e);return iC(t,r)}};function fl(t,e){return{digest:async r=>{let i=new TextEncoder,n=typeof r=="string"?i.encode(r):r,o=await Vn().digest(t,n);return e==="hex"?Array.from(new Uint8Array(o)).map(c=>c.toString(16).padStart(2,"0")).join(""):e==="base64"||e==="base64url"||e==="base64urlnopad"?e.includes("url")?Ai.encode(o,{padding:e!=="base64urlnopad"}):Or.encode(o):o}}}function V6(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qp(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function pl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Pt(t,e,r=""){let i=V6(t),n=t?.length,o=e!==void 0;if(!i||o&&n!==e){let s=r&&`"${r}" `,a=o?` of length ${e}`:"",c=i?`length=${n}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+c)}return t}function hv(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function sC(t,e){Pt(t,void 0,"output");let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Gi(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Yi(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function K6(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}var H6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,aC=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",J6=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gv(t){if(Pt(t),aC)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=J6[t[r]];return e}var Zi={_0:48,_9:57,A:65,F:70,a:97,f:102};function oC(t){if(t>=Zi._0&&t<=Zi._9)return t-Zi._0;if(t>=Zi.A&&t<=Zi.F)return t-(Zi.A-10);if(t>=Zi.a&&t<=Zi.f)return t-(Zi.a-10)}function cC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(aC)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let n=0,o=0;n<r;n++,o+=2){let s=oC(t.charCodeAt(o)),a=oC(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}i[n]=s*16+a}return i}function uC(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function lC(...t){let e=0;for(let i=0;i<t.length;i++){let n=t[i];Pt(n),e+=n.length}let r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function dC(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function fC(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}var yv=(t,e)=>{function r(i,...n){if(Pt(i,void 0,"key"),!H6)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){let l=n[0];Pt(l,t.varSizeNonce?void 0:t.nonceLength,"nonce")}let o=t.tagLength;o&&n[1]!==void 0&&Pt(n[1],void 0,"AAD");let s=e(i,...n),a=(l,f)=>{if(f!==void 0){if(l!==2)throw new Error("cipher output not supported");Pt(f,void 0,"output")}},c=!1;return{encrypt(l,f){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Pt(l),a(s.encrypt.length,f),s.encrypt(l,f)},decrypt(l,f){if(Pt(l),o&&l.length<o)throw new Error('"ciphertext" expected length bigger than tagLength='+o);return a(s.decrypt.length,f),s.decrypt(l,f)}}}return Object.assign(r,t),r};function wv(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error('"output" expected Uint8Array of length '+t+", got: "+e.length);if(r&&!Q6(e))throw new Error("invalid output, must be aligned");return e}function pC(t,e,r){qp(r);let i=new Uint8Array(16),n=K6(i);return n.setBigUint64(0,BigInt(e),r),n.setBigUint64(8,BigInt(t),r),i}function Q6(t){return t.byteOffset%4===0}function ec(t){return Uint8Array.from(t)}function mC(t=32){let e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}function bv(t,e=mC){let{nonceLength:r}=t;pl(r);let i=(n,o)=>{let s=lC(n,o);return o.fill(0),s};return((n,...o)=>({encrypt(s){Pt(s);let a=e(r),c=t(n,a,...o).encrypt(s);return c instanceof Promise?c.then(u=>i(a,u)):i(a,c)},decrypt(s){Pt(s);let a=s.subarray(0,r),c=s.subarray(r);return t(n,a,...o).decrypt(c)}}))}var gC=t=>Uint8Array.from(t.split(""),e=>e.charCodeAt(0)),Z6=gC("expand 16-byte k"),G6=gC("expand 32-byte k"),Y6=Gi(Z6),X6=Gi(G6);function fe(t,e){return t<<e|t>>>32-e}function vv(t){return t.byteOffset%4===0}var Wp=64,e4=16,yC=2**32-1,hC=Uint32Array.of();function t4(t,e,r,i,n,o,s,a){let c=n.length,u=new Uint8Array(Wp),l=Gi(u),f=vv(n)&&vv(o),d=f?Gi(n):hC,m=f?Gi(o):hC;for(let h=0;h<c;s++){if(t(e,r,i,l,s,a),s>=yC)throw new Error("arx: counter overflow");let p=Math.min(Wp,c-h);if(f&&p===Wp){let y=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let b=0,N;b<e4;b++)N=y+b,m[N]=d[N]^l[b];h+=Wp;continue}for(let y=0,b;y<p;y++)b=h+y,o[b]=n[b]^u[y];h+=p}}function xv(t,e){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:o,rounds:s}=dC({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return pl(n),pl(s),qp(o),qp(r),(a,c,u,l,f=0)=>{Pt(a,void 0,"key"),Pt(c,void 0,"nonce"),Pt(u,void 0,"data");let d=u.length;if(l===void 0&&(l=new Uint8Array(d)),Pt(l,void 0,"output"),pl(f),f<0||f>=yC)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);let m=[],h=a.length,p,y;if(h===32)m.push(p=ec(a)),y=X6;else if(h===16&&r)p=new Uint8Array(32),p.set(a),p.set(a,16),y=Y6,m.push(p);else throw Pt(a,32,"arx key"),new Error("invalid key size");vv(c)||m.push(c=ec(c));let b=Gi(p);if(i){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(y,b,Gi(c.subarray(0,16)),b),c=c.subarray(16)}let N=16-n;if(N!==c.length)throw new Error(`arx: nonce must be ${N} or 16 bytes`);if(N!==12){let I=new Uint8Array(12);I.set(c,o?0:12-c.length),c=I,m.push(c)}let T=Gi(c);return t4(t,y,b,T,u,l,f,s),Yi(...m),l}}function lr(t,e){return t[e++]&255|(t[e++]&255)<<8}var Sv=class{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(e){e=ec(Pt(e,32,"key"));let r=lr(e,0),i=lr(e,2),n=lr(e,4),o=lr(e,6),s=lr(e,8),a=lr(e,10),c=lr(e,12),u=lr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=lr(e,16+2*l)}process(e,r,i=!1){let n=i?0:2048,{h:o,r:s}=this,a=s[0],c=s[1],u=s[2],l=s[3],f=s[4],d=s[5],m=s[6],h=s[7],p=s[8],y=s[9],b=lr(e,r+0),N=lr(e,r+2),T=lr(e,r+4),I=lr(e,r+6),$=lr(e,r+8),v=lr(e,r+10),S=lr(e,r+12),E=lr(e,r+14),_=o[0]+(b&8191),O=o[1]+((b>>>13|N<<3)&8191),R=o[2]+((N>>>10|T<<6)&8191),B=o[3]+((T>>>7|I<<9)&8191),D=o[4]+((I>>>4|$<<12)&8191),P=o[5]+($>>>1&8191),z=o[6]+(($>>>14|v<<2)&8191),W=o[7]+((v>>>11|S<<5)&8191),Q=o[8]+((S>>>8|E<<8)&8191),G=o[9]+(E>>>5|n),J=0,le=J+_*a+O*(5*y)+R*(5*p)+B*(5*h)+D*(5*m);J=le>>>13,le&=8191,le+=P*(5*d)+z*(5*f)+W*(5*l)+Q*(5*u)+G*(5*c),J+=le>>>13,le&=8191;let se=J+_*c+O*a+R*(5*y)+B*(5*p)+D*(5*h);J=se>>>13,se&=8191,se+=P*(5*m)+z*(5*d)+W*(5*f)+Q*(5*l)+G*(5*u),J+=se>>>13,se&=8191;let be=J+_*u+O*c+R*a+B*(5*y)+D*(5*p);J=be>>>13,be&=8191,be+=P*(5*h)+z*(5*m)+W*(5*d)+Q*(5*f)+G*(5*l),J+=be>>>13,be&=8191;let Re=J+_*l+O*u+R*c+B*a+D*(5*y);J=Re>>>13,Re&=8191,Re+=P*(5*p)+z*(5*h)+W*(5*m)+Q*(5*d)+G*(5*f),J+=Re>>>13,Re&=8191;let Lt=J+_*f+O*l+R*u+B*c+D*a;J=Lt>>>13,Lt&=8191,Lt+=P*(5*y)+z*(5*p)+W*(5*h)+Q*(5*m)+G*(5*d),J+=Lt>>>13,Lt&=8191;let jn=J+_*d+O*f+R*l+B*u+D*c;J=jn>>>13,jn&=8191,jn+=P*a+z*(5*y)+W*(5*p)+Q*(5*h)+G*(5*m),J+=jn>>>13,jn&=8191;let wn=J+_*m+O*d+R*f+B*l+D*u;J=wn>>>13,wn&=8191,wn+=P*c+z*a+W*(5*y)+Q*(5*p)+G*(5*h),J+=wn>>>13,wn&=8191;let yi=J+_*h+O*m+R*d+B*f+D*l;J=yi>>>13,yi&=8191,yi+=P*u+z*c+W*a+Q*(5*y)+G*(5*p),J+=yi>>>13,yi&=8191;let nn=J+_*p+O*h+R*m+B*d+D*f;J=nn>>>13,nn&=8191,nn+=P*l+z*u+W*c+Q*a+G*(5*y),J+=nn>>>13,nn&=8191;let Bn=J+_*y+O*p+R*h+B*m+D*d;J=Bn>>>13,Bn&=8191,Bn+=P*f+z*l+W*u+Q*c+G*a,J+=Bn>>>13,Bn&=8191,J=(J<<2)+J|0,J=J+le|0,le=J&8191,J=J>>>13,se+=J,o[0]=le,o[1]=se,o[2]=be,o[3]=Re,o[4]=Lt,o[5]=jn,o[6]=wn,o[7]=yi,o[8]=nn,o[9]=Bn}finalize(){let{h:e,pad:r}=this,i=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=n,n=e[a]>>>13,e[a]&=8191;e[0]+=n*5,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,i[0]=e[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=e[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let o=(n^1)-1;for(let a=0;a<10;a++)i[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|i[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let a=1;a<8;a++)s=(e[a]+r[a]|0)+(s>>>16)|0,e[a]=s&65535;Yi(i)}update(e){hv(this),Pt(e),e=ec(e);let{buffer:r,blockLen:i}=this,n=e.length;for(let o=0;o<n;){let s=Math.min(i-this.pos,n-o);if(s===i){for(;i<=n-o;o+=i)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Yi(this.h,this.r,this.buffer,this.pad)}digestInto(e){hv(this),sC(e,this),this.finished=!0;let{buffer:r,h:i}=this,{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=i[s]>>>0,e[o++]=i[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}};function r4(t){let e=(i,n)=>t(n).update(i).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}var wC=r4(t=>new Sv(t));function xC(t,e,r,i,n,o=20){let s=t[0],a=t[1],c=t[2],u=t[3],l=e[0],f=e[1],d=e[2],m=e[3],h=e[4],p=e[5],y=e[6],b=e[7],N=n,T=r[0],I=r[1],$=r[2],v=s,S=a,E=c,_=u,O=l,R=f,B=d,D=m,P=h,z=p,W=y,Q=b,G=N,J=T,le=I,se=$;for(let Re=0;Re<o;Re+=2)v=v+O|0,G=fe(G^v,16),P=P+G|0,O=fe(O^P,12),v=v+O|0,G=fe(G^v,8),P=P+G|0,O=fe(O^P,7),S=S+R|0,J=fe(J^S,16),z=z+J|0,R=fe(R^z,12),S=S+R|0,J=fe(J^S,8),z=z+J|0,R=fe(R^z,7),E=E+B|0,le=fe(le^E,16),W=W+le|0,B=fe(B^W,12),E=E+B|0,le=fe(le^E,8),W=W+le|0,B=fe(B^W,7),_=_+D|0,se=fe(se^_,16),Q=Q+se|0,D=fe(D^Q,12),_=_+D|0,se=fe(se^_,8),Q=Q+se|0,D=fe(D^Q,7),v=v+R|0,se=fe(se^v,16),W=W+se|0,R=fe(R^W,12),v=v+R|0,se=fe(se^v,8),W=W+se|0,R=fe(R^W,7),S=S+B|0,G=fe(G^S,16),Q=Q+G|0,B=fe(B^Q,12),S=S+B|0,G=fe(G^S,8),Q=Q+G|0,B=fe(B^Q,7),E=E+D|0,J=fe(J^E,16),P=P+J|0,D=fe(D^P,12),E=E+D|0,J=fe(J^E,8),P=P+J|0,D=fe(D^P,7),_=_+O|0,le=fe(le^_,16),z=z+le|0,O=fe(O^z,12),_=_+O|0,le=fe(le^_,8),z=z+le|0,O=fe(O^z,7);let be=0;i[be++]=s+v|0,i[be++]=a+S|0,i[be++]=c+E|0,i[be++]=u+_|0,i[be++]=l+O|0,i[be++]=f+R|0,i[be++]=d+B|0,i[be++]=m+D|0,i[be++]=h+P|0,i[be++]=p+z|0,i[be++]=y+W|0,i[be++]=b+Q|0,i[be++]=N+G|0,i[be++]=T+J|0,i[be++]=I+le|0,i[be++]=$+se|0}function n4(t,e,r,i){let n=t[0],o=t[1],s=t[2],a=t[3],c=e[0],u=e[1],l=e[2],f=e[3],d=e[4],m=e[5],h=e[6],p=e[7],y=r[0],b=r[1],N=r[2],T=r[3];for(let $=0;$<20;$+=2)n=n+c|0,y=fe(y^n,16),d=d+y|0,c=fe(c^d,12),n=n+c|0,y=fe(y^n,8),d=d+y|0,c=fe(c^d,7),o=o+u|0,b=fe(b^o,16),m=m+b|0,u=fe(u^m,12),o=o+u|0,b=fe(b^o,8),m=m+b|0,u=fe(u^m,7),s=s+l|0,N=fe(N^s,16),h=h+N|0,l=fe(l^h,12),s=s+l|0,N=fe(N^s,8),h=h+N|0,l=fe(l^h,7),a=a+f|0,T=fe(T^a,16),p=p+T|0,f=fe(f^p,12),a=a+f|0,T=fe(T^a,8),p=p+T|0,f=fe(f^p,7),n=n+u|0,T=fe(T^n,16),h=h+T|0,u=fe(u^h,12),n=n+u|0,T=fe(T^n,8),h=h+T|0,u=fe(u^h,7),o=o+l|0,y=fe(y^o,16),p=p+y|0,l=fe(l^p,12),o=o+l|0,y=fe(y^o,8),p=p+y|0,l=fe(l^p,7),s=s+f|0,b=fe(b^s,16),d=d+b|0,f=fe(f^d,12),s=s+f|0,b=fe(b^s,8),d=d+b|0,f=fe(f^d,7),a=a+c|0,N=fe(N^a,16),m=m+N|0,c=fe(c^m,12),a=a+c|0,N=fe(N^a,8),m=m+N|0,c=fe(c^m,7);let I=0;i[I++]=n,i[I++]=o,i[I++]=s,i[I++]=a,i[I++]=y,i[I++]=b,i[I++]=N,i[I++]=T}var i4=xv(xC,{counterRight:!1,counterLength:4,allowShortKeys:!1}),o4=xv(xC,{counterRight:!1,counterLength:8,extendNonceFn:n4,allowShortKeys:!1});var s4=new Uint8Array(16),bC=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(s4.subarray(r))},a4=new Uint8Array(32);function vC(t,e,r,i,n){n!==void 0&&Pt(n,void 0,"AAD");let o=t(e,r,a4),s=pC(i.length,n?n.length:0,!0),a=wC.create(o);n&&bC(a,n),bC(a,i),a.update(s);let c=a.digest();return Yi(o,s),c}var SC=t=>(e,r,i)=>({encrypt(o,s){let a=o.length;s=wv(a+16,s,!1),s.set(o);let c=s.subarray(0,-16);t(e,r,c,c,1);let u=vC(t,e,r,c,i);return s.set(u,a),Yi(u),s},decrypt(o,s){s=wv(o.length-16,s,!1);let a=o.subarray(0,-16),c=o.subarray(-16),u=vC(t,e,r,a,i);if(!fC(c,u))throw new Error("invalid tag");return s.set(o.subarray(0,-16)),t(e,r,s,s,1),Yi(u),s}}),w9=yv({blockSize:64,nonceLength:12,tagLength:16},SC(i4)),Nv=yv({blockSize:64,nonceLength:24,tagLength:16},SC(o4));var Fp=async({key:t,data:e})=>{let r=await fl("SHA-256").digest(t),i=uC(e);return gv(bv(Nv)(new Uint8Array(r)).encrypt(i))},Vp=async({key:t,data:e})=>{let r=await fl("SHA-256").digest(t),i=cC(e),n=bv(Nv)(new Uint8Array(r));return new TextDecoder().decode(n.decrypt(i))};var Sr={};ar(Sr,{$brand:()=>hl,$input:()=>Nm,$output:()=>Sm,NEVER:()=>Kp,TimePrecision:()=>Fm,ZodAny:()=>fh,ZodArray:()=>gh,ZodBase64:()=>ad,ZodBase64URL:()=>cd,ZodBigInt:()=>Qs,ZodBigIntFormat:()=>dd,ZodBoolean:()=>Js,ZodCIDRv4:()=>od,ZodCIDRv6:()=>sd,ZodCUID:()=>Zl,ZodCUID2:()=>Gl,ZodCatch:()=>Uh,ZodCodec:()=>wd,ZodCustom:()=>xc,ZodCustomStringFormat:()=>Ks,ZodDate:()=>wc,ZodDefault:()=>Ih,ZodDiscriminatedUnion:()=>wh,ZodE164:()=>ud,ZodEmail:()=>Hl,ZodEmoji:()=>Jl,ZodEnum:()=>Fs,ZodError:()=>H1,ZodFile:()=>Eh,ZodFirstPartyTypeKind:()=>Hh,ZodFunction:()=>Fh,ZodGUID:()=>mc,ZodIPv4:()=>td,ZodIPv6:()=>nd,ZodISODate:()=>Ml,ZodISODateTime:()=>Bl,ZodISODuration:()=>Wl,ZodISOTime:()=>ql,ZodIntersection:()=>bh,ZodIssueCode:()=>J1,ZodJWT:()=>ld,ZodKSUID:()=>ed,ZodLazy:()=>Mh,ZodLiteral:()=>_h,ZodMAC:()=>ah,ZodMap:()=>Nh,ZodNaN:()=>Lh,ZodNanoID:()=>Ql,ZodNever:()=>mh,ZodNonOptional:()=>gd,ZodNull:()=>lh,ZodNullable:()=>Th,ZodNumber:()=>Hs,ZodNumberFormat:()=>Mo,ZodObject:()=>Zn,ZodOptional:()=>to,ZodPipe:()=>yd,ZodPrefault:()=>Oh,ZodPromise:()=>Wh,ZodReadonly:()=>zh,ZodRealError:()=>Pr,ZodRecord:()=>vc,ZodSet:()=>Ah,ZodString:()=>Vs,ZodStringFormat:()=>et,ZodSuccess:()=>Rh,ZodSymbol:()=>ch,ZodTemplateLiteral:()=>Bh,ZodTransform:()=>kh,ZodTuple:()=>xh,ZodType:()=>Ie,ZodULID:()=>Yl,ZodURL:()=>yc,ZodUUID:()=>Qn,ZodUndefined:()=>uh,ZodUnion:()=>bc,ZodUnknown:()=>ph,ZodVoid:()=>hh,ZodXID:()=>Xl,ZodXor:()=>yh,_ZodString:()=>Kl,_default:()=>$h,_function:()=>dA,any:()=>Fr,array:()=>ln,base64:()=>$N,base64url:()=>ON,bigint:()=>qN,boolean:()=>Vt,catch:()=>Dh,check:()=>fA,cidrv4:()=>TN,cidrv6:()=>IN,clone:()=>wr,codec:()=>cA,coerce:()=>_n,config:()=>Tt,core:()=>Ei,cuid:()=>SN,cuid2:()=>NN,custom:()=>pA,date:()=>ki,decode:()=>eh,decodeAsync:()=>rh,default:()=>JB,describe:()=>mA,discriminatedUnion:()=>GN,e164:()=>CN,email:()=>Rr,emoji:()=>vN,encode:()=>Xm,encodeAsync:()=>th,endsWith:()=>Ds,enum:()=>Zs,file:()=>iA,flattenError:()=>ic,float32:()=>zN,float64:()=>jN,formatError:()=>oc,fromJSONSchema:()=>bA,function:()=>dA,getErrorMap:()=>Z1,globalRegistry:()=>br,gt:()=>Jn,gte:()=>vr,guid:()=>pN,hash:()=>LN,hex:()=>DN,hostname:()=>UN,httpUrl:()=>bN,includes:()=>Rs,instanceof:()=>gA,int:()=>Vl,int32:()=>BN,int64:()=>WN,intersection:()=>vh,ipv4:()=>rd,ipv6:()=>id,iso:()=>Ws,json:()=>Sc,jwt:()=>PN,keyof:()=>JN,ksuid:()=>EN,lazy:()=>qh,length:()=>Do,literal:()=>nA,locales:()=>dc,looseObject:()=>pd,looseRecord:()=>XN,lowercase:()=>Cs,lt:()=>Hn,lte:()=>Wr,mac:()=>kN,map:()=>eA,maxLength:()=>Uo,maxSize:()=>Ro,meta:()=>hA,mime:()=>Ls,minLength:()=>_i,minSize:()=>eo,multipleOf:()=>Xi,nan:()=>aA,nanoid:()=>xN,nativeEnum:()=>rA,negative:()=>Ul,never:()=>fd,nonnegative:()=>Ll,nonoptional:()=>Ph,nonpositive:()=>Dl,normalize:()=>zs,null:()=>dh,nullable:()=>hc,nullish:()=>oA,number:()=>un,object:()=>ke,optional:()=>Nn,overwrite:()=>Sn,parse:()=>Qm,parseAsync:()=>Zm,partialRecord:()=>YN,pipe:()=>gc,positive:()=>Rl,prefault:()=>Ch,preprocess:()=>wA,prettifyError:()=>Zp,promise:()=>lA,property:()=>zl,readonly:()=>jh,record:()=>An,refine:()=>Vh,regex:()=>Os,regexes:()=>cn,registry:()=>Ol,safeDecode:()=>ih,safeDecodeAsync:()=>sh,safeEncode:()=>nh,safeEncodeAsync:()=>oh,safeParse:()=>Gm,safeParseAsync:()=>Ym,set:()=>tA,setErrorMap:()=>Q1,size:()=>$s,slugify:()=>qs,startsWith:()=>Us,strictObject:()=>QN,string:()=>Y,stringFormat:()=>RN,stringbool:()=>yA,success:()=>sA,superRefine:()=>Kh,symbol:()=>VN,templateLiteral:()=>uA,toJSONSchema:()=>jl,toLowerCase:()=>Bs,toUpperCase:()=>Ms,transform:()=>hd,treeifyError:()=>Qp,trim:()=>js,tuple:()=>Sh,uint32:()=>MN,uint64:()=>FN,ulid:()=>AN,undefined:()=>KN,union:()=>md,unknown:()=>Bo,uppercase:()=>Ps,url:()=>wN,util:()=>ee,uuid:()=>mN,uuidv4:()=>hN,uuidv6:()=>gN,uuidv7:()=>yN,void:()=>HN,xid:()=>_N,xor:()=>ZN,z:()=>me});var me={};ar(me,{$brand:()=>hl,$input:()=>Nm,$output:()=>Sm,NEVER:()=>Kp,TimePrecision:()=>Fm,ZodAny:()=>fh,ZodArray:()=>gh,ZodBase64:()=>ad,ZodBase64URL:()=>cd,ZodBigInt:()=>Qs,ZodBigIntFormat:()=>dd,ZodBoolean:()=>Js,ZodCIDRv4:()=>od,ZodCIDRv6:()=>sd,ZodCUID:()=>Zl,ZodCUID2:()=>Gl,ZodCatch:()=>Uh,ZodCodec:()=>wd,ZodCustom:()=>xc,ZodCustomStringFormat:()=>Ks,ZodDate:()=>wc,ZodDefault:()=>Ih,ZodDiscriminatedUnion:()=>wh,ZodE164:()=>ud,ZodEmail:()=>Hl,ZodEmoji:()=>Jl,ZodEnum:()=>Fs,ZodError:()=>H1,ZodFile:()=>Eh,ZodFirstPartyTypeKind:()=>Hh,ZodFunction:()=>Fh,ZodGUID:()=>mc,ZodIPv4:()=>td,ZodIPv6:()=>nd,ZodISODate:()=>Ml,ZodISODateTime:()=>Bl,ZodISODuration:()=>Wl,ZodISOTime:()=>ql,ZodIntersection:()=>bh,ZodIssueCode:()=>J1,ZodJWT:()=>ld,ZodKSUID:()=>ed,ZodLazy:()=>Mh,ZodLiteral:()=>_h,ZodMAC:()=>ah,ZodMap:()=>Nh,ZodNaN:()=>Lh,ZodNanoID:()=>Ql,ZodNever:()=>mh,ZodNonOptional:()=>gd,ZodNull:()=>lh,ZodNullable:()=>Th,ZodNumber:()=>Hs,ZodNumberFormat:()=>Mo,ZodObject:()=>Zn,ZodOptional:()=>to,ZodPipe:()=>yd,ZodPrefault:()=>Oh,ZodPromise:()=>Wh,ZodReadonly:()=>zh,ZodRealError:()=>Pr,ZodRecord:()=>vc,ZodSet:()=>Ah,ZodString:()=>Vs,ZodStringFormat:()=>et,ZodSuccess:()=>Rh,ZodSymbol:()=>ch,ZodTemplateLiteral:()=>Bh,ZodTransform:()=>kh,ZodTuple:()=>xh,ZodType:()=>Ie,ZodULID:()=>Yl,ZodURL:()=>yc,ZodUUID:()=>Qn,ZodUndefined:()=>uh,ZodUnion:()=>bc,ZodUnknown:()=>ph,ZodVoid:()=>hh,ZodXID:()=>Xl,ZodXor:()=>yh,_ZodString:()=>Kl,_default:()=>$h,_function:()=>dA,any:()=>Fr,array:()=>ln,base64:()=>$N,base64url:()=>ON,bigint:()=>qN,boolean:()=>Vt,catch:()=>Dh,check:()=>fA,cidrv4:()=>TN,cidrv6:()=>IN,clone:()=>wr,codec:()=>cA,coerce:()=>_n,config:()=>Tt,core:()=>Ei,cuid:()=>SN,cuid2:()=>NN,custom:()=>pA,date:()=>ki,decode:()=>eh,decodeAsync:()=>rh,describe:()=>mA,discriminatedUnion:()=>GN,e164:()=>CN,email:()=>Rr,emoji:()=>vN,encode:()=>Xm,encodeAsync:()=>th,endsWith:()=>Ds,enum:()=>Zs,file:()=>iA,flattenError:()=>ic,float32:()=>zN,float64:()=>jN,formatError:()=>oc,fromJSONSchema:()=>bA,function:()=>dA,getErrorMap:()=>Z1,globalRegistry:()=>br,gt:()=>Jn,gte:()=>vr,guid:()=>pN,hash:()=>LN,hex:()=>DN,hostname:()=>UN,httpUrl:()=>bN,includes:()=>Rs,instanceof:()=>gA,int:()=>Vl,int32:()=>BN,int64:()=>WN,intersection:()=>vh,ipv4:()=>rd,ipv6:()=>id,iso:()=>Ws,json:()=>Sc,jwt:()=>PN,keyof:()=>JN,ksuid:()=>EN,lazy:()=>qh,length:()=>Do,literal:()=>nA,locales:()=>dc,looseObject:()=>pd,looseRecord:()=>XN,lowercase:()=>Cs,lt:()=>Hn,lte:()=>Wr,mac:()=>kN,map:()=>eA,maxLength:()=>Uo,maxSize:()=>Ro,meta:()=>hA,mime:()=>Ls,minLength:()=>_i,minSize:()=>eo,multipleOf:()=>Xi,nan:()=>aA,nanoid:()=>xN,nativeEnum:()=>rA,negative:()=>Ul,never:()=>fd,nonnegative:()=>Ll,nonoptional:()=>Ph,nonpositive:()=>Dl,normalize:()=>zs,null:()=>dh,nullable:()=>hc,nullish:()=>oA,number:()=>un,object:()=>ke,optional:()=>Nn,overwrite:()=>Sn,parse:()=>Qm,parseAsync:()=>Zm,partialRecord:()=>YN,pipe:()=>gc,positive:()=>Rl,prefault:()=>Ch,preprocess:()=>wA,prettifyError:()=>Zp,promise:()=>lA,property:()=>zl,readonly:()=>jh,record:()=>An,refine:()=>Vh,regex:()=>Os,regexes:()=>cn,registry:()=>Ol,safeDecode:()=>ih,safeDecodeAsync:()=>sh,safeEncode:()=>nh,safeEncodeAsync:()=>oh,safeParse:()=>Gm,safeParseAsync:()=>Ym,set:()=>tA,setErrorMap:()=>Q1,size:()=>$s,slugify:()=>qs,startsWith:()=>Us,strictObject:()=>QN,string:()=>Y,stringFormat:()=>RN,stringbool:()=>yA,success:()=>sA,superRefine:()=>Kh,symbol:()=>VN,templateLiteral:()=>uA,toJSONSchema:()=>jl,toLowerCase:()=>Bs,toUpperCase:()=>Ms,transform:()=>hd,treeifyError:()=>Qp,trim:()=>js,tuple:()=>Sh,uint32:()=>MN,uint64:()=>FN,ulid:()=>AN,undefined:()=>KN,union:()=>md,unknown:()=>Bo,uppercase:()=>Ps,url:()=>wN,util:()=>ee,uuid:()=>mN,uuidv4:()=>hN,uuidv6:()=>gN,uuidv7:()=>yN,void:()=>HN,xid:()=>_N,xor:()=>ZN});var Ei={};ar(Ei,{$ZodAny:()=>cS,$ZodArray:()=>pS,$ZodAsyncError:()=>Kn,$ZodBase64:()=>Yx,$ZodBase64URL:()=>Xx,$ZodBigInt:()=>gm,$ZodBigIntFormat:()=>iS,$ZodBoolean:()=>El,$ZodCIDRv4:()=>Qx,$ZodCIDRv6:()=>Zx,$ZodCUID:()=>Lx,$ZodCUID2:()=>zx,$ZodCatch:()=>OS,$ZodCheck:()=>lt,$ZodCheckBigIntFormat:()=>px,$ZodCheckEndsWith:()=>_x,$ZodCheckGreaterThan:()=>um,$ZodCheckIncludes:()=>Nx,$ZodCheckLengthEquals:()=>bx,$ZodCheckLessThan:()=>cm,$ZodCheckLowerCase:()=>xx,$ZodCheckMaxLength:()=>yx,$ZodCheckMaxSize:()=>mx,$ZodCheckMimeType:()=>kx,$ZodCheckMinLength:()=>wx,$ZodCheckMinSize:()=>hx,$ZodCheckMultipleOf:()=>dx,$ZodCheckNumberFormat:()=>fx,$ZodCheckOverwrite:()=>Tx,$ZodCheckProperty:()=>Ex,$ZodCheckRegex:()=>vx,$ZodCheckSizeEquals:()=>gx,$ZodCheckStartsWith:()=>Ax,$ZodCheckStringFormat:()=>lc,$ZodCheckUpperCase:()=>Sx,$ZodCodec:()=>Tl,$ZodCustom:()=>jS,$ZodCustomStringFormat:()=>rS,$ZodDate:()=>fS,$ZodDefault:()=>kS,$ZodDiscriminatedUnion:()=>gS,$ZodE164:()=>eS,$ZodEmail:()=>Px,$ZodEmoji:()=>Ux,$ZodEncodeError:()=>To,$ZodEnum:()=>xS,$ZodError:()=>Sl,$ZodFile:()=>NS,$ZodFunction:()=>DS,$ZodGUID:()=>Ox,$ZodIPv4:()=>Kx,$ZodIPv6:()=>Hx,$ZodISODate:()=>Wx,$ZodISODateTime:()=>qx,$ZodISODuration:()=>Vx,$ZodISOTime:()=>Fx,$ZodIntersection:()=>yS,$ZodJWT:()=>tS,$ZodKSUID:()=>Mx,$ZodLazy:()=>zS,$ZodLiteral:()=>SS,$ZodMAC:()=>Jx,$ZodMap:()=>bS,$ZodNaN:()=>CS,$ZodNanoID:()=>Dx,$ZodNever:()=>lS,$ZodNonOptional:()=>IS,$ZodNull:()=>aS,$ZodNullable:()=>ES,$ZodNumber:()=>hm,$ZodNumberFormat:()=>nS,$ZodObject:()=>QC,$ZodObjectJIT:()=>mS,$ZodOptional:()=>_S,$ZodPipe:()=>PS,$ZodPrefault:()=>TS,$ZodPromise:()=>LS,$ZodReadonly:()=>RS,$ZodRealError:()=>qr,$ZodRecord:()=>wS,$ZodRegistry:()=>xm,$ZodSet:()=>vS,$ZodString:()=>Is,$ZodStringFormat:()=>it,$ZodSuccess:()=>$S,$ZodSymbol:()=>oS,$ZodTemplateLiteral:()=>US,$ZodTransform:()=>AS,$ZodTuple:()=>ym,$ZodType:()=>Ae,$ZodULID:()=>jx,$ZodURL:()=>Rx,$ZodUUID:()=>Cx,$ZodUndefined:()=>sS,$ZodUnion:()=>kl,$ZodUnknown:()=>uS,$ZodVoid:()=>dS,$ZodXID:()=>Bx,$ZodXor:()=>hS,$brand:()=>hl,$constructor:()=>M,$input:()=>Nm,$output:()=>Sm,Doc:()=>_l,JSONSchema:()=>V1,JSONSchemaGenerator:()=>Hm,NEVER:()=>Kp,TimePrecision:()=>Fm,_any:()=>u0,_array:()=>g0,_base64:()=>Bm,_base64url:()=>Mm,_bigint:()=>r0,_boolean:()=>e0,_catch:()=>CB,_check:()=>F1,_cidrv4:()=>zm,_cidrv6:()=>jm,_coercedBigint:()=>n0,_coercedBoolean:()=>t0,_coercedDate:()=>m0,_coercedNumber:()=>JS,_coercedString:()=>MS,_cuid:()=>Om,_cuid2:()=>Cm,_custom:()=>w0,_date:()=>p0,_decode:()=>em,_decodeAsync:()=>rm,_default:()=>IB,_discriminatedUnion:()=>yB,_e164:()=>qm,_email:()=>Am,_emoji:()=>Im,_encode:()=>Xp,_encodeAsync:()=>tm,_endsWith:()=>Ds,_enum:()=>NB,_file:()=>y0,_float32:()=>ZS,_float64:()=>GS,_gt:()=>Jn,_gte:()=>vr,_guid:()=>Cl,_includes:()=>Rs,_int:()=>QS,_int32:()=>YS,_int64:()=>i0,_intersection:()=>wB,_ipv4:()=>Dm,_ipv6:()=>Lm,_isoDate:()=>FS,_isoDateTime:()=>WS,_isoDuration:()=>KS,_isoTime:()=>VS,_jwt:()=>Wm,_ksuid:()=>Um,_lazy:()=>DB,_length:()=>Do,_literal:()=>_B,_lowercase:()=>Cs,_lt:()=>Hn,_lte:()=>Wr,_mac:()=>qS,_map:()=>xB,_max:()=>Wr,_maxLength:()=>Uo,_maxSize:()=>Ro,_mime:()=>Ls,_min:()=>vr,_minLength:()=>_i,_minSize:()=>eo,_multipleOf:()=>Xi,_nan:()=>h0,_nanoid:()=>$m,_nativeEnum:()=>AB,_negative:()=>Ul,_never:()=>d0,_nonnegative:()=>Ll,_nonoptional:()=>$B,_nonpositive:()=>Dl,_normalize:()=>zs,_null:()=>c0,_nullable:()=>TB,_number:()=>HS,_optional:()=>kB,_overwrite:()=>Sn,_parse:()=>sc,_parseAsync:()=>ac,_pipe:()=>PB,_positive:()=>Rl,_promise:()=>LB,_property:()=>zl,_readonly:()=>RB,_record:()=>vB,_refine:()=>b0,_regex:()=>Os,_safeDecode:()=>im,_safeDecodeAsync:()=>sm,_safeEncode:()=>nm,_safeEncodeAsync:()=>om,_safeParse:()=>cc,_safeParseAsync:()=>uc,_set:()=>SB,_size:()=>$s,_slugify:()=>qs,_startsWith:()=>Us,_string:()=>BS,_stringFormat:()=>fc,_stringbool:()=>N0,_success:()=>OB,_superRefine:()=>v0,_symbol:()=>s0,_templateLiteral:()=>UB,_toLowerCase:()=>Bs,_toUpperCase:()=>Ms,_transform:()=>EB,_trim:()=>js,_tuple:()=>bB,_uint32:()=>XS,_uint64:()=>o0,_ulid:()=>Pm,_undefined:()=>a0,_union:()=>hB,_unknown:()=>l0,_uppercase:()=>Ps,_url:()=>Pl,_uuid:()=>_m,_uuidv4:()=>Em,_uuidv6:()=>km,_uuidv7:()=>Tm,_void:()=>f0,_xid:()=>Rm,_xor:()=>gB,clone:()=>wr,config:()=>Tt,createStandardJSONSchemaMethod:()=>pc,createToJSONSchemaMethod:()=>A0,decode:()=>U4,decodeAsync:()=>L4,describe:()=>x0,encode:()=>R4,encodeAsync:()=>D4,extractDefs:()=>zo,finalize:()=>jo,flattenError:()=>ic,formatError:()=>oc,globalConfig:()=>ml,globalRegistry:()=>br,initializeContext:()=>Lo,isValidBase64:()=>Gx,isValidBase64URL:()=>VC,isValidJWT:()=>KC,locales:()=>dc,meta:()=>S0,parse:()=>Gp,parseAsync:()=>Yp,prettifyError:()=>Zp,process:()=>Xe,regexes:()=>cn,registry:()=>Ol,safeDecode:()=>j4,safeDecodeAsync:()=>M4,safeEncode:()=>z4,safeEncodeAsync:()=>B4,safeParse:()=>Rv,safeParseAsync:()=>Uv,toDotPath:()=>kC,toJSONSchema:()=>jl,treeifyError:()=>Qp,util:()=>ee,version:()=>Ix});var Kp=Object.freeze({status:"aborted"});function M(t,e,r){function i(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:s,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,c);let u=s.prototype,l=Object.keys(u);for(let f=0;f<l.length;f++){let d=l[f];d in a||(a[d]=u[d].bind(a))}}let n=r?.Parent??Object;class o extends n{}Object.defineProperty(o,"name",{value:t});function s(a){var c;let u=r?.Parent?new o:this;i(u,a),(c=u._zod).deferred??(c.deferred=[]);for(let l of u._zod.deferred)l();return u}return Object.defineProperty(s,"init",{value:i}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(s,"name",{value:t}),s}var hl=Symbol("zod_brand"),Kn=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},To=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},ml={};function Tt(t){return t&&Object.assign(ml,t),ml}var ee={};ar(ee,{BIGINT_FORMAT_RANGES:()=>Pv,Class:()=>_v,NUMBER_FORMAT_RANGES:()=>Cv,aborted:()=>Po,allowsEval:()=>Tv,assert:()=>f4,assertEqual:()=>c4,assertIs:()=>l4,assertNever:()=>d4,assertNotEqual:()=>u4,assignProp:()=>$o,base64ToUint8Array:()=>AC,base64urlToUint8Array:()=>I4,cached:()=>rc,captureStackTrace:()=>Jp,cleanEnum:()=>T4,cleanRegex:()=>wl,clone:()=>wr,cloneDef:()=>m4,createTransparentProxy:()=>v4,defineLazy:()=>Ue,esc:()=>Hp,escapeRegex:()=>xn,extend:()=>N4,finalizeIssue:()=>Mr,floatSafeRemainder:()=>Ev,getElementAtPath:()=>h4,getEnumValues:()=>yl,getLengthableOrigin:()=>xl,getParsedType:()=>b4,getSizableOrigin:()=>vl,hexToUint8Array:()=>O4,isObject:()=>ks,isPlainObject:()=>Co,issue:()=>nc,joinValues:()=>K,jsonStringifyReplacer:()=>tc,merge:()=>_4,mergeDefs:()=>Oo,normalizeParams:()=>te,nullish:()=>Io,numKeys:()=>w4,objectClone:()=>p4,omit:()=>S4,optionalKeys:()=>Ov,partial:()=>E4,pick:()=>x4,prefixIssues:()=>an,primitiveTypes:()=>$v,promiseAllObject:()=>g4,propertyKeyTypes:()=>bl,randomString:()=>y4,required:()=>k4,safeExtend:()=>A4,shallowClone:()=>Iv,slugify:()=>kv,stringifyPrimitive:()=>X,uint8ArrayToBase64:()=>_C,uint8ArrayToBase64url:()=>$4,uint8ArrayToHex:()=>C4,unwrapMessage:()=>gl});function c4(t){return t}function u4(t){return t}function l4(t){}function d4(t){throw new Error("Unexpected value in exhaustive check")}function f4(t){}function yl(t){let e=Object.values(t).filter(i=>typeof i=="number");return Object.entries(t).filter(([i,n])=>e.indexOf(+i)===-1).map(([i,n])=>n)}function K(t,e="|"){return t.map(r=>X(r)).join(e)}function tc(t,e){return typeof e=="bigint"?e.toString():e}function rc(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function Io(t){return t==null}function wl(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function Ev(t,e){let r=(t.toString().split(".")[1]||"").length,i=e.toString(),n=(i.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(i)){let c=i.match(/\d?e-(\d?)/);c?.[1]&&(n=Number.parseInt(c[1]))}let o=r>n?r:n,s=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return s%a/10**o}var NC=Symbol("evaluating");function Ue(t,e,r){let i;Object.defineProperty(t,e,{get(){if(i!==NC)return i===void 0&&(i=NC,i=r()),i},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function p4(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function $o(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Oo(...t){let e={};for(let r of t){let i=Object.getOwnPropertyDescriptors(r);Object.assign(e,i)}return Object.defineProperties({},e)}function m4(t){return Oo(t._zod.def)}function h4(t,e){return e?e.reduce((r,i)=>r?.[i],t):t}function g4(t){let e=Object.keys(t),r=e.map(i=>t[i]);return Promise.all(r).then(i=>{let n={};for(let o=0;o<e.length;o++)n[e[o]]=i[o];return n})}function y4(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let i=0;i<t;i++)r+=e[Math.floor(Math.random()*e.length)];return r}function Hp(t){return JSON.stringify(t)}function kv(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var Jp="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ks(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var Tv=rc(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function Co(t){if(ks(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!(ks(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Iv(t){return Co(t)?{...t}:Array.isArray(t)?[...t]:t}function w4(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}var b4=t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},bl=new Set(["string","number","symbol"]),$v=new Set(["string","number","bigint","boolean","symbol","undefined"]);function xn(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wr(t,e,r){let i=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(i._zod.parent=t),i}function te(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function v4(t){let e;return new Proxy({},{get(r,i,n){return e??(e=t()),Reflect.get(e,i,n)},set(r,i,n,o){return e??(e=t()),Reflect.set(e,i,n,o)},has(r,i){return e??(e=t()),Reflect.has(e,i)},deleteProperty(r,i){return e??(e=t()),Reflect.deleteProperty(e,i)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,i){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,i)},defineProperty(r,i,n){return e??(e=t()),Reflect.defineProperty(e,i,n)}})}function X(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function Ov(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}var Cv={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Pv={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function x4(t,e){let r=t._zod.def,i=Oo(t._zod.def,{get shape(){let n={};for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(n[o]=r.shape[o])}return $o(this,"shape",n),n},checks:[]});return wr(t,i)}function S4(t,e){let r=t._zod.def,i=Oo(t._zod.def,{get shape(){let n={...t._zod.def.shape};for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete n[o]}return $o(this,"shape",n),n},checks:[]});return wr(t,i)}function N4(t,e){if(!Co(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=Oo(t._zod.def,{get shape(){let o={...t._zod.def.shape,...e};return $o(this,"shape",o),o},checks:[]});return wr(t,n)}function A4(t,e){if(!Co(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let i={...t._zod.def.shape,...e};return $o(this,"shape",i),i},checks:t._zod.def.checks};return wr(t,r)}function _4(t,e){let r=Oo(t._zod.def,{get shape(){let i={...t._zod.def.shape,...e._zod.def.shape};return $o(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return wr(t,r)}function E4(t,e,r){let i=Oo(e._zod.def,{get shape(){let n=e._zod.def.shape,o={...n};if(r)for(let s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=t?new t({type:"optional",innerType:n[s]}):n[s])}else for(let s in n)o[s]=t?new t({type:"optional",innerType:n[s]}):n[s];return $o(this,"shape",o),o},checks:[]});return wr(e,i)}function k4(t,e,r){let i=Oo(e._zod.def,{get shape(){let n=e._zod.def.shape,o={...n};if(r)for(let s in r){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=new t({type:"nonoptional",innerType:n[s]}))}else for(let s in n)o[s]=new t({type:"nonoptional",innerType:n[s]});return $o(this,"shape",o),o},checks:[]});return wr(e,i)}function Po(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function an(t,e){return e.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(t),r})}function gl(t){return typeof t=="string"?t:t?.message}function Mr(t,e,r){let i={...t,path:t.path??[]};if(!t.message){let n=gl(t.inst?._zod.def?.error?.(t))??gl(e?.error?.(t))??gl(r.customError?.(t))??gl(r.localeError?.(t))??"Invalid input";i.message=n}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function vl(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function xl(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function nc(...t){let[e,r,i]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:i}:{...e}}function T4(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function AC(t){let e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}function _C(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function I4(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return AC(e+r)}function $4(t){return _C(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function O4(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)r[i/2]=Number.parseInt(e.slice(i,i+2),16);return r}function C4(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}var _v=class{constructor(...e){}};var EC=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,tc,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Sl=M("$ZodError",EC),qr=M("$ZodError",EC,{Parent:Error});function ic(t,e=r=>r.message){let r={},i=[];for(let n of t.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):i.push(e(n));return{formErrors:i,fieldErrors:r}}function oc(t,e=r=>r.message){let r={_errors:[]},i=n=>{for(let o of n.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>i({issues:s}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)r._errors.push(e(o));else{let s=r,a=0;for(;a<o.path.length;){let c=o.path[a];a===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(e(o))):s[c]=s[c]||{_errors:[]},s=s[c],a++}}};return i(t),r}function Qp(t,e=r=>r.message){let r={errors:[]},i=(n,o=[])=>{var s,a;for(let c of n.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>i({issues:u},c.path));else if(c.code==="invalid_key")i({issues:c.issues},c.path);else if(c.code==="invalid_element")i({issues:c.issues},c.path);else{let u=[...o,...c.path];if(u.length===0){r.errors.push(e(c));continue}let l=r,f=0;for(;f<u.length;){let d=u[f],m=f===u.length-1;typeof d=="string"?(l.properties??(l.properties={}),(s=l.properties)[d]??(s[d]={errors:[]}),l=l.properties[d]):(l.items??(l.items=[]),(a=l.items)[d]??(a[d]={errors:[]}),l=l.items[d]),m&&l.errors.push(e(c)),f++}}};return i(t),r}function kC(t){let e=[],r=t.map(i=>typeof i=="object"?i.key:i);for(let i of r)typeof i=="number"?e.push(`[${i}]`):typeof i=="symbol"?e.push(`[${JSON.stringify(String(i))}]`):/[^\w$]/.test(i)?e.push(`[${JSON.stringify(i)}]`):(e.length&&e.push("."),e.push(i));return e.join("")}function Zp(t){let e=[],r=[...t.issues].sort((i,n)=>(i.path??[]).length-(n.path??[]).length);for(let i of r)e.push(`\u2716 ${i.message}`),i.path?.length&&e.push(`  \u2192 at ${kC(i.path)}`);return e.join(`
`)}var sc=t=>(e,r,i,n)=>{let o=i?Object.assign(i,{async:!1}):{async:!1},s=e._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new Kn;if(s.issues.length){let a=new(n?.Err??t)(s.issues.map(c=>Mr(c,o,Tt())));throw Jp(a,n?.callee),a}return s.value},Gp=sc(qr),ac=t=>async(e,r,i,n)=>{let o=i?Object.assign(i,{async:!0}):{async:!0},s=e._zod.run({value:r,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){let a=new(n?.Err??t)(s.issues.map(c=>Mr(c,o,Tt())));throw Jp(a,n?.callee),a}return s.value},Yp=ac(qr),cc=t=>(e,r,i)=>{let n=i?{...i,async:!1}:{async:!1},o=e._zod.run({value:r,issues:[]},n);if(o instanceof Promise)throw new Kn;return o.issues.length?{success:!1,error:new(t??Sl)(o.issues.map(s=>Mr(s,n,Tt())))}:{success:!0,data:o.value}},Rv=cc(qr),uc=t=>async(e,r,i)=>{let n=i?Object.assign(i,{async:!0}):{async:!0},o=e._zod.run({value:r,issues:[]},n);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(s=>Mr(s,n,Tt())))}:{success:!0,data:o.value}},Uv=uc(qr),Xp=t=>(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return sc(t)(e,r,n)},R4=Xp(qr),em=t=>(e,r,i)=>sc(t)(e,r,i),U4=em(qr),tm=t=>async(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return ac(t)(e,r,n)},D4=tm(qr),rm=t=>async(e,r,i)=>ac(t)(e,r,i),L4=rm(qr),nm=t=>(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return cc(t)(e,r,n)},z4=nm(qr),im=t=>(e,r,i)=>cc(t)(e,r,i),j4=im(qr),om=t=>async(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return uc(t)(e,r,n)},B4=om(qr),sm=t=>async(e,r,i)=>uc(t)(e,r,i),M4=sm(qr);var cn={};ar(cn,{base64:()=>Gv,base64url:()=>am,bigint:()=>nx,boolean:()=>sx,browserEmail:()=>Q4,cidrv4:()=>Qv,cidrv6:()=>Zv,cuid:()=>Dv,cuid2:()=>Lv,date:()=>Xv,datetime:()=>tx,domain:()=>Y4,duration:()=>qv,e164:()=>Yv,email:()=>Fv,emoji:()=>Vv,extendedDuration:()=>q4,guid:()=>Wv,hex:()=>X4,hostname:()=>G4,html5Email:()=>K4,idnEmail:()=>J4,integer:()=>ix,ipv4:()=>Kv,ipv6:()=>Hv,ksuid:()=>Bv,lowercase:()=>ux,mac:()=>Jv,md5_base64:()=>tj,md5_base64url:()=>rj,md5_hex:()=>ej,nanoid:()=>Mv,null:()=>ax,number:()=>ox,rfc5322Email:()=>H4,sha1_base64:()=>ij,sha1_base64url:()=>oj,sha1_hex:()=>nj,sha256_base64:()=>aj,sha256_base64url:()=>cj,sha256_hex:()=>sj,sha384_base64:()=>lj,sha384_base64url:()=>dj,sha384_hex:()=>uj,sha512_base64:()=>pj,sha512_base64url:()=>mj,sha512_hex:()=>fj,string:()=>rx,time:()=>ex,ulid:()=>zv,undefined:()=>cx,unicodeEmail:()=>TC,uppercase:()=>lx,uuid:()=>Ts,uuid4:()=>W4,uuid6:()=>F4,uuid7:()=>V4,xid:()=>jv});var Dv=/^[cC][^\s-]{8,}$/,Lv=/^[0-9a-z]+$/,zv=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,jv=/^[0-9a-vA-V]{20}$/,Bv=/^[A-Za-z0-9]{27}$/,Mv=/^[a-zA-Z0-9_-]{21}$/,qv=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,q4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Wv=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ts=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,W4=Ts(4),F4=Ts(6),V4=Ts(7),Fv=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,K4=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,H4=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,TC=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,J4=TC,Q4=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Z4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Vv(){return new RegExp(Z4,"u")}var Kv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Hv=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Jv=t=>{let e=xn(t??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},Qv=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Zv=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gv=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,am=/^[A-Za-z0-9_-]*$/,G4=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Y4=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Yv=/^\+(?:[0-9]){6,14}[0-9]$/,IC="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Xv=new RegExp(`^${IC}$`);function $C(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ex(t){return new RegExp(`^${$C(t)}$`)}function tx(t){let e=$C({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let i=`${e}(?:${r.join("|")})`;return new RegExp(`^${IC}T(?:${i})$`)}var rx=t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},nx=/^-?\d+n?$/,ix=/^-?\d+$/,ox=/^-?\d+(?:\.\d+)?/,sx=/^(?:true|false)$/i,ax=/^null$/i;var cx=/^undefined$/i;var ux=/^[^A-Z]*$/,lx=/^[^a-z]*$/,X4=/^[0-9a-fA-F]*$/;function Nl(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}function Al(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}var ej=/^[0-9a-fA-F]{32}$/,tj=Nl(22,"=="),rj=Al(22),nj=/^[0-9a-fA-F]{40}$/,ij=Nl(27,"="),oj=Al(27),sj=/^[0-9a-fA-F]{64}$/,aj=Nl(43,"="),cj=Al(43),uj=/^[0-9a-fA-F]{96}$/,lj=Nl(64,""),dj=Al(64),fj=/^[0-9a-fA-F]{128}$/,pj=Nl(86,"=="),mj=Al(86);var lt=M("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),CC={number:"number",bigint:"bigint",object:"date"},cm=M("$ZodCheckLessThan",(t,e)=>{lt.init(t,e);let r=CC[typeof e.value];t._zod.onattach.push(i=>{let n=i._zod.bag,o=(e.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?n.maximum=e.value:n.exclusiveMaximum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:r,code:"too_big",maximum:e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),um=M("$ZodCheckGreaterThan",(t,e)=>{lt.init(t,e);let r=CC[typeof e.value];t._zod.onattach.push(i=>{let n=i._zod.bag,o=(e.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?n.minimum=e.value:n.exclusiveMinimum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:r,code:"too_small",minimum:e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),dx=M("$ZodCheckMultipleOf",(t,e)=>{lt.init(t,e),t._zod.onattach.push(r=>{var i;(i=r._zod.bag).multipleOf??(i.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):Ev(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),fx=M("$ZodCheckNumberFormat",(t,e)=>{lt.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),i=r?"int":"number",[n,o]=Cv[e.format];t._zod.onattach.push(s=>{let a=s._zod.bag;a.format=e.format,a.minimum=n,a.maximum=o,r&&(a.pattern=ix)}),t._zod.check=s=>{let a=s.value;if(r){if(!Number.isInteger(a)){s.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,continue:!e.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,continue:!e.abort});return}}a<n&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:t})}}),px=M("$ZodCheckBigIntFormat",(t,e)=>{lt.init(t,e);let[r,i]=Pv[e.format];t._zod.onattach.push(n=>{let o=n._zod.bag;o.format=e.format,o.minimum=r,o.maximum=i}),t._zod.check=n=>{let o=n.value;o<r&&n.issues.push({origin:"bigint",input:o,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),o>i&&n.issues.push({origin:"bigint",input:o,code:"too_big",maximum:i,inst:t})}}),mx=M("$ZodCheckMaxSize",(t,e)=>{var r;lt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Io(n)&&n.size!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<n&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{let n=i.value;n.size<=e.maximum||i.issues.push({origin:vl(n),code:"too_big",maximum:e.maximum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),hx=M("$ZodCheckMinSize",(t,e)=>{var r;lt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Io(n)&&n.size!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>n&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{let n=i.value;n.size>=e.minimum||i.issues.push({origin:vl(n),code:"too_small",minimum:e.minimum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),gx=M("$ZodCheckSizeEquals",(t,e)=>{var r;lt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Io(n)&&n.size!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag;n.minimum=e.size,n.maximum=e.size,n.size=e.size}),t._zod.check=i=>{let n=i.value,o=n.size;if(o===e.size)return;let s=o>e.size;i.issues.push({origin:vl(n),...s?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),yx=M("$ZodCheckMaxLength",(t,e)=>{var r;lt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Io(n)&&n.length!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<n&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{let n=i.value;if(n.length<=e.maximum)return;let s=xl(n);i.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),wx=M("$ZodCheckMinLength",(t,e)=>{var r;lt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Io(n)&&n.length!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>n&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{let n=i.value;if(n.length>=e.minimum)return;let s=xl(n);i.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),bx=M("$ZodCheckLengthEquals",(t,e)=>{var r;lt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Io(n)&&n.length!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag;n.minimum=e.length,n.maximum=e.length,n.length=e.length}),t._zod.check=i=>{let n=i.value,o=n.length;if(o===e.length)return;let s=xl(n),a=o>e.length;i.issues.push({origin:s,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),lc=M("$ZodCheckStringFormat",(t,e)=>{var r,i;lt.init(t,e),t._zod.onattach.push(n=>{let o=n._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:e.format,input:n.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(i=t._zod).check??(i.check=()=>{})}),vx=M("$ZodCheckRegex",(t,e)=>{lc.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),xx=M("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=ux),lc.init(t,e)}),Sx=M("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=lx),lc.init(t,e)}),Nx=M("$ZodCheckIncludes",(t,e)=>{lt.init(t,e);let r=xn(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=i,t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),t._zod.check=n=>{n.value.includes(e.includes,e.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:n.value,inst:t,continue:!e.abort})}}),Ax=M("$ZodCheckStartsWith",(t,e)=>{lt.init(t,e);let r=new RegExp(`^${xn(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(i=>{let n=i._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:t,continue:!e.abort})}}),_x=M("$ZodCheckEndsWith",(t,e)=>{lt.init(t,e);let r=new RegExp(`.*${xn(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(i=>{let n=i._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:t,continue:!e.abort})}});function OC(t,e,r){t.issues.length&&e.issues.push(...an(r,t.issues))}var Ex=M("$ZodCheckProperty",(t,e)=>{lt.init(t,e),t._zod.check=r=>{let i=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(i instanceof Promise)return i.then(n=>OC(n,r,e.property));OC(i,r,e.property)}}),kx=M("$ZodCheckMimeType",(t,e)=>{lt.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(i=>{i._zod.bag.mime=e.mime}),t._zod.check=i=>{r.has(i.value.type)||i.issues.push({code:"invalid_value",values:e.mime,input:i.value.type,inst:t,continue:!e.abort})}}),Tx=M("$ZodCheckOverwrite",(t,e)=>{lt.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var _l=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let i=e.split(`
`).filter(s=>s),n=Math.min(...i.map(s=>s.length-s.trimStart().length)),o=i.map(s=>s.slice(n)).map(s=>" ".repeat(this.indent*2)+s);for(let s of o)this.content.push(s)}compile(){let e=Function,r=this?.args,n=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...r,n.join(`
`))}};var Ix={major:4,minor:2,patch:1};var Ae=M("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Ix;let i=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&i.unshift(t);for(let n of i)for(let o of n._zod.onattach)o(t);if(i.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let n=(s,a,c)=>{let u=Po(s),l;for(let f of a){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(u)continue;let d=s.issues.length,m=f._zod.check(s);if(m instanceof Promise&&c?.async===!1)throw new Kn;if(l||m instanceof Promise)l=(l??Promise.resolve()).then(async()=>{await m,s.issues.length!==d&&(u||(u=Po(s,d)))});else{if(s.issues.length===d)continue;u||(u=Po(s,d))}}return l?l.then(()=>s):s},o=(s,a,c)=>{if(Po(s))return s.aborted=!0,s;let u=n(a,i,c);if(u instanceof Promise){if(c.async===!1)throw new Kn;return u.then(l=>t._zod.parse(l,c))}return t._zod.parse(u,c)};t._zod.run=(s,a)=>{if(a.skipChecks)return t._zod.parse(s,a);if(a.direction==="backward"){let u=t._zod.parse({value:s.value,issues:[]},{...a,skipChecks:!0});return u instanceof Promise?u.then(l=>o(l,s,a)):o(u,s,a)}let c=t._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new Kn;return c.then(u=>n(u,i,a))}return n(c,i,a)}}t["~standard"]={validate:n=>{try{let o=Rv(t,n);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return Uv(t,n).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Is=M("$ZodString",(t,e)=>{Ae.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??rx(t._zod.bag),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),it=M("$ZodStringFormat",(t,e)=>{lc.init(t,e),Is.init(t,e)}),Ox=M("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Wv),it.init(t,e)}),Cx=M("$ZodUUID",(t,e)=>{if(e.version){let i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ts(i))}else e.pattern??(e.pattern=Ts());it.init(t,e)}),Px=M("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Fv),it.init(t,e)}),Rx=M("$ZodURL",(t,e)=>{it.init(t,e),t._zod.check=r=>{try{let i=r.value.trim(),n=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=n.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),Ux=M("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Vv()),it.init(t,e)}),Dx=M("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Mv),it.init(t,e)}),Lx=M("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=Dv),it.init(t,e)}),zx=M("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Lv),it.init(t,e)}),jx=M("$ZodULID",(t,e)=>{e.pattern??(e.pattern=zv),it.init(t,e)}),Bx=M("$ZodXID",(t,e)=>{e.pattern??(e.pattern=jv),it.init(t,e)}),Mx=M("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Bv),it.init(t,e)}),qx=M("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=tx(e)),it.init(t,e)}),Wx=M("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Xv),it.init(t,e)}),Fx=M("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=ex(e)),it.init(t,e)}),Vx=M("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=qv),it.init(t,e)}),Kx=M("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Kv),it.init(t,e),t._zod.bag.format="ipv4"}),Hx=M("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Hv),it.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Jx=M("$ZodMAC",(t,e)=>{e.pattern??(e.pattern=Jv(e.delimiter)),it.init(t,e),t._zod.bag.format="mac"}),Qx=M("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Qv),it.init(t,e)}),Zx=M("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Zv),it.init(t,e),t._zod.check=r=>{let i=r.value.split("/");try{if(i.length!==2)throw new Error;let[n,o]=i;if(!o)throw new Error;let s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function Gx(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}var Yx=M("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=Gv),it.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{Gx(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function VC(t){if(!am.test(t))return!1;let e=t.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return Gx(r)}var Xx=M("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=am),it.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{VC(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),eS=M("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Yv),it.init(t,e)});function KC(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[i]=r;if(!i)return!1;let n=JSON.parse(atob(i));return!("typ"in n&&n?.typ!=="JWT"||!n.alg||e&&(!("alg"in n)||n.alg!==e))}catch{return!1}}var tS=M("$ZodJWT",(t,e)=>{it.init(t,e),t._zod.check=r=>{KC(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),rS=M("$ZodCustomStringFormat",(t,e)=>{it.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),hm=M("$ZodNumber",(t,e)=>{Ae.init(t,e),t._zod.pattern=t._zod.bag.pattern??ox,t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;let o=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:t,...o?{received:o}:{}}),r}}),nS=M("$ZodNumberFormat",(t,e)=>{fx.init(t,e),hm.init(t,e)}),El=M("$ZodBoolean",(t,e)=>{Ae.init(t,e),t._zod.pattern=sx,t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=!!r.value}catch{}let n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:t}),r}}),gm=M("$ZodBigInt",(t,e)=>{Ae.init(t,e),t._zod.pattern=nx,t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),iS=M("$ZodBigIntFormat",(t,e)=>{px.init(t,e),gm.init(t,e)}),oS=M("$ZodSymbol",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;return typeof n=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:t}),r}}),sS=M("$ZodUndefined",(t,e)=>{Ae.init(t,e),t._zod.pattern=cx,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,i)=>{let n=r.value;return typeof n>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:t}),r}}),aS=M("$ZodNull",(t,e)=>{Ae.init(t,e),t._zod.pattern=ax,t._zod.values=new Set([null]),t._zod.parse=(r,i)=>{let n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:t}),r}}),cS=M("$ZodAny",(t,e)=>{Ae.init(t,e),t._zod.parse=r=>r}),uS=M("$ZodUnknown",(t,e)=>{Ae.init(t,e),t._zod.parse=r=>r}),lS=M("$ZodNever",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),dS=M("$ZodVoid",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;return typeof n>"u"||r.issues.push({expected:"void",code:"invalid_type",input:n,inst:t}),r}}),fS=M("$ZodDate",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let n=r.value,o=n instanceof Date;return o&&!Number.isNaN(n.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:n,...o?{received:"Invalid Date"}:{},inst:t}),r}});function RC(t,e,r){t.issues.length&&e.issues.push(...an(r,t.issues)),e.value[r]=t.value}var pS=M("$ZodArray",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:t}),r;r.value=Array(n.length);let o=[];for(let s=0;s<n.length;s++){let a=n[s],c=e.element._zod.run({value:a,issues:[]},i);c instanceof Promise?o.push(c.then(u=>RC(u,r,s))):RC(c,r,s)}return o.length?Promise.all(o).then(()=>r):r}});function mm(t,e,r,i){t.issues.length&&e.issues.push(...an(r,t.issues)),t.value===void 0?r in i&&(e.value[r]=void 0):e.value[r]=t.value}function HC(t){let e=Object.keys(t.shape);for(let i of e)if(!t.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);let r=Ov(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function JC(t,e,r,i,n,o){let s=[],a=n.keySet,c=n.catchall._zod,u=c.def.type;for(let l in e){if(a.has(l))continue;if(u==="never"){s.push(l);continue}let f=c.run({value:e[l],issues:[]},i);f instanceof Promise?t.push(f.then(d=>mm(d,r,l,e))):mm(f,r,l,e)}return s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:o}),t.length?Promise.all(t).then(()=>r):r}var QC=M("$ZodObject",(t,e)=>{if(Ae.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let a=e.shape;Object.defineProperty(e,"shape",{get:()=>{let c={...a};return Object.defineProperty(e,"shape",{value:c}),c}})}let i=rc(()=>HC(e));Ue(t._zod,"propValues",()=>{let a=e.shape,c={};for(let u in a){let l=a[u]._zod;if(l.values){c[u]??(c[u]=new Set);for(let f of l.values)c[u].add(f)}}return c});let n=ks,o=e.catchall,s;t._zod.parse=(a,c)=>{s??(s=i.value);let u=a.value;if(!n(u))return a.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),a;a.value={};let l=[],f=s.shape;for(let d of s.keys){let h=f[d]._zod.run({value:u[d],issues:[]},c);h instanceof Promise?l.push(h.then(p=>mm(p,a,d,u))):mm(h,a,d,u)}return o?JC(l,u,a,c,i.value,t):l.length?Promise.all(l).then(()=>a):a}}),mS=M("$ZodObjectJIT",(t,e)=>{QC.init(t,e);let r=t._zod.parse,i=rc(()=>HC(e)),n=d=>{let m=new _l(["shape","payload","ctx"]),h=i.value,p=T=>{let I=Hp(T);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};m.write("const input = payload.value;");let y=Object.create(null),b=0;for(let T of h.keys)y[T]=`key_${b++}`;m.write("const newResult = {};");for(let T of h.keys){let I=y[T],$=Hp(T);m.write(`const ${I} = ${p(T)};`),m.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        
        if (${I}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${I}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");let N=m.compile();return(T,I)=>N(d,T,I)},o,s=ks,a=!ml.jitless,u=a&&Tv.value,l=e.catchall,f;t._zod.parse=(d,m)=>{f??(f=i.value);let h=d.value;return s(h)?a&&u&&m?.async===!1&&m.jitless!==!0?(o||(o=n(e.shape)),d=o(d,m),l?JC([],h,d,m,f,t):d):r(d,m):(d.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),d)}});function UC(t,e,r,i){for(let o of t)if(o.issues.length===0)return e.value=o.value,e;let n=t.filter(o=>!Po(o));return n.length===1?(e.value=n[0].value,n[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(s=>Mr(s,i,Tt())))}),e)}var kl=M("$ZodUnion",(t,e)=>{Ae.init(t,e),Ue(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),Ue(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),Ue(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),Ue(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){let n=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${n.map(o=>wl(o.source)).join("|")})$`)}});let r=e.options.length===1,i=e.options[0]._zod.run;t._zod.parse=(n,o)=>{if(r)return i(n,o);let s=!1,a=[];for(let c of e.options){let u=c._zod.run({value:n.value,issues:[]},o);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(c=>UC(c,n,t,o)):UC(a,n,t,o)}});function DC(t,e,r,i){let n=t.filter(o=>o.issues.length===0);return n.length===1?(e.value=n[0].value,e):(n.length===0?e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(s=>Mr(s,i,Tt())))}):e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:[],inclusive:!1}),e)}var hS=M("$ZodXor",(t,e)=>{kl.init(t,e),e.inclusive=!1;let r=e.options.length===1,i=e.options[0]._zod.run;t._zod.parse=(n,o)=>{if(r)return i(n,o);let s=!1,a=[];for(let c of e.options){let u=c._zod.run({value:n.value,issues:[]},o);u instanceof Promise?(a.push(u),s=!0):a.push(u)}return s?Promise.all(a).then(c=>DC(c,n,t,o)):DC(a,n,t,o)}}),gS=M("$ZodDiscriminatedUnion",(t,e)=>{e.inclusive=!1,kl.init(t,e);let r=t._zod.parse;Ue(t._zod,"propValues",()=>{let n={};for(let o of e.options){let s=o._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(let[a,c]of Object.entries(s)){n[a]||(n[a]=new Set);for(let u of c)n[a].add(u)}}return n});let i=rc(()=>{let n=e.options,o=new Map;for(let s of n){let a=s._zod.propValues?.[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let c of a){if(o.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);o.set(c,s)}}return o});t._zod.parse=(n,o)=>{let s=n.value;if(!ks(s))return n.issues.push({code:"invalid_type",expected:"object",input:s,inst:t}),n;let a=i.value.get(s?.[e.discriminator]);return a?a._zod.run(n,o):e.unionFallback?r(n,o):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:s,path:[e.discriminator],inst:t}),n)}}),yS=M("$ZodIntersection",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value,o=e.left._zod.run({value:n,issues:[]},i),s=e.right._zod.run({value:n,issues:[]},i);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,u])=>LC(r,c,u)):LC(r,o,s)}});function $x(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Co(t)&&Co(e)){let r=Object.keys(e),i=Object.keys(t).filter(o=>r.indexOf(o)!==-1),n={...t,...e};for(let o of i){let s=$x(t[o],e[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};n[o]=s.data}return{valid:!0,data:n}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let i=0;i<t.length;i++){let n=t[i],o=e[i],s=$x(n,o);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function LC(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Po(t))return t;let i=$x(e.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return t.value=i.data,t}var ym=M("$ZodTuple",(t,e)=>{Ae.init(t,e);let r=e.items;t._zod.parse=(i,n)=>{let o=i.value;if(!Array.isArray(o))return i.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),i;i.value=[];let s=[],a=[...r].reverse().findIndex(l=>l._zod.optin!=="optional"),c=a===-1?0:r.length-a;if(!e.rest){let l=o.length>r.length,f=o.length<c-1;if(l||f)return i.issues.push({...l?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:o,inst:t,origin:"array"}),i}let u=-1;for(let l of r){if(u++,u>=o.length&&u>=c)continue;let f=l._zod.run({value:o[u],issues:[]},n);f instanceof Promise?s.push(f.then(d=>lm(d,i,u))):lm(f,i,u)}if(e.rest){let l=o.slice(r.length);for(let f of l){u++;let d=e.rest._zod.run({value:f,issues:[]},n);d instanceof Promise?s.push(d.then(m=>lm(m,i,u))):lm(d,i,u)}}return s.length?Promise.all(s).then(()=>i):i}});function lm(t,e,r){t.issues.length&&e.issues.push(...an(r,t.issues)),e.value[r]=t.value}var wS=M("$ZodRecord",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!Co(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:t}),r;let o=[],s=e.keyType._zod.values;if(s){r.value={};let a=new Set;for(let u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){a.add(typeof u=="number"?u.toString():u);let l=e.valueType._zod.run({value:n[u],issues:[]},i);l instanceof Promise?o.push(l.then(f=>{f.issues.length&&r.issues.push(...an(u,f.issues)),r.value[u]=f.value})):(l.issues.length&&r.issues.push(...an(u,l.issues)),r.value[u]=l.value)}let c;for(let u in n)a.has(u)||(c=c??[],c.push(u));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:t,keys:c})}else{r.value={};for(let a of Reflect.ownKeys(n)){if(a==="__proto__")continue;let c=e.keyType._zod.run({value:a,issues:[]},i);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){e.mode==="loose"?r.value[a]=n[a]:r.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(l=>Mr(l,i,Tt())),input:a,path:[a],inst:t});continue}let u=e.valueType._zod.run({value:n[a],issues:[]},i);u instanceof Promise?o.push(u.then(l=>{l.issues.length&&r.issues.push(...an(a,l.issues)),r.value[c.value]=l.value})):(u.issues.length&&r.issues.push(...an(a,u.issues)),r.value[c.value]=u.value)}}return o.length?Promise.all(o).then(()=>r):r}}),bS=M("$ZodMap",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!(n instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:n,inst:t}),r;let o=[];r.value=new Map;for(let[s,a]of n){let c=e.keyType._zod.run({value:s,issues:[]},i),u=e.valueType._zod.run({value:a,issues:[]},i);c instanceof Promise||u instanceof Promise?o.push(Promise.all([c,u]).then(([l,f])=>{zC(l,f,r,s,n,t,i)})):zC(c,u,r,s,n,t,i)}return o.length?Promise.all(o).then(()=>r):r}});function zC(t,e,r,i,n,o,s){t.issues.length&&(bl.has(typeof i)?r.issues.push(...an(i,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:n,inst:o,issues:t.issues.map(a=>Mr(a,s,Tt()))})),e.issues.length&&(bl.has(typeof i)?r.issues.push(...an(i,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:n,inst:o,key:i,issues:e.issues.map(a=>Mr(a,s,Tt()))})),r.value.set(t.value,e.value)}var vS=M("$ZodSet",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!(n instanceof Set))return r.issues.push({input:n,inst:t,expected:"set",code:"invalid_type"}),r;let o=[];r.value=new Set;for(let s of n){let a=e.valueType._zod.run({value:s,issues:[]},i);a instanceof Promise?o.push(a.then(c=>jC(c,r))):jC(a,r)}return o.length?Promise.all(o).then(()=>r):r}});function jC(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}var xS=M("$ZodEnum",(t,e)=>{Ae.init(t,e);let r=yl(e.entries),i=new Set(r);t._zod.values=i,t._zod.pattern=new RegExp(`^(${r.filter(n=>bl.has(typeof n)).map(n=>typeof n=="string"?xn(n):n.toString()).join("|")})$`),t._zod.parse=(n,o)=>{let s=n.value;return i.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:t}),n}}),SS=M("$ZodLiteral",(t,e)=>{if(Ae.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(i=>typeof i=="string"?xn(i):i?xn(i.toString()):String(i)).join("|")})$`),t._zod.parse=(i,n)=>{let o=i.value;return r.has(o)||i.issues.push({code:"invalid_value",values:e.values,input:o,inst:t}),i}}),NS=M("$ZodFile",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;return n instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:n,inst:t}),r}}),AS=M("$ZodTransform",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{if(i.direction==="backward")throw new To(t.constructor.name);let n=e.transform(r.value,r);if(i.async)return(n instanceof Promise?n:Promise.resolve(n)).then(s=>(r.value=s,r));if(n instanceof Promise)throw new Kn;return r.value=n,r}});function BC(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}var _S=M("$ZodOptional",(t,e)=>{Ae.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Ue(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${wl(r.source)})?$`):void 0}),t._zod.parse=(r,i)=>{if(e.innerType._zod.optin==="optional"){let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>BC(o,r.value)):BC(n,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,i)}}),ES=M("$ZodNullable",(t,e)=>{Ae.init(t,e),Ue(t._zod,"optin",()=>e.innerType._zod.optin),Ue(t._zod,"optout",()=>e.innerType._zod.optout),Ue(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${wl(r.source)}|null)$`):void 0}),Ue(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,i)=>r.value===null?r:e.innerType._zod.run(r,i)}),kS=M("$ZodDefault",(t,e)=>{Ae.init(t,e),t._zod.optin="optional",Ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,i)=>{if(i.direction==="backward")return e.innerType._zod.run(r,i);if(r.value===void 0)return r.value=e.defaultValue,r;let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>MC(o,e)):MC(n,e)}});function MC(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}var TS=M("$ZodPrefault",(t,e)=>{Ae.init(t,e),t._zod.optin="optional",Ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,i))}),IS=M("$ZodNonOptional",(t,e)=>{Ae.init(t,e),Ue(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),t._zod.parse=(r,i)=>{let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>qC(o,t)):qC(n,t)}});function qC(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}var $S=M("$ZodSuccess",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>{if(i.direction==="backward")throw new To("ZodSuccess");let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>(r.value=o.issues.length===0,r)):(r.value=n.issues.length===0,r)}}),OS=M("$ZodCatch",(t,e)=>{Ae.init(t,e),Ue(t._zod,"optin",()=>e.innerType._zod.optin),Ue(t._zod,"optout",()=>e.innerType._zod.optout),Ue(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,i)=>{if(i.direction==="backward")return e.innerType._zod.run(r,i);let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(s=>Mr(s,i,Tt()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=e.catchValue({...r,error:{issues:n.issues.map(o=>Mr(o,i,Tt()))},input:r.value}),r.issues=[]),r)}}),CS=M("$ZodNaN",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),PS=M("$ZodPipe",(t,e)=>{Ae.init(t,e),Ue(t._zod,"values",()=>e.in._zod.values),Ue(t._zod,"optin",()=>e.in._zod.optin),Ue(t._zod,"optout",()=>e.out._zod.optout),Ue(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,i)=>{if(i.direction==="backward"){let o=e.out._zod.run(r,i);return o instanceof Promise?o.then(s=>dm(s,e.in,i)):dm(o,e.in,i)}let n=e.in._zod.run(r,i);return n instanceof Promise?n.then(o=>dm(o,e.out,i)):dm(n,e.out,i)}});function dm(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}var Tl=M("$ZodCodec",(t,e)=>{Ae.init(t,e),Ue(t._zod,"values",()=>e.in._zod.values),Ue(t._zod,"optin",()=>e.in._zod.optin),Ue(t._zod,"optout",()=>e.out._zod.optout),Ue(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,i)=>{if((i.direction||"forward")==="forward"){let o=e.in._zod.run(r,i);return o instanceof Promise?o.then(s=>fm(s,e,i)):fm(o,e,i)}else{let o=e.out._zod.run(r,i);return o instanceof Promise?o.then(s=>fm(s,e,i)):fm(o,e,i)}}});function fm(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let n=e.transform(t.value,t);return n instanceof Promise?n.then(o=>pm(t,o,e.out,r)):pm(t,n,e.out,r)}else{let n=e.reverseTransform(t.value,t);return n instanceof Promise?n.then(o=>pm(t,o,e.in,r)):pm(t,n,e.in,r)}}function pm(t,e,r,i){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},i)}var RS=M("$ZodReadonly",(t,e)=>{Ae.init(t,e),Ue(t._zod,"propValues",()=>e.innerType._zod.propValues),Ue(t._zod,"values",()=>e.innerType._zod.values),Ue(t._zod,"optin",()=>e.innerType?._zod?.optin),Ue(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,i)=>{if(i.direction==="backward")return e.innerType._zod.run(r,i);let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(WC):WC(n)}});function WC(t){return t.value=Object.freeze(t.value),t}var US=M("$ZodTemplateLiteral",(t,e)=>{Ae.init(t,e);let r=[];for(let i of e.parts)if(typeof i=="object"&&i!==null){if(!i._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...i._zod.traits].shift()}`);let n=i._zod.pattern instanceof RegExp?i._zod.pattern.source:i._zod.pattern;if(!n)throw new Error(`Invalid template literal part: ${i._zod.traits}`);let o=n.startsWith("^")?1:0,s=n.endsWith("$")?n.length-1:n.length;r.push(n.slice(o,s))}else if(i===null||$v.has(typeof i))r.push(xn(`${i}`));else throw new Error(`Invalid template literal part: ${i}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(i,n)=>typeof i.value!="string"?(i.issues.push({input:i.value,inst:t,expected:"template_literal",code:"invalid_type"}),i):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(i.value)||i.issues.push({input:i.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),i)}),DS=M("$ZodFunction",(t,e)=>(Ae.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...i){let n=t._def.input?Gp(t._def.input,i):i,o=Reflect.apply(r,this,n);return t._def.output?Gp(t._def.output,o):o}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...i){let n=t._def.input?await Yp(t._def.input,i):i,o=await Reflect.apply(r,this,n);return t._def.output?await Yp(t._def.output,o):o}},t._zod.parse=(r,i)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let i=t.constructor;return Array.isArray(r[0])?new i({type:"function",input:new ym({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new i({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let i=t.constructor;return new i({type:"function",input:t._def.input,output:r})},t)),LS=M("$ZodPromise",(t,e)=>{Ae.init(t,e),t._zod.parse=(r,i)=>Promise.resolve(r.value).then(n=>e.innerType._zod.run({value:n,issues:[]},i))}),zS=M("$ZodLazy",(t,e)=>{Ae.init(t,e),Ue(t._zod,"innerType",()=>e.getter()),Ue(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),Ue(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),Ue(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),Ue(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(r,i)=>t._zod.innerType._zod.run(r,i)}),jS=M("$ZodCustom",(t,e)=>{lt.init(t,e),Ae.init(t,e),t._zod.parse=(r,i)=>r,t._zod.check=r=>{let i=r.value,n=e.fn(i);if(n instanceof Promise)return n.then(o=>FC(o,r,i,t));FC(n,r,i,t)}});function FC(t,e,r,i){if(!t){let n={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(n.params=i._zod.def.params),e.issues.push(nc(n))}}var dc={};ar(dc,{ar:()=>ZC,az:()=>GC,be:()=>XC,bg:()=>e1,ca:()=>t1,cs:()=>r1,da:()=>n1,de:()=>i1,en:()=>wm,eo:()=>o1,es:()=>s1,fa:()=>a1,fi:()=>c1,fr:()=>u1,frCA:()=>l1,he:()=>d1,hu:()=>f1,id:()=>p1,is:()=>m1,it:()=>h1,ja:()=>g1,ka:()=>y1,kh:()=>w1,km:()=>bm,ko:()=>b1,lt:()=>x1,mk:()=>S1,ms:()=>N1,nl:()=>A1,no:()=>_1,ota:()=>E1,pl:()=>T1,ps:()=>k1,pt:()=>I1,ru:()=>O1,sl:()=>C1,sv:()=>P1,ta:()=>R1,th:()=>U1,tr:()=>D1,ua:()=>L1,uk:()=>vm,ur:()=>z1,vi:()=>j1,yo:()=>q1,zhCN:()=>B1,zhTW:()=>M1});var gj=()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return n=>{switch(n.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${n.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${X(n.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${n.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${n.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${n.minimum.toString()} ${s.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${n.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${i[o.format]??n.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${n.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${n.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${n.keys.length>1?"\u0629":""}: ${K(n.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function ZC(){return{localeError:gj()}}var yj=()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${n.expected}, daxil olan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${X(n.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${n.origin??"d\u0259y\u0259r"} ${o}${n.maximum.toString()} ${s.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${n.origin??"d\u0259y\u0259r"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${o}${n.minimum.toString()} ${s.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${i[o.format]??n.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${n.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${n.keys.length>1?"lar":""}: ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${n.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function GC(){return{localeError:yj()}}function YC(t,e,r,i){let n=Math.abs(t),o=n%10,s=n%100;return s>=11&&s<=19?i:o===1?e:o>=2&&o<=4?r:i}var wj=()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0456\u045E";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${n.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${X(n.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);if(s){let a=Number(n.maximum),c=YC(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${n.maximum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);if(s){let a=Number(n.minimum),c=YC(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${n.minimum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${i[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${n.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${K(n.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${n.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function XC(){return{localeError:wj()}}var bj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},vj=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(i){return t[i]??null}let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${bj(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${X(i.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${n}${i.maximum.toString()} ${o.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${n}${i.minimum.toString()} ${o.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;if(n.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${n.prefix}"`;if(n.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${n.suffix}"`;if(n.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${n.includes}"`;if(n.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${n.pattern}`;let o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return n.format==="emoji"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="datetime"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="date"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),n.format==="time"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="duration"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${o} ${r[n.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${i.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u043E\u0432\u0435":""}: ${K(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function e1(){return{localeError:vj()}}var xj=()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{switch(n.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${n.expected}, s'ha rebut ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Valor inv\xE0lid: s'esperava ${X(n.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${K(n.values," o ")}`;case"too_big":{let o=n.inclusive?"com a m\xE0xim":"menys de",s=e(n.origin);return s?`Massa gran: s'esperava que ${n.origin??"el valor"} contingu\xE9s ${o} ${n.maximum.toString()} ${s.unit??"elements"}`:`Massa gran: s'esperava que ${n.origin??"el valor"} fos ${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?"com a m\xEDnim":"m\xE9s de",s=e(n.origin);return s?`Massa petit: s'esperava que ${n.origin} contingu\xE9s ${o} ${n.minimum.toString()} ${s.unit}`:`Massa petit: s'esperava que ${n.origin} fos ${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${i[o.format]??n.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${n.divisor}`;case"unrecognized_keys":return`Clau${n.keys.length>1?"s":""} no reconeguda${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${n.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${n.origin}`;default:return"Entrada inv\xE0lida"}}};function t1(){return{localeError:xj()}}var Sj=()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(n))return"pole";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return n=>{switch(n.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${n.expected}, obdr\u017Eeno ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${X(n.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${n.origin??"hodnota"} mus\xED m\xEDt ${o}${n.maximum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${n.origin??"hodnota"} mus\xED b\xFDt ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${n.origin??"hodnota"} mus\xED m\xEDt ${o}${n.minimum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${n.origin??"hodnota"} mus\xED b\xFDt ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${i[o.format]??n.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${n.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${K(n.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${n.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${n.origin}`;default:return"Neplatn\xFD vstup"}}};function r1(){return{localeError:Sj()}}var Nj=()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(s){return t[s]??null}function i(s){return e[s]??s}let n=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"tal";case"object":return Array.isArray(s)?"liste":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype&&s.constructor?s.constructor.name:"objekt"}return a},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return s=>{switch(s.code){case"invalid_type":return`Ugyldigt input: forventede ${i(s.expected)}, fik ${i(n(s.input))}`;case"invalid_value":return s.values.length===1?`Ugyldig v\xE6rdi: forventede ${X(s.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${K(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=r(s.origin),u=i(s.origin);return c?`For stor: forventede ${u??"value"} ${c.verb} ${a} ${s.maximum.toString()} ${c.unit??"elementer"}`:`For stor: forventede ${u??"value"} havde ${a} ${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=r(s.origin),u=i(s.origin);return c?`For lille: forventede ${u} ${c.verb} ${a} ${s.minimum.toString()} ${c.unit}`:`For lille: forventede ${u} havde ${a} ${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Ugyldig streng: skal starte med "${a.prefix}"`:a.format==="ends_with"?`Ugyldig streng: skal ende med "${a.suffix}"`:a.format==="includes"?`Ugyldig streng: skal indeholde "${a.includes}"`:a.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${a.pattern}`:`Ugyldig ${o[a.format]??s.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${s.divisor}`;case"unrecognized_keys":return`${s.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${K(s.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${s.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${s.origin}`;default:return"Ugyldigt input"}}};function n1(){return{localeError:Nj()}}var Aj=()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"Zahl";case"object":{if(Array.isArray(n))return"Array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return n=>{switch(n.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${n.expected}, erhalten ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ung\xFCltige Eingabe: erwartet ${X(n.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Zu gro\xDF: erwartet, dass ${n.origin??"Wert"} ${o}${n.maximum.toString()} ${s.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${n.origin??"Wert"} ${o}${n.maximum.toString()} ist`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Zu klein: erwartet, dass ${n.origin} ${o}${n.minimum.toString()} ${s.unit} hat`:`Zu klein: erwartet, dass ${n.origin} ${o}${n.minimum.toString()} ist`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${i[o.format]??n.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${n.divisor} sein`;case"unrecognized_keys":return`${n.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${K(n.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${n.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${n.origin}`;default:return"Ung\xFCltige Eingabe"}}};function i1(){return{localeError:Aj()}}var _j=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Ej=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(i){return t[i]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Invalid input: expected ${i.expected}, received ${_j(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${X(i.values[0])}`:`Invalid option: expected one of ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`Too big: expected ${i.origin??"value"} to have ${n}${i.maximum.toString()} ${o.unit??"elements"}`:`Too big: expected ${i.origin??"value"} to be ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`Too small: expected ${i.origin} to have ${n}${i.minimum.toString()} ${o.unit}`:`Too small: expected ${i.origin} to be ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Invalid string: must start with "${n.prefix}"`:n.format==="ends_with"?`Invalid string: must end with "${n.suffix}"`:n.format==="includes"?`Invalid string: must include "${n.includes}"`:n.format==="regex"?`Invalid string: must match pattern ${n.pattern}`:`Invalid ${r[n.format]??i.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${i.divisor}`;case"unrecognized_keys":return`Unrecognized key${i.keys.length>1?"s":""}: ${K(i.keys,", ")}`;case"invalid_key":return`Invalid key in ${i.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${i.origin}`;default:return"Invalid input"}}};function wm(){return{localeError:Ej()}}var kj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Tj=()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(i){return t[i]??null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return i=>{switch(i.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${i.expected}, ricevi\u011Dis ${kj(i.input)}`;case"invalid_value":return i.values.length===1?`Nevalida enigo: atendi\u011Dis ${X(i.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`Tro granda: atendi\u011Dis ke ${i.origin??"valoro"} havu ${n}${i.maximum.toString()} ${o.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${i.origin??"valoro"} havu ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`Tro malgranda: atendi\u011Dis ke ${i.origin} havu ${n}${i.minimum.toString()} ${o.unit}`:`Tro malgranda: atendi\u011Dis ke ${i.origin} estu ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${n.prefix}"`:n.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${n.suffix}"`:n.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${n.includes}"`:n.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${n.pattern}`:`Nevalida ${r[n.format]??i.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${i.divisor}`;case"unrecognized_keys":return`Nekonata${i.keys.length>1?"j":""} \u015Dlosilo${i.keys.length>1?"j":""}: ${K(i.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${i.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${i.origin}`;default:return"Nevalida enigo"}}};function o1(){return{localeError:Tj()}}var Ij=()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(s){return t[s]??null}function i(s){return e[s]??s}let n=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"number";case"object":return Array.isArray(s)?"array":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype?s.constructor.name:"object"}return a},o={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return s=>{switch(s.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${i(s.expected)}, recibido ${i(n(s.input))}`;case"invalid_value":return s.values.length===1?`Entrada inv\xE1lida: se esperaba ${X(s.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${K(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=r(s.origin),u=i(s.origin);return c?`Demasiado grande: se esperaba que ${u??"valor"} tuviera ${a}${s.maximum.toString()} ${c.unit??"elementos"}`:`Demasiado grande: se esperaba que ${u??"valor"} fuera ${a}${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=r(s.origin),u=i(s.origin);return c?`Demasiado peque\xF1o: se esperaba que ${u} tuviera ${a}${s.minimum.toString()} ${c.unit}`:`Demasiado peque\xF1o: se esperaba que ${u} fuera ${a}${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${a.prefix}"`:a.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${a.suffix}"`:a.format==="includes"?`Cadena inv\xE1lida: debe incluir "${a.includes}"`:a.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${a.pattern}`:`Inv\xE1lido ${o[a.format]??s.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${s.divisor}`;case"unrecognized_keys":return`Llave${s.keys.length>1?"s":""} desconocida${s.keys.length>1?"s":""}: ${K(s.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${i(s.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${i(s.origin)}`;default:return"Entrada inv\xE1lida"}}};function s1(){return{localeError:Ij()}}var $j=()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0622\u0631\u0627\u06CC\u0647";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return n=>{switch(n.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${n.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(n.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return n.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${X(n.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${K(n.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${n.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${n.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} ${s.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${i[o.format]??n.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${n.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${n.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${K(n.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${n.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${n.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function a1(){return{localeError:$j()}}var Oj=()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return n=>{switch(n.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${n.expected}, oli ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${X(n.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Liian suuri: ${s.subject} t\xE4ytyy olla ${o}${n.maximum.toString()} ${s.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Liian pieni: ${s.subject} t\xE4ytyy olla ${o}${n.minimum.toString()} ${s.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${i[o.format]??n.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${n.divisor} monikerta`;case"unrecognized_keys":return`${n.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${K(n.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function c1(){return{localeError:Oj()}}var Cj=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"nombre";case"object":{if(Array.isArray(n))return"tableau";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{switch(n.code){case"invalid_type":return`Entr\xE9e invalide : ${n.expected} attendu, ${r(n.input)} re\xE7u`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : ${X(n.values[0])} attendu`:`Option invalide : une valeur parmi ${K(n.values,"|")} attendue`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Trop grand : ${n.origin??"valeur"} doit ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${n.origin??"valeur"} doit \xEAtre ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Trop petit : ${n.origin} doit ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Trop petit : ${n.origin} doit \xEAtre ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${i[o.format]??n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${K(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function u1(){return{localeError:Cj()}}var Pj=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{switch(n.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${n.expected}, re\xE7u ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : attendu ${X(n.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"\u2264":"<",s=e(n.origin);return s?`Trop grand : attendu que ${n.origin??"la valeur"} ait ${o}${n.maximum.toString()} ${s.unit}`:`Trop grand : attendu que ${n.origin??"la valeur"} soit ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?"\u2265":">",s=e(n.origin);return s?`Trop petit : attendu que ${n.origin} ait ${o}${n.minimum.toString()} ${s.unit}`:`Trop petit : attendu que ${n.origin} soit ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${i[o.format]??n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${K(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function l1(){return{localeError:Pj()}}var Rj=()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=u=>u?t[u]:void 0,i=u=>{let l=r(u);return l?l.label:u??t.unknown.label},n=u=>`\u05D4${i(u)}`,o=u=>(r(u)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA",s=u=>u?e[u]??null:null,a=u=>{let l=typeof u;switch(l){case"number":return Number.isNaN(u)?"NaN":"number";case"object":return Array.isArray(u)?"array":u===null?"null":Object.getPrototypeOf(u)!==Object.prototype&&u.constructor?u.constructor.name:"object";default:return l}},c={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return u=>{switch(u.code){case"invalid_type":{let l=u.expected,f=i(l),d=a(u.input),m=t[d]?.label??d;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${f}, \u05D4\u05EA\u05E7\u05D1\u05DC ${m}`}case"invalid_value":{if(u.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${X(u.values[0])}`;let l=u.values.map(m=>X(m));if(u.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${l[0]} \u05D0\u05D5 ${l[1]}`;let f=l[l.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${l.slice(0,-1).join(", ")} \u05D0\u05D5 ${f}`}case"too_big":{let l=s(u.origin),f=n(u.origin??"value");if(u.origin==="string")return`${l?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.maximum.toString()} ${l?.unit??""} ${u.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(u.origin==="number"){let h=u.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${u.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}`}if(u.origin==="array"||u.origin==="set"){let h=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",p=u.inclusive?`${u.maximum} ${l?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${u.maximum} ${l?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${p}`.trim()}let d=u.inclusive?"<=":"<",m=o(u.origin??"value");return l?.unit?`${l.longLabel} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.maximum.toString()} ${l.unit}`:`${l?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.maximum.toString()}`}case"too_small":{let l=s(u.origin),f=n(u.origin??"value");if(u.origin==="string")return`${l?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.minimum.toString()} ${l?.unit??""} ${u.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(u.origin==="number"){let h=u.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${u.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}`}if(u.origin==="array"||u.origin==="set"){let h=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(u.minimum===1&&u.inclusive){let y=(u.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${y}`}let p=u.inclusive?`${u.minimum} ${l?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${u.minimum} ${l?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${p}`.trim()}let d=u.inclusive?">=":">",m=o(u.origin??"value");return l?.unit?`${l.shortLabel} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.minimum.toString()} ${l.unit}`:`${l?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.minimum.toString()}`}case"invalid_format":{let l=u;if(l.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${l.prefix}"`;if(l.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${l.suffix}"`;if(l.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${l.includes}"`;if(l.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${l.pattern}`;let f=c[l.format],d=f?.label??l.format,h=(f?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${d} \u05DC\u05D0 ${h}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${u.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${u.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${u.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${K(u.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${n(u.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function d1(){return{localeError:Rj()}}var Uj=()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(n))return"t\xF6mb";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return n=>{switch(n.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${n.expected}, a kapott \xE9rt\xE9k ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${X(n.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`T\xFAl nagy: ${n.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${n.maximum.toString()} ${s.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${n.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} m\xE9rete t\xFAl kicsi ${o}${n.minimum.toString()} ${s.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} t\xFAl kicsi ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${i[o.format]??n.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${n.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${n.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${n.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function f1(){return{localeError:Uj()}}var Dj=()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input tidak valid: diharapkan ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak valid: diharapkan ${X(n.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Terlalu besar: diharapkan ${n.origin??"value"} memiliki ${o}${n.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: diharapkan ${n.origin??"value"} menjadi ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Terlalu kecil: diharapkan ${n.origin} memiliki ${o}${n.minimum.toString()} ${s.unit}`:`Terlalu kecil: diharapkan ${n.origin} menjadi ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${i[o.format]??n.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${n.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${n.origin}`;default:return"Input tidak valid"}}};function p1(){return{localeError:Dj()}}var Lj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},zj=()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(i){return t[i]??null}let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return i=>{switch(i.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Lj(i.input)} \xFEar sem \xE1 a\xF0 vera ${i.expected}`;case"invalid_value":return i.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${X(i.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin??"gildi"} hafi ${n}${i.maximum.toString()} ${o.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin??"gildi"} s\xE9 ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin} hafi ${n}${i.minimum.toString()} ${o.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin} s\xE9 ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${n.prefix}"`:n.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${n.suffix}"`:n.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${n.includes}"`:n.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${n.pattern}`:`Rangt ${r[n.format]??i.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${i.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${i.keys.length>1?"ir lyklar":"ur lykill"}: ${K(i.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${i.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${i.origin}`;default:return"Rangt gildi"}}};function m1(){return{localeError:zj()}}var jj=()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"numero";case"object":{if(Array.isArray(n))return"vettore";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input non valido: atteso ${n.expected}, ricevuto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input non valido: atteso ${X(n.values[0])}`:`Opzione non valida: atteso uno tra ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Troppo grande: ${n.origin??"valore"} deve avere ${o}${n.maximum.toString()} ${s.unit??"elementi"}`:`Troppo grande: ${n.origin??"valore"} deve essere ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Troppo piccolo: ${n.origin} deve avere ${o}${n.minimum.toString()} ${s.unit}`:`Troppo piccolo: ${n.origin} deve essere ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${i[o.format]??n.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${n.divisor}`;case"unrecognized_keys":return`Chiav${n.keys.length>1?"i":"e"} non riconosciut${n.keys.length>1?"e":"a"}: ${K(n.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${n.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${n.origin}`;default:return"Input non valido"}}};function h1(){return{localeError:jj()}}var Bj=()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(n))return"\u914D\u5217";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return n=>{switch(n.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${n.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(n.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return n.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${X(n.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${K(n.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=n.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",s=e(n.origin);return s?`\u5927\u304D\u3059\u304E\u308B\u5024: ${n.origin??"\u5024"}\u306F${n.maximum.toString()}${s.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${n.origin??"\u5024"}\u306F${n.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=n.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",s=e(n.origin);return s?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${s.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${i[o.format]??n.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${n.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${n.keys.length>1?"\u7FA4":""}: ${K(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function g1(){return{localeError:Bj()}}var Mj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},qj=()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(i){return t[i]??null}let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return i=>{switch(i.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${Mj(i.input)}`;case"invalid_value":return i.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X(i.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${K(i.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${o.verb} ${n}${i.maximum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin} ${o.verb} ${n}${i.minimum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin} \u10D8\u10E7\u10DD\u10E1 ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${n.prefix}"-\u10D8\u10D7`:n.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${n.suffix}"-\u10D8\u10D7`:n.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${n.includes}"-\u10E1`:n.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${n.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[n.format]??i.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${i.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${i.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${K(i.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${i.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${i.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function y1(){return{localeError:qj()}}var Wj=()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(n))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(n===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return n=>{switch(n.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X(n.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${n.maximum.toString()} ${s.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${o} ${n.minimum.toString()} ${s.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${n.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${K(n.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function bm(){return{localeError:Wj()}}function w1(){return bm()}var Fj=()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return n=>{switch(n.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${n.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(n.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return n.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${X(n.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${K(n.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=n.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",s=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(n.origin),c=a?.unit??"\uC694\uC18C";return a?`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()}${c} ${o}${s}`:`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()} ${o}${s}`}case"too_small":{let o=n.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",s=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(n.origin),c=a?.unit??"\uC694\uC18C";return a?`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()}${c} ${o}${s}`:`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()} ${o}${s}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${i[o.format]??n.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${n.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${K(n.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${n.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${n.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function b1(){return{localeError:Fj()}}var Vj=t=>$l(typeof t,t),$l=(t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},Il=t=>t.charAt(0).toUpperCase()+t.slice(1);function v1(t){let e=Math.abs(t),r=e%10,i=e%100;return i>=11&&i<=19||r===0?"many":r===1?"one":"few"}var Kj=()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(i,n,o,s){let a=t[i]??null;return a===null?a:{unit:a.unit[n],verb:a.verb[s][o?"inclusive":"notInclusive"]}}let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return i=>{switch(i.code){case"invalid_type":return`Gautas tipas ${Vj(i.input)}, o tik\u0117tasi - ${$l(i.expected)}`;case"invalid_value":return i.values.length===1?`Privalo b\u016Bti ${X(i.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${K(i.values,"|")} pasirinkim\u0173`;case"too_big":{let n=$l(i.origin),o=e(i.origin,v1(Number(i.maximum)),i.inclusive??!1,"smaller");if(o?.verb)return`${Il(n??i.origin??"reik\u0161m\u0117")} ${o.verb} ${i.maximum.toString()} ${o.unit??"element\u0173"}`;let s=i.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Il(n??i.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${i.maximum.toString()} ${o?.unit}`}case"too_small":{let n=$l(i.origin),o=e(i.origin,v1(Number(i.minimum)),i.inclusive??!1,"bigger");if(o?.verb)return`${Il(n??i.origin??"reik\u0161m\u0117")} ${o.verb} ${i.minimum.toString()} ${o.unit??"element\u0173"}`;let s=i.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Il(n??i.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${i.minimum.toString()} ${o?.unit}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${n.prefix}"`:n.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${n.suffix}"`:n.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${n.includes}"`:n.format==="regex"?`Eilut\u0117 privalo atitikti ${n.pattern}`:`Neteisingas ${r[n.format]??i.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${i.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${i.keys.length>1?"i":"as"} rakt${i.keys.length>1?"ai":"as"}: ${K(i.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let n=$l(i.origin);return`${Il(n??i.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function x1(){return{localeError:Kj()}}var Hj=()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(n))return"\u043D\u0438\u0437\u0430";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return n=>{switch(n.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${X(n.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${n.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${n.minimum.toString()} ${s.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${i[o.format]??n.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${K(n.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${n.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${n.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function S1(){return{localeError:Hj()}}var Jj=()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"nombor";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input tidak sah: dijangka ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak sah: dijangka ${X(n.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Terlalu besar: dijangka ${n.origin??"nilai"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: dijangka ${n.origin??"nilai"} adalah ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Terlalu kecil: dijangka ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Terlalu kecil: dijangka ${n.origin} adalah ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${i[o.format]??n.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${K(n.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${n.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${n.origin}`;default:return"Input tidak sah"}}};function N1(){return{localeError:Jj()}}var Qj=()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"getal";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return n=>{switch(n.code){case"invalid_type":return`Ongeldige invoer: verwacht ${n.expected}, ontving ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ongeldige invoer: verwacht ${X(n.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Te groot: verwacht dat ${n.origin??"waarde"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"elementen"}`:`Te groot: verwacht dat ${n.origin??"waarde"} ${o}${n.maximum.toString()} is`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Te klein: verwacht dat ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Te klein: verwacht dat ${n.origin} ${o}${n.minimum.toString()} is`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${i[o.format]??n.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${n.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${n.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${n.origin}`;default:return"Ongeldige invoer"}}};function A1(){return{localeError:Qj()}}var Zj=()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"tall";case"object":{if(Array.isArray(n))return"liste";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Ugyldig input: forventet ${n.expected}, fikk ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ugyldig verdi: forventet ${X(n.values[0])}`:`Ugyldig valg: forventet en av ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`For stor(t): forventet ${n.origin??"value"} til \xE5 ha ${o}${n.maximum.toString()} ${s.unit??"elementer"}`:`For stor(t): forventet ${n.origin??"value"} til \xE5 ha ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`For lite(n): forventet ${n.origin} til \xE5 ha ${o}${n.minimum.toString()} ${s.unit}`:`For lite(n): forventet ${n.origin} til \xE5 ha ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${i[o.format]??n.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${K(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${n.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${n.origin}`;default:return"Ugyldig input"}}};function _1(){return{localeError:Zj()}}var Gj=()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"numara";case"object":{if(Array.isArray(n))return"saf";if(n===null)return"gayb";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return n=>{switch(n.code){case"invalid_type":return`F\xE2sit giren: umulan ${n.expected}, al\u0131nan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`F\xE2sit giren: umulan ${X(n.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Fazla b\xFCy\xFCk: ${n.origin??"value"}, ${o}${n.maximum.toString()} ${s.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${n.origin??"value"}, ${o}${n.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${o}${n.minimum.toString()} ${s.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${o}${n.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=n;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${i[o.format]??n.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${n.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${n.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function E1(){return{localeError:Gj()}}var Yj=()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0627\u0631\u06D0";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return n=>{switch(n.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${n.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(n.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return n.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${X(n.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${K(n.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${n.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${n.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} \u0648\u064A`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} ${s.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${i[o.format]??n.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${n.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${n.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${K(n.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${n.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${n.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function k1(){return{localeError:Yj()}}var Xj=()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"liczba";case"object":{if(Array.isArray(n))return"tablica";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return n=>{switch(n.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${n.expected}, otrzymano ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${X(n.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${n.maximum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${n.minimum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${i[o.format]??n.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${n.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${n.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${n.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function T1(){return{localeError:Xj()}}var eB=()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(n))return"array";if(n===null)return"nulo";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{switch(n.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${n.expected}, recebido ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entrada inv\xE1lida: esperado ${X(n.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Muito grande: esperado que ${n.origin??"valor"} tivesse ${o}${n.maximum.toString()} ${s.unit??"elementos"}`:`Muito grande: esperado que ${n.origin??"valor"} fosse ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Muito pequeno: esperado que ${n.origin} tivesse ${o}${n.minimum.toString()} ${s.unit}`:`Muito pequeno: esperado que ${n.origin} fosse ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${i[o.format]??n.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${n.divisor}`;case"unrecognized_keys":return`Chave${n.keys.length>1?"s":""} desconhecida${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${n.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${n.origin}`;default:return"Campo inv\xE1lido"}}};function I1(){return{localeError:eB()}}function $1(t,e,r,i){let n=Math.abs(t),o=n%10,s=n%100;return s>=11&&s<=19?i:o===1?e:o>=2&&o<=4?r:i}var tB=()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${X(n.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);if(s){let a=Number(n.maximum),c=$1(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${n.maximum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);if(s){let a=Number(n.minimum),c=$1(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${n.minimum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${n.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0438":""}: ${K(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function O1(){return{localeError:tB()}}var rB=()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(n))return"tabela";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return n=>{switch(n.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${n.expected}, prejeto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${X(n.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Preveliko: pri\u010Dakovano, da bo ${n.origin??"vrednost"} imelo ${o}${n.maximum.toString()} ${s.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${n.origin??"vrednost"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Premajhno: pri\u010Dakovano, da bo ${n.origin} imelo ${o}${n.minimum.toString()} ${s.unit}`:`Premajhno: pri\u010Dakovano, da bo ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${i[o.format]??n.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${n.divisor}`;case"unrecognized_keys":return`Neprepoznan${n.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${K(n.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${n.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${n.origin}`;default:return"Neveljaven vnos"}}};function C1(){return{localeError:rB()}}var nB=()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"antal";case"object":{if(Array.isArray(n))return"lista";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return n=>{switch(n.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${n.expected}, fick ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${X(n.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`F\xF6r stor(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${o}${n.maximum.toString()} ${s.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${n.origin??"v\xE4rdet"} att ha ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`F\xF6r lite(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${o}${n.minimum.toString()} ${s.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${i[o.format]??n.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${K(n.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${n.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${n.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function P1(){return{localeError:nB()}}var iB=()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(n))return"\u0B85\u0BA3\u0BBF";if(n===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X(n.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${K(n.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${n.maximum.toString()} ${s.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${n.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${o}${n.minimum.toString()} ${s.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${o}${n.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${n.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${n.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function R1(){return{localeError:iB()}}var oB=()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(n))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(n===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return n=>{switch(n.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${n.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${X(n.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",s=e(n.origin);return s?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.maximum.toString()} ${s.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",s=e(n.origin);return s?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.minimum.toString()} ${s.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${i[o.format]??n.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${n.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${K(n.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function U1(){return{localeError:oB()}}var sB=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},aB=()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(i){return t[i]??null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return i=>{switch(i.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${i.expected}, al\u0131nan ${sB(i.input)}`;case"invalid_value":return i.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${X(i.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`\xC7ok b\xFCy\xFCk: beklenen ${i.origin??"de\u011Fer"} ${n}${i.maximum.toString()} ${o.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${i.origin??"de\u011Fer"} ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`\xC7ok k\xFC\xE7\xFCk: beklenen ${i.origin} ${n}${i.minimum.toString()} ${o.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${i.origin} ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Ge\xE7ersiz metin: "${n.prefix}" ile ba\u015Flamal\u0131`:n.format==="ends_with"?`Ge\xE7ersiz metin: "${n.suffix}" ile bitmeli`:n.format==="includes"?`Ge\xE7ersiz metin: "${n.includes}" i\xE7ermeli`:n.format==="regex"?`Ge\xE7ersiz metin: ${n.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[n.format]??i.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${i.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${i.keys.length>1?"lar":""}: ${K(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${i.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function D1(){return{localeError:aB()}}var cB=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${n.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${X(n.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} \u0431\u0443\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0456":""}: ${K(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${n.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function vm(){return{localeError:cB()}}function L1(){return vm()}var uB=()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(n))return"\u0622\u0631\u06D2";if(n===null)return"\u0646\u0644";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return n=>{switch(n.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${n.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(n.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return n.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${X(n.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${K(n.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${n.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${n.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${n.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u06D2 ${o}${n.minimum.toString()} ${s.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u0627 ${o}${n.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${n.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${n.keys.length>1?"\u0632":""}: ${K(n.keys,"\u060C ")}`;case"invalid_key":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function z1(){return{localeError:uB()}}var lB=()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(n))return"m\u1EA3ng";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return n=>{switch(n.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${n.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${X(n.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${n.origin??"gi\xE1 tr\u1ECB"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${n.origin??"gi\xE1 tr\u1ECB"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${i[o.format]??n.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${n.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${K(n.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function j1(){return{localeError:lB()}}var dB=()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(n))return"\u6570\u7EC4";if(n===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return n=>{switch(n.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${n.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${X(n.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${n.origin??"\u503C"} ${o}${n.maximum.toString()} ${s.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${n.origin??"\u503C"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${o}${n.minimum.toString()} ${s.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${i[o.format]??n.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${n.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${n.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function B1(){return{localeError:dB()}}var fB=()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return n=>{switch(n.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${n.expected}\uFF0C\u4F46\u6536\u5230 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${X(n.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${n.origin??"\u503C"} \u61C9\u70BA ${o}${n.maximum.toString()} ${s.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${n.origin??"\u503C"} \u61C9\u70BA ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${o}${n.minimum.toString()} ${s.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${n.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${n.keys.length>1?"\u5011":""}\uFF1A${K(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function M1(){return{localeError:fB()}}var pB=()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(n))return"akop\u1ECD";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return n=>{switch(n.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${n.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${X(n.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin??"iye"} ${s.verb} ${o}${n.maximum} ${s.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${n.maximum}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin} ${s.verb} ${o}${n.minimum} ${s.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${n.minimum}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${i[o.format]??n.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${n.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${K(n.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function q1(){return{localeError:pB()}}var W1,Sm=Symbol("ZodOutput"),Nm=Symbol("ZodInput"),xm=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let i=r[0];if(this._map.set(e,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let i={...this.get(r)??{}};delete i.id;let n={...i,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Ol(){return new xm}(W1=globalThis).__zod_globalRegistry??(W1.__zod_globalRegistry=Ol());var br=globalThis.__zod_globalRegistry;function BS(t,e){return new t({type:"string",...te(e)})}function MS(t,e){return new t({type:"string",coerce:!0,...te(e)})}function Am(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...te(e)})}function Cl(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...te(e)})}function _m(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...te(e)})}function Em(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...te(e)})}function km(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...te(e)})}function Tm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...te(e)})}function Pl(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...te(e)})}function Im(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...te(e)})}function $m(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...te(e)})}function Om(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...te(e)})}function Cm(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...te(e)})}function Pm(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...te(e)})}function Rm(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...te(e)})}function Um(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...te(e)})}function Dm(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...te(e)})}function Lm(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...te(e)})}function qS(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...te(e)})}function zm(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...te(e)})}function jm(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...te(e)})}function Bm(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...te(e)})}function Mm(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...te(e)})}function qm(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...te(e)})}function Wm(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...te(e)})}var Fm={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function WS(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...te(e)})}function FS(t,e){return new t({type:"string",format:"date",check:"string_format",...te(e)})}function VS(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...te(e)})}function KS(t,e){return new t({type:"string",format:"duration",check:"string_format",...te(e)})}function HS(t,e){return new t({type:"number",checks:[],...te(e)})}function JS(t,e){return new t({type:"number",coerce:!0,checks:[],...te(e)})}function QS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...te(e)})}function ZS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...te(e)})}function GS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...te(e)})}function YS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...te(e)})}function XS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...te(e)})}function e0(t,e){return new t({type:"boolean",...te(e)})}function t0(t,e){return new t({type:"boolean",coerce:!0,...te(e)})}function r0(t,e){return new t({type:"bigint",...te(e)})}function n0(t,e){return new t({type:"bigint",coerce:!0,...te(e)})}function i0(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...te(e)})}function o0(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...te(e)})}function s0(t,e){return new t({type:"symbol",...te(e)})}function a0(t,e){return new t({type:"undefined",...te(e)})}function c0(t,e){return new t({type:"null",...te(e)})}function u0(t){return new t({type:"any"})}function l0(t){return new t({type:"unknown"})}function d0(t,e){return new t({type:"never",...te(e)})}function f0(t,e){return new t({type:"void",...te(e)})}function p0(t,e){return new t({type:"date",...te(e)})}function m0(t,e){return new t({type:"date",coerce:!0,...te(e)})}function h0(t,e){return new t({type:"nan",...te(e)})}function Hn(t,e){return new cm({check:"less_than",...te(e),value:t,inclusive:!1})}function Wr(t,e){return new cm({check:"less_than",...te(e),value:t,inclusive:!0})}function Jn(t,e){return new um({check:"greater_than",...te(e),value:t,inclusive:!1})}function vr(t,e){return new um({check:"greater_than",...te(e),value:t,inclusive:!0})}function Rl(t){return Jn(0,t)}function Ul(t){return Hn(0,t)}function Dl(t){return Wr(0,t)}function Ll(t){return vr(0,t)}function Xi(t,e){return new dx({check:"multiple_of",...te(e),value:t})}function Ro(t,e){return new mx({check:"max_size",...te(e),maximum:t})}function eo(t,e){return new hx({check:"min_size",...te(e),minimum:t})}function $s(t,e){return new gx({check:"size_equals",...te(e),size:t})}function Uo(t,e){return new yx({check:"max_length",...te(e),maximum:t})}function _i(t,e){return new wx({check:"min_length",...te(e),minimum:t})}function Do(t,e){return new bx({check:"length_equals",...te(e),length:t})}function Os(t,e){return new vx({check:"string_format",format:"regex",...te(e),pattern:t})}function Cs(t){return new xx({check:"string_format",format:"lowercase",...te(t)})}function Ps(t){return new Sx({check:"string_format",format:"uppercase",...te(t)})}function Rs(t,e){return new Nx({check:"string_format",format:"includes",...te(e),includes:t})}function Us(t,e){return new Ax({check:"string_format",format:"starts_with",...te(e),prefix:t})}function Ds(t,e){return new _x({check:"string_format",format:"ends_with",...te(e),suffix:t})}function zl(t,e,r){return new Ex({check:"property",property:t,schema:e,...te(r)})}function Ls(t,e){return new kx({check:"mime_type",mime:t,...te(e)})}function Sn(t){return new Tx({check:"overwrite",tx:t})}function zs(t){return Sn(e=>e.normalize(t))}function js(){return Sn(t=>t.trim())}function Bs(){return Sn(t=>t.toLowerCase())}function Ms(){return Sn(t=>t.toUpperCase())}function qs(){return Sn(t=>kv(t))}function g0(t,e,r){return new t({type:"array",element:e,...te(r)})}function hB(t,e,r){return new t({type:"union",options:e,...te(r)})}function gB(t,e,r){return new t({type:"union",options:e,inclusive:!1,...te(r)})}function yB(t,e,r,i){return new t({type:"union",options:r,discriminator:e,...te(i)})}function wB(t,e,r){return new t({type:"intersection",left:e,right:r})}function bB(t,e,r,i){let n=r instanceof Ae,o=n?i:r,s=n?r:null;return new t({type:"tuple",items:e,rest:s,...te(o)})}function vB(t,e,r,i){return new t({type:"record",keyType:e,valueType:r,...te(i)})}function xB(t,e,r,i){return new t({type:"map",keyType:e,valueType:r,...te(i)})}function SB(t,e,r){return new t({type:"set",valueType:e,...te(r)})}function NB(t,e,r){let i=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new t({type:"enum",entries:i,...te(r)})}function AB(t,e,r){return new t({type:"enum",entries:e,...te(r)})}function _B(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...te(r)})}function y0(t,e){return new t({type:"file",...te(e)})}function EB(t,e){return new t({type:"transform",transform:e})}function kB(t,e){return new t({type:"optional",innerType:e})}function TB(t,e){return new t({type:"nullable",innerType:e})}function IB(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():Iv(r)}})}function $B(t,e,r){return new t({type:"nonoptional",innerType:e,...te(r)})}function OB(t,e){return new t({type:"success",innerType:e})}function CB(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}function PB(t,e,r){return new t({type:"pipe",in:e,out:r})}function RB(t,e){return new t({type:"readonly",innerType:e})}function UB(t,e,r){return new t({type:"template_literal",parts:e,...te(r)})}function DB(t,e){return new t({type:"lazy",getter:e})}function LB(t,e){return new t({type:"promise",innerType:e})}function w0(t,e,r){let i=te(r);return i.abort??(i.abort=!0),new t({type:"custom",check:"custom",fn:e,...i})}function b0(t,e,r){return new t({type:"custom",check:"custom",fn:e,...te(r)})}function v0(t){let e=F1(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(nc(i,r.value,e._zod.def));else{let n=i;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),n.continue??(n.continue=!e._zod.def.abort),r.issues.push(nc(n))}},t(r.value,r)));return e}function F1(t,e){let r=new lt({check:"custom",...te(e)});return r._zod.check=t,r}function x0(t){let e=new lt({check:"describe"});return e._zod.onattach=[r=>{let i=br.get(r)??{};br.add(r,{...i,description:t})}],e._zod.check=()=>{},e}function S0(t){let e=new lt({check:"meta"});return e._zod.onattach=[r=>{let i=br.get(r)??{};br.add(r,{...i,...t})}],e._zod.check=()=>{},e}function N0(t,e){let r=te(e),i=r.truthy??["true","1","yes","on","y","enabled"],n=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(i=i.map(m=>typeof m=="string"?m.toLowerCase():m),n=n.map(m=>typeof m=="string"?m.toLowerCase():m));let o=new Set(i),s=new Set(n),a=t.Codec??Tl,c=t.Boolean??El,u=t.String??Is,l=new u({type:"string",error:r.error}),f=new c({type:"boolean",error:r.error}),d=new a({type:"pipe",in:l,out:f,transform:((m,h)=>{let p=m;return r.case!=="sensitive"&&(p=p.toLowerCase()),o.has(p)?!0:s.has(p)?!1:(h.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...s],input:h.value,inst:d,continue:!1}),{})}),reverseTransform:((m,h)=>m===!0?i[0]||"true":n[0]||"false"),error:r.error});return d}function fc(t,e,r,i={}){let n=te(i),o={...te(i),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:a=>r.test(a),...n};return r instanceof RegExp&&(o.pattern=r),new t(o)}function Lo(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??br,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function Xe(t,e,r={path:[],schemaPath:[]}){var i;let n=t._zod.def,o=e.seen.get(t);if(o)return o.count++,r.schemaPath.includes(t)&&(o.cycle=r.path),o.schema;let s={schema:{},count:1,cycle:void 0,path:r.path};e.seen.set(t,s);let a=t._zod.toJSONSchema?.();if(a)s.schema=a;else{let l={...r,schemaPath:[...r.schemaPath,t],path:r.path},f=t._zod.parent;if(f)s.ref=f,Xe(f,e,l),e.seen.get(f).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,s.schema,l);else{let d=s.schema,m=e.processors[n.type];if(!m)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${n.type}`);m(t,e,d,l)}}let c=e.metadataRegistry.get(t);return c&&Object.assign(s.schema,c),e.io==="input"&&Cr(t)&&(delete s.schema.examples,delete s.schema.default),e.io==="input"&&s.schema._prefault&&((i=s.schema).default??(i.default=s.schema._prefault)),delete s.schema._prefault,e.seen.get(t).schema}function zo(t,e){let r=t.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=o=>{let s=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){let l=t.external.registry.get(o[0])?.id,f=t.external.uri??(m=>m);if(l)return{ref:f(l)};let d=o[1].defId??o[1].schema.id??`schema${t.counter++}`;return o[1].defId=d,{defId:d,ref:`${f("__shared")}#/${s}/${d}`}}if(o[1]===r)return{ref:"#"};let c=`#/${s}/`,u=o[1].schema.id??`__schema${t.counter++}`;return{defId:u,ref:c+u}},n=o=>{if(o[1].schema.$ref)return;let s=o[1],{ref:a,defId:c}=i(o);s.def={...s.schema},c&&(s.defId=c);let u=s.schema;for(let l in u)delete u[l];u.$ref=a};if(t.cycles==="throw")for(let o of t.seen.entries()){let s=o[1];if(s.cycle)throw new Error(`Cycle detected: #/${s.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let o of t.seen.entries()){let s=o[1];if(e===o[0]){n(o);continue}if(t.external){let c=t.external.registry.get(o[0])?.id;if(e!==o[0]&&c){n(o);continue}}if(t.metadataRegistry.get(o[0])?.id){n(o);continue}if(s.cycle){n(o);continue}if(s.count>1&&t.reused==="ref"){n(o);continue}}}function jo(t,e){let r=t.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=s=>{let a=t.seen.get(s),c=a.def??a.schema,u={...c};if(a.ref===null)return;let l=a.ref;if(a.ref=null,l){i(l);let f=t.seen.get(l).schema;f.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(f)):(Object.assign(c,f),Object.assign(c,u))}a.isParent||t.override({zodSchema:s,jsonSchema:c,path:a.path??[]})};for(let s of[...t.seen.entries()].reverse())i(s[0]);let n={};if(t.target==="draft-2020-12"?n.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?n.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?n.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){let s=t.external.registry.get(e)?.id;if(!s)throw new Error("Schema is missing an `id` property");n.$id=t.external.uri(s)}Object.assign(n,r.def??r.schema);let o=t.external?.defs??{};for(let s of t.seen.entries()){let a=s[1];a.def&&a.defId&&(o[a.defId]=a.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?n.$defs=o:n.definitions=o);try{let s=JSON.parse(JSON.stringify(n));return Object.defineProperty(s,"~standard",{value:{...e["~standard"],jsonSchema:{input:pc(e,"input"),output:pc(e,"output")}},enumerable:!1,writable:!1}),s}catch{throw new Error("Error converting schema to JSON.")}}function Cr(t,e){let r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let i=t._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return Cr(i.element,r);if(i.type==="set")return Cr(i.valueType,r);if(i.type==="lazy")return Cr(i.getter(),r);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return Cr(i.innerType,r);if(i.type==="intersection")return Cr(i.left,r)||Cr(i.right,r);if(i.type==="record"||i.type==="map")return Cr(i.keyType,r)||Cr(i.valueType,r);if(i.type==="pipe")return Cr(i.in,r)||Cr(i.out,r);if(i.type==="object"){for(let n in i.shape)if(Cr(i.shape[n],r))return!0;return!1}if(i.type==="union"){for(let n of i.options)if(Cr(n,r))return!0;return!1}if(i.type==="tuple"){for(let n of i.items)if(Cr(n,r))return!0;return!!(i.rest&&Cr(i.rest,r))}return!1}var A0=(t,e={})=>r=>{let i=Lo({...r,processors:e});return Xe(t,i),zo(i,t),jo(i,t)},pc=(t,e)=>r=>{let{libraryOptions:i,target:n}=r??{},o=Lo({...i??{},target:n,io:e,processors:{}});return Xe(t,o),zo(o,t),jo(o,t)};var zB={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},_0=(t,e,r,i)=>{let n=r;n.type="string";let{minimum:o,maximum:s,format:a,patterns:c,contentEncoding:u}=t._zod.bag;if(typeof o=="number"&&(n.minLength=o),typeof s=="number"&&(n.maxLength=s),a&&(n.format=zB[a]??a,n.format===""&&delete n.format),u&&(n.contentEncoding=u),c&&c.size>0){let l=[...c];l.length===1?n.pattern=l[0].source:l.length>1&&(n.allOf=[...l.map(f=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},E0=(t,e,r,i)=>{let n=r,{minimum:o,maximum:s,format:a,multipleOf:c,exclusiveMaximum:u,exclusiveMinimum:l}=t._zod.bag;typeof a=="string"&&a.includes("int")?n.type="integer":n.type="number",typeof l=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(n.minimum=l,n.exclusiveMinimum=!0):n.exclusiveMinimum=l),typeof o=="number"&&(n.minimum=o,typeof l=="number"&&e.target!=="draft-04"&&(l>=o?delete n.minimum:delete n.exclusiveMinimum)),typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(n.maximum=u,n.exclusiveMaximum=!0):n.exclusiveMaximum=u),typeof s=="number"&&(n.maximum=s,typeof u=="number"&&e.target!=="draft-04"&&(u<=s?delete n.maximum:delete n.exclusiveMaximum)),typeof c=="number"&&(n.multipleOf=c)},k0=(t,e,r,i)=>{r.type="boolean"},T0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},I0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},$0=(t,e,r,i)=>{e.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},O0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},C0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},P0=(t,e,r,i)=>{r.not={}},R0=(t,e,r,i)=>{},U0=(t,e,r,i)=>{},D0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},L0=(t,e,r,i)=>{let n=t._zod.def,o=yl(n.entries);o.every(s=>typeof s=="number")&&(r.type="number"),o.every(s=>typeof s=="string")&&(r.type="string"),r.enum=o},z0=(t,e,r,i)=>{let n=t._zod.def,o=[];for(let s of n.values)if(s===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof s=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(s))}else o.push(s);if(o.length!==0)if(o.length===1){let s=o[0];r.type=s===null?"null":typeof s,e.target==="draft-04"||e.target==="openapi-3.0"?r.enum=[s]:r.const=s}else o.every(s=>typeof s=="number")&&(r.type="number"),o.every(s=>typeof s=="string")&&(r.type="string"),o.every(s=>typeof s=="boolean")&&(r.type="boolean"),o.every(s=>s===null)&&(r.type="null"),r.enum=o},j0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},B0=(t,e,r,i)=>{let n=r,o=t._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");n.type="string",n.pattern=o.source},M0=(t,e,r,i)=>{let n=r,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:s,maximum:a,mime:c}=t._zod.bag;s!==void 0&&(o.minLength=s),a!==void 0&&(o.maxLength=a),c?c.length===1?(o.contentMediaType=c[0],Object.assign(n,o)):n.anyOf=c.map(u=>({...o,contentMediaType:u})):Object.assign(n,o)},q0=(t,e,r,i)=>{r.type="boolean"},W0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},F0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},V0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},K0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},H0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},J0=(t,e,r,i)=>{let n=r,o=t._zod.def,{minimum:s,maximum:a}=t._zod.bag;typeof s=="number"&&(n.minItems=s),typeof a=="number"&&(n.maxItems=a),n.type="array",n.items=Xe(o.element,e,{...i,path:[...i.path,"items"]})},Q0=(t,e,r,i)=>{let n=r,o=t._zod.def;n.type="object",n.properties={};let s=o.shape;for(let u in s)n.properties[u]=Xe(s[u],e,{...i,path:[...i.path,"properties",u]});let a=new Set(Object.keys(s)),c=new Set([...a].filter(u=>{let l=o.shape[u]._zod;return e.io==="input"?l.optin===void 0:l.optout===void 0}));c.size>0&&(n.required=Array.from(c)),o.catchall?._zod.def.type==="never"?n.additionalProperties=!1:o.catchall?o.catchall&&(n.additionalProperties=Xe(o.catchall,e,{...i,path:[...i.path,"additionalProperties"]})):e.io==="output"&&(n.additionalProperties=!1)},Km=(t,e,r,i)=>{let n=t._zod.def,o=n.inclusive===!1,s=n.options.map((a,c)=>Xe(a,e,{...i,path:[...i.path,o?"oneOf":"anyOf",c]}));o?r.oneOf=s:r.anyOf=s},Z0=(t,e,r,i)=>{let n=t._zod.def,o=Xe(n.left,e,{...i,path:[...i.path,"allOf",0]}),s=Xe(n.right,e,{...i,path:[...i.path,"allOf",1]}),a=u=>"allOf"in u&&Object.keys(u).length===1,c=[...a(o)?o.allOf:[o],...a(s)?s.allOf:[s]];r.allOf=c},G0=(t,e,r,i)=>{let n=r,o=t._zod.def;n.type="array";let s=e.target==="draft-2020-12"?"prefixItems":"items",a=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",c=o.items.map((d,m)=>Xe(d,e,{...i,path:[...i.path,s,m]})),u=o.rest?Xe(o.rest,e,{...i,path:[...i.path,a,...e.target==="openapi-3.0"?[o.items.length]:[]]}):null;e.target==="draft-2020-12"?(n.prefixItems=c,u&&(n.items=u)):e.target==="openapi-3.0"?(n.items={anyOf:c},u&&n.items.anyOf.push(u),n.minItems=c.length,u||(n.maxItems=c.length)):(n.items=c,u&&(n.additionalItems=u));let{minimum:l,maximum:f}=t._zod.bag;typeof l=="number"&&(n.minItems=l),typeof f=="number"&&(n.maxItems=f)},Y0=(t,e,r,i)=>{let n=r,o=t._zod.def;n.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(n.propertyNames=Xe(o.keyType,e,{...i,path:[...i.path,"propertyNames"]})),n.additionalProperties=Xe(o.valueType,e,{...i,path:[...i.path,"additionalProperties"]})},X0=(t,e,r,i)=>{let n=t._zod.def,o=Xe(n.innerType,e,i),s=e.seen.get(t);e.target==="openapi-3.0"?(s.ref=n.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},eN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType},tN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType,r.default=JSON.parse(JSON.stringify(n.defaultValue))},rN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType,e.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(n.defaultValue)))},nN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType;let s;try{s=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=s},iN=(t,e,r,i)=>{let n=t._zod.def,o=e.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;Xe(o,e,i);let s=e.seen.get(t);s.ref=o},oN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType,r.readOnly=!0},sN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType},aN=(t,e,r,i)=>{let n=t._zod.def;Xe(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType},cN=(t,e,r,i)=>{let n=t._zod.innerType;Xe(n,e,i);let o=e.seen.get(t);o.ref=n},Vm={string:_0,number:E0,boolean:k0,bigint:T0,symbol:I0,null:$0,undefined:O0,void:C0,never:P0,any:R0,unknown:U0,date:D0,enum:L0,literal:z0,nan:j0,template_literal:B0,file:M0,success:q0,custom:W0,function:F0,transform:V0,map:K0,set:H0,array:J0,object:Q0,union:Km,intersection:Z0,tuple:G0,record:Y0,nullable:X0,nonoptional:eN,default:tN,prefault:rN,catch:nN,pipe:iN,readonly:oN,promise:sN,optional:aN,lazy:cN};function jl(t,e){if("_idmap"in t){let i=t,n=Lo({...e,processors:Vm}),o={};for(let c of i._idmap.entries()){let[u,l]=c;Xe(l,n)}let s={},a={registry:i,uri:e?.uri,defs:o};n.external=a;for(let c of i._idmap.entries()){let[u,l]=c;zo(n,l),s[u]=jo(n,l)}if(Object.keys(o).length>0){let c=n.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[c]:o}}return{schemas:s}}let r=Lo({...e,processors:Vm});return Xe(t,r),zo(r,t),jo(r,t)}var Hm=class{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(e){this.ctx.counter=e}get seen(){return this.ctx.seen}constructor(e){let r=e?.target??"draft-2020-12";r==="draft-4"&&(r="draft-04"),r==="draft-7"&&(r="draft-07"),this.ctx=Lo({processors:Vm,target:r,...e?.metadata&&{metadata:e.metadata},...e?.unrepresentable&&{unrepresentable:e.unrepresentable},...e?.override&&{override:e.override},...e?.io&&{io:e.io}})}process(e,r={path:[],schemaPath:[]}){return Xe(e,this.ctx,r)}emit(e,r){r&&(r.cycles&&(this.ctx.cycles=r.cycles),r.reused&&(this.ctx.reused=r.reused),r.external&&(this.ctx.external=r.external)),zo(this.ctx,e);let i=jo(this.ctx,e),{"~standard":n,...o}=i;return o}};var V1={};var Fl={};ar(Fl,{ZodAny:()=>fh,ZodArray:()=>gh,ZodBase64:()=>ad,ZodBase64URL:()=>cd,ZodBigInt:()=>Qs,ZodBigIntFormat:()=>dd,ZodBoolean:()=>Js,ZodCIDRv4:()=>od,ZodCIDRv6:()=>sd,ZodCUID:()=>Zl,ZodCUID2:()=>Gl,ZodCatch:()=>Uh,ZodCodec:()=>wd,ZodCustom:()=>xc,ZodCustomStringFormat:()=>Ks,ZodDate:()=>wc,ZodDefault:()=>Ih,ZodDiscriminatedUnion:()=>wh,ZodE164:()=>ud,ZodEmail:()=>Hl,ZodEmoji:()=>Jl,ZodEnum:()=>Fs,ZodFile:()=>Eh,ZodFunction:()=>Fh,ZodGUID:()=>mc,ZodIPv4:()=>td,ZodIPv6:()=>nd,ZodIntersection:()=>bh,ZodJWT:()=>ld,ZodKSUID:()=>ed,ZodLazy:()=>Mh,ZodLiteral:()=>_h,ZodMAC:()=>ah,ZodMap:()=>Nh,ZodNaN:()=>Lh,ZodNanoID:()=>Ql,ZodNever:()=>mh,ZodNonOptional:()=>gd,ZodNull:()=>lh,ZodNullable:()=>Th,ZodNumber:()=>Hs,ZodNumberFormat:()=>Mo,ZodObject:()=>Zn,ZodOptional:()=>to,ZodPipe:()=>yd,ZodPrefault:()=>Oh,ZodPromise:()=>Wh,ZodReadonly:()=>zh,ZodRecord:()=>vc,ZodSet:()=>Ah,ZodString:()=>Vs,ZodStringFormat:()=>et,ZodSuccess:()=>Rh,ZodSymbol:()=>ch,ZodTemplateLiteral:()=>Bh,ZodTransform:()=>kh,ZodTuple:()=>xh,ZodType:()=>Ie,ZodULID:()=>Yl,ZodURL:()=>yc,ZodUUID:()=>Qn,ZodUndefined:()=>uh,ZodUnion:()=>bc,ZodUnknown:()=>ph,ZodVoid:()=>hh,ZodXID:()=>Xl,ZodXor:()=>yh,_ZodString:()=>Kl,_default:()=>$h,_function:()=>dA,any:()=>Fr,array:()=>ln,base64:()=>$N,base64url:()=>ON,bigint:()=>qN,boolean:()=>Vt,catch:()=>Dh,check:()=>fA,cidrv4:()=>TN,cidrv6:()=>IN,codec:()=>cA,cuid:()=>SN,cuid2:()=>NN,custom:()=>pA,date:()=>ki,describe:()=>mA,discriminatedUnion:()=>GN,e164:()=>CN,email:()=>Rr,emoji:()=>vN,enum:()=>Zs,file:()=>iA,float32:()=>zN,float64:()=>jN,function:()=>dA,guid:()=>pN,hash:()=>LN,hex:()=>DN,hostname:()=>UN,httpUrl:()=>bN,instanceof:()=>gA,int:()=>Vl,int32:()=>BN,int64:()=>WN,intersection:()=>vh,ipv4:()=>rd,ipv6:()=>id,json:()=>Sc,jwt:()=>PN,keyof:()=>JN,ksuid:()=>EN,lazy:()=>qh,literal:()=>nA,looseObject:()=>pd,looseRecord:()=>XN,mac:()=>kN,map:()=>eA,meta:()=>hA,nan:()=>aA,nanoid:()=>xN,nativeEnum:()=>rA,never:()=>fd,nonoptional:()=>Ph,null:()=>dh,nullable:()=>hc,nullish:()=>oA,number:()=>un,object:()=>ke,optional:()=>Nn,partialRecord:()=>YN,pipe:()=>gc,prefault:()=>Ch,preprocess:()=>wA,promise:()=>lA,readonly:()=>jh,record:()=>An,refine:()=>Vh,set:()=>tA,strictObject:()=>QN,string:()=>Y,stringFormat:()=>RN,stringbool:()=>yA,success:()=>sA,superRefine:()=>Kh,symbol:()=>VN,templateLiteral:()=>uA,transform:()=>hd,tuple:()=>Sh,uint32:()=>MN,uint64:()=>FN,ulid:()=>AN,undefined:()=>KN,union:()=>md,unknown:()=>Bo,url:()=>wN,uuid:()=>mN,uuidv4:()=>hN,uuidv6:()=>gN,uuidv7:()=>yN,void:()=>HN,xid:()=>_N,xor:()=>ZN});var Jm={};ar(Jm,{endsWith:()=>Ds,gt:()=>Jn,gte:()=>vr,includes:()=>Rs,length:()=>Do,lowercase:()=>Cs,lt:()=>Hn,lte:()=>Wr,maxLength:()=>Uo,maxSize:()=>Ro,mime:()=>Ls,minLength:()=>_i,minSize:()=>eo,multipleOf:()=>Xi,negative:()=>Ul,nonnegative:()=>Ll,nonpositive:()=>Dl,normalize:()=>zs,overwrite:()=>Sn,positive:()=>Rl,property:()=>zl,regex:()=>Os,size:()=>$s,slugify:()=>qs,startsWith:()=>Us,toLowerCase:()=>Bs,toUpperCase:()=>Ms,trim:()=>js,uppercase:()=>Ps});var Ws={};ar(Ws,{ZodISODate:()=>Ml,ZodISODateTime:()=>Bl,ZodISODuration:()=>Wl,ZodISOTime:()=>ql,date:()=>lN,datetime:()=>uN,duration:()=>fN,time:()=>dN});var Bl=M("ZodISODateTime",(t,e)=>{qx.init(t,e),et.init(t,e)});function uN(t){return WS(Bl,t)}var Ml=M("ZodISODate",(t,e)=>{Wx.init(t,e),et.init(t,e)});function lN(t){return FS(Ml,t)}var ql=M("ZodISOTime",(t,e)=>{Fx.init(t,e),et.init(t,e)});function dN(t){return VS(ql,t)}var Wl=M("ZodISODuration",(t,e)=>{Vx.init(t,e),et.init(t,e)});function fN(t){return KS(Wl,t)}var K1=(t,e)=>{Sl.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>oc(t,r)},flatten:{value:r=>ic(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,tc,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,tc,2)}},isEmpty:{get(){return t.issues.length===0}}})},H1=M("ZodError",K1),Pr=M("ZodError",K1,{Parent:Error});var Qm=sc(Pr),Zm=ac(Pr),Gm=cc(Pr),Ym=uc(Pr),Xm=Xp(Pr),eh=em(Pr),th=tm(Pr),rh=rm(Pr),nh=nm(Pr),ih=im(Pr),oh=om(Pr),sh=sm(Pr);var Ie=M("ZodType",(t,e)=>(Ae.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:pc(t,"input"),output:pc(t,"output")}}),t.toJSONSchema=A0(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(ee.mergeDefs(e,{checks:[...e.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),t.clone=(r,i)=>wr(t,r,i),t.brand=()=>t,t.register=((r,i)=>(r.add(t,i),t)),t.parse=(r,i)=>Qm(t,r,i,{callee:t.parse}),t.safeParse=(r,i)=>Gm(t,r,i),t.parseAsync=async(r,i)=>Zm(t,r,i,{callee:t.parseAsync}),t.safeParseAsync=async(r,i)=>Ym(t,r,i),t.spa=t.safeParseAsync,t.encode=(r,i)=>Xm(t,r,i),t.decode=(r,i)=>eh(t,r,i),t.encodeAsync=async(r,i)=>th(t,r,i),t.decodeAsync=async(r,i)=>rh(t,r,i),t.safeEncode=(r,i)=>nh(t,r,i),t.safeDecode=(r,i)=>ih(t,r,i),t.safeEncodeAsync=async(r,i)=>oh(t,r,i),t.safeDecodeAsync=async(r,i)=>sh(t,r,i),t.refine=(r,i)=>t.check(Vh(r,i)),t.superRefine=r=>t.check(Kh(r)),t.overwrite=r=>t.check(Sn(r)),t.optional=()=>Nn(t),t.nullable=()=>hc(t),t.nullish=()=>Nn(hc(t)),t.nonoptional=r=>Ph(t,r),t.array=()=>ln(t),t.or=r=>md([t,r]),t.and=r=>vh(t,r),t.transform=r=>gc(t,hd(r)),t.default=r=>$h(t,r),t.prefault=r=>Ch(t,r),t.catch=r=>Dh(t,r),t.pipe=r=>gc(t,r),t.readonly=()=>jh(t),t.describe=r=>{let i=t.clone();return br.add(i,{description:r}),i},Object.defineProperty(t,"description",{get(){return br.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return br.get(t);let i=t.clone();return br.add(i,r[0]),i},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Kl=M("_ZodString",(t,e)=>{Is.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>_0(t,i,n,o);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...i)=>t.check(Os(...i)),t.includes=(...i)=>t.check(Rs(...i)),t.startsWith=(...i)=>t.check(Us(...i)),t.endsWith=(...i)=>t.check(Ds(...i)),t.min=(...i)=>t.check(_i(...i)),t.max=(...i)=>t.check(Uo(...i)),t.length=(...i)=>t.check(Do(...i)),t.nonempty=(...i)=>t.check(_i(1,...i)),t.lowercase=i=>t.check(Cs(i)),t.uppercase=i=>t.check(Ps(i)),t.trim=()=>t.check(js()),t.normalize=(...i)=>t.check(zs(...i)),t.toLowerCase=()=>t.check(Bs()),t.toUpperCase=()=>t.check(Ms()),t.slugify=()=>t.check(qs())}),Vs=M("ZodString",(t,e)=>{Is.init(t,e),Kl.init(t,e),t.email=r=>t.check(Am(Hl,r)),t.url=r=>t.check(Pl(yc,r)),t.jwt=r=>t.check(Wm(ld,r)),t.emoji=r=>t.check(Im(Jl,r)),t.guid=r=>t.check(Cl(mc,r)),t.uuid=r=>t.check(_m(Qn,r)),t.uuidv4=r=>t.check(Em(Qn,r)),t.uuidv6=r=>t.check(km(Qn,r)),t.uuidv7=r=>t.check(Tm(Qn,r)),t.nanoid=r=>t.check($m(Ql,r)),t.guid=r=>t.check(Cl(mc,r)),t.cuid=r=>t.check(Om(Zl,r)),t.cuid2=r=>t.check(Cm(Gl,r)),t.ulid=r=>t.check(Pm(Yl,r)),t.base64=r=>t.check(Bm(ad,r)),t.base64url=r=>t.check(Mm(cd,r)),t.xid=r=>t.check(Rm(Xl,r)),t.ksuid=r=>t.check(Um(ed,r)),t.ipv4=r=>t.check(Dm(td,r)),t.ipv6=r=>t.check(Lm(nd,r)),t.cidrv4=r=>t.check(zm(od,r)),t.cidrv6=r=>t.check(jm(sd,r)),t.e164=r=>t.check(qm(ud,r)),t.datetime=r=>t.check(uN(r)),t.date=r=>t.check(lN(r)),t.time=r=>t.check(dN(r)),t.duration=r=>t.check(fN(r))});function Y(t){return BS(Vs,t)}var et=M("ZodStringFormat",(t,e)=>{it.init(t,e),Kl.init(t,e)}),Hl=M("ZodEmail",(t,e)=>{Px.init(t,e),et.init(t,e)});function Rr(t){return Am(Hl,t)}var mc=M("ZodGUID",(t,e)=>{Ox.init(t,e),et.init(t,e)});function pN(t){return Cl(mc,t)}var Qn=M("ZodUUID",(t,e)=>{Cx.init(t,e),et.init(t,e)});function mN(t){return _m(Qn,t)}function hN(t){return Em(Qn,t)}function gN(t){return km(Qn,t)}function yN(t){return Tm(Qn,t)}var yc=M("ZodURL",(t,e)=>{Rx.init(t,e),et.init(t,e)});function wN(t){return Pl(yc,t)}function bN(t){return Pl(yc,{protocol:/^https?$/,hostname:cn.domain,...ee.normalizeParams(t)})}var Jl=M("ZodEmoji",(t,e)=>{Ux.init(t,e),et.init(t,e)});function vN(t){return Im(Jl,t)}var Ql=M("ZodNanoID",(t,e)=>{Dx.init(t,e),et.init(t,e)});function xN(t){return $m(Ql,t)}var Zl=M("ZodCUID",(t,e)=>{Lx.init(t,e),et.init(t,e)});function SN(t){return Om(Zl,t)}var Gl=M("ZodCUID2",(t,e)=>{zx.init(t,e),et.init(t,e)});function NN(t){return Cm(Gl,t)}var Yl=M("ZodULID",(t,e)=>{jx.init(t,e),et.init(t,e)});function AN(t){return Pm(Yl,t)}var Xl=M("ZodXID",(t,e)=>{Bx.init(t,e),et.init(t,e)});function _N(t){return Rm(Xl,t)}var ed=M("ZodKSUID",(t,e)=>{Mx.init(t,e),et.init(t,e)});function EN(t){return Um(ed,t)}var td=M("ZodIPv4",(t,e)=>{Kx.init(t,e),et.init(t,e)});function rd(t){return Dm(td,t)}var ah=M("ZodMAC",(t,e)=>{Jx.init(t,e),et.init(t,e)});function kN(t){return qS(ah,t)}var nd=M("ZodIPv6",(t,e)=>{Hx.init(t,e),et.init(t,e)});function id(t){return Lm(nd,t)}var od=M("ZodCIDRv4",(t,e)=>{Qx.init(t,e),et.init(t,e)});function TN(t){return zm(od,t)}var sd=M("ZodCIDRv6",(t,e)=>{Zx.init(t,e),et.init(t,e)});function IN(t){return jm(sd,t)}var ad=M("ZodBase64",(t,e)=>{Yx.init(t,e),et.init(t,e)});function $N(t){return Bm(ad,t)}var cd=M("ZodBase64URL",(t,e)=>{Xx.init(t,e),et.init(t,e)});function ON(t){return Mm(cd,t)}var ud=M("ZodE164",(t,e)=>{eS.init(t,e),et.init(t,e)});function CN(t){return qm(ud,t)}var ld=M("ZodJWT",(t,e)=>{tS.init(t,e),et.init(t,e)});function PN(t){return Wm(ld,t)}var Ks=M("ZodCustomStringFormat",(t,e)=>{rS.init(t,e),et.init(t,e)});function RN(t,e,r={}){return fc(Ks,t,e,r)}function UN(t){return fc(Ks,"hostname",cn.hostname,t)}function DN(t){return fc(Ks,"hex",cn.hex,t)}function LN(t,e){let r=e?.enc??"hex",i=`${t}_${r}`,n=cn[i];if(!n)throw new Error(`Unrecognized hash format: ${i}`);return fc(Ks,i,n,e)}var Hs=M("ZodNumber",(t,e)=>{hm.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>E0(t,i,n,o),t.gt=(i,n)=>t.check(Jn(i,n)),t.gte=(i,n)=>t.check(vr(i,n)),t.min=(i,n)=>t.check(vr(i,n)),t.lt=(i,n)=>t.check(Hn(i,n)),t.lte=(i,n)=>t.check(Wr(i,n)),t.max=(i,n)=>t.check(Wr(i,n)),t.int=i=>t.check(Vl(i)),t.safe=i=>t.check(Vl(i)),t.positive=i=>t.check(Jn(0,i)),t.nonnegative=i=>t.check(vr(0,i)),t.negative=i=>t.check(Hn(0,i)),t.nonpositive=i=>t.check(Wr(0,i)),t.multipleOf=(i,n)=>t.check(Xi(i,n)),t.step=(i,n)=>t.check(Xi(i,n)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function un(t){return HS(Hs,t)}var Mo=M("ZodNumberFormat",(t,e)=>{nS.init(t,e),Hs.init(t,e)});function Vl(t){return QS(Mo,t)}function zN(t){return ZS(Mo,t)}function jN(t){return GS(Mo,t)}function BN(t){return YS(Mo,t)}function MN(t){return XS(Mo,t)}var Js=M("ZodBoolean",(t,e)=>{El.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>k0(t,r,i,n)});function Vt(t){return e0(Js,t)}var Qs=M("ZodBigInt",(t,e)=>{gm.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>T0(t,i,n,o),t.gte=(i,n)=>t.check(vr(i,n)),t.min=(i,n)=>t.check(vr(i,n)),t.gt=(i,n)=>t.check(Jn(i,n)),t.gte=(i,n)=>t.check(vr(i,n)),t.min=(i,n)=>t.check(vr(i,n)),t.lt=(i,n)=>t.check(Hn(i,n)),t.lte=(i,n)=>t.check(Wr(i,n)),t.max=(i,n)=>t.check(Wr(i,n)),t.positive=i=>t.check(Jn(BigInt(0),i)),t.negative=i=>t.check(Hn(BigInt(0),i)),t.nonpositive=i=>t.check(Wr(BigInt(0),i)),t.nonnegative=i=>t.check(vr(BigInt(0),i)),t.multipleOf=(i,n)=>t.check(Xi(i,n));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});function qN(t){return r0(Qs,t)}var dd=M("ZodBigIntFormat",(t,e)=>{iS.init(t,e),Qs.init(t,e)});function WN(t){return i0(dd,t)}function FN(t){return o0(dd,t)}var ch=M("ZodSymbol",(t,e)=>{oS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>I0(t,r,i,n)});function VN(t){return s0(ch,t)}var uh=M("ZodUndefined",(t,e)=>{sS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>O0(t,r,i,n)});function KN(t){return a0(uh,t)}var lh=M("ZodNull",(t,e)=>{aS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>$0(t,r,i,n)});function dh(t){return c0(lh,t)}var fh=M("ZodAny",(t,e)=>{cS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>R0(t,r,i,n)});function Fr(){return u0(fh)}var ph=M("ZodUnknown",(t,e)=>{uS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>U0(t,r,i,n)});function Bo(){return l0(ph)}var mh=M("ZodNever",(t,e)=>{lS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>P0(t,r,i,n)});function fd(t){return d0(mh,t)}var hh=M("ZodVoid",(t,e)=>{dS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>C0(t,r,i,n)});function HN(t){return f0(hh,t)}var wc=M("ZodDate",(t,e)=>{fS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>D0(t,i,n,o),t.min=(i,n)=>t.check(vr(i,n)),t.max=(i,n)=>t.check(Wr(i,n));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});function ki(t){return p0(wc,t)}var gh=M("ZodArray",(t,e)=>{pS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>J0(t,r,i,n),t.element=e.element,t.min=(r,i)=>t.check(_i(r,i)),t.nonempty=r=>t.check(_i(1,r)),t.max=(r,i)=>t.check(Uo(r,i)),t.length=(r,i)=>t.check(Do(r,i)),t.unwrap=()=>t.element});function ln(t,e){return g0(gh,t,e)}function JN(t){let e=t._zod.def.shape;return Zs(Object.keys(e))}var Zn=M("ZodObject",(t,e)=>{mS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Q0(t,r,i,n),ee.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>Zs(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Bo()}),t.loose=()=>t.clone({...t._zod.def,catchall:Bo()}),t.strict=()=>t.clone({...t._zod.def,catchall:fd()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>ee.extend(t,r),t.safeExtend=r=>ee.safeExtend(t,r),t.merge=r=>ee.merge(t,r),t.pick=r=>ee.pick(t,r),t.omit=r=>ee.omit(t,r),t.partial=(...r)=>ee.partial(to,t,r[0]),t.required=(...r)=>ee.required(gd,t,r[0])});function ke(t,e){let r={type:"object",shape:t??{},...ee.normalizeParams(e)};return new Zn(r)}function QN(t,e){return new Zn({type:"object",shape:t,catchall:fd(),...ee.normalizeParams(e)})}function pd(t,e){return new Zn({type:"object",shape:t,catchall:Bo(),...ee.normalizeParams(e)})}var bc=M("ZodUnion",(t,e)=>{kl.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Km(t,r,i,n),t.options=e.options});function md(t,e){return new bc({type:"union",options:t,...ee.normalizeParams(e)})}var yh=M("ZodXor",(t,e)=>{bc.init(t,e),hS.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Km(t,r,i,n),t.options=e.options});function ZN(t,e){return new yh({type:"union",options:t,inclusive:!1,...ee.normalizeParams(e)})}var wh=M("ZodDiscriminatedUnion",(t,e)=>{bc.init(t,e),gS.init(t,e)});function GN(t,e,r){return new wh({type:"union",options:e,discriminator:t,...ee.normalizeParams(r)})}var bh=M("ZodIntersection",(t,e)=>{yS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Z0(t,r,i,n)});function vh(t,e){return new bh({type:"intersection",left:t,right:e})}var xh=M("ZodTuple",(t,e)=>{ym.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>G0(t,r,i,n),t.rest=r=>t.clone({...t._zod.def,rest:r})});function Sh(t,e,r){let i=e instanceof Ae,n=i?r:e,o=i?e:null;return new xh({type:"tuple",items:t,rest:o,...ee.normalizeParams(n)})}var vc=M("ZodRecord",(t,e)=>{wS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Y0(t,r,i,n),t.keyType=e.keyType,t.valueType=e.valueType});function An(t,e,r){return new vc({type:"record",keyType:t,valueType:e,...ee.normalizeParams(r)})}function YN(t,e,r){let i=wr(t);return i._zod.values=void 0,new vc({type:"record",keyType:i,valueType:e,...ee.normalizeParams(r)})}function XN(t,e,r){return new vc({type:"record",keyType:t,valueType:e,mode:"loose",...ee.normalizeParams(r)})}var Nh=M("ZodMap",(t,e)=>{bS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>K0(t,r,i,n),t.keyType=e.keyType,t.valueType=e.valueType});function eA(t,e,r){return new Nh({type:"map",keyType:t,valueType:e,...ee.normalizeParams(r)})}var Ah=M("ZodSet",(t,e)=>{vS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>H0(t,r,i,n),t.min=(...r)=>t.check(eo(...r)),t.nonempty=r=>t.check(eo(1,r)),t.max=(...r)=>t.check(Ro(...r)),t.size=(...r)=>t.check($s(...r))});function tA(t,e){return new Ah({type:"set",valueType:t,...ee.normalizeParams(e)})}var Fs=M("ZodEnum",(t,e)=>{xS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>L0(t,i,n,o),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(i,n)=>{let o={};for(let s of i)if(r.has(s))o[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Fs({...e,checks:[],...ee.normalizeParams(n),entries:o})},t.exclude=(i,n)=>{let o={...e.entries};for(let s of i)if(r.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Fs({...e,checks:[],...ee.normalizeParams(n),entries:o})}});function Zs(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(i=>[i,i])):t;return new Fs({type:"enum",entries:r,...ee.normalizeParams(e)})}function rA(t,e){return new Fs({type:"enum",entries:t,...ee.normalizeParams(e)})}var _h=M("ZodLiteral",(t,e)=>{SS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>z0(t,r,i,n),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function nA(t,e){return new _h({type:"literal",values:Array.isArray(t)?t:[t],...ee.normalizeParams(e)})}var Eh=M("ZodFile",(t,e)=>{NS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>M0(t,r,i,n),t.min=(r,i)=>t.check(eo(r,i)),t.max=(r,i)=>t.check(Ro(r,i)),t.mime=(r,i)=>t.check(Ls(Array.isArray(r)?r:[r],i))});function iA(t){return y0(Eh,t)}var kh=M("ZodTransform",(t,e)=>{AS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>V0(t,r,i,n),t._zod.parse=(r,i)=>{if(i.direction==="backward")throw new To(t.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(ee.issue(o,r.value,e));else{let s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),r.issues.push(ee.issue(s))}};let n=e.transform(r.value,r);return n instanceof Promise?n.then(o=>(r.value=o,r)):(r.value=n,r)}});function hd(t){return new kh({type:"transform",transform:t})}var to=M("ZodOptional",(t,e)=>{_S.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>aN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function Nn(t){return new to({type:"optional",innerType:t})}var Th=M("ZodNullable",(t,e)=>{ES.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>X0(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function hc(t){return new Th({type:"nullable",innerType:t})}function oA(t){return Nn(hc(t))}var Ih=M("ZodDefault",(t,e)=>{kS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>tN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function $h(t,e){return new Ih({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():ee.shallowClone(e)}})}var Oh=M("ZodPrefault",(t,e)=>{TS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>rN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function Ch(t,e){return new Oh({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():ee.shallowClone(e)}})}var gd=M("ZodNonOptional",(t,e)=>{IS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>eN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function Ph(t,e){return new gd({type:"nonoptional",innerType:t,...ee.normalizeParams(e)})}var Rh=M("ZodSuccess",(t,e)=>{$S.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>q0(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function sA(t){return new Rh({type:"success",innerType:t})}var Uh=M("ZodCatch",(t,e)=>{OS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>nN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Dh(t,e){return new Uh({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}var Lh=M("ZodNaN",(t,e)=>{CS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>j0(t,r,i,n)});function aA(t){return h0(Lh,t)}var yd=M("ZodPipe",(t,e)=>{PS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>iN(t,r,i,n),t.in=e.in,t.out=e.out});function gc(t,e){return new yd({type:"pipe",in:t,out:e})}var wd=M("ZodCodec",(t,e)=>{yd.init(t,e),Tl.init(t,e)});function cA(t,e,r){return new wd({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}var zh=M("ZodReadonly",(t,e)=>{RS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>oN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function jh(t){return new zh({type:"readonly",innerType:t})}var Bh=M("ZodTemplateLiteral",(t,e)=>{US.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>B0(t,r,i,n)});function uA(t,e){return new Bh({type:"template_literal",parts:t,...ee.normalizeParams(e)})}var Mh=M("ZodLazy",(t,e)=>{zS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>cN(t,r,i,n),t.unwrap=()=>t._zod.def.getter()});function qh(t){return new Mh({type:"lazy",getter:t})}var Wh=M("ZodPromise",(t,e)=>{LS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>sN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function lA(t){return new Wh({type:"promise",innerType:t})}var Fh=M("ZodFunction",(t,e)=>{DS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>F0(t,r,i,n)});function dA(t){return new Fh({type:"function",input:Array.isArray(t?.input)?Sh(t?.input):t?.input??ln(Bo()),output:t?.output??Bo()})}var xc=M("ZodCustom",(t,e)=>{jS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>W0(t,r,i,n)});function fA(t){let e=new lt({check:"custom"});return e._zod.check=t,e}function pA(t,e){return w0(xc,t??(()=>!0),e)}function Vh(t,e={}){return b0(xc,t,e)}function Kh(t){return v0(t)}var mA=x0,hA=S0;function gA(t,e={error:`Input not instance of ${t.name}`}){let r=new xc({type:"custom",check:"custom",fn:i=>i instanceof t,abort:!0,...ee.normalizeParams(e)});return r._zod.bag.Class=t,r}var yA=(...t)=>N0({Codec:wd,Boolean:Js,String:Vs},...t);function Sc(t){let e=qh(()=>md([Y(t),un(),Vt(),dh(),ln(e),An(Y(),e)]));return e}function wA(t,e){return gc(hd(t),e)}var J1={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function Q1(t){Tt({customError:t})}function Z1(){return Tt().customError}var Hh;Hh||(Hh={});var ae={...Fl,...Jm,iso:Ws};function MB(t,e){let r=t.$schema;return r==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":r==="http://json-schema.org/draft-07/schema#"?"draft-7":r==="http://json-schema.org/draft-04/schema#"?"draft-4":e??"draft-2020-12"}function qB(t,e){if(!t.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");let r=t.slice(1).split("/").filter(Boolean);if(r.length===0)return e.rootSchema;let i=e.version==="draft-2020-12"?"$defs":"definitions";if(r[0]===i){let n=r[1];if(!n||!e.defs[n])throw new Error(`Reference not found: ${t}`);return e.defs[n]}throw new Error(`Reference not found: ${t}`)}function G1(t,e){if(t.not!==void 0){if(typeof t.not=="object"&&Object.keys(t.not).length===0)return ae.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(t.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(t.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(t.if!==void 0||t.then!==void 0||t.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(t.dependentSchemas!==void 0||t.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(t.$ref){let n=t.$ref;if(e.refs.has(n))return e.refs.get(n);if(e.processing.has(n))return ae.lazy(()=>{if(!e.refs.has(n))throw new Error(`Circular reference not resolved: ${n}`);return e.refs.get(n)});e.processing.add(n);let o=qB(n,e),s=xr(o,e);return e.refs.set(n,s),e.processing.delete(n),s}if(t.enum!==void 0){let n=t.enum;if(e.version==="openapi-3.0"&&t.nullable===!0&&n.length===1&&n[0]===null)return ae.null();if(n.length===0)return ae.never();if(n.length===1)return ae.literal(n[0]);if(n.every(s=>typeof s=="string"))return ae.enum(n);let o=n.map(s=>ae.literal(s));return o.length<2?o[0]:ae.union([o[0],o[1],...o.slice(2)])}if(t.const!==void 0)return ae.literal(t.const);let r=t.type;if(Array.isArray(r)){let n=r.map(o=>{let s={...t,type:o};return G1(s,e)});return n.length===0?ae.never():n.length===1?n[0]:ae.union(n)}if(!r)return ae.any();let i;switch(r){case"string":{let n=ae.string();if(t.format){let o=t.format;o==="email"?n=n.check(ae.email()):o==="uri"||o==="uri-reference"?n=n.check(ae.url()):o==="uuid"||o==="guid"?n=n.check(ae.uuid()):o==="date-time"?n=n.check(ae.iso.datetime()):o==="date"?n=n.check(ae.iso.date()):o==="time"?n=n.check(ae.iso.time()):o==="duration"?n=n.check(ae.iso.duration()):o==="ipv4"?n=n.check(ae.ipv4()):o==="ipv6"?n=n.check(ae.ipv6()):o==="mac"?n=n.check(ae.mac()):o==="cidr"?n=n.check(ae.cidrv4()):o==="cidr-v6"?n=n.check(ae.cidrv6()):o==="base64"?n=n.check(ae.base64()):o==="base64url"?n=n.check(ae.base64url()):o==="e164"?n=n.check(ae.e164()):o==="jwt"?n=n.check(ae.jwt()):o==="emoji"?n=n.check(ae.emoji()):o==="nanoid"?n=n.check(ae.nanoid()):o==="cuid"?n=n.check(ae.cuid()):o==="cuid2"?n=n.check(ae.cuid2()):o==="ulid"?n=n.check(ae.ulid()):o==="xid"?n=n.check(ae.xid()):o==="ksuid"&&(n=n.check(ae.ksuid()))}typeof t.minLength=="number"&&(n=n.min(t.minLength)),typeof t.maxLength=="number"&&(n=n.max(t.maxLength)),t.pattern&&(n=n.regex(new RegExp(t.pattern))),i=n;break}case"number":case"integer":{let n=r==="integer"?ae.number().int():ae.number();typeof t.minimum=="number"&&(n=n.min(t.minimum)),typeof t.maximum=="number"&&(n=n.max(t.maximum)),typeof t.exclusiveMinimum=="number"?n=n.gt(t.exclusiveMinimum):t.exclusiveMinimum===!0&&typeof t.minimum=="number"&&(n=n.gt(t.minimum)),typeof t.exclusiveMaximum=="number"?n=n.lt(t.exclusiveMaximum):t.exclusiveMaximum===!0&&typeof t.maximum=="number"&&(n=n.lt(t.maximum)),typeof t.multipleOf=="number"&&(n=n.multipleOf(t.multipleOf)),i=n;break}case"boolean":{i=ae.boolean();break}case"null":{i=ae.null();break}case"object":{let n={},o=t.properties||{},s=new Set(t.required||[]);for(let[c,u]of Object.entries(o)){let l=xr(u,e);n[c]=s.has(c)?l:l.optional()}if(t.propertyNames){let c=xr(t.propertyNames,e),u=t.additionalProperties&&typeof t.additionalProperties=="object"?xr(t.additionalProperties,e):ae.any();if(Object.keys(n).length===0){i=ae.record(c,u);break}let l=ae.object(n).passthrough(),f=ae.looseRecord(c,u);i=ae.intersection(l,f);break}if(t.patternProperties){let c=t.patternProperties,u=Object.keys(c),l=[];for(let d of u){let m=xr(c[d],e),h=ae.string().regex(new RegExp(d));l.push(ae.looseRecord(h,m))}let f=[];if(Object.keys(n).length>0&&f.push(ae.object(n).passthrough()),f.push(...l),f.length===0)i=ae.object({}).passthrough();else if(f.length===1)i=f[0];else{let d=ae.intersection(f[0],f[1]);for(let m=2;m<f.length;m++)d=ae.intersection(d,f[m]);i=d}break}let a=ae.object(n);t.additionalProperties===!1?i=a.strict():typeof t.additionalProperties=="object"?i=a.catchall(xr(t.additionalProperties,e)):i=a.passthrough();break}case"array":{let n=t.prefixItems,o=t.items;if(n&&Array.isArray(n)){let s=n.map(c=>xr(c,e)),a=o&&typeof o=="object"&&!Array.isArray(o)?xr(o,e):void 0;a?i=ae.tuple(s).rest(a):i=ae.tuple(s),typeof t.minItems=="number"&&(i=i.check(ae.minLength(t.minItems))),typeof t.maxItems=="number"&&(i=i.check(ae.maxLength(t.maxItems)))}else if(Array.isArray(o)){let s=o.map(c=>xr(c,e)),a=t.additionalItems&&typeof t.additionalItems=="object"?xr(t.additionalItems,e):void 0;a?i=ae.tuple(s).rest(a):i=ae.tuple(s),typeof t.minItems=="number"&&(i=i.check(ae.minLength(t.minItems))),typeof t.maxItems=="number"&&(i=i.check(ae.maxLength(t.maxItems)))}else if(o!==void 0){let s=xr(o,e),a=ae.array(s);typeof t.minItems=="number"&&(a=a.min(t.minItems)),typeof t.maxItems=="number"&&(a=a.max(t.maxItems)),i=a}else i=ae.array(ae.any());break}default:throw new Error(`Unsupported type: ${r}`)}return t.description&&(i=i.describe(t.description)),t.default!==void 0&&(i=i.default(t.default)),i}function xr(t,e){if(typeof t=="boolean")return t?ae.any():ae.never();let r=G1(t,e),i=t.type||t.enum!==void 0||t.const!==void 0;if(t.anyOf&&Array.isArray(t.anyOf)){let n=t.anyOf.map(s=>xr(s,e)),o=ae.union(n);r=i?ae.intersection(r,o):o}if(t.oneOf&&Array.isArray(t.oneOf)){let n=t.oneOf.map(s=>xr(s,e)),o=ae.xor(n);r=i?ae.intersection(r,o):o}if(t.allOf&&Array.isArray(t.allOf))if(t.allOf.length===0)r=i?r:ae.any();else{let n=i?r:xr(t.allOf[0],e),o=i?0:1;for(let s=o;s<t.allOf.length;s++)n=ae.intersection(n,xr(t.allOf[s],e));r=n}return t.nullable===!0&&e.version==="openapi-3.0"&&(r=ae.nullable(r)),t.readOnly===!0&&(r=ae.readonly(r)),r}function bA(t,e){if(typeof t=="boolean")return t?ae.any():ae.never();let r=MB(t,e?.defaultTarget),i=t.$defs||t.definitions||{};return xr(t,{version:r,defs:i,refs:new Map,processing:new Set,rootSchema:t})}var _n={};ar(_n,{bigint:()=>KB,boolean:()=>VB,date:()=>HB,number:()=>FB,string:()=>WB});function WB(t){return MS(Vs,t)}function FB(t){return JS(Hs,t)}function VB(t){return t0(Js,t)}function KB(t){return n0(Qs,t)}function HB(t){return m0(wc,t)}Tt(wm());var JB=me;function QB(){let t=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return t===void 0?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(t,"writable")?t.writable:t.set!==void 0}function Y1(t){let e=t.split(`
    at `);return e.length<=1?t:(e.splice(1,1),e.join(`
    at `))}function X1(t,e){class r extends t{#e;constructor(...n){if(QB()){let s=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...n),Error.stackTraceLimit=s}else super(...n);let o=new Error().stack;o&&(this.#e=Y1(o.replace(/^Error/,this.name)))}get errorStack(){return this.#e}}return Object.defineProperty(r.prototype,"constructor",{get(){return e},enumerable:!1,configurable:!0}),r}var eP={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},tP=class extends Error{constructor(t="INTERNAL_SERVER_ERROR",e=void 0,r={},i=typeof t=="number"?t:eP[t]){super(e?.message,e?.cause?{cause:e.cause}:void 0),this.status=t,this.body=e,this.headers=r,this.statusCode=i,this.name="APIError",this.status=t,this.headers=r,this.statusCode=i,this.body=e?{code:e?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...e}:void 0}},bd=class extends tP{constructor(t,e){super(400,{message:t,code:"VALIDATION_ERROR"}),this.message=t,this.issues=e,this.issues=e}},Jh=class extends Error{constructor(t){super(t),this.name="BetterCallError"}},V=X1(tP,Error);var ZB=/^application\/([a-z0-9.+-]*\+)?json/i;async function rP(t,e){let r=t.headers.get("content-type")||"",i=r.toLowerCase();if(t.body){if(e&&e.length>0&&!e.some(n=>{let o=i.split(";")[0].trim(),s=n.toLowerCase().trim();return o===s||o.includes(s)}))throw i?new V(415,{message:`Content-Type "${r}" is not allowed. Allowed types: ${e.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"}):new V(415,{message:`Content-Type is required. Allowed types: ${e.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});if(ZB.test(i))return await t.json();if(i.includes("application/x-www-form-urlencoded")){let n=await t.formData(),o={};return n.forEach((s,a)=>{o[a]=s.toString()}),o}if(i.includes("multipart/form-data")){let n=await t.formData(),o={};return n.forEach((s,a)=>{o[a]=s}),o}return i.includes("text/plain")?await t.text():i.includes("application/octet-stream")?await t.arrayBuffer():i.includes("application/pdf")||i.includes("image/")||i.includes("video/")?await t.blob():i.includes("application/stream")||t.body instanceof ReadableStream?t.body:await t.text()}}function Gs(t){return t instanceof V||t?.name==="APIError"}function nP(t){try{return t.includes("%")?decodeURIComponent(t):t}catch{return t}}async function iP(t){try{return{data:await t,error:null}}catch(e){return{data:null,error:e}}}function GB(t){if(t===void 0)return!1;let e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}function YB(t,e,r){let i=0,n=new WeakMap;return JSON.stringify(t,(s,a)=>{if(typeof a=="bigint")return a.toString();if(typeof a=="object"&&a!==null){if(n.has(a))return`[Circular ref-${n.get(a)}]`;n.set(a,i++)}return e?e(s,a):a},r)}function XB(t){return!t||typeof t!="object"?!1:"_flag"in t&&t._flag==="json"}function Gn(t,e){if(t instanceof Response)return e?.headers instanceof Headers&&e.headers.forEach((n,o)=>{t.headers.set(o,n)}),t;if(XB(t)){let n=t.body,o=t.routerResponse;if(o instanceof Response)return o;let s=new Headers;if(o?.headers){let a=new Headers(o.headers);for(let[c,u]of a.entries())a.set(c,u)}if(t.headers)for(let[a,c]of new Headers(t.headers).entries())s.set(a,c);if(e?.headers)for(let[a,c]of new Headers(e.headers).entries())s.set(a,c);return s.set("Content-Type","application/json"),new Response(JSON.stringify(n),{...o,headers:s,status:t.status??e?.status??o?.status,statusText:e?.statusText??o?.statusText})}if(Gs(t))return Gn(t.body,{status:e?.status??t.statusCode,statusText:t.status.toString(),headers:e?.headers||t.headers});let r=t,i=new Headers(e?.headers);return t?typeof t=="string"?(r=t,i.set("Content-Type","text/plain")):t instanceof ArrayBuffer||ArrayBuffer.isView(t)?(r=t,i.set("Content-Type","application/octet-stream")):t instanceof Blob?(r=t,i.set("Content-Type",t.type||"application/octet-stream")):t instanceof FormData?r=t:t instanceof URLSearchParams?(r=t,i.set("Content-Type","application/x-www-form-urlencoded")):t instanceof ReadableStream?(r=t,i.set("Content-Type","application/octet-stream")):GB(t)&&(r=YB(t),i.set("Content-Type","application/json")):(t===null&&(r=JSON.stringify(null)),i.set("content-type","application/json")),new Response(r,{...e,headers:i})}var vA={name:"HMAC",hash:"SHA-256"},xA=async t=>{let e=typeof t=="string"?new TextEncoder().encode(t):t;return await Vn().importKey("raw",e,vA,!1,["sign","verify"])},oP=async(t,e,r)=>{try{let i=atob(t),n=new Uint8Array(i.length);for(let o=0,s=i.length;o<s;o++)n[o]=i.charCodeAt(o);return await Vn().verify(vA,r,n,new TextEncoder().encode(e))}catch{return!1}},eM=async(t,e)=>{let r=await xA(e),i=await Vn().sign(vA.name,r,new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(i)))},sP=async(t,e)=>{let r=await eM(t,e);return t=`${t}.${r}`,t=encodeURIComponent(t),t};var Qh=(t,e)=>{let r=t;if(e)if(e==="secure")r="__Secure-"+t;else if(e==="host")r="__Host-"+t;else return;return r};function SA(t){if(typeof t!="string")throw new TypeError("argument str must be a string");let e=new Map,r=0;for(;r<t.length;){let i=t.indexOf("=",r);if(i===-1)break;let n=t.indexOf(";",r);if(n===-1)n=t.length;else if(n<i){r=t.lastIndexOf(";",i-1)+1;continue}let o=t.slice(r,i).trim();if(!e.has(o)){let s=t.slice(i+1,n).trim();s.codePointAt(0)===34&&(s=s.slice(1,-1)),e.set(o,nP(s))}r=n+1}return e}var aP=(t,e,r={})=>{let i;if(r?.prefix==="secure"?i=`${`__Secure-${t}`}=${e}`:r?.prefix==="host"?i=`${`__Host-${t}`}=${e}`:i=`${t}=${e}`,t.startsWith("__Secure-")&&!r.secure&&(r.secure=!0),t.startsWith("__Host-")&&(r.secure||(r.secure=!0),r.path!=="/"&&(r.path="/"),r.domain&&(r.domain=void 0)),r&&typeof r.maxAge=="number"&&r.maxAge>=0){if(r.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");i+=`; Max-Age=${Math.floor(r.maxAge)}`}if(r.domain&&r.prefix!=="host"&&(i+=`; Domain=${r.domain}`),r.path&&(i+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");i+=`; Expires=${r.expires.toUTCString()}`}return r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite&&(i+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.partitioned&&(r.secure||(r.secure=!0),i+="; Partitioned"),i},NA=(t,e,r)=>(e=encodeURIComponent(e),aP(t,e,r)),AA=async(t,e,r,i)=>(e=await sP(e,r),aP(t,e,i));async function uP(t,e={}){let r={body:e.body,query:e.query};if(t.body){let i=await t.body["~standard"].validate(e.body);if(i.issues)return{data:null,error:cP(i.issues,"body")};r.body=i.value}if(t.query){let i=await t.query["~standard"].validate(e.query);if(i.issues)return{data:null,error:cP(i.issues,"query")};r.query=i.value}return t.requireHeaders&&!e.headers?{data:null,error:{message:"Headers is required",issues:[]}}:t.requireRequest&&!e.request?{data:null,error:{message:"Request is required",issues:[]}}:{data:r,error:null}}function cP(t,e){return{message:t.map(r=>`[${r.path?.length?`${e}.`+r.path.map(i=>typeof i=="object"?i.key:i).join("."):e}] ${r.message}`).join("; "),issues:t}}var vd=async(t,{options:e,path:r})=>{let i=new Headers,n,{data:o,error:s}=await uP(e,t);if(s)throw new bd(s.message,s.issues);let a="headers"in t?t.headers instanceof Headers?t.headers:new Headers(t.headers):"request"in t&&t.request instanceof Request?t.request.headers:null,c=a?.get("cookie"),u=c?SA(c):void 0,l={...t,body:o.body,query:o.query,path:t.path||r||"virtual:",context:"context"in t&&t.context?t.context:{},returned:void 0,headers:t?.headers,request:t?.request,params:"params"in t?t.params:void 0,method:t.method??(Array.isArray(e.method)?e.method[0]:e.method==="*"?"GET":e.method),setHeader:(f,d)=>{i.set(f,d)},getHeader:f=>a?a.get(f):null,getCookie:(f,d)=>{let m=Qh(f,d);return m&&u?.get(m)||null},getSignedCookie:async(f,d,m)=>{let h=Qh(f,m);if(!h)return null;let p=u?.get(h);if(!p)return null;let y=p.lastIndexOf(".");if(y<1)return null;let b=p.substring(0,y),N=p.substring(y+1);return N.length!==44||!N.endsWith("=")?null:await oP(N,b,await xA(d))?b:!1},setCookie:(f,d,m)=>{let h=NA(f,d,m);return i.append("set-cookie",h),h},setSignedCookie:async(f,d,m,h)=>{let p=await AA(f,d,m,h);return i.append("set-cookie",p),p},redirect:f=>(i.set("location",f),new V("FOUND",void 0,i)),error:(f,d,m)=>new V(f,d,m),setStatus:f=>{n=f},json:(f,d)=>t.asResponse?{body:d?.body||f,routerResponse:d,_flag:"json"}:f,responseHeaders:i,get responseStatus(){return n}};for(let f of e.use||[]){let d=await f({...l,returnHeaders:!0,asResponse:!1});d.response&&Object.assign(l.context,d.response),d.headers&&d.headers.forEach((m,h)=>{l.responseHeaders.set(h,m)})}return l};function qo(t,e,r){let i=typeof t=="string"?t:void 0,n=typeof e=="object"?e:t,o=typeof e=="function"?e:r;if((n.method==="GET"||n.method==="HEAD")&&n.body)throw new Jh("Body is not allowed with GET or HEAD methods");if(i&&/\/{2,}/.test(i))throw new Jh("Path cannot contain consecutive slashes");let s=async(...a)=>{let c=a[0]||{},{data:u,error:l}=await iP(vd(c,{options:n,path:i}));if(l)throw l instanceof bd?(n.onValidationError&&await n.onValidationError({message:l.message,issues:l.issues}),new V(400,{message:l.message,code:"VALIDATION_ERROR"})):l;let f=await o(u).catch(async h=>{if(Gs(h)){let p=n.onAPIError;if(p&&await p(h),c.asResponse)return h}throw h}),d=u.responseHeaders,m=u.responseStatus;return c.asResponse?Gn(f,{headers:d,status:m}):c.returnHeaders?c.returnStatus?{headers:d,response:f,status:m}:{headers:d,response:f}:c.returnStatus?{response:f,status:m}:f};return s.options=n,s.path=i,s}qo.create=t=>(e,r,i)=>qo(e,{...r,use:[...r?.use||[],...t?.use||[]]},i);function Wo(t,e){let r=async i=>{let n=i,o=typeof t=="function"?t:e,s=await vd(n,{options:typeof t=="function"?{}:t,path:"/"});if(!o)throw new Error("handler must be defined");let a=await o(s),c=s.responseHeaders;return n.returnHeaders?{headers:c,response:a}:a};return r.options=typeof t=="function"?{}:t,r}Wo.create=t=>{function e(r,i){if(typeof r=="function")return Wo({use:t?.use},r);if(!i)throw new Error("Middleware handler is required");return Wo({...r,method:"*",use:[...t?.use||[],...r.use||[]]},i)}return e};var _A={};function fP(t){switch(t.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function lP(t){let e=[];return t.metadata?.openapi?.parameters?(e.push(...t.metadata.openapi.parameters),e):(t.query instanceof Zn&&Object.entries(t.query.shape).forEach(([r,i])=>{i instanceof Zn&&e.push({name:r,in:"query",schema:{type:fP(i),..."minLength"in i&&i.minLength?{minLength:i.minLength}:{},description:i.description}})}),e)}function tM(t){if(t.metadata?.openapi?.requestBody)return t.metadata.openapi.requestBody;if(t.body&&(t.body instanceof Zn||t.body instanceof to)){let e=t.body.shape;if(!e)return;let r={},i=[];return Object.entries(e).forEach(([n,o])=>{o instanceof Zn&&(r[n]={type:fP(o),description:o.description},o instanceof to||i.push(n))}),{required:t.body instanceof to?!1:!!t.body,content:{"application/json":{schema:{type:"object",properties:r,required:i}}}}}}function dP(t){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...t}}async function EA(t,e){let r={schemas:{}};return Object.entries(t).forEach(([i,n])=>{let o=n.options;if(!(!n.path||o.metadata?.SERVER_ONLY)&&(o.method==="GET"&&(_A[n.path]={get:{tags:["Default",...o.metadata?.openapi?.tags||[]],description:o.metadata?.openapi?.description,operationId:o.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:lP(o),responses:dP(o.metadata?.openapi?.responses)}}),o.method==="POST")){let s=tM(o);_A[n.path]={post:{tags:["Default",...o.metadata?.openapi?.tags||[]],description:o.metadata?.openapi?.description,operationId:o.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:lP(o),...s?{requestBody:s}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:dP(o.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:r,security:[{apiKeyCookie:[]}],servers:[{url:e?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:_A}}var kA=(t,e)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(t)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${e?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(e.logo)}`:void 0} ,
	   	theme: ${e?.theme||"saturn"},
        metaData: {
			title: ${e?.title||"Open API Reference"},
			description: ${e?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`;var Zh=(()=>{let t=function(){};return t.prototype=Object.create(null),Object.freeze(t.prototype),t})();function $A(){return{root:{key:""},static:new Zh}}function OA(t){let[e,...r]=t.split("/");return r[r.length-1]===""?r.slice(0,-1):r}function pP(t,e){let r=new Zh;for(let[i,n]of e){let o=i<0?t.slice(-(i+1)).join("/"):t[i];if(typeof n=="string")r[n]=o;else{let s=o.match(n);if(s)for(let a in s.groups)r[a]=s.groups[a]}}return r}function CA(t,e="",r,i){e=e.toUpperCase(),r.charCodeAt(0)!==47&&(r=`/${r}`),r=r.replace(/\\:/g,"%3A");let n=OA(r),o=t.root,s=0,a=[],c=[];for(let l=0;l<n.length;l++){let f=n[l];if(f.startsWith("**")){o.wildcard||(o.wildcard={key:"**"}),o=o.wildcard,a.push([-(l+1),f.split(":")[1]||"_",f.length===2]);break}if(f==="*"||f.includes(":")){if(o.param||(o.param={key:"*"}),o=o.param,f==="*")a.push([l,`_${s++}`,!0]);else if(f.includes(":",1)){let m=rM(f);c[l]=m,o.hasRegexParam=!0,a.push([l,m,!1])}else a.push([l,f.slice(1),!1]);continue}f==="\\*"?f=n[l]="*":f==="\\*\\*"&&(f=n[l]="**");let d=o.static?.[f];if(d)o=d;else{let m={key:f};o.static||(o.static=new Zh),o.static[f]=m,o=m}}let u=a.length>0;o.methods||(o.methods=new Zh),o.methods[e]??=[],o.methods[e].push({data:i||null,paramsRegexp:c,paramsMap:u?a:void 0}),u||(t.static["/"+n.join("/")]=o)}function rM(t){let e=t.replace(/:(\w+)/g,(r,i)=>`(?<${i}>[^/]+)`).replace(/\./g,"\\.");return new RegExp(`^${e}$`)}function mP(t,e="",r,i){r.charCodeAt(r.length-1)===47&&(r=r.slice(0,-1));let n=t.static[r];if(n&&n.methods){let a=n.methods[e]||n.methods[""];if(a!==void 0)return a[0]}let o=OA(r),s=TA(t,t.root,e,o,0)?.[0];if(s!==void 0)return i?.params===!1?s:{data:s.data,params:s.paramsMap?pP(o,s.paramsMap):void 0}}function TA(t,e,r,i,n){if(n===i.length){if(e.methods){let s=e.methods[r]||e.methods[""];if(s)return s}if(e.param&&e.param.methods){let s=e.param.methods[r]||e.param.methods[""];if(s){let a=s[0].paramsMap;if(a?.[a?.length-1]?.[2])return s}}if(e.wildcard&&e.wildcard.methods){let s=e.wildcard.methods[r]||e.wildcard.methods[""];if(s){let a=s[0].paramsMap;if(a?.[a?.length-1]?.[2])return s}}return}let o=i[n];if(e.static){let s=e.static[o];if(s){let a=TA(t,s,r,i,n+1);if(a)return a}}if(e.param){let s=TA(t,e.param,r,i,n+1);if(s){if(e.param.hasRegexParam){let a=s.find(c=>c.paramsRegexp[n]?.test(o))||s.find(c=>!c.paramsRegexp[n]);return a?[a]:void 0}return s}}if(e.wildcard&&e.wildcard.methods)return e.wildcard.methods[r]||e.wildcard.methods[""]}function hP(t,e="",r,i){r.charCodeAt(r.length-1)===47&&(r=r.slice(0,-1));let n=OA(r),o=IA(t,t.root,e,n,0);return i?.params===!1?o:o.map(s=>({data:s.data,params:s.paramsMap?pP(n,s.paramsMap):void 0}))}function IA(t,e,r,i,n,o=[]){let s=i[n];if(e.wildcard&&e.wildcard.methods){let c=e.wildcard.methods[r]||e.wildcard.methods[""];c&&o.push(...c)}if(e.param&&(IA(t,e.param,r,i,n+1,o),n===i.length&&e.param.methods)){let c=e.param.methods[r]||e.param.methods[""];if(c){let u=c[0].paramsMap;u?.[u?.length-1]?.[2]&&o.push(...c)}}let a=e.static?.[s];if(a&&IA(t,a,r,i,n+1,o),n===i.length&&e.methods){let c=e.methods[r]||e.methods[""];c&&o.push(...c)}return o}var PA=(t,e)=>{if(!e?.openapi?.disabled){let o={path:"/api/reference",...e?.openapi};t.openapi=qo(o.path,{method:"GET"},async s=>{let a=await EA(t);return new Response(kA(a,o.scalar),{headers:{"Content-Type":"text/html"}})})}let r=$A(),i=$A();for(let o of Object.values(t)){if(!o.options||!o.path||o.options?.metadata?.SERVER_ONLY)continue;let s=Array.isArray(o.options?.method)?o.options.method:[o.options?.method];for(let a of s)CA(r,a,o.path,o)}if(e?.routerMiddleware?.length)for(let{path:o,middleware:s}of e.routerMiddleware)CA(i,"*",o,s);let n=async o=>{let s=new URL(o.url),a=s.pathname,c=e?.basePath&&e.basePath!=="/"?a.split(e.basePath).reduce((d,m,h)=>(h!==0&&(h>1?d.push(`${e.basePath}${m}`):d.push(m)),d),[]).join(""):s.pathname;if(!c?.length)return new Response(null,{status:404,statusText:"Not Found"});if(/\/{2,}/.test(c))return new Response(null,{status:404,statusText:"Not Found"});let u=mP(r,o.method,c);if(c.endsWith("/")!==u?.data?.path?.endsWith("/")&&!e?.skipTrailingSlashes)return new Response(null,{status:404,statusText:"Not Found"});if(!u?.data)return new Response(null,{status:404,statusText:"Not Found"});let l={};s.searchParams.forEach((d,m)=>{m in l?Array.isArray(l[m])?l[m].push(d):l[m]=[l[m],d]:l[m]=d});let f=u.data;try{let d=f.options.metadata?.allowedMediaTypes||e?.allowedMediaTypes,m={path:c,method:o.method,headers:o.headers,params:u.params?JSON.parse(JSON.stringify(u.params)):{},request:o,body:f.options.disableBody?void 0:await rP(f.options.cloneRequest?o.clone():o,d),query:l,_flag:"router",asResponse:!0,context:e?.routerContext},h=hP(i,"*",c);if(h?.length)for(let{data:p,params:y}of h){let b=await p({...m,params:y,asResponse:!1});if(b instanceof Response)return b}return await f(m)}catch(d){if(e?.onError)try{let m=await e.onError(d);if(m instanceof Response)return Gn(m)}catch(m){if(Gs(m))return Gn(m);throw m}if(e?.throwError)throw d;return Gs(d)?Gn(d):(console.error("# SERVER_ERROR: ",d),new Response(null,{status:500,statusText:"Internal Server Error"}))}};return{handler:async o=>{let s=await e?.onRequest?.(o);if(s instanceof Response)return s;let a=await n(s instanceof Request?s:o),c=await e?.onResponse?.(a);return c instanceof Response?c:a},endpoints:t}};async function xd(t,e,r){let i=t.body?.callbackURL||t.context.options.baseURL;if(!i)throw new V("BAD_REQUEST",{message:"callbackURL is required"});let n=La(128),o=La(32),s=t.context.oauthConfig.storeStateStrategy,a={...r||{},callbackURL:i,codeVerifier:n,errorURL:t.body?.errorCallbackURL,newUserURL:t.body?.newUserCallbackURL,link:e,expiresAt:Date.now()+600*1e3,requestSignUp:t.body?.requestSignUp,state:o};if(await Wb(a),s==="cookie"){let f=await Fp({key:t.context.secret,data:JSON.stringify(a)}),d=t.context.createAuthCookie("oauth_state",{maxAge:600*1e3});return t.setCookie(d.name,f,d.attributes),{state:o,codeVerifier:n}}let c=t.context.createAuthCookie("state",{maxAge:300*1e3});await t.setSignedCookie(c.name,o,t.context.secret,c.attributes);let u=new Date;u.setMinutes(u.getMinutes()+10);let l=await t.context.internalAdapter.createVerificationValue({value:JSON.stringify(a),identifier:o,expiresAt:u});if(!l)throw t.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new V("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:l.identifier,codeVerifier:n}}async function RA(t){let e=t.query.state||t.body.state,r=t.context.oauthConfig.storeStateStrategy,i=pd({callbackURL:Y(),codeVerifier:Y(),errorURL:Y().optional(),newUserURL:Y().optional(),expiresAt:un(),link:ke({email:Y(),userId:_n.string()}).optional(),requestSignUp:Vt().optional(),state:Y().optional()}),n,o=t.context.oauthConfig?.skipStateCookieCheck;if(r==="cookie"){let s=t.context.createAuthCookie("oauth_state"),a=t.getCookie(s.name);if(!a){t.context.logger.error("State Mismatch. OAuth state cookie not found",{state:e});let c=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${c}?error=please_restart_the_process`)}try{let c=await Vp({key:t.context.secret,data:a});n=i.parse(JSON.parse(c))}catch(c){t.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:c});let u=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${u}?error=please_restart_the_process`)}if(!t.context.oauthConfig?.skipStateCookieCheck&&n.state&&n.state!==e){t.context.logger.error("State Mismatch. State parameter does not match",{expected:n.state,received:e});let c=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${c}?error=state_mismatch`)}t.setCookie(s.name,"",{maxAge:0})}else{let s=await t.context.internalAdapter.findVerificationValue(e);if(!s){t.context.logger.error("State Mismatch. Verification not found",{state:e});let u=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${u}?error=please_restart_the_process`)}n=i.parse(JSON.parse(s.value));let a=t.context.createAuthCookie("state"),c=await t.getSignedCookie(a.name,t.context.secret);if(!o&&(!c||c!==e)){let u=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${u}?error=state_mismatch`)}t.setCookie(a.name,"",{maxAge:0}),await t.context.internalAdapter.deleteVerificationValue(s.id)}if(n.errorURL||(n.errorURL=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`),n.expiresAt<Date.now()){let s=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${s}?error=please_restart_the_process`)}return n&&await Wb(n),n}var Ys={scope:"server"};Qi();Ga();dr();var nM="127.0.0.1";function Sd(t,e){if(e.advanced?.ipAddress?.disableIpTracking)return null;let r="headers"in t?t.headers:t,i=e.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"];for(let n of i){let o="get"in r?r.get(n):r[n];if(typeof o=="string"){let s=o.split(",")[0].trim();if(iM(s))return s}}return Hi()||Es()?nM:null}function iM(t){return!!(rd().safeParse(t).success||id().safeParse(t).success)}var UA=Wo(async()=>({})),ro=Wo.create({use:[UA,Wo(async()=>({}))]}),gP=[UA];function $e(t,e,r){let i=typeof t=="string"?t:void 0,n=typeof e=="object"?e:t,o=typeof e=="function"?e:r;return i?qo(i,{...n,use:[...n?.use||[],...gP]},async s=>ys(s,()=>o(s))):qo({...n,use:[...n?.use||[],...gP]},async s=>ys(s,()=>o(s)))}var yP=ro(async t=>{if(t.request?.method==="GET"||t.request?.method==="OPTIONS"||t.request?.method==="HEAD"||!t.request)return;let e=t.request?.headers,{body:r,query:i}=t,n=e?.get("origin")||e?.get("referer")||"",o=r?.callbackURL||i?.callbackURL,s=r?.redirectTo,a=r?.errorCallbackURL,c=r?.newUserCallbackURL,u=e?.has("cookie"),l=(f,d)=>{if(f&&!t.context.isTrustedOrigin(f,{allowRelativePaths:d!=="origin"}))throw t.context.logger.error(`Invalid ${d}: ${f}`),t.context.logger.info(`If it's a valid URL, please add ${f} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${t.context.trustedOrigins}`),new V("FORBIDDEN",{message:`Invalid ${d}`})};if(u&&!t.context.skipCSRFCheck&&!t.context.skipOriginCheck){if(!n||n==="null")throw new V("FORBIDDEN",{message:"Missing or null Origin"});l(n,"origin")}o&&l(o,"callbackURL"),s&&l(s,"redirectURL"),a&&l(a,"errorCallbackURL"),c&&l(c,"newUserCallbackURL")}),Xs=t=>ro(async e=>{if(!e.request)return;let r=t(e),i=(o,s)=>{if(o&&!e.context.isTrustedOrigin(o,{allowRelativePaths:s!=="origin"}))throw e.context.logger.error(`Invalid ${s}: ${o}`),e.context.logger.info(`If it's a valid URL, please add ${o} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${e.context.trustedOrigins}`),new V("FORBIDDEN",{message:`Invalid ${s}`})},n=Array.isArray(r)?r:[r];for(let o of n)i(o,"callbackURL")});function DA(t){return t==="-"||t==="^"||t==="$"||t==="+"||t==="."||t==="("||t===")"||t==="|"||t==="["||t==="]"||t==="{"||t==="}"||t==="*"||t==="?"||t==="\\"?`\\${t}`:t}function oM(t){let e="";for(let r=0;r<t.length;r++)e+=DA(t[r]);return e}function wP(t,e=!0){if(Array.isArray(t))return`(?:${t.map(u=>`^${wP(u,e)}$`).join("|")})`;let r="",i="",n=".";e===!0?(r="/",i="[/\\\\]",n="[^/\\\\]"):e&&(r=e,i=oM(r),i.length>1?(i=`(?:${i})`,n=`((?!${i}).)`):n=`[^${i}]`);let o=e?`${i}+?`:"",s=e?`${i}*?`:"",a=e?t.split(r):[t],c="";for(let u=0;u<a.length;u++){let l=a[u],f=a[u+1],d="";if(!(!l&&u>0)){if(e&&(u===a.length-1?d=s:f!=="**"?d=o:d=""),e&&l==="**"){d&&(c+=u===0?"":d,c+=`(?:${n}*?${d})*?`);continue}for(let m=0;m<l.length;m++){let h=l[m];h==="\\"?m<l.length-1&&(c+=DA(l[m+1]),m++):h==="?"?c+=n:h==="*"?c+=`${n}*?`:c+=DA(h)}c+=d}}return c}function sM(t,e){if(typeof e!="string")throw new TypeError(`Sample must be a string, but ${typeof e} given`);return t.test(e)}function Nd(t,e){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof t} given`);if((typeof e=="string"||typeof e=="boolean")&&(e={separator:e}),arguments.length===2&&!(typeof e>"u"||typeof e=="object"&&e!==null&&!Array.isArray(e)))throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof e} given`);if(e=e||{},e.separator==="\\")throw new Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let r=wP(t,e.separator),i=new RegExp(`^${r}$`,e.flags),n=sM.bind(null,i);return n.options=e,n.pattern=t,n.regexp=i,n}function aM(t,e,r){let i=Date.now(),n=e*1e3;return i-r.lastRequest<n&&r.count>=t}function cM(t){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":t.toString()}})}function uM(t,e){let r=Date.now(),i=e*1e3;return Math.ceil((t+i-r)/1e3)}function lM(t){let e="rateLimit",r=t.adapter;return{get:async i=>{let n=(await r.findMany({model:e,where:[{field:"key",value:i}]}))[0];return typeof n?.lastRequest=="bigint"&&(n.lastRequest=Number(n.lastRequest)),n},set:async(i,n,o)=>{try{o?await r.updateMany({model:e,where:[{field:"key",value:i}],update:{count:n.count,lastRequest:n.lastRequest}}):await r.create({model:e,data:{key:i,count:n.count,lastRequest:n.lastRequest}})}catch(s){t.logger.error("Error setting rate limit",s)}}}}var bP=new Map;function dM(t,e){if(t.options.rateLimit?.customStorage)return t.options.rateLimit.customStorage;let r=t.rateLimit.storage;return r==="secondary-storage"?{get:async i=>{let n=await t.options.secondaryStorage?.get(i);return n?wt(n):void 0},set:async(i,n,o)=>{let s=e?.window??t.options.rateLimit?.window??10;await t.options.secondaryStorage?.set?.(i,JSON.stringify(n),s)}}:r==="memory"?{async get(i){return bP.get(i)},async set(i,n,o){bP.set(i,n)}}:lM(t)}async function LA(t,e){if(!e.rateLimit.enabled)return;let r=new URL(t.url).pathname.replace(e.options.basePath||"/api/auth","").replace(/\/+$/,""),i=e.rateLimit.window,n=e.rateLimit.max,o=Sd(t,e.options);if(!o)return;let s=o+r,a=fM().find(f=>f.pathMatcher(r));a&&(i=a.window,n=a.max);for(let f of e.options.plugins||[])if(f.rateLimit){let d=f.rateLimit.find(m=>m.pathMatcher(r));if(d){i=d.window,n=d.max;break}}if(e.rateLimit.customRules){let f=Object.keys(e.rateLimit.customRules).find(d=>d.includes("*")?Nd(d)(r):d===r);if(f){let d=e.rateLimit.customRules[f],m=typeof d=="function"?await d(t):d;if(m&&(i=m.window,n=m.max),m===!1)return}}let c=dM(e,{window:i}),u=await c.get(s),l=Date.now();if(!u)await c.set(s,{key:s,count:1,lastRequest:l});else{let f=l-u.lastRequest;if(aM(n,i,u))return cM(uM(u.lastRequest,i));f>i*1e3?await c.set(s,{...u,count:1,lastRequest:l},!0):await c.set(s,{...u,count:u.count+1,lastRequest:l},!0)}}function fM(){return[{pathMatcher(t){return t.startsWith("/sign-in")||t.startsWith("/sign-up")||t.startsWith("/change-password")||t.startsWith("/change-email")},window:10,max:3}]}var Ti=(t,e="ms")=>new Date(Date.now()+(e==="sec"?t*1e3:t));var Gh=new WeakMap;function zA(t,e){let r=e.fields,i={};for(let n in t){let o=r[n];if(!o){i[n]=t[n];continue}o.returned!==!1&&(i[n]=t[n])}return i}function ea(t,e){Gh.has(t)||Gh.set(t,new Map);let r=Gh.get(t);if(r.has(e))return r.get(e);let i={...e==="user"?t.user?.additionalFields:{},...e==="session"?t.session?.additionalFields:{}};for(let n of t.plugins||[])n.schema&&n.schema[e]&&(i={...i,...n.schema[e].fields});return Gh.get(t).set(e,i),i}function tr(t,e){return{...zA(e,{fields:ea(t,"user")}),id:e.id}}function vP(t,e){return zA(e,{fields:ea(t,"account")})}function Yn(t,e){return zA(e,{fields:ea(t,"session")})}function Nc(t,e){let r=e.action||"create",i=e.fields,n=Object.assign(Object.create(null),null);for(let o in i){if(o in t){if(i[o].input===!1){if(i[o].defaultValue!==void 0&&r!=="update"){n[o]=i[o].defaultValue;continue}if(t[o])throw new V("BAD_REQUEST",{message:`${o} is not allowed to be set`});continue}if(i[o].validator?.input&&t[o]!==void 0){let s=i[o].validator.input["~standard"].validate(t[o]);if(s instanceof Promise)throw new V("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in s&&s.issues)throw new V("BAD_REQUEST",{message:s.issues[0]?.message||"Validation Error"});n[o]=s.value;continue}if(i[o].transform?.input&&t[o]!==void 0){n[o]=i[o].transform?.input(t[o]);continue}n[o]=t[o];continue}if(i[o].defaultValue!==void 0&&r==="create"){if(typeof i[o].defaultValue=="function"){n[o]=i[o].defaultValue();continue}n[o]=i[o].defaultValue;continue}if(i[o].required&&r==="create")throw new V("BAD_REQUEST",{message:`${o} is required`})}return n}function Ac(t,e={},r){return Nc(e,{fields:ea(t,"user"),action:r})}function xP(t,e){let r=ea(t,"user");return Nc(e||{},{fields:r})}function SP(t,e){return Nc(e,{fields:ea(t,"account")})}function Yh(t,e){return Nc(e,{fields:ea(t,"session")})}function NP(t,e){if(!e)return t;for(let r in e){let i=e[r]?.modelName;i&&(t[r].modelName=i);for(let n in t[r].fields){let o=e[r]?.fields?.[n];o&&(t[r].fields[n].fieldName=o)}}return t}var Ad=Object.defineProperty,pM=Object.getOwnPropertyDescriptor,mM=Object.getOwnPropertyNames,hM=Object.prototype.hasOwnProperty,_P=(t,e)=>{let r={};for(var i in t)Ad(r,i,{get:t[i],enumerable:!0});return e&&Ad(r,Symbol.toStringTag,{value:"Module"}),r},AP=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(var n=mM(e),o=0,s=n.length,a;o<s;o++)a=n[o],!hM.call(t,a)&&a!==r&&Ad(t,a,{get:(c=>e[c]).bind(null,a),enumerable:!(i=pM(e,a))||i.enumerable});return t},EP=(t,e,r,i)=>{i&&(Ad(t,Symbol.toStringTag,{value:"Module"}),r&&Ad(r,Symbol.toStringTag,{value:"Module"})),AP(t,e,"default"),r&&AP(r,e,"default")};var BA={};ar(BA,{accountSchema:()=>gM,coreSchema:()=>_d,getAuthTables:()=>En,rateLimitSchema:()=>yM,sessionSchema:()=>wM,userSchema:()=>bM,verificationSchema:()=>vM});jA();var _d=ke({id:Y(),createdAt:ki().default(()=>new Date),updatedAt:ki().default(()=>new Date)}),gM=_d.extend({providerId:Y(),accountId:Y(),userId:_n.string(),accessToken:Y().nullish(),refreshToken:Y().nullish(),idToken:Y().nullish(),accessTokenExpiresAt:ki().nullish(),refreshTokenExpiresAt:ki().nullish(),scope:Y().nullish(),password:Y().nullish()}),yM=ke({key:Y(),count:un(),lastRequest:un()}),wM=_d.extend({userId:_n.string(),expiresAt:ki(),token:Y(),ipAddress:Y().nullish(),userAgent:Y().nullish()}),bM=_d.extend({email:Y().transform(t=>t.toLowerCase()),emailVerified:Vt().default(!1),name:Y(),image:Y().nullish()}),vM=_d.extend({value:Y(),expiresAt:ki(),identifier:Y()});dr();async function eg(t,e){let r;if(t.database)typeof t.database=="function"?r=t.database(t):r=await e(t);else{let i=En(t),n=Object.keys(i).reduce((s,a)=>(s[a]=[],s),{}),{memoryAdapter:o}=await Promise.resolve().then(()=>(OP(),$P));r=o(n)(t)}return r.transaction||(ye.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),r.transaction=async i=>i(r)),r}async function dw(t){return eg(t,async e=>{let{createKyselyAdapter:r}=await Promise.resolve().then(()=>(Uk(),Rk)),{kysely:i,databaseType:n,transaction:o}=await r(e);if(!i)throw new de("Failed to initialize database adapter");let{kyselyAdapter:s}=await Promise.resolve().then(()=>(Uk(),Rk));return s(i,{type:n||"sqlite",debugLogs:e.database&&"debugLogs"in e.database?e.database.debugLogs:!1,transaction:o})(e)})}var BU=(t,e)=>({type:t,...e});function MU(t,e){let r=e.id?{id:e.id}:{};for(let i in t){let n=t[i],o=e[i];o!==void 0&&(r[n.fieldName||i]=o)}return r}function qU(t,e){if(!e)return null;let r={id:e.id};for(let[i,n]of Object.entries(t))r[i]=e[n.fieldName||i];return r}function fw(t,e){let r=e.hooks;async function i(c,u,l){let f=await qi().catch(()=>null),d=c;for(let p of r||[]){let y=p[u]?.create?.before;if(y){let b=await y(d,f);if(b===!1)return null;typeof b=="object"&&"data"in b&&(d={...d,...b.data})}}let m=l?await l.fn(d):null,h=!l||l.executeMainFn?await(await ct(t)).create({model:u,data:d,forceAllowId:!0}):m;for(let p of r||[]){let y=p[u]?.create?.after;y&&await y(h,f)}return h}async function n(c,u,l,f){let d=await qi().catch(()=>null),m=c;for(let y of r||[]){let b=y[l]?.update?.before;if(b){let N=await b(c,d);if(N===!1)return null;typeof N=="object"&&"data"in N&&(m={...m,...N.data})}}let h=f?await f.fn(m):null,p=!f||f.executeMainFn?await(await ct(t)).update({model:l,update:m,where:u}):h;for(let y of r||[]){let b=y[l]?.update?.after;b&&await b(p,d)}return p}async function o(c,u,l,f){let d=await qi().catch(()=>null),m=c;for(let y of r||[]){let b=y[l]?.update?.before;if(b){let N=await b(c,d);if(N===!1)return null;typeof N=="object"&&"data"in N&&(m={...m,...N.data})}}let h=f?await f.fn(m):null,p=!f||f.executeMainFn?await(await ct(t)).updateMany({model:l,update:m,where:u}):h;for(let y of r||[]){let b=y[l]?.update?.after;b&&await b(p,d)}return p}async function s(c,u,l){let f=await qi().catch(()=>null),d=null;try{d=(await(await ct(t)).findMany({model:u,where:c,limit:1}))[0]||null}catch{}if(d)for(let p of r||[]){let y=p[u]?.delete?.before;if(y&&await y(d,f)===!1)return null}let m=l?await l.fn(c):null,h=!l||l.executeMainFn?await(await ct(t)).delete({model:u,where:c}):m;if(d)for(let p of r||[]){let y=p[u]?.delete?.after;y&&await y(d,f)}return h}async function a(c,u,l){let f=await qi().catch(()=>null),d=[];try{d=await(await ct(t)).findMany({model:u,where:c})}catch{}for(let p of d)for(let y of r||[]){let b=y[u]?.delete?.before;if(b&&await b(p,f)===!1)return null}let m=l?await l.fn(c):null,h=!l||l.executeMainFn?await(await ct(t)).deleteMany({model:u,where:c}):m;for(let p of d)for(let y of r||[]){let b=y[u]?.delete?.after;b&&await b(p,f)}return h}return{createWithHooks:i,updateWithHooks:n,updateManyWithHooks:o,deleteWithHooks:s,deleteManyWithHooks:a}}var yu=(t,e)=>{let r=e.logger,i=e.options,n=i.secondaryStorage,o=i.session?.expiresIn||3600*24*7,{createWithHooks:s,updateWithHooks:a,updateManyWithHooks:c,deleteWithHooks:u,deleteManyWithHooks:l}=fw(t,e);async function f(d){if(!n)return;let m=await n.get(`active-sessions-${d.id}`);if(!m)return;let h=Date.now(),p=(wt(m)||[]).filter(y=>y.expiresAt>h);await Promise.all(p.map(async({token:y})=>{let b=await n.get(y);if(!b)return;let N=wt(b);if(!N)return;let T=Math.max(Math.floor(new Date(N.session.expiresAt).getTime()-h)/1e3,0);await n.set(y,JSON.stringify({session:N.session,user:d}),Math.floor(T))}))}return{createOAuthUser:async(d,m)=>Ju(t,async()=>{let h=await s({createdAt:new Date,updatedAt:new Date,...d},"user",void 0);return{user:h,account:await s({...m,userId:h.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async d=>await s({createdAt:new Date,updatedAt:new Date,...d,email:d.email?.toLowerCase()},"user",void 0),createAccount:async d=>await s({createdAt:new Date,updatedAt:new Date,...d},"account",void 0),listSessions:async d=>{if(n){let m=await n.get(`active-sessions-${d}`);if(!m)return[];let h=wt(m)||[],p=Date.now(),y=h.filter(N=>N.expiresAt>p),b=[];for(let N of y){let T=await n.get(N.token);if(T){let I=wt(T);if(!I)return[];let $=Yn(e.options,{...I.session,expiresAt:new Date(I.session.expiresAt)});b.push($)}}return b}return await(await ct(t)).findMany({model:"session",where:[{field:"userId",value:d}]})},listUsers:async(d,m,h,p)=>await(await ct(t)).findMany({model:"user",limit:d,offset:m,sortBy:h,where:p}),countTotalUsers:async d=>{let m=await(await ct(t)).count({model:"user",where:d});return typeof m=="string"?parseInt(m):m},deleteUser:async d=>{(!n||i.session?.storeSessionInDatabase)&&await l([{field:"userId",value:d}],"session",void 0),await l([{field:"userId",value:d}],"account",void 0),await u([{field:"id",value:d}],"user",void 0)},createSession:async(d,m,h,p)=>{let y=await qi().catch(()=>null),b=y?.headers||y?.request?.headers,{id:N,...T}=h||{},I=Yh(y?.context.options??i,{}),$={ipAddress:(y?.request||y?.headers)&&Sd(y?.request||y?.headers,y?.context.options)||"",userAgent:b?.get("user-agent")||"",...T,expiresAt:m?Ti(3600*24,"sec"):Ti(o,"sec"),userId:d,token:vn(32),createdAt:new Date,updatedAt:new Date,...I,...p?T:{}};return await s($,"session",n?{fn:async v=>{let S=await n.get(`active-sessions-${d}`),E=[],_=Date.now();S&&(E=wt(S)||[],E=E.filter(z=>z.expiresAt>_));let O=E.sort((z,W)=>z.expiresAt-W.expiresAt),R=O.at(-1)?.expiresAt;O.push({token:$.token,expiresAt:$.expiresAt.getTime()}),(!R||R<$.expiresAt.getTime())&&(R=$.expiresAt.getTime());let B=Math.max(Math.floor((R-_)/1e3),0);B>0&&await n.set(`active-sessions-${d}`,JSON.stringify(O),B);let D=await t.findOne({model:"user",where:[{field:"id",value:d}]}),P=Math.max(Math.floor(($.expiresAt.getTime()-_)/1e3),0);return P>0&&await n.set($.token,JSON.stringify({session:v,user:D}),P),v},executeMainFn:i.session?.storeSessionInDatabase}:void 0)},findSession:async d=>{if(n){let y=await n.get(d);if(!y&&!i.session?.storeSessionInDatabase)return null;if(y){let b=wt(y);return b?{session:Yn(e.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),user:tr(e.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)})}:null}}let m=await(await ct(t)).findOne({model:"session",where:[{value:d,field:"token"}],join:{user:!0}});if(!m)return null;let{user:h,...p}=m;return h?{session:Yn(e.options,p),user:tr(e.options,h)}:null},findSessions:async d=>{if(n){let h=[];for(let p of d){let y=await n.get(p);if(y){let b=wt(y);if(!b)return[];let N={session:{...b.session,expiresAt:new Date(b.session.expiresAt)},user:{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)}};h.push(N)}}return h}let m=await(await ct(t)).findMany({model:"session",where:[{field:"token",value:d,operator:"in"}],join:{user:!0}});return m.length?m.some(h=>!h.user)?[]:m.map(h=>{let{user:p,...y}=h;return{session:y,user:p}}):[]},updateSession:async(d,m)=>await a(m,[{field:"token",value:d}],"session",n?{async fn(h){let p=await n.get(d),y=null;if(p){let b=wt(p);return b?(y={...b.session,...h},y):null}else return null},executeMainFn:i.session?.storeSessionInDatabase}:void 0),deleteSession:async d=>{if(n){let m=await n.get(d);if(m){let{session:h}=wt(m)??{};if(!h){r.error("Session not found in secondary storage");return}let p=h.userId,y=await n.get(`active-sessions-${p}`);if(y){let b=wt(y)||[],N=Date.now(),T=b.filter($=>$.expiresAt>N&&$.token!==d),I=T.sort(($,v)=>$.expiresAt-v.expiresAt).at(-1)?.expiresAt;T.length>0&&I&&I>Date.now()?await n.set(`active-sessions-${p}`,JSON.stringify(T),Math.floor((I-N)/1e3)):await n.delete(`active-sessions-${p}`)}else r.error("Active sessions list not found in secondary storage")}if(await n.delete(d),!i.session?.storeSessionInDatabase||e.options.session?.preserveSessionInDatabase)return}await u([{field:"token",value:d}],"session",void 0)},deleteAccounts:async d=>{await l([{field:"userId",value:d}],"account",void 0)},deleteAccount:async d=>{await u([{field:"id",value:d}],"account",void 0)},deleteSessions:async d=>{if(n){if(typeof d=="string"){let m=await n.get(`active-sessions-${d}`),h=m?wt(m):[];if(!h)return;for(let p of h)await n.delete(p.token);await n.delete(`active-sessions-${d}`)}else for(let m of d)await n.get(m)&&await n.delete(m);if(!i.session?.storeSessionInDatabase||e.options.session?.preserveSessionInDatabase)return}await l([{field:Array.isArray(d)?"token":"userId",value:d,operator:Array.isArray(d)?"in":void 0}],"session",void 0)},findOAuthUser:async(d,m,h)=>{let p=await(await ct(t)).findMany({model:"account",where:[{value:m,field:"accountId"}],join:{user:!0}}).then(y=>y.find(b=>b.providerId===h));if(p){if(p.user)return{user:p.user,accounts:[p]};{let y=await(await ct(t)).findOne({model:"user",where:[{value:d.toLowerCase(),field:"email"}]});return y?{user:y,accounts:[p]}:null}}else{let y=await(await ct(t)).findOne({model:"user",where:[{value:d.toLowerCase(),field:"email"}]});return y?{user:y,accounts:await(await ct(t)).findMany({model:"account",where:[{value:y.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(d,m)=>{let h=await(await ct(t)).findOne({model:"user",where:[{value:d.toLowerCase(),field:"email"}],join:{...m?.includeAccounts?{account:!0}:{}}});if(!h)return null;let{account:p,...y}=h;return{user:y,accounts:p??[]}},findUserById:async d=>d?await(await ct(t)).findOne({model:"user",where:[{field:"id",value:d}]}):null,linkAccount:async d=>await s({createdAt:new Date,updatedAt:new Date,...d},"account",void 0),updateUser:async(d,m)=>{let h=await a(m,[{field:"id",value:d}],"user",void 0);return await f(h),await f(h),h},updateUserByEmail:async(d,m)=>{let h=await a(m,[{field:"email",value:d.toLowerCase()}],"user",void 0);return await f(h),await f(h),h},updatePassword:async(d,m)=>{await c({password:m},[{field:"userId",value:d},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async d=>await(await ct(t)).findMany({model:"account",where:[{field:"userId",value:d}]}),findAccount:async d=>await(await ct(t)).findOne({model:"account",where:[{field:"accountId",value:d}]}),findAccountByProviderId:async(d,m)=>await(await ct(t)).findOne({model:"account",where:[{field:"accountId",value:d},{field:"providerId",value:m}]}),findAccountByUserId:async d=>await(await ct(t)).findMany({model:"account",where:[{field:"userId",value:d}]}),updateAccount:async(d,m)=>await a(m,[{field:"id",value:d}],"account",void 0),createVerificationValue:async d=>await s({createdAt:new Date,updatedAt:new Date,...d},"verification",void 0),findVerificationValue:async d=>{let m=await(await ct(t)).findMany({model:"verification",where:[{field:"identifier",value:d}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return i.verification?.disableCleanup||await l([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0),m[0]},deleteVerificationValue:async d=>{await u([{field:"id",value:d}],"verification",void 0)},deleteVerificationByIdentifier:async d=>{await u([{field:"identifier",value:d}],"verification",void 0)},updateVerificationValue:async(d,m)=>await a(m,[{field:"id",value:d}],"verification",void 0)}};function WU({fields:t,isClientSide:e}){let r=Object.keys(t).reduce((i,n)=>{let o=t[n];if(!o||e&&o.input===!1)return i;let s;return o.type==="json"?s=Sc?Sc():Fr():o.type==="string[]"||o.type==="number[]"?s=ln(o.type==="string[]"?Y():un()):Array.isArray(o.type)?s=Fr():s=Sr[o.type](),o?.required===!1&&(s=s.optional()),o?.returned===!1?i:{...i,[n]:s}},{});return ke(r)}function pw(t){let e=(0,Dk.getAuthTables)(t),r={};for(let i in e){let n=e[i],o=n.fields,s={};if(Object.entries(o).forEach(([a,c])=>{if(s[c.fieldName||a]=c,c.references){let u=e[c.references.model];u&&(s[c.fieldName||a].references={...c.references,model:u.modelName,field:c.references.field})}}),r[n.modelName]){r[n.modelName].fields={...r[n.modelName].fields,...s};continue}r[n.modelName]={fields:s,order:n.order||1/0}}return r}lw();dr();hu();Ed();var kq={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function Lk(t,e,r){function i(o){return o.toLowerCase().split("(")[0].trim()}if(e==="string[]"||e==="number[]")return t.toLowerCase().includes("json");let n=kq[r];return(Array.isArray(e)?n.string.map(o=>o.toLowerCase()):n[e].map(o=>o.toLowerCase())).includes(i(t))}async function Tq(t){try{let e=await Te`SHOW search_path`.execute(t);if(e.rows[0]?.search_path)return e.rows[0].search_path.split(",").map(r=>r.trim()).map(r=>r.replace(/^["']|["']$/g,"")).filter(r=>!r.startsWith("$"))[0]||"public"}catch{}return"public"}async function mw(t){let e=pw(t),r=Ji(t.logger),{kysely:i,databaseType:n}=await uw(t);n||(r.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),n="sqlite"),i||(r.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let o="public";if(n==="postgres"){o=await Tq(i),r.debug(`PostgreSQL migration: Using schema '${o}' (from search_path)`);try{(await Te`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${o}
			`.execute(i)).rows[0]||r.warn(`Schema '${o}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(I){r.debug(`Could not verify schema existence: ${I instanceof Error?I.message:String(I)}`)}}let s=await i.introspection.getTables(),a=s;if(n==="postgres")try{let I=await Te`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${o}
				AND table_type = 'BASE TABLE'
			`.execute(i),$=new Set(I.rows.map(v=>v.table_name));a=s.filter(v=>v.schema===o&&$.has(v.name)),r.debug(`Found ${a.length} table(s) in schema '${o}': ${a.map(v=>v.name).join(", ")||"(none)"}`)}catch(I){r.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${I instanceof Error?I.message:String(I)}`)}let c=[],u=[];for(let[I,$]of Object.entries(e)){let v=a.find(E=>E.name===I);if(!v){let E=c.findIndex(R=>R.table===I),_={table:I,fields:$.fields,order:$.order||1/0},O=c.findIndex(R=>(R.order||1/0)>_.order);O===-1?E===-1?c.push(_):c[E].fields={...c[E].fields,...$.fields}:c.splice(O,0,_);continue}let S={};for(let[E,_]of Object.entries($.fields)){let O=v.columns.find(R=>R.name===E);if(!O){S[E]=_;continue}Lk(O.dataType,_.type,n)||r.warn(`Field ${E} in table ${I} has a different type in the database. Expected ${_.type} but got ${O.dataType}.`)}Object.keys(S).length>0&&u.push({table:I,fields:S,order:$.order||1/0})}let l=[],f=t.advanced?.database?.generateId==="uuid",d=t.advanced?.database?.useNumberId||t.advanced?.database?.generateId==="serial";function m(I,$){let v=I.type,S=n||"sqlite",E={string:{sqlite:"text",postgres:"text",mysql:I.unique?"varchar(255)":I.references?"varchar(36)":I.sortable||I.index?"varchar(255)":"text",mssql:I.unique||I.sortable?"varchar(255)":I.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:I.bigint?"bigint":"integer",postgres:I.bigint?"bigint":"integer",mysql:I.bigint?"bigint":"integer",mssql:I.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:Te`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:d?Te`integer GENERATED BY DEFAULT AS IDENTITY`:f?"uuid":"text",mysql:d?"integer":"varchar(36)",mssql:d?"integer":"varchar(36)",sqlite:d?"integer":"text"},foreignKeyId:{postgres:d?"integer":f?"uuid":"text",mysql:d?"integer":"varchar(36)",mssql:d?"integer":"varchar(36)",sqlite:d?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if($==="id"||I.references?.field==="id")return $==="id"?E.id[S]:E.foreignKeyId[S];if(Array.isArray(v))return"text";if(!(v in E))throw new Error(`Unsupported field type '${String(v)}' for field '${$}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return E[v][S]}let h=WA({schema:En(t),usePlural:!1}),p=qA({schema:En(t),usePlural:!1});function y(I,$){try{return`${h(I)}.${p({model:I,field:$})}`}catch{return`${I}.${$}`}}if(u.length)for(let I of u)for(let[$,v]of Object.entries(I.fields)){let S=m(v,$),E=i.schema.alterTable(I.table);if(v.index){let O=i.schema.alterTable(I.table).addIndex(`${I.table}_${$}_idx`);l.push(O)}let _=E.addColumn($,S,O=>(O=v.required!==!1?O.notNull():O,v.references&&(O=O.references(y(v.references.model,v.references.field)).onDelete(v.references.onDelete||"cascade")),v.unique&&(O=O.unique()),v.type==="date"&&typeof v.defaultValue=="function"&&(n==="postgres"||n==="mysql"||n==="mssql")&&(n==="mysql"?O=O.defaultTo(Te`CURRENT_TIMESTAMP(3)`):O=O.defaultTo(Te`CURRENT_TIMESTAMP`)),O));l.push(_)}let b=[];if(t.advanced?.database?.useNumberId&&r.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),c.length)for(let I of c){let $=m({type:d?"number":"string"},"id"),v=i.schema.createTable(I.table).addColumn("id",$,S=>d?n==="postgres"||n==="sqlite"?S.primaryKey().notNull():n==="mssql"?S.identity().primaryKey().notNull():S.autoIncrement().primaryKey().notNull():f&&n==="postgres"?S.primaryKey().defaultTo(Te`pg_catalog.gen_random_uuid()`).notNull():S.primaryKey().notNull());for(let[S,E]of Object.entries(I.fields)){let _=m(E,S);if(v=v.addColumn(S,_,O=>(O=E.required!==!1?O.notNull():O,E.references&&(O=O.references(y(E.references.model,E.references.field)).onDelete(E.references.onDelete||"cascade")),E.unique&&(O=O.unique()),E.type==="date"&&typeof E.defaultValue=="function"&&(n==="postgres"||n==="mysql"||n==="mssql")&&(n==="mysql"?O=O.defaultTo(Te`CURRENT_TIMESTAMP(3)`):O=O.defaultTo(Te`CURRENT_TIMESTAMP`)),O)),E.index){let O=i.schema.createIndex(`${I.table}_${S}_${E.unique?"uidx":"idx"}`).on(I.table).columns([S]);b.push(E.unique?O.unique():O)}}l.push(v)}if(b.length)for(let I of b)l.push(I);async function N(){for(let I of l)await I.execute()}async function T(){return l.map(I=>I.compile().sql).join(`;

`)+";"}return{toBeCreated:c,toBeAdded:u,runMigrations:N,compileMigrations:T}}var Dk=_P({convertFromDB:()=>qU,convertToDB:()=>MU,createFieldAttribute:()=>BU,createInternalAdapter:()=>yu,getAdapter:()=>dw,getBaseAdapter:()=>eg,getMigrations:()=>mw,getSchema:()=>pw,getWithHooks:()=>fw,matchType:()=>Lk,mergeSchema:()=>NP,parseAccountInput:()=>SP,parseAccountOutput:()=>vP,parseAdditionalUserInput:()=>xP,parseInputData:()=>Nc,parseSessionInput:()=>Yh,parseSessionOutput:()=>Yn,parseUserInput:()=>Ac,parseUserOutput:()=>tr,toZodSchema:()=>WU});EP(Dk,BA);var Bk=4096,jk=200,zk=Bk-jk;function Iq(t){let e=t.headers?.get("cookie");if(!e)return{};let r={},i=e.split("; ");for(let n of i){let[o,...s]=n.split("=");o&&s.length>0&&(r[o]=s.join("="))}return r}function FU(t){let e=t.split("."),r=e[e.length-1],i=parseInt(r||"0",10);return isNaN(i)?0:i}function $q(t,e){let r={},i=Iq(e);for(let[n,o]of Object.entries(i))n.startsWith(t)&&(r[n]=o);return r}function Oq(t){return Object.keys(t).sort((e,r)=>FU(e)-FU(r)).map(e=>t[e]).join("")}function Cq(t,e,r,i){let n=Math.ceil(e.value.length/zk);if(n===1)return r[e.name]=e.value,[e];let o=[];for(let s=0;s<n;s++){let a=`${e.name}.${s}`,c=s*zk,u=e.value.substring(c,c+zk);o.push({...e,name:a,value:u}),r[a]=u}return i.debug(`CHUNKING_${t.toUpperCase()}_COOKIE`,{message:`${t} cookie exceeds allowed ${Bk} bytes.`,emptyCookieSize:jk,valueSize:e.value.length,chunkCount:n,chunks:o.map(s=>s.value.length+jk)}),o}function VU(t,e){let r={};for(let i in t)r[i]={name:i,value:"",options:{...e,maxAge:0}};return r}var KU=t=>(e,r,i)=>{let n=$q(e,i),o=i.context.logger;return{getValue(){return Oq(n)},hasChunks(){return Object.keys(n).length>0},chunk(s,a){let c=VU(n,r);for(let f in n)delete n[f];let u=c,l=Cq(t,{name:e,value:s,options:{...r,...a}},n,o);for(let f of l)u[f.name]=f;return Object.values(u)},clean(){let s=VU(n,r);for(let a in n)delete n[a];return Object.values(s)},setCookies(s){for(let a of s)i.setCookie(a.name,a.value,a.options)}}},gw=KU("Session"),hw=KU("Account");function yw(t,e){let r=t.getCookie(e);if(r)return r;let i=[],n=t.headers?.get("cookie");if(!n)return null;let o={},s=n.split("; ");for(let a of s){let[c,...u]=a.split("=");c&&u.length>0&&(o[c]=u.join("="))}for(let[a,c]of Object.entries(o))if(a.startsWith(e+".")){let u=a.split(".").at(-1),l=parseInt(u||"0",10);isNaN(l)||i.push({index:l,value:c})}return i.length>0?(i.sort((a,c)=>a.index-c.index),i.map(a=>a.value).join("")):null}async function wu(t,e){let r=t.context.authCookies.accountData,i={maxAge:300,...r.options},n=await cl(e,t.context.secret,"better-auth-account",i.maxAge);if(n.length>Bk){let o=hw(r.name,i,t),s=o.chunk(n,i);o.setCookies(s)}else{let o=hw(r.name,i,t);if(o.hasChunks()){let s=o.clean();o.setCookies(s)}t.setCookie(r.name,n,i)}}async function ww(t){let e=yw(t,t.context.authCookies.accountData.name);if(e){let r=wt(await Qa(e,t.context.secret,"better-auth-account"));if(r)return r}return null}var HU=Nn(ke({disableCookieCache:_n.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:_n.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));var Pq=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;function Rq(t){let e=Pq.exec(t);if(!e||e[4]&&e[1])throw new TypeError(`Invalid time string format: "${t}". Use formats like "7d", "30m", "1 hour", etc.`);let r=parseFloat(e[2]),i=e[3].toLowerCase(),n;switch(i){case"years":case"year":case"yrs":case"yr":case"y":n=r*315576e5;break;case"months":case"month":case"mo":n=r*2592e6;break;case"weeks":case"week":case"w":n=r*6048e5;break;case"days":case"day":case"d":n=r*864e5;break;case"hours":case"hour":case"hrs":case"hr":case"h":n=r*36e5;break;case"minutes":case"minute":case"mins":case"min":case"m":n=r*6e4;break;case"seconds":case"second":case"secs":case"sec":case"s":n=r*1e3;break;default:throw new TypeError(`Unknown time unit: "${i}"`)}return e[1]==="-"||e[4]==="ago"?-n:n}function JU(t){return Math.round(Rq(t)/1e3)}dr();var Mk=new Map,Uq=new TextEncoder,qk={decode:(t,e="utf-8")=>(Mk.has(e)||Mk.set(e,new TextDecoder(e)),Mk.get(e).decode(t)),encode:Uq.encode};var bw=(t="SHA-256",e="none")=>{let r={importKey:async(i,n)=>Vn().importKey("raw",typeof i=="string"?new TextEncoder().encode(i):i,{name:"HMAC",hash:{name:t}},!1,[n]),sign:async(i,n)=>{typeof i=="string"&&(i=await r.importKey(i,"sign"));let o=await Vn().sign("HMAC",i,typeof n=="string"?new TextEncoder().encode(n):n);return e==="hex"?Ya.encode(o):e==="base64"||e==="base64url"||e==="base64urlnopad"?Ai.encode(o,{padding:e!=="base64urlnopad"}):o},verify:async(i,n,o)=>(typeof i=="string"&&(i=await r.importKey(i,"verify")),e==="hex"&&(o=Ya.decode(o)),(e==="base64"||e==="base64url"||e==="base64urlnopad")&&(o=await Or.decode(o)),Vn().verify("HMAC",i,typeof o=="string"?new TextEncoder().encode(o):o,typeof n=="string"?new TextEncoder().encode(n):n))};return r};function Wk(t){let e=(t.advanced?.useSecureCookies!==void 0?t.advanced?.useSecureCookies:t.baseURL!==void 0?t.baseURL.startsWith("https://"):ko)?"__Secure-":"",r=!!t.advanced?.crossSubDomainCookies?.enabled,i=r?t.advanced?.crossSubDomainCookies?.domain||(t.baseURL?new URL(t.baseURL).hostname:void 0):void 0;if(r&&!i)throw new de("baseURL is required when crossSubdomainCookies are enabled");function n(o,s={}){let a=t.advanced?.cookiePrefix||"better-auth",c=t.advanced?.cookies?.[o]?.name||`${a}.${o}`,u=t.advanced?.cookies?.[o]?.attributes;return{name:`${e}${c}`,attributes:{secure:!!e,sameSite:"lax",path:"/",httpOnly:!0,...r?{domain:i}:{},...t.advanced?.defaultCookieAttributes,...s,...u}}}return n}function QU(t){let e=Wk(t),r=e("session_token",{maxAge:t.session?.expiresIn||JU("7d")}),i=e("session_data",{maxAge:t.session?.cookieCache?.maxAge||300}),n=e("account_data",{maxAge:t.session?.cookieCache?.maxAge||300}),o=e("dont_remember");return{sessionToken:{name:r.name,options:r.attributes},sessionData:{name:i.name,options:i.attributes},dontRememberToken:{name:o.name,options:o.attributes},accountData:{name:n.name,options:n.attributes}}}async function vw(t,e,r){if(t.context.options.session?.cookieCache?.enabled){let i=Object.entries(e.session).reduce((d,[m,h])=>{let p=t.context.options.session?.additionalFields?.[m];return(!p||p.returned!==!1)&&(d[m]=h),d},{}),n=tr(t.context.options,e.user),o=t.context.options.session?.cookieCache?.version,s="1";if(o){if(typeof o=="string")s=o;else if(typeof o=="function"){let d=o(e.session,e.user);s=d instanceof Promise?await d:d}}let a={session:i,user:n,updatedAt:Date.now(),version:s},c={...t.context.authCookies.sessionData.options,maxAge:r?void 0:t.context.authCookies.sessionData.options.maxAge},u=Ti(c.maxAge||60,"sec").getTime(),l=t.context.options.session?.cookieCache?.strategy||"compact",f;if(l==="jwe"?f=await cl(a,t.context.secret,"better-auth-session",c.maxAge||300):l==="jwt"?f=await al(a,t.context.secret,c.maxAge||300):f=Ai.encode(JSON.stringify({session:a,expiresAt:u,signature:await bw("SHA-256","base64urlnopad").sign(t.context.secret,JSON.stringify({...a,expiresAt:u}))}),{padding:!1}),f.length>4093){let d=gw(t.context.authCookies.sessionData.name,c,t),m=d.chunk(f,c);d.setCookies(m)}else{let d=gw(t.context.authCookies.sessionData.name,c,t);if(d.hasChunks()){let m=d.clean();d.setCookies(m)}t.setCookie(t.context.authCookies.sessionData.name,f,c)}}}async function or(t,e,r,i){let n=await t.getSignedCookie(t.context.authCookies.dontRememberToken.name,t.context.secret);r=r!==void 0?r:!!n;let o=t.context.authCookies.sessionToken.options,s=r?void 0:t.context.sessionConfig.expiresIn;await t.setSignedCookie(t.context.authCookies.sessionToken.name,e.session.token,t.context.secret,{...o,maxAge:s,...i}),r&&await t.setSignedCookie(t.context.authCookies.dontRememberToken.name,"true",t.context.secret,t.context.authCookies.dontRememberToken.options),await vw(t,e,r),t.context.setNewSession(e),t.context.options.secondaryStorage&&await t.context.secondaryStorage?.set(e.session.token,JSON.stringify({user:e.user,session:e.session}),Math.floor((new Date(e.session.expiresAt).getTime()-Date.now())/1e3))}function os(t,e){if(t.setCookie(t.context.authCookies.sessionToken.name,"",{...t.context.authCookies.sessionToken.options,maxAge:0}),t.setCookie(t.context.authCookies.sessionData.name,"",{...t.context.authCookies.sessionData.options,maxAge:0}),t.context.options.account?.storeAccountCookie){t.setCookie(t.context.authCookies.accountData.name,"",{...t.context.authCookies.accountData.options,maxAge:0});let n=hw(t.context.authCookies.accountData.name,t.context.authCookies.accountData.options,t),o=n.clean();n.setCookies(o)}if(t.context.oauthConfig.storeStateStrategy==="cookie"){let n=t.context.createAuthCookie("oauth_state");t.setCookie(n.name,"",{...n.attributes,maxAge:0})}let r=gw(t.context.authCookies.sessionData.name,t.context.authCookies.sessionData.options,t),i=r.clean();r.setCookies(i),e||t.setCookie(t.context.authCookies.dontRememberToken.name,"",{...t.context.authCookies.dontRememberToken.options,maxAge:0})}var Fk=()=>$e("/get-session",{method:"GET",operationId:"getSession",query:HU,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async t=>{try{let e=await t.getSignedCookie(t.context.authCookies.sessionToken.name,t.context.secret);if(!e)return null;let r=yw(t,t.context.authCookies.sessionData.name),i=null;if(r){let c=t.context.options.session?.cookieCache?.strategy||"compact";if(c==="jwe"){let u=await Qa(r,t.context.secret,"better-auth-session");if(u&&u.session&&u.user)i={session:{session:u.session,user:u.user,updatedAt:u.updatedAt,version:u.version},expiresAt:u.exp?u.exp*1e3:Date.now()};else{let l=t.context.authCookies.sessionData.name;return t.setCookie(l,"",{maxAge:0}),t.json(null)}}else if(c==="jwt"){let u=await Up(r,t.context.secret);if(u&&u.session&&u.user)i={session:{session:u.session,user:u.user,updatedAt:u.updatedAt,version:u.version},expiresAt:u.exp?u.exp*1e3:Date.now()};else{let l=t.context.authCookies.sessionData.name;return t.setCookie(l,"",{maxAge:0}),t.json(null)}}else{let u=wt(qk.decode(Ai.decode(r)));if(u)if(await bw("SHA-256","base64urlnopad").verify(t.context.secret,JSON.stringify({...u.session,expiresAt:u.expiresAt}),u.signature))i=u;else{let l=t.context.authCookies.sessionData.name;return t.setCookie(l,"",{maxAge:0}),t.json(null)}}}let n=await t.getSignedCookie(t.context.authCookies.dontRememberToken.name,t.context.secret);if(i?.session&&t.context.options.session?.cookieCache?.enabled&&!t.query?.disableCookieCache){let c=i.session,u=t.context.options.session?.cookieCache?.version,l="1";if(u){if(typeof u=="string")l=u;else if(typeof u=="function"){let f=u(c.session,c.user);l=f instanceof Promise?await f:f}}if((c.version||"1")!==l){let f=t.context.authCookies.sessionData.name;t.setCookie(f,"",{maxAge:0})}else{let f=new Date(c.session.expiresAt);if(i.expiresAt<Date.now()||f<new Date){let d=t.context.authCookies.sessionData.name;t.setCookie(d,"",{maxAge:0})}else{let d=t.context.sessionConfig.cookieRefreshCache;if(d===!1)return t.context.session=c,t.json({session:c.session,user:c.user});if(i.expiresAt-Date.now()<d.updateAge*1e3){let p=Ti(t.context.options.session?.cookieCache?.maxAge||300,"sec"),y={session:{...c.session,expiresAt:p},user:c.user,updatedAt:Date.now()};await vw(t,y,!1);let b=Yn(t.context.options,{...y.session,expiresAt:new Date(y.session.expiresAt),createdAt:new Date(y.session.createdAt),updatedAt:new Date(y.session.updatedAt)}),N=tr(t.context.options,{...y.user,createdAt:new Date(y.user.createdAt),updatedAt:new Date(y.user.updatedAt)});return t.context.session={session:b,user:N},t.json({session:b,user:N})}let m=Yn(t.context.options,{...c.session,expiresAt:new Date(c.session.expiresAt),createdAt:new Date(c.session.createdAt),updatedAt:new Date(c.session.updatedAt)}),h=tr(t.context.options,{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)});return t.context.session={session:m,user:h},t.json({session:m,user:h})}}}let o=await t.context.internalAdapter.findSession(e);if(t.context.session=o,!o||o.session.expiresAt<new Date)return os(t),o&&await t.context.internalAdapter.deleteSession(o.session.token),t.json(null);if(n||t.query?.disableRefresh){let c=Yn(t.context.options,o.session),u=tr(t.context.options,o.user);return t.json({session:c,user:u})}let s=t.context.sessionConfig.expiresIn,a=t.context.sessionConfig.updateAge;if(o.session.expiresAt.valueOf()-s*1e3+a*1e3<=Date.now()&&(!t.query?.disableRefresh||!t.context.options.session?.disableSessionRefresh)){let c=await t.context.internalAdapter.updateSession(o.session.token,{expiresAt:Ti(t.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!c)return os(t),t.json(null,{status:401});let u=(c.expiresAt.valueOf()-Date.now())/1e3;await or(t,{session:c,user:o.user},!1,{maxAge:u});let l=Yn(t.context.options,c),f=tr(t.context.options,o.user);return t.json({session:l,user:f})}return await vw(t,o,!!n),t.json(o)}catch(e){throw t.context.logger.error("INTERNAL_SERVER_ERROR",e),new V("INTERNAL_SERVER_ERROR",{message:ge.FAILED_TO_GET_SESSION})}}),Gr=async(t,e)=>{if(t.context.session)return t.context.session;let r=await Fk()({...t,asResponse:!1,headers:t.headers,returnHeaders:!1,returnStatus:!1,query:{...e,...t.query}}).catch(i=>null);return t.context.session=r,r},ss=ro(async t=>{let e=await Gr(t);if(!e?.session)throw new V("UNAUTHORIZED");return{session:e}}),mo=ro(async t=>{let e=await Gr(t,{disableCookieCache:!0});if(!e?.session)throw new V("UNAUTHORIZED");return{session:e}}),Dq=ro(async t=>{let e=await Gr(t);if(!e?.session&&(t.request||t.headers))throw new V("UNAUTHORIZED");return{session:e}}),Vk=ro(async t=>{let e=await Gr(t);if(!e?.session)throw new V("UNAUTHORIZED");if(t.context.sessionConfig.freshAge===0)return{session:e};let r=t.context.sessionConfig.freshAge,i=new Date(e.session.updatedAt||e.session.createdAt).getTime();if(!(Date.now()-i<r*1e3))throw new V("FORBIDDEN",{message:"Session is not fresh"});return{session:e}}),ZU=()=>$e("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[ss],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async t=>{try{let e=(await t.context.internalAdapter.listSessions(t.context.session.user.id)).filter(r=>r.expiresAt>new Date);return t.json(e)}catch(e){throw t.context.logger.error(e),t.error("INTERNAL_SERVER_ERROR")}}),GU=$e("/revoke-session",{method:"POST",body:ke({token:Y().meta({description:"The token to revoke"})}),use:[mo],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async t=>{let e=t.body.token;if((await t.context.internalAdapter.findSession(e))?.session.userId===t.context.session.user.id)try{await t.context.internalAdapter.deleteSession(e)}catch(r){throw t.context.logger.error(r&&typeof r=="object"&&"name"in r?r.name:"",r),new V("INTERNAL_SERVER_ERROR")}return t.json({status:!0})}),YU=$e("/revoke-sessions",{method:"POST",use:[mo],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async t=>{try{await t.context.internalAdapter.deleteSessions(t.context.session.user.id)}catch(e){throw t.context.logger.error(e&&typeof e=="object"&&"name"in e?e.name:"",e),new V("INTERNAL_SERVER_ERROR")}return t.json({status:!0})}),XU=$e("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[mo],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async t=>{let e=t.context.session;if(!e.user)throw new V("UNAUTHORIZED");let r=(await t.context.internalAdapter.listSessions(e.user.id)).filter(i=>i.expiresAt>new Date).filter(i=>i.token!==t.context.session.session.token);return await Promise.all(r.map(i=>t.context.internalAdapter.deleteSession(i.token))),t.json({status:!0})});function xw(t,e){return t&&(e.options.account?.encryptOAuthTokens?Vp({key:e.secret,data:t}):t)}function Jt(t,e){return e.options.account?.encryptOAuthTokens&&t?Fp({key:e.secret,data:t}):t}Qi();Ga();Bp();Qi();var Lq=Object.defineProperty,zq=Object.defineProperties,jq=Object.getOwnPropertyDescriptors,eD=Object.getOwnPropertySymbols,Bq=Object.prototype.hasOwnProperty,Mq=Object.prototype.propertyIsEnumerable,tD=(t,e,r)=>e in t?Lq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xa=(t,e)=>{for(var r in e||(e={}))Bq.call(e,r)&&tD(t,r,e[r]);if(eD)for(var r of eD(e))Mq.call(e,r)&&tD(t,r,e[r]);return t},Sa=(t,e)=>zq(t,jq(e)),qq=class extends Error{constructor(t,e,r){super(e||t.toString(),{cause:r}),this.status=t,this.statusText=e,this.error=r,Error.captureStackTrace(this,this.constructor)}},Wq=async(t,e)=>{var r,i,n,o,s,a;let c=e||{},u={onRequest:[e?.onRequest],onResponse:[e?.onResponse],onSuccess:[e?.onSuccess],onError:[e?.onError],onRetry:[e?.onRetry]};if(!e||!e?.plugins)return{url:t,options:c,hooks:u};for(let l of e?.plugins||[]){if(l.init){let f=await((r=l.init)==null?void 0:r.call(l,t.toString(),e));c=f.options||c,t=f.url}u.onRequest.push((i=l.hooks)==null?void 0:i.onRequest),u.onResponse.push((n=l.hooks)==null?void 0:n.onResponse),u.onSuccess.push((o=l.hooks)==null?void 0:o.onSuccess),u.onError.push((s=l.hooks)==null?void 0:s.onError),u.onRetry.push((a=l.hooks)==null?void 0:a.onRetry)}return{url:t,options:c,hooks:u}},rD=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(){return this.options.delay}},Fq=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(t){return Math.min(this.options.maxDelay,this.options.baseDelay*2**t)}};function Vq(t){if(typeof t=="number")return new rD({type:"linear",attempts:t,delay:1e3});switch(t.type){case"linear":return new rD(t);case"exponential":return new Fq(t);default:throw new Error("Invalid retry strategy")}}var Kq=async t=>{let e={},r=async i=>typeof i=="function"?await i():i;if(t?.auth){if(t.auth.type==="Bearer"){let i=await r(t.auth.token);if(!i)return e;e.authorization=`Bearer ${i}`}else if(t.auth.type==="Basic"){let[i,n]=await Promise.all([r(t.auth.username),r(t.auth.password)]);if(!i||!n)return e;e.authorization=`Basic ${btoa(`${i}:${n}`)}`}else if(t.auth.type==="Custom"){let[i,n]=await Promise.all([r(t.auth.prefix),r(t.auth.value)]);if(!n)return e;e.authorization=`${i??""} ${n}`}}return e},Hq=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Jq(t){let e=t.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!e)return"json";let i=e.split(";").shift()||"";return Hq.test(i)?"json":r.has(i)||i.startsWith("text/")?"text":"blob"}function Qq(t){try{return JSON.parse(t),!0}catch{return!1}}function Kk(t){if(t===void 0)return!1;let e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}function nD(t){try{return JSON.parse(t)}catch{return t}}function iD(t){return typeof t=="function"}function Zq(t){if(t?.customFetchImpl)return t.customFetchImpl;if(typeof globalThis<"u"&&iD(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&iD(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function Gq(t){let e=new Headers(t?.headers),r=await Kq(t);for(let[i,n]of Object.entries(r||{}))e.set(i,n);if(!e.has("content-type")){let i=Yq(t?.body);i&&e.set("content-type",i)}return e}function Yq(t){return Kk(t)?"application/json":null}function Xq(t){if(!t?.body)return null;let e=new Headers(t?.headers);if(Kk(t.body)&&!e.has("content-type")){for(let[r,i]of Object.entries(t?.body))i instanceof Date&&(t.body[r]=i.toISOString());return JSON.stringify(t.body)}return e.has("content-type")&&e.get("content-type")==="application/x-www-form-urlencoded"&&Kk(t.body)?new URLSearchParams(t.body).toString():t.body}function eW(t,e){var r;if(e?.method)return e.method.toUpperCase();if(t.startsWith("@")){let i=(r=t.split("@")[1])==null?void 0:r.split("/")[0];return sD.includes(i)?i.toUpperCase():e?.body?"POST":"GET"}return e?.body?"POST":"GET"}function tW(t,e){let r;return!t?.signal&&t?.timeout&&(r=setTimeout(()=>e?.abort(),t?.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}var rW=class oD extends Error{constructor(e,r){super(r||JSON.stringify(e,null,2)),this.issues=e,Object.setPrototypeOf(this,oD.prototype)}};async function nW(t,e){let r=await t["~standard"].validate(e);if(r.issues)throw new rW(r.issues);return r.value}var sD=["get","post","put","patch","delete"];function iW(t,e){let{baseURL:r,params:i,query:n}=e||{query:{},params:{},baseURL:""},o=t.startsWith("http")?t.split("/").slice(0,3).join("/"):r||"";if(t.startsWith("@")){let f=t.toString().split("@")[1].split("/")[0];sD.includes(f)&&(t=t.replace(`@${f}/`,"/"))}o.endsWith("/")||(o+="/");let[s,a]=t.replace(o,"").split("?"),c=new URLSearchParams(a);for(let[f,d]of Object.entries(n||{})){if(d==null)continue;let m;if(typeof d=="string")m=d;else if(Array.isArray(d)){for(let h of d)c.append(f,h);continue}else m=JSON.stringify(d);c.set(f,m)}if(i)if(Array.isArray(i)){let f=s.split("/").filter(d=>d.startsWith(":"));for(let[d,m]of f.entries()){let h=i[d];s=s.replace(m,h)}}else for(let[f,d]of Object.entries(i))s=s.replace(`:${f}`,String(d));s=s.split("/").map(encodeURIComponent).join("/"),s.startsWith("/")&&(s=s.slice(1));let u=c.toString();return u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",o.startsWith("http")?new URL(`${s}${u}`,o):`${o}${s}${u}`}var _e=async(t,e)=>{var r,i,n,o,s,a,c,u;let{hooks:l,url:f,options:d}=await Wq(t,e),m=Zq(d),h=new AbortController,p=(r=d.signal)!=null?r:h.signal,y=iW(f,d),b=Xq(d),N=await Gq(d),T=eW(f,d),I=Sa(xa({},d),{url:y,headers:N,body:b,method:T,signal:p});for(let D of l.onRequest)if(D){let P=await D(I);typeof P=="object"&&P!==null&&(I=P)}("pipeTo"in I&&typeof I.pipeTo=="function"||typeof((i=e?.body)==null?void 0:i.pipe)=="function")&&("duplex"in I||(I.duplex="half"));let{clearTimeout:$}=tW(d,h),v=await m(I.url,I);$();let S={response:v,request:I};for(let D of l.onResponse)if(D){let P=await D(Sa(xa({},S),{response:(n=e?.hookOptions)!=null&&n.cloneResponse?v.clone():v}));P instanceof Response?v=P:typeof P=="object"&&P!==null&&(v=P.response)}if(v.ok){if(!(I.method!=="HEAD"))return{data:"",error:null};let P=Jq(v),z={data:null,response:v,request:I};if(P==="json"||P==="text"){let W=await v.text(),Q=(o=I.jsonParser)!=null?o:nD;z.data=await Q(W)}else z.data=await v[P]();I?.output&&I.output&&!I.disableValidation&&(z.data=await nW(I.output,z.data));for(let W of l.onSuccess)W&&await W(Sa(xa({},z),{response:(s=e?.hookOptions)!=null&&s.cloneResponse?v.clone():v}));return e?.throw?z.data:{data:z.data,error:null}}let E=(a=e?.jsonParser)!=null?a:nD,_=await v.text(),O=Qq(_),R=O?await E(_):null,B={response:v,responseText:_,request:I,error:Sa(xa({},R),{status:v.status,statusText:v.statusText})};for(let D of l.onError)D&&await D(Sa(xa({},B),{response:(c=e?.hookOptions)!=null&&c.cloneResponse?v.clone():v}));if(e?.retry){let D=Vq(e.retry),P=(u=e.retryAttempt)!=null?u:0;if(await D.shouldAttemptRetry(P,v)){for(let W of l.onRetry)W&&await W(S);let z=D.getDelay(P);return await new Promise(W=>setTimeout(W,z)),await _e(t,Sa(xa({},e),{retryAttempt:P+1}))}}if(e?.throw)throw new qq(v.status,v.statusText,O?R:_);return{data:null,error:Sa(xa({},R),{status:v.status,statusText:v.statusText})}};function Sw(t){let e=r=>{let i=new Date;return new Date(i.getTime()+r*1e3)};return{tokenType:t.token_type,accessToken:t.access_token,refreshToken:t.refresh_token,accessTokenExpiresAt:t.expires_in?e(t.expires_in):void 0,refreshTokenExpiresAt:t.refresh_token_expires_in?e(t.refresh_token_expires_in):void 0,scopes:t?.scope?typeof t.scope=="string"?t.scope.split(" "):t.scope:[],idToken:t.id_token,raw:t}}async function Nw(t){let e=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",e);return Ai.encode(new Uint8Array(r),{padding:!1})}async function Ge({id:t,options:e,authorizationEndpoint:r,state:i,codeVerifier:n,scopes:o,claims:s,redirectURI:a,duration:c,prompt:u,accessType:l,responseType:f,display:d,loginHint:m,hd:h,responseMode:p,additionalParams:y,scopeJoiner:b}){let N=new URL(r);N.searchParams.set("response_type",f||"code");let T=Array.isArray(e.clientId)?e.clientId[0]:e.clientId;if(N.searchParams.set("client_id",T),N.searchParams.set("state",i),o&&N.searchParams.set("scope",o.join(b||" ")),N.searchParams.set("redirect_uri",e.redirectURI||a),c&&N.searchParams.set("duration",c),d&&N.searchParams.set("display",d),m&&N.searchParams.set("login_hint",m),u&&N.searchParams.set("prompt",u),h&&N.searchParams.set("hd",h),l&&N.searchParams.set("access_type",l),p&&N.searchParams.set("response_mode",p),n){let I=await Nw(n);N.searchParams.set("code_challenge_method","S256"),N.searchParams.set("code_challenge",I)}if(s){let I=s.reduce(($,v)=>($[v]=null,$),{});N.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...I}}))}return y&&Object.entries(y).forEach(([I,$])=>{N.searchParams.set(I,$)}),N}function aD({refreshToken:t,options:e,authentication:r,extraParams:i,resource:n}){let o=new URLSearchParams,s={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(o.set("grant_type","refresh_token"),o.set("refresh_token",t),r==="basic"){let a=Array.isArray(e.clientId)?e.clientId[0]:e.clientId;a?s.authorization="Basic "+Or.encode(`${a}:${e.clientSecret??""}`):s.authorization="Basic "+Or.encode(`:${e.clientSecret??""}`)}else{let a=Array.isArray(e.clientId)?e.clientId[0]:e.clientId;o.set("client_id",a),e.clientSecret&&o.set("client_secret",e.clientSecret)}if(n)if(typeof n=="string")o.append("resource",n);else for(let a of n)o.append("resource",a);if(i)for(let[a,c]of Object.entries(i))o.set(a,c);return{body:o,headers:s}}async function Fe({refreshToken:t,options:e,tokenEndpoint:r,authentication:i,extraParams:n}){let{body:o,headers:s}=aD({refreshToken:t,options:e,authentication:i,extraParams:n}),{data:a,error:c}=await _e(r,{method:"POST",body:o,headers:s});if(c)throw c;let u={accessToken:a.access_token,refreshToken:a.refresh_token,tokenType:a.token_type,scopes:a.scope?.split(" "),idToken:a.id_token};if(a.expires_in){let l=new Date;u.accessTokenExpiresAt=new Date(l.getTime()+a.expires_in*1e3)}return u}function cD({code:t,codeVerifier:e,redirectURI:r,options:i,authentication:n,deviceId:o,headers:s,additionalParams:a={},resource:c}){let u=new URLSearchParams,l={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...s};if(u.set("grant_type","authorization_code"),u.set("code",t),e&&u.set("code_verifier",e),i.clientKey&&u.set("client_key",i.clientKey),o&&u.set("device_id",o),u.set("redirect_uri",i.redirectURI||r),c)if(typeof c=="string")u.append("resource",c);else for(let f of c)u.append("resource",f);if(n==="basic"){let f=Array.isArray(i.clientId)?i.clientId[0]:i.clientId;l.authorization=`Basic ${Or.encode(`${f}:${i.clientSecret??""}`)}`}else{let f=Array.isArray(i.clientId)?i.clientId[0]:i.clientId;u.set("client_id",f),i.clientSecret&&u.set("client_secret",i.clientSecret)}for(let[f,d]of Object.entries(a))u.has(f)||u.append(f,d);return{body:u,headers:l}}async function Ve({code:t,codeVerifier:e,redirectURI:r,options:i,tokenEndpoint:n,authentication:o,deviceId:s,headers:a,additionalParams:c={},resource:u}){let{body:l,headers:f}=cD({code:t,codeVerifier:e,redirectURI:r,options:i,authentication:o,deviceId:s,headers:a,additionalParams:c,resource:u}),{data:d,error:m}=await _e(n,{method:"POST",body:l,headers:f});if(m)throw m;return Sw(d)}var oW=t=>{let e="https://appleid.apple.com/auth/token";return{id:"apple",name:"Apple",async createAuthorizationURL({state:r,scopes:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["email","name"];return t.scope&&o.push(...t.scope),i&&o.push(...i),await Ge({id:"apple",options:t,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:o,state:r,redirectURI:n,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>Ve({code:r,codeVerifier:i,redirectURI:n,options:t,tokenEndpoint:e}),async verifyIdToken(r,i){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(r,i);let{kid:n,alg:o}=sl(r);if(!n||!o)return!1;let{payload:s}=await xi(r,await sW(n),{algorithms:[o],issuer:"https://appleid.apple.com",audience:t.audience&&t.audience.length?t.audience:t.appBundleIdentifier?t.appBundleIdentifier:t.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(a=>{s[a]!==void 0&&(s[a]=!!s[a])}),i&&s.nonce!==i?!1:!!s},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);if(!r.idToken)return null;let i=Fn(r.idToken);if(!i)return null;let n=r.user?`${r.user.name?.firstName} ${r.user.name?.lastName}`:i.name||i.email,o=typeof i.email_verified=="boolean"?i.email_verified:i.email_verified==="true",s={...i,name:n},a=await t.mapProfileToUser?.(s);return{user:{id:i.sub,name:s.name,emailVerified:o,email:i.email,...a},data:s}},options:t}},sW=async t=>{let{data:e}=await _e("https://appleid.apple.com/auth/keys");if(!e?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let r=e.keys.find(i=>i.kid===t);if(!r)throw new Error(`JWK with kid ${t} not found`);return await Ki(r,r.alg)},aW=t=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Secret are required for Atlassian"),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new de("codeVerifier is required for Atlassian");let o=t.disableDefaultScope?[]:["read:jira-user","offline_access"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ge({id:"atlassian",options:t,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n,additionalParams:{audience:"api.atlassian.com"},prompt:t.prompt})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.accessToken)return null;try{let{data:r}=await _e("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(!r)return null;let i=await t.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name,email:r.email,image:r.picture,emailVerified:!1,...i},data:r}}catch(r){return ye.error("Failed to fetch user info from Figma:",r),null}},options:t}),cW=t=>{if(!t.domain||!t.region||!t.userPoolId)throw ye.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new de("DOMAIN_AND_REGION_REQUIRED");let e=t.domain.replace(/^https?:\/\//,""),r=`https://${e}/oauth2/authorize`,i=`https://${e}/oauth2/token`,n=`https://${e}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:o,scopes:s,codeVerifier:a,redirectURI:c}){if(!t.clientId)throw ye.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(t.requireClientSecret&&!t.clientSecret)throw ye.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new de("CLIENT_SECRET_REQUIRED");let u=t.disableDefaultScope?[]:["openid","profile","email"];t.scope&&u.push(...t.scope),s&&u.push(...s);let l=await Ge({id:"cognito",options:{...t},authorizationEndpoint:r,scopes:u,state:o,codeVerifier:a,redirectURI:c,prompt:t.prompt}),f=l.searchParams.get("scope");if(f){l.searchParams.delete("scope");let d=encodeURIComponent(f),m=l.toString(),h=m.includes("?")?"&":"?";return new URL(`${m}${h}scope=${d}`)}return l},validateAuthorizationCode:async({code:o,codeVerifier:s,redirectURI:a})=>Ve({code:o,codeVerifier:s,redirectURI:a,options:t,tokenEndpoint:i}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:i}),async verifyIdToken(o,s){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,s);try{let{kid:a,alg:c}=sl(o);if(!a||!c)return!1;let u=await uW(a,t.region,t.userPoolId),l=`https://cognito-idp.${t.region}.amazonaws.com/${t.userPoolId}`,{payload:f}=await xi(o,u,{algorithms:[c],issuer:l,audience:t.clientId,maxTokenAge:"1h"});return!(s&&f.nonce!==s)}catch(a){return ye.error("Failed to verify ID token:",a),!1}},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(o.idToken)try{let s=Fn(o.idToken);if(!s)return null;let a=s.name||s.given_name||s.username||s.email,c={...s,name:a},u=await t.mapProfileToUser?.(c);return{user:{id:s.sub,name:c.name,email:s.email,image:s.picture,emailVerified:s.email_verified,...u},data:c}}catch(s){ye.error("Failed to decode ID token:",s)}if(o.accessToken)try{let{data:s}=await _e(n,{headers:{Authorization:`Bearer ${o.accessToken}`}});if(s){let a=await t.mapProfileToUser?.(s);return{user:{id:s.sub,name:s.name||s.given_name||s.username,email:s.email,image:s.picture,emailVerified:s.email_verified,...a},data:s}}}catch(s){ye.error("Failed to fetch user info from Cognito:",s)}return null},options:t}},uW=async(t,e,r)=>{let i=`https://cognito-idp.${e}.amazonaws.com/${r}/.well-known/jwks.json`;try{let{data:n}=await _e(i);if(!n?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let o=n.keys.find(s=>s.kid===t);if(!o)throw new Error(`JWK with kid ${t} not found`);return await Ki(o,o.alg)}catch(n){throw ye.error("Failed to fetch Cognito public key:",n),n}},lW=t=>({id:"discord",name:"Discord",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["identify","email"];r&&n.push(...r),t.scope&&n.push(...t.scope);let o=n.includes("bot")&&t.permissions!==void 0?`&permissions=${t.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${n.join("+")}&response_type=code&client_id=${t.clientId}&redirect_uri=${encodeURIComponent(t.redirectURI||i)}&state=${e}&prompt=${t.prompt||"none"}${o}`)},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;if(r.avatar===null)r.image_url=`https://cdn.discordapp.com/embed/avatars/${r.discriminator==="0"?Number(BigInt(r.id)>>BigInt(22))%6:parseInt(r.discriminator)%5}.png`;else{let o=r.avatar.startsWith("a_")?"gif":"png";r.image_url=`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}.${o}`}let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.global_name||r.username||"",email:r.email,emailVerified:r.verified,image:r.image_url,...n},data:r}},options:t}),dW=t=>{let e="https://api.dropboxapi.com/oauth2/token";return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:r,scopes:i,codeVerifier:n,redirectURI:o})=>{let s=t.disableDefaultScope?[]:["account_info.read"];t.scope&&s.push(...t.scope),i&&s.push(...i);let a={};return t.accessType&&(a.token_access_type=t.accessType),await Ge({id:"dropbox",options:t,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:s,state:r,redirectURI:o,codeVerifier:n,additionalParams:a})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>await Ve({code:r,codeVerifier:i,redirectURI:n,options:t,tokenEndpoint:e}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${r.accessToken}`}});if(n)return null;let o=await t.mapProfileToUser?.(i);return{user:{id:i.account_id,name:i.name?.display_name,email:i.email,emailVerified:i.email_verified||!1,image:i.profile_photo_url,...o},data:i}},options:t}},fW=t=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:e,scopes:r,redirectURI:i,loginHint:n}){let o=t.disableDefaultScope?[]:["email","public_profile"];return t.scope&&o.push(...t.scope),r&&o.push(...r),await Ge({id:"facebook",options:t,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:o,state:e,redirectURI:i,loginHint:n,additionalParams:t.configId?{config_id:t.configId}:{}})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(e,r){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(e,r);if(e.split(".").length===3)try{let{payload:i}=await xi(e,uv(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:t.clientId,issuer:"https://www.facebook.com"});return r&&i.nonce!==r?!1:!!i}catch{return!1}return!0},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(e.idToken&&e.idToken.split(".").length===3){let o=Fn(e.idToken),s={id:o.sub,name:o.name,email:o.email,picture:{data:{url:o.picture,height:100,width:100,is_silhouette:!1}}},a=await t.mapProfileToUser?.({...s,email_verified:!1});return{user:{...s,emailVerified:!1,...a},data:o}}let{data:r,error:i}=await _e("https://graph.facebook.com/me?fields="+["id","name","email","picture",...t?.fields||[]].join(","),{auth:{type:"Bearer",token:e.accessToken}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.email,image:r.picture.data.url,emailVerified:r.email_verified,...n},data:r}},options:t}),pW=t=>({id:"figma",name:"Figma",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new de("codeVerifier is required for Figma");let o=t.disableDefaultScope?[]:["file_read"];return t.scope&&o.push(...t.scope),r&&o.push(...r),await Ge({id:"figma",options:t,authorizationEndpoint:"https://www.figma.com/oauth",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);try{let{data:r}=await _e("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(!r)return ye.error("Failed to fetch user from Figma"),null;let i=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.handle,email:r.email,image:r.img_url,emailVerified:!1,...i},data:r}}catch(r){return ye.error("Failed to fetch user info from Figma:",r),null}},options:t}),mW=t=>{let e="https://github.com/login/oauth/access_token";return{id:"github",name:"GitHub",createAuthorizationURL({state:r,scopes:i,loginHint:n,codeVerifier:o,redirectURI:s}){let a=t.disableDefaultScope?[]:["read:user","user:email"];return t.scope&&a.push(...t.scope),i&&a.push(...i),Ge({id:"github",options:t,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:a,state:r,codeVerifier:o,redirectURI:s,loginHint:n,prompt:t.prompt})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>Ve({code:r,codeVerifier:i,redirectURI:n,options:t,tokenEndpoint:e}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${r.accessToken}`}});if(n)return null;let{data:o}=await _e("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${r.accessToken}`,"User-Agent":"better-auth"}});!i.email&&o&&(i.email=(o.find(c=>c.primary)??o[0])?.email);let s=o?.find(c=>c.email===i.email)?.verified??!1,a=await t.mapProfileToUser?.(i);return{user:{id:i.id,name:i.name||i.login,email:i.email,image:i.avatar_url,emailVerified:s,...a},data:i}},options:t}},Hk=(t="")=>t.split("://").map(e=>e.replace(/\/{2,}/g,"/")).join("://"),hW=t=>{let e=t||"https://gitlab.com";return{authorizationEndpoint:Hk(`${e}/oauth/authorize`),tokenEndpoint:Hk(`${e}/oauth/token`),userinfoEndpoint:Hk(`${e}/api/v4/user`)}},gW=t=>{let{authorizationEndpoint:e,tokenEndpoint:r,userinfoEndpoint:i}=hW(t.issuer),n="gitlab";return{id:n,name:"Gitlab",createAuthorizationURL:async({state:o,scopes:s,codeVerifier:a,loginHint:c,redirectURI:u})=>{let l=t.disableDefaultScope?[]:["read_user"];return t.scope&&l.push(...t.scope),s&&l.push(...s),await Ge({id:n,options:t,authorizationEndpoint:e,scopes:l,state:o,redirectURI:u,codeVerifier:a,loginHint:c})},validateAuthorizationCode:async({code:o,redirectURI:s,codeVerifier:a})=>Ve({code:o,redirectURI:s,options:t,codeVerifier:a,tokenEndpoint:r}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:r}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);let{data:s,error:a}=await _e(i,{headers:{authorization:`Bearer ${o.accessToken}`}});if(a||s.state!=="active"||s.locked)return null;let c=await t.mapProfileToUser?.(s);return{user:{id:s.id,name:s.name??s.username,email:s.email,image:s.avatar_url,emailVerified:s.email_verified??!1,...c},data:s}},options:t}},yW=t=>({id:"google",name:"Google",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n,loginHint:o,display:s}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new de("codeVerifier is required for Google");let a=t.disableDefaultScope?[]:["email","profile","openid"];return t.scope&&a.push(...t.scope),r&&a.push(...r),await Ge({id:"google",options:t,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:a,state:e,codeVerifier:i,redirectURI:n,prompt:t.prompt,accessType:t.accessType,display:s||t.display,loginHint:o,hd:t.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(e,r){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(e,r);let{kid:i,alg:n}=sl(e);if(!i||!n)return!1;let{payload:o}=await xi(e,await wW(i),{algorithms:[n],issuer:["https://accounts.google.com","accounts.google.com"],audience:t.clientId,maxTokenAge:"1h"});return!(r&&o.nonce!==r)},async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.idToken)return null;let r=Fn(e.idToken),i=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...i},data:r}},options:t}),wW=async t=>{let{data:e}=await _e("https://www.googleapis.com/oauth2/v3/certs");if(!e?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let r=e.keys.find(i=>i.kid===t);if(!r)throw new Error(`JWK with kid ${t} not found`);return await Ki(r,r.alg)},bW=t=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["openid","profile","email"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ge({id:"huggingface",options:t,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...n},data:r}},options:t}),vW=t=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ge({id:"kakao",options:t,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:n,state:e,redirectURI:i})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i||!r)return null;let n=await t.mapProfileToUser?.(r),o=r.kakao_account||{},s=o.profile||{};return{user:{id:String(r.id),name:s.nickname||o.name||void 0,email:o.email,image:s.profile_image_url||s.thumbnail_image_url,emailVerified:!!o.is_email_valid&&!!o.is_email_verified,...n},data:r}},options:t}),xW=t=>({id:"kick",name:"Kick",createAuthorizationURL({state:e,scopes:r,redirectURI:i,codeVerifier:n}){let o=t.disableDefaultScope?[]:["user:read"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ge({id:"kick",redirectURI:i,options:t,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:o,codeVerifier:n,state:e})},async validateAuthorizationCode({code:e,redirectURI:r,codeVerifier:i}){return Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:i})},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=r.data[0],o=await t.mapProfileToUser?.(n);return{user:{id:n.user_id,name:n.name,email:n.email,image:n.profile_picture,emailVerified:!1,...o},data:n}},options:t}),SW=t=>{let e="https://access.line.me/oauth2/v2.1/authorize",r="https://api.line.me/oauth2/v2.1/token",i="https://api.line.me/oauth2/v2.1/userinfo",n="https://api.line.me/oauth2/v2.1/verify";return{id:"line",name:"LINE",async createAuthorizationURL({state:o,scopes:s,codeVerifier:a,redirectURI:c,loginHint:u}){let l=t.disableDefaultScope?[]:["openid","profile","email"];return t.scope&&l.push(...t.scope),s&&l.push(...s),await Ge({id:"line",options:t,authorizationEndpoint:e,scopes:l,state:o,codeVerifier:a,redirectURI:c,loginHint:u})},validateAuthorizationCode:async({code:o,codeVerifier:s,redirectURI:a})=>Ve({code:o,codeVerifier:s,redirectURI:a,options:t,tokenEndpoint:r}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:r}),async verifyIdToken(o,s){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,s);let a=new URLSearchParams;a.set("id_token",o),a.set("client_id",t.clientId),s&&a.set("nonce",s);let{data:c,error:u}=await _e(n,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:a});return!(u||!c||c.aud!==t.clientId||c.nonce&&c.nonce!==s)},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);let s=null;if(o.idToken)try{s=Fn(o.idToken)}catch{}if(!s){let{data:f}=await _e(i,{headers:{authorization:`Bearer ${o.accessToken}`}});s=f||null}if(!s)return null;let a=await t.mapProfileToUser?.(s),c=s.sub||s.userId,u=s.name||s.displayName,l=s.picture||s.pictureUrl||void 0;return{user:{id:c,name:u,email:s.email,image:l,emailVerified:!1,...a},data:s}},options:t}},NW=t=>{let e="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:r,scopes:i,loginHint:n,redirectURI:o}){let s=t.disableDefaultScope?[]:["read"];return t.scope&&s.push(...t.scope),i&&s.push(...i),Ge({id:"linear",options:t,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:s,state:r,redirectURI:o,loginHint:n})},validateAuthorizationCode:async({code:r,redirectURI:i})=>Ve({code:r,redirectURI:i,options:t,tokenEndpoint:e}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:e}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(n||!i?.data?.viewer)return null;let o=i.data.viewer,s=await t.mapProfileToUser?.(o);return{user:{id:i.data.viewer.id,name:i.data.viewer.name,email:i.data.viewer.email,image:i.data.viewer.avatarUrl,emailVerified:!1,...s},data:o}},options:t}},AW=t=>{let e="https://www.linkedin.com/oauth/v2/authorization",r="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:i,scopes:n,redirectURI:o,loginHint:s})=>{let a=t.disableDefaultScope?[]:["profile","email","openid"];return t.scope&&a.push(...t.scope),n&&a.push(...n),await Ge({id:"linkedin",options:t,authorizationEndpoint:e,scopes:a,state:i,loginHint:s,redirectURI:o})},validateAuthorizationCode:async({code:i,redirectURI:n})=>await Ve({code:i,redirectURI:n,options:t,tokenEndpoint:r}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async i=>Fe({refreshToken:i,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:r}),async getUserInfo(i){if(t.getUserInfo)return t.getUserInfo(i);let{data:n,error:o}=await _e("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${i.accessToken}`}});if(o)return null;let s=await t.mapProfileToUser?.(n);return{user:{id:n.sub,name:n.name,email:n.email,emailVerified:n.email_verified||!1,image:n.picture,...s},data:n}},options:t}},_W=t=>{let e=t.tenantId||"common",r=t.authority||"https://login.microsoftonline.com",i=`${r}/${e}/oauth2/v2.0/authorize`,n=`${r}/${e}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(o){let s=t.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return t.scope&&s.push(...t.scope),o.scopes&&s.push(...o.scopes),Ge({id:"microsoft",options:t,authorizationEndpoint:i,state:o.state,codeVerifier:o.codeVerifier,scopes:s,redirectURI:o.redirectURI,prompt:t.prompt,loginHint:o.loginHint})},validateAuthorizationCode({code:o,codeVerifier:s,redirectURI:a}){return Ve({code:o,codeVerifier:s,redirectURI:a,options:t,tokenEndpoint:n})},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(!o.idToken)return null;let s=Fn(o.idToken),a=t.profilePhotoSize||48;await _e(`https://graph.microsoft.com/v1.0/me/photos/${a}x${a}/$value`,{headers:{Authorization:`Bearer ${o.accessToken}`},async onResponse(l){if(!(t.disableProfilePhoto||!l.response.ok))try{let f=await l.response.clone().arrayBuffer();s.picture=`data:image/jpeg;base64, ${Or.encode(f)}`}catch(f){ye.error(f&&typeof f=="object"&&"name"in f?f.name:"",f)}}});let c=await t.mapProfileToUser?.(s),u=s.email_verified!==void 0?s.email_verified:!!(s.email&&(s.verified_primary_email?.includes(s.email)||s.verified_secondary_email?.includes(s.email)));return{user:{id:s.sub,name:s.name,email:s.email,image:s.picture,emailVerified:u,...c},data:s}},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>{let s=t.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return t.scope&&s.push(...t.scope),Fe({refreshToken:o,options:{clientId:t.clientId,clientSecret:t.clientSecret},extraParams:{scope:s.join(" ")},tokenEndpoint:n})},options:t}},EW=t=>({id:"naver",name:"Naver",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["profile","email"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ge({id:"naver",options:t,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:n,state:e,redirectURI:i})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i||!r||r.resultcode!=="00")return null;let n=await t.mapProfileToUser?.(r),o=r.response||{};return{user:{id:o.id,name:o.name||o.nickname,email:o.email,image:o.profile_image,emailVerified:!1,...n},data:r}},options:t}),kW=t=>{let e="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:r,scopes:i,loginHint:n,redirectURI:o}){let s=t.disableDefaultScope?[]:[];return t.scope&&s.push(...t.scope),i&&s.push(...i),Ge({id:"notion",options:t,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:s,state:r,redirectURI:o,loginHint:n,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:r,redirectURI:i})=>Ve({code:r,redirectURI:i,options:t,tokenEndpoint:e,authentication:"basic"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:e}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${r.accessToken}`,"Notion-Version":"2022-06-28"}});if(n||!i)return null;let o=i.bot?.owner?.user;if(!o)return null;let s=await t.mapProfileToUser?.(o);return{user:{id:o.id,name:o.name||"Notion User",email:o.person?.email||null,image:o.avatar_url,emailVerified:!1,...s},data:o}},options:t}},TW=t=>{let e=t.issuer||"https://idp.paybin.io",r=`${e}/oauth2/authorize`,i=`${e}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:n,scopes:o,codeVerifier:s,redirectURI:a,loginHint:c}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!s)throw new de("codeVerifier is required for Paybin");let u=t.disableDefaultScope?[]:["openid","email","profile"];return t.scope&&u.push(...t.scope),o&&u.push(...o),await Ge({id:"paybin",options:t,authorizationEndpoint:r,scopes:u,state:n,codeVerifier:s,redirectURI:a,prompt:t.prompt,loginHint:c})},validateAuthorizationCode:async({code:n,codeVerifier:o,redirectURI:s})=>Ve({code:n,codeVerifier:o,redirectURI:s,options:t,tokenEndpoint:i}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async n=>Fe({refreshToken:n,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:i}),async getUserInfo(n){if(t.getUserInfo)return t.getUserInfo(n);if(!n.idToken)return null;let o=Fn(n.idToken),s=await t.mapProfileToUser?.(o);return{user:{id:o.sub,name:o.name||o.preferred_username||(o.email?o.email.split("@")[0]:"User")||"User",email:o.email,image:o.picture,emailVerified:o.email_verified||!1,...s},data:o}},options:t}},IW=t=>{let e=(t.environment||"sandbox")==="sandbox",r=e?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",i=e?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",n=e?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:o,codeVerifier:s,redirectURI:a}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");return await Ge({id:"paypal",options:t,authorizationEndpoint:r,scopes:[],state:o,codeVerifier:s,redirectURI:a,prompt:t.prompt})},validateAuthorizationCode:async({code:o,redirectURI:s})=>{let a=Or.encode(`${t.clientId}:${t.clientSecret}`);try{let c=await _e(i,{method:"POST",headers:{Authorization:`Basic ${a}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:o,redirect_uri:s}).toString()});if(!c.data)throw new de("FAILED_TO_GET_ACCESS_TOKEN");let u=c.data;return{accessToken:u.access_token,refreshToken:u.refresh_token,accessTokenExpiresAt:u.expires_in?new Date(Date.now()+u.expires_in*1e3):void 0,idToken:u.id_token}}catch(c){throw ye.error("PayPal token exchange failed:",c),new de("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>{let s=Or.encode(`${t.clientId}:${t.clientSecret}`);try{let a=await _e(i,{method:"POST",headers:{Authorization:`Basic ${s}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:o}).toString()});if(!a.data)throw new de("FAILED_TO_REFRESH_ACCESS_TOKEN");let c=a.data;return{accessToken:c.access_token,refreshToken:c.refresh_token,accessTokenExpiresAt:c.expires_in?new Date(Date.now()+c.expires_in*1e3):void 0}}catch(a){throw ye.error("PayPal token refresh failed:",a),new de("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(o,s){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,s);try{return!!Fn(o).sub}catch(a){return ye.error("Failed to verify PayPal ID token:",a),!1}},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(!o.accessToken)return ye.error("Access token is required to fetch PayPal user info"),null;try{let s=await _e(`${n}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${o.accessToken}`,Accept:"application/json"}});if(!s.data)return ye.error("Failed to fetch user info from PayPal"),null;let a=s.data,c=await t.mapProfileToUser?.(a);return{user:{id:a.user_id,name:a.name,email:a.email,image:a.picture,emailVerified:a.email_verified,...c},data:a}}catch(s){return ye.error("Failed to fetch user info from PayPal:",s),null}},options:t}},$W=t=>({id:"polar",name:"Polar",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["openid","profile","email"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ge({id:"polar",options:t,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n,prompt:t.prompt})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.public_name||r.username,email:r.email,image:r.avatar_url,emailVerified:r.email_verified??!1,...n},data:r}},options:t}),OW=t=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["identity"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ge({id:"reddit",options:t,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:n,state:e,redirectURI:i,duration:t.duration})},validateAuthorizationCode:async({code:e,redirectURI:r})=>{let i=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:t.redirectURI||r}),{data:n,error:o}=await _e("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${Or.encode(`${t.clientId}:${t.clientSecret}`)}`},body:i.toString()});if(o)throw o;return Sw(n)},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${e.accessToken}`,"User-Agent":"better-auth"}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.oauth_client_id,emailVerified:r.has_verified_email,image:r.icon_img?.split("?")[0],...n},data:r}},options:t}),CW=t=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["openid","profile"];return t.scope&&n.push(...t.scope),r&&n.push(...r),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${n.join("+")}&response_type=code&client_id=${t.clientId}&redirect_uri=${encodeURIComponent(t.redirectURI||i)}&state=${e}&prompt=${t.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:t.redirectURI||r,options:t,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.nickname||r.preferred_username||"",image:r.picture,email:r.preferred_username||null,emailVerified:!1,...n},data:{...r}}},options:t}),PW=t=>{let e=(t.environment??"production")==="sandbox",r=t.loginUrl?`https://${t.loginUrl}/services/oauth2/authorize`:e?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",i=t.loginUrl?`https://${t.loginUrl}/services/oauth2/token`:e?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",n=t.loginUrl?`https://${t.loginUrl}/services/oauth2/userinfo`:e?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:o,scopes:s,codeVerifier:a,redirectURI:c}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!a)throw new de("codeVerifier is required for Salesforce");let u=t.disableDefaultScope?[]:["openid","email","profile"];return t.scope&&u.push(...t.scope),s&&u.push(...s),Ge({id:"salesforce",options:t,authorizationEndpoint:r,scopes:u,state:o,codeVerifier:a,redirectURI:t.redirectURI||c})},validateAuthorizationCode:async({code:o,codeVerifier:s,redirectURI:a})=>Ve({code:o,codeVerifier:s,redirectURI:t.redirectURI||a,options:t,tokenEndpoint:i}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:i}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);try{let{data:s}=await _e(n,{headers:{Authorization:`Bearer ${o.accessToken}`}});if(!s)return ye.error("Failed to fetch user info from Salesforce"),null;let a=await t.mapProfileToUser?.(s);return{user:{id:s.user_id,name:s.name,email:s.email,image:s.photos?.picture||s.photos?.thumbnail,emailVerified:s.email_verified??!1,...a},data:s}}catch(s){return ye.error("Failed to fetch user info from Salesforce:",s),null}},options:t}},RW=t=>({id:"slack",name:"Slack",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["openid","profile","email"];r&&n.push(...r),t.scope&&n.push(...t.scope);let o=new URL("https://slack.com/openid/connect/authorize");return o.searchParams.set("scope",n.join(" ")),o.searchParams.set("response_type","code"),o.searchParams.set("client_id",t.clientId),o.searchParams.set("redirect_uri",t.redirectURI||i),o.searchParams.set("state",e),o},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r["https://slack.com/user_id"],name:r.name||"",email:r.email,emailVerified:r.email_verified,image:r.picture||r["https://slack.com/user_image_512"],...n},data:r}},options:t}),UW=t=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["user-read-email"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ge({id:"spotify",options:t,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,email:r.email,image:r.images[0]?.url,emailVerified:!1,...n},data:r}},options:t}),DW=t=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["user.info.profile"];return t.scope&&n.push(...t.scope),r&&n.push(...r),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${n.join(",")}&response_type=code&client_key=${t.clientKey}&redirect_uri=${encodeURIComponent(t.redirectURI||i)}&state=${e}`)},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:t.redirectURI||r,options:{clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientSecret:t.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:t.clientKey}}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e(`https://open.tiktokapis.com/v2/user/info/?fields=${["open_id","avatar_large_url","display_name","username"].join(",")}`,{headers:{authorization:`Bearer ${e.accessToken}`}});return i?null:{user:{email:r.data.user.email||r.data.user.username,id:r.data.user.open_id,name:r.data.user.display_name||r.data.user.username,image:r.data.user.avatar_large_url,emailVerified:!1},data:r}},options:t}),LW=t=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["user:read:email","openid"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ge({id:"twitch",redirectURI:i,options:t,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:n,state:e,claims:t.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let r=e.idToken;if(!r)return ye.error("No idToken found in token"),null;let i=Fn(r),n=await t.mapProfileToUser?.(i);return{user:{id:i.sub,name:i.preferred_username,email:i.email,image:i.picture,emailVerified:i.email_verified,...n},data:i}},options:t}),zW=t=>({id:"twitter",name:"Twitter",createAuthorizationURL(e){let r=t.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return t.scope&&r.push(...t.scope),e.scopes&&r.push(...e.scopes),Ge({id:"twitter",options:t,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:r,state:e.state,codeVerifier:e.codeVerifier,redirectURI:e.redirectURI})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,authentication:"basic",redirectURI:i,options:t,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let{data:n,error:o}=await _e("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}}),s=!1;!o&&n?.data?.confirmed_email&&(r.data.email=n.data.confirmed_email,s=!0);let a=await t.mapProfileToUser?.(r);return{user:{id:r.data.id,name:r.data.name,email:r.data.email||r.data.username||null,image:r.data.profile_image_url,emailVerified:s,...a},data:r}},options:t}),jW=t=>({id:"vercel",name:"Vercel",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){if(!i)throw new de("codeVerifier is required for Vercel");let o;return(t.scope!==void 0||r!==void 0)&&(o=[],t.scope&&o.push(...t.scope),r&&o.push(...r)),Ge({id:"vercel",options:t,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://api.vercel.com/login/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i||!r)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name??r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...n},data:r}},options:t}),BW=t=>({id:"vk",name:"VK",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["email","phone"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ge({id:"vk",options:t,authorizationEndpoint:"https://id.vk.com/authorize",scopes:o,state:e,redirectURI:n,codeVerifier:i})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i,deviceId:n})=>Ve({code:e,codeVerifier:r,redirectURI:t.redirectURI||i,options:t,deviceId:n,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.accessToken)return null;let r=new URLSearchParams({access_token:e.accessToken,client_id:t.clientId}).toString(),{data:i,error:n}=await _e("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(n)return null;let o=await t.mapProfileToUser?.(i);return!i.user.email&&!o?.email?null:{user:{id:i.user.user_id,first_name:i.user.first_name,last_name:i.user.last_name,email:i.user.email,image:i.user.avatar,emailVerified:!1,birthday:i.user.birthday,sex:i.user.sex,name:`${i.user.first_name} ${i.user.last_name}`,...o},data:i}},options:t}),MW=t=>{let e={pkce:!0,...t};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:r,redirectURI:i,codeVerifier:n})=>{let o=new URLSearchParams({response_type:"code",redirect_uri:e.redirectURI?e.redirectURI:i,client_id:e.clientId,state:r});if(e.pkce){let a=await Nw(n);o.set("code_challenge_method","S256"),o.set("code_challenge",a)}let s=new URL("https://zoom.us/oauth/authorize");return s.search=o.toString(),s},validateAuthorizationCode:async({code:r,redirectURI:i,codeVerifier:n})=>Ve({code:r,redirectURI:e.redirectURI||i,codeVerifier:n,options:e,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(r){if(e.getUserInfo)return e.getUserInfo(r);let{data:i,error:n}=await _e("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${r.accessToken}`}});if(n)return null;let o=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.display_name,image:i.pic_url,email:i.email,emailVerified:!!i.verified,...o},data:{...i}}}}},Jk={apple:oW,atlassian:aW,cognito:cW,discord:lW,facebook:fW,figma:pW,github:mW,microsoft:_W,google:yW,huggingface:bW,slack:RW,spotify:UW,twitch:LW,twitter:zW,dropbox:dW,kick:xW,linear:NW,linkedin:AW,gitlab:gW,tiktok:DW,reddit:OW,roblox:CW,salesforce:PW,vk:BW,zoom:MW,notion:kW,kakao:vW,naver:EW,line:SW,paybin:TW,paypal:IW,polar:$W,vercel:jW},qW=Object.keys(Jk),Aw=Zs(qW).or(Y());var uD=$e("/list-accounts",{method:"GET",use:[ss],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async t=>{let e=t.context.session,r=await t.context.internalAdapter.findAccounts(e.user.id);return t.json(r.map(i=>({id:i.id,providerId:i.providerId,createdAt:i.createdAt,updatedAt:i.updatedAt,accountId:i.accountId,userId:i.userId,scopes:i.scope?.split(",")||[]})))}),lD=$e("/link-social",{method:"POST",requireHeaders:!0,body:ke({callbackURL:Y().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:Aw,idToken:ke({token:Y(),nonce:Y().optional(),accessToken:Y().optional(),refreshToken:Y().optional(),scopes:ln(Y()).optional()}).optional(),requestSignUp:Vt().optional(),scopes:ln(Y()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:Y().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:Vt().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:An(Y(),Fr()).optional()}),use:[ss],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async t=>{let e=t.context.session,r=t.context.socialProviders.find(o=>o.id===t.body.provider);if(!r)throw t.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.PROVIDER_NOT_FOUND});if(t.body.idToken){if(!r.verifyIdToken)throw t.context.logger.error("Provider does not support id token verification",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.ID_TOKEN_NOT_SUPPORTED});let{token:o,nonce:s}=t.body.idToken;if(!await r.verifyIdToken(o,s))throw t.context.logger.error("Invalid id token",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.INVALID_TOKEN});let a=await r.getUserInfo({idToken:o,accessToken:t.body.idToken.accessToken,refreshToken:t.body.idToken.refreshToken});if(!a||!a?.user)throw t.context.logger.error("Failed to get user info",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.FAILED_TO_GET_USER_INFO});let c=String(a.user.id);if(!a.user.email)throw t.context.logger.error("User email not found",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.USER_EMAIL_NOT_FOUND});if((await t.context.internalAdapter.findAccounts(e.user.id)).find(u=>u.providerId===r.id&&u.accountId===c))return t.json({url:"",status:!0,redirect:!1});if(!t.context.options.account?.accountLinking?.trustedProviders?.includes(r.id)&&!a.user.emailVerified||t.context.options.account?.accountLinking?.enabled===!1)throw new V("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(a.user.email!==e.user.email&&t.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new V("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await t.context.internalAdapter.createAccount({userId:e.user.id,providerId:r.id,accountId:c,accessToken:t.body.idToken.accessToken,idToken:o,refreshToken:t.body.idToken.refreshToken,scope:t.body.idToken.scopes?.join(",")})}catch{throw new V("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(t.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await t.context.internalAdapter.updateUser(e.user.id,{name:a.user?.name,image:a.user?.image})}catch(u){console.warn("Could not update user - "+u.toString())}return t.json({url:"",status:!0,redirect:!1})}let i=await xd(t,{userId:e.user.id,email:e.user.email},t.body.additionalData),n=await r.createAuthorizationURL({state:i.state,codeVerifier:i.codeVerifier,redirectURI:`${t.context.baseURL}/callback/${r.id}`,scopes:t.body.scopes});return t.json({url:n.toString(),redirect:!t.body.disableRedirect})}),dD=$e("/unlink-account",{method:"POST",body:ke({providerId:Y(),accountId:Y().optional()}),use:[Vk],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async t=>{let{providerId:e,accountId:r}=t.body,i=await t.context.internalAdapter.findAccounts(t.context.session.user.id);if(i.length===1&&!t.context.options.account?.accountLinking?.allowUnlinkingAll)throw new V("BAD_REQUEST",{message:ge.FAILED_TO_UNLINK_LAST_ACCOUNT});let n=i.find(o=>r?o.accountId===r&&o.providerId===e:o.providerId===e);if(!n)throw new V("BAD_REQUEST",{message:ge.ACCOUNT_NOT_FOUND});return await t.context.internalAdapter.deleteAccount(n.id),t.json({status:!0})}),Qk=$e("/get-access-token",{method:"POST",body:ke({providerId:Y().meta({description:"The provider ID for the OAuth provider"}),accountId:Y().meta({description:"The account ID associated with the refresh token"}).optional(),userId:Y().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async t=>{let{providerId:e,accountId:r,userId:i}=t.body||{},n=t.request,o=await Gr(t);if(n&&!o)throw t.error("UNAUTHORIZED");let s=o?.user?.id||i;if(!s)throw t.error("UNAUTHORIZED");if(!t.context.socialProviders.find(l=>l.id===e))throw new V("BAD_REQUEST",{message:`Provider ${e} is not supported.`});let a=await ww(t),c;if(a&&e===a.providerId&&(!r||a.id===r)?c=a:c=(await t.context.internalAdapter.findAccounts(s)).find(l=>r?l.id===r&&l.providerId===e:l.providerId===e),!c)throw new V("BAD_REQUEST",{message:"Account not found"});let u=t.context.socialProviders.find(l=>l.id===e);if(!u)throw new V("BAD_REQUEST",{message:`Provider ${e} not found.`});try{let l=null,f=c.accessTokenExpiresAt&&new Date(c.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(c.refreshToken&&f&&u.refreshAccessToken){let m=await xw(c.refreshToken,t.context);l=await u.refreshAccessToken(m);let h={accessToken:await Jt(l.accessToken,t.context),accessTokenExpiresAt:l.accessTokenExpiresAt,refreshToken:await Jt(l.refreshToken,t.context),refreshTokenExpiresAt:l.refreshTokenExpiresAt},p=null;c.id&&(p=await t.context.internalAdapter.updateAccount(c.id,h)),t.context.options.account?.storeAccountCookie&&await wu(t,{...c,...p??h})}let d={accessToken:l?.accessToken??await xw(c.accessToken??"",t.context),accessTokenExpiresAt:l?.accessTokenExpiresAt??c.accessTokenExpiresAt??void 0,scopes:c.scope?.split(",")??[],idToken:l?.idToken??c.idToken??void 0};return t.json(d)}catch(l){throw new V("BAD_REQUEST",{message:"Failed to get a valid access token",cause:l})}}),fD=$e("/refresh-token",{method:"POST",body:ke({providerId:Y().meta({description:"The provider ID for the OAuth provider"}),accountId:Y().meta({description:"The account ID associated with the refresh token"}).optional(),userId:Y().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async t=>{let{providerId:e,accountId:r,userId:i}=t.body,n=t.request,o=await Gr(t);if(n&&!o)throw t.error("UNAUTHORIZED");let s=o?.user?.id||i;if(!s)throw new V("BAD_REQUEST",{message:"Either userId or session is required"});let a=t.context.socialProviders.find(f=>f.id===e);if(!a)throw new V("BAD_REQUEST",{message:`Provider ${e} not found.`});if(!a.refreshAccessToken)throw new V("BAD_REQUEST",{message:`Provider ${e} does not support token refreshing.`});let c,u=await ww(t);if(u&&(!e||e===u?.providerId)?c=u:c=(await t.context.internalAdapter.findAccounts(s)).find(f=>r?f.id===r&&f.providerId===e:f.providerId===e),!c)throw new V("BAD_REQUEST",{message:"Account not found"});let l;if(u&&e===u.providerId?l=u.refreshToken??void 0:l=c.refreshToken??void 0,!l)throw new V("BAD_REQUEST",{message:"Refresh token not found"});try{let f=await xw(l,t.context),d=await a.refreshAccessToken(f);if(c.id){let m={...c||{},accessToken:await Jt(d.accessToken,t.context),refreshToken:await Jt(d.refreshToken,t.context),accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scopes?.join(",")||c.scope,idToken:d.idToken||c.idToken};await t.context.internalAdapter.updateAccount(c.id,m)}return u&&e===u.providerId&&t.context.options.account?.storeAccountCookie&&await wu(t,{...u,accessToken:await Jt(d.accessToken,t.context),refreshToken:await Jt(d.refreshToken,t.context),accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scopes?.join(",")||u.scope,idToken:d.idToken||u.idToken}),t.json({accessToken:d.accessToken,refreshToken:d.refreshToken,accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scopes?.join(",")||c.scope,idToken:d.idToken||c.idToken,providerId:c.providerId,accountId:c.accountId})}catch(f){throw new V("BAD_REQUEST",{message:"Failed to refresh access token",cause:f})}}),WW=Nn(ke({accountId:Y().meta({description:"The provider given account id for which to get the account info"}).optional()})),pD=$e("/account-info",{method:"GET",use:[ss],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:WW},async t=>{let e=t.query?.accountId,r;if(e){let s=await t.context.internalAdapter.findAccount(e);s&&(r=s)}else if(t.context.options.account?.storeAccountCookie){let s=await ww(t);s&&(r=s)}if(!r||r.userId!==t.context.session.user.id)throw new V("BAD_REQUEST",{message:"Account not found"});let i=t.context.socialProviders.find(s=>s.id===r.providerId);if(!i)throw new V("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${r.providerId} but it is not configured`});let n=await Qk({...t,method:"POST",body:{accountId:r.id,providerId:r.providerId},returnHeaders:!1,returnStatus:!1});if(!n.accessToken)throw new V("BAD_REQUEST",{message:"Access token not found"});let o=await i.getUserInfo({...n,accessToken:n.accessToken});return t.json(o)});async function zr(t,e,r,i=3600,n){return await al({email:e.toLowerCase(),updateTo:r,...n},t,i)}async function Zk(t,e){if(!t.context.options.emailVerification?.sendVerificationEmail)throw t.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await zr(t.context.secret,e.email,void 0,t.context.options.emailVerification?.expiresIn),i=t.body.callbackURL?encodeURIComponent(t.body.callbackURL):encodeURIComponent("/"),n=`${t.context.baseURL}/verify-email?token=${r}&callbackURL=${i}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:e,url:n,token:r},t.request))}var mD=$e("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:ke({email:Rr().meta({description:"The email to send the verification email to"}),callbackURL:Y().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async t=>{if(!t.context.options.emailVerification?.sendVerificationEmail)throw t.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:e}=t.body,r=await Gr(t);if(!r){let i=await t.context.internalAdapter.findUserByEmail(e);return i?(await Zk(t,i.user),t.json({status:!0})):(await zr(t.context.secret,e,void 0,t.context.options.emailVerification?.expiresIn),t.json({status:!0}))}if(r?.user.emailVerified)throw new V("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(r?.user.email!==e)throw new V("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await Zk(t,r.user),t.json({status:!0})}),hD=$e("/verify-email",{method:"GET",operationId:"verifyEmail",query:ke({token:Y().meta({description:"The token to verify the email"}),callbackURL:Y().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[Xs(t=>t.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async t=>{function e(a){throw t.query.callbackURL?t.query.callbackURL.includes("?")?t.redirect(`${t.query.callbackURL}&error=${a}`):t.redirect(`${t.query.callbackURL}?error=${a}`):new V("UNAUTHORIZED",{message:a})}let{token:r}=t.query,i;try{i=await xi(r,new TextEncoder().encode(t.context.secret),{algorithms:["HS256"]})}catch(a){return a instanceof vs?e("token_expired"):e("invalid_token")}let n=ke({email:Rr(),updateTo:Y().optional(),requestType:Y().optional()}).parse(i.payload),o=await t.context.internalAdapter.findUserByEmail(n.email);if(!o)return e("user_not_found");if(n.updateTo){let a=await Gr(t);if(a&&a.user.email!==n.email)return e("unauthorized");if(n.requestType==="change-email-confirmation"){let f=await zr(t.context.secret,n.email,n.updateTo,t.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),d=t.query.callbackURL?encodeURIComponent(t.query.callbackURL):encodeURIComponent("/"),m=`${t.context.baseURL}/verify-email?token=${f}&callbackURL=${d}`;if(t.context.options.emailVerification?.sendVerificationEmail&&await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:{...o.user,email:n.updateTo},url:m,token:f},t.request)),t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0})}if(!a){let f=await t.context.internalAdapter.createSession(o.user.id);if(!f)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});a={session:f,user:o.user}}if(n.requestType==="change-email-verification"){let f=await t.context.internalAdapter.updateUserByEmail(n.email,{email:n.updateTo,emailVerified:!0});if(await or(t,{session:a.session,user:{...a.user,email:n.updateTo,emailVerified:!0}}),t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:f})}let c=await t.context.internalAdapter.updateUserByEmail(n.email,{email:n.updateTo,emailVerified:!1}),u=await zr(t.context.secret,n.updateTo),l=t.query.callbackURL?encodeURIComponent(t.query.callbackURL):encodeURIComponent("/");if(t.context.options.emailVerification?.sendVerificationEmail&&await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:c,url:`${t.context.baseURL}/verify-email?token=${u}&callbackURL=${l}`,token:u},t.request)),await or(t,{session:a.session,user:{...a.user,email:n.updateTo,emailVerified:!1}}),t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:{id:c.id,email:c.email,name:c.name,image:c.image,emailVerified:c.emailVerified,createdAt:c.createdAt,updatedAt:c.updatedAt}})}if(o.user.emailVerified){if(t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:null})}t.context.options.emailVerification?.onEmailVerification&&await t.context.options.emailVerification.onEmailVerification(o.user,t.request);let s=await t.context.internalAdapter.updateUserByEmail(n.email,{emailVerified:!0});if(t.context.options.emailVerification?.afterEmailVerification&&await t.context.options.emailVerification.afterEmailVerification(s,t.request),t.context.options.emailVerification?.autoSignInAfterVerification){let a=await Gr(t);if(!a||a.user.email!==n.email){let c=await t.context.internalAdapter.createSession(o.user.id);if(!c)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await or(t,{session:c,user:{...o.user,emailVerified:!0}})}else await or(t,{session:a.session,user:{...a.user,emailVerified:!0}})}if(t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:null})});dr();async function _w(t,e){let{userInfo:r,account:i,callbackURL:n,disableSignUp:o,overrideUserInfo:s}=e,a=await t.context.internalAdapter.findOAuthUser(r.email.toLowerCase(),i.accountId,i.providerId).catch(f=>{ye.error(`Better auth was unable to query your database.
Error: `,f);let d=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${d}?error=internal_server_error`)}),c=a?.user,u=!c;if(a){let f=a.accounts.find(d=>d.providerId===i.providerId&&d.accountId===i.accountId);if(f){if(t.context.options.account?.updateAccountOnSignIn!==!1){let d=Object.fromEntries(Object.entries({idToken:i.idToken,accessToken:await Jt(i.accessToken,t.context),refreshToken:await Jt(i.refreshToken,t.context),accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope}).filter(([m,h])=>h!==void 0));t.context.options.account?.storeAccountCookie&&await wu(t,{...i,...d}),Object.keys(d).length>0&&await t.context.internalAdapter.updateAccount(f.id,d)}r.emailVerified&&!a.user.emailVerified&&r.email.toLowerCase()===a.user.email&&await t.context.internalAdapter.updateUser(a.user.id,{emailVerified:!0})}else{let d=t.context.options.account?.accountLinking?.trustedProviders;if(!(e.isTrustedProvider||d?.includes(i.providerId))&&!r.emailVerified||t.context.options.account?.accountLinking?.enabled===!1)return Es()&&ye.warn(`User already exist but account isn't linked to ${i.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await t.context.internalAdapter.linkAccount({providerId:i.providerId,accountId:r.id.toString(),userId:a.user.id,accessToken:await Jt(i.accessToken,t.context),refreshToken:await Jt(i.refreshToken,t.context),idToken:i.idToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope})}catch(m){return ye.error("Unable to link account",m),{error:"unable to link account",data:null}}r.emailVerified&&!a.user.emailVerified&&r.email.toLowerCase()===a.user.email&&await t.context.internalAdapter.updateUser(a.user.id,{emailVerified:!0})}if(s){let{id:d,...m}=r;c=await t.context.internalAdapter.updateUser(a.user.id,{...m,email:r.email.toLowerCase(),emailVerified:r.email.toLowerCase()===a.user.email&&a.user.emailVerified||r.emailVerified})}}else{if(o)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:f,...d}=r,m={accessToken:await Jt(i.accessToken,t.context),refreshToken:await Jt(i.refreshToken,t.context),idToken:i.idToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope,providerId:i.providerId,accountId:r.id.toString()},{user:h,account:p}=await t.context.internalAdapter.createOAuthUser({...d,email:r.email.toLowerCase()},m);if(c=h,t.context.options.account?.storeAccountCookie&&await wu(t,p),!r.emailVerified&&c&&t.context.options.emailVerification?.sendOnSignUp&&t.context.options.emailVerification?.sendVerificationEmail){let y=await zr(t.context.secret,c.email,void 0,t.context.options.emailVerification?.expiresIn),b=`${t.context.baseURL}/verify-email?token=${y}&callbackURL=${n}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:c,url:b,token:y},t.request))}}catch(f){return ye.error(f),f instanceof V?{error:f.message,data:null,isRegister:!1}:{error:"unable to create user",data:null,isRegister:!1}}}if(!c)return{error:"unable to create user",data:null,isRegister:!1};let l=await t.context.internalAdapter.createSession(c.id);return l?{data:{session:l,user:c},error:null,isRegister:u}:{error:"unable to create session",data:null,isRegister:!1}}var Na=ke({code:Y().optional(),error:Y().optional(),device_id:Y().optional(),error_description:Y().optional(),state:Y().optional(),user:Y().optional()}),gD=$e("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:Na.optional(),query:Na.optional(),metadata:{...Ys,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async t=>{let e,r=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;if(t.method==="POST"){let S=t.body?Na.parse(t.body):{},E=t.query?Na.parse(t.query):{},_=Na.parse({...S,...E}),O=new URLSearchParams;for(let[B,D]of Object.entries(_))D!=null&&O.set(B,String(D));let R=`${t.context.baseURL}/callback/${t.params.id}?${O.toString()}`;throw t.redirect(R)}try{if(t.method==="GET")e=Na.parse(t.query);else if(t.method==="POST")e=Na.parse(t.body);else throw new Error("Unsupported method")}catch(S){throw t.context.logger.error("INVALID_CALLBACK_REQUEST",S),t.redirect(`${r}?error=invalid_callback_request`)}let{code:i,error:n,state:o,error_description:s,device_id:a}=e;if(!o){t.context.logger.error("State not found",n);let S=`${r}${r.includes("?")?"&":"?"}state=state_not_found`;throw t.redirect(S)}let{codeVerifier:c,callbackURL:u,link:l,errorURL:f,newUserURL:d,requestSignUp:m}=await RA(t);function h(S,E){let _=f??r,O=new URLSearchParams({error:S});E&&O.set("error_description",E);let R=`${_}${_.includes("?")?"&":"?"}${O.toString()}`;throw t.redirect(R)}if(n&&h(n,s),!i)throw t.context.logger.error("Code not found"),h("no_code");let p=t.context.socialProviders.find(S=>S.id===t.params.id);if(!p)throw t.context.logger.error("Oauth provider with id",t.params.id,"not found"),h("oauth_provider_not_found");let y;try{y=await p.validateAuthorizationCode({code:i,codeVerifier:c,deviceId:a,redirectURI:`${t.context.baseURL}/callback/${p.id}`})}catch(S){throw t.context.logger.error("",S),h("invalid_code")}let b=await p.getUserInfo({...y,user:t.body?.user?wt(t.body.user):void 0}).then(S=>S?.user);if(!b)return t.context.logger.error("Unable to get user info"),h("unable_to_get_user_info");if(!u)throw t.context.logger.error("No callback URL found"),h("no_callback_url");if(l){if(!t.context.options.account?.accountLinking?.trustedProviders?.includes(p.id)&&!b.emailVerified||t.context.options.account?.accountLinking?.enabled===!1)return t.context.logger.error("Unable to link account - untrusted provider"),h("unable_to_link_account");if(b.email!==l.email&&t.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return h("email_doesn't_match");let S=await t.context.internalAdapter.findAccount(String(b.id));if(S){if(S.userId.toString()!==l.userId.toString())return h("account_already_linked_to_different_user");let _=Object.fromEntries(Object.entries({accessToken:await Jt(y.accessToken,t.context),refreshToken:await Jt(y.refreshToken,t.context),idToken:y.idToken,accessTokenExpiresAt:y.accessTokenExpiresAt,refreshTokenExpiresAt:y.refreshTokenExpiresAt,scope:y.scopes?.join(",")}).filter(([O,R])=>R!==void 0));await t.context.internalAdapter.updateAccount(S.id,_)}else if(!await t.context.internalAdapter.createAccount({userId:l.userId,providerId:p.id,accountId:String(b.id),...y,accessToken:await Jt(y.accessToken,t.context),refreshToken:await Jt(y.refreshToken,t.context),scope:y.scopes?.join(",")}))return h("unable_to_link_account");let E;try{E=u.toString()}catch{E=u}throw t.redirect(E)}if(!b.email)return t.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),h("email_not_found");let N={providerId:p.id,accountId:String(b.id),...y,scope:y.scopes?.join(",")},T=await _w(t,{userInfo:{...b,id:String(b.id),email:b.email,name:b.name||b.email},account:N,callbackURL:u,disableSignUp:p.disableImplicitSignUp&&!m||p.options?.disableSignUp,overrideUserInfo:p.options?.overrideUserInfoOnSignIn});if(T.error)return t.context.logger.error(T.error.split(" ").join("_")),h(T.error.split(" ").join("_"));let{session:I,user:$}=T.data;await or(t,{session:I,user:$});let v;try{v=(T.isRegister&&d||u).toString()}catch{v=T.isRegister&&d||u}throw t.redirect(v)});dr();function yD(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}var FW=(t,e="Unknown",r=null)=>{let i=t.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${i?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${i?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${i?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${i?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${i?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${i?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${i?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${i?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${i?.colors?.primary||"black"};
        --primary-foreground: ${i?.colors?.primaryForeground||"white"};
        --background: ${i?.colors?.background||"white"};
        --foreground: ${i?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${i?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${i?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${i?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${i?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${i?.colors?.primary||"white"};
          --primary-foreground: ${i?.colors?.primaryForeground||"black"};
          --background: ${i?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${i?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${i?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${i?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${i?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${i?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${i?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${i?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${i?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${i?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${i?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${i?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${i?.disableTitleBorder?"transparent":i?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${i?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${yD(e)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${r||`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(e)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(e)}?askai=${encodeURIComponent(`What does the error code ${e} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`},wD=$e("/error",{method:"GET",metadata:{...Ys,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async t=>{let e=new URL(t.request?.url||""),r=e.searchParams.get("error")||"UNKNOWN",i=e.searchParams.get("error_description")||null,n=/^[\'A-Za-z0-9_-]+$/.test(r||"")?r:"UNKNOWN",o=i?yD(i):null,s=new URLSearchParams;s.set("error",n),i&&s.set("error_description",i);let a=t.context.options,c=a.onAPIError?.errorURL;return c?new Response(null,{status:302,headers:{Location:`${c}${c.includes("?")?"&":"?"}${s.toString()}`}}):ko&&!a.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${s.toString()}`}}):new Response(FW(t.context.options,n,o),{headers:{"Content-Type":"text/html"}})});var bD=$e("/ok",{method:"GET",metadata:{...Ys,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async t=>t.json({ok:!0}));function vD(t,e,r){let i=e?new URL(e,t.baseURL):new URL(`${t.baseURL}/error`);return r&&Object.entries(r).forEach(([n,o])=>i.searchParams.set(n,o)),i.href}function VW(t,e,r){let i=new URL(e,t.baseURL);return r&&Object.entries(r).forEach(([n,o])=>i.searchParams.set(n,o)),i.href}var xD=$e("/request-password-reset",{method:"POST",body:ke({email:Rr().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:Y().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async t=>{if(!t.context.options.emailAndPassword?.sendResetPassword)throw t.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new V("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:e,redirectTo:r}=t.body,i=await t.context.internalAdapter.findUserByEmail(e,{includeAccounts:!0});if(!i)return vn(24),await t.context.internalAdapter.findVerificationValue("dummy-verification-token"),t.context.logger.error("Reset Password: User not found",{email:e}),t.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let n=Ti(t.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600*1,"sec"),o=vn(24);await t.context.internalAdapter.createVerificationValue({value:i.user.id,identifier:`reset-password:${o}`,expiresAt:n});let s=r?encodeURIComponent(r):"",a=`${t.context.baseURL}/reset-password/${o}?callbackURL=${s}`;return await t.context.runInBackgroundOrAwait(t.context.options.emailAndPassword.sendResetPassword({user:i.user,url:a,token:o},t.request)),t.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),SD=$e("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:ke({callbackURL:Y().meta({description:"The URL to redirect the user to reset their password"})}),use:[Xs(t=>t.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async t=>{let{token:e}=t.params,{callbackURL:r}=t.query;if(!e||!r)throw t.redirect(vD(t.context,r,{error:"INVALID_TOKEN"}));let i=await t.context.internalAdapter.findVerificationValue(`reset-password:${e}`);throw!i||i.expiresAt<new Date?t.redirect(vD(t.context,r,{error:"INVALID_TOKEN"})):t.redirect(VW(t.context,r,{token:e}))}),ND=$e("/reset-password",{method:"POST",operationId:"resetPassword",query:ke({token:Y().optional()}).optional(),body:ke({newPassword:Y().meta({description:"The new password to set"}),token:Y().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async t=>{let e=t.body.token||t.query?.token;if(!e)throw new V("BAD_REQUEST",{message:ge.INVALID_TOKEN});let{newPassword:r}=t.body,i=t.context.password?.config.minPasswordLength,n=t.context.password?.config.maxPasswordLength;if(r.length<i)throw new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});if(r.length>n)throw new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});let o=`reset-password:${e}`,s=await t.context.internalAdapter.findVerificationValue(o);if(!s||s.expiresAt<new Date)throw new V("BAD_REQUEST",{message:ge.INVALID_TOKEN});let a=s.value,c=await t.context.password.hash(r);if((await t.context.internalAdapter.findAccounts(a)).find(u=>u.providerId==="credential")?await t.context.internalAdapter.updatePassword(a,c):await t.context.internalAdapter.createAccount({userId:a,providerId:"credential",password:c,accountId:a}),await t.context.internalAdapter.deleteVerificationValue(s.id),t.context.options.emailAndPassword?.onPasswordReset){let u=await t.context.internalAdapter.findUserById(a);u&&await t.context.options.emailAndPassword.onPasswordReset({user:u},t.request)}return t.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await t.context.internalAdapter.deleteSessions(a),t.json({status:!0})});var KW=ke({callbackURL:Y().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:Y().optional(),errorCallbackURL:Y().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:Aw,disableRedirect:Vt().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:Nn(ke({token:Y().meta({description:"ID token from the provider"}),nonce:Y().meta({description:"Nonce used to generate the token"}).optional(),accessToken:Y().meta({description:"Access token from the provider"}).optional(),refreshToken:Y().meta({description:"Refresh token from the provider"}).optional(),expiresAt:un().meta({description:"Expiry date of the token"}).optional()})),scopes:ln(Y()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:Vt().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:Y().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:An(Y(),Fr()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),AD=()=>$e("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:KW,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async t=>{let e=t.context.socialProviders.find(o=>o.id===t.body.provider);if(!e)throw t.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.PROVIDER_NOT_FOUND});if(t.body.idToken){if(!e.verifyIdToken)throw t.context.logger.error("Provider does not support id token verification",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.ID_TOKEN_NOT_SUPPORTED});let{token:o,nonce:s}=t.body.idToken;if(!await e.verifyIdToken(o,s))throw t.context.logger.error("Invalid id token",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.INVALID_TOKEN});let a=await e.getUserInfo({idToken:o,accessToken:t.body.idToken.accessToken,refreshToken:t.body.idToken.refreshToken});if(!a||!a?.user)throw t.context.logger.error("Failed to get user info",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.FAILED_TO_GET_USER_INFO});if(!a.user.email)throw t.context.logger.error("User email not found",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.USER_EMAIL_NOT_FOUND});let c=await _w(t,{userInfo:{...a.user,email:a.user.email,id:String(a.user.id),name:a.user.name||"",image:a.user.image,emailVerified:a.user.emailVerified||!1},account:{providerId:e.id,accountId:String(a.user.id),accessToken:t.body.idToken.accessToken},callbackURL:t.body.callbackURL,disableSignUp:e.disableImplicitSignUp&&!t.body.requestSignUp||e.disableSignUp});if(c.error)throw new V("UNAUTHORIZED",{message:c.error});return await or(t,c.data),t.json({redirect:!1,token:c.data.session.token,url:void 0,user:tr(t.context.options,c.data.user)})}let{codeVerifier:r,state:i}=await xd(t,void 0,t.body.additionalData),n=await e.createAuthorizationURL({state:i,codeVerifier:r,redirectURI:`${t.context.baseURL}/callback/${e.id}`,scopes:t.body.scopes,loginHint:t.body.loginHint});return t.json({url:n.toString(),redirect:!t.body.disableRedirect})}),_D=()=>$e("/sign-in/email",{method:"POST",operationId:"signInEmail",body:ke({email:Y().meta({description:"Email of the user"}),password:Y().meta({description:"Password of the user"}),callbackURL:Y().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:Vt().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async t=>{if(!t.context.options?.emailAndPassword?.enabled)throw t.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new V("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:e,password:r}=t.body;if(!Rr().safeParse(e).success)throw new V("BAD_REQUEST",{message:ge.INVALID_EMAIL});let i=await t.context.internalAdapter.findUserByEmail(e,{includeAccounts:!0});if(!i)throw await t.context.password.hash(r),t.context.logger.error("User not found",{email:e}),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});let n=i.accounts.find(a=>a.providerId==="credential");if(!n)throw await t.context.password.hash(r),t.context.logger.error("Credential account not found",{email:e}),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});let o=n?.password;if(!o)throw await t.context.password.hash(r),t.context.logger.error("Password not found",{email:e}),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});if(!await t.context.password.verify({hash:o,password:r}))throw t.context.logger.error("Invalid password"),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});if(t.context.options?.emailAndPassword?.requireEmailVerification&&!i.user.emailVerified){if(!t.context.options?.emailVerification?.sendVerificationEmail)throw new V("FORBIDDEN",{message:ge.EMAIL_NOT_VERIFIED});if(t.context.options?.emailVerification?.sendOnSignIn){let a=await zr(t.context.secret,i.user.email,void 0,t.context.options.emailVerification?.expiresIn),c=t.body.callbackURL?encodeURIComponent(t.body.callbackURL):encodeURIComponent("/"),u=`${t.context.baseURL}/verify-email?token=${a}&callbackURL=${c}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:i.user,url:u,token:a},t.request))}throw new V("FORBIDDEN",{message:ge.EMAIL_NOT_VERIFIED})}let s=await t.context.internalAdapter.createSession(i.user.id,t.body.rememberMe===!1);if(!s)throw t.context.logger.error("Failed to create session"),new V("UNAUTHORIZED",{message:ge.FAILED_TO_CREATE_SESSION});return await or(t,{session:s,user:i.user},t.body.rememberMe===!1),t.json({redirect:!!t.body.callbackURL,token:s.token,url:t.body.callbackURL,user:tr(t.context.options,i.user)})});var ED=$e("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async t=>{let e=await t.getSignedCookie(t.context.authCookies.sessionToken.name,t.context.secret);if(e)try{await t.context.internalAdapter.deleteSession(e)}catch(r){t.context.logger.error("Failed to delete session from database",r)}return os(t),t.json({success:!0})});dr();var HW=ke({name:Y().nonempty(),email:Rr(),password:Y().nonempty(),image:Y().optional(),callbackURL:Y().optional(),rememberMe:Vt().optional()}).and(An(Y(),Fr())),kD=()=>$e("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",body:HW,metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async t=>Ju(t.context.adapter,async()=>{if(!t.context.options.emailAndPassword?.enabled||t.context.options.emailAndPassword?.disableSignUp)throw new V("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let e=t.body,{name:r,email:i,password:n,image:o,callbackURL:s,rememberMe:a,...c}=e;if(!Rr().safeParse(i).success)throw new V("BAD_REQUEST",{message:ge.INVALID_EMAIL});let u=t.context.password.config.minPasswordLength;if(n.length<u)throw t.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});let l=t.context.password.config.maxPasswordLength;if(n.length>l)throw t.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});if((await t.context.internalAdapter.findUserByEmail(i))?.user)throw t.context.logger.info(`Sign-up attempt for existing email: ${i}`),new V("UNPROCESSABLE_ENTITY",{message:ge.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let f=await t.context.password.hash(n),d;try{let h=Ac(t.context.options,c,"create");if(d=await t.context.internalAdapter.createUser({email:i.toLowerCase(),name:r,image:o,...h,emailVerified:!1}),!d)throw new V("BAD_REQUEST",{message:ge.FAILED_TO_CREATE_USER})}catch(h){throw Es()&&t.context.logger.error("Failed to create user",h),h instanceof V?h:(t.context.logger?.error("Failed to create user",h),new V("UNPROCESSABLE_ENTITY",{message:ge.FAILED_TO_CREATE_USER}))}if(!d)throw new V("UNPROCESSABLE_ENTITY",{message:ge.FAILED_TO_CREATE_USER});if(await t.context.internalAdapter.linkAccount({userId:d.id,providerId:"credential",accountId:d.id,password:f}),t.context.options.emailVerification?.sendOnSignUp||t.context.options.emailAndPassword.requireEmailVerification){let h=await zr(t.context.secret,d.email,void 0,t.context.options.emailVerification?.expiresIn),p=e.callbackURL?encodeURIComponent(e.callbackURL):encodeURIComponent("/"),y=`${t.context.baseURL}/verify-email?token=${h}&callbackURL=${p}`;t.context.options.emailVerification?.sendVerificationEmail&&await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:d,url:y,token:h},t.request))}if(t.context.options.emailAndPassword.autoSignIn===!1||t.context.options.emailAndPassword.requireEmailVerification)return t.json({token:null,user:tr(t.context.options,d)});let m=await t.context.internalAdapter.createSession(d.id,a===!1);if(!m)throw new V("BAD_REQUEST",{message:ge.FAILED_TO_CREATE_SESSION});return await or(t,{session:m,user:d},a===!1),t.json({token:m.token,user:tr(t.context.options,d)})}));var JW=An(Y().meta({description:"Field name must be a string"}),Fr()),TD=()=>$e("/update-user",{method:"POST",operationId:"updateUser",body:JW,use:[ss],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async t=>{let e=t.body;if(typeof e!="object"||Array.isArray(e))throw new V("BAD_REQUEST",{message:"Body must be an object"});if(e.email)throw new V("BAD_REQUEST",{message:ge.EMAIL_CAN_NOT_BE_UPDATED});let{name:r,image:i,...n}=e,o=t.context.session,s=Ac(t.context.options,n,"update");if(i===void 0&&r===void 0&&Object.keys(s).length===0)throw new V("BAD_REQUEST",{message:"No fields to update"});let a=await t.context.internalAdapter.updateUser(o.user.id,{name:r,image:i,...s})??{...o.user,...r!==void 0&&{name:r},...i!==void 0&&{image:i},...s};return await or(t,{session:o.session,user:a}),t.json({status:!0})}),ID=$e("/change-password",{method:"POST",operationId:"changePassword",body:ke({newPassword:Y().meta({description:"The new password to set"}),currentPassword:Y().meta({description:"The current password is required"}),revokeOtherSessions:Vt().meta({description:"Must be a boolean value"}).optional()}),use:[mo],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async t=>{let{newPassword:e,currentPassword:r,revokeOtherSessions:i}=t.body,n=t.context.session,o=t.context.password.config.minPasswordLength;if(e.length<o)throw t.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});let s=t.context.password.config.maxPasswordLength;if(e.length>s)throw t.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});let a=(await t.context.internalAdapter.findAccounts(n.user.id)).find(l=>l.providerId==="credential"&&l.password);if(!a||!a.password)throw new V("BAD_REQUEST",{message:ge.CREDENTIAL_ACCOUNT_NOT_FOUND});let c=await t.context.password.hash(e);if(!await t.context.password.verify({hash:a.password,password:r}))throw new V("BAD_REQUEST",{message:ge.INVALID_PASSWORD});await t.context.internalAdapter.updateAccount(a.id,{password:c});let u=null;if(i){await t.context.internalAdapter.deleteSessions(n.user.id);let l=await t.context.internalAdapter.createSession(n.user.id);if(!l)throw new V("INTERNAL_SERVER_ERROR",{message:ge.FAILED_TO_GET_SESSION});await or(t,{session:l,user:n.user}),u=l.token}return t.json({token:u,user:{id:n.user.id,email:n.user.email,name:n.user.name,image:n.user.image,emailVerified:n.user.emailVerified,createdAt:n.user.createdAt,updatedAt:n.user.updatedAt}})}),$D=$e({method:"POST",body:ke({newPassword:Y().meta({description:"The new password to set is required"})}),use:[mo]},async t=>{let{newPassword:e}=t.body,r=t.context.session,i=t.context.password.config.minPasswordLength;if(e.length<i)throw t.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});let n=t.context.password.config.maxPasswordLength;if(e.length>n)throw t.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});let o=(await t.context.internalAdapter.findAccounts(r.user.id)).find(a=>a.providerId==="credential"&&a.password),s=await t.context.password.hash(e);if(!o)return await t.context.internalAdapter.linkAccount({userId:r.user.id,providerId:"credential",accountId:r.user.id,password:s}),t.json({status:!0});throw new V("BAD_REQUEST",{message:"user already has a password"})}),OD=$e("/delete-user",{method:"POST",use:[mo],body:ke({callbackURL:Y().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:Y().meta({description:"The password of the user is required to delete the user"}).optional(),token:Y().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async t=>{if(!t.context.options.user?.deleteUser?.enabled)throw t.context.logger.error("Delete user is disabled. Enable it in the options"),new V("NOT_FOUND");let e=t.context.session;if(t.body.password){let n=(await t.context.internalAdapter.findAccounts(e.user.id)).find(o=>o.providerId==="credential"&&o.password);if(!n||!n.password)throw new V("BAD_REQUEST",{message:ge.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await t.context.password.verify({hash:n.password,password:t.body.password}))throw new V("BAD_REQUEST",{message:ge.INVALID_PASSWORD})}if(t.body.token)return await Gk({...t,query:{token:t.body.token}}),t.json({success:!0,message:"User deleted"});if(t.context.options.user.deleteUser?.sendDeleteAccountVerification){let n=La(32,"0-9","a-z");await t.context.internalAdapter.createVerificationValue({value:e.user.id,identifier:`delete-account-${n}`,expiresAt:new Date(Date.now()+(t.context.options.user.deleteUser?.deleteTokenExpiresIn||3600*24)*1e3)});let o=`${t.context.baseURL}/delete-user/callback?token=${n}&callbackURL=${t.body.callbackURL||"/"}`;return await t.context.runInBackgroundOrAwait(t.context.options.user.deleteUser.sendDeleteAccountVerification({user:e.user,url:o,token:n},t.request)),t.json({success:!0,message:"Verification email sent"})}if(!t.body.password&&t.context.sessionConfig.freshAge!==0){let n=new Date(e.session.createdAt).getTime(),o=t.context.sessionConfig.freshAge*1e3;if(Date.now()-n>o*1e3)throw new V("BAD_REQUEST",{message:ge.SESSION_EXPIRED})}let r=t.context.options.user.deleteUser?.beforeDelete;r&&await r(e.user,t.request),await t.context.internalAdapter.deleteUser(e.user.id),await t.context.internalAdapter.deleteSessions(e.user.id),os(t);let i=t.context.options.user.deleteUser?.afterDelete;return i&&await i(e.user,t.request),t.json({success:!0,message:"User deleted"})}),Gk=$e("/delete-user/callback",{method:"GET",query:ke({token:Y().meta({description:"The token to verify the deletion request"}),callbackURL:Y().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[Xs(t=>t.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async t=>{if(!t.context.options.user?.deleteUser?.enabled)throw t.context.logger.error("Delete user is disabled. Enable it in the options"),new V("NOT_FOUND");let e=await Gr(t);if(!e)throw new V("NOT_FOUND",{message:ge.FAILED_TO_GET_USER_INFO});let r=await t.context.internalAdapter.findVerificationValue(`delete-account-${t.query.token}`);if(!r||r.expiresAt<new Date)throw new V("NOT_FOUND",{message:ge.INVALID_TOKEN});if(r.value!==e.user.id)throw new V("NOT_FOUND",{message:ge.INVALID_TOKEN});let i=t.context.options.user.deleteUser?.beforeDelete;i&&await i(e.user,t.request),await t.context.internalAdapter.deleteUser(e.user.id),await t.context.internalAdapter.deleteSessions(e.user.id),await t.context.internalAdapter.deleteAccounts(e.user.id),await t.context.internalAdapter.deleteVerificationValue(r.id),os(t);let n=t.context.options.user.deleteUser?.afterDelete;if(n&&await n(e.user,t.request),t.query.callbackURL)throw t.redirect(t.query.callbackURL||"/");return t.json({success:!0,message:"User deleted"})}),CD=$e("/change-email",{method:"POST",body:ke({newEmail:Rr().meta({description:"The new email address to set must be a valid email address"}),callbackURL:Y().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[mo],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async t=>{if(!t.context.options.user?.changeEmail?.enabled)throw t.context.logger.error("Change email is disabled."),new V("BAD_REQUEST",{message:"Change email is disabled"});let e=t.body.newEmail.toLowerCase();if(e===t.context.session.user.email)throw t.context.logger.error("Email is the same"),new V("BAD_REQUEST",{message:"Email is the same"});if(await t.context.internalAdapter.findUserByEmail(e))throw t.context.logger.error("Email already exists"),new V("UNPROCESSABLE_ENTITY",{message:ge.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(t.context.session.user.emailVerified!==!0&&t.context.options.user.changeEmail.updateEmailWithoutVerification){if(await t.context.internalAdapter.updateUserByEmail(t.context.session.user.email,{email:e}),await or(t,{session:t.context.session.session,user:{...t.context.session.user,email:e}}),t.context.options.emailVerification?.sendVerificationEmail){let n=await zr(t.context.secret,e,void 0,t.context.options.emailVerification?.expiresIn),o=`${t.context.baseURL}/verify-email?token=${n}&callbackURL=${t.body.callbackURL||"/"}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:{...t.context.session.user,email:e},url:o,token:n},t.request))}return t.json({status:!0})}if(t.context.session.user.emailVerified&&(t.context.options.user.changeEmail.sendChangeEmailConfirmation||t.context.options.user.changeEmail.sendChangeEmailVerification)){let n=await zr(t.context.secret,t.context.session.user.email,e,t.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),o=`${t.context.baseURL}/verify-email?token=${n}&callbackURL=${t.body.callbackURL||"/"}`,s=t.context.options.user.changeEmail.sendChangeEmailConfirmation||t.context.options.user.changeEmail.sendChangeEmailVerification;return s&&await t.context.runInBackgroundOrAwait(s({user:t.context.session.user,newEmail:e,url:o,token:n},t.request)),t.json({status:!0})}if(!t.context.options.emailVerification?.sendVerificationEmail)throw t.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await zr(t.context.secret,t.context.session.user.email,e,t.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),i=`${t.context.baseURL}/verify-email?token=${r}&callbackURL=${t.body.callbackURL||"/"}`;return await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:{...t.context.session.user,email:e},url:i,token:r},t.request)),t.json({status:!0})});dr();function Yk(t){if(t===null||typeof t!="object")return!1;let e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Xk(t,e,r=".",i){if(!Yk(e))return Xk(t,{},r,i);let n=Object.assign({},e);for(let o in t){if(o==="__proto__"||o==="constructor")continue;let s=t[o];s!=null&&(i&&i(n,o,s,r)||(Array.isArray(s)&&Array.isArray(n[o])?n[o]=[...s,...n[o]]:Yk(s)&&Yk(n[o])?n[o]=Xk(s,n[o],(r?`${r}.`:"")+o.toString(),i):n[o]=s))}return n}function pf(t){return(...e)=>e.reduce((r,i)=>Xk(r,i,"",t),{})}var Ew=pf(),OAe=pf((t,e,r)=>{if(t[e]!==void 0&&typeof r=="function")return t[e]=r(t[e]),!0}),CAe=pf((t,e,r)=>{if(Array.isArray(t[e])&&typeof r=="function")return t[e]=r(t[e]),!0});var PD=pf((t,e,r)=>{if(Array.isArray(t[e])&&Array.isArray(r))return t[e]=r,!0});function RD(t,e){let r={};for(let[i,n]of Object.entries(t))r[i]=async o=>{let s=async()=>{let a=await e,c={...o,context:{...a,returned:void 0,responseHeaders:void 0,session:null},path:n.path,headers:o?.headers?new Headers(o?.headers):void 0};return ys(c,async()=>{let{beforeHooks:u,afterHooks:l}=GW(a),f=await QW(c,u);if("context"in f&&f.context&&typeof f.context=="object"){let{headers:h,...p}=f.context;h&&h.forEach((y,b)=>{c.headers.set(b,y)}),c=PD(p,c)}else if(f)return o?.asResponse?Gn(f,{headers:o?.headers}):o?.returnHeaders?{headers:o?.headers,response:f}:f;c.asResponse=!1,c.returnHeaders=!0,c.returnStatus=!0;let d=await ys(c,()=>n(c)).catch(h=>{if(h instanceof V)return{response:h,status:h.statusCode,headers:h.headers?new Headers(h.headers):null};throw h});if(d&&d instanceof Response)return d;c.context.returned=d.response,c.context.responseHeaders=d.headers;let m=await ZW(c,l);if(m.response&&(d.response=m.response),d.response instanceof V&&Za(a.logger.level,"debug")&&(d.response.stack=d.response.errorStack),d.response instanceof V&&!o?.asResponse)throw d.response;return o?.asResponse?Gn(d.response,{headers:d.headers,status:d.status}):o?.returnHeaders?o?.returnStatus?{headers:d.headers,response:d.response,status:d.status}:{headers:d.headers,response:d.response}:o?.returnStatus?{response:d.response,status:d.status}:d.response})};return await zb()?s():jb(new WeakMap,s)},r[i].path=n.path,r[i].options=n.options;return r}async function QW(t,e){let r={};for(let i of e)if(i.matcher(t)){let n=await i.handler({...t,returnHeaders:!1}).catch(o=>{throw o instanceof V&&Za(t.context.logger.level,"debug")&&(o.stack=o.errorStack),o});if(n&&typeof n=="object"){if("context"in n&&typeof n.context=="object"){let{headers:o,...s}=n.context;o instanceof Headers&&(r.headers?o.forEach((a,c)=>{r.headers?.set(c,a)}):r.headers=o),r=PD(s,r);continue}return n}}return{context:r}}async function ZW(t,e){for(let r of e)if(r.matcher(t)){let i=await r.handler(t).catch(n=>{if(n instanceof V)return Za(t.context.logger.level,"debug")&&(n.stack=n.errorStack),{response:n,headers:n.headers?new Headers(n.headers):null};throw n});i.headers&&i.headers.forEach((n,o)=>{t.context.responseHeaders?o.toLowerCase()==="set-cookie"?t.context.responseHeaders.append(o,n):t.context.responseHeaders.set(o,n):t.context.responseHeaders=new Headers({[o]:n})}),i.response&&(t.context.returned=i.response)}return{response:t.context.returned,headers:t.context.responseHeaders}}function GW(t){let e=t.options.plugins||[],r=[],i=[];t.options.hooks?.before&&r.push({matcher:()=>!0,handler:t.options.hooks.before}),t.options.hooks?.after&&i.push({matcher:()=>!0,handler:t.options.hooks.after});let n=e.map(s=>{if(s.hooks?.before)return s.hooks.before}).filter(s=>s!==void 0).flat(),o=e.map(s=>{if(s.hooks?.after)return s.hooks.after}).filter(s=>s!==void 0).flat();return n.length&&r.push(...n),o.length&&i.push(...o),{beforeHooks:r,afterHooks:i}}dr();function UD(t,e){let r=new Map;t.plugins?.forEach(n=>{if(n.endpoints){for(let[o,s]of Object.entries(n.endpoints))if(s&&"path"in s&&typeof s.path=="string"){let a=s.path,c=[];s.options&&"method"in s.options&&(Array.isArray(s.options.method)?c=s.options.method:typeof s.options.method=="string"&&(c=[s.options.method])),c.length===0&&(c=["*"]),r.has(a)||r.set(a,[]),r.get(a).push({pluginId:n.id,endpointKey:o,methods:c})}}});let i=[];for(let[n,o]of r.entries())if(o.length>1){let s=new Map,a=!1;for(let c of o)for(let u of c.methods)s.has(u)||s.set(u,[]),s.get(u).push(c.pluginId),s.get(u).length>1&&(a=!0),(u==="*"&&o.length>1||u!=="*"&&s.has("*"))&&(a=!0);if(a){let c=[...new Set(o.map(l=>l.pluginId))],u=[];for(let[l,f]of s.entries())(f.length>1||l==="*"&&o.length>1||l!=="*"&&s.has("*"))&&u.push(l);i.push({path:n,plugins:c,conflictingMethods:u})}}if(i.length>0){let n=i.map(o=>`  - "${o.path}" [${o.conflictingMethods.join(", ")}] used by plugins: ${o.plugins.join(", ")}`).join(`
`);e.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${n}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function eT(t,e){let r=e.plugins?.reduce((n,o)=>({...n,...o.endpoints}),{})??{},i=e.plugins?.map(n=>n.middlewares?.map(o=>{let s=(async a=>{let c=await t;return o.middleware({...a,context:{...c,...a.context}})});return s.options=o.middleware.options,{path:o.path,middleware:s}})).filter(n=>n!==void 0).flat()||[];return{api:RD({signInSocial:AD(),callbackOAuth:gD,getSession:Fk(),signOut:ED,signUpEmail:kD(),signInEmail:_D(),resetPassword:ND,verifyEmail:hD,sendVerificationEmail:mD,changeEmail:CD,changePassword:ID,setPassword:$D,updateUser:TD(),deleteUser:OD,requestPasswordReset:xD,requestPasswordResetCallback:SD,listSessions:ZU(),revokeSession:GU,revokeSessions:YU,revokeOtherSessions:XU,linkSocialAccount:lD,listUserAccounts:uD,deleteUserCallback:Gk,unlinkAccount:dD,refreshToken:fD,getAccessToken:Qk,accountInfo:pD,...r,ok:bD,error:wD},t),middlewares:i}}var DD=(t,e)=>{let{api:r,middlewares:i}=eT(t,e),n=new URL(t.baseURL).pathname;return PA(r,{routerContext:t,openapi:{disabled:!0},basePath:n,routerMiddleware:[{path:"/**",middleware:yP},...i],allowedMediaTypes:["application/json"],async onRequest(o){let s=t.options.disabledPaths||[],a=new URL(o.url).pathname.replace(/\/+$/,"")||"/",c=n==="/"?a:a.startsWith(n)?a.slice(n.length).replace(/\/+$/,"")||"/":a;if(s.includes(c))return new Response("Not Found",{status:404});for(let u of t.options.plugins||[])if(u.onRequest){let l=await u.onRequest(o,t);if(l&&"response"in l)return l.response;if(l&&"request"in l){let f=await LA(l.request,t);return f||l.request}}return LA(o,t)},async onResponse(o){for(let s of t.options.plugins||[])if(s.onResponse){let a=await s.onResponse(o,t);if(a)return a.response}return o},onError(o){if(o instanceof V&&o.status==="FOUND")return;if(e.onAPIError?.throw)throw o;if(e.onAPIError?.onError){e.onAPIError.onError(o,t);return}let s=e.logger?.level,a=s==="error"||s==="warn"||s==="debug"?ye:void 0;if(e.logger?.disabled!==!0){if(o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&(o.message.includes("no column")||o.message.includes("column")||o.message.includes("relation")||o.message.includes("table")||o.message.includes("does not exist"))){t.logger?.error(o.message);return}o instanceof V?(o.status==="INTERNAL_SERVER_ERROR"&&t.logger.error(o.status,o),a?.error(o.message)):t.logger?.error(o&&typeof o=="object"&&"name"in o?o.name:"",o)}}})};lw();dr();function YW(t){try{return(new URL(t).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new de(`Invalid base URL: ${t}. Please provide a valid base URL.`)}}function XW(t){try{let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new de(`Invalid base URL: ${t}. URL must include 'http://' or 'https://'`)}catch(e){throw e instanceof de?e:new de(`Invalid base URL: ${t}. Please provide a valid base URL.`,String(e))}}function mf(t,e="/api/auth"){if(XW(t),YW(t))return t;let r=t.replace(/\/+$/,"");return!e||e==="/"?r:(e=e.startsWith("/")?e:`/${e}`,`${r}${e}`)}function LD(t,e){return!t||t.trim()===""?!1:e==="proto"?t==="http"||t==="https":e==="host"?[/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some(r=>r.test(t))?!1:/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(t)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test(t)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test(t)||/^localhost(:[0-9]{1,5})?$/i.test(t):!1}function bu(t,e,r,i,n){if(t)return mf(t,e);if(i!==!1){let a=je.BETTER_AUTH_URL||je.NEXT_PUBLIC_BETTER_AUTH_URL||je.PUBLIC_BETTER_AUTH_URL||je.NUXT_PUBLIC_BETTER_AUTH_URL||je.NUXT_PUBLIC_AUTH_URL||(je.BASE_URL!=="/"?je.BASE_URL:void 0);if(a)return mf(a,e)}let o=r?.headers.get("x-forwarded-host"),s=r?.headers.get("x-forwarded-proto");if(o&&s&&n&&LD(s,"proto")&&LD(o,"host"))try{return mf(`${s}://${o}`,e)}catch{}if(r){let a=vu(r.url);if(!a)throw new de("Could not get origin from request. Please provide a valid base URL.");return mf(a,e)}if(typeof window<"u"&&window.location)return mf(window.location.origin,e)}function vu(t){try{let e=new URL(t);return e.origin==="null"?null:e.origin}catch{return null}}function zD(t){try{return new URL(t).protocol}catch{return null}}function jD(t){try{return new URL(t).host}catch{return null}}var BD=(t,e,r)=>{if(t.startsWith("/"))return r?.allowRelativePaths?t.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(t):!1;if(e.includes("*")||e.includes("?")){if(e.includes("://"))return Nd(e)(vu(t)||t);let n=jD(t);return n?Nd(e)(n):!1}let i=zD(t);return i==="http:"||i==="https:"||!i?e===vu(t):t.startsWith(e)};var tT="better-auth-secret-12345678901234567890";function kw(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}async function MD(t,e){let r=(await e.context.internalAdapter.findAccounts(t))?.find(n=>n.providerId==="credential"),i=r?.password;if(!r||!i||!e.body.password)throw new V("BAD_REQUEST",{message:"No password credential found"});if(!await e.context.password.verify({hash:i,password:e.body.password}))throw new V("BAD_REQUEST",{message:"Invalid password"});return!0}dr();async function qD(t){let e=t.options,r=e.plugins||[],i=t,n=[];for(let o of r)if(o.init){let s=o.init(i),a;if(kw(s)?a=await s:a=s,typeof a=="object"){if(a.options){let{databaseHooks:c,...u}=a.options;c&&n.push(c),e=Ew(e,u)}a.context&&(i={...i,...a.context})}}return n.push(e.databaseHooks),i.internalAdapter=yu(i.adapter,{options:e,logger:i.logger,hooks:n.filter(o=>o!==void 0),generateId:i.generateId}),i.options=e,{context:i}}function WD(t){let e=[];return t.advanced?.crossSubDomainCookies?.enabled,e}async function Tw(t,e){let r=bu(t.baseURL,t.basePath),i=r?[new URL(r).origin]:[];t.trustedOrigins&&(Array.isArray(t.trustedOrigins)&&i.push(...t.trustedOrigins),typeof t.trustedOrigins=="function"&&i.push(...await t.trustedOrigins(e)));let n=je.BETTER_AUTH_TRUSTED_ORIGINS;if(n&&i.push(...n.split(",")),i.filter(o=>!o).length)throw new de("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return i}dr();dr();op();function JD(t,e){return{database:e?.database,adapter:e?.adapter,emailVerification:{sendVerificationEmail:!!t.emailVerification?.sendVerificationEmail,sendOnSignUp:!!t.emailVerification?.sendOnSignUp,sendOnSignIn:!!t.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!t.emailVerification?.autoSignInAfterVerification,expiresIn:t.emailVerification?.expiresIn,onEmailVerification:!!t.emailVerification?.onEmailVerification,afterEmailVerification:!!t.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!t.emailAndPassword?.enabled,disableSignUp:!!t.emailAndPassword?.disableSignUp,requireEmailVerification:!!t.emailAndPassword?.requireEmailVerification,maxPasswordLength:t.emailAndPassword?.maxPasswordLength,minPasswordLength:t.emailAndPassword?.minPasswordLength,sendResetPassword:!!t.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:t.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!t.emailAndPassword?.onPasswordReset,password:{hash:!!t.emailAndPassword?.password?.hash,verify:!!t.emailAndPassword?.password?.verify},autoSignIn:!!t.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!t.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(t.socialProviders||{}).map(r=>{let i=t.socialProviders?.[r];return i?{id:r,mapProfileToUser:!!i.mapProfileToUser,disableDefaultScope:!!i.disableDefaultScope,disableIdTokenSignIn:!!i.disableIdTokenSignIn,disableImplicitSignUp:i.disableImplicitSignUp,disableSignUp:i.disableSignUp,getUserInfo:!!i.getUserInfo,overrideUserInfoOnSignIn:!!i.overrideUserInfoOnSignIn,prompt:i.prompt,verifyIdToken:!!i.verifyIdToken,scope:i.scope,refreshAccessToken:!!i.refreshAccessToken}:{}}),plugins:t.plugins?.map(r=>r.id.toString()),user:{modelName:t.user?.modelName,fields:t.user?.fields,additionalFields:t.user?.additionalFields,changeEmail:{enabled:t.user?.changeEmail?.enabled,sendChangeEmailVerification:!!t.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:t.verification?.modelName,disableCleanup:t.verification?.disableCleanup,fields:t.verification?.fields},session:{modelName:t.session?.modelName,additionalFields:t.session?.additionalFields,cookieCache:{enabled:t.session?.cookieCache?.enabled,maxAge:t.session?.cookieCache?.maxAge,strategy:t.session?.cookieCache?.strategy},disableSessionRefresh:t.session?.disableSessionRefresh,expiresIn:t.session?.expiresIn,fields:t.session?.fields,freshAge:t.session?.freshAge,preserveSessionInDatabase:t.session?.preserveSessionInDatabase,storeSessionInDatabase:t.session?.storeSessionInDatabase,updateAge:t.session?.updateAge},account:{modelName:t.account?.modelName,fields:t.account?.fields,encryptOAuthTokens:t.account?.encryptOAuthTokens,updateAccountOnSignIn:t.account?.updateAccountOnSignIn,accountLinking:{enabled:t.account?.accountLinking?.enabled,trustedProviders:t.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:t.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:t.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!t.hooks?.after,before:!!t.hooks?.before},secondaryStorage:!!t.secondaryStorage,advanced:{cookiePrefix:!!t.advanced?.cookiePrefix,cookies:!!t.advanced?.cookies,crossSubDomainCookies:{domain:!!t.advanced?.crossSubDomainCookies?.domain,enabled:t.advanced?.crossSubDomainCookies?.enabled,additionalCookies:t.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!t.advanced?.database?.useNumberId||t.advanced?.database?.generateId==="serial",generateId:t.advanced?.database?.generateId,defaultFindManyLimit:t.advanced?.database?.defaultFindManyLimit},useSecureCookies:t.advanced?.useSecureCookies,ipAddress:{disableIpTracking:t.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:t.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:t.advanced?.disableCSRFCheck,cookieAttributes:{expires:t.advanced?.defaultCookieAttributes?.expires,secure:t.advanced?.defaultCookieAttributes?.secure,sameSite:t.advanced?.defaultCookieAttributes?.sameSite,domain:!!t.advanced?.defaultCookieAttributes?.domain,path:t.advanced?.defaultCookieAttributes?.path,httpOnly:t.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:t.trustedOrigins?.length,rateLimit:{storage:t.rateLimit?.storage,modelName:t.rateLimit?.modelName,window:t.rateLimit?.window,customStorage:!!t.rateLimit?.customStorage,enabled:t.rateLimit?.enabled,max:t.rateLimit?.max},onAPIError:{errorURL:t.onAPIError?.errorURL,onError:!!t.onAPIError?.onError,throw:t.onAPIError?.throw},logger:{disabled:t.logger?.disabled,level:t.logger?.level,log:!!t.logger?.log},databaseHooks:{user:{create:{after:!!t.databaseHooks?.user?.create?.after,before:!!t.databaseHooks?.user?.create?.before},update:{after:!!t.databaseHooks?.user?.update?.after,before:!!t.databaseHooks?.user?.update?.before}},session:{create:{after:!!t.databaseHooks?.session?.create?.after,before:!!t.databaseHooks?.session?.create?.before},update:{after:!!t.databaseHooks?.session?.update?.after,before:!!t.databaseHooks?.session?.update?.before}},account:{create:{after:!!t.databaseHooks?.account?.create?.after,before:!!t.databaseHooks?.account?.create?.before},update:{after:!!t.databaseHooks?.account?.update?.after,before:!!t.databaseHooks?.account?.update?.before}},verification:{create:{after:!!t.databaseHooks?.verification?.create?.after,before:!!t.databaseHooks?.verification?.create?.before},update:{after:!!t.databaseHooks?.verification?.update?.after,before:!!t.databaseHooks?.verification?.update?.before}}}}}var cs;async function QD(){if(cs)return cs;try{let t=typeof process<"u"&&typeof process.cwd=="function"?process.cwd():"";if(!t)return;let e=o=>Function("mm","return import(mm)")(o),[{default:r},{default:i}]=await Promise.all([e("fs/promises"),e("path")]),n=await r.readFile(i.join(t,"package.json"),"utf-8");return cs=JSON.parse(n),cs}catch{}}async function ZD(t){if(cs)return cs.dependencies?.[t]||cs.devDependencies?.[t]||cs.peerDependencies?.[t];try{let e=typeof process<"u"&&typeof process.cwd=="function"?process.cwd():"";if(!e)throw new Error("no-cwd");let r=a=>Function("mm","return import(mm)")(a),[{default:i},{default:n}]=await Promise.all([r("fs/promises"),r("path")]),o=n.join(e,"node_modules",t,"package.json"),s=await i.readFile(o,"utf-8");return JSON.parse(s).version||await FD(t)||void 0}catch{}return await FD(t)}async function FD(t){let e=await QD();if(e)return{...e.dependencies,...e.devDependencies,...e.peerDependencies}[t]}async function e3(){return(await QD())?.name}var t3={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function r3(){for(let[t,e]of Object.entries(t3)){let r=await ZD(t);if(r)return{name:e,version:r}}}var n3={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function i3(){for(let[t,e]of Object.entries(n3)){let r=await ZD(t);if(r)return{name:e,version:r}}}function o3(){let t=je.npm_config_user_agent;if(!t)return;let e=t.split(" ")[0],r=e.lastIndexOf("/"),i=e.substring(0,r);return{name:i==="npminstall"?"cnpm":i,version:e.substring(r+1)}}var xu=t=>Function("mm","return import(mm)")(t);function Aa(){let t=(...e)=>e.some(r=>!!je[r]);return t("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"?"cloudflare":t("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":t("NETLIFY","NETLIFY_URL")?"netlify":t("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":t("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":t("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":t("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":t("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":t("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":t("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":t("DYNO","HEROKU_APP_NAME")?"heroku":t("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":t("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function s3(){try{if(Aa()==="cloudflare")return"cloudflare";let t=await xu("os"),e=t.cpus();return{deploymentVendor:Aa(),systemPlatform:t.platform(),systemRelease:t.release(),systemArchitecture:t.arch(),cpuCount:e.length,cpuModel:e.length?e[0].model:null,cpuSpeed:e.length?e[0].speed:null,memory:t.totalmem(),isWSL:await u3(),isDocker:await GD(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}var rT;async function a3(){if(Aa()==="cloudflare")return!1;try{return(await xu("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function c3(){if(Aa()==="cloudflare")return!1;try{return(await xu("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function GD(){return Aa()==="cloudflare"?!1:(rT===void 0&&(rT=await a3()||await c3()),rT)}async function u3(){try{if(Aa()==="cloudflare"||typeof process>"u"||process?.platform!=="linux")return!1;let t=await xu("fs");return(await xu("os")).release().toLowerCase().includes("microsoft")?!await VD():t.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!await VD():!1}catch{return!1}}var nT,l3=async()=>{if(Aa()==="cloudflare")return!1;try{return(await xu("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function VD(){return nT===void 0&&(nT=await l3()||await GD()),nT}function d3(){return je.CI!=="false"&&("BUILD_ID"in je||"BUILD_NUMBER"in je||"CI"in je||"CI_APP_ID"in je||"CI_BUILD_ID"in je||"CI_BUILD_NUMBER"in je||"CI_NAME"in je||"CONTINUOUS_INTEGRATION"in je||"RUN_ID"in je)}function f3(){return typeof Deno<"u"?{name:"deno",version:Deno?.version?.deno??null}:typeof Bun<"u"?{name:"bun",version:Bun?.version??null}:typeof process<"u"&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null}}function p3(){return He("NODE_ENV")==="production"?"production":d3()?"ci":Hi()?"test":"development"}async function KD(t){let e=await fl("SHA-256").digest(t);return Or.encode(e)}var m3=t=>Da("a-z","A-Z","0-9")(t||32),as=null;async function HD(t){if(as)return as;let e=await e3();return e?(as=await KD(t?t+e:e),as):t?(as=await KD(t),as):(as=m3(32),as)}async function iT(t,e){let r=t.telemetry?.debug||zp("BETTER_AUTH_TELEMETRY_DEBUG",!1),i=lv.BETTER_AUTH_TELEMETRY_ENDPOINT,n=async c=>{e?.customTrack?await e.customTrack(c).catch(ye.error):r?ye.info("telemetry event",JSON.stringify(c,null,2)):await _e(i,{method:"POST",body:c}).catch(ye.error)},s=await(async()=>{let c=t.telemetry?.enabled!==void 0?t.telemetry.enabled:!1;return(zp("BETTER_AUTH_TELEMETRY",!1)||c)&&(e?.skipTestCheck||!Hi())})(),a;return s&&(a=await HD(t.baseURL),n({type:"init",payload:{config:JD(t,e),runtime:f3(),database:await r3(),framework:await i3(),environment:p3(),systemInfo:await s3(),packageManager:o3()},anonymousId:a})),{publish:async c=>{s&&(a||(a=await HD(t.baseURL)),await n({type:c.type,payload:c.payload,anonymousId:a}))}}}function h3(t){let e=new Set(t).size;return e===0?0:Math.log2(Math.pow(e,t.length))}function g3(t,e){let r=t===tT;if(!Hi()){if(r&&ko)throw new de("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!t)throw new de("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");if(t.length<32)throw new de("Invalid BETTER_AUTH_SECRET: must be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`.");h3(t)<120&&e.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}}async function YD(t,e,r){e.database||(e=Ew(e,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let i=e.plugins||[],n=WD(e),o=Ji(e.logger),s=bu(e.baseURL,e.basePath);s||o.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.");let a=e.secret||je.BETTER_AUTH_SECRET||je.AUTH_SECRET||tT;g3(a,o),e={...e,secret:a,baseURL:s?new URL(s).origin:"",basePath:e.basePath||"/api/auth",plugins:i.concat(n)},UD(e,o);let c=QU(e),u=En(e),l=Object.entries(e.socialProviders||{}).map(([y,b])=>{if(b==null||b.enabled===!1)return null;b.clientId||o.warn(`Social provider ${y} is missing clientId or clientSecret`);let N=Jk[y](b);return N.disableImplicitSignUp=b.disableImplicitSignUp,N}).filter(y=>y!==null),f=({model:y,size:b})=>typeof e.advanced?.generateId=="function"?e.advanced.generateId({model:y,size:b}):typeof e?.advanced?.database?.generateId=="function"?e.advanced.database.generateId({model:y,size:b}):vn(b),{publish:d}=await iT(e,{adapter:t.id,database:typeof e.database=="function"?"adapter":r(e.database)}),m={appName:e.appName||"Better Auth",socialProviders:l,options:e,oauthConfig:{storeStateStrategy:e.account?.storeStateStrategy||(e.database?"database":"cookie"),skipStateCookieCheck:!!e.account?.skipStateCookieCheck},tables:u,trustedOrigins:await Tw(e),isTrustedOrigin(y,b){return m.trustedOrigins.some(N=>BD(y,N,b))},baseURL:s||"",sessionConfig:{updateAge:e.session?.updateAge!==void 0?e.session.updateAge:1440*60,expiresIn:e.session?.expiresIn||3600*24*7,freshAge:e.session?.freshAge===void 0?3600*24:e.session.freshAge,cookieRefreshCache:(()=>{let y=e.session?.cookieCache?.refreshCache,b=e.session?.cookieCache?.maxAge||300;return(e.database||e.secondaryStorage)&&y?(o.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache` \u2014 remove it from your config to silence this warning."),!1):y===!1||y===void 0?!1:y===!0?{enabled:!0,updateAge:Math.floor(b*.2)}:{enabled:!0,updateAge:y.updateAge!==void 0?y.updateAge:Math.floor(b*.2)}})()},secret:a,rateLimit:{...e.rateLimit,enabled:e.rateLimit?.enabled??ko,window:e.rateLimit?.window||10,max:e.rateLimit?.max||100,storage:e.rateLimit?.storage||(e.secondaryStorage?"secondary-storage":"memory")},authCookies:c,logger:o,generateId:f,session:null,secondaryStorage:e.secondaryStorage,password:{hash:e.emailAndPassword?.password?.hash||pv,verify:e.emailAndPassword?.password?.verify||mv,config:{minPasswordLength:e.emailAndPassword?.minPasswordLength||8,maxPasswordLength:e.emailAndPassword?.maxPasswordLength||128},checkPassword:MD},setNewSession(y){this.newSession=y},newSession:null,adapter:t,internalAdapter:yu(t,{options:e,logger:o,hooks:e.databaseHooks?[e.databaseHooks]:[],generateId:f}),createAuthCookie:Wk(e),async runMigrations(){throw new de("runMigrations will be set by the specific init implementation")},publishTelemetry:d,skipCSRFCheck:!!e.advanced?.disableCSRFCheck,skipOriginCheck:e.advanced?.disableOriginCheck!==void 0?e.advanced.disableOriginCheck:!!Hi(),runInBackground:e.advanced?.backgroundTasks?.handler??(y=>{y.catch(()=>{})}),async runInBackgroundOrAwait(y){try{e.advanced?.backgroundTasks?.handler?y instanceof Promise&&e.advanced.backgroundTasks.handler(y.catch(b=>{o.error("Failed to run background task:",b)})):await y}catch(b){o.error("Failed to run background task:",b)}}},h=qD(m),p;return kw(h)?{context:p}=await h:{context:p}=h,p}var XD=async t=>{let e=await dw(t),i=await YD(e,t,n=>gu(n)||"unknown");return i.runMigrations=async function(){if(!t.database||"updateMany"in t.database)throw new de("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:n}=await mw(t);await n()},i};var eL=(t,e)=>{let r=e(t),{api:i}=eT(r,t);return{handler:async n=>{let o=await r,s=o.options.basePath||"/api/auth";if(!o.options.baseURL){let c=bu(void 0,s,n,void 0,o.options.advanced?.trustedProxyHeaders);if(c)o.baseURL=c,o.options.baseURL=vu(o.baseURL)||void 0;else throw new de("Could not get base URL from request. Please provide a valid base URL.")}o.trustedOrigins=await Tw(o.options,n);let{handler:a}=DD(o,t);return qb(o.adapter,()=>a(n))},api:i,options:t,$context:r,$ERROR_CODES:{...t.plugins?.reduce((n,o)=>o.$ERROR_CODES?{...n,...o.$ERROR_CODES}:n,{}),...ge}}};var oT=t=>eL(t,XD);dr();Qi();dr();Ed();var U=Symbol.for("drizzle:entityKind");function H(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,U))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(U in r&&r[U]===e[U])return!0;r=Object.getPrototypeOf(r)}return!1}var rt=class{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[U]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Iw=class{static[U]="ColumnBuilder";config;constructor(e,r,i){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var fi=Symbol.for("drizzle:Name");var $w=class{static[U]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:i,columns:n,foreignColumns:o}=e();return{name:i,columns:n,foreignTable:o[0].table,foreignColumns:o}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new sT(e,this)}},sT=class{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[U]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:i}=this.reference(),n=r.map(a=>a.name),o=i.map(a=>a.name),s=[this.table[fi],...n,i[0].table[fi],...o];return e??`${s.join("_")}_fk`}};function Ow(t,...e){return t(...e)}function uT(t,e){return`${t[fi]}_${e.join("_")}_unique`}var aT=class{constructor(e,r){this.name=r,this.columns=e}static[U]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new cT(e,this.columns,this.nullsNotDistinctConfig,this.name)}},tL=class{static[U]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new aT(e,this.name)}},cT=class{constructor(e,r,i,n){this.table=e,this.columns=r,this.name=n??uT(this.table,this.columns.map(o=>o.name)),this.nullsNotDistinct=i}static[U]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function rL(t,e,r){for(let i=e;i<t.length;i++){let n=t[i];if(n==="\\"){i++;continue}if(n==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!r&&(n===","||n==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function nL(t,e=0){let r=[],i=e,n=!1;for(;i<t.length;){let o=t[i];if(o===","){(n||i===e)&&r.push(""),n=!0,i++;continue}if(n=!1,o==="\\"){i+=2;continue}if(o==='"'){let[c,u]=rL(t,i+1,!0);r.push(c),i=u;continue}if(o==="}")return[r,i+1];if(o==="{"){let[c,u]=nL(t,i+1);r.push(c),i=u;continue}let[s,a]=rL(t,i,!1);r.push(s),i=a}return[r,i]}function iL(t){let[e]=nL(t,1);return e}function lT(t){return`{${t.map(e=>Array.isArray(e)?lT(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var ue=class extends Iw{foreignKeyConfigs=[];static[U]="PgColumnBuilder";array(e){return new fT(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:i,actions:n})=>Ow((o,s)=>{let a=new $w(()=>{let c=o();return{columns:[e],foreignColumns:[c]}});return s.onUpdate&&a.onUpdate(s.onUpdate),s.onDelete&&a.onDelete(s.onDelete),a.build(r)},i,n))}buildExtraConfigColumn(e){return new dT(e,this.config)}},ne=class extends rt{constructor(e,r){r.uniqueName||(r.uniqueName=uT(e,[r.name])),super(e,r),this.table=e}static[U]="PgColumn"},dT=class extends ne{static[U]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},Su=class{static[U]="IndexedColumn";constructor(e,r,i,n){this.name=e,this.keyAsName=r,this.type=i,this.indexConfig=n}name;keyAsName;type;indexConfig},fT=class extends ue{static[U]="PgArrayBuilder";constructor(e,r,i){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=i}build(e){let r=this.config.baseBuilder.build(e);return new pT(e,this.config,r)}},pT=class t extends ne{constructor(e,r,i,n){super(e,r),this.baseColumn=i,this.range=n,this.size=r.size}size;static[U]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=iL(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let i=e.map(n=>n===null?null:H(this.baseColumn,t)?this.baseColumn.mapToDriverValue(n,!0):this.baseColumn.mapToDriverValue(n));return r?i:lT(i)}};var oL=class extends ue{static[U]="PgEnumObjectColumnBuilder";constructor(e,r){super(e,"string","PgEnumObjectColumn"),this.config.enum=r}build(e){return new mT(e,this.config)}},mT=class extends ne{static[U]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},sL=Symbol.for("drizzle:isPgEnum");function cL(t){return!!t&&typeof t=="function"&&sL in t&&t[sL]===!0}var aL=class extends ue{static[U]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new hT(e,this.config)}},hT=class extends ne{static[U]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};var bt=class{static[U]="Subquery";constructor(e,r,i,n=!1,o=[]){this._={brand:"Subquery",sql:e,selectedFields:r,alias:i,isWith:n,usedTables:o}}},Nu=class extends bt{static[U]="WithSubquery"};var uL="0.45.1";var gT,yT,Mt={startActiveSpan(t,e){return gT?(yT||(yT=gT.trace.getTracer("drizzle-orm",uL)),Ow((r,i)=>i.startActiveSpan(t,n=>{try{return e(n)}catch(o){throw n.setStatus({code:r.SpanStatusCode.ERROR,message:o instanceof Error?o.message:"Unknown error"}),o}finally{n.end()}}),gT,yT)):e()}};var gt=Symbol.for("drizzle:ViewBaseConfig");var _a=Symbol.for("drizzle:Schema"),Cw=Symbol.for("drizzle:Columns"),lL=Symbol.for("drizzle:ExtraConfigColumns"),wT=Symbol.for("drizzle:OriginalName"),bT=Symbol.for("drizzle:BaseName"),hf=Symbol.for("drizzle:IsAlias"),dL=Symbol.for("drizzle:ExtraConfigBuilder"),y3=Symbol.for("drizzle:IsDrizzleTable"),oe=class{static[U]="Table";static Symbol={Name:fi,Schema:_a,OriginalName:wT,Columns:Cw,ExtraConfigColumns:lL,BaseName:bT,IsAlias:hf,ExtraConfigBuilder:dL};[fi];[wT];[_a];[Cw];[lL];[bT];[hf]=!1;[y3]=!0;[dL]=void 0;constructor(e,r,i){this[fi]=this[wT]=e,this[_a]=r,this[bT]=i}};function Yr(t){return t[fi]}function Ea(t){return`${t[_a]??"public"}.${t[fi]}`}var fL=class{static[U]="FakePrimitiveParam"};function vT(t){return t!=null&&typeof t.getSQL=="function"}function w3(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var qt=class{static[U]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new ce([this])}},ce=class t{constructor(e){this.queryChunks=e;for(let r of e)if(H(r,oe)){let i=r[oe.Symbol.Schema];this.usedTables.push(i===void 0?r[oe.Symbol.Name]:i+"."+r[oe.Symbol.Name])}}static[U]="SQL";decoder=mL;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Mt.startActiveSpan("drizzle.buildSQL",r=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,r){let i=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:n,escapeName:o,escapeParam:s,prepareTyping:a,inlineParams:c,paramStartIndex:u}=i;return w3(e.map(l=>{if(H(l,qt))return{sql:l.value.join(""),params:[]};if(H(l,gf))return{sql:o(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){let f=[new qt("(")];for(let[d,m]of l.entries())f.push(m),d<l.length-1&&f.push(new qt(", "));return f.push(new qt(")")),this.buildQueryFromSourceParams(f,i)}if(H(l,t))return this.buildQueryFromSourceParams(l.queryChunks,{...i,inlineParams:c||l.shouldInlineParams});if(H(l,oe)){let f=l[oe.Symbol.Schema],d=l[oe.Symbol.Name];return{sql:f===void 0||l[hf]?o(d):o(f)+"."+o(d),params:[]}}if(H(l,rt)){let f=n.getColumnCasing(l);if(r.invokeSource==="indexes")return{sql:o(f),params:[]};let d=l.table[oe.Symbol.Schema];return{sql:l.table[hf]||d===void 0?o(l.table[oe.Symbol.Name])+"."+o(f):o(d)+"."+o(l.table[oe.Symbol.Name])+"."+o(f),params:[]}}if(H(l,jr)){let f=l[gt].schema,d=l[gt].name;return{sql:f===void 0||l[gt].isAlias?o(d):o(f)+"."+o(d),params:[]}}if(H(l,Xr)){if(H(l.value,ho))return{sql:s(u.value++,l),params:[l],typings:["none"]};let f=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(H(f,t))return this.buildQueryFromSourceParams([f],i);if(c)return{sql:this.mapInlineParam(f,i),params:[]};let d=["none"];return a&&(d=[a(l.encoder)]),{sql:s(u.value++,f),params:[f],typings:d}}return H(l,ho)?{sql:s(u.value++,l),params:[l],typings:["none"]}:H(l,t.Aliased)&&l.fieldAlias!==void 0?{sql:o(l.fieldAlias),params:[]}:H(l,bt)?l._.isWith?{sql:o(l._.alias),params:[]}:this.buildQueryFromSourceParams([new qt("("),l._.sql,new qt(") "),new gf(l._.alias)],i):cL(l)?l.schema?{sql:o(l.schema)+"."+o(l.enumName),params:[]}:{sql:o(l.enumName),params:[]}:vT(l)?l.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([l.getSQL()],i):this.buildQueryFromSourceParams([new qt("("),l.getSQL(),new qt(")")],i):c?{sql:this.mapInlineParam(l,i),params:[]}:{sql:s(u.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let i=e.toString();return r(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},gf=class{constructor(e){this.value=e}static[U]="Name";brand;getSQL(){return new ce([this])}};function pL(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var mL={mapFromDriverValue:t=>t},hL={mapToDriverValue:t=>t},Nke={...mL,...hL},Xr=class{constructor(e,r=hL){this.value=e,this.encoder=r}static[U]="Param";brand;getSQL(){return new ce([this])}};function j(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new qt(t[0]));for(let[i,n]of e.entries())r.push(n,new qt(t[i+1]));return new ce(r)}(t=>{function e(){return new ce([])}t.empty=e;function r(c){return new ce(c)}t.fromList=r;function i(c){return new ce([new qt(c)])}t.raw=i;function n(c,u){let l=[];for(let[f,d]of c.entries())f>0&&u!==void 0&&l.push(u),l.push(d);return new ce(l)}t.join=n;function o(c){return new gf(c)}t.identifier=o;function s(c){return new ho(c)}t.placeholder=s;function a(c,u){return new Xr(c,u)}t.param=a})(j||(j={}));(t=>{class e{constructor(i,n){this.sql=i,this.fieldAlias=n}static[U]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(ce||(ce={}));var ho=class{constructor(e){this.name=e}static[U]="Placeholder";getSQL(){return new ce([this])}};function Pw(t,e){return t.map(r=>{if(H(r,ho)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(H(r,Xr)&&H(r.value,ho)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}var b3=Symbol.for("drizzle:IsDrizzleView"),jr=class{static[U]="View";[gt];[b3]=!0;constructor({name:e,schema:r,selectedFields:i,query:n}){this[gt]={name:e,originalName:e,schema:r,selectedFields:i,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new ce([this])}};rt.prototype.getSQL=function(){return new ce([this])};oe.prototype.getSQL=function(){return new ce([this])};bt.prototype.getSQL=function(){return new ce([this])};var ka=class{constructor(e){this.table=e}static[U]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},Au=class{constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[U]="TableAliasProxyHandler";get(e,r){if(r===oe.Symbol.IsAlias)return!0;if(r===oe.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===oe.Symbol.OriginalName)return this.alias;if(r===gt)return{...e[gt],name:this.alias,isAlias:!0};if(r===oe.Symbol.Columns){let n=e[oe.Symbol.Columns];if(!n)return n;let o={};return Object.keys(n).map(s=>{o[s]=new Proxy(n[s],new ka(new Proxy(e,this)))}),o}let i=e[r];return H(i,rt)?new Proxy(i,new ka(new Proxy(e,this))):i}},gL=class{constructor(e){this.alias=e}static[U]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?yf(e.sourceTable,this.alias):e[r]}};function yf(t,e){return new Proxy(t,new Au(e,!1))}function ji(t,e){return new Proxy(t,new ka(new Proxy(t.table,new Au(e,!1))))}function xT(t,e){return new ce.Aliased(wf(t.sql,e),t.fieldAlias)}function wf(t,e){return j.join(t.queryChunks.map(r=>H(r,rt)?ji(r,e):H(r,ce)?wf(r,e):H(r,ce.Aliased)?xT(r,e):r))}var bf=class extends Error{static[U]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},go=class t extends Error{constructor(e,r,i){super(`Failed query: ${e}
params: ${r}`),this.query=e,this.params=r,this.cause=i,Error.captureStackTrace(this,t),i&&(this.cause=i)}},Rw=class extends bf{static[U]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var ST=class{static[U]="ConsoleLogWriter";write(e){console.log(e)}},Uw=class{static[U]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new ST}logQuery(e,r){let i=r.map(o=>{try{return JSON.stringify(o)}catch{return String(o)}}),n=i.length?` -- params: [${i.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}},Dw=class{static[U]="NoopLogger";logQuery(){}};var Tr=class{static[U]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}};function yL(t,e,r){let i={},n=t.reduce((o,{path:s,field:a},c)=>{let u;H(a,rt)?u=a:H(a,ce)?u=a.decoder:H(a,bt)?u=a._.sql.decoder:u=a.sql.decoder;let l=o;for(let[f,d]of s.entries())if(f<s.length-1)d in l||(l[d]={}),l=l[d];else{let m=e[c],h=l[d]=m===null?null:u.mapFromDriverValue(m);if(r&&H(a,rt)&&s.length===2){let p=s[0];p in i?typeof i[p]=="string"&&i[p]!==Yr(a.table)&&(i[p]=!1):i[p]=h===null?Yr(a.table):!1}}return o},{});if(r&&Object.keys(i).length>0)for(let[o,s]of Object.entries(i))typeof s=="string"&&!r[s]&&(n[o]=null);return n}function Rn(t,e){return Object.entries(t).reduce((r,[i,n])=>{if(typeof i!="string")return r;let o=e?[...e,i]:[i];return H(n,rt)||H(n,ce)||H(n,ce.Aliased)||H(n,bt)?r.push({path:o,field:n}):H(n,oe)?r.push(...Rn(n[oe.Symbol.Columns],o)):r.push(...Rn(n,o)),r},[])}function vf(t,e){let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let[n,o]of r.entries())if(o!==i[n])return!1;return!0}function Lw(t,e){let r=Object.entries(e).filter(([,i])=>i!==void 0).map(([i,n])=>H(n,ce)||H(n,rt)?[i,n]:[i,new Xr(n,t[oe.Symbol.Columns][i])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}function wL(t,e){for(let r of e)for(let i of Object.getOwnPropertyNames(r.prototype))i!=="constructor"&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i)||Object.create(null))}function bL(t){return t[oe.Symbol.Columns]}function yo(t){return H(t,bt)?t._.alias:H(t,jr)?t[gt].name:H(t,ce)?void 0:t[oe.Symbol.IsAlias]?t[oe.Symbol.Name]:t[oe.Symbol.BaseName]}function De(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function vL(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var Wke=typeof TextDecoder>"u"?null:new TextDecoder;var wo=class extends ue{static[U]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:r,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:r,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var NT=class extends wo{static[U]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new AT(e,this.config)}},AT=class extends ne{static[U]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},_T=class extends wo{static[U]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new ET(e,this.config)}},ET=class extends ne{static[U]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function xL(t,e){let{name:r,config:i}=De(t,e);return i.mode==="number"?new NT(r):new _T(r)}var kT=class extends ue{static[U]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new TT(e,this.config)}},TT=class extends ne{static[U]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},IT=class extends ue{static[U]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new $T(e,this.config)}},$T=class extends ne{static[U]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function SL(t,e){let{name:r,config:i}=De(t,e);return i.mode==="number"?new kT(r):new IT(r)}var OT=class extends ue{static[U]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new CT(e,this.config)}},CT=class extends ne{static[U]="PgBoolean";getSQLType(){return"boolean"}};function xf(t){return new OT(t??"")}var PT=class extends ue{static[U]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new RT(e,this.config)}},RT=class extends ne{static[U]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function NL(t,e={}){let{name:r,config:i}=De(t,e);return new PT(r,i)}var UT=class extends ue{static[U]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new DT(e,this.config)}},DT=class extends ne{static[U]="PgCidr";getSQLType(){return"cidr"}};function AL(t){return new UT(t??"")}var LT=class extends ue{static[U]="PgCustomColumnBuilder";constructor(e,r,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=i}build(e){return new zT(e,this.config)}},zT=class extends ne{static[U]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function _L(t){return(e,r)=>{let{name:i,config:n}=De(e,r);return new LT(i,n,t)}}var Bi=class extends ue{static[U]="PgDateColumnBaseBuilder";defaultNow(){return this.default(j`now()`)}};var jT=class extends Bi{static[U]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Sf(e,this.config)}},Sf=class extends ne{static[U]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return typeof e=="string"?new Date(e):e}mapToDriverValue(e){return e.toISOString()}},BT=class extends Bi{static[U]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Nf(e,this.config)}},Nf=class extends ne{static[U]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(e){return typeof e=="string"?e:e.toISOString().slice(0,-14)}};function EL(t,e){let{name:r,config:i}=De(t,e);return i?.mode==="date"?new jT(r):new BT(r)}var MT=class extends ue{static[U]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new qT(e,this.config)}},qT=class extends ne{static[U]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function kL(t){return new MT(t??"")}var WT=class extends ue{static[U]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new FT(e,this.config)}},FT=class extends ne{static[U]="PgInet";getSQLType(){return"inet"}};function TL(t){return new WT(t??"")}var VT=class extends wo{static[U]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new KT(e,this.config)}},KT=class extends ne{static[U]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function Af(t){return new VT(t??"")}var HT=class extends ue{static[U]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new JT(e,this.config)}},JT=class extends ne{static[U]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}};function IL(t,e={}){let{name:r,config:i}=De(t,e);return new HT(r,i)}var QT=class extends ue{static[U]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new _f(e,this.config)}},_f=class extends ne{static[U]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function _u(t){return new QT(t??"")}var ZT=class extends ue{static[U]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Ef(e,this.config)}},Ef=class extends ne{static[U]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function $L(t){return new ZT(t??"")}var GT=class extends ue{static[U]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new YT(e,this.config)}},YT=class extends ne{static[U]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[r,i,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},XT=class extends ue{static[U]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new eI(e,this.config)}},eI=class extends ne{static[U]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,i,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(i),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function OL(t,e){let{name:r,config:i}=De(t,e);return!i?.mode||i.mode==="tuple"?new GT(r):new XT(r)}var tI=class extends ue{static[U]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new rI(e,this.config)}},rI=class extends ne{static[U]="PgMacaddr";getSQLType(){return"macaddr"}};function CL(t){return new tI(t??"")}var nI=class extends ue{static[U]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new iI(e,this.config)}},iI=class extends ne{static[U]="PgMacaddr8";getSQLType(){return"macaddr8"}};function PL(t){return new nI(t??"")}var oI=class extends ue{static[U]="PgNumericBuilder";constructor(e,r,i){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=i}build(e){return new kf(e,this.config)}},kf=class extends ne{static[U]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},sI=class extends ue{static[U]="PgNumericNumberBuilder";constructor(e,r,i){super(e,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=i}build(e){return new aI(e,this.config)}},aI=class extends ne{static[U]="PgNumericNumber";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},cI=class extends ue{static[U]="PgNumericBigIntBuilder";constructor(e,r,i){super(e,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=i}build(e){return new uI(e,this.config)}},uI=class extends ne{static[U]="PgNumericBigInt";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function RL(t,e){let{name:r,config:i}=De(t,e),n=i?.mode;return n==="number"?new sI(r,i?.precision,i?.scale):n==="bigint"?new cI(r,i?.precision,i?.scale):new oI(r,i?.precision,i?.scale)}var lI=class extends ue{static[U]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new dI(e,this.config)}},dI=class extends ne{static[U]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},fI=class extends ue{static[U]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new pI(e,this.config)}},pI=class extends ne{static[U]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function UL(t,e){let{name:r,config:i}=De(t,e);return!i?.mode||i.mode==="tuple"?new lI(r):new fI(r)}function v3(t){let e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function DL(t,e){let r=new ArrayBuffer(8),i=new DataView(r);for(let n=0;n<8;n++)i.setUint8(n,t[e+n]);return i.getFloat64(0,!0)}function mI(t){let e=v3(t),r=0,i=e[r];r+=1;let n=new DataView(e.buffer),o=n.getUint32(r,i===1);r+=4;let s;if(o&536870912&&(s=n.getUint32(r,i===1),r+=4),(o&65535)===1){let a=DL(e,r);r+=8;let c=DL(e,r);return r+=8,[a,c]}throw new Error("Unsupported geometry type")}var hI=class extends ue{static[U]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new gI(e,this.config)}},gI=class extends ne{static[U]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return mI(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},yI=class extends ue{static[U]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new wI(e,this.config)}},wI=class extends ne{static[U]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let r=mI(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function LL(t,e){let{name:r,config:i}=De(t,e);return!i?.mode||i.mode==="tuple"?new hI(r):new yI(r)}var bI=class extends ue{static[U]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new vI(e,this.config)}},vI=class extends ne{static[U]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function zL(t){return new bI(t??"")}var xI=class extends ue{static[U]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new SI(e,this.config)}},SI=class extends ne{static[U]="PgSerial";getSQLType(){return"serial"}};function jL(t){return new xI(t??"")}var NI=class extends wo{static[U]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new AI(e,this.config)}},AI=class extends ne{static[U]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function BL(t){return new NI(t??"")}var _I=class extends ue{static[U]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new EI(e,this.config)}},EI=class extends ne{static[U]="PgSmallSerial";getSQLType(){return"smallserial"}};function ML(t){return new _I(t??"")}var kI=class extends ue{static[U]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new TI(e,this.config)}},TI=class extends ne{static[U]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function ze(t,e={}){let{name:r,config:i}=De(t,e);return new kI(r,i)}var II=class extends Bi{constructor(e,r,i){super(e,"string","PgTime"),this.withTimezone=r,this.precision=i,this.config.withTimezone=r,this.config.precision=i}static[U]="PgTimeBuilder";build(e){return new Tf(e,this.config)}},Tf=class extends ne{static[U]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function qL(t,e={}){let{name:r,config:i}=De(t,e);return new II(r,i.withTimezone??!1,i.precision)}var $I=class extends Bi{static[U]="PgTimestampBuilder";constructor(e,r,i){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=i}build(e){return new If(e,this.config)}},If=class extends ne{static[U]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){return typeof e=="string"?new Date(this.withTimezone?e:e+"+0000"):e}mapToDriverValue=e=>e.toISOString()},OI=class extends Bi{static[U]="PgTimestampStringBuilder";constructor(e,r,i){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=i}build(e){return new $f(e,this.config)}},$f=class extends ne{static[U]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){if(typeof e=="string")return e;let r=e.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let i=e.getTimezoneOffset(),n=i<=0?"+":"-";return`${r}${n}${Math.floor(Math.abs(i)/60).toString().padStart(2,"0")}`}return r}};function $t(t,e={}){let{name:r,config:i}=De(t,e);return i?.mode==="string"?new OI(r,i.withTimezone??!1,i.precision):new $I(r,i?.withTimezone??!1,i?.precision)}var CI=class extends ue{static[U]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(j`gen_random_uuid()`)}build(e){return new Of(e,this.config)}},Of=class extends ne{static[U]="PgUUID";getSQLType(){return"uuid"}};function WL(t){return new CI(t??"")}var PI=class extends ue{static[U]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new RI(e,this.config)}},RI=class extends ne{static[U]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function FL(t,e={}){let{name:r,config:i}=De(t,e);return new PI(r,i)}var UI=class extends ue{static[U]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new DI(e,this.config)}},DI=class extends ne{static[U]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function VL(t,e){let{name:r,config:i}=De(t,e);return new UI(r,i)}var LI=class extends ue{static[U]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new zI(e,this.config)}},zI=class extends ne{static[U]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function KL(t,e){let{name:r,config:i}=De(t,e);return new LI(r,i)}var jI=class extends ue{static[U]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new BI(e,this.config)}},BI=class extends ne{static[U]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function HL(t,e){let{name:r,config:i}=De(t,e);return new jI(r,i)}var MI=class extends ue{static[U]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new qI(e,this.config)}},qI=class extends ne{static[U]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function JL(t,e){let{name:r,config:i}=De(t,e);return new MI(r,i)}function QL(){return{bigint:xL,bigserial:SL,boolean:xf,char:NL,cidr:AL,customType:_L,date:EL,doublePrecision:kL,inet:TL,integer:Af,interval:IL,json:_u,jsonb:$L,line:OL,macaddr:CL,macaddr8:PL,numeric:RL,point:UL,geometry:LL,real:zL,serial:jL,smallint:BL,smallserial:ML,text:ze,time:qL,timestamp:$t,uuid:WL,varchar:FL,bit:VL,halfvec:KL,sparsevec:HL,vector:JL}}var WI=Symbol.for("drizzle:PgInlineForeignKeys"),ZL=Symbol.for("drizzle:EnableRLS"),Wt=class extends oe{static[U]="PgTable";static Symbol=Object.assign({},oe.Symbol,{InlineForeignKeys:WI,EnableRLS:ZL});[WI]=[];[ZL]=!1;[oe.Symbol.ExtraConfigBuilder]=void 0;[oe.Symbol.ExtraConfigColumns]={}};function x3(t,e,r,i,n=t){let o=new Wt(t,i,n),s=typeof e=="function"?e(QL()):e,a=Object.fromEntries(Object.entries(s).map(([l,f])=>{let d=f;d.setName(l);let m=d.build(o);return o[WI].push(...d.buildForeignKeys(m,o)),[l,m]})),c=Object.fromEntries(Object.entries(s).map(([l,f])=>{let d=f;d.setName(l);let m=d.buildExtraConfigColumn(o);return[l,m]})),u=Object.assign(o,a);return u[oe.Symbol.Columns]=a,u[oe.Symbol.ExtraConfigColumns]=c,r&&(u[Wt.Symbol.ExtraConfigBuilder]=r),Object.assign(u,{enableRLS:()=>(u[Wt.Symbol.EnableRLS]=!0,u)})}var us=(t,e,r)=>x3(t,e,r,void 0);var zw=class{static[U]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new FI(e,this.columns,this.name)}},FI=class{constructor(e,r,i){this.table=e,this.columns=r,this.name=i}static[U]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Wt.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function en(t,e){return pL(e)&&!vT(t)&&!H(t,Xr)&&!H(t,ho)&&!H(t,rt)&&!H(t,oe)&&!H(t,jr)?new Xr(t,e):t}var Ee=(t,e)=>j`${t} = ${en(e,t)}`,Eu=(t,e)=>j`${t} <> ${en(e,t)}`;function vt(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new ce(e):new ce([new qt("("),j.join(e,new qt(" and ")),new qt(")")])}function Ta(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new ce(e):new ce([new qt("("),j.join(e,new qt(" or ")),new qt(")")])}function GL(t){return j`not ${t}`}var pi=(t,e)=>j`${t} > ${en(e,t)}`,ku=(t,e)=>j`${t} >= ${en(e,t)}`,Tu=(t,e)=>j`${t} < ${en(e,t)}`,Iu=(t,e)=>j`${t} <= ${en(e,t)}`;function $u(t,e){return Array.isArray(e)?e.length===0?j`false`:j`${t} in ${e.map(r=>en(r,t))}`:j`${t} in ${en(e,t)}`}function Ou(t,e){return Array.isArray(e)?e.length===0?j`true`:j`${t} not in ${e.map(r=>en(r,t))}`:j`${t} not in ${en(e,t)}`}function Ia(t){return j`${t} is null`}function YL(t){return j`${t} is not null`}function XL(t){return j`exists ${t}`}function e2(t){return j`not exists ${t}`}function t2(t,e,r){return j`${t} between ${en(e,t)} and ${en(r,t)}`}function r2(t,e,r){return j`${t} not between ${en(e,t)} and ${en(r,t)}`}function Un(t,e){return j`${t} like ${e}`}function n2(t,e){return j`${t} not like ${e}`}function i2(t,e){return j`${t} ilike ${e}`}function o2(t,e){return j`${t} not ilike ${e}`}function jw(t){return j`${t} asc`}function Cu(t){return j`${t} desc`}var Bw=class{constructor(e,r,i){this.sourceTable=e,this.referencedTable=r,this.relationName=i,this.referencedTableName=r[oe.Symbol.Name]}static[U]="Relation";referencedTableName;fieldName},Mw=class{constructor(e,r){this.table=e,this.config=r}static[U]="Relations"},ls=class t extends Bw{constructor(e,r,i,n){super(e,r,i?.relationName),this.config=i,this.isNullable=n}static[U]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},Cf=class t extends Bw{constructor(e,r,i){super(e,r,i?.relationName),this.config=i}static[U]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};function s2(){return{and:vt,between:t2,eq:Ee,exists:XL,gt:pi,gte:ku,ilike:i2,inArray:$u,isNull:Ia,isNotNull:YL,like:Un,lt:Tu,lte:Iu,ne:Eu,not:GL,notBetween:r2,notExists:e2,notLike:n2,notIlike:o2,notInArray:Ou,or:Ta,sql:j}}function a2(){return{sql:j,asc:jw,desc:Cu}}function c2(t,e){Object.keys(t).length===1&&"default"in t&&!H(t.default,oe)&&(t=t.default);let r={},i={},n={};for(let[o,s]of Object.entries(t))if(H(s,oe)){let a=Ea(s),c=i[a];r[a]=o,n[o]={tsName:o,dbName:s[oe.Symbol.Name],schema:s[oe.Symbol.Schema],columns:s[oe.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]};for(let l of Object.values(s[oe.Symbol.Columns]))l.primary&&n[o].primaryKey.push(l);let u=s[oe.Symbol.ExtraConfigBuilder]?.(s[oe.Symbol.ExtraConfigColumns]);if(u)for(let l of Object.values(u))H(l,zw)&&n[o].primaryKey.push(...l.columns)}else if(H(s,Mw)){let a=Ea(s.table),c=r[a],u=s.config(e(s.table)),l;for(let[f,d]of Object.entries(u))if(c){let m=n[c];m.relations[f]=d,l&&m.primaryKey.push(...l)}else a in i||(i[a]={relations:{},primaryKey:l}),i[a].relations[f]=d}return{tables:n,tableNamesMap:r}}function $a(t,e){return new Mw(t,r=>Object.fromEntries(Object.entries(e(r)).map(([i,n])=>[i,n.withFieldName(i)])))}function S3(t){return function(r,i){return new ls(t,r,i,i?.fields.reduce((n,o)=>n&&o.notNull,!0)??!1)}}function N3(t){return function(r,i){return new Cf(t,r,i)}}function u2(t,e,r){if(H(r,ls)&&r.config)return{fields:r.config.fields,references:r.config.references};let i=e[Ea(r.referencedTable)];if(!i)throw new Error(`Table "${r.referencedTable[oe.Symbol.Name]}" not found in schema`);let n=t[i];if(!n)throw new Error(`Table "${i}" not found in schema`);let o=r.sourceTable,s=e[Ea(o)];if(!s)throw new Error(`Table "${o[oe.Symbol.Name]}" not found in schema`);let a=[];for(let c of Object.values(n.relations))(r.relationName&&r!==c&&c.relationName===r.relationName||!r.relationName&&c.referencedTable===r.sourceTable)&&a.push(c);if(a.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${i}"`):new Error(`There are multiple relations between "${i}" and "${r.sourceTable[oe.Symbol.Name]}". Please specify relation name`);if(a[0]&&H(a[0],ls)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${s}.${r.fieldName}"`)}function l2(t){return{one:S3(t),many:N3(t)}}function qw(t,e,r,i,n=o=>o){let o={};for(let[s,a]of i.entries())if(a.isJson){let c=e.relations[a.tsKey],u=r[s],l=typeof u=="string"?JSON.parse(u):u;o[a.tsKey]=H(c,ls)?l&&qw(t,t[a.relationTableTsKey],l,a.selection,n):l.map(f=>qw(t,t[a.relationTableTsKey],f,a.selection,n))}else{let c=n(r[s]),u=a.field,l;H(u,rt)?l=u:H(u,ce)?l=u.decoder:l=u.sql.decoder,o[a.tsKey]=c===null?null:l.mapFromDriverValue(c)}return o}function d2(t){return j`count(${t||j.raw("*")})`.mapWith(Number)}var VI=(t,e)=>{let r=null,i=s=>({getFieldName:a,options:c})=>{function u(m){let h=e.schema||s._.fullSchema;if(!h)throw new de("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let p=h[m];if(!p)throw new de(`[# Drizzle Adapter]: The model "${m}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return p}let l=async(m,h,p,y)=>{if(e.provider!=="mysql")return(await h.returning())[0];await h.execute();let b=u(m),N=h.config?.values;if(y?.length){let T=f(y.map(I=>p[I.field]!==void 0?{...I,value:p[I.field]}:I),m);return(await s.select().from(b).where(...T))[0]}else if(N&&N[0]?.id?.value){let T=N[0]?.id?.value;return T||(T=(await s.select({id:j`LAST_INSERT_ID()`}).from(b).orderBy(Cu(b.id)).limit(1))[0].id),(await s.select().from(b).where(Ee(b.id,T)).limit(1).execute())[0]}else{if(p.id)return(await s.select().from(b).where(Ee(b.id,p.id)).limit(1).execute())[0];if(!("id"in b))throw new de(`The model "${m}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await s.select().from(b).orderBy(Cu(b.id)).limit(1).execute())[0]}};function f(m,h){let p=u(h);if(!m)return[];if(m.length===1){let $=m[0];if(!$)return[];let v=a({model:h,field:$.field});if(!p[v])throw new de(`The field "${$.field}" does not exist in the schema for the model "${h}". Please update your schema.`);if($.operator==="in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "in" operator.`);return[$u(p[v],$.value)]}if($.operator==="not_in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "not_in" operator.`);return[Ou(p[v],$.value)]}return $.operator==="contains"?[Un(p[v],`%${$.value}%`)]:$.operator==="starts_with"?[Un(p[v],`${$.value}%`)]:$.operator==="ends_with"?[Un(p[v],`%${$.value}`)]:$.operator==="lt"?[Tu(p[v],$.value)]:$.operator==="lte"?[Iu(p[v],$.value)]:$.operator==="ne"?[Eu(p[v],$.value)]:$.operator==="gt"?[pi(p[v],$.value)]:$.operator==="gte"?[ku(p[v],$.value)]:[Ee(p[v],$.value)]}let y=m.filter($=>$.connector==="AND"||!$.connector),b=m.filter($=>$.connector==="OR"),N=vt(...y.map($=>{let v=a({model:h,field:$.field});if($.operator==="in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "in" operator.`);return $u(p[v],$.value)}if($.operator==="not_in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "not_in" operator.`);return Ou(p[v],$.value)}return $.operator==="contains"?Un(p[v],`%${$.value}%`):$.operator==="starts_with"?Un(p[v],`${$.value}%`):$.operator==="ends_with"?Un(p[v],`%${$.value}`):$.operator==="lt"?Tu(p[v],$.value):$.operator==="lte"?Iu(p[v],$.value):$.operator==="gt"?pi(p[v],$.value):$.operator==="gte"?ku(p[v],$.value):$.operator==="ne"?Eu(p[v],$.value):Ee(p[v],$.value)})),T=Ta(...b.map($=>{let v=a({model:h,field:$.field});if($.operator==="in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "in" operator.`);return $u(p[v],$.value)}if($.operator==="not_in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "not_in" operator.`);return Ou(p[v],$.value)}return $.operator==="contains"?Un(p[v],`%${$.value}%`):$.operator==="starts_with"?Un(p[v],`${$.value}%`):$.operator==="ends_with"?Un(p[v],`%${$.value}`):$.operator==="lt"?Tu(p[v],$.value):$.operator==="lte"?Iu(p[v],$.value):$.operator==="gt"?pi(p[v],$.value):$.operator==="gte"?ku(p[v],$.value):$.operator==="ne"?Eu(p[v],$.value):Ee(p[v],$.value)})),I=[];return y.length&&I.push(N),b.length&&I.push(T),I}function d(m,h,p){if(!m)throw new de("Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.");for(let y in p)if(!m[y])throw new de(`The field "${y}" does not exist in the "${h}" Drizzle schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli@latest generate".`)}return{async create({model:m,data:h}){let p=u(m);return d(p,m,h),await l(m,s.insert(p).values(h),h)},async findOne({model:m,where:h,join:p}){let y=u(m),b=f(h,m);if(c.experimental?.joins)if(!s.query||!s.query[m])ye.error(`[# Drizzle Adapter]: The model "${m}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),ye.info("Falling back to regular query");else{let T,I=[];if(p){T={};let v=Object.entries(p);for(let[S,E]of v){let _=E.limit??c.advanced?.database?.defaultFindManyLimit??100,O=E.relation==="one-to-one",R=O||e.usePlural?"":"s";T[`${S}${R}`]=O?!0:{limit:_},O||I.push(`${S}${R}`)}}let $=await s.query[m].findFirst({where:b[0],with:T});if($)for(let v of I){let S=e.usePlural?v:v.slice(0,-1);$[S]=$[v],v!==S&&delete $[v]}return $}let N=await s.select().from(y).where(...b);return N.length?N[0]:null},async findMany({model:m,where:h,sortBy:p,limit:y,offset:b,join:N}){let T=u(m),I=h?f(h,m):[],$=p?.direction==="desc"?Cu:jw;if(c.experimental?.joins)if(!s.query[m])ye.error(`[# Drizzle Adapter]: The model "${m}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),ye.info("Falling back to regular query");else{let _,O=[];if(N){_={};let D=Object.entries(N);for(let[P,z]of D){let W=z.relation==="one-to-one",Q=z.limit??c.advanced?.database?.defaultFindManyLimit??100,G=W||e.usePlural?"":"s";_[`${P}${G}`]=W?!0:{limit:Q},W||O.push(`${P}${G}`)}}let R;p?.field&&(R=[$(T[a({model:m,field:p?.field})])]);let B=await s.query[m].findMany({where:I[0],with:_,limit:y??100,offset:b??0,orderBy:R});if(B)for(let D of B)for(let P of O){let z=e.usePlural?P:P.slice(0,-1);z!==P&&(D[z]=D[P],delete D[P])}return B}let v=s.select().from(T),S=y,E=b;return typeof S<"u"&&(v=v.limit(S)),typeof E<"u"&&(v=v.offset(E)),p?.field&&(v=v.orderBy($(T[a({model:m,field:p?.field})]))),await v.where(...I)},async count({model:m,where:h}){let p=u(m),y=h?f(h,m):[];return(await s.select({count:d2()}).from(p).where(...y))[0].count},async update({model:m,where:h,update:p}){let y=u(m),b=f(h,m);return await l(m,s.update(y).set(p).where(...b),p,h)},async updateMany({model:m,where:h,update:p}){let y=u(m),b=f(h,m);return await s.update(y).set(p).where(...b)},async delete({model:m,where:h}){let p=u(m),y=f(h,m);return await s.delete(p).where(...y)},async deleteMany({model:m,where:h}){let p=u(m),y=f(h,m),b=await s.delete(p).where(...y),N=0;return b&&"rowCount"in b?N=b.rowCount:Array.isArray(b)?N=b.length:b&&("affectedRows"in b||"rowsAffected"in b||"changes"in b)&&(N=b.affectedRows??b.rowsAffected??b.changes),typeof N!="number"&&ye.error("[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.",{res:b,model:m,where:h}),N},options:e}},n=null;n={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:e.usePlural??!1,debugLogs:e.debugLogs??!1,supportsUUIDs:e.provider==="pg",supportsJSON:e.provider==="pg",supportsArrays:e.provider==="pg",transaction:e.transaction??!1?s=>t.transaction(a=>s(Fo({config:n.config,adapter:i(a)})(r))):!1},adapter:i(t)};let o=Fo(n);return s=>(r=s,o(s))};var A3=Object.create,Ru=Object.defineProperty,_3=Object.getOwnPropertyDescriptor,E3=Object.getOwnPropertyNames,k3=Object.getPrototypeOf,T3=Object.prototype.hasOwnProperty,I3=(t,e,r)=>e in t?Ru(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,k=(t,e)=>Ru(t,"name",{value:e,configurable:!0}),tn=(t,e)=>()=>(t&&(e=t(t=0)),e),Pe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mi=(t,e)=>{for(var r in e)Ru(t,r,{get:e[r],enumerable:!0})},w2=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of E3(e))!T3.call(t,n)&&n!==r&&Ru(t,n,{get:()=>e[n],enumerable:!(i=_3(e,n))||i.enumerable});return t},Oa=(t,e,r)=>(r=t!=null?A3(k3(t)):{},w2(e||!t||!t.__esModule?Ru(r,"default",{value:t,enumerable:!0}):r,t)),sr=t=>w2(Ru({},"__esModule",{value:!0}),t),Ne=(t,e,r)=>I3(t,typeof e!="symbol"?e+"":e,r),$3=Pe(t=>{"use strict";he(),t.byteLength=c,t.toByteArray=l,t.fromByteArray=m;var e=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,s=n.length;o<s;++o)e[o]=n[o],r[n.charCodeAt(o)]=o;var o,s;r[45]=62,r[95]=63;function a(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=p);var b=y===p?0:4-y%4;return[y,b]}k(a,"getLens");function c(h){var p=a(h),y=p[0],b=p[1];return(y+b)*3/4-b}k(c,"byteLength");function u(h,p,y){return(p+y)*3/4-y}k(u,"_byteLength");function l(h){var p,y=a(h),b=y[0],N=y[1],T=new i(u(h,b,N)),I=0,$=N>0?b-4:b,v;for(v=0;v<$;v+=4)p=r[h.charCodeAt(v)]<<18|r[h.charCodeAt(v+1)]<<12|r[h.charCodeAt(v+2)]<<6|r[h.charCodeAt(v+3)],T[I++]=p>>16&255,T[I++]=p>>8&255,T[I++]=p&255;return N===2&&(p=r[h.charCodeAt(v)]<<2|r[h.charCodeAt(v+1)]>>4,T[I++]=p&255),N===1&&(p=r[h.charCodeAt(v)]<<10|r[h.charCodeAt(v+1)]<<4|r[h.charCodeAt(v+2)]>>2,T[I++]=p>>8&255,T[I++]=p&255),T}k(l,"toByteArray");function f(h){return e[h>>18&63]+e[h>>12&63]+e[h>>6&63]+e[h&63]}k(f,"tripletToBase64");function d(h,p,y){for(var b,N=[],T=p;T<y;T+=3)b=(h[T]<<16&16711680)+(h[T+1]<<8&65280)+(h[T+2]&255),N.push(f(b));return N.join("")}k(d,"encodeChunk");function m(h){for(var p,y=h.length,b=y%3,N=[],T=16383,I=0,$=y-b;I<$;I+=T)N.push(d(h,I,I+T>$?$:I+T));return b===1?(p=h[y-1],N.push(e[p>>2]+e[p<<4&63]+"==")):b===2&&(p=(h[y-2]<<8)+h[y-1],N.push(e[p>>10]+e[p>>4&63]+e[p<<2&63]+"=")),N.join("")}k(m,"fromByteArray")}),O3=Pe(t=>{he(),t.read=function(e,r,i,n,o){var s,a,c=o*8-n-1,u=(1<<c)-1,l=u>>1,f=-7,d=i?o-1:0,m=i?-1:1,h=e[r+d];for(d+=m,s=h&(1<<-f)-1,h>>=-f,f+=c;f>0;s=s*256+e[r+d],d+=m,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+e[r+d],d+=m,f-=8);if(s===0)s=1-l;else{if(s===u)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-l}return(h?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,r,i,n,o,s){var a,c,u,l=s*8-o-1,f=(1<<l)-1,d=f>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,p=n?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,a=f):(a=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+d>=1?r+=m/u:r+=m*Math.pow(2,1-d),r*u>=2&&(a++,u/=2),a+d>=f?(c=0,a=f):a+d>=1?(c=(r*u-1)*Math.pow(2,o),a=a+d):(c=r*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[i+h]=c&255,h+=p,c/=256,o-=8);for(a=a<<o|c,l+=o;l>0;e[i+h]=a&255,h+=p,a/=256,l-=8);e[i+h-p]|=y*128}}),C3=Pe(t=>{"use strict";he();var e=$3(),r=O3(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;var n=2147483647;t.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let g=new Uint8Array(1),x={foo:k(function(){return 42},"foo")};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(g,x),g.foo()===42}catch{return!1}}k(o,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:k(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:k(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function s(g){if(g>n)throw new RangeError('The value "'+g+'" is invalid for option "size"');let x=new Uint8Array(g);return Object.setPrototypeOf(x,a.prototype),x}k(s,"createBuffer");function a(g,x,A){if(typeof g=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(g)}return c(g,x,A)}k(a,"Buffer"),a.poolSize=8192;function c(g,x,A){if(typeof g=="string")return d(g,x);if(ArrayBuffer.isView(g))return h(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Mn(g,ArrayBuffer)||g&&Mn(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mn(g,SharedArrayBuffer)||g&&Mn(g.buffer,SharedArrayBuffer)))return p(g,x,A);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let L=g.valueOf&&g.valueOf();if(L!=null&&L!==g)return a.from(L,x,A);let F=y(g);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return a.from(g[Symbol.toPrimitive]("string"),x,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}k(c,"from"),a.from=function(g,x,A){return c(g,x,A)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}k(u,"assertSize");function l(g,x,A){return u(g),g<=0?s(g):x!==void 0?typeof A=="string"?s(g).fill(x,A):s(g).fill(x):s(g)}k(l,"alloc"),a.alloc=function(g,x,A){return l(g,x,A)};function f(g){return u(g),s(g<0?0:b(g)|0)}k(f,"allocUnsafe"),a.allocUnsafe=function(g){return f(g)},a.allocUnsafeSlow=function(g){return f(g)};function d(g,x){if((typeof x!="string"||x==="")&&(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);let A=T(g,x)|0,L=s(A),F=L.write(g,x);return F!==A&&(L=L.slice(0,F)),L}k(d,"fromString");function m(g){let x=g.length<0?0:b(g.length)|0,A=s(x);for(let L=0;L<x;L+=1)A[L]=g[L]&255;return A}k(m,"fromArrayLike");function h(g){if(Mn(g,Uint8Array)){let x=new Uint8Array(g);return p(x.buffer,x.byteOffset,x.byteLength)}return m(g)}k(h,"fromArrayView");function p(g,x,A){if(x<0||g.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<x+(A||0))throw new RangeError('"length" is outside of buffer bounds');let L;return x===void 0&&A===void 0?L=new Uint8Array(g):A===void 0?L=new Uint8Array(g,x):L=new Uint8Array(g,x,A),Object.setPrototypeOf(L,a.prototype),L}k(p,"fromArrayBuffer");function y(g){if(a.isBuffer(g)){let x=b(g.length)|0,A=s(x);return A.length===0||g.copy(A,0,0,x),A}if(g.length!==void 0)return typeof g.length!="number"||Qf(g.length)?s(0):m(g);if(g.type==="Buffer"&&Array.isArray(g.data))return m(g.data)}k(y,"fromObject");function b(g){if(g>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return g|0}k(b,"checked");function N(g){return+g!=g&&(g=0),a.alloc(+g)}k(N,"SlowBuffer"),a.isBuffer=k(function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},"isBuffer"),a.compare=k(function(g,x){if(Mn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),Mn(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(g)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===x)return 0;let A=g.length,L=x.length;for(let F=0,Z=Math.min(A,L);F<Z;++F)if(g[F]!==x[F]){A=g[F],L=x[F];break}return A<L?-1:L<A?1:0},"compare"),a.isEncoding=k(function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=k(function(g,x){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let A;if(x===void 0)for(x=0,A=0;A<g.length;++A)x+=g[A].length;let L=a.allocUnsafe(x),F=0;for(A=0;A<g.length;++A){let Z=g[A];if(Mn(Z,Uint8Array))F+Z.length>L.length?(a.isBuffer(Z)||(Z=a.from(Z)),Z.copy(L,F)):Uint8Array.prototype.set.call(L,Z,F);else if(a.isBuffer(Z))Z.copy(L,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=Z.length}return L},"concat");function T(g,x){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Mn(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);let A=g.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&A===0)return 0;let F=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return Jf(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return xb(g).length;default:if(F)return L?-1:Jf(g).length;x=(""+x).toLowerCase(),F=!0}}k(T,"byteLength"),a.byteLength=T;function I(g,x,A){let L=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,x>>>=0,A<=x))return"";for(g||(g="utf8");;)switch(g){case"hex":return J(this,x,A);case"utf8":case"utf-8":return P(this,x,A);case"ascii":return Q(this,x,A);case"latin1":case"binary":return G(this,x,A);case"base64":return D(this,x,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,x,A);default:if(L)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),L=!0}}k(I,"slowToString"),a.prototype._isBuffer=!0;function $(g,x,A){let L=g[x];g[x]=g[A],g[A]=L}k($,"swap"),a.prototype.swap16=k(function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<g;x+=2)$(this,x,x+1);return this},"swap16"),a.prototype.swap32=k(function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<g;x+=4)$(this,x,x+3),$(this,x+1,x+2);return this},"swap32"),a.prototype.swap64=k(function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<g;x+=8)$(this,x,x+7),$(this,x+1,x+6),$(this,x+2,x+5),$(this,x+3,x+4);return this},"swap64"),a.prototype.toString=k(function(){let g=this.length;return g===0?"":arguments.length===0?P(this,0,g):I.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=k(function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},"equals"),a.prototype.inspect=k(function(){let g="",x=t.INSPECT_MAX_BYTES;return g=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(g+=" ... "),"<Buffer "+g+">"},"inspect"),i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=k(function(g,x,A,L,F){if(Mn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(x===void 0&&(x=0),A===void 0&&(A=g?g.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),x<0||A>g.length||L<0||F>this.length)throw new RangeError("out of range index");if(L>=F&&x>=A)return 0;if(L>=F)return-1;if(x>=A)return 1;if(x>>>=0,A>>>=0,L>>>=0,F>>>=0,this===g)return 0;let Z=F-L,re=A-x,pt=Math.min(Z,re),Gt=this.slice(L,F),xt=g.slice(x,A);for(let mt=0;mt<pt;++mt)if(Gt[mt]!==xt[mt]){Z=Gt[mt],re=xt[mt];break}return Z<re?-1:re<Z?1:0},"compare");function v(g,x,A,L,F){if(g.length===0)return-1;if(typeof A=="string"?(L=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Qf(A)&&(A=F?0:g.length-1),A<0&&(A=g.length+A),A>=g.length){if(F)return-1;A=g.length-1}else if(A<0)if(F)A=0;else return-1;if(typeof x=="string"&&(x=a.from(x,L)),a.isBuffer(x))return x.length===0?-1:S(g,x,A,L,F);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(g,x,A):Uint8Array.prototype.lastIndexOf.call(g,x,A):S(g,[x],A,L,F);throw new TypeError("val must be string, number or Buffer")}k(v,"bidirectionalIndexOf");function S(g,x,A,L,F){let Z=1,re=g.length,pt=x.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(g.length<2||x.length<2)return-1;Z=2,re/=2,pt/=2,A/=2}function Gt(mt,jt){return Z===1?mt[jt]:mt.readUInt16BE(jt*Z)}k(Gt,"read");let xt;if(F){let mt=-1;for(xt=A;xt<re;xt++)if(Gt(g,xt)===Gt(x,mt===-1?0:xt-mt)){if(mt===-1&&(mt=xt),xt-mt+1===pt)return mt*Z}else mt!==-1&&(xt-=xt-mt),mt=-1}else for(A+pt>re&&(A=re-pt),xt=A;xt>=0;xt--){let mt=!0;for(let jt=0;jt<pt;jt++)if(Gt(g,xt+jt)!==Gt(x,jt)){mt=!1;break}if(mt)return xt}return-1}k(S,"arrayIndexOf"),a.prototype.includes=k(function(g,x,A){return this.indexOf(g,x,A)!==-1},"includes"),a.prototype.indexOf=k(function(g,x,A){return v(this,g,x,A,!0)},"indexOf"),a.prototype.lastIndexOf=k(function(g,x,A){return v(this,g,x,A,!1)},"lastIndexOf");function E(g,x,A,L){A=Number(A)||0;let F=g.length-A;L?(L=Number(L),L>F&&(L=F)):L=F;let Z=x.length;L>Z/2&&(L=Z/2);let re;for(re=0;re<L;++re){let pt=parseInt(x.substr(re*2,2),16);if(Qf(pt))return re;g[A+re]=pt}return re}k(E,"hexWrite");function _(g,x,A,L){return Wu(Jf(x,g.length-A),g,A,L)}k(_,"utf8Write");function O(g,x,A,L){return Wu(_$(x),g,A,L)}k(O,"asciiWrite");function R(g,x,A,L){return Wu(xb(x),g,A,L)}k(R,"base64Write");function B(g,x,A,L){return Wu(E$(x,g.length-A),g,A,L)}k(B,"ucs2Write"),a.prototype.write=k(function(g,x,A,L){if(x===void 0)L="utf8",A=this.length,x=0;else if(A===void 0&&typeof x=="string")L=x,A=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(A)?(A=A>>>0,L===void 0&&(L="utf8")):(L=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let F=this.length-x;if((A===void 0||A>F)&&(A=F),g.length>0&&(A<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return E(this,g,x,A);case"utf8":case"utf-8":return _(this,g,x,A);case"ascii":case"latin1":case"binary":return O(this,g,x,A);case"base64":return R(this,g,x,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,g,x,A);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},"write"),a.prototype.toJSON=k(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function D(g,x,A){return x===0&&A===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(x,A))}k(D,"base64Slice");function P(g,x,A){A=Math.min(g.length,A);let L=[],F=x;for(;F<A;){let Z=g[F],re=null,pt=Z>239?4:Z>223?3:Z>191?2:1;if(F+pt<=A){let Gt,xt,mt,jt;switch(pt){case 1:Z<128&&(re=Z);break;case 2:Gt=g[F+1],(Gt&192)===128&&(jt=(Z&31)<<6|Gt&63,jt>127&&(re=jt));break;case 3:Gt=g[F+1],xt=g[F+2],(Gt&192)===128&&(xt&192)===128&&(jt=(Z&15)<<12|(Gt&63)<<6|xt&63,jt>2047&&(jt<55296||jt>57343)&&(re=jt));break;case 4:Gt=g[F+1],xt=g[F+2],mt=g[F+3],(Gt&192)===128&&(xt&192)===128&&(mt&192)===128&&(jt=(Z&15)<<18|(Gt&63)<<12|(xt&63)<<6|mt&63,jt>65535&&jt<1114112&&(re=jt))}}re===null?(re=65533,pt=1):re>65535&&(re-=65536,L.push(re>>>10&1023|55296),re=56320|re&1023),L.push(re),F+=pt}return W(L)}k(P,"utf8Slice");var z=4096;function W(g){let x=g.length;if(x<=z)return String.fromCharCode.apply(String,g);let A="",L=0;for(;L<x;)A+=String.fromCharCode.apply(String,g.slice(L,L+=z));return A}k(W,"decodeCodePointsArray");function Q(g,x,A){let L="";A=Math.min(g.length,A);for(let F=x;F<A;++F)L+=String.fromCharCode(g[F]&127);return L}k(Q,"asciiSlice");function G(g,x,A){let L="";A=Math.min(g.length,A);for(let F=x;F<A;++F)L+=String.fromCharCode(g[F]);return L}k(G,"latin1Slice");function J(g,x,A){let L=g.length;(!x||x<0)&&(x=0),(!A||A<0||A>L)&&(A=L);let F="";for(let Z=x;Z<A;++Z)F+=vz[g[Z]];return F}k(J,"hexSlice");function le(g,x,A){let L=g.slice(x,A),F="";for(let Z=0;Z<L.length-1;Z+=2)F+=String.fromCharCode(L[Z]+L[Z+1]*256);return F}k(le,"utf16leSlice"),a.prototype.slice=k(function(g,x){let A=this.length;g=~~g,x=x===void 0?A:~~x,g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),x<0?(x+=A,x<0&&(x=0)):x>A&&(x=A),x<g&&(x=g);let L=this.subarray(g,x);return Object.setPrototypeOf(L,a.prototype),L},"slice");function se(g,x,A){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+x>A)throw new RangeError("Trying to access beyond buffer length")}k(se,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=this[g],F=1,Z=0;for(;++Z<x&&(F*=256);)L+=this[g+Z]*F;return L},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=this[g+--x],F=1;for(;x>0&&(F*=256);)L+=this[g+--x]*F;return L},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=k(function(g,x){return g=g>>>0,x||se(g,1,this.length),this[g]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=k(function(g,x){return g=g>>>0,x||se(g,2,this.length),this[g]|this[g+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=k(function(g,x){return g=g>>>0,x||se(g,2,this.length),this[g]<<8|this[g+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=Mi(k(function(g){g=g>>>0,ms(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Pa(g,this.length-8);let L=x+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,F=this[++g]+this[++g]*2**8+this[++g]*2**16+A*2**24;return BigInt(L)+(BigInt(F)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=Mi(k(function(g){g=g>>>0,ms(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Pa(g,this.length-8);let L=x*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],F=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+A;return(BigInt(L)<<BigInt(32))+BigInt(F)},"readBigUInt64BE")),a.prototype.readIntLE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=this[g],F=1,Z=0;for(;++Z<x&&(F*=256);)L+=this[g+Z]*F;return F*=128,L>=F&&(L-=Math.pow(2,8*x)),L},"readIntLE"),a.prototype.readIntBE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=x,F=1,Z=this[g+--L];for(;L>0&&(F*=256);)Z+=this[g+--L]*F;return F*=128,Z>=F&&(Z-=Math.pow(2,8*x)),Z},"readIntBE"),a.prototype.readInt8=k(function(g,x){return g=g>>>0,x||se(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},"readInt8"),a.prototype.readInt16LE=k(function(g,x){g=g>>>0,x||se(g,2,this.length);let A=this[g]|this[g+1]<<8;return A&32768?A|4294901760:A},"readInt16LE"),a.prototype.readInt16BE=k(function(g,x){g=g>>>0,x||se(g,2,this.length);let A=this[g+1]|this[g]<<8;return A&32768?A|4294901760:A},"readInt16BE"),a.prototype.readInt32LE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},"readInt32LE"),a.prototype.readInt32BE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},"readInt32BE"),a.prototype.readBigInt64LE=Mi(k(function(g){g=g>>>0,ms(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Pa(g,this.length-8);let L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(A<<24);return(BigInt(L)<<BigInt(32))+BigInt(x+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=Mi(k(function(g){g=g>>>0,ms(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Pa(g,this.length-8);let L=(x<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+A)},"readBigInt64BE")),a.prototype.readFloatLE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),r.read(this,g,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),r.read(this,g,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=k(function(g,x){return g=g>>>0,x||se(g,8,this.length),r.read(this,g,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=k(function(g,x){return g=g>>>0,x||se(g,8,this.length),r.read(this,g,!1,52,8)},"readDoubleBE");function be(g,x,A,L,F,Z){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>F||x<Z)throw new RangeError('"value" argument is out of bounds');if(A+L>g.length)throw new RangeError("Index out of range")}k(be,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=k(function(g,x,A,L){if(g=+g,x=x>>>0,A=A>>>0,!L){let re=Math.pow(2,8*A)-1;be(this,g,x,A,re,0)}let F=1,Z=0;for(this[x]=g&255;++Z<A&&(F*=256);)this[x+Z]=g/F&255;return x+A},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=k(function(g,x,A,L){if(g=+g,x=x>>>0,A=A>>>0,!L){let re=Math.pow(2,8*A)-1;be(this,g,x,A,re,0)}let F=A-1,Z=1;for(this[x+F]=g&255;--F>=0&&(Z*=256);)this[x+F]=g/Z&255;return x+A},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,1,255,0),this[x]=g&255,x+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,65535,0),this[x]=g&255,this[x+1]=g>>>8,x+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,65535,0),this[x]=g>>>8,this[x+1]=g&255,x+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,4294967295,0),this[x+3]=g>>>24,this[x+2]=g>>>16,this[x+1]=g>>>8,this[x]=g&255,x+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,4294967295,0),this[x]=g>>>24,this[x+1]=g>>>16,this[x+2]=g>>>8,this[x+3]=g&255,x+4},"writeUInt32BE");function Re(g,x,A,L,F){vb(x,L,F,g,A,7);let Z=Number(x&BigInt(4294967295));g[A++]=Z,Z=Z>>8,g[A++]=Z,Z=Z>>8,g[A++]=Z,Z=Z>>8,g[A++]=Z;let re=Number(x>>BigInt(32)&BigInt(4294967295));return g[A++]=re,re=re>>8,g[A++]=re,re=re>>8,g[A++]=re,re=re>>8,g[A++]=re,A}k(Re,"wrtBigUInt64LE");function Lt(g,x,A,L,F){vb(x,L,F,g,A,7);let Z=Number(x&BigInt(4294967295));g[A+7]=Z,Z=Z>>8,g[A+6]=Z,Z=Z>>8,g[A+5]=Z,Z=Z>>8,g[A+4]=Z;let re=Number(x>>BigInt(32)&BigInt(4294967295));return g[A+3]=re,re=re>>8,g[A+2]=re,re=re>>8,g[A+1]=re,re=re>>8,g[A]=re,A+8}k(Lt,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=Mi(k(function(g,x=0){return Re(this,g,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=Mi(k(function(g,x=0){return Lt(this,g,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=k(function(g,x,A,L){if(g=+g,x=x>>>0,!L){let pt=Math.pow(2,8*A-1);be(this,g,x,A,pt-1,-pt)}let F=0,Z=1,re=0;for(this[x]=g&255;++F<A&&(Z*=256);)g<0&&re===0&&this[x+F-1]!==0&&(re=1),this[x+F]=(g/Z>>0)-re&255;return x+A},"writeIntLE"),a.prototype.writeIntBE=k(function(g,x,A,L){if(g=+g,x=x>>>0,!L){let pt=Math.pow(2,8*A-1);be(this,g,x,A,pt-1,-pt)}let F=A-1,Z=1,re=0;for(this[x+F]=g&255;--F>=0&&(Z*=256);)g<0&&re===0&&this[x+F+1]!==0&&(re=1),this[x+F]=(g/Z>>0)-re&255;return x+A},"writeIntBE"),a.prototype.writeInt8=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,1,127,-128),g<0&&(g=255+g+1),this[x]=g&255,x+1},"writeInt8"),a.prototype.writeInt16LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,32767,-32768),this[x]=g&255,this[x+1]=g>>>8,x+2},"writeInt16LE"),a.prototype.writeInt16BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,32767,-32768),this[x]=g>>>8,this[x+1]=g&255,x+2},"writeInt16BE"),a.prototype.writeInt32LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,2147483647,-2147483648),this[x]=g&255,this[x+1]=g>>>8,this[x+2]=g>>>16,this[x+3]=g>>>24,x+4},"writeInt32LE"),a.prototype.writeInt32BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[x]=g>>>24,this[x+1]=g>>>16,this[x+2]=g>>>8,this[x+3]=g&255,x+4},"writeInt32BE"),a.prototype.writeBigInt64LE=Mi(k(function(g,x=0){return Re(this,g,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=Mi(k(function(g,x=0){return Lt(this,g,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function jn(g,x,A,L,F,Z){if(A+L>g.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}k(jn,"checkIEEE754");function wn(g,x,A,L,F){return x=+x,A=A>>>0,F||jn(g,x,A,4,34028234663852886e22,-34028234663852886e22),r.write(g,x,A,L,23,4),A+4}k(wn,"writeFloat"),a.prototype.writeFloatLE=k(function(g,x,A){return wn(this,g,x,!0,A)},"writeFloatLE"),a.prototype.writeFloatBE=k(function(g,x,A){return wn(this,g,x,!1,A)},"writeFloatBE");function yi(g,x,A,L,F){return x=+x,A=A>>>0,F||jn(g,x,A,8,17976931348623157e292,-17976931348623157e292),r.write(g,x,A,L,52,8),A+8}k(yi,"writeDouble"),a.prototype.writeDoubleLE=k(function(g,x,A){return yi(this,g,x,!0,A)},"writeDoubleLE"),a.prototype.writeDoubleBE=k(function(g,x,A){return yi(this,g,x,!1,A)},"writeDoubleBE"),a.prototype.copy=k(function(g,x,A,L){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(A||(A=0),!L&&L!==0&&(L=this.length),x>=g.length&&(x=g.length),x||(x=0),L>0&&L<A&&(L=A),L===A||g.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-x<L-A&&(L=g.length-x+A);let F=L-A;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,A,L):Uint8Array.prototype.set.call(g,this.subarray(A,L),x),F},"copy"),a.prototype.fill=k(function(g,x,A,L){if(typeof g=="string"){if(typeof x=="string"?(L=x,x=0,A=this.length):typeof A=="string"&&(L=A,A=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){let Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(x<0||this.length<x||this.length<A)throw new RangeError("Out of range index");if(A<=x)return this;x=x>>>0,A=A===void 0?this.length:A>>>0,g||(g=0);let F;if(typeof g=="number")for(F=x;F<A;++F)this[F]=g;else{let Z=a.isBuffer(g)?g:a.from(g,L),re=Z.length;if(re===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(F=0;F<A-x;++F)this[F+x]=Z[F%re]}return this},"fill");var nn={};function Bn(g,x,A){var L;nn[g]=(L=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}},k(L,"NodeError"),L)}k(Bn,"E"),Bn("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Bn("ERR_INVALID_ARG_TYPE",function(g,x){return`The "${g}" argument must be of type number. Received type ${typeof x}`},TypeError),Bn("ERR_OUT_OF_RANGE",function(g,x,A){let L=`The value of "${g}" is out of range.`,F=A;return Number.isInteger(A)&&Math.abs(A)>2**32?F=bb(String(A)):typeof A=="bigint"&&(F=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(F=bb(F)),F+="n"),L+=` It must be ${x}. Received ${F}`,L},RangeError);function bb(g){let x="",A=g.length,L=g[0]==="-"?1:0;for(;A>=L+4;A-=3)x=`_${g.slice(A-3,A)}${x}`;return`${g.slice(0,A)}${x}`}k(bb,"addNumericalSeparator");function N$(g,x,A){ms(x,"offset"),(g[x]===void 0||g[x+A]===void 0)&&Pa(x,g.length-(A+1))}k(N$,"checkBounds");function vb(g,x,A,L,F,Z){if(g>A||g<x){let re=typeof x=="bigint"?"n":"",pt;throw Z>3?x===0||x===BigInt(0)?pt=`>= 0${re} and < 2${re} ** ${(Z+1)*8}${re}`:pt=`>= -(2${re} ** ${(Z+1)*8-1}${re}) and < 2 ** ${(Z+1)*8-1}${re}`:pt=`>= ${x}${re} and <= ${A}${re}`,new nn.ERR_OUT_OF_RANGE("value",pt,g)}N$(L,F,Z)}k(vb,"checkIntBI");function ms(g,x){if(typeof g!="number")throw new nn.ERR_INVALID_ARG_TYPE(x,"number",g)}k(ms,"validateNumber");function Pa(g,x,A){throw Math.floor(g)!==g?(ms(g,A),new nn.ERR_OUT_OF_RANGE(A||"offset","an integer",g)):x<0?new nn.ERR_BUFFER_OUT_OF_BOUNDS:new nn.ERR_OUT_OF_RANGE(A||"offset",`>= ${A?1:0} and <= ${x}`,g)}k(Pa,"boundsError");var bz=/[^+/0-9A-Za-z-_]/g;function A$(g){if(g=g.split("=")[0],g=g.trim().replace(bz,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}k(A$,"base64clean");function Jf(g,x){x=x||1/0;let A,L=g.length,F=null,Z=[];for(let re=0;re<L;++re){if(A=g.charCodeAt(re),A>55295&&A<57344){if(!F){if(A>56319){(x-=3)>-1&&Z.push(239,191,189);continue}else if(re+1===L){(x-=3)>-1&&Z.push(239,191,189);continue}F=A;continue}if(A<56320){(x-=3)>-1&&Z.push(239,191,189),F=A;continue}A=(F-55296<<10|A-56320)+65536}else F&&(x-=3)>-1&&Z.push(239,191,189);if(F=null,A<128){if((x-=1)<0)break;Z.push(A)}else if(A<2048){if((x-=2)<0)break;Z.push(A>>6|192,A&63|128)}else if(A<65536){if((x-=3)<0)break;Z.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((x-=4)<0)break;Z.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return Z}k(Jf,"utf8ToBytes");function _$(g){let x=[];for(let A=0;A<g.length;++A)x.push(g.charCodeAt(A)&255);return x}k(_$,"asciiToBytes");function E$(g,x){let A,L,F,Z=[];for(let re=0;re<g.length&&!((x-=2)<0);++re)A=g.charCodeAt(re),L=A>>8,F=A%256,Z.push(F),Z.push(L);return Z}k(E$,"utf16leToBytes");function xb(g){return e.toByteArray(A$(g))}k(xb,"base64ToBytes");function Wu(g,x,A,L){let F;for(F=0;F<L&&!(F+A>=x.length||F>=g.length);++F)x[F+A]=g[F];return F}k(Wu,"blitBuffer");function Mn(g,x){return g instanceof x||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===x.name}k(Mn,"isInstance");function Qf(g){return g!==g}k(Qf,"numberIsNaN");var vz=(function(){let g="0123456789abcdef",x=new Array(256);for(let A=0;A<16;++A){let L=A*16;for(let F=0;F<16;++F)x[L+F]=g[A]+g[F]}return x})();function Mi(g){return typeof BigInt>"u"?k$:g}k(Mi,"defineBigIntMethod");function k$(){throw new Error("BigInt not supported")}k(k$,"BufferBigIntNotDefined")}),Hw,GI,P3,Se,Ce,he=tn(()=>{"use strict";Hw=globalThis,GI=globalThis.setImmediate??(t=>setTimeout(t,0)),P3=globalThis.clearImmediate??(t=>clearTimeout(t)),Se=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:C3().Buffer,Ce=globalThis.process??{},Ce.env??(Ce.env={});try{Ce.nextTick(()=>{})}catch{let t=Promise.resolve();Ce.nextTick=t.then.bind(t)}}),Ca=Pe((t,e)=>{"use strict";he();var r=typeof Reflect=="object"?Reflect:null,i=r&&typeof r.apply=="function"?r.apply:k(function(v,S,E){return Function.prototype.apply.call(v,S,E)},"ReflectApply"),n;r&&typeof r.ownKeys=="function"?n=r.ownKeys:Object.getOwnPropertySymbols?n=k(function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))},"ReflectOwnKeys"):n=k(function(v){return Object.getOwnPropertyNames(v)},"ReflectOwnKeys");function o(v){console&&console.warn&&console.warn(v)}k(o,"ProcessEmitWarning");var s=Number.isNaN||k(function(v){return v!==v},"NumberIsNaN");function a(){a.init.call(this)}k(a,"EventEmitter"),e.exports=a,e.exports.once=T,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}k(u,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:k(function(){return c},"get"),set:k(function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");c=v},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=k(function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this},"setMaxListeners");function l(v){return v._maxListeners===void 0?a.defaultMaxListeners:v._maxListeners}k(l,"_getMaxListeners"),a.prototype.getMaxListeners=k(function(){return l(this)},"getMaxListeners"),a.prototype.emit=k(function(v){for(var S=[],E=1;E<arguments.length;E++)S.push(arguments[E]);var _=v==="error",O=this._events;if(O!==void 0)_=_&&O.error===void 0;else if(!_)return!1;if(_){var R;if(S.length>0&&(R=S[0]),R instanceof Error)throw R;var B=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw B.context=R,B}var D=O[v];if(D===void 0)return!1;if(typeof D=="function")i(D,this,S);else for(var P=D.length,z=y(D,P),E=0;E<P;++E)i(z[E],this,S);return!0},"emit");function f(v,S,E,_){var O,R,B;if(u(E),R=v._events,R===void 0?(R=v._events=Object.create(null),v._eventsCount=0):(R.newListener!==void 0&&(v.emit("newListener",S,E.listener?E.listener:E),R=v._events),B=R[S]),B===void 0)B=R[S]=E,++v._eventsCount;else if(typeof B=="function"?B=R[S]=_?[E,B]:[B,E]:_?B.unshift(E):B.push(E),O=l(v),O>0&&B.length>O&&!B.warned){B.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=v,D.type=S,D.count=B.length,o(D)}return v}k(f,"_addListener"),a.prototype.addListener=k(function(v,S){return f(this,v,S,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=k(function(v,S){return f(this,v,S,!0)},"prependListener");function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}k(d,"onceWrapper");function m(v,S,E){var _={fired:!1,wrapFn:void 0,target:v,type:S,listener:E},O=d.bind(_);return O.listener=E,_.wrapFn=O,O}k(m,"_onceWrap"),a.prototype.once=k(function(v,S){return u(S),this.on(v,m(this,v,S)),this},"once"),a.prototype.prependOnceListener=k(function(v,S){return u(S),this.prependListener(v,m(this,v,S)),this},"prependOnceListener"),a.prototype.removeListener=k(function(v,S){var E,_,O,R,B;if(u(S),_=this._events,_===void 0)return this;if(E=_[v],E===void 0)return this;if(E===S||E.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete _[v],_.removeListener&&this.emit("removeListener",v,E.listener||S));else if(typeof E!="function"){for(O=-1,R=E.length-1;R>=0;R--)if(E[R]===S||E[R].listener===S){B=E[R].listener,O=R;break}if(O<0)return this;O===0?E.shift():b(E,O),E.length===1&&(_[v]=E[0]),_.removeListener!==void 0&&this.emit("removeListener",v,B||S)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=k(function(v){var S,E,_;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[v]),this;if(arguments.length===0){var O=Object.keys(E),R;for(_=0;_<O.length;++_)R=O[_],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=E[v],typeof S=="function")this.removeListener(v,S);else if(S!==void 0)for(_=S.length-1;_>=0;_--)this.removeListener(v,S[_]);return this},"removeAllListeners");function h(v,S,E){var _=v._events;if(_===void 0)return[];var O=_[S];return O===void 0?[]:typeof O=="function"?E?[O.listener||O]:[O]:E?N(O):y(O,O.length)}k(h,"_listeners"),a.prototype.listeners=k(function(v){return h(this,v,!0)},"listeners"),a.prototype.rawListeners=k(function(v){return h(this,v,!1)},"rawListeners"),a.listenerCount=function(v,S){return typeof v.listenerCount=="function"?v.listenerCount(S):p.call(v,S)},a.prototype.listenerCount=p;function p(v){var S=this._events;if(S!==void 0){var E=S[v];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}k(p,"listenerCount"),a.prototype.eventNames=k(function(){return this._eventsCount>0?n(this._events):[]},"eventNames");function y(v,S){for(var E=new Array(S),_=0;_<S;++_)E[_]=v[_];return E}k(y,"arrayClone");function b(v,S){for(;S+1<v.length;S++)v[S]=v[S+1];v.pop()}k(b,"spliceOne");function N(v){for(var S=new Array(v.length),E=0;E<S.length;++E)S[E]=v[E].listener||v[E];return S}k(N,"unwrapListeners");function T(v,S){return new Promise(function(E,_){function O(B){v.removeListener(S,R),_(B)}k(O,"errorListener");function R(){typeof v.removeListener=="function"&&v.removeListener("error",O),E([].slice.call(arguments))}k(R,"resolver"),$(v,S,R,{once:!0}),S!=="error"&&I(v,O,{once:!0})})}k(T,"once");function I(v,S,E){typeof v.on=="function"&&$(v,"error",S,E)}k(I,"addErrorHandlerIfEventEmitter");function $(v,S,E,_){if(typeof v.on=="function")_.once?v.once(S,E):v.on(S,E);else if(typeof v.addEventListener=="function")v.addEventListener(S,k(function O(R){_.once&&v.removeEventListener(S,O),E(R)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}k($,"eventTargetAgnosticAddListener")}),b2={};mi(b2,{Socket:()=>Df,isIP:()=>v2});function v2(t){return 0}var f2,KI,Pf,Df,Lf=tn(()=>{"use strict";he(),f2=Oa(Ca(),1),k(v2,"isIP"),KI=/^[^.]+\./,Pf=class ve extends f2.EventEmitter{constructor(){super(...arguments),Ne(this,"opts",{}),Ne(this,"connecting",!1),Ne(this,"pending",!0),Ne(this,"writable",!0),Ne(this,"encrypted",!1),Ne(this,"authorized",!1),Ne(this,"destroyed",!1),Ne(this,"ws",null),Ne(this,"writeBuffer"),Ne(this,"tlsState",0),Ne(this,"tlsRead"),Ne(this,"tlsWrite")}static get poolQueryViaFetch(){return ve.opts.poolQueryViaFetch??ve.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){ve.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return ve.opts.fetchEndpoint??ve.defaults.fetchEndpoint}static set fetchEndpoint(e){ve.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return ve.opts.fetchFunction??ve.defaults.fetchFunction}static set fetchFunction(e){ve.opts.fetchFunction=e}static get webSocketConstructor(){return ve.opts.webSocketConstructor??ve.defaults.webSocketConstructor}static set webSocketConstructor(e){ve.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??ve.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return ve.opts.wsProxy??ve.defaults.wsProxy}static set wsProxy(e){ve.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??ve.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return ve.opts.coalesceWrites??ve.defaults.coalesceWrites}static set coalesceWrites(e){ve.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??ve.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return ve.opts.useSecureWebSocket??ve.defaults.useSecureWebSocket}static set useSecureWebSocket(e){ve.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??ve.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return ve.opts.forceDisablePgSSL??ve.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){ve.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??ve.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return ve.opts.disableSNI??ve.defaults.disableSNI}static set disableSNI(e){ve.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??ve.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return ve.opts.disableWarningInBrowsers??ve.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){ve.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??ve.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return ve.opts.pipelineConnect??ve.defaults.pipelineConnect}static set pipelineConnect(e){ve.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??ve.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return ve.opts.subtls??ve.defaults.subtls}static set subtls(e){ve.opts.subtls=e}get subtls(){return this.opts.subtls??ve.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return ve.opts.pipelineTLS??ve.defaults.pipelineTLS}static set pipelineTLS(e){ve.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??ve.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return ve.opts.rootCerts??ve.defaults.rootCerts}static set rootCerts(e){ve.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??ve.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let i=this.wsProxy;if(i===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof i=="function"?i(e,r):`${i}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,i){this.connecting=!0,i&&this.once("connect",i);let n=k(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),o=k((a,c=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",u=>{this.emit("error",u),this.emit("close")}),a.addEventListener("message",u=>{if(this.tlsState===0){let l=Se.from(u.data);this.emit("data",l)}}),a.addEventListener("close",()=>{this.emit("close")}),c?n():a.addEventListener("open",n)},"configureWebSocket"),s;try{s=this.wsProxyAddrForHost(r,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+s;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),o(this.ws);else try{this.ws=new WebSocket(a),o(this.ws)}catch{this.ws=new __unstable_WebSocket(a),o(this.ws)}}catch(a){let c=(this.useSecureWebSocket?"https:":"http:")+"//"+s;fetch(c,{headers:{Upgrade:"websocket"}}).then(u=>{if(this.ws=u.webSocket,this.ws==null)throw a;this.ws.accept(),o(this.ws,!0)}).catch(u=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${u}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),i=new this.subtls.WebSocketReadQueue(this.ws),n=i.read.bind(i),o=this.rawWrite.bind(this),{read:s,write:a}=await this.subtls.startTls(e,r,n,o,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=s,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let r=Se.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",i=n=>{}){return e.length===0?(i(),!0):(typeof e=="string"&&(e=Se.from(e,r)),this.tlsState===0?(this.rawWrite(e),i()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,r,i)}):(this.tlsWrite(e),i()),!0)}end(e=Se.alloc(0),r="utf8",i=()=>{}){return this.write(e,r,()=>{this.ws.close(),i()}),this}destroy(){return this.destroyed=!0,this.end()}},k(Pf,"Socket"),Ne(Pf,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:k((t,e,r)=>{let i;return r?.jwtAuth?i=t.replace(KI,"apiauth."):i=t.replace(KI,"api."),"https://"+i+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:k(t=>t+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),Ne(Pf,"opts",{}),Df=Pf}),x2={};mi(x2,{parse:()=>YI});function YI(t,e=!1){let{protocol:r}=new URL(t),i="http:"+t.substring(r.length),{username:n,password:o,host:s,hostname:a,port:c,pathname:u,search:l,searchParams:f,hash:d}=new URL(i);o=decodeURIComponent(o),n=decodeURIComponent(n),u=decodeURIComponent(u);let m=n+":"+o,h=e?Object.fromEntries(f.entries()):l;return{href:t,protocol:r,auth:m,username:n,password:o,host:s,hostname:a,port:c,pathname:u,search:l,query:h,hash:d}}var S2=tn(()=>{"use strict";he(),k(YI,"parse")}),N2=Pe(t=>{"use strict";he(),t.parse=function(n,o){return new r(n,o).parse()};var e=class A2{constructor(o,s){this.source=o,this.transform=s||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var o=this.source[this.position++];return o==="\\"?{value:this.source[this.position++],escaped:!0}:{value:o,escaped:!1}}record(o){this.recorded.push(o)}newEntry(o){var s;(this.recorded.length>0||o)&&(s=this.recorded.join(""),s==="NULL"&&!o&&(s=null),s!==null&&(s=this.transform(s)),this.entries.push(s),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var o=this.nextCharacter();if(o.value==="=")break}}parse(o){var s,a,c;for(this.consumeDimensions();!this.isEof();)if(s=this.nextCharacter(),s.value==="{"&&!c)this.dimension++,this.dimension>1&&(a=new A2(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(s.value==="}"&&!c){if(this.dimension--,!this.dimension&&(this.newEntry(),o))return this.entries}else s.value==='"'&&!s.escaped?(c&&this.newEntry(!0),c=!c):s.value===","&&!c?this.newEntry():this.record(s.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};k(e,"ArrayParser");var r=e;function i(n){return n}k(i,"identity")}),_2=Pe((t,e)=>{he();var r=N2();e.exports={create:k(function(i,n){return{parse:k(function(){return r.parse(i,n)},"parse")}},"create")}}),R3=Pe((t,e)=>{"use strict";he();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,i=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,n=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,o=/^-?infinity$/;e.exports=k(function(l){if(o.test(l))return Number(l.replace("i","I"));var f=r.exec(l);if(!f)return s(l)||null;var d=!!f[8],m=parseInt(f[1],10);d&&(m=c(m));var h=parseInt(f[2],10)-1,p=f[3],y=parseInt(f[4],10),b=parseInt(f[5],10),N=parseInt(f[6],10),T=f[7];T=T?1e3*parseFloat(T):0;var I,$=a(l);return $!=null?(I=new Date(Date.UTC(m,h,p,y,b,N,T)),u(m)&&I.setUTCFullYear(m),$!==0&&I.setTime(I.getTime()-$)):(I=new Date(m,h,p,y,b,N,T),u(m)&&I.setFullYear(m)),I},"parseDate");function s(l){var f=i.exec(l);if(f){var d=parseInt(f[1],10),m=!!f[4];m&&(d=c(d));var h=parseInt(f[2],10)-1,p=f[3],y=new Date(d,h,p);return u(d)&&y.setFullYear(d),y}}k(s,"getDate");function a(l){if(l.endsWith("+00"))return 0;var f=n.exec(l.split(" ")[1]);if(f){var d=f[1];if(d==="Z")return 0;var m=d==="-"?-1:1,h=parseInt(f[2],10)*3600+parseInt(f[3]||0,10)*60+parseInt(f[4]||0,10);return h*m*1e3}}k(a,"timeZoneOffset");function c(l){return-(l-1)}k(c,"bcYearToNegativeYear");function u(l){return l>=0&&l<100}k(u,"is0To99")}),U3=Pe((t,e)=>{he(),e.exports=i;var r=Object.prototype.hasOwnProperty;function i(n){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var a in s)r.call(s,a)&&(n[a]=s[a])}return n}k(i,"extend")}),D3=Pe((t,e)=>{"use strict";he();var r=U3();e.exports=i;function i(N){if(!(this instanceof i))return new i(N);r(this,b(N))}k(i,"PostgresInterval");var n=["seconds","minutes","hours","days","months","years"];i.prototype.toPostgres=function(){var N=n.filter(this.hasOwnProperty,this);return this.milliseconds&&N.indexOf("seconds")<0&&N.push("seconds"),N.length===0?"0":N.map(function(T){var I=this[T]||0;return T==="seconds"&&this.milliseconds&&(I=(I+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),I+" "+T},this).join(" ")};var o={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},s=["years","months","days"],a=["hours","minutes","seconds"];i.prototype.toISOString=i.prototype.toISO=function(){var N=s.map(I,this).join(""),T=a.map(I,this).join("");return"P"+N+"T"+T;function I($){var v=this[$]||0;return $==="seconds"&&this.milliseconds&&(v=(v+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),v+o[$]}};var c="([+-]?\\d+)",u=c+"\\s+years?",l=c+"\\s+mons?",f=c+"\\s+days?",d="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",m=new RegExp([u,l,f,d].map(function(N){return"("+N+")?"}).join("\\s*")),h={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},p=["hours","minutes","seconds","milliseconds"];function y(N){var T=N+"000000".slice(N.length);return parseInt(T,10)/1e3}k(y,"parseMilliseconds");function b(N){if(!N)return{};var T=m.exec(N),I=T[8]==="-";return Object.keys(h).reduce(function($,v){var S=h[v],E=T[S];return!E||(E=v==="milliseconds"?y(E):parseInt(E,10),!E)||(I&&~p.indexOf(v)&&(E*=-1),$[v]=E),$},{})}k(b,"parse")}),L3=Pe((t,e)=>{"use strict";he(),e.exports=k(function(r){if(/^\\x/.test(r))return new Se(r.substr(2),"hex");for(var i="",n=0;n<r.length;)if(r[n]!=="\\")i+=r[n],++n;else if(/[0-7]{3}/.test(r.substr(n+1,3)))i+=String.fromCharCode(parseInt(r.substr(n+1,3),8)),n+=4;else{for(var o=1;n+o<r.length&&r[n+o]==="\\";)o++;for(var s=0;s<Math.floor(o/2);++s)i+="\\";n+=Math.floor(o/2)*2}return new Se(i,"binary")},"parseBytea")}),z3=Pe((t,e)=>{he();var r=N2(),i=_2(),n=R3(),o=D3(),s=L3();function a(_){return k(function(O){return O===null?O:_(O)},"nullAllowed")}k(a,"allowNull");function c(_){return _===null?_:_==="TRUE"||_==="t"||_==="true"||_==="y"||_==="yes"||_==="on"||_==="1"}k(c,"parseBool");function u(_){return _?r.parse(_,c):null}k(u,"parseBoolArray");function l(_){return parseInt(_,10)}k(l,"parseBaseTenInt");function f(_){return _?r.parse(_,a(l)):null}k(f,"parseIntegerArray");function d(_){return _?r.parse(_,a(function(O){return I(O).trim()})):null}k(d,"parseBigIntegerArray");var m=k(function(_){if(!_)return null;var O=i.create(_,function(R){return R!==null&&(R=v(R)),R});return O.parse()},"parsePointArray"),h=k(function(_){if(!_)return null;var O=i.create(_,function(R){return R!==null&&(R=parseFloat(R)),R});return O.parse()},"parseFloatArray"),p=k(function(_){if(!_)return null;var O=i.create(_);return O.parse()},"parseStringArray"),y=k(function(_){if(!_)return null;var O=i.create(_,function(R){return R!==null&&(R=n(R)),R});return O.parse()},"parseDateArray"),b=k(function(_){if(!_)return null;var O=i.create(_,function(R){return R!==null&&(R=o(R)),R});return O.parse()},"parseIntervalArray"),N=k(function(_){return _?r.parse(_,a(s)):null},"parseByteAArray"),T=k(function(_){return parseInt(_,10)},"parseInteger"),I=k(function(_){var O=String(_);return/^\d+$/.test(O)?O:_},"parseBigInteger"),$=k(function(_){return _?r.parse(_,a(JSON.parse)):null},"parseJsonArray"),v=k(function(_){return _[0]!=="("?null:(_=_.substring(1,_.length-1).split(","),{x:parseFloat(_[0]),y:parseFloat(_[1])})},"parsePoint"),S=k(function(_){if(_[0]!=="<"&&_[1]!=="(")return null;for(var O="(",R="",B=!1,D=2;D<_.length-1;D++){if(B||(O+=_[D]),_[D]===")"){B=!0;continue}else if(!B)continue;_[D]!==","&&(R+=_[D])}var P=v(O);return P.radius=parseFloat(R),P},"parseCircle"),E=k(function(_){_(20,I),_(21,T),_(23,T),_(26,T),_(700,parseFloat),_(701,parseFloat),_(16,c),_(1082,n),_(1114,n),_(1184,n),_(600,v),_(651,p),_(718,S),_(1e3,u),_(1001,N),_(1005,f),_(1007,f),_(1028,f),_(1016,d),_(1017,m),_(1021,h),_(1022,h),_(1231,h),_(1014,p),_(1015,p),_(1008,p),_(1009,p),_(1040,p),_(1041,p),_(1115,y),_(1182,y),_(1185,y),_(1186,o),_(1187,b),_(17,s),_(114,JSON.parse.bind(JSON)),_(3802,JSON.parse.bind(JSON)),_(199,$),_(3807,$),_(3907,p),_(2951,p),_(791,p),_(1183,p),_(1270,p)},"init");e.exports={init:E}}),j3=Pe((t,e)=>{"use strict";he();var r=1e6;function i(n){var o=n.readInt32BE(0),s=n.readUInt32BE(4),a="";o<0&&(o=~o+(s===0),s=~s+1>>>0,a="-");var c="",u,l,f,d,m,h;{if(u=o%r,o=o/r>>>0,l=4294967296*u+s,s=l/r>>>0,f=""+(l-r*s),s===0&&o===0)return a+f+c;for(d="",m=6-f.length,h=0;h<m;h++)d+="0";c=d+f+c}{if(u=o%r,o=o/r>>>0,l=4294967296*u+s,s=l/r>>>0,f=""+(l-r*s),s===0&&o===0)return a+f+c;for(d="",m=6-f.length,h=0;h<m;h++)d+="0";c=d+f+c}{if(u=o%r,o=o/r>>>0,l=4294967296*u+s,s=l/r>>>0,f=""+(l-r*s),s===0&&o===0)return a+f+c;for(d="",m=6-f.length,h=0;h<m;h++)d+="0";c=d+f+c}return u=o%r,l=4294967296*u+s,f=""+l%r,a+f+c}k(i,"readInt8"),e.exports=i}),B3=Pe((t,e)=>{he();var r=j3(),i=k(function(p,y,b,N,T){b=b||0,N=N||!1,T=T||function(B,D,P){return B*Math.pow(2,P)+D};var I=b>>3,$=k(function(B){return N?~B&255:B},"inv"),v=255,S=8-b%8;y<S&&(v=255<<8-y&255,S=y),b&&(v=v>>b%8);var E=0;b%8+y>=8&&(E=T(0,$(p[I])&v,S));for(var _=y+b>>3,O=I+1;O<_;O++)E=T(E,$(p[O]),8);var R=(y+b)%8;return R>0&&(E=T(E,$(p[_])>>8-R,R)),E},"parseBits"),n=k(function(p,y,b){var N=Math.pow(2,b-1)-1,T=i(p,1),I=i(p,b,1);if(I===0)return 0;var $=1,v=k(function(E,_,O){E===0&&(E=1);for(var R=1;R<=O;R++)$/=2,(_&1<<O-R)>0&&(E+=$);return E},"parsePrecisionBits"),S=i(p,y,b+1,!1,v);return I==Math.pow(2,b+1)-1?S===0?T===0?1/0:-1/0:NaN:(T===0?1:-1)*Math.pow(2,I-N)*S},"parseFloatFromBits"),o=k(function(p){return i(p,1)==1?-1*(i(p,15,1,!0)+1):i(p,15,1)},"parseInt16"),s=k(function(p){return i(p,1)==1?-1*(i(p,31,1,!0)+1):i(p,31,1)},"parseInt32"),a=k(function(p){return n(p,23,8)},"parseFloat32"),c=k(function(p){return n(p,52,11)},"parseFloat64"),u=k(function(p){var y=i(p,16,32);if(y==49152)return NaN;for(var b=Math.pow(1e4,i(p,16,16)),N=0,T=[],I=i(p,16),$=0;$<I;$++)N+=i(p,16,64+16*$)*b,b/=1e4;var v=Math.pow(10,i(p,16,48));return(y===0?1:-1)*Math.round(N*v)/v},"parseNumeric"),l=k(function(p,y){var b=i(y,1),N=i(y,63,1),T=new Date((b===0?1:-1)*N/1e3+9466848e5);return p||T.setTime(T.getTime()+T.getTimezoneOffset()*6e4),T.usec=N%1e3,T.getMicroSeconds=function(){return this.usec},T.setMicroSeconds=function(I){this.usec=I},T.getUTCMicroSeconds=function(){return this.usec},T},"parseDate"),f=k(function(p){for(var y=i(p,32),b=i(p,32,32),N=i(p,32,64),T=96,I=[],$=0;$<y;$++)I[$]=i(p,32,T),T+=32,T+=32;var v=k(function(E){var _=i(p,32,T);if(T+=32,_==4294967295)return null;var O;if(E==23||E==20)return O=i(p,_*8,T),T+=_*8,O;if(E==25)return O=p.toString(this.encoding,T>>3,(T+=_<<3)>>3),O;console.log("ERROR: ElementType not implemented: "+E)},"parseElement"),S=k(function(E,_){var O=[],R;if(E.length>1){var B=E.shift();for(R=0;R<B;R++)O[R]=S(E,_);E.unshift(B)}else for(R=0;R<E[0];R++)O[R]=v(_);return O},"parse");return S(I,N)},"parseArray"),d=k(function(p){return p.toString("utf8")},"parseText"),m=k(function(p){return p===null?null:i(p,8)>0},"parseBool"),h=k(function(p){p(20,r),p(21,o),p(23,s),p(26,s),p(1700,u),p(700,a),p(701,c),p(16,m),p(1114,l.bind(null,!1)),p(1184,l.bind(null,!0)),p(1e3,f),p(1007,f),p(1016,f),p(1008,f),p(1009,f),p(25,d)},"init");e.exports={init:h}}),M3=Pe((t,e)=>{he(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Jw=Pe(t=>{he();var e=z3(),r=B3(),i=_2(),n=M3();t.getTypeParser=a,t.setTypeParser=c,t.arrayParser=i,t.builtins=n;var o={text:{},binary:{}};function s(u){return String(u)}k(s,"noParse");function a(u,l){return l=l||"text",o[l]&&o[l][u]||s}k(a,"getTypeParser");function c(u,l,f){typeof l=="function"&&(f=l,l="text"),o[l][u]=f}k(c,"setTypeParser"),e.init(function(u,l){o.text[u]=l}),r.init(function(u,l){o.binary[u]=l})}),XI=Pe((t,e)=>{"use strict";he();var r=Jw();function i(n){this._types=n||r,this.text={},this.binary={}}k(i,"TypeOverrides"),i.prototype.getOverrides=function(n){switch(n){case"text":return this.text;case"binary":return this.binary;default:return{}}},i.prototype.setTypeParser=function(n,o,s){typeof o=="function"&&(s=o,o="text"),this.getOverrides(o)[n]=s},i.prototype.getTypeParser=function(n,o){return o=o||"text",this.getOverrides(o)[n]||this._types.getTypeParser(n,o)},e.exports=i});function Uf(t){let e=1779033703,r=3144134277,i=1013904242,n=2773480762,o=1359893119,s=2600822924,a=528734635,c=1541459225,u=0,l=0,f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=k((N,T)=>N>>>T|N<<32-T,"rrot"),m=new Uint32Array(64),h=new Uint8Array(64),p=k(()=>{for(let O=0,R=0;O<16;O++,R+=4)m[O]=h[R]<<24|h[R+1]<<16|h[R+2]<<8|h[R+3];for(let O=16;O<64;O++){let R=d(m[O-15],7)^d(m[O-15],18)^m[O-15]>>>3,B=d(m[O-2],17)^d(m[O-2],19)^m[O-2]>>>10;m[O]=m[O-16]+R+m[O-7]+B|0}let N=e,T=r,I=i,$=n,v=o,S=s,E=a,_=c;for(let O=0;O<64;O++){let R=d(v,6)^d(v,11)^d(v,25),B=v&S^~v&E,D=_+R+B+f[O]+m[O]|0,P=d(N,2)^d(N,13)^d(N,22),z=N&T^N&I^T&I,W=P+z|0;_=E,E=S,S=v,v=$+D|0,$=I,I=T,T=N,N=D+W|0}e=e+N|0,r=r+T|0,i=i+I|0,n=n+$|0,o=o+v|0,s=s+S|0,a=a+E|0,c=c+_|0,l=0},"process"),y=k(N=>{typeof N=="string"&&(N=new TextEncoder().encode(N));for(let T=0;T<N.length;T++)h[l++]=N[T],l===64&&p();u+=N.length},"add"),b=k(()=>{if(h[l++]=128,l==64&&p(),l+8>64){for(;l<64;)h[l++]=0;p()}for(;l<58;)h[l++]=0;let N=u*8;h[l++]=N/1099511627776&255,h[l++]=N/4294967296&255,h[l++]=N>>>24,h[l++]=N>>>16&255,h[l++]=N>>>8&255,h[l++]=N&255,p();let T=new Uint8Array(32);return T[0]=e>>>24,T[1]=e>>>16&255,T[2]=e>>>8&255,T[3]=e&255,T[4]=r>>>24,T[5]=r>>>16&255,T[6]=r>>>8&255,T[7]=r&255,T[8]=i>>>24,T[9]=i>>>16&255,T[10]=i>>>8&255,T[11]=i&255,T[12]=n>>>24,T[13]=n>>>16&255,T[14]=n>>>8&255,T[15]=n&255,T[16]=o>>>24,T[17]=o>>>16&255,T[18]=o>>>8&255,T[19]=o&255,T[20]=s>>>24,T[21]=s>>>16&255,T[22]=s>>>8&255,T[23]=s&255,T[24]=a>>>24,T[25]=a>>>16&255,T[26]=a>>>8&255,T[27]=a&255,T[28]=c>>>24,T[29]=c>>>16&255,T[30]=c>>>8&255,T[31]=c&255,T},"digest");return t===void 0?{add:y,digest:b}:(y(t),b())}var q3=tn(()=>{"use strict";he(),k(Uf,"sha256")}),bo,JI,W3=tn(()=>{"use strict";he(),bo=class Dn{constructor(){Ne(this,"_dataLength",0),Ne(this,"_bufferLength",0),Ne(this,"_state",new Int32Array(4)),Ne(this,"_buffer",new ArrayBuffer(68)),Ne(this,"_buffer8"),Ne(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=Dn.hexChars,i=Dn.hexOut,n,o,s,a;for(a=0;a<4;a+=1)for(o=a*8,n=e[a],s=0;s<8;s+=2)i[o+1+s]=r.charAt(n&15),n>>>=4,i[o+0+s]=r.charAt(n&15),n>>>=4;return i.join("")}static _md5cycle(e,r){let i=e[0],n=e[1],o=e[2],s=e[3];i+=(n&o|~n&s)+r[0]-680876936|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[1]-389564586|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[2]+606105819|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[3]-1044525330|0,n=(n<<22|n>>>10)+o|0,i+=(n&o|~n&s)+r[4]-176418897|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[5]+1200080426|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[6]-1473231341|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[7]-45705983|0,n=(n<<22|n>>>10)+o|0,i+=(n&o|~n&s)+r[8]+1770035416|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[9]-1958414417|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[10]-42063|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[11]-1990404162|0,n=(n<<22|n>>>10)+o|0,i+=(n&o|~n&s)+r[12]+1804603682|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[13]-40341101|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[14]-1502002290|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[15]+1236535329|0,n=(n<<22|n>>>10)+o|0,i+=(n&s|o&~s)+r[1]-165796510|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[6]-1069501632|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[11]+643717713|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[0]-373897302|0,n=(n<<20|n>>>12)+o|0,i+=(n&s|o&~s)+r[5]-701558691|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[10]+38016083|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[15]-660478335|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[4]-405537848|0,n=(n<<20|n>>>12)+o|0,i+=(n&s|o&~s)+r[9]+568446438|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[14]-1019803690|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[3]-187363961|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[8]+1163531501|0,n=(n<<20|n>>>12)+o|0,i+=(n&s|o&~s)+r[13]-1444681467|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[2]-51403784|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[7]+1735328473|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[12]-1926607734|0,n=(n<<20|n>>>12)+o|0,i+=(n^o^s)+r[5]-378558|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[8]-2022574463|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[11]+1839030562|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[14]-35309556|0,n=(n<<23|n>>>9)+o|0,i+=(n^o^s)+r[1]-1530992060|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[4]+1272893353|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[7]-155497632|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[10]-1094730640|0,n=(n<<23|n>>>9)+o|0,i+=(n^o^s)+r[13]+681279174|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[0]-358537222|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[3]-722521979|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[6]+76029189|0,n=(n<<23|n>>>9)+o|0,i+=(n^o^s)+r[9]-640364487|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[12]-421815835|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[15]+530742520|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[2]-995338651|0,n=(n<<23|n>>>9)+o|0,i+=(o^(n|~s))+r[0]-198630844|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[7]+1126891415|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[14]-1416354905|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[5]-57434055|0,n=(n<<21|n>>>11)+o|0,i+=(o^(n|~s))+r[12]+1700485571|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[3]-1894986606|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[10]-1051523|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[1]-2054922799|0,n=(n<<21|n>>>11)+o|0,i+=(o^(n|~s))+r[8]+1873313359|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[15]-30611744|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[6]-1560198380|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[13]+1309151649|0,n=(n<<21|n>>>11)+o|0,i+=(o^(n|~s))+r[4]-145523070|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[11]-1120210379|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[2]+718787259|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[9]-343485551|0,n=(n<<21|n>>>11)+o|0,e[0]=i+e[0]|0,e[1]=n+e[1]|0,e[2]=o+e[2]|0,e[3]=s+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Dn.stateIdentity),this}appendStr(e){let r=this._buffer8,i=this._buffer32,n=this._bufferLength,o,s;for(s=0;s<e.length;s+=1){if(o=e.charCodeAt(s),o<128)r[n++]=o;else if(o<2048)r[n++]=(o>>>6)+192,r[n++]=o&63|128;else if(o<55296||o>56319)r[n++]=(o>>>12)+224,r[n++]=o>>>6&63|128,r[n++]=o&63|128;else{if(o=(o-55296)*1024+(e.charCodeAt(++s)-56320)+65536,o>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[n++]=(o>>>18)+240,r[n++]=o>>>12&63|128,r[n++]=o>>>6&63|128,r[n++]=o&63|128}n>=64&&(this._dataLength+=64,Dn._md5cycle(this._state,i),n-=64,i[0]=i[16])}return this._bufferLength=n,this}appendAsciiStr(e){let r=this._buffer8,i=this._buffer32,n=this._bufferLength,o,s=0;for(;;){for(o=Math.min(e.length-s,64-n);o--;)r[n++]=e.charCodeAt(s++);if(n<64)break;this._dataLength+=64,Dn._md5cycle(this._state,i),n=0}return this._bufferLength=n,this}appendByteArray(e){let r=this._buffer8,i=this._buffer32,n=this._bufferLength,o,s=0;for(;;){for(o=Math.min(e.length-s,64-n);o--;)r[n++]=e[s++];if(n<64)break;this._dataLength+=64,Dn._md5cycle(this._state,i),n=0}return this._bufferLength=n,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,i=e.state,n=this._state,o;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],o=0;o<r.length;o+=1)this._buffer8[o]=r.charCodeAt(o)}end(e=!1){let r=this._bufferLength,i=this._buffer8,n=this._buffer32,o=(r>>2)+1;this._dataLength+=r;let s=this._dataLength*8;if(i[r]=128,i[r+1]=i[r+2]=i[r+3]=0,n.set(Dn.buffer32Identity.subarray(o),o),r>55&&(Dn._md5cycle(this._state,n),n.set(Dn.buffer32Identity)),s<=4294967295)n[14]=s;else{let a=s.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let c=parseInt(a[2],16),u=parseInt(a[1],16)||0;n[14]=c,n[15]=u}return Dn._md5cycle(this._state,n),e?this._state:Dn._hex(this._state)}},k(bo,"Md5"),Ne(bo,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),Ne(bo,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Ne(bo,"hexChars","0123456789abcdef"),Ne(bo,"hexOut",[]),Ne(bo,"onePassHasher",new bo),JI=bo}),e$={};mi(e$,{createHash:()=>k2,createHmac:()=>T2,randomBytes:()=>E2});function E2(t){return crypto.getRandomValues(Se.alloc(t))}function k2(t){if(t==="sha256")return{update:k(function(e){return{digest:k(function(){return Se.from(Uf(e))},"digest")}},"update")};if(t==="md5")return{update:k(function(e){return{digest:k(function(){return typeof e=="string"?JI.hashStr(e):JI.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${t}' not supported`)}function T2(t,e){if(t!=="sha256")throw new Error(`Only sha256 is supported (requested: '${t}')`);return{update:k(function(r){return{digest:k(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof r=="string"&&(r=new TextEncoder().encode(r));let i=e.length;if(i>64)e=Uf(e);else if(i<64){let c=new Uint8Array(64);c.set(e),e=c}let n=new Uint8Array(64),o=new Uint8Array(64);for(let c=0;c<64;c++)n[c]=54^e[c],o[c]=92^e[c];let s=new Uint8Array(r.length+64);s.set(n,0),s.set(r,64);let a=new Uint8Array(96);return a.set(o,0),a.set(Uf(s),64),Se.from(Uf(a))},"digest")}},"update")}}var I2=tn(()=>{"use strict";he(),q3(),W3(),k(E2,"randomBytes"),k(k2,"createHash"),k(T2,"createHmac")}),Qw=Pe((t,e)=>{"use strict";he(),e.exports={host:"localhost",user:Ce.platform==="win32"?Ce.env.USERNAME:Ce.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=Jw(),i=r.getTypeParser(20,"text"),n=r.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(o){r.setTypeParser(20,"text",o?r.getTypeParser(23,"text"):i),r.setTypeParser(1016,"text",o?r.getTypeParser(1007,"text"):n)})}),Zw=Pe((t,e)=>{"use strict";he();var r=(I2(),sr(e$)),i=Qw();function n(h){var p=h.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+p+'"'}k(n,"escapeElement");function o(h){for(var p="{",y=0;y<h.length;y++)y>0&&(p=p+","),h[y]===null||typeof h[y]>"u"?p=p+"NULL":Array.isArray(h[y])?p=p+o(h[y]):h[y]instanceof Se?p+="\\\\x"+h[y].toString("hex"):p+=n(s(h[y]));return p=p+"}",p}k(o,"arrayString");var s=k(function(h,p){if(h==null)return null;if(h instanceof Se)return h;if(ArrayBuffer.isView(h)){var y=Se.from(h.buffer,h.byteOffset,h.byteLength);return y.length===h.byteLength?y:y.slice(h.byteOffset,h.byteOffset+h.byteLength)}return h instanceof Date?i.parseInputDatesAsUTC?l(h):u(h):Array.isArray(h)?o(h):typeof h=="object"?a(h,p):h.toString()},"prepareValue");function a(h,p){if(h&&typeof h.toPostgres=="function"){if(p=p||[],p.indexOf(h)!==-1)throw new Error('circular reference detected while preparing "'+h+'" for query');return p.push(h),s(h.toPostgres(s),p)}return JSON.stringify(h)}k(a,"prepareObject");function c(h,p){for(h=""+h;h.length<p;)h="0"+h;return h}k(c,"pad");function u(h){var p=-h.getTimezoneOffset(),y=h.getFullYear(),b=y<1;b&&(y=Math.abs(y)+1);var N=c(y,4)+"-"+c(h.getMonth()+1,2)+"-"+c(h.getDate(),2)+"T"+c(h.getHours(),2)+":"+c(h.getMinutes(),2)+":"+c(h.getSeconds(),2)+"."+c(h.getMilliseconds(),3);return p<0?(N+="-",p*=-1):N+="+",N+=c(Math.floor(p/60),2)+":"+c(p%60,2),b&&(N+=" BC"),N}k(u,"dateToString");function l(h){var p=h.getUTCFullYear(),y=p<1;y&&(p=Math.abs(p)+1);var b=c(p,4)+"-"+c(h.getUTCMonth()+1,2)+"-"+c(h.getUTCDate(),2)+"T"+c(h.getUTCHours(),2)+":"+c(h.getUTCMinutes(),2)+":"+c(h.getUTCSeconds(),2)+"."+c(h.getUTCMilliseconds(),3);return b+="+00:00",y&&(b+=" BC"),b}k(l,"dateToStringUTC");function f(h,p,y){return h=typeof h=="string"?{text:h}:h,p&&(typeof p=="function"?h.callback=p:h.values=p),y&&(h.callback=y),h}k(f,"normalizeQueryConfig");var d=k(function(h){return r.createHash("md5").update(h,"utf-8").digest("hex")},"md5"),m=k(function(h,p,y){var b=d(p+h),N=d(Se.concat([Se.from(b),y]));return"md5"+N},"postgresMd5PasswordHash");e.exports={prepareValue:k(function(h){return s(h)},"prepareValueWrapper"),normalizeQueryConfig:f,postgresMd5PasswordHash:m,md5:d}}),zf={};mi(zf,{default:()=>$2});var $2,Gw=tn(()=>{"use strict";he(),$2={}}),F3=Pe((t,e)=>{"use strict";he();var r=(I2(),sr(e$));function i(p){if(p.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let y=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:y,response:"n,,n=*,r="+y,message:"SASLInitialResponse"}}k(i,"startSession");function n(p,y,b){if(p.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof y!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof b!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let N=u(b);if(N.nonce.startsWith(p.clientNonce)){if(N.nonce.length===p.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var T=Se.from(N.salt,"base64"),I=h(y,T,N.iteration),$=m(I,"Client Key"),v=d($),S="n=*,r="+p.clientNonce,E="r="+N.nonce+",s="+N.salt+",i="+N.iteration,_="c=biws,r="+N.nonce,O=S+","+E+","+_,R=m(v,O),B=f($,R),D=B.toString("base64"),P=m(I,"Server Key"),z=m(P,O);p.message="SASLResponse",p.serverSignature=z.toString("base64"),p.response=_+",p="+D}k(n,"continueSession");function o(p,y){if(p.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof y!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:b}=l(y);if(b!==p.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}k(o,"finalizeSession");function s(p){if(typeof p!="string")throw new TypeError("SASL: text must be a string");return p.split("").map((y,b)=>p.charCodeAt(b)).every(y=>y>=33&&y<=43||y>=45&&y<=126)}k(s,"isPrintableChars");function a(p){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(p)}k(a,"isBase64");function c(p){if(typeof p!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(p.split(",").map(y=>{if(!/^.=/.test(y))throw new Error("SASL: Invalid attribute pair entry");let b=y[0],N=y.substring(2);return[b,N]}))}k(c,"parseAttributePairs");function u(p){let y=c(p),b=y.get("r");if(b){if(!s(b))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let N=y.get("s");if(N){if(!a(N))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let T=y.get("i");if(T){if(!/^[1-9][0-9]*$/.test(T))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let I=parseInt(T,10);return{nonce:b,salt:N,iteration:I}}k(u,"parseServerFirstMessage");function l(p){let y=c(p).get("v");if(y){if(!a(y))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:y}}k(l,"parseServerFinalMessage");function f(p,y){if(!Se.isBuffer(p))throw new TypeError("first argument must be a Buffer");if(!Se.isBuffer(y))throw new TypeError("second argument must be a Buffer");if(p.length!==y.length)throw new Error("Buffer lengths must match");if(p.length===0)throw new Error("Buffers cannot be empty");return Se.from(p.map((b,N)=>p[N]^y[N]))}k(f,"xorBuffers");function d(p){return r.createHash("sha256").update(p).digest()}k(d,"sha256");function m(p,y){return r.createHmac("sha256",p).update(y).digest()}k(m,"hmacSha256");function h(p,y,b){for(var N=m(p,Se.concat([y,Se.from([0,0,0,1])])),T=N,I=0;I<b-1;I++)N=m(p,N),T=f(T,N);return T}k(h,"Hi"),e.exports={startSession:i,continueSession:n,finalizeSession:o}}),t$={};mi(t$,{join:()=>O2});function O2(...t){return t.join("/")}var C2=tn(()=>{"use strict";he(),k(O2,"join")}),r$={};mi(r$,{stat:()=>P2});function P2(t,e){e(new Error("No filesystem"))}var R2=tn(()=>{"use strict";he(),k(P2,"stat")}),n$={};mi(n$,{default:()=>U2});var U2,D2=tn(()=>{"use strict";he(),U2={}}),L2={};mi(L2,{StringDecoder:()=>z2});var HI,z2,V3=tn(()=>{"use strict";he(),HI=class{constructor(e){Ne(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},k(HI,"StringDecoder"),z2=HI}),K3=Pe((t,e)=>{"use strict";he();var{Transform:r}=(D2(),sr(n$)),{StringDecoder:i}=(V3(),sr(L2)),n=Symbol("last"),o=Symbol("decoder");function s(f,d,m){let h;if(this.overflow){if(h=this[o].write(f).split(this.matcher),h.length===1)return m();h.shift(),this.overflow=!1}else this[n]+=this[o].write(f),h=this[n].split(this.matcher);this[n]=h.pop();for(let p=0;p<h.length;p++)try{c(this,this.mapper(h[p]))}catch(y){return m(y)}if(this.overflow=this[n].length>this.maxLength,this.overflow&&!this.skipOverflow){m(new Error("maximum buffer reached"));return}m()}k(s,"transform");function a(f){if(this[n]+=this[o].end(),this[n])try{c(this,this.mapper(this[n]))}catch(d){return f(d)}f()}k(a,"flush");function c(f,d){d!==void 0&&f.push(d)}k(c,"push");function u(f){return f}k(u,"noop");function l(f,d,m){switch(f=f||/\r?\n/,d=d||u,m=m||{},arguments.length){case 1:typeof f=="function"?(d=f,f=/\r?\n/):typeof f=="object"&&!(f instanceof RegExp)&&!f[Symbol.split]&&(m=f,f=/\r?\n/);break;case 2:typeof f=="function"?(m=d,d=f,f=/\r?\n/):typeof d=="object"&&(m=d,d=u)}m=Object.assign({},m),m.autoDestroy=!0,m.transform=s,m.flush=a,m.readableObjectMode=!0;let h=new r(m);return h[n]="",h[o]=new i("utf8"),h.matcher=f,h.mapper=d,h.maxLength=m.maxLength,h.skipOverflow=m.skipOverflow||!1,h.overflow=!1,h._destroy=function(p,y){this._writableState.errorEmitted=!1,y(p)},h}k(l,"split"),e.exports=l}),H3=Pe((t,e)=>{"use strict";he();var r=(C2(),sr(t$)),i=(D2(),sr(n$)).Stream,n=K3(),o=(Gw(),sr(zf)),s=5432,a=Ce.platform==="win32",c=Ce.stderr,u=56,l=7,f=61440,d=32768;function m($){return($&f)==d}k(m,"isRegFile");var h=["host","port","database","user","password"],p=h.length,y=h[p-1];function b(){var $=c instanceof i&&c.writable===!0;if($){var v=Array.prototype.slice.call(arguments).concat(`
`);c.write(o.format.apply(o,v))}}k(b,"warn"),Object.defineProperty(e.exports,"isWin",{get:k(function(){return a},"get"),set:k(function($){a=$},"set")}),e.exports.warnTo=function($){var v=c;return c=$,v},e.exports.getFileName=function($){var v=$||Ce.env,S=v.PGPASSFILE||(a?r.join(v.APPDATA||"./","postgresql","pgpass.conf"):r.join(v.HOME||"./",".pgpass"));return S},e.exports.usePgPass=function($,v){return Object.prototype.hasOwnProperty.call(Ce.env,"PGPASSWORD")?!1:a?!0:(v=v||"<unkn>",m($.mode)?$.mode&(u|l)?(b('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',v),!1):!0:(b('WARNING: password file "%s" is not a plain file',v),!1))};var N=e.exports.match=function($,v){return h.slice(0,-1).reduce(function(S,E,_){return _==1&&Number($[E]||s)===Number(v[E])?S&&!0:S&&(v[E]==="*"||v[E]===$[E])},!0)};e.exports.getPassword=function($,v,S){var E,_=v.pipe(n());function O(D){var P=T(D);P&&I(P)&&N($,P)&&(E=P[y],_.end())}k(O,"onLine");var R=k(function(){v.destroy(),S(E)},"onEnd"),B=k(function(D){v.destroy(),b("WARNING: error on reading file: %s",D),S(void 0)},"onErr");v.on("error",B),_.on("data",O).on("end",R).on("error",B)};var T=e.exports.parseLine=function($){if($.length<11||$.match(/^\s+#/))return null;for(var v="",S="",E=0,_=0,O=0,R={},B=!1,D=k(function(z,W,Q){var G=$.substring(W,Q);Object.hasOwnProperty.call(Ce.env,"PGPASS_NO_DEESCAPE")||(G=G.replace(/\\([:\\])/g,"$1")),R[h[z]]=G},"addToObj"),P=0;P<$.length-1;P+=1){if(v=$.charAt(P+1),S=$.charAt(P),B=E==p-1,B){D(E,_);break}P>=0&&v==":"&&S!=="\\"&&(D(E,_,P+1),_=P+2,E+=1)}return R=Object.keys(R).length===p?R:null,R},I=e.exports.isValidEntry=function($){for(var v={0:function(R){return R.length>0},1:function(R){return R==="*"?!0:(R=Number(R),isFinite(R)&&R>0&&R<9007199254740992&&Math.floor(R)===R)},2:function(R){return R.length>0},3:function(R){return R.length>0},4:function(R){return R.length>0}},S=0;S<h.length;S+=1){var E=v[S],_=$[h[S]]||"",O=E(_);if(!O)return!1}return!0}}),J3=Pe((t,e)=>{"use strict";he();var r=(C2(),sr(t$)),i=(R2(),sr(r$)),n=H3();e.exports=function(o,s){var a=n.getFileName();i.stat(a,function(c,u){if(c||!n.usePgPass(u,a))return s(void 0);var l=i.createReadStream(a);n.getPassword(o,l,s)})},e.exports.warnTo=n.warnTo}),j2={};mi(j2,{default:()=>B2});var B2,Q3=tn(()=>{"use strict";he(),B2={}}),Z3=Pe((t,e)=>{"use strict";he();var r=(S2(),sr(x2)),i=(R2(),sr(r$));function n(o){if(o.charAt(0)==="/"){var a=o.split(" ");return{host:a[0],database:a[1]}}var s=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(o)?encodeURI(o).replace(/\%25(\d\d)/g,"%$1"):o,!0),a=s.query;for(var c in a)Array.isArray(a[c])&&(a[c]=a[c][a[c].length-1]);var u=(s.auth||":").split(":");if(a.user=u[0],a.password=u.splice(1).join(":"),a.port=s.port,s.protocol=="socket:")return a.host=decodeURI(s.pathname),a.database=s.query.db,a.client_encoding=s.query.encoding,a;a.host||(a.host=s.hostname);var l=s.pathname;if(!a.host&&l&&/^%2f/i.test(l)){var f=l.split("/");a.host=decodeURIComponent(f[0]),l=f.splice(1).join("/")}switch(l&&l.charAt(0)==="/"&&(l=l.slice(1)||null),a.database=l&&decodeURI(l),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=i.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=i.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=i.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}k(n,"parse"),e.exports=n,n.parse=n}),i$=Pe((t,e)=>{"use strict";he();var r=(Q3(),sr(j2)),i=Qw(),n=Z3().parse,o=k(function(f,d,m){return m===void 0?m=Ce.env["PG"+f.toUpperCase()]:m===!1||(m=Ce.env[m]),d[f]||m||i[f]},"val"),s=k(function(){switch(Ce.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return i.ssl},"readSSLConfigFromEnvironment"),a=k(function(f){return"'"+(""+f).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),c=k(function(f,d,m){var h=d[m];h!=null&&f.push(m+"="+a(h))},"add"),u=class{constructor(d){d=typeof d=="string"?n(d):d||{},d.connectionString&&(d=Object.assign({},d,n(d.connectionString))),this.user=o("user",d),this.database=o("database",d),this.database===void 0&&(this.database=this.user),this.port=parseInt(o("port",d),10),this.host=o("host",d),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:o("password",d)}),this.binary=o("binary",d),this.options=o("options",d),this.ssl=typeof d.ssl>"u"?s():d.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=o("client_encoding",d),this.replication=o("replication",d),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=o("application_name",d,"PGAPPNAME"),this.fallback_application_name=o("fallback_application_name",d,!1),this.statement_timeout=o("statement_timeout",d,!1),this.lock_timeout=o("lock_timeout",d,!1),this.idle_in_transaction_session_timeout=o("idle_in_transaction_session_timeout",d,!1),this.query_timeout=o("query_timeout",d,!1),d.connectionTimeoutMillis===void 0?this.connect_timeout=Ce.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(d.connectionTimeoutMillis/1e3),d.keepAlive===!1?this.keepalives=0:d.keepAlive===!0&&(this.keepalives=1),typeof d.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(d.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(d){var m=[];c(m,this,"user"),c(m,this,"password"),c(m,this,"port"),c(m,this,"application_name"),c(m,this,"fallback_application_name"),c(m,this,"connect_timeout"),c(m,this,"options");var h=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(c(m,h,"sslmode"),c(m,h,"sslca"),c(m,h,"sslkey"),c(m,h,"sslcert"),c(m,h,"sslrootcert"),this.database&&m.push("dbname="+a(this.database)),this.replication&&m.push("replication="+a(this.replication)),this.host&&m.push("host="+a(this.host)),this.isDomainSocket)return d(null,m.join(" "));this.client_encoding&&m.push("client_encoding="+a(this.client_encoding)),r.lookup(this.host,function(p,y){return p?d(p,null):(m.push("hostaddr="+a(y)),d(null,m.join(" ")))})}};k(u,"ConnectionParameters");var l=u;e.exports=l}),G3=Pe((t,e)=>{"use strict";he();var r=Jw(),i=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,n=class{constructor(a,c){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=c,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var c;a.text?c=i.exec(a.text):c=i.exec(a.command),c&&(this.command=c[1],c[3]?(this.oid=parseInt(c[2],10),this.rowCount=parseInt(c[3],10)):c[2]&&(this.rowCount=parseInt(c[2],10)))}_parseRowAsArray(a){for(var c=new Array(a.length),u=0,l=a.length;u<l;u++){var f=a[u];f!==null?c[u]=this._parsers[u](f):c[u]=null}return c}parseRow(a){for(var c={},u=0,l=a.length;u<l;u++){var f=a[u],d=this.fields[u].name;f!==null?c[d]=this._parsers[u](f):c[d]=null}return c}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var c=0;c<a.length;c++){var u=a[c];this._types?this._parsers[c]=this._types.getTypeParser(u.dataTypeID,u.format||"text"):this._parsers[c]=r.getTypeParser(u.dataTypeID,u.format||"text")}}};k(n,"Result");var o=n;e.exports=o}),Y3=Pe((t,e)=>{"use strict";he();var{EventEmitter:r}=Ca(),i=G3(),n=Zw(),o=class extends r{constructor(c,u,l){super(),c=n.normalizeQueryConfig(c,u,l),this.text=c.text,this.values=c.values,this.rows=c.rows,this.types=c.types,this.name=c.name,this.binary=c.binary,this.portal=c.portal||"",this.callback=c.callback,this._rowMode=c.rowMode,Ce.domain&&c.callback&&(this.callback=Ce.domain.bind(c.callback)),this._result=new i(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new i(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(c){this._checkForMultirow(),this._result.addFields(c.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(c){let u;if(!this._canceledDueToError){try{u=this._result.parseRow(c.fields)}catch(l){this._canceledDueToError=l;return}this.emit("row",u,this._result),this._accumulateRows&&this._result.addRow(u)}}handleCommandComplete(c,u){this._checkForMultirow(),this._result.addCommandComplete(c),this.rows&&u.sync()}handleEmptyQuery(c){this.rows&&c.sync()}handleError(c,u){if(this._canceledDueToError&&(c=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(c);this.emit("error",c)}handleReadyForQuery(c){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,c);if(this.callback)try{this.callback(null,this._results)}catch(u){Ce.nextTick(()=>{throw u})}this.emit("end",this._results)}submit(c){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let u=c.parsedStatements[this.name];return this.text&&u&&this.text!==u?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(c):c.query(this.text),null)}hasBeenParsed(c){return this.name&&c.parsedStatements[this.name]}handlePortalSuspended(c){this._getRows(c,this.rows)}_getRows(c,u){c.execute({portal:this.portal,rows:u}),u?c.flush():c.sync()}prepare(c){this.isPreparedStatement=!0,this.hasBeenParsed(c)||c.parse({text:this.text,name:this.name,types:this.types});try{c.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:n.prepareValue})}catch(u){this.handleError(u,c);return}c.describe({type:"P",name:this.portal||""}),this._getRows(c,this.rows)}handleCopyInResponse(c){c.sendCopyFail("No source stream defined")}handleCopyData(c,u){}};k(o,"Query");var s=o;e.exports=s}),M2=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(P,z,W){super(P),this.length=z,this.name=W}};k(e,"DatabaseError");var r=e;t.DatabaseError=r;var i=class{constructor(P,z){this.length=P,this.chunk=z,this.name="copyData"}};k(i,"CopyDataMessage");var n=i;t.CopyDataMessage=n;var o=class{constructor(P,z,W,Q){this.length=P,this.name=z,this.binary=W,this.columnTypes=new Array(Q)}};k(o,"CopyResponse");var s=o;t.CopyResponse=s;var a=class{constructor(P,z,W,Q,G,J,le){this.name=P,this.tableID=z,this.columnID=W,this.dataTypeID=Q,this.dataTypeSize=G,this.dataTypeModifier=J,this.format=le}};k(a,"Field");var c=a;t.Field=c;var u=class{constructor(P,z){this.length=P,this.fieldCount=z,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};k(u,"RowDescriptionMessage");var l=u;t.RowDescriptionMessage=l;var f=class{constructor(P,z){this.length=P,this.parameterCount=z,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};k(f,"ParameterDescriptionMessage");var d=f;t.ParameterDescriptionMessage=d;var m=class{constructor(P,z,W){this.length=P,this.parameterName=z,this.parameterValue=W,this.name="parameterStatus"}};k(m,"ParameterStatusMessage");var h=m;t.ParameterStatusMessage=h;var p=class{constructor(P,z){this.length=P,this.salt=z,this.name="authenticationMD5Password"}};k(p,"AuthenticationMD5Password");var y=p;t.AuthenticationMD5Password=y;var b=class{constructor(P,z,W){this.length=P,this.processID=z,this.secretKey=W,this.name="backendKeyData"}};k(b,"BackendKeyDataMessage");var N=b;t.BackendKeyDataMessage=N;var T=class{constructor(P,z,W,Q){this.length=P,this.processId=z,this.channel=W,this.payload=Q,this.name="notification"}};k(T,"NotificationResponseMessage");var I=T;t.NotificationResponseMessage=I;var $=class{constructor(P,z){this.length=P,this.status=z,this.name="readyForQuery"}};k($,"ReadyForQueryMessage");var v=$;t.ReadyForQueryMessage=v;var S=class{constructor(P,z){this.length=P,this.text=z,this.name="commandComplete"}};k(S,"CommandCompleteMessage");var E=S;t.CommandCompleteMessage=E;var _=class{constructor(P,z){this.length=P,this.fields=z,this.name="dataRow",this.fieldCount=z.length}};k(_,"DataRowMessage");var O=_;t.DataRowMessage=O;var R=class{constructor(P,z){this.length=P,this.message=z,this.name="notice"}};k(R,"NoticeMessage");var B=R;t.NoticeMessage=B}),X3=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;var e=class{constructor(n=256){this.size=n,this.offset=5,this.headerPosition=0,this.buffer=Se.allocUnsafe(n)}ensure(n){if(this.buffer.length-this.offset<n){let o=this.buffer,s=o.length+(o.length>>1)+n;this.buffer=Se.allocUnsafe(s),o.copy(this.buffer)}}addInt32(n){return this.ensure(4),this.buffer[this.offset++]=n>>>24&255,this.buffer[this.offset++]=n>>>16&255,this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addInt16(n){return this.ensure(2),this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addCString(n){if(!n)this.ensure(1);else{let o=Se.byteLength(n);this.ensure(o+1),this.buffer.write(n,this.offset,"utf-8"),this.offset+=o}return this.buffer[this.offset++]=0,this}addString(n=""){let o=Se.byteLength(n);return this.ensure(o),this.buffer.write(n,this.offset),this.offset+=o,this}add(n){return this.ensure(n.length),n.copy(this.buffer,this.offset),this.offset+=n.length,this}join(n){if(n){this.buffer[this.headerPosition]=n;let o=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(o,this.headerPosition+1)}return this.buffer.slice(n?0:5,this.offset)}flush(n){let o=this.join(n);return this.offset=5,this.headerPosition=0,this.buffer=Se.allocUnsafe(this.size),o}};k(e,"Writer");var r=e;t.Writer=r}),e5=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=X3(),r=new e.Writer,i=k(P=>{r.addInt16(3).addInt16(0);for(let Q of Object.keys(P))r.addCString(Q).addCString(P[Q]);r.addCString("client_encoding").addCString("UTF8");let z=r.addCString("").flush(),W=z.length+4;return new e.Writer().addInt32(W).add(z).flush()},"startup"),n=k(()=>{let P=Se.allocUnsafe(8);return P.writeInt32BE(8,0),P.writeInt32BE(80877103,4),P},"requestSsl"),o=k(P=>r.addCString(P).flush(112),"password"),s=k(function(P,z){return r.addCString(P).addInt32(Se.byteLength(z)).addString(z),r.flush(112)},"sendSASLInitialResponseMessage"),a=k(function(P){return r.addString(P).flush(112)},"sendSCRAMClientFinalMessage"),c=k(P=>r.addCString(P).flush(81),"query"),u=[],l=k(P=>{let z=P.name||"";z.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",z,z.length),console.error("This can cause conflicts and silent errors executing queries"));let W=P.types||u,Q=W.length,G=r.addCString(z).addCString(P.text).addInt16(Q);for(let J=0;J<Q;J++)G.addInt32(W[J]);return r.flush(80)},"parse"),f=new e.Writer,d=k(function(P,z){for(let W=0;W<P.length;W++){let Q=z?z(P[W],W):P[W];Q==null?(r.addInt16(0),f.addInt32(-1)):Q instanceof Se?(r.addInt16(1),f.addInt32(Q.length),f.add(Q)):(r.addInt16(0),f.addInt32(Se.byteLength(Q)),f.addString(Q))}},"writeValues"),m=k((P={})=>{let z=P.portal||"",W=P.statement||"",Q=P.binary||!1,G=P.values||u,J=G.length;return r.addCString(z).addCString(W),r.addInt16(J),d(G,P.valueMapper),r.addInt16(J),r.add(f.flush()),r.addInt16(Q?1:0),r.flush(66)},"bind"),h=Se.from([69,0,0,0,9,0,0,0,0,0]),p=k(P=>{if(!P||!P.portal&&!P.rows)return h;let z=P.portal||"",W=P.rows||0,Q=Se.byteLength(z),G=4+Q+1+4,J=Se.allocUnsafe(1+G);return J[0]=69,J.writeInt32BE(G,1),J.write(z,5,"utf-8"),J[Q+5]=0,J.writeUInt32BE(W,J.length-4),J},"execute"),y=k((P,z)=>{let W=Se.allocUnsafe(16);return W.writeInt32BE(16,0),W.writeInt16BE(1234,4),W.writeInt16BE(5678,6),W.writeInt32BE(P,8),W.writeInt32BE(z,12),W},"cancel"),b=k((P,z)=>{let W=4+Se.byteLength(z)+1,Q=Se.allocUnsafe(1+W);return Q[0]=P,Q.writeInt32BE(W,1),Q.write(z,5,"utf-8"),Q[W]=0,Q},"cstringMessage"),N=r.addCString("P").flush(68),T=r.addCString("S").flush(68),I=k(P=>P.name?b(68,`${P.type}${P.name||""}`):P.type==="P"?N:T,"describe"),$=k(P=>{let z=`${P.type}${P.name||""}`;return b(67,z)},"close"),v=k(P=>r.add(P).flush(100),"copyData"),S=k(P=>b(102,P),"copyFail"),E=k(P=>Se.from([P,0,0,0,4]),"codeOnlyBuffer"),_=E(72),O=E(83),R=E(88),B=E(99),D={startup:i,password:o,requestSsl:n,sendSASLInitialResponseMessage:s,sendSCRAMClientFinalMessage:a,query:c,parse:l,bind:m,execute:p,describe:I,close:$,flush:k(()=>_,"flush"),sync:k(()=>O,"sync"),end:k(()=>R,"end"),copyData:v,copyDone:k(()=>B,"copyDone"),copyFail:S,cancel:y};t.serialize=D}),t5=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;var e=Se.allocUnsafe(0),r=class{constructor(o=0){this.offset=o,this.buffer=e,this.encoding="utf-8"}setBuffer(o,s){this.offset=o,this.buffer=s}int16(){let o=this.buffer.readInt16BE(this.offset);return this.offset+=2,o}byte(){let o=this.buffer[this.offset];return this.offset++,o}int32(){let o=this.buffer.readInt32BE(this.offset);return this.offset+=4,o}uint32(){let o=this.buffer.readUInt32BE(this.offset);return this.offset+=4,o}string(o){let s=this.buffer.toString(this.encoding,this.offset,this.offset+o);return this.offset+=o,s}cstring(){let o=this.offset,s=o;for(;this.buffer[s++]!==0;);return this.offset=s,this.buffer.toString(this.encoding,o,s-1)}bytes(o){let s=this.buffer.slice(this.offset,this.offset+o);return this.offset+=o,s}};k(r,"BufferReader");var i=r;t.BufferReader=i}),r5=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var e=M2(),r=t5(),i=1,n=4,o=i+n,s=Se.allocUnsafe(0),a=class{constructor(l){if(this.buffer=s,this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,l?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=l?.mode||"text"}parse(l,f){this.mergeBuffer(l);let d=this.bufferOffset+this.bufferLength,m=this.bufferOffset;for(;m+o<=d;){let h=this.buffer[m],p=this.buffer.readUInt32BE(m+i),y=i+p;if(y+m<=d){let b=this.handlePacket(m+o,h,p,this.buffer);f(b),m+=y}else break}m===d?(this.buffer=s,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=d-m,this.bufferOffset=m)}mergeBuffer(l){if(this.bufferLength>0){let f=this.bufferLength+l.byteLength;if(f+this.bufferOffset>this.buffer.byteLength){let d;if(f<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)d=this.buffer;else{let m=this.buffer.byteLength*2;for(;f>=m;)m*=2;d=Se.allocUnsafe(m)}this.buffer.copy(d,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=d,this.bufferOffset=0}l.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=f}else this.buffer=l,this.bufferOffset=0,this.bufferLength=l.byteLength}handlePacket(l,f,d,m){switch(f){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(l,d,m);case 67:return this.parseCommandCompleteMessage(l,d,m);case 90:return this.parseReadyForQueryMessage(l,d,m);case 65:return this.parseNotificationMessage(l,d,m);case 82:return this.parseAuthenticationResponse(l,d,m);case 83:return this.parseParameterStatusMessage(l,d,m);case 75:return this.parseBackendKeyData(l,d,m);case 69:return this.parseErrorMessage(l,d,m,"error");case 78:return this.parseErrorMessage(l,d,m,"notice");case 84:return this.parseRowDescriptionMessage(l,d,m);case 116:return this.parseParameterDescriptionMessage(l,d,m);case 71:return this.parseCopyInMessage(l,d,m);case 72:return this.parseCopyOutMessage(l,d,m);case 100:return this.parseCopyData(l,d,m);default:return new e.DatabaseError("received invalid response: "+f.toString(16),d,"error")}}parseReadyForQueryMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.string(1);return new e.ReadyForQueryMessage(f,m)}parseCommandCompleteMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.cstring();return new e.CommandCompleteMessage(f,m)}parseCopyData(l,f,d){let m=d.slice(l,l+(f-4));return new e.CopyDataMessage(f,m)}parseCopyInMessage(l,f,d){return this.parseCopyMessage(l,f,d,"copyInResponse")}parseCopyOutMessage(l,f,d){return this.parseCopyMessage(l,f,d,"copyOutResponse")}parseCopyMessage(l,f,d,m){this.reader.setBuffer(l,d);let h=this.reader.byte()!==0,p=this.reader.int16(),y=new e.CopyResponse(f,m,h,p);for(let b=0;b<p;b++)y.columnTypes[b]=this.reader.int16();return y}parseNotificationMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int32(),h=this.reader.cstring(),p=this.reader.cstring();return new e.NotificationResponseMessage(f,m,h,p)}parseRowDescriptionMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int16(),h=new e.RowDescriptionMessage(f,m);for(let p=0;p<m;p++)h.fields[p]=this.parseField();return h}parseField(){let l=this.reader.cstring(),f=this.reader.uint32(),d=this.reader.int16(),m=this.reader.uint32(),h=this.reader.int16(),p=this.reader.int32(),y=this.reader.int16()===0?"text":"binary";return new e.Field(l,f,d,m,h,p,y)}parseParameterDescriptionMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int16(),h=new e.ParameterDescriptionMessage(f,m);for(let p=0;p<m;p++)h.dataTypeIDs[p]=this.reader.int32();return h}parseDataRowMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int16(),h=new Array(m);for(let p=0;p<m;p++){let y=this.reader.int32();h[p]=y===-1?null:this.reader.string(y)}return new e.DataRowMessage(f,h)}parseParameterStatusMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.cstring(),h=this.reader.cstring();return new e.ParameterStatusMessage(f,m,h)}parseBackendKeyData(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int32(),h=this.reader.int32();return new e.BackendKeyDataMessage(f,m,h)}parseAuthenticationResponse(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int32(),h={name:"authenticationOk",length:f};switch(m){case 0:break;case 3:h.length===8&&(h.name="authenticationCleartextPassword");break;case 5:if(h.length===12){h.name="authenticationMD5Password";let p=this.reader.bytes(4);return new e.AuthenticationMD5Password(f,p)}break;case 10:{h.name="authenticationSASL",h.mechanisms=[];let p;do p=this.reader.cstring(),p&&h.mechanisms.push(p);while(p)}break;case 11:h.name="authenticationSASLContinue",h.data=this.reader.string(f-8);break;case 12:h.name="authenticationSASLFinal",h.data=this.reader.string(f-8);break;default:throw new Error("Unknown authenticationOk message type "+m)}return h}parseErrorMessage(l,f,d,m){this.reader.setBuffer(l,d);let h={},p=this.reader.string(1);for(;p!=="\0";)h[p]=this.reader.cstring(),p=this.reader.string(1);let y=h.M,b=m==="notice"?new e.NoticeMessage(f,y):new e.DatabaseError(y,f,m);return b.severity=h.S,b.code=h.C,b.detail=h.D,b.hint=h.H,b.position=h.P,b.internalPosition=h.p,b.internalQuery=h.q,b.where=h.W,b.schema=h.s,b.table=h.t,b.column=h.c,b.dataType=h.d,b.constraint=h.n,b.file=h.F,b.line=h.L,b.routine=h.R,b}};k(a,"Parser");var c=a;t.Parser=c}),q2=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;var e=M2();Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:k(function(){return e.DatabaseError},"get")});var r=e5();Object.defineProperty(t,"serialize",{enumerable:!0,get:k(function(){return r.serialize},"get")});var i=r5();function n(o,s){let a=new i.Parser;return o.on("data",c=>a.parse(c,s)),new Promise(c=>o.on("end",()=>c()))}k(n,"parse"),t.parse=n}),W2={};mi(W2,{connect:()=>F2});function F2({socket:t,servername:e}){return t.startTls(e),t}var n5=tn(()=>{"use strict";he(),k(F2,"connect")}),V2=Pe((t,e)=>{"use strict";he();var r=(Lf(),sr(b2)),i=Ca().EventEmitter,{parse:n,serialize:o}=q2(),s=o.flush(),a=o.sync(),c=o.end(),u=class extends i{constructor(d){super(),d=d||{},this.stream=d.stream||new r.Socket,this._keepAlive=d.keepAlive,this._keepAliveInitialDelayMillis=d.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=d.ssl||!1,this._ending=!1,this._emitMessage=!1;var m=this;this.on("newListener",function(h){h==="message"&&(m._emitMessage=!0)})}connect(d,m){var h=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(d,m),this.stream.once("connect",function(){h._keepAlive&&h.stream.setKeepAlive(!0,h._keepAliveInitialDelayMillis),h.emit("connect")});let p=k(function(y){h._ending&&(y.code==="ECONNRESET"||y.code==="EPIPE")||h.emit("error",y)},"reportStreamError");if(this.stream.on("error",p),this.stream.on("close",function(){h.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(y){var b=y.toString("utf8");switch(b){case"S":break;case"N":return h.stream.end(),h.emit("error",new Error("The server does not support SSL connections"));default:return h.stream.end(),h.emit("error",new Error("There was an error establishing an SSL connection"))}var N=(n5(),sr(W2));let T={socket:h.stream};h.ssl!==!0&&(Object.assign(T,h.ssl),"key"in h.ssl&&(T.key=h.ssl.key)),r.isIP(m)===0&&(T.servername=m);try{h.stream=N.connect(T)}catch(I){return h.emit("error",I)}h.attachListeners(h.stream),h.stream.on("error",p),h.emit("sslconnect")})}attachListeners(d){d.on("end",()=>{this.emit("end")}),n(d,m=>{var h=m.name==="error"?"errorMessage":m.name;this._emitMessage&&this.emit("message",m),this.emit(h,m)})}requestSsl(){this.stream.write(o.requestSsl())}startup(d){this.stream.write(o.startup(d))}cancel(d,m){this._send(o.cancel(d,m))}password(d){this._send(o.password(d))}sendSASLInitialResponseMessage(d,m){this._send(o.sendSASLInitialResponseMessage(d,m))}sendSCRAMClientFinalMessage(d){this._send(o.sendSCRAMClientFinalMessage(d))}_send(d){return this.stream.writable?this.stream.write(d):!1}query(d){this._send(o.query(d))}parse(d){this._send(o.parse(d))}bind(d){this._send(o.bind(d))}execute(d){this._send(o.execute(d))}flush(){this.stream.writable&&this.stream.write(s)}sync(){this._ending=!0,this._send(s),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(c,()=>{this.stream.end()})}close(d){this._send(o.close(d))}describe(d){this._send(o.describe(d))}sendCopyFromChunk(d){this._send(o.copyData(d))}endCopyFrom(){this._send(o.copyDone())}sendCopyFail(d){this._send(o.copyFail(d))}};k(u,"Connection");var l=u;e.exports=l}),i5=Pe((t,e)=>{"use strict";he();var r=Ca().EventEmitter,i=(Gw(),sr(zf)),n=Zw(),o=F3(),s=J3(),a=XI(),c=i$(),u=Y3(),l=Qw(),f=V2(),d=class extends r{constructor(p){super(),this.connectionParameters=new c(p),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var y=p||{};this._Promise=y.Promise||Hw.Promise,this._types=new a(y.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=y.connection||new f({stream:y.stream,ssl:this.connectionParameters.ssl,keepAlive:y.keepAlive||!1,keepAliveInitialDelayMillis:y.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=y.binary||l.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=y.connectionTimeoutMillis||0}_errorAllQueries(p){let y=k(b=>{Ce.nextTick(()=>{b.handleError(p,this.connection)})},"enqueueError");this.activeQuery&&(y(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(y),this.queryQueue.length=0}_connect(p){var y=this,b=this.connection;if(this._connectionCallback=p,this._connecting||this._connected){let N=new Error("Client has already been connected. You cannot reuse a client.");Ce.nextTick(()=>{p(N)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{b._ending=!0,b.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?b.connect(this.host+"/.s.PGSQL."+this.port):b.connect(this.port,this.host),b.on("connect",function(){y.ssl?b.requestSsl():b.startup(y.getStartupConf())}),b.on("sslconnect",function(){b.startup(y.getStartupConf())}),this._attachListeners(b),b.once("end",()=>{let N=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(N),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(N):this._handleErrorEvent(N):this._connectionError||this._handleErrorEvent(N)),Ce.nextTick(()=>{this.emit("end")})})}connect(p){if(p){this._connect(p);return}return new this._Promise((y,b)=>{this._connect(N=>{N?b(N):y()})})}_attachListeners(p){p.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),p.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),p.on("authenticationSASL",this._handleAuthSASL.bind(this)),p.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),p.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),p.on("backendKeyData",this._handleBackendKeyData.bind(this)),p.on("error",this._handleErrorEvent.bind(this)),p.on("errorMessage",this._handleErrorMessage.bind(this)),p.on("readyForQuery",this._handleReadyForQuery.bind(this)),p.on("notice",this._handleNotice.bind(this)),p.on("rowDescription",this._handleRowDescription.bind(this)),p.on("dataRow",this._handleDataRow.bind(this)),p.on("portalSuspended",this._handlePortalSuspended.bind(this)),p.on("emptyQuery",this._handleEmptyQuery.bind(this)),p.on("commandComplete",this._handleCommandComplete.bind(this)),p.on("parseComplete",this._handleParseComplete.bind(this)),p.on("copyInResponse",this._handleCopyInResponse.bind(this)),p.on("copyData",this._handleCopyData.bind(this)),p.on("notification",this._handleNotification.bind(this))}_checkPgPass(p){let y=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(b=>{if(b!==void 0){if(typeof b!="string"){y.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=b}else this.connectionParameters.password=this.password=null;p()}).catch(b=>{y.emit("error",b)}):this.password!==null?p():s(this.connectionParameters,b=>{b!==void 0&&(this.connectionParameters.password=this.password=b),p()})}_handleAuthCleartextPassword(p){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(p){this._checkPgPass(()=>{let y=n.postgresMd5PasswordHash(this.user,this.password,p.salt);this.connection.password(y)})}_handleAuthSASL(p){this._checkPgPass(()=>{this.saslSession=o.startSession(p.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(p){o.continueSession(this.saslSession,this.password,p.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(p){o.finalizeSession(this.saslSession,p.data),this.saslSession=null}_handleBackendKeyData(p){this.processID=p.processID,this.secretKey=p.secretKey}_handleReadyForQuery(p){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:y}=this;this.activeQuery=null,this.readyForQuery=!0,y&&y.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(p){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(p);this.emit("error",p)}}_handleErrorEvent(p){if(this._connecting)return this._handleErrorWhileConnecting(p);this._queryable=!1,this._errorAllQueries(p),this.emit("error",p)}_handleErrorMessage(p){if(this._connecting)return this._handleErrorWhileConnecting(p);let y=this.activeQuery;if(!y){this._handleErrorEvent(p);return}this.activeQuery=null,y.handleError(p,this.connection)}_handleRowDescription(p){this.activeQuery.handleRowDescription(p)}_handleDataRow(p){this.activeQuery.handleDataRow(p)}_handlePortalSuspended(p){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(p){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(p){this.activeQuery.handleCommandComplete(p,this.connection)}_handleParseComplete(p){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(p){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(p){this.activeQuery.handleCopyData(p,this.connection)}_handleNotification(p){this.emit("notification",p)}_handleNotice(p){this.emit("notice",p)}getStartupConf(){var p=this.connectionParameters,y={user:p.user,database:p.database},b=p.application_name||p.fallback_application_name;return b&&(y.application_name=b),p.replication&&(y.replication=""+p.replication),p.statement_timeout&&(y.statement_timeout=String(parseInt(p.statement_timeout,10))),p.lock_timeout&&(y.lock_timeout=String(parseInt(p.lock_timeout,10))),p.idle_in_transaction_session_timeout&&(y.idle_in_transaction_session_timeout=String(parseInt(p.idle_in_transaction_session_timeout,10))),p.options&&(y.options=p.options),y}cancel(p,y){if(p.activeQuery===y){var b=this.connection;this.host&&this.host.indexOf("/")===0?b.connect(this.host+"/.s.PGSQL."+this.port):b.connect(this.port,this.host),b.on("connect",function(){b.cancel(p.processID,p.secretKey)})}else p.queryQueue.indexOf(y)!==-1&&p.queryQueue.splice(p.queryQueue.indexOf(y),1)}setTypeParser(p,y,b){return this._types.setTypeParser(p,y,b)}getTypeParser(p,y){return this._types.getTypeParser(p,y)}escapeIdentifier(p){return'"'+p.replace(/"/g,'""')+'"'}escapeLiteral(p){for(var y=!1,b="'",N=0;N<p.length;N++){var T=p[N];T==="'"?b+=T+T:T==="\\"?(b+=T+T,y=!0):b+=T}return b+="'",y===!0&&(b=" E"+b),b}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let p=this.activeQuery.submit(this.connection);p&&Ce.nextTick(()=>{this.activeQuery.handleError(p,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(p,y,b){var N,T,I,$,v;if(p==null)throw new TypeError("Client was passed a null or undefined query");return typeof p.submit=="function"?(I=p.query_timeout||this.connectionParameters.query_timeout,T=N=p,typeof y=="function"&&(N.callback=N.callback||y)):(I=this.connectionParameters.query_timeout,N=new u(p,y,b),N.callback||(T=new this._Promise((S,E)=>{N.callback=(_,O)=>_?E(_):S(O)}))),I&&(v=N.callback,$=setTimeout(()=>{var S=new Error("Query read timeout");Ce.nextTick(()=>{N.handleError(S,this.connection)}),v(S),N.callback=()=>{};var E=this.queryQueue.indexOf(N);E>-1&&this.queryQueue.splice(E,1),this._pulseQueryQueue()},I),N.callback=(S,E)=>{clearTimeout($),v(S,E)}),this.binary&&!N.binary&&(N.binary=!0),N._result&&!N._result._types&&(N._result._types=this._types),this._queryable?this._ending?(Ce.nextTick(()=>{N.handleError(new Error("Client was closed and is not queryable"),this.connection)}),T):(this.queryQueue.push(N),this._pulseQueryQueue(),T):(Ce.nextTick(()=>{N.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),T)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(p){if(this._ending=!0,!this.connection._connecting)if(p)p();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),p)this.connection.once("end",p);else return new this._Promise(y=>{this.connection.once("end",y)})}};k(d,"Client");var m=d;m.Query=u,e.exports=m}),o5=Pe((t,e)=>{"use strict";he();var r=Ca().EventEmitter,i=k(function(){},"NOOP"),n=k((h,p)=>{let y=h.findIndex(p);return y===-1?void 0:h.splice(y,1)[0]},"removeWhere"),o=class{constructor(p,y,b){this.client=p,this.idleListener=y,this.timeoutId=b}};k(o,"IdleItem");var s=o,a=class{constructor(p){this.callback=p}};k(a,"PendingItem");var c=a;function u(){throw new Error("Release called on client which has already been released to the pool.")}k(u,"throwOnDoubleRelease");function l(h,p){if(p)return{callback:p,result:void 0};let y,b,N=k(function(I,$){I?y(I):b($)},"cb"),T=new h(function(I,$){b=I,y=$}).catch(I=>{throw Error.captureStackTrace(I),I});return{callback:N,result:T}}k(l,"promisify");function f(h,p){return k(function y(b){b.client=p,p.removeListener("error",y),p.on("error",()=>{h.log("additional client error after disconnection due to error",b)}),h._remove(p),h.emit("error",b,p)},"idleListener")}k(f,"makeIdleListener");var d=class extends r{constructor(p,y){super(),this.options=Object.assign({},p),p!=null&&"password"in p&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:p.password}),p!=null&&p.ssl&&p.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||y||Yw().Client,this.Promise=this.options.Promise||Hw.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(y=>{this._remove(y.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let p=this._pendingQueue.shift();if(this._idle.length){let y=this._idle.pop();clearTimeout(y.timeoutId);let b=y.client;b.ref&&b.ref();let N=y.idleListener;return this._acquireClient(b,p,N,!1)}if(!this._isFull())return this.newClient(p);throw new Error("unexpected condition")}_remove(p){let y=n(this._idle,b=>b.client===p);y!==void 0&&clearTimeout(y.timeoutId),this._clients=this._clients.filter(b=>b!==p),p.end(),this.emit("remove",p)}connect(p){if(this.ending){let N=new Error("Cannot use a pool after calling end on the pool");return p?p(N):this.Promise.reject(N)}let y=l(this.Promise,p),b=y.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Ce.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new c(y.callback)),b;let N=k(($,v,S)=>{clearTimeout(I),y.callback($,v,S)},"queueCallback"),T=new c(N),I=setTimeout(()=>{n(this._pendingQueue,$=>$.callback===N),T.timedOut=!0,y.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return I.unref&&I.unref(),this._pendingQueue.push(T),b}return this.newClient(new c(y.callback)),b}newClient(p){let y=new this.Client(this.options);this._clients.push(y);let b=f(this,y);this.log("checking client timeout");let N,T=!1;this.options.connectionTimeoutMillis&&(N=setTimeout(()=>{this.log("ending client due to timeout"),T=!0,y.connection?y.connection.stream.destroy():y.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),y.connect(I=>{if(N&&clearTimeout(N),y.on("error",b),I)this.log("client failed to connect",I),this._clients=this._clients.filter($=>$!==y),T&&(I=new Error("Connection terminated due to connection timeout",{cause:I})),this._pulseQueue(),p.timedOut||p.callback(I,void 0,i);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let $=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(y),this._idle.findIndex(v=>v.client===y)!==-1&&this._acquireClient(y,new c((v,S,E)=>E()),b,!1)},this.options.maxLifetimeSeconds*1e3);$.unref(),y.once("end",()=>clearTimeout($))}return this._acquireClient(y,p,b,!0)}})}_acquireClient(p,y,b,N){N&&this.emit("connect",p),this.emit("acquire",p),p.release=this._releaseOnce(p,b),p.removeListener("error",b),y.timedOut?N&&this.options.verify?this.options.verify(p,p.release):p.release():N&&this.options.verify?this.options.verify(p,T=>{if(T)return p.release(T),y.callback(T,void 0,i);y.callback(void 0,p,p.release)}):y.callback(void 0,p,p.release)}_releaseOnce(p,y){let b=!1;return N=>{b&&u(),b=!0,this._release(p,y,N)}}_release(p,y,b){if(p.on("error",y),p._poolUseCount=(p._poolUseCount||0)+1,this.emit("release",b,p),b||this.ending||!p._queryable||p._ending||p._poolUseCount>=this.options.maxUses){p._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(p),this._pulseQueue();return}if(this._expired.has(p)){this.log("remove expired client"),this._expired.delete(p),this._remove(p),this._pulseQueue();return}let N;this.options.idleTimeoutMillis&&this._isAboveMin()&&(N=setTimeout(()=>{this.log("remove idle client"),this._remove(p)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&N.unref()),this.options.allowExitOnIdle&&p.unref(),this._idle.push(new s(p,y,N)),this._pulseQueue()}query(p,y,b){if(typeof p=="function"){let T=l(this.Promise,p);return GI(function(){return T.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),T.result}typeof y=="function"&&(b=y,y=void 0);let N=l(this.Promise,b);return b=N.callback,this.connect((T,I)=>{if(T)return b(T);let $=!1,v=k(S=>{$||($=!0,I.release(S),b(S))},"onError");I.once("error",v),this.log("dispatching query");try{I.query(p,y,(S,E)=>{if(this.log("query dispatched"),I.removeListener("error",v),!$)return $=!0,I.release(S),S?b(S):b(void 0,E)})}catch(S){return I.release(S),b(S)}}),N.result}end(p){if(this.log("ending"),this.ending){let b=new Error("Called end on pool more than once");return p?p(b):this.Promise.reject(b)}this.ending=!0;let y=l(this.Promise,p);return this._endCallback=y.callback,this._pulseQueue(),y.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((p,y)=>p+(this._expired.has(y)?1:0),0)}get totalCount(){return this._clients.length}};k(d,"Pool");var m=d;e.exports=m}),K2={};mi(K2,{default:()=>H2});var H2,s5=tn(()=>{"use strict";he(),H2={}}),a5=Pe((t,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),c5=Pe((t,e)=>{"use strict";he();var r=Ca().EventEmitter,i=(Gw(),sr(zf)),n=Zw(),o=e.exports=function(a,c,u){r.call(this),a=n.normalizeQueryConfig(a,c,u),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(l){l==="row"&&(this._emitRowEvents=!0)}.bind(this))};i.inherits(o,r);var s={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};o.prototype.handleError=function(a){var c=this.native.pq.resultErrorFields();if(c)for(var u in c){var l=s[u]||u;a[l]=c[u]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},o.prototype.then=function(a,c){return this._getPromise().then(a,c)},o.prototype.catch=function(a){return this._getPromise().catch(a)},o.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(a,c){this._once("end",a),this._once("error",c)}.bind(this)),this._promise)},o.prototype.submit=function(a){this.state="running";var c=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var u=k(function(d,m,h){if(a.native.arrayMode=!1,GI(function(){c.emit("_done")}),d)return c.handleError(d);c._emitRowEvents&&(h.length>1?m.forEach((p,y)=>{p.forEach(b=>{c.emit("row",b,h[y])})}):m.forEach(function(p){c.emit("row",p,h)})),c.state="end",c.emit("end",h),c.callback&&c.callback(null,h)},"after");if(Ce.domain&&(u=Ce.domain.bind(u)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var l=(this.values||[]).map(n.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let d=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return u(d)}return a.native.execute(this.name,l,u)}return a.native.prepare(this.name,this.text,l.length,function(d){return d?u(d):(a.namedQueries[c.name]=c.text,c.native.execute(c.name,l,u))})}else if(this.values){if(!Array.isArray(this.values)){let d=new Error("Query values must be an array");return u(d)}var f=this.values.map(n.prepareValue);a.native.query(this.text,f,u)}else a.native.query(this.text,u)}}),u5=Pe((t,e)=>{"use strict";he();var r=(s5(),sr(K2)),i=XI(),n=a5(),o=Ca().EventEmitter,s=(Gw(),sr(zf)),a=i$(),c=c5(),u=e.exports=function(l){o.call(this),l=l||{},this._Promise=l.Promise||Hw.Promise,this._types=new i(l.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var f=this.connectionParameters=new a(l);this.user=f.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),this.database=f.database,this.host=f.host,this.port=f.port,this.namedQueries={}};u.Query=c,s.inherits(u,o),u.prototype._errorAllQueries=function(l){let f=k(d=>{Ce.nextTick(()=>{d.native=this.native,d.handleError(l)})},"enqueueError");this._hasActiveQuery()&&(f(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(f),this._queryQueue.length=0},u.prototype._connect=function(l){var f=this;if(this._connecting){Ce.nextTick(()=>l(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(d,m){if(d)return l(d);f.native.connect(m,function(h){if(h)return f.native.end(),l(h);f._connected=!0,f.native.on("error",function(p){f._queryable=!1,f._errorAllQueries(p),f.emit("error",p)}),f.native.on("notification",function(p){f.emit("notification",{channel:p.relname,payload:p.extra})}),f.emit("connect"),f._pulseQueryQueue(!0),l()})})},u.prototype.connect=function(l){if(l){this._connect(l);return}return new this._Promise((f,d)=>{this._connect(m=>{m?d(m):f()})})},u.prototype.query=function(l,f,d){var m,h,p,y,b;if(l==null)throw new TypeError("Client was passed a null or undefined query");if(typeof l.submit=="function")p=l.query_timeout||this.connectionParameters.query_timeout,h=m=l,typeof f=="function"&&(l.callback=f);else if(p=this.connectionParameters.query_timeout,m=new c(l,f,d),!m.callback){let N,T;h=new this._Promise((I,$)=>{N=I,T=$}),m.callback=(I,$)=>I?T(I):N($)}return p&&(b=m.callback,y=setTimeout(()=>{var N=new Error("Query read timeout");Ce.nextTick(()=>{m.handleError(N,this.connection)}),b(N),m.callback=()=>{};var T=this._queryQueue.indexOf(m);T>-1&&this._queryQueue.splice(T,1),this._pulseQueryQueue()},p),m.callback=(N,T)=>{clearTimeout(y),b(N,T)}),this._queryable?this._ending?(m.native=this.native,Ce.nextTick(()=>{m.handleError(new Error("Client was closed and is not queryable"))}),h):(this._queryQueue.push(m),this._pulseQueryQueue(),h):(m.native=this.native,Ce.nextTick(()=>{m.handleError(new Error("Client has encountered a connection error and is not queryable"))}),h)},u.prototype.end=function(l){var f=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,l));var d;return l||(d=new this._Promise(function(m,h){l=k(p=>p?h(p):m(),"cb")})),this.native.end(function(){f._errorAllQueries(new Error("Connection terminated")),Ce.nextTick(()=>{f.emit("end"),l&&l()})}),d},u.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},u.prototype._pulseQueryQueue=function(l){if(this._connected&&!this._hasActiveQuery()){var f=this._queryQueue.shift();if(!f){l||this.emit("drain");return}this._activeQuery=f,f.submit(this);var d=this;f.once("_done",function(){d._pulseQueryQueue()})}},u.prototype.cancel=function(l){this._activeQuery===l?this.native.cancel(function(){}):this._queryQueue.indexOf(l)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(l),1)},u.prototype.ref=function(){},u.prototype.unref=function(){},u.prototype.setTypeParser=function(l,f,d){return this._types.setTypeParser(l,f,d)},u.prototype.getTypeParser=function(l,f){return this._types.getTypeParser(l,f)}}),p2=Pe((t,e)=>{"use strict";he(),e.exports=u5()}),Yw=Pe((t,e)=>{"use strict";he();var r=i5(),i=Qw(),n=V2(),o=o5(),{DatabaseError:s}=q2(),a=k(u=>{var l;return l=class extends o{constructor(f){super(f,u)}},k(l,"BoundPool"),l},"poolFactory"),c=k(function(u){this.defaults=i,this.Client=u,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=n,this.types=Jw(),this.DatabaseError=s},"PG");typeof Ce.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new c(p2()):(e.exports=new c(r),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var u=null;try{u=new c(p2())}catch(l){if(l.code!=="MODULE_NOT_FOUND")throw l}return Object.defineProperty(e.exports,"native",{value:u}),u}}))});he();he();Lf();S2();he();var l5=Object.defineProperty,d5=Object.defineProperties,f5=Object.getOwnPropertyDescriptors,m2=Object.getOwnPropertySymbols,p5=Object.prototype.hasOwnProperty,m5=Object.prototype.propertyIsEnumerable,h2=k((t,e,r)=>e in t?l5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"__defNormalProp"),h5=k((t,e)=>{for(var r in e||(e={}))p5.call(e,r)&&h2(t,r,e[r]);if(m2)for(var r of m2(e))m5.call(e,r)&&h2(t,r,e[r]);return t},"__spreadValues"),g5=k((t,e)=>d5(t,f5(e)),"__spreadProps"),y5=1008e3,g2=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,w5=new TextDecoder,o$=new TextEncoder,Ww=o$.encode("0123456789abcdef"),Fw=o$.encode("0123456789ABCDEF"),b5=o$.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),J2=b5.slice();J2[62]=45;J2[63]=95;var Rf,Vw;function Q2(t,{alphabet:e,scratchArr:r}={}){if(!Rf)if(Rf=new Uint16Array(256),Vw=new Uint16Array(256),g2)for(let m=0;m<256;m++)Rf[m]=Ww[m&15]<<8|Ww[m>>>4],Vw[m]=Fw[m&15]<<8|Fw[m>>>4];else for(let m=0;m<256;m++)Rf[m]=Ww[m&15]|Ww[m>>>4]<<8,Vw[m]=Fw[m&15]|Fw[m>>>4]<<8;t.byteOffset%4!==0&&(t=new Uint8Array(t));let i=t.length,n=i>>>1,o=i>>>2,s=r||new Uint16Array(i),a=new Uint32Array(t.buffer,t.byteOffset,o),c=new Uint32Array(s.buffer,s.byteOffset,n),u=e==="upper"?Vw:Rf,l=0,f=0,d;if(g2)for(;l<o;)d=a[l++],c[f++]=u[d>>>8&255]<<16|u[d&255],c[f++]=u[d>>>24]<<16|u[d>>>16&255];else for(;l<o;)d=a[l++],c[f++]=u[d>>>24]<<16|u[d>>>16&255],c[f++]=u[d>>>8&255]<<16|u[d&255];for(l<<=2;l<i;)s[l]=u[t[l++]];return w5.decode(s.subarray(0,i))}k(Q2,"_toHex");function Z2(t,e={}){let r="",i=t.length,n=y5>>>1,o=Math.ceil(i/n),s=new Uint16Array(o>1?n:i);for(let a=0;a<o;a++){let c=a*n,u=c+n;r+=Q2(t.subarray(c,u),g5(h5({},e),{scratchArr:s}))}return r}k(Z2,"_toHexChunked");function G2(t,e={}){return e.alphabet!=="upper"&&typeof t.toHex=="function"?t.toHex():Z2(t,e)}k(G2,"toHex");he();var Y2=class X2{constructor(e,r){this.strings=e,this.values=r}toParameterizedQuery(e={query:"",params:[]}){let{strings:r,values:i}=this;for(let n=0,o=r.length;n<o;n++)if(e.query+=r[n],n<i.length){let s=i[n];if(s instanceof rz)e.query+=s.sql;else if(s instanceof Kw)if(s.queryData instanceof X2)s.queryData.toParameterizedQuery(e);else{if(s.queryData.params?.length)throw new Error("This query is not composable");e.query+=s.queryData.query}else{let{params:a}=e;a.push(s),e.query+="$"+a.length,(s instanceof Se||ArrayBuffer.isView(s))&&(e.query+="::bytea")}}return e}};k(Y2,"SqlTemplate");var ez=Y2,tz=class{constructor(e){this.sql=e}};k(tz,"UnsafeRawSql");var rz=tz;he();function s$(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}k(s$,"warnIfBrowser");Lf();var v5=Oa(XI()),x5=Oa(Zw()),nz=class iz extends Error{constructor(e){super(e),Ne(this,"name","NeonDbError"),Ne(this,"severity"),Ne(this,"code"),Ne(this,"detail"),Ne(this,"hint"),Ne(this,"position"),Ne(this,"internalPosition"),Ne(this,"internalQuery"),Ne(this,"where"),Ne(this,"schema"),Ne(this,"table"),Ne(this,"column"),Ne(this,"dataType"),Ne(this,"constraint"),Ne(this,"file"),Ne(this,"line"),Ne(this,"routine"),Ne(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,iz)}};k(nz,"NeonDbError");var Pu=nz,y2="transaction() expects an array of queries, or a function returning an array of queries",S5=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function oz(t){return t instanceof Se?"\\x"+G2(t):t}k(oz,"encodeBuffersAsBytea");function QI(t){let{query:e,params:r}=t instanceof ez?t.toParameterizedQuery():t;return{query:e,params:r.map(i=>oz((0,x5.prepareValue)(i)))}}k(QI,"prepareQuery");function ds(t,{arrayMode:e,fullResults:r,fetchOptions:i,isolationLevel:n,readOnly:o,deferrable:s,authToken:a,disableWarningInBrowsers:c}={}){if(!t)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let u;try{u=YI(t)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(t))}let{protocol:l,username:f,hostname:d,port:m,pathname:h}=u;if(l!=="postgres:"&&l!=="postgresql:"||!f||!d||!h)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function p(b,...N){if(!(Array.isArray(b)&&Array.isArray(b.raw)&&Array.isArray(N)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Kw(y,new ez(b,N))}k(p,"templateFn"),p.query=(b,N,T)=>new Kw(y,{query:b,params:N??[]},T),p.unsafe=b=>new rz(b),p.transaction=async(b,N)=>{if(typeof b=="function"&&(b=b(p)),!Array.isArray(b))throw new Error(y2);b.forEach($=>{if(!($ instanceof Kw))throw new Error(y2)});let T=b.map($=>$.queryData),I=b.map($=>$.opts??{});return y(T,I,N)};async function y(b,N,T){let{fetchEndpoint:I,fetchFunction:$}=Df,v=Array.isArray(b)?{queries:b.map(G=>QI(G))}:QI(b),S=i??{},E=e??!1,_=r??!1,O=n,R=o,B=s;T!==void 0&&(T.fetchOptions!==void 0&&(S={...S,...T.fetchOptions}),T.arrayMode!==void 0&&(E=T.arrayMode),T.fullResults!==void 0&&(_=T.fullResults),T.isolationLevel!==void 0&&(O=T.isolationLevel),T.readOnly!==void 0&&(R=T.readOnly),T.deferrable!==void 0&&(B=T.deferrable)),N!==void 0&&!Array.isArray(N)&&N.fetchOptions!==void 0&&(S={...S,...N.fetchOptions});let D=a;!Array.isArray(N)&&N?.authToken!==void 0&&(D=N.authToken);let P=typeof I=="function"?I(d,m,{jwtAuth:D!==void 0}):I,z={"Neon-Connection-String":t,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},W=await az(D);W&&(z.Authorization=`Bearer ${W}`),Array.isArray(b)&&(O!==void 0&&(z["Neon-Batch-Isolation-Level"]=O),R!==void 0&&(z["Neon-Batch-Read-Only"]=String(R)),B!==void 0&&(z["Neon-Batch-Deferrable"]=String(B))),c||Df.disableWarningInBrowsers||s$();let Q;try{Q=await($??fetch)(P,{method:"POST",body:JSON.stringify(v),headers:z,...S})}catch(G){let J=new Pu(`Error connecting to database: ${G}`);throw J.sourceError=G,J}if(Q.ok){let G=await Q.json();if(Array.isArray(b)){let J=G.results;if(!Array.isArray(J))throw new Pu("Neon internal error: unexpected result format");return J.map((le,se)=>{let be=N[se]??{},Re=be.arrayMode??E,Lt=be.fullResults??_;return ZI(le,{arrayMode:Re,fullResults:Lt,types:be.types})})}else{let J=N??{},le=J.arrayMode??E,se=J.fullResults??_;return ZI(G,{arrayMode:le,fullResults:se,types:J.types})}}else{let{status:G}=Q;if(G===400){let J=await Q.json(),le=new Pu(J.message);for(let se of S5)le[se]=J[se]??void 0;throw le}else{let J=await Q.text();throw new Pu(`Server error (HTTP status ${G}): ${J}`)}}}return k(y,"execute"),p}k(ds,"neon");var sz=class{constructor(e,r,i){this.execute=e,this.queryData=r,this.opts=i}then(e,r){return this.execute(this.queryData,this.opts).then(e,r)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};k(sz,"NeonQueryPromise");var Kw=sz;function ZI(t,{arrayMode:e,fullResults:r,types:i}){let n=new v5.default(i),o=t.fields.map(c=>c.name),s=t.fields.map(c=>n.getTypeParser(c.dataTypeID)),a=e===!0?t.rows.map(c=>c.map((u,l)=>u===null?null:s[l](u))):t.rows.map(c=>Object.fromEntries(c.map((u,l)=>[o[l],u===null?null:s[l](u)])));return r?(t.viaNeonFetch=!0,t.rowAsArray=e,t.rows=a,t._parsers=s,t._types=n,t):a}k(ZI,"processQueryResult");async function az(t){if(typeof t=="string")return t;if(typeof t=="function")try{return await Promise.resolve(t())}catch(e){let r=new Pu("Error getting auth token.");throw e instanceof Error&&(r=new Pu(`Error getting auth token: ${e.message}`)),r}}k(az,"getAuthToken");he();var N5=Oa(Yw());he();var A5=Oa(Yw()),cz=class extends A5.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let i=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||Ce.env.PGHOST!==void 0,n=Ce.env.USER??Ce.env.USERNAME;if(!i&&this.host==="localhost"&&this.user===n&&this.database===n&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${n}, db: ${n}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let o=super.connect(e),s=r.pipelineTLS&&this.ssl,a=r.pipelineConnect==="password";if(!s&&!r.pipelineConnect)return o;let c=this.connection;if(s&&c.on("connect",()=>c.stream.emit("data","S")),a){c.removeAllListeners("authenticationCleartextPassword"),c.removeAllListeners("readyForQuery"),c.once("readyForQuery",()=>c.on("readyForQuery",this._handleReadyForQuery.bind(this)));let u=this.ssl?"sslconnect":"connect";c.on(u,()=>{this.neonConfig.disableWarningInBrowsers||s$(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return o}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let r=crypto.subtle,i=this.saslSession,n=this.password,o=e.data;if(i.message!=="SASLInitialResponse"||typeof n!="string"||typeof o!="string")throw new Error("SASL: protocol error");let s=Object.fromEntries(o.split(",").map(G=>{if(!/^.=/.test(G))throw new Error("SASL: Invalid attribute pair entry");let J=G[0],le=G.substring(2);return[J,le]})),a=s.r,c=s.s,u=s.i;if(!a||!/^[!-+--~]+$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!c||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(c))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!u||!/^[1-9][0-9]*$/.test(u))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!a.startsWith(i.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(a.length===i.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let l=parseInt(u,10),f=Se.from(c,"base64"),d=new TextEncoder,m=d.encode(n),h=await r.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=new Uint8Array(await r.sign("HMAC",h,Se.concat([f,Se.from([0,0,0,1])]))),y=p;for(var b=0;b<l-1;b++)p=new Uint8Array(await r.sign("HMAC",h,p)),y=Se.from(y.map((G,J)=>y[J]^p[J]));let N=y,T=await r.importKey("raw",N,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),I=new Uint8Array(await r.sign("HMAC",T,d.encode("Client Key"))),$=await r.digest("SHA-256",I),v="n=*,r="+i.clientNonce,S="r="+a+",s="+c+",i="+l,E="c=biws,r="+a,_=v+","+S+","+E,O=await r.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var R=new Uint8Array(await r.sign("HMAC",O,d.encode(_))),B=Se.from(I.map((G,J)=>I[J]^R[J])),D=B.toString("base64");let P=await r.importKey("raw",N,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),z=await r.sign("HMAC",P,d.encode("Server Key")),W=await r.importKey("raw",z,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var Q=Se.from(await r.sign("HMAC",W,d.encode(_)));i.message="SASLResponse",i.serverSignature=Q.toString("base64"),i.response=E+",p="+D,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};k(cz,"NeonClient");var _5=cz;Lf();var E5=Oa(i$());function uz(t,e){if(e)return{callback:e,result:void 0};let r,i,n=k(function(s,a){s?r(s):i(a)},"cb"),o=new t(function(s,a){i=s,r=a});return{callback:n,result:o}}k(uz,"promisify");var k5=class extends N5.Pool{constructor(){super(...arguments),Ne(this,"Client",_5),Ne(this,"hasFetchUnsupportedListeners",!1),Ne(this,"addListener",this.on)}on(e,r){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,i){if(!Df.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,r,i);typeof r=="function"&&(i=r,r=void 0);let n=uz(this.Promise,i);i=n.callback;try{let o=new E5.default(this.options),s=encodeURIComponent,a=encodeURI,c=`postgresql://${s(o.user)}:${s(o.password)}@${s(o.host)}/${a(o.database)}`,u=typeof e=="string"?e:e.text,l=r??e.values??[];ds(c,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(u,l,{types:e.types??this.options?.types}).then(f=>i(void 0,f)).catch(f=>i(f))}catch(o){i(o)}return n.result}};k(k5,"NeonPool");Lf();var jf=Oa(Yw());var YOe=jf.DatabaseError,XOe=jf.defaults,eCe=jf.escapeIdentifier,tCe=jf.escapeLiteral,rn=jf.types;var Ut=class t{static[U]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===gt)return{...e[gt],selectedFields:new Proxy(e[gt].selectedFields,this)};if(typeof r=="symbol")return e[r];let n=(H(e,bt)?e._.selectedFields:H(e,jr)?e[gt].selectedFields:e)[r];if(H(n,ce.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!n.isSelectionField)return n.sql;let o=n.clone();return o.isSelectionField=!0,o}if(H(n,ce)){if(this.config.sqlBehavior==="sql")return n;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return H(n,rt)?this.config.alias?new Proxy(n,new ka(new Proxy(n.table,new Au(this.config.alias,this.config.replaceOriginalName??!1)))):n:typeof n!="object"||n===null?n:new Proxy(n,new t(this.config))}};var a$=class{constructor(e,r){this.unique=e,this.name=r}static[U]="PgIndexBuilderOn";on(...e){return new Bf(e.map(r=>{if(H(r,ce))return r;r=r;let i=new Su(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new Bf(e.map(r=>{if(H(r,ce))return r;r=r;let i=new Su(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,i}),this.unique,!0,this.name)}using(e,...r){return new Bf(r.map(i=>{if(H(i,ce))return i;i=i;let n=new Su(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),n}),this.unique,!0,this.name,e)}},Bf=class{static[U]="PgIndexBuilder";config;constructor(e,r,i,n,o="btree"){this.config={name:n,columns:e,unique:r,only:i,method:o}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new c$(this.config,e)}},c$=class{static[U]="PgIndex";config;constructor(e,r){this.config={...e,table:r}}};function hi(t){return new a$(!1,t)}function T5(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}function I5(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,i,n)=>{let o=n===0?i.toLowerCase():`${i[0].toUpperCase()}${i.slice(1)}`;return r+o},"")}function $5(t){return t}var Xw=class{static[U]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?T5:e==="camelCase"?I5:$5}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[oe.Symbol.Schema]??"public",i=e.table[oe.Symbol.OriginalName],n=`${r}.${i}.${e.name}`;return this.cache[n]||this.cacheTable(e.table),this.cache[n]}cacheTable(e){let r=e[oe.Symbol.Schema]??"public",i=e[oe.Symbol.OriginalName],n=`${r}.${i}`;if(!this.cachedTables[n]){for(let o of Object.values(e[oe.Symbol.Columns])){let s=`${n}.${o.name}`;this.cache[s]=this.convert(o.name)}this.cachedTables[n]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Uu=class extends jr{static[U]="PgViewBase"};var fs=class{static[U]="PgDialect";casing;constructor(e){this.casing=new Xw(e?.casing)}async migrate(e,r,i){let n=typeof i=="string"?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",o=typeof i=="string"?"drizzle":i.migrationsSchema??"drizzle",s=j`
			CREATE TABLE IF NOT EXISTS ${j.identifier(o)}.${j.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(j`CREATE SCHEMA IF NOT EXISTS ${j.identifier(o)}`),await r.execute(s);let c=(await r.all(j`select id, hash, created_at from ${j.identifier(o)}.${j.identifier(n)} order by created_at desc limit 1`))[0];await r.transaction(async u=>{for await(let l of e)if(!c||Number(c.created_at)<l.folderMillis){for(let f of l.sql)await u.execute(j.raw(f));await u.execute(j`insert into ${j.identifier(o)}.${j.identifier(n)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[j`with `];for(let[i,n]of e.entries())r.push(j`${j.identifier(n._.alias)} as (${n._.sql})`),i<e.length-1&&r.push(j`, `);return r.push(j` `),j.join(r)}buildDeleteQuery({table:e,where:r,returning:i,withList:n}){let o=this.buildWithCTE(n),s=i?j` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,a=r?j` where ${r}`:void 0;return j`${o}delete from ${e}${a}${s}`}buildUpdateSet(e,r){let i=e[oe.Symbol.Columns],n=Object.keys(i).filter(s=>r[s]!==void 0||i[s]?.onUpdateFn!==void 0),o=n.length;return j.join(n.flatMap((s,a)=>{let c=i[s],u=c.onUpdateFn?.(),l=r[s]??(H(u,ce)?u:j.param(u,c)),f=j`${j.identifier(this.casing.getColumnCasing(c))} = ${l}`;return a<o-1?[f,j.raw(", ")]:[f]}))}buildUpdateQuery({table:e,set:r,where:i,returning:n,withList:o,from:s,joins:a}){let c=this.buildWithCTE(o),u=e[Wt.Symbol.Name],l=e[Wt.Symbol.Schema],f=e[Wt.Symbol.OriginalName],d=u===f?void 0:u,m=j`${l?j`${j.identifier(l)}.`:void 0}${j.identifier(f)}${d&&j` ${j.identifier(d)}`}`,h=this.buildUpdateSet(e,r),p=s&&j.join([j.raw(" from "),this.buildFromTable(s)]),y=this.buildJoins(a),b=n?j` returning ${this.buildSelection(n,{isSingleTable:!s})}`:void 0,N=i?j` where ${i}`:void 0;return j`${c}update ${m} set ${h}${p}${y}${N}${b}`}buildSelection(e,{isSingleTable:r=!1}={}){let i=e.length,n=e.flatMap(({field:o},s)=>{let a=[];if(H(o,ce.Aliased)&&o.isSelectionField)a.push(j.identifier(o.fieldAlias));else if(H(o,ce.Aliased)||H(o,ce)){let c=H(o,ce.Aliased)?o.sql:o;r?a.push(new ce(c.queryChunks.map(u=>H(u,ne)?j.identifier(this.casing.getColumnCasing(u)):u))):a.push(c),H(o,ce.Aliased)&&a.push(j` as ${j.identifier(o.fieldAlias)}`)}else if(H(o,rt))r?a.push(j.identifier(this.casing.getColumnCasing(o))):a.push(o);else if(H(o,bt)){let c=Object.entries(o._.selectedFields);if(c.length===1){let u=c[0][1],l=H(u,ce)?u.decoder:H(u,rt)?{mapFromDriverValue:f=>u.mapFromDriverValue(f)}:u.sql.decoder;l&&(o._.sql.decoder=l)}a.push(o)}return s<i-1&&a.push(j`, `),a});return j.join(n)}buildJoins(e){if(!e||e.length===0)return;let r=[];for(let[i,n]of e.entries()){i===0&&r.push(j` `);let o=n.table,s=n.lateral?j` lateral`:void 0,a=n.on?j` on ${n.on}`:void 0;if(H(o,Wt)){let c=o[Wt.Symbol.Name],u=o[Wt.Symbol.Schema],l=o[Wt.Symbol.OriginalName],f=c===l?void 0:n.alias;r.push(j`${j.raw(n.joinType)} join${s} ${u?j`${j.identifier(u)}.`:void 0}${j.identifier(l)}${f&&j` ${j.identifier(f)}`}${a}`)}else if(H(o,jr)){let c=o[gt].name,u=o[gt].schema,l=o[gt].originalName,f=c===l?void 0:n.alias;r.push(j`${j.raw(n.joinType)} join${s} ${u?j`${j.identifier(u)}.`:void 0}${j.identifier(l)}${f&&j` ${j.identifier(f)}`}${a}`)}else r.push(j`${j.raw(n.joinType)} join${s} ${o}${a}`);i<e.length-1&&r.push(j` `)}return j.join(r)}buildFromTable(e){if(H(e,oe)&&e[oe.Symbol.IsAlias]){let r=j`${j.identifier(e[oe.Symbol.OriginalName])}`;return e[oe.Symbol.Schema]&&(r=j`${j.identifier(e[oe.Symbol.Schema])}.${r}`),j`${r} ${j.identifier(e[oe.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:r,fieldsFlat:i,where:n,having:o,table:s,joins:a,orderBy:c,groupBy:u,limit:l,offset:f,lockingClause:d,distinct:m,setOperators:h}){let p=i??Rn(r);for(let P of p)if(H(P.field,rt)&&Yr(P.field.table)!==(H(s,bt)?s._.alias:H(s,Uu)?s[gt].name:H(s,ce)?void 0:Yr(s))&&!(z=>a?.some(({alias:W})=>W===(z[oe.Symbol.IsAlias]?Yr(z):z[oe.Symbol.BaseName])))(P.field.table)){let z=Yr(P.field.table);throw new Error(`Your "${P.path.join("->")}" field references a column "${z}"."${P.field.name}", but the table "${z}" is not part of the query! Did you forget to join it?`)}let y=!a||a.length===0,b=this.buildWithCTE(e),N;m&&(N=m===!0?j` distinct`:j` distinct on (${j.join(m.on,j`, `)})`);let T=this.buildSelection(p,{isSingleTable:y}),I=this.buildFromTable(s),$=this.buildJoins(a),v=n?j` where ${n}`:void 0,S=o?j` having ${o}`:void 0,E;c&&c.length>0&&(E=j` order by ${j.join(c,j`, `)}`);let _;u&&u.length>0&&(_=j` group by ${j.join(u,j`, `)}`);let O=typeof l=="object"||typeof l=="number"&&l>=0?j` limit ${l}`:void 0,R=f?j` offset ${f}`:void 0,B=j.empty();if(d){let P=j` for ${j.raw(d.strength)}`;d.config.of&&P.append(j` of ${j.join(Array.isArray(d.config.of)?d.config.of:[d.config.of],j`, `)}`),d.config.noWait?P.append(j` nowait`):d.config.skipLocked&&P.append(j` skip locked`),B.append(P)}let D=j`${b}select${N} ${T} from ${I}${$}${v}${_}${S}${E}${O}${R}${B}`;return h.length>0?this.buildSetOperations(D,h):D}buildSetOperations(e,r){let[i,...n]=r;if(!i)throw new Error("Cannot pass undefined values to any set operator");return n.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:i}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:i}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:i,rightSelect:n,limit:o,orderBy:s,offset:a}}){let c=j`(${e.getSQL()}) `,u=j`(${n.getSQL()})`,l;if(s&&s.length>0){let h=[];for(let p of s)if(H(p,ne))h.push(j.identifier(p.name));else if(H(p,ce)){for(let y=0;y<p.queryChunks.length;y++){let b=p.queryChunks[y];H(b,ne)&&(p.queryChunks[y]=j.identifier(b.name))}h.push(j`${p}`)}else h.push(j`${p}`);l=j` order by ${j.join(h,j`, `)} `}let f=typeof o=="object"||typeof o=="number"&&o>=0?j` limit ${o}`:void 0,d=j.raw(`${r} ${i?"all ":""}`),m=a?j` offset ${a}`:void 0;return j`${c}${d}${u}${l}${f}${m}`}buildInsertQuery({table:e,values:r,onConflict:i,returning:n,withList:o,select:s,overridingSystemValue_:a}){let c=[],u=e[oe.Symbol.Columns],l=Object.entries(u).filter(([b,N])=>!N.shouldDisableInsert()),f=l.map(([,b])=>j.identifier(this.casing.getColumnCasing(b)));if(s){let b=r;H(b,ce)?c.push(b):c.push(b.getSQL())}else{let b=r;c.push(j.raw("values "));for(let[N,T]of b.entries()){let I=[];for(let[$,v]of l){let S=T[$];if(S===void 0||H(S,Xr)&&S.value===void 0)if(v.defaultFn!==void 0){let E=v.defaultFn(),_=H(E,ce)?E:j.param(E,v);I.push(_)}else if(!v.default&&v.onUpdateFn!==void 0){let E=v.onUpdateFn(),_=H(E,ce)?E:j.param(E,v);I.push(_)}else I.push(j`default`);else I.push(S)}c.push(I),N<b.length-1&&c.push(j`, `)}}let d=this.buildWithCTE(o),m=j.join(c),h=n?j` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,p=i?j` on conflict ${i}`:void 0,y=a===!0?j`overriding system value `:void 0;return j`${d}insert into ${e} ${f} ${y}${m}${p}${h}`}buildRefreshMaterializedViewQuery({view:e,concurrently:r,withNoData:i}){let n=r?j` concurrently`:void 0,o=i?j` with no data`:void 0;return j`refresh materialized view${n} ${e}${o}`}prepareTyping(e){return H(e,Ef)||H(e,_f)?"json":H(e,kf)?"decimal":H(e,Tf)?"time":H(e,If)||H(e,$f)?"timestamp":H(e,Sf)||H(e,Nf)?"date":H(e,Of)?"uuid":"none"}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:i,table:n,tableConfig:o,queryConfig:s,tableAlias:a,nestedQueryRelation:c,joinOn:u}){let l=[],f,d,m=[],h,p=[];if(s===!0)l=Object.entries(o.columns).map(([N,T])=>({dbKey:T.name,tsKey:N,field:ji(T,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let b=Object.fromEntries(Object.entries(o.columns).map(([S,E])=>[S,ji(E,a)]));if(s.where){let S=typeof s.where=="function"?s.where(b,s2()):s.where;h=S&&wf(S,a)}let N=[],T=[];if(s.columns){let S=!1;for(let[E,_]of Object.entries(s.columns))_!==void 0&&E in o.columns&&(!S&&_===!0&&(S=!0),T.push(E));T.length>0&&(T=S?T.filter(E=>s.columns?.[E]===!0):Object.keys(o.columns).filter(E=>!T.includes(E)))}else T=Object.keys(o.columns);for(let S of T){let E=o.columns[S];N.push({tsKey:S,value:E})}let I=[];s.with&&(I=Object.entries(s.with).filter(S=>!!S[1]).map(([S,E])=>({tsKey:S,queryConfig:E,relation:o.relations[S]})));let $;if(s.extras){$=typeof s.extras=="function"?s.extras(b,{sql:j}):s.extras;for(let[S,E]of Object.entries($))N.push({tsKey:S,value:xT(E,a)})}for(let{tsKey:S,value:E}of N)l.push({dbKey:H(E,ce.Aliased)?E.fieldAlias:o.columns[S].name,tsKey:S,field:H(E,rt)?ji(E,a):E,relationTableTsKey:void 0,isJson:!1,selection:[]});let v=typeof s.orderBy=="function"?s.orderBy(b,a2()):s.orderBy??[];Array.isArray(v)||(v=[v]),m=v.map(S=>H(S,rt)?ji(S,a):wf(S,a)),f=s.limit,d=s.offset;for(let{tsKey:S,queryConfig:E,relation:_}of I){let O=u2(r,i,_),R=Ea(_.referencedTable),B=i[R],D=`${a}_${S}`,P=vt(...O.fields.map((Q,G)=>Ee(ji(O.references[G],D),ji(Q,a)))),z=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:i,table:e[B],tableConfig:r[B],queryConfig:H(_,ls)?E===!0?{limit:1}:{...E,limit:1}:E,tableAlias:D,joinOn:P,nestedQueryRelation:_}),W=j`${j.identifier(D)}.${j.identifier("data")}`.as(S);p.push({on:j`true`,table:new bt(z.sql,{},D),alias:D,joinType:"left",lateral:!0}),l.push({dbKey:S,tsKey:S,field:W,relationTableTsKey:B,isJson:!0,selection:z.selection})}}if(l.length===0)throw new bf({message:`No fields selected for table "${o.tsName}" ("${a}")`});let y;if(h=vt(u,h),c){let b=j`json_build_array(${j.join(l.map(({field:I,tsKey:$,isJson:v})=>v?j`${j.identifier(`${a}_${$}`)}.${j.identifier("data")}`:H(I,ce.Aliased)?I.sql:I),j`, `)})`;H(c,Cf)&&(b=j`coalesce(json_agg(${b}${m.length>0?j` order by ${j.join(m,j`, `)}`:void 0}), '[]'::json)`);let N=[{dbKey:"data",tsKey:"data",field:b.as("data"),isJson:!0,relationTableTsKey:o.tsName,selection:l}];f!==void 0||d!==void 0||m.length>0?(y=this.buildSelectQuery({table:yf(n,a),fields:{},fieldsFlat:[{path:[],field:j.raw("*")}],where:h,limit:f,offset:d,orderBy:m,setOperators:[]}),h=void 0,f=void 0,d=void 0,m=[]):y=yf(n,a),y=this.buildSelectQuery({table:H(y,Wt)?y:new bt(y,{},a),fields:{},fieldsFlat:N.map(({field:I})=>({path:[],field:H(I,rt)?ji(I,a):I})),joins:p,where:h,limit:f,offset:d,orderBy:m,setOperators:[]})}else y=this.buildSelectQuery({table:yf(n,a),fields:{},fieldsFlat:l.map(({field:b})=>({path:[],field:H(b,rt)?ji(b,a):b})),joins:p,where:h,limit:f,offset:d,orderBy:m,setOperators:[]});return{tableTsKey:o.tsName,sql:y,selection:l}}};var eb=class{static[U]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Ir=class{static[U]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r=!!this.fields,i=e,n;return this.fields?n=this.fields:H(i,bt)?n=Object.fromEntries(Object.keys(i._.selectedFields).map(o=>[o,i[o]])):H(i,Uu)?n=i[gt].selectedFields:H(i,ce)?n={}:n=bL(i),new tb({table:i,fields:n,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},u$=class extends eb{static[U]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:r,isPartialSelect:i,session:n,dialect:o,withList:s,distinct:a}){super(),this.config={withList:s,table:e,fields:{...r},distinct:a,setOperators:[]},this.isPartialSelect=i,this.session=n,this.dialect=o,this._={selectedFields:r,config:this.config},this.tableName=yo(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let c of gi(e))this.usedTables.add(c)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(i,n)=>{let o=this.tableName,s=yo(i);for(let a of gi(i))this.usedTables.add(a);if(typeof s=="string"&&this.config.joins?.some(a=>a.alias===s))throw new Error(`Alias "${s}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof o=="string"&&(this.config.fields={[o]:this.config.fields}),typeof s=="string"&&!H(i,ce))){let a=H(i,bt)?i._.selectedFields:H(i,jr)?i[gt].selectedFields:i[oe.Symbol.Columns];this.config.fields[s]=a}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:i,joinType:e,alias:s,lateral:r}),typeof s=="string")switch(e){case"left":{this.joinsNotNullableMap[s]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[s]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[s]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[s]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,r){return i=>{let n=typeof i=="function"?i(O5()):i;if(!vf(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=i:this.config.orderBy=i}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,r={}){return this.config.lockingClause={strength:e,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){let r=[];if(r.push(...gi(this.config.table)),this.config.joins)for(let i of this.config.joins)r.push(...gi(i.table));return new Proxy(new bt(this.getSQL(),this.config.fields,e,!1,[...new Set(r)]),new Ut({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Ut({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},tb=class extends u${static[U]="PgSelect";_prepare(e){let{session:r,config:i,dialect:n,joinsNotNullableMap:o,authToken:s,cacheConfig:a,usedTables:c}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:u}=i;return Mt.startActiveSpan("drizzle.prepareQuery",()=>{let l=Rn(u),f=r.prepareQuery(n.sqlToQuery(this.getSQL()),l,e,!0,void 0,{type:"select",tables:[...c]},a);return f.joinsNotNullableMap=o,f.setToken(s)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Mt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};wL(tb,[Tr]);function Du(t,e){return(r,i,...n)=>{let o=[i,...n].map(s=>({type:t,isAll:e,rightSelect:s}));for(let s of o)if(!vf(r.getSelectedFields(),s.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(o)}}var O5=()=>({union:C5,unionAll:P5,intersect:R5,intersectAll:U5,except:D5,exceptAll:L5}),C5=Du("union",!1),P5=Du("union",!0),R5=Du("intersect",!1),U5=Du("intersect",!0),D5=Du("except",!1),L5=Du("except",!0);var Lu=class{static[U]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=H(e,fs)?e:void 0,this.dialectConfig=H(e,fs)?void 0:e}$with=(e,r)=>{let i=this;return{as:o=>(typeof o=="function"&&(o=o(i)),new Proxy(new Nu(o.getSQL(),r??("getSelectedFields"in o?o.getSelectedFields()??{}:{}),e,!0),new Ut({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let r=this;function i(s){return new Ir({fields:s??void 0,session:void 0,dialect:r.getDialect(),withList:e})}function n(s){return new Ir({fields:s??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}function o(s,a){return new Ir({fields:a??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:s}})}return{select:i,selectDistinct:n,selectDistinctOn:o}}select(e){return new Ir({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Ir({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,r){return new Ir({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new fs(this.dialectConfig)),this.dialect}};function gi(t){return H(t,Wt)?[t[_a]?`${t[_a]}.${t[oe.Symbol.BaseName]}`:t[oe.Symbol.BaseName]]:H(t,bt)?t._.usedTables??[]:H(t,ce)?t.usedTables??[]:[]}var Mf=class extends Tr{constructor(e,r,i,n){super(),this.session=r,this.dialect=i,this.config={table:e,withList:n}}static[U]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[oe.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Rn(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return Mt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:gi(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Mt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ut({alias:Yr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var qf=class{constructor(e,r,i,n,o){this.table=e,this.session=r,this.dialect=i,this.withList=n,this.overridingSystemValue_=o}static[U]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(i=>{let n={},o=this.table[oe.Symbol.Columns];for(let s of Object.keys(i)){let a=i[s];n[s]=H(a,ce)?a:new Xr(a,o[s])}return n});return new rb(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r=typeof e=="function"?e(new Lu):e;if(!H(r,ce)&&!vf(this.table[Cw],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new rb(this.table,r,this.session,this.dialect,this.withList,!0)}},rb=class extends Tr{constructor(e,r,i,n,o,s,a){super(),this.session=i,this.dialect=n,this.config={table:e,values:r,withList:o,select:s,overridingSystemValue_:a}}static[U]="PgInsert";config;cacheConfig;returning(e=this.config.table[oe.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Rn(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=j`do nothing`;else{let r="";r=Array.isArray(e.target)?e.target.map(n=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(n))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let i=e.where?j` where ${e.where}`:void 0;this.config.onConflict=j`(${j.raw(r)})${i} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?j` where ${e.where}`:void 0,i=e.targetWhere?j` where ${e.targetWhere}`:void 0,n=e.setWhere?j` where ${e.setWhere}`:void 0,o=this.dialect.buildUpdateSet(this.config.table,Lw(this.config.table,e.set)),s="";return s=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=j`(${j.raw(s)})${i} do update set ${o}${r}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return Mt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:gi(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Mt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ut({alias:Yr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var nb=class extends Tr{constructor(e,r,i){super(),this.session=r,this.dialect=i,this.config={view:e}}static[U]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return Mt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Mt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var Wf=class{constructor(e,r,i,n){this.table=e,this.session=r,this.dialect=i,this.withList=n}static[U]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new l$(this.table,Lw(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},l$=class extends Tr{constructor(e,r,i,n,o){super(),this.session=i,this.dialect=n,this.config={set:r,table:e,withList:o,joins:[]},this.tableName=yo(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[U]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let r=e,i=yo(r);return typeof i=="string"&&(this.joinsNotNullableMap[i]=!0),this.config.from=r,this}getTableLikeFields(e){return H(e,Wt)?e[oe.Symbol.Columns]:H(e,bt)?e._.selectedFields:e[gt].selectedFields}createJoin(e){return(r,i)=>{let n=yo(r);if(typeof n=="string"&&this.config.joins.some(o=>o.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(typeof i=="function"){let o=this.config.from&&!H(this.config.from,ce)?this.getTableLikeFields(this.config.from):void 0;i=i(new Proxy(this.config.table[oe.Symbol.Columns],new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),o&&new Proxy(o,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:i,table:r,joinType:e,alias:n}),typeof n=="string")switch(e){case"left":{this.joinsNotNullableMap[n]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[n]=!0;break}case"inner":{this.joinsNotNullableMap[n]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[n]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[oe.Symbol.Columns]),this.config.from)){let r=yo(this.config.from);if(typeof r=="string"&&this.config.from&&!H(this.config.from,ce)){let i=this.getTableLikeFields(this.config.from);e[r]=i}for(let i of this.config.joins){let n=yo(i.table);if(typeof n=="string"&&!H(i.table,ce)){let o=this.getTableLikeFields(i.table);e[n]=o}}}return this.config.returningFields=e,this.config.returning=Rn(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:gi(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ut({alias:Yr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var ib=class t extends ce{constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;token;static[U]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,r){return j`(select count(*) from ${e}${j.raw(" where ").if(r)}${r})`}static buildCount(e,r){return j`select count(*) as count from ${e}${j.raw(" where ").if(r)}${r};`}setToken(e){return this.token=e,this}then(e,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}};var ob=class{constructor(e,r,i,n,o,s,a){this.fullSchema=e,this.schema=r,this.tableNamesMap=i,this.table=n,this.tableConfig=o,this.dialect=s,this.session=a}static[U]="PgRelationalQueryBuilder";findMany(e){return new sb(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new sb(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},sb=class extends Tr{constructor(e,r,i,n,o,s,a,c,u){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=i,this.table=n,this.tableConfig=o,this.dialect=s,this.session=a,this.config=c,this.mode=u}static[U]="PgRelationalQuery";_prepare(e){return Mt.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:i}=this._toSQL();return this.session.prepareQuery(i,void 0,e,!0,(n,o)=>{let s=n.map(a=>qw(this.schema,this.tableConfig,a,r.selection,o));return this.mode==="first"?s[0]:s})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return Mt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var ab=class extends Tr{constructor(e,r,i,n){super(),this.execute=e,this.sql=r,this.query=i,this.mapBatchResult=n}static[U]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var zu=class{constructor(e,r,i){if(this.dialect=e,this.session=r,this._=i?{schema:i.schema,fullSchema:i.fullSchema,tableNamesMap:i.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[n,o]of Object.entries(this._.schema))this.query[n]=new ob(i.fullSchema,this._.schema,this._.tableNamesMap,i.fullSchema[n],o,e,r);this.$cache={invalidate:async n=>{}}}static[U]="PgDatabase";query;$with=(e,r)=>{let i=this;return{as:o=>(typeof o=="function"&&(o=o(new Lu(i.dialect))),new Proxy(new Nu(o.getSQL(),r??("getSelectedFields"in o?o.getSelectedFields()??{}:{}),e,!0),new Ut({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,r){return new ib({source:e,filters:r,session:this.session})}$cache;with(...e){let r=this;function i(u){return new Ir({fields:u??void 0,session:r.session,dialect:r.dialect,withList:e})}function n(u){return new Ir({fields:u??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}function o(u,l){return new Ir({fields:l??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:{on:u}})}function s(u){return new Wf(u,r.session,r.dialect,e)}function a(u){return new qf(u,r.session,r.dialect,e)}function c(u){return new Mf(u,r.session,r.dialect,e)}return{select:i,selectDistinct:n,selectDistinctOn:o,update:s,insert:a,delete:c}}select(e){return new Ir({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Ir({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,r){return new Ir({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Wf(e,this.session,this.dialect)}insert(e){return new qf(e,this.session,this.dialect)}delete(e){return new Mf(e,this.session,this.dialect)}refreshMaterializedView(e){return new nb(e,this.session,this.dialect)}authToken;execute(e){let r=typeof e=="string"?j.raw(e):e.getSQL(),i=this.dialect.sqlToQuery(r),n=this.session.prepareQuery(i,void 0,void 0,!1);return new ab(()=>n.execute(void 0,this.authToken),r,i,o=>n.mapResult(o,!0))}transaction(e,r){return this.session.transaction(e,r)}};var d$=class{static[U]="Cache"},ju=class extends d${strategy(){return"all"}static[U]="NoopCache";async get(e){}async put(e,r,i,n){}async onMutate(e){}};async function f$(t,e){let r=`${t}-${JSON.stringify(e)}`,n=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",n);return[...new Uint8Array(o)].map(c=>c.toString(16).padStart(2,"0")).join("")}var cb=class{constructor(e,r,i,n){this.query=e,this.cache=r,this.queryMetadata=i,this.cacheConfig=n,r&&r.strategy()==="all"&&n===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,r){return e}setToken(e){return this.authToken=e,this}static[U]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,r,i){if(this.cache===void 0||H(this.cache,ju)||this.queryMetadata===void 0)try{return await i()}catch(n){throw new go(e,r,n)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await i()}catch(n){throw new go(e,r,n)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[n]=await Promise.all([i(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return n}catch(n){throw new go(e,r,n)}if(!this.cacheConfig)try{return await i()}catch(n){throw new go(e,r,n)}if(this.queryMetadata.type==="select"){let n=await this.cache.get(this.cacheConfig.tag??await f$(e,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(n===void 0){let o;try{o=await i()}catch(s){throw new go(e,r,s)}return await this.cache.put(this.cacheConfig.tag??await f$(e,r),o,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),o}return n}try{return await i()}catch(n){throw new go(e,r,n)}}},ub=class{constructor(e){this.dialect=e}static[U]="PgSession";execute(e,r){return Mt.startActiveSpan("drizzle.operation",()=>Mt.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,r){let i=await this.execute(e,r);return Number(i[0].count)}},lb=class extends zu{constructor(e,r,i,n=0){super(e,r,i),this.schema=i,this.nestedIndex=n}static[U]="PgTransaction";rollback(){throw new Rw}getTransactionConfigSQL(e){let r=[];return e.isolationLevel&&r.push(`isolation level ${e.isolationLevel}`),e.accessMode&&r.push(e.accessMode),typeof e.deferrable=="boolean"&&r.push(e.deferrable?"deferrable":"not deferrable"),j.raw(r.join(" "))}setTransaction(e){return this.session.execute(j`set transaction ${this.getTransactionConfigSQL(e)}`)}};var db={arrayMode:!1,fullResults:!0},p$={arrayMode:!0,fullResults:!0},m$=class extends cb{constructor(e,r,i,n,o,s,a,c,u){super(r,n,o,s),this.client=e,this.logger=i,this.fields=a,this._isResponseInArrayMode=c,this.customResultMapper=u,this.clientQuery=e.query??e}static[U]="NeonHttpPreparedQuery";clientQuery;async execute(e={},r=this.authToken){let i=Pw(this.query.params,e);this.logger.logQuery(this.query.sql,i);let{fields:n,clientQuery:o,query:s,customResultMapper:a}=this;if(!n&&!a)return this.queryWithCache(s.sql,i,async()=>o(s.sql,i,r===void 0?db:{...db,authToken:r}));let c=await this.queryWithCache(s.sql,i,async()=>await o(s.sql,i,r===void 0?p$:{...p$,authToken:r}));return this.mapResult(c)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let r=e.rows;return this.customResultMapper?this.customResultMapper(r):r.map(i=>yL(this.fields,i,this.joinsNotNullableMap))}all(e={}){let r=Pw(this.query.params,e);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?db:{...db,authToken:this.authToken}).then(i=>i.rows)}values(e={},r){let i=Pw(this.query.params,e);return this.logger.logQuery(this.query.sql,i),this.clientQuery(this.query.sql,i,{arrayMode:!0,fullResults:!0,authToken:r}).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},fb=class extends ub{constructor(e,r,i,n={}){super(r),this.client=e,this.schema=i,this.options=n,this.clientQuery=e.query??e,this.logger=n.logger??new Dw,this.cache=n.cache??new ju}static[U]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,r,i,n,o,s,a){return new m$(this.client,e,this.logger,this.cache,s,a,r,n,o)}async batch(e){let r=[],i=[];for(let o of e){let s=o._prepare(),a=s.getQuery();r.push(s),i.push(this.clientQuery(a.sql,a.params,{fullResults:!0,arrayMode:s.isResponseInArrayMode()}))}return(await this.client.transaction(i,p$)).map((o,s)=>r[s].mapResult(o,!0))}async query(e,r){return this.logger.logQuery(e,r),await this.clientQuery(e,r,{arrayMode:!0,fullResults:!0})}async queryObjects(e,r){return this.clientQuery(e,r,{arrayMode:!1,fullResults:!0})}async count(e,r){let i=await this.execute(e,r);return Number(i.rows[0].count)}async transaction(e,r={}){throw new Error("No transactions support in neon-http driver")}},lz=class extends lb{static[U]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}};var h$=class{constructor(e,r,i={}){this.client=e,this.dialect=r,this.options=i,this.initMappers()}static[U]="NeonHttpDriver";createSession(e){return new fb(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){rn.setTypeParser(rn.builtins.TIMESTAMPTZ,e=>e),rn.setTypeParser(rn.builtins.TIMESTAMP,e=>e),rn.setTypeParser(rn.builtins.DATE,e=>e),rn.setTypeParser(rn.builtins.INTERVAL,e=>e),rn.setTypeParser(1231,e=>e),rn.setTypeParser(1115,e=>e),rn.setTypeParser(1185,e=>e),rn.setTypeParser(1187,e=>e),rn.setTypeParser(1182,e=>e)}};function pb(t,e,r,i){return new Proxy(t,{get(n,o){let s=n[o];return typeof s!="function"&&(typeof s!="object"||s===null)?s:i?pb(s,e,r):o==="query"?pb(s,e,r,!0):new Proxy(s,{apply(a,c,u){let l=a.call(c,...u);return typeof l=="object"&&l!==null&&"setToken"in l&&typeof l.setToken=="function"&&l.setToken(e),r(a,o,l)}})}})}var g$=class extends zu{static[U]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,pb(this,e,(r,i,n)=>i==="with"?pb(n,e,(o,s,a)=>a):n)}async batch(e){return this.session.batch(e)}};function Bu(t,e={}){let r=new fs({casing:e.casing}),i;e.logger===!0?i=new Uw:e.logger!==!1&&(i=e.logger);let n;if(e.schema){let c=c2(e.schema,l2);n={fullSchema:e.schema,schema:c.tables,tableNamesMap:c.tableNamesMap}}let s=new h$(t,r,{logger:i,cache:e.cache}).createSession(n),a=new g$(r,s,n);return a.$client=t,a.$cache=e.cache,a.$cache&&(a.$cache.invalidate=e.cache?.onMutate),a}function mb(...t){if(typeof t[0]=="string"){let e=ds(t[0]);return Bu(e,t[1])}if(vL(t[0])){let{connection:e,client:r,...i}=t[0];if(r)return Bu(r,i);if(typeof e=="object"){let{connectionString:o,...s}=e,a=ds(o,s);return Bu(a,i)}let n=ds(e);return Bu(n,i)}return Bu(t[0],t[1])}(t=>{function e(r){return Bu({},r)}t.mock=e})(mb||(mb={}));var hb={};ar(hb,{accounts:()=>Zt,accountsRelations:()=>B5,documents:()=>at,documentsRelations:()=>q5,folders:()=>Ye,foldersRelations:()=>M5,sessions:()=>Mu,sessionsRelations:()=>j5,userSettings:()=>Ln,userSettingsRelations:()=>W5,users:()=>Qt,usersRelations:()=>z5,verifications:()=>y$});var Qt=us("users",{id:ze("id").primaryKey(),name:ze("name").notNull(),email:ze("email").notNull().unique(),emailVerified:xf("email_verified").notNull().default(!1),image:ze("image"),createdAt:$t("created_at").notNull().defaultNow(),updatedAt:$t("updated_at").notNull().defaultNow()}),Mu=us("sessions",{id:ze("id").primaryKey(),userId:ze("user_id").notNull().references(()=>Qt.id,{onDelete:"cascade"}),token:ze("token").notNull().unique(),expiresAt:$t("expires_at").notNull(),ipAddress:ze("ip_address"),userAgent:ze("user_agent"),createdAt:$t("created_at").notNull().defaultNow(),updatedAt:$t("updated_at").notNull().defaultNow()},t=>[hi("sessions_user_id_idx").on(t.userId),hi("sessions_token_idx").on(t.token)]),Zt=us("accounts",{id:ze("id").primaryKey(),userId:ze("user_id").notNull().references(()=>Qt.id,{onDelete:"cascade"}),accountId:ze("account_id").notNull(),providerId:ze("provider_id").notNull(),accessToken:ze("access_token"),refreshToken:ze("refresh_token"),accessTokenExpiresAt:$t("access_token_expires_at"),refreshTokenExpiresAt:$t("refresh_token_expires_at"),scope:ze("scope"),idToken:ze("id_token"),createdAt:$t("created_at").notNull().defaultNow(),updatedAt:$t("updated_at").notNull().defaultNow()},t=>[hi("accounts_user_id_idx").on(t.userId),hi("accounts_provider_idx").on(t.providerId,t.accountId)]),y$=us("verifications",{id:ze("id").primaryKey(),identifier:ze("identifier").notNull(),value:ze("value").notNull(),expiresAt:$t("expires_at").notNull(),createdAt:$t("created_at").notNull().defaultNow(),updatedAt:$t("updated_at").notNull().defaultNow()},t=>[hi("verifications_identifier_idx").on(t.identifier)]),Ye=us("folders",{id:ze("id").primaryKey(),userId:ze("user_id").notNull().references(()=>Qt.id,{onDelete:"cascade"}),name:ze("name").notNull(),parentId:ze("parent_id"),color:ze("color"),sortOrder:Af("sort_order").notNull().default(0),createdAt:$t("created_at").notNull().defaultNow(),updatedAt:$t("updated_at").notNull().defaultNow(),deletedAt:$t("deleted_at")},t=>[hi("folders_user_id_idx").on(t.userId),hi("folders_parent_id_idx").on(t.parentId)]),at=us("documents",{id:ze("id").primaryKey(),userId:ze("user_id").notNull().references(()=>Qt.id,{onDelete:"cascade"}),name:ze("name").notNull(),content:ze("content").notNull().default(""),folderId:ze("folder_id").references(()=>Ye.id,{onDelete:"set null"}),isManuallyNamed:xf("is_manually_named").notNull().default(!1),cursor:_u("cursor").$type(),scroll:_u("scroll").$type(),syncVersion:Af("sync_version").notNull().default(1),createdAt:$t("created_at").notNull().defaultNow(),updatedAt:$t("updated_at").notNull().defaultNow(),syncedAt:$t("synced_at"),deletedAt:$t("deleted_at")},t=>[hi("documents_user_id_idx").on(t.userId),hi("documents_folder_id_idx").on(t.folderId),hi("documents_updated_at_idx").on(t.updatedAt)]),Ln=us("user_settings",{id:ze("id").primaryKey(),userId:ze("user_id").notNull().unique().references(()=>Qt.id,{onDelete:"cascade"}),settings:_u("settings").$type().notNull().default({}),updatedAt:$t("updated_at").notNull().defaultNow()}),z5=$a(Qt,({many:t,one:e})=>({sessions:t(Mu),accounts:t(Zt),folders:t(Ye),documents:t(at),settings:e(Ln)})),j5=$a(Mu,({one:t})=>({user:t(Qt,{fields:[Mu.userId],references:[Qt.id]})})),B5=$a(Zt,({one:t})=>({user:t(Qt,{fields:[Zt.userId],references:[Qt.id]})})),M5=$a(Ye,({one:t,many:e})=>({user:t(Qt,{fields:[Ye.userId],references:[Qt.id]}),parent:t(Ye,{fields:[Ye.parentId],references:[Ye.id],relationName:"folderHierarchy"}),children:e(Ye,{relationName:"folderHierarchy"}),documents:e(at)})),q5=$a(at,({one:t})=>({user:t(Qt,{fields:[at.userId],references:[Qt.id]}),folder:t(Ye,{fields:[at.folderId],references:[Ye.id]})})),W5=$a(Ln,({one:t})=>({user:t(Qt,{fields:[Ln.userId],references:[Qt.id]})}));var dz=process.env.DATABASE_URL;if(!dz)throw new Error("DATABASE_URL environment variable is required");var F5=ds(dz),nt=mb(F5,{schema:hb});var qu=oT({database:VI(nt,{provider:"pg",schema:{user:Qt,session:Mu,account:Zt,verification:y$}}),emailAndPassword:{enabled:!1},socialProviders:{github:{clientId:process.env.GITHUB_CLIENT_ID||"",clientSecret:process.env.GITHUB_CLIENT_SECRET||"",scope:["user:email","repo"]},google:{clientId:process.env.GOOGLE_CLIENT_ID||"",clientSecret:process.env.GOOGLE_CLIENT_SECRET||"",scope:["openid","email","profile","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"],accessType:"offline",prompt:"consent"}},session:{expiresIn:3600*24*7,updateAge:3600*24,cookieCache:{enabled:!0,maxAge:300}},account:{accountLinking:{enabled:!0,trustedProviders:["github","google"]}},baseURL:process.env.BETTER_AUTH_URL||"http://localhost:5173",secret:process.env.BETTER_AUTH_SECRET,trustedOrigins:["http://localhost:5173","http://localhost:3000","https://qazuor-markview.vercel.app",process.env.NEXT_PUBLIC_APP_URL||""].filter(Boolean)});var w$={consoleLog:!1,jsonFormat:!0};function V5(t){let e=t.req.header("x-forwarded-for");if(e){let n=e.split(",")[0];return n?n.trim():null}let r=t.req.header("x-real-ip");if(r)return r;let i=t.req.header("cf-connecting-ip");return i||null}function K5(t){return t.req.header("user-agent")||null}function H5(t){if(w$.jsonFormat)return JSON.stringify(t);let e=t.success?"\u2713":"\u2717",r=t.userId?`user:${t.userId}`:"anonymous",i=Object.keys(t.metadata).length>0?` | ${JSON.stringify(t.metadata)}`:"",n=t.error?` | error: ${t.error}`:"";return`[AUDIT] ${t.timestamp} ${e} ${t.event} | ${r} | ip:${t.ip||"unknown"}${i}${n}`}function gr(t,e={}){let{c:r,userId:i=null,success:n=!0,error:o,metadata:s={}}=e,a={timestamp:new Date().toISOString(),event:t,userId:i||r&&r.get("user")?.id||null,ip:r?V5(r):null,userAgent:r?K5(r):null,metadata:s,success:n,error:o};if(w$.consoleLog||w$.jsonFormat){let c=H5(a);n?console.log(c):console.warn(c)}return a}var b$={loginSuccess:(t,e)=>gr("auth.login",{c:t,metadata:{provider:e}}),loginFailed:(t,e,r)=>gr("auth.login.failed",{c:t,success:!1,error:r,metadata:{provider:e}}),logout:t=>gr("auth.logout",{c:t}),tokenRefresh:(t,e)=>gr("auth.token.refresh",{c:t,metadata:{provider:e}}),rateLimited:(t,e)=>gr("security.rate_limited",{c:t,success:!1,metadata:{endpoint:e}}),unauthorized:(t,e)=>gr("security.unauthorized",{c:t,success:!1,metadata:{endpoint:e}}),forbidden:(t,e,r)=>gr("security.forbidden",{c:t,success:!1,metadata:{endpoint:e,reason:r}}),documentCreated:(t,e)=>gr("document.created",{c:t,metadata:{documentId:e}}),documentUpdated:(t,e)=>gr("document.updated",{c:t,metadata:{documentId:e}}),documentDeleted:(t,e)=>gr("document.deleted",{c:t,metadata:{documentId:e}}),settingsUpdated:t=>gr("user.settings.updated",{c:t}),githubFileCreated:(t,e,r)=>gr("github.file.created",{c:t,metadata:{repo:e,path:r}}),githubFileUpdated:(t,e,r)=>gr("github.file.updated",{c:t,metadata:{repo:e,path:r}}),githubFileDeleted:(t,e,r)=>gr("github.file.deleted",{c:t,metadata:{repo:e,path:r}}),googleFileCreated:(t,e,r)=>gr("google.file.created",{c:t,metadata:{fileId:e,name:r}}),googleFileUpdated:(t,e,r)=>gr("google.file.updated",{c:t,metadata:{fileId:e,name:r}}),googleFileDeleted:(t,e,r)=>gr("google.file.deleted",{c:t,metadata:{fileId:e,name:r}})};var yb=new Map,J5=60*1e3,gb=null;function Q5(){gb||(gb=setInterval(()=>{let t=Date.now();for(let[e,r]of yb.entries())r.resetAt<t&&yb.delete(e)},J5),typeof gb.unref=="function"&&gb.unref())}function Z5(t){let e=t.req.header("x-forwarded-for");if(e){let n=e.split(",")[0];return n?n.trim():"unknown"}let r=t.req.header("x-real-ip");if(r)return r;let i=t.req.header("cf-connecting-ip");return i||"unknown"}var G5={standard:{limit:100,windowSeconds:60},auth:{limit:10,windowSeconds:60},sync:{limit:60,windowSeconds:60},externalProxy:{limit:30,windowSeconds:60},heavy:{limit:10,windowSeconds:60}};function Y5(t){let{limit:e,windowSeconds:r,keyGenerator:i,skipAuthenticated:n=!1}=t;return Q5(),async(o,s)=>{if(n&&o.get("user"))return s();let a=i?i(o):`ip:${Z5(o)}:${o.req.path}`,c=Date.now(),u=r*1e3,l=yb.get(a);!l||l.resetAt<c?(l={count:1,resetAt:c+u},yb.set(a,l)):l.count++;let f=Math.max(0,e-l.count),d=Math.ceil((l.resetAt-c)/1e3);return o.header("X-RateLimit-Limit",e.toString()),o.header("X-RateLimit-Remaining",f.toString()),o.header("X-RateLimit-Reset",Math.ceil(l.resetAt/1e3).toString()),l.count>e?(o.header("Retry-After",d.toString()),o.json({error:"Too Many Requests",message:`Rate limit exceeded. Try again in ${d} seconds.`,retryAfter:d},429)):s()}}function Ff(t,e){let r=G5[t];return Y5({...r,...e})}var X5=/^[\w!#$%&'*.^`|~+-]+$/,eF=/^[ !#-:<-[\]-~]*$/,v$=(t,e)=>{if(e&&t.indexOf(e)===-1)return{};let r=t.trim().split(";"),i={};for(let n of r){n=n.trim();let o=n.indexOf("=");if(o===-1)continue;let s=n.substring(0,o).trim();if(e&&e!==s||!X5.test(s))continue;let a=n.substring(o+1).trim();if(a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),eF.test(a)&&(i[s]=a.indexOf("%")!==-1?Ra(a,Fu):a,e))break}return i};var fz=(t,e,r)=>{let i=t.req.raw.headers.get("Cookie");if(typeof e=="string"){if(!i)return;let o=e;return r==="secure"?o="__Secure-"+e:r==="host"&&(o="__Host-"+e),v$(i,o)[o]}return i?v$(i):{}};var pz=(t,e)=>new Response(t,{headers:{"Content-Type":e}}).formData();var tF=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,rF=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,nF=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,x$=(t,e)=>async(r,i)=>{let n={},o=r.req.header("Content-Type");switch(t){case"json":if(!o||!tF.test(o))break;try{n=await r.req.json()}catch{let a="Malformed JSON in request body";throw new vo(400,{message:a})}break;case"form":{if(!o||!(rF.test(o)||nF.test(o)))break;let a;if(r.req.bodyCache.formData)a=await r.req.bodyCache.formData;else try{let u=await r.req.arrayBuffer();a=await pz(u,o),r.req.bodyCache.formData=a}catch(u){let l="Malformed FormData request.";throw l+=u instanceof Error?` ${u.message}`:` ${String(u)}`,new vo(400,{message:l})}let c={};a.forEach((u,l)=>{l.endsWith("[]")?(c[l]??=[]).push(u):Array.isArray(c[l])?c[l].push(u):l in c?c[l]=[c[l],u]:c[l]=u}),n=c;break}case"query":n=Object.fromEntries(Object.entries(r.req.queries()).map(([a,c])=>c.length===1?[a,c[0]]:[a,c]));break;case"param":n=r.req.param();break;case"header":n=r.req.header();break;case"cookie":n=fz(r);break}let s=await e(n,r);return s instanceof Response?s:(r.req.addValidatedData(t,s),await i())};function iF(t,e,r,i){return x$(t,async(n,o)=>{let s=n;if(t==="header"&&"_def"in e||t==="header"&&"_zod"in e){let c=Object.keys("in"in e?e.in.shape:e.shape),u=Object.fromEntries(c.map(l=>[l.toLowerCase(),l]));s=Object.fromEntries(Object.entries(n).map(([l,f])=>[u[l]||l,f]))}let a=i&&i.validationFunction?await i.validationFunction(e,s):await e.safeParseAsync(s);if(r){let c=await r({data:s,...a,target:t},o);if(c){if(c instanceof Response)return c;if("response"in c)return c.response}}return a.success?a.data:o.json(a,400)})}var zn=iF;function Ot(t){let e=t.get("user");if(!e)throw new vo(401,{message:"Authentication required"});return e}var Vf=new qn,oF=me.object({endpoint:me.string(),method:me.enum(["GET","POST","PUT","PATCH","DELETE"]).default("GET"),body:me.unknown().optional()}),sF=me.object({repo:me.string(),path:me.string(),content:me.string(),message:me.string().min(1),sha:me.string().optional(),branch:me.string().optional()});async function S$(t){return(await nt.query.accounts.findFirst({where:vt(Ee(Zt.userId,t),Ee(Zt.providerId,"github"))}))?.accessToken||null}Vf.post("/proxy",zn("json",oF),async t=>{let e=Ot(t),{endpoint:r,method:i,body:n}=t.req.valid("json"),o=await S$(e.id);if(!o)return t.json({error:"GitHub not connected"},401);let s=r.startsWith("https://")?r:`https://api.github.com${r}`;try{let a=await fetch(s,{method:i,headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:n?JSON.stringify(n):void 0}),c=await a.json(),u={limit:a.headers.get("x-ratelimit-limit"),remaining:a.headers.get("x-ratelimit-remaining"),reset:a.headers.get("x-ratelimit-reset")};return a.ok?t.json({data:c,rateLimit:u}):t.json({error:c.message||"GitHub API error",status:a.status,rateLimit:u},a.status)}catch(a){return console.error("GitHub proxy error:",a),t.json({error:"Failed to connect to GitHub"},500)}});Vf.post("/commit",zn("json",sF),async t=>{let e=Ot(t),{repo:r,path:i,content:n,message:o,sha:s,branch:a}=t.req.valid("json"),c=await S$(e.id);if(!c)return t.json({error:"GitHub not connected"},401);let u=a;u||(u=(await(await fetch(`https://api.github.com/repos/${r}`,{headers:{Authorization:`Bearer ${c}`,Accept:"application/vnd.github+json"}})).json()).default_branch);let l=`https://api.github.com/repos/${r}/contents/${i}`,f={message:o,content:Buffer.from(n).toString("base64"),branch:u||"main"};s&&(f.sha=s);try{let d=await fetch(l,{method:"PUT",headers:{Authorization:`Bearer ${c}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:JSON.stringify(f)}),m=await d.json();return d.ok?t.json({success:!0,sha:m.content?.sha,commit:{sha:m.commit?.sha,url:m.commit?.html_url}}):d.status===409?t.json({error:"Conflict",message:"File has been modified on GitHub. Please refresh and try again.",details:m},409):t.json({error:m.message||"Failed to commit",status:d.status},d.status)}catch(d){return console.error("GitHub commit error:",d),t.json({error:"Failed to commit to GitHub"},500)}});Vf.delete("/file",zn("json",me.object({repo:me.string(),path:me.string(),message:me.string(),sha:me.string(),branch:me.string().optional()})),async t=>{let e=Ot(t),{repo:r,path:i,message:n,sha:o,branch:s}=t.req.valid("json"),a=await S$(e.id);if(!a)return t.json({error:"GitHub not connected"},401);let c=`https://api.github.com/repos/${r}/contents/${i}`;try{let u=await fetch(c,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:JSON.stringify({message:n,sha:o,branch:s||"main"})});if(!u.ok){let l=await u.json();return t.json({error:l.message||"Failed to delete",status:u.status},u.status)}return t.json({success:!0})}catch(u){return console.error("GitHub delete error:",u),t.json({error:"Failed to delete from GitHub"},500)}});Vf.get("/connection",async t=>{let e=Ot(t),r=await nt.query.accounts.findFirst({where:vt(Ee(Zt.userId,e.id),Ee(Zt.providerId,"github"))});if(!r||!r.accessToken)return t.json({connected:!1});try{let i=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${r.accessToken}`,Accept:"application/vnd.github+json"}});if(!i.ok)return t.json({connected:!1,error:"Token expired"});let n=await i.json();return t.json({connected:!0,user:{login:n.login,name:n.name,avatar:n.avatar_url}})}catch{return t.json({connected:!1,error:"Failed to verify"})}});var mz=Vf;var Kf=new qn,aF=me.object({endpoint:me.string(),method:me.enum(["GET","POST","PUT","PATCH","DELETE"]).default("GET"),body:me.unknown().optional(),isUpload:me.boolean().optional()}),cF=me.object({operation:me.enum(["create","update","delete","rename","move"]),fileId:me.string().optional(),name:me.string().optional(),content:me.string().optional(),parentId:me.string().optional(),mimeType:me.string().optional()});async function wb(t){let e=await nt.query.accounts.findFirst({where:vt(Ee(Zt.userId,t),Ee(Zt.providerId,"google"))});return e?.accessToken?e.accessTokenExpiresAt&&new Date(e.accessTokenExpiresAt)<new Date?e.refreshToken?await uF(t,e.refreshToken):null:e.accessToken:null}async function uF(t,e){try{let r=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:process.env.GOOGLE_CLIENT_ID||"",client_secret:process.env.GOOGLE_CLIENT_SECRET||"",refresh_token:e,grant_type:"refresh_token"})});if(!r.ok)return console.error("Failed to refresh Google token"),null;let i=await r.json();return await nt.update(Zt).set({accessToken:i.access_token,accessTokenExpiresAt:new Date(Date.now()+i.expires_in*1e3),updatedAt:new Date}).where(vt(Ee(Zt.userId,t),Ee(Zt.providerId,"google"))),i.access_token}catch(r){return console.error("Error refreshing Google token:",r),null}}Kf.post("/proxy",zn("json",aF),async t=>{let e=Ot(t),{endpoint:r,method:i,body:n}=t.req.valid("json"),o=await wb(e.id);if(!o)return t.json({error:"Google Drive not connected"},401);let s=r.startsWith("https://")?r:`https://www.googleapis.com${r}`;try{let a=await fetch(s,{method:i,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0});if(r.includes("alt=media")){let u=await a.text();return t.json({content:u})}let c=await a.json();return a.ok?t.json({data:c}):t.json({error:c.error?.message||"Google API error",status:a.status},a.status)}catch(a){return console.error("Google proxy error:",a),t.json({error:"Failed to connect to Google"},500)}});Kf.post("/files",zn("json",cF),async t=>{let e=Ot(t),{operation:r,fileId:i,name:n,content:o,parentId:s,mimeType:a}=t.req.valid("json"),c=await wb(e.id);if(!c)return t.json({error:"Google Drive not connected"},401);try{let u,l;switch(r){case"create":{let f={name:n||"Untitled.md",mimeType:a||"text/markdown",parents:s?[s]:void 0},d="-------314159265358979323846",m=`\r
--${d}\r
`,h=`\r
--${d}--`,p=`${m}Content-Type: application/json; charset=UTF-8\r
\r
${JSON.stringify(f)}${m}Content-Type: text/markdown\r
\r
${o||""}${h}`;u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":`multipart/related; boundary="${d}"`},body:p});break}case"update":{if(!i)return t.json({error:"fileId required for update"},400);u=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${i}?uploadType=media&fields=id,name,modifiedTime`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"text/markdown"},body:o||""});break}case"delete":{if(!i)return t.json({error:"fileId required for delete"},400);u=await fetch(`https://www.googleapis.com/drive/v3/files/${i}`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({trashed:!0})});break}case"rename":{if(!i||!n)return t.json({error:"fileId and name required for rename"},400);u=await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=id,name,modifiedTime`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({name:n})});break}case"move":{if(!i||!s)return t.json({error:"fileId and parentId required for move"},400);let m=((await(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=parents`,{headers:{Authorization:`Bearer ${c}`}})).json()).parents||[]).join(",");u=await fetch(`https://www.googleapis.com/drive/v3/files/${i}?addParents=${s}&removeParents=${m}&fields=id,name,parents`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});break}default:return t.json({error:"Invalid operation"},400)}return l=await u.json(),u.ok?t.json({success:!0,file:l}):t.json({error:l.error?.message||"Operation failed",status:u.status},u.status)}catch(u){return console.error("Google file operation error:",u),t.json({error:"File operation failed"},500)}});Kf.get("/quota",async t=>{let e=Ot(t),r=await wb(e.id);if(!r)return t.json({error:"Google Drive not connected"},401);try{let i=await fetch("https://www.googleapis.com/drive/v3/about?fields=storageQuota",{headers:{Authorization:`Bearer ${r}`}});if(!i.ok)return t.json({error:"Failed to get quota"},i.status);let o=(await i.json()).storageQuota;return t.json({used:Number.parseInt(o.usage||"0"),limit:Number.parseInt(o.limit||"0"),usedInDrive:Number.parseInt(o.usageInDrive||"0"),usedInTrash:Number.parseInt(o.usageInDriveTrash||"0")})}catch(i){return console.error("Google quota error:",i),t.json({error:"Failed to get quota"},500)}});Kf.get("/connection",async t=>{let e=Ot(t);if(!(await nt.query.accounts.findFirst({where:vt(Ee(Zt.userId,e.id),Ee(Zt.providerId,"google"))}))?.accessToken)return t.json({connected:!1});try{let i=await wb(e.id);if(!i)return t.json({connected:!1,error:"Token expired"});let n=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${i}`}});if(!n.ok)return t.json({connected:!1,error:"Token invalid"});let o=await n.json();return t.json({connected:!0,user:{email:o.email,name:o.name,picture:o.picture}})}catch{return t.json({connected:!1,error:"Failed to verify"})}});var hz=Kf;var ps=new qn,lF=me.object({id:me.string(),name:me.string().min(1),content:me.string(),folderId:me.string().nullable().optional(),isManuallyNamed:me.boolean().optional(),cursor:me.object({line:me.number(),column:me.number()}).nullable().optional(),scroll:me.object({line:me.number(),percentage:me.number()}).nullable().optional(),syncVersion:me.number().optional()}),dF=me.object({id:me.string(),name:me.string().min(1),parentId:me.string().nullable().optional(),color:me.string().nullable().optional(),sortOrder:me.number().optional()});ps.get("/documents",async t=>{let e=Ot(t),r=t.req.query("since"),i=r?new Date(r):null,o=await nt.query.documents.findMany({where:vt(Ee(at.userId,e.id),i?Ta(pi(at.updatedAt,i),at.deletedAt?pi(at.deletedAt,i):void 0):void 0),orderBy:(s,{desc:a})=>[a(s.updatedAt)]});return t.json({documents:o,syncedAt:new Date().toISOString()})});ps.put("/documents/:id",zn("json",lF),async t=>{let e=Ot(t),r=t.req.param("id"),i=t.req.valid("json"),n=await nt.query.documents.findFirst({where:vt(Ee(at.id,r),Ee(at.userId,e.id))});if(n){if(i.syncVersion&&n.syncVersion>i.syncVersion)return t.json({error:"Conflict",message:"Document has been modified on server",serverVersion:n.syncVersion,serverDocument:n},409);let[s]=await nt.update(at).set({name:i.name,content:i.content,folderId:i.folderId,isManuallyNamed:i.isManuallyNamed??n.isManuallyNamed,cursor:i.cursor,scroll:i.scroll,syncVersion:n.syncVersion+1,updatedAt:new Date,syncedAt:new Date,deletedAt:null}).where(vt(Ee(at.id,r),Ee(at.userId,e.id))).returning();return t.json({document:s})}let[o]=await nt.insert(at).values({id:r,userId:e.id,name:i.name,content:i.content,folderId:i.folderId,isManuallyNamed:i.isManuallyNamed??!1,cursor:i.cursor,scroll:i.scroll,syncVersion:1,syncedAt:new Date}).returning();return t.json({document:o},201)});ps.delete("/documents/:id",async t=>{let e=Ot(t),r=t.req.param("id"),[i]=await nt.update(at).set({deletedAt:new Date,updatedAt:new Date,syncVersion:nt.select({v:at.syncVersion}).from(at).where(Ee(at.id,r)).limit(1)}).where(vt(Ee(at.id,r),Ee(at.userId,e.id),Ia(at.deletedAt))).returning();return i?t.json({success:!0,document:i}):t.json({error:"Document not found"},404)});ps.get("/folders",async t=>{let e=Ot(t),r=t.req.query("since"),i=r?new Date(r):null,n=await nt.query.folders.findMany({where:vt(Ee(Ye.userId,e.id),i?Ta(pi(Ye.updatedAt,i),Ye.deletedAt?pi(Ye.deletedAt,i):void 0):void 0),orderBy:(o,{asc:s})=>[s(o.sortOrder),s(o.name)]});return t.json({folders:n,syncedAt:new Date().toISOString()})});ps.put("/folders/:id",zn("json",dF),async t=>{let e=Ot(t),r=t.req.param("id"),i=t.req.valid("json"),n=await nt.query.folders.findFirst({where:vt(Ee(Ye.id,r),Ee(Ye.userId,e.id))});if(n){let[s]=await nt.update(Ye).set({name:i.name,parentId:i.parentId,color:i.color,sortOrder:i.sortOrder??n.sortOrder,updatedAt:new Date,deletedAt:null}).where(vt(Ee(Ye.id,r),Ee(Ye.userId,e.id))).returning();return t.json({folder:s})}let[o]=await nt.insert(Ye).values({id:r,userId:e.id,name:i.name,parentId:i.parentId,color:i.color,sortOrder:i.sortOrder??0}).returning();return t.json({folder:o},201)});ps.delete("/folders/:id",async t=>{let e=Ot(t),r=t.req.param("id"),[i]=await nt.update(Ye).set({deletedAt:new Date,updatedAt:new Date}).where(vt(Ee(Ye.id,r),Ee(Ye.userId,e.id),Ia(Ye.deletedAt))).returning();return i?t.json({success:!0,folder:i}):t.json({error:"Folder not found"},404)});ps.get("/status",async t=>{let e=Ot(t),[r]=await nt.select({count:at.id}).from(at).where(vt(Ee(at.userId,e.id),Ia(at.deletedAt))),[i]=await nt.select({count:Ye.id}).from(Ye).where(vt(Ee(Ye.userId,e.id),Ia(Ye.deletedAt)));return t.json({documentsCount:r?.count||0,foldersCount:i?.count||0,timestamp:new Date().toISOString()})});var gz=ps;var Hf=new qn,fF=me.object({settings:me.record(me.string(),me.unknown())});Hf.get("/me",async t=>{let e=Ot(t);return t.json({user:{id:e.id,name:e.name,email:e.email,image:e.image}})});Hf.get("/settings",async t=>{let e=Ot(t),r=await nt.query.userSettings.findFirst({where:Ee(Ln.userId,e.id)});return t.json({settings:r?.settings||{}})});Hf.put("/settings",zn("json",fF),async t=>{let e=Ot(t),{settings:r}=t.req.valid("json"),i=await nt.query.userSettings.findFirst({where:Ee(Ln.userId,e.id)});if(i){let o={...i.settings,...r};return await nt.update(Ln).set({settings:o,updatedAt:new Date}).where(Ee(Ln.userId,e.id)),t.json({settings:o})}let n=crypto.randomUUID();return await nt.insert(Ln).values({id:n,userId:e.id,settings:r}),t.json({settings:r},201)});Hf.delete("/settings",async t=>{let e=Ot(t);return await nt.delete(Ln).where(Ee(Ln.userId,e.id)),t.json({success:!0,settings:{}})});var yz=Hf;var Dt=new qn;Dt.use("*",eO());Dt.use("*",Cb());Dt.use("*",G$({origin:["http://localhost:5173","http://localhost:3000","https://qazuor-markview.vercel.app",process.env.NEXT_PUBLIC_APP_URL||""].filter(Boolean),credentials:!0,allowHeaders:["Content-Type","Authorization","Cookie"],allowMethods:["GET","POST","PUT","DELETE","PATCH","OPTIONS"],exposeHeaders:["Set-Cookie"]}));Dt.use("*",async(t,e)=>{if(t.req.path.startsWith("/api/auth/"))return t.set("user",null),t.set("session",null),e();try{let r=await qu.api.getSession({headers:t.req.raw.headers});t.set("user",r?.user||null),t.set("session",r?.session||null)}catch{t.set("user",null),t.set("session",null)}await e()});Dt.onError((t,e)=>(console.error("API Error:",t),t instanceof vo?(t.status===401?b$.unauthorized(e,e.req.path):t.status===403&&b$.forbidden(e,e.req.path,t.message),e.json({error:t.message,status:t.status},t.status)):e.json({error:"Internal Server Error",message:void 0},500)));Dt.get("/api/health",t=>t.json({status:"ok",timestamp:new Date().toISOString(),env:"production",url:t.req.url,path:t.req.path}));Dt.get("/api/debug/db",async t=>{let e=Date.now();try{return await qu.api.getSession({headers:t.req.raw.headers}),t.json({status:"ok",dbTime:Date.now()-e,message:"Database connection successful"})}catch(r){return t.json({status:"error",dbTime:Date.now()-e,error:r instanceof Error?r.message:"Unknown error"},500)}});Dt.all("/api/debug/request",async t=>{let e=t.req.raw,r=[],i=Date.now();r.push({step:"1. Start",time:0});let n="";if(e.method==="POST")try{n=await t.req.text(),r.push({step:"2. Body read",time:Date.now()-i,value:n.substring(0,100)})}catch(o){r.push({step:"2. Body read FAILED",time:Date.now()-i,value:String(o)})}return r.push({step:"3. Done",time:Date.now()-i}),t.json({rawUrl:e.url,method:e.method,honoPath:t.req.path,honoUrl:t.req.url,body:n,steps:r,headers:Object.fromEntries([...e.headers.entries()].slice(0,10))})});Dt.get("/api/debug/auth-config",t=>t.json({baseURL:process.env.BETTER_AUTH_URL||"NOT SET",secret:process.env.BETTER_AUTH_SECRET?"SET":"NOT SET",github:{clientId:process.env.GITHUB_CLIENT_ID?"SET":"NOT SET",clientSecret:process.env.GITHUB_CLIENT_SECRET?"SET":"NOT SET"},google:{clientId:process.env.GOOGLE_CLIENT_ID?"SET":"NOT SET",clientSecret:process.env.GOOGLE_CLIENT_SECRET?"SET":"NOT SET"},trustedOrigins:["http://localhost:5173","http://localhost:3000","https://qazuor-markview.vercel.app",process.env.NEXT_PUBLIC_APP_URL||""].filter(Boolean)}));Dt.get("/api/auth/test",t=>t.json({status:"auth routes reachable",timestamp:new Date().toISOString()}));Dt.post("/api/debug/auth-flow",async t=>{let e=[],r=Date.now();try{e.push({step:"1. Start",time:0});let i=t.req.path;e.push({step:"2. Got path",time:Date.now()-r,value:i});let n=await t.req.text();e.push({step:"3. Read body",time:Date.now()-r,value:n.substring(0,100)});let s=`${process.env.BETTER_AUTH_URL||"http://localhost:5173"}/api/auth/sign-in/social`;e.push({step:"4. Built URL",time:Date.now()-r,value:s});let a=new Request(s,{method:"POST",headers:t.req.raw.headers,body:n});e.push({step:"5. Created Request",time:Date.now()-r});let c=await qu.handler(a);e.push({step:"6. Got response",time:Date.now()-r,value:`status: ${c.status}`});let u=await c.text();return e.push({step:"7. Read response",time:Date.now()-r,value:u.substring(0,200)}),t.json({success:!0,steps:e,totalTime:Date.now()-r})}catch(i){return e.push({step:"ERROR",time:Date.now()-r,value:i instanceof Error?i.message:"Unknown"}),t.json({success:!1,steps:e,totalTime:Date.now()-r},500)}});Dt.get("/api/debug/test-social-signin",async t=>{let e=[],r=Date.now();try{e.push({step:"1. Start",time:Date.now()-r});let i=JSON.stringify({provider:"github",callbackURL:"https://qazuor-markview.vercel.app/"});e.push({step:"2. Body created",time:Date.now()-r});let n=process.env.BETTER_AUTH_URL||"http://localhost:5173",o=new Request(`${n}/api/auth/sign-in/social`,{method:"POST",headers:{"Content-Type":"application/json",Host:new URL(n).host},body:i});e.push({step:"3. Request created",time:Date.now()-r});let s=new Promise((l,f)=>{setTimeout(()=>f(new Error("Auth handler timeout after 10s")),1e4)}),a=qu.handler(o);e.push({step:"4. Auth handler called",time:Date.now()-r});let c=await Promise.race([a,s]);e.push({step:"5. Response received",time:Date.now()-r});let u=await c.text();return e.push({step:"6. Response body read",time:Date.now()-r}),t.json({success:!0,status:c.status,responsePreview:u.substring(0,500),steps:e,totalTime:Date.now()-r})}catch(i){return e.push({step:"ERROR",time:Date.now()-r,error:i instanceof Error?i.message:"Unknown error"}),t.json({success:!1,steps:e,totalTime:Date.now()-r},500)}});Dt.on(["GET","POST"],"/api/auth/*",async t=>{let r=`${process.env.BETTER_AUTH_URL||"http://localhost:5173"}${t.req.path}`,i=t.req.raw,n=null;(i.method==="POST"||i.method==="PUT"||i.method==="PATCH")&&(n=await t.req.text());let o=new Request(r,{method:i.method,headers:i.headers,body:n});return qu.handler(o)});Dt.use("/api/sync/*",Ff("sync"));Dt.route("/api/sync",gz);Dt.use("/api/github/*",Ff("externalProxy"));Dt.route("/api/github",mz);Dt.use("/api/google/*",Ff("externalProxy"));Dt.route("/api/google",hz);Dt.use("/api/user/*",Ff("standard"));Dt.route("/api/user",yz);var wz=Dt;var oUe={runtime:"nodejs",maxDuration:30};async function pF(t,e){try{let r=t.headers["x-forwarded-proto"]||"https",i=t.headers["x-forwarded-host"]||t.headers.host||"localhost",n=new URL(t.url||"/",`${r}://${i}`),o=new Headers;for(let[u,l]of Object.entries(t.headers))if(l)if(Array.isArray(l))for(let f of l)o.append(u,f);else o.set(u,l);let s=null;t.method!=="GET"&&t.method!=="HEAD"&&t.body&&(typeof t.body=="object"?s=JSON.stringify(t.body):typeof t.body=="string"&&(s=t.body));let a=new Request(n.toString(),{method:t.method||"GET",headers:o,body:s}),c=await wz.fetch(a);if(c.headers.forEach((u,l)=>{e.setHeader(l,u)}),e.status(c.status),c.body){let u=await c.arrayBuffer();e.send(Buffer.from(u))}else e.end()}catch(r){console.error("Handler error:",r),e.status(500).json({error:"Internal Server Error",message:r instanceof Error?r.message:"Unknown error"})}}export{oUe as config,pF as default};
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
