var Cz=Object.defineProperty;var O=(t,e)=>()=>(t&&(e=t(t=0)),e);var ar=(t,e)=>{for(var r in e)Cz(t,r,{get:e[r],enumerable:!0})};function dC(t){switch(t){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw new Error(`Unsupported alphabet: ${t}`)}}function ja(...t){let e=t.map(dC).join("");if(e.length===0)throw new Error("No valid characters provided for random string generation.");let r=e.length;return(i,...n)=>{if(i<=0)throw new Error("Length must be a positive integer.");let o=e,s=r;n.length>0&&(o=n.map(dC).join(""),s=o.length);let a=Math.floor(256/s)*s,c=new Uint8Array(i*2),u=c.length,l="",f=u,d;for(;l.length<i;)f>=u&&(crypto.getRandomValues(c),f=0),d=c[f++],d<a&&(l+=o[d%s]);return l}}var cp=O(()=>{});function W6(t){return t?t!=="false":!1}function Je(t,e){return typeof process<"u"&&process.env?process.env[t]??e:typeof Deno<"u"?Deno.env.get(t)??e:typeof Bun<"u"?Bun.env[t]??e:e}function Bp(t,e=!0){let r=Je(t);return r?r!=="0"&&r.toLowerCase()!=="false"&&r!=="":e}function qp(){if(Je("FORCE_COLOR")!==void 0)switch(Je("FORCE_COLOR")){case"":case"1":case"true":return Xt;case"2":return Ai;case"3":return cn;default:return pl}if(Je("NODE_DISABLE_COLORS")!==void 0&&Je("NODE_DISABLE_COLORS")!==""||Je("NO_COLOR")!==void 0&&Je("NO_COLOR")!==""||Je("TERM")==="dumb")return pl;if(Je("TMUX"))return cn;if("TF_BUILD"in je&&"AGENT_NAME"in je)return Xt;if("CI"in je){for(let{0:t,1:e}of F6)if(t in je)return e;return Je("CI_NAME")==="codeship"?Ai:pl}if("TEAMCITY_VERSION"in je)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(Je("TEAMCITY_VERSION"))!==null?Xt:pl;switch(Je("TERM_PROGRAM")){case"iTerm.app":return!Je("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(Je("TERM_PROGRAM_VERSION"))!==null?Ai:cn;case"HyperTerm":case"MacTerm":return cn;case"Apple_Terminal":return Ai}if(Je("COLORTERM")==="truecolor"||Je("COLORTERM")==="24bit")return cn;if(Je("TERM")){if(/truecolor/.exec(Je("TERM"))!==null)return cn;if(/^xterm-256/.exec(Je("TERM"))!==null)return Ai;let t=Je("TERM").toLowerCase();if(aO[t])return aO[t];if(V6.some(e=>e.exec(t)!==null))return Xt}return Je("COLORTERM")?Xt:pl}function Xa(t,e){return Mp.indexOf(e)>=Mp.indexOf(t)}var jp,fl,je,ml,Co,Is,Zi,pv,pl,Xt,Ai,cn,aO,F6,V6,zt,Mp,K6,H6,Gi,ye,Yi=O(()=>{jp=Object.create(null),fl=t=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(t?jp:globalThis),je=new Proxy(jp,{get(t,e){return fl()[e]??jp[e]},has(t,e){return e in fl()||e in jp},set(t,e,r){let i=fl(!0);return i[e]=r,!0},deleteProperty(t,e){if(!e)return!1;let r=fl(!0);return delete r[e],!0},ownKeys(){let t=fl(!0);return Object.keys(t)}});ml=typeof process<"u"&&process.env&&"production"||"",Co=ml==="production",Is=()=>ml==="dev"||ml==="development",Zi=()=>ml==="test"||W6(je.TEST);pv=Object.freeze({get BETTER_AUTH_SECRET(){return Je("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return Je("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return Je("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return Je("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return Je("NODE_ENV","development")},get PACKAGE_VERSION(){return Je("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return Je("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),pl=1,Xt=4,Ai=8,cn=24,aO={eterm:Xt,cons25:Xt,console:Xt,cygwin:Xt,dtterm:Xt,gnome:Xt,hurd:Xt,jfbterm:Xt,konsole:Xt,kterm:Xt,mlterm:Xt,mosh:cn,putty:Xt,st:Xt,"rxvt-unicode-24bit":cn,terminator:cn,"xterm-kitty":cn},F6=new Map(Object.entries({APPVEYOR:Ai,BUILDKITE:Ai,CIRCLECI:cn,DRONE:Ai,GITEA_ACTIONS:cn,GITHUB_ACTIONS:cn,GITLAB_CI:Ai,TRAVIS:Ai})),V6=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];zt={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},Mp=["debug","info","success","warn","error"];K6={info:zt.fg.blue,success:zt.fg.green,warn:zt.fg.yellow,error:zt.fg.red,debug:zt.fg.magenta},H6=(t,e,r)=>{let i=new Date().toISOString();return r?`${zt.dim}${i}${zt.reset} ${K6[t]}${t.toUpperCase()}${zt.reset} ${zt.bright}[Better Auth]:${zt.reset} ${e}`:`${i} ${t.toUpperCase()} [Better Auth]: ${e}`},Gi=t=>{let e=t?.disabled!==!0,r=t?.level??"error",i=t?.disableColors!==void 0?!t.disableColors:qp()!==1,n=(o,s,a=[])=>{if(!e||!Xa(r,o))return;let c=H6(o,s,i);if(!t||typeof t.log!="function"){o==="error"?console.error(c,...a):o==="warn"?console.warn(c,...a):console.log(c,...a);return}t.log(o==="success"?"info":o,s,...a)};return{...Object.fromEntries(Mp.map(o=>[o,(...[s,...a])=>n(o,s,a)])),get level(){return r}}},ye=Gi()});function bt(t){function e(r,i){if(typeof i=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(i)){let n=new Date(i);if(!isNaN(n.getTime()))return n}return i}try{return typeof t!="string"?t:JSON.parse(t,e)}catch(r){return ye.error("Error parsing JSON",{error:r}),null}}var Nn,ec=O(()=>{Yi();cp();Nn=t=>ja("a-z","A-Z","0-9")(t||32)});var ge,de,Wp=O(()=>{ec();ge={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."},de=class extends Error{constructor(t,e){super(t),this.name="BetterAuthError",this.message=t,this.cause=e,this.stack=""}}});var dr=O(()=>{Yi()});var In,qA=O(()=>{In=t=>{let e=(t.plugins??[]).reduce((l,f)=>{let d=f.schema;if(!d)return l;for(let[m,h]of Object.entries(d))l[m]={fields:{...l[m]?.fields,...h.fields},modelName:h.modelName||m};return l},{}),r=t.rateLimit?.storage==="database",i={rateLimit:{modelName:t.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:t.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:t.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:t.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:n,session:o,account:s,verification:a,...c}=e,u={session:{modelName:t.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:t.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:t.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:t.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:t.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:t.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:t.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:t.session?.fields?.userId||"userId",references:{model:t.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...o?.fields,...t.session?.additionalFields},order:2}};return{user:{modelName:t.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:t.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:t.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:t.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:t.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:t.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:t.user?.fields?.updatedAt||"updatedAt"},...n?.fields,...t.user?.additionalFields},order:1},...!t.secondaryStorage||t.session?.storeSessionInDatabase?u:{},account:{modelName:t.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:t.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:t.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:t.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:t.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,fieldName:t.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:t.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:t.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:t.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:t.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:t.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:t.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:t.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:t.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...s?.fields,...t.account?.additionalFields},order:3},verification:{modelName:t.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:t.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:t.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:t.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:t.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:t.verification?.fields?.updatedAt||"updatedAt"},...a?.fields,...t.verification?.additionalFields},order:4},...c,...r?i:{}}}});function CB(t,e,r){return r==="update"?t===void 0&&e.onUpdate!==void 0?typeof e.onUpdate=="function"?e.onUpdate():e.onUpdate:t:r==="create"&&(t===void 0||e.required===!0&&t===null)&&e.defaultValue!==void 0?typeof e.defaultValue=="function"?e.defaultValue():e.defaultValue:t}function Et(t){return qp()<8?`#${t}`:`${zt.fg.magenta}#${t}${zt.reset}`}function _t(t,e){return`${zt.bg.black}${zt.fg.yellow}[${t}/${e}]${zt.reset}`}function kt(t){return`${zt.bright}${t}${zt.reset}`}function Kt(t){return`${zt.dim}(${t})${zt.reset}`}var Tc,FA,UP,$B,VA,KA,rg,Nr,OB,Jo,Id=O(()=>{qA();Yi();ec();Wp();Tc=({usePlural:t,schema:e})=>i=>{if(t&&i.charAt(i.length-1)==="s"){let o=i.slice(0,-1),s=e[o]?o:void 0;if(s||(s=Object.entries(e).find(([a,c])=>c.modelName===o)?.[0]),s)return s}let n=e[i]?i:void 0;if(n||(n=Object.entries(e).find(([o,s])=>s.modelName===i)?.[0]),!n)throw new de(`Model "${i}" not found in schema`);return n},FA=({schema:t,usePlural:e})=>{let r=Tc({schema:t,usePlural:e});return({field:n,model:o})=>{if(n==="id"||n==="_id")return"id";let s=r(o),a=t[s]?.fields[n];if(!a){let c=Object.entries(t[s].fields).find(([u,l])=>l.fieldName===n);c&&(a=c[1],n=c[0])}if(!a)throw new de(`Field ${n} not found in model ${s}`);return n}},UP=({usePlural:t,schema:e,disableIdGeneration:r,options:i,customIdGenerator:n,supportsUUIDs:o})=>{let s=Tc({usePlural:t,schema:e});return({customModelName:c,forceAllowId:u})=>{let l=i.advanced?.database?.useNumberId||i.advanced?.database?.generateId==="serial",f=i.advanced?.database?.generateId==="uuid",d=r||l&&!u?!1:f?!o:!0,m=s(c??"id");return{type:l?"number":"string",required:!!d,...d?{defaultValue(){if(r)return;let h=i.advanced?.database?.generateId;if(!(h===!1||l))return typeof h=="function"?h({model:m}):n?n({model:m}):h==="uuid"?crypto.randomUUID():Nn()}}:{},transform:{input:h=>{if(h){if(l){let p=Number(h);return isNaN(p)?void 0:p}if(f){if(d&&!u)return h;if(r||o)return;if(u&&typeof h=="string"){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h))return h;{let p=new Error().stack?.split(`
`).filter((y,b)=>b!==1).join(`
`).replace("Error:","");ye.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",p)}}return typeof h!="string"&&!o?crypto.randomUUID():void 0}return h}},output:h=>{if(h)return String(h)}}}}},$B=({usePlural:t,schema:e,options:r,customIdGenerator:i,disableIdGeneration:n})=>{let o=Tc({usePlural:t,schema:e}),s=FA({usePlural:t,schema:e}),a=UP({usePlural:t,schema:e,options:r,customIdGenerator:i,disableIdGeneration:n});return({model:u,field:l})=>{let f=o(u),d=s({field:l,model:f}),m=e[f].fields;m.id=a({customModelName:f});let h=m[d];if(!h)throw new de(`Field ${l} not found in model ${u}`);return h}},VA=({schema:t,usePlural:e})=>{let r=Tc({schema:t,usePlural:e}),i=FA({schema:t,usePlural:e});function n({model:o,field:s}){let a=r(o),c=i({model:a,field:s});return t[a]?.fields[c]?.fieldName||c}return n},KA=({usePlural:t,schema:e})=>{let r=Tc({schema:e,usePlural:t});return n=>{let o=r(n);return e&&e[o]&&e[o].modelName!==n?t?`${e[o].modelName}s`:e[o].modelName:t?`${n}s`:n}};rg=[],Nr=-1,OB=t=>e=>e(t),Jo=({adapter:t,config:e})=>r=>{let i=Math.random().toString(36).substring(2,15),n={...e,supportsBooleans:e.supportsBooleans??!0,supportsDates:e.supportsDates??!0,supportsJSON:e.supportsJSON??!1,adapterName:e.adapterName??e.adapterId,supportsNumericIds:e.supportsNumericIds??!0,supportsUUIDs:e.supportsUUIDs??!1,supportsArrays:e.supportsArrays??!1,transaction:e.transaction??!1,disableTransformInput:e.disableTransformInput??!1,disableTransformOutput:e.disableTransformOutput??!1,disableTransformJoin:e.disableTransformJoin??!1};if((r.advanced?.database?.useNumberId===!0||r.advanced?.database?.generateId==="serial")&&n.supportsNumericIds===!1)throw new de(`[${n.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let o=In(r),s=(...v)=>{if(n.debugLogs===!0||typeof n.debugLogs=="object"){let S=Gi({level:"info"});if(typeof n.debugLogs=="object"&&"isRunningAdapterTests"in n.debugLogs){n.debugLogs.isRunningAdapterTests&&(v.shift(),rg.push({instance:i,args:v}));return}if(typeof n.debugLogs=="object"&&n.debugLogs.logCondition&&!n.debugLogs.logCondition?.())return;if(typeof v[0]=="object"&&"method"in v[0]){let _=v.shift().method;if(typeof n.debugLogs=="object"){if(_==="create"&&!n.debugLogs.create)return;if(_==="update"&&!n.debugLogs.update)return;if(_==="updateMany"&&!n.debugLogs.updateMany)return;if(_==="findOne"&&!n.debugLogs.findOne)return;if(_==="findMany"&&!n.debugLogs.findMany)return;if(_==="delete"&&!n.debugLogs.delete)return;if(_==="deleteMany"&&!n.debugLogs.deleteMany)return;if(_==="count"&&!n.debugLogs.count)return}S.info(`[${n.adapterName}]`,...v)}else S.info(`[${n.adapterName}]`,...v)}},a=Gi(r.logger),c=Tc({usePlural:n.usePlural,schema:o}),u=FA({usePlural:n.usePlural,schema:o}),l=KA({usePlural:n.usePlural,schema:o}),f=VA({schema:o,usePlural:n.usePlural}),d=UP({schema:o,options:r,usePlural:n.usePlural,disableIdGeneration:n.disableIdGeneration,customIdGenerator:n.customIdGenerator,supportsUUIDs:n.supportsUUIDs}),m=$B({schema:o,options:r,usePlural:n.usePlural,disableIdGeneration:n.disableIdGeneration,customIdGenerator:n.customIdGenerator}),h=async(v,S,_,E)=>{let C={},R=o[S].fields,M=n.mapKeysTransformInput??{},D=r.advanced?.database?.useNumberId||r.advanced?.database?.generateId==="serial";R.id=d({customModelName:S,forceAllowId:E&&"id"in v});for(let P in R){let z=v[P],W=R[P],Q=M[P]||R[P].fieldName||P;if(z===void 0&&(W.defaultValue===void 0&&!W.transform?.input&&!(_==="update"&&W.onUpdate)||_==="update"&&!W.onUpdate))continue;if(W&&W.type==="date"&&!(z instanceof Date)&&typeof z=="string")try{z=new Date(z)}catch{a.error("[Adapter Factory] Failed to convert string to date",{value:z,field:P})}let G=CB(z,W,_);W.transform?.input&&(G=await W.transform.input(G)),W.references?.field==="id"&&D?Array.isArray(G)?G=G.map(J=>J!==null?Number(J):null):G=G!==null?Number(G):null:n.supportsJSON===!1&&typeof G=="object"&&W.type==="json"||n.supportsArrays===!1&&Array.isArray(G)&&(W.type==="string[]"||W.type==="number[]")?G=JSON.stringify(G):n.supportsDates===!1&&G instanceof Date&&W.type==="date"?G=G.toISOString():n.supportsBooleans===!1&&typeof G=="boolean"&&(G=G?1:0),n.customTransformInput&&(G=n.customTransformInput({data:G,action:_,field:Q,fieldAttributes:W,model:l(S),schema:o,options:r})),G!==void 0&&(C[Q]=G)}return C},p=async(v,S,_=[],E)=>{let C=async(D,P,z=[])=>{if(!D)return null;let W=n.mapKeysTransformOutput??{},Q={},G=o[c(P)].fields,J=Object.entries(W).find(([le,se])=>se==="id")?.[0];G[J??"id"]={type:r.advanced?.database?.useNumberId||r.advanced?.database?.generateId==="serial"?"number":"string"};for(let le in G){if(z.length&&!z.includes(le))continue;let se=G[le];if(se){let be=se.fieldName||le,Re=D[Object.entries(W).find(([Bn,xn])=>xn===be)?.[0]||be];se.transform?.output&&(Re=await se.transform.output(Re));let Lt=W[le]||le;be==="id"||se.references?.field==="id"?typeof Re<"u"&&Re!==null&&(Re=String(Re)):n.supportsJSON===!1&&typeof Re=="string"&&se.type==="json"?Re=bt(Re):n.supportsArrays===!1&&typeof Re=="string"&&(se.type==="string[]"||se.type==="number[]")?Re=bt(Re):n.supportsDates===!1&&typeof Re=="string"&&se.type==="date"?Re=new Date(Re):n.supportsBooleans===!1&&typeof Re=="number"&&se.type==="boolean"&&(Re=Re===1),n.customTransformOutput&&(Re=n.customTransformOutput({data:Re,field:Lt,fieldAttributes:se,select:z,model:l(P),schema:o,options:r})),Q[Lt]=Re}}return Q};if(!E||Object.keys(E).length===0)return await C(v,S,_);S=c(S);let R=await C(v,S,_),M=Object.entries(E).map(([D,P])=>({modelName:l(D),defaultModelName:c(D),joinConfig:P}));if(!v)return null;for(let{modelName:D,defaultModelName:P,joinConfig:z}of M){let W=await(async()=>r.experimental?.joins?v[D]:await N({baseModel:S,baseData:R,joinModel:D,specificJoinConfig:z}))();W==null&&(W=z.relation==="one-to-one"?null:[]),z.relation==="one-to-many"&&!Array.isArray(W)&&(W=[W]);let Q=[];if(Array.isArray(W))for(let G of W){let J=await C(G,D,[]);Q.push(J)}else{let G=await C(W,D,[]);Q.push(G)}R[P]=(z.relation==="one-to-one"?Q[0]:Q)??null}return R},y=({model:v,where:S,action:_})=>{if(!S)return;let E=n.mapKeysTransformInput??{};return S.map(C=>{let{field:R,value:M,operator:D="eq",connector:P="AND"}=C;if(D==="in"&&!Array.isArray(M))throw new de("Value must be an array");let z=M,W=c(v),Q=u({field:R,model:v}),G=E[Q]||f({field:Q,model:W}),J=m({field:Q,model:W}),le=r.advanced?.database?.useNumberId||r.advanced?.database?.generateId==="serial";if((Q==="id"||J.references?.field==="id")&&le&&(Array.isArray(M)?z=M.map(Number):z=Number(M)),J.type==="date"&&M instanceof Date&&!n.supportsDates&&(z=M.toISOString()),J.type==="boolean"&&typeof M=="boolean"&&!n.supportsBooleans&&(z=M?1:0),J.type==="json"&&typeof M=="object"&&!n.supportsJSON)try{z=JSON.stringify(M)}catch(se){throw new Error(`Failed to stringify JSON value for field ${G}`,{cause:se})}return n.customTransformInput&&(z=n.customTransformInput({data:z,fieldAttributes:J,field:G,model:l(v),schema:o,options:r,action:_})),{operator:D,connector:P,field:G,value:z}})},b=(v,S,_)=>{if(!S||Object.keys(S).length===0)return;let E={};for(let[C,R]of Object.entries(S)){if(!R)continue;let M=c(C),D=c(v),P=Object.entries(o[M].fields).filter(([Re,Lt])=>Lt.references&&c(Lt.references.model)===D),z=!0;if(P.length||(P=Object.entries(o[D].fields).filter(([Re,Lt])=>Lt.references&&c(Lt.references.model)===M),z=!1),P.length){if(P.length>1)throw new de(`Multiple foreign keys found for model ${C} and base model ${v} while performing join operation. Only one foreign key is supported.`)}else throw new de(`No foreign key found for model ${C} and base model ${v} while performing join operation.`);let[W,Q]=P[0];if(!Q.references)throw new de(`No references found for foreign key ${W} on model ${C} while performing join operation.`);let G,J,le;z?(le=Q.references.field,G=f({model:v,field:le}),J=f({model:C,field:W})):(le=W,G=f({model:v,field:le}),J=f({model:C,field:Q.references.field})),_&&!_.includes(le)&&_.push(le);let se=J==="id"?!0:Q.unique??!1,be=r.advanced?.database?.defaultFindManyLimit??100;se?be=1:typeof R=="object"&&typeof R.limit=="number"&&(be=R.limit),E[l(C)]={on:{from:G,to:J},limit:be,relation:se?"one-to-one":"one-to-many"}}return{join:E,select:_}},N=async({baseModel:v,baseData:S,joinModel:_,specificJoinConfig:E})=>{if(!S)return S;let C=l(_),R=E.on.to,M=S[u({field:E.on.from,model:v})];if(M==null)return E.relation==="one-to-one"?null:[];let D,P=y({model:C,where:[{field:R,value:M,operator:"eq",connector:"AND"}],action:"findOne"});try{if(E.relation==="one-to-one")D=await T.findOne({model:C,where:P});else{let z=E.limit??r.advanced?.database?.defaultFindManyLimit??100;D=await T.findMany({model:C,where:P,limit:z})}}catch(z){throw a.error(`Failed to query fallback join for model ${C}:`,{where:P,limit:E.limit}),console.error(z),z}return D},T=t({options:r,schema:o,debugLog:s,getFieldName:f,getModelName:l,getDefaultModelName:c,getDefaultFieldName:u,getFieldAttributes:m,transformInput:h,transformOutput:p,transformWhereClause:y}),I=null,$={transaction:async v=>(I||(n.transaction?(a.debug(`[${n.adapterName}] - Using provided transaction implementation.`),I=n.transaction):I=OB($)),I(v)),create:async({data:v,model:S,select:_,forceAllowId:E=!1})=>{Nr++;let C=Nr,R=l(S);if(S=c(S),"id"in v&&typeof v.id<"u"&&!E){a.warn(`[${n.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let z=new Error().stack?.split(`
`).filter((W,Q)=>Q!==1).join(`
`).replace("Error:","Create method with `id` being called at:");console.log(z),v.id=void 0}s({method:"create"},`${Et(C)} ${_t(1,4)}`,`${kt("create")} ${Kt("Unsafe Input")}:`,{model:R,data:v});let M=v;n.disableTransformInput||(M=await h(v,S,"create",E)),s({method:"create"},`${Et(C)} ${_t(2,4)}`,`${kt("create")} ${Kt("Parsed Input")}:`,{model:R,data:M});let D=await T.create({data:M,model:R});s({method:"create"},`${Et(C)} ${_t(3,4)}`,`${kt("create")} ${Kt("DB Result")}:`,{model:R,res:D});let P=D;return n.disableTransformOutput||(P=await p(D,S,_,void 0)),s({method:"create"},`${Et(C)} ${_t(4,4)}`,`${kt("create")} ${Kt("Parsed Result")}:`,{model:R,data:P}),P},update:async({model:v,where:S,update:_})=>{Nr++;let E=Nr;v=c(v);let C=l(v),R=y({model:v,where:S,action:"update"});s({method:"update"},`${Et(E)} ${_t(1,4)}`,`${kt("update")} ${Kt("Unsafe Input")}:`,{model:C,data:_});let M=_;n.disableTransformInput||(M=await h(_,v,"update")),s({method:"update"},`${Et(E)} ${_t(2,4)}`,`${kt("update")} ${Kt("Parsed Input")}:`,{model:C,data:M});let D=await T.update({model:C,where:R,update:M});s({method:"update"},`${Et(E)} ${_t(3,4)}`,`${kt("update")} ${Kt("DB Result")}:`,{model:C,data:D});let P=D;return n.disableTransformOutput||(P=await p(D,v,void 0,void 0)),s({method:"update"},`${Et(E)} ${_t(4,4)}`,`${kt("update")} ${Kt("Parsed Result")}:`,{model:C,data:P}),P},updateMany:async({model:v,where:S,update:_})=>{Nr++;let E=Nr,C=l(v),R=y({model:v,where:S,action:"updateMany"});v=c(v),s({method:"updateMany"},`${Et(E)} ${_t(1,4)}`,`${kt("updateMany")} ${Kt("Unsafe Input")}:`,{model:C,data:_});let M=_;n.disableTransformInput||(M=await h(_,v,"update")),s({method:"updateMany"},`${Et(E)} ${_t(2,4)}`,`${kt("updateMany")} ${Kt("Parsed Input")}:`,{model:C,data:M});let D=await T.updateMany({model:C,where:R,update:M});return s({method:"updateMany"},`${Et(E)} ${_t(3,4)}`,`${kt("updateMany")} ${Kt("DB Result")}:`,{model:C,data:D}),s({method:"updateMany"},`${Et(E)} ${_t(4,4)}`,`${kt("updateMany")} ${Kt("Parsed Result")}:`,{model:C,data:D}),D},findOne:async({model:v,where:S,select:_,join:E})=>{Nr++;let C=Nr,R=l(v),M=y({model:v,where:S,action:"findOne"});v=c(v);let D,P=!0;if(n.disableTransformJoin)D=E;else{let Q=b(v,E,_);Q&&(D=Q.join,_=Q.select),!r.experimental?.joins&&D&&Object.keys(D).length>0&&(P=!1)}s({method:"findOne"},`${Et(C)} ${_t(1,3)}`,`${kt("findOne")}:`,{model:R,where:M,select:_,join:D});let z=await T.findOne({model:R,where:M,select:_,join:P?D:void 0});s({method:"findOne"},`${Et(C)} ${_t(2,3)}`,`${kt("findOne")} ${Kt("DB Result")}:`,{model:R,data:z});let W=z;return n.disableTransformOutput||(W=await p(z,v,_,D)),s({method:"findOne"},`${Et(C)} ${_t(3,3)}`,`${kt("findOne")} ${Kt("Parsed Result")}:`,{model:R,data:W}),W},findMany:async({model:v,where:S,limit:_,sortBy:E,offset:C,join:R})=>{Nr++;let M=Nr,D=_??r.advanced?.database?.defaultFindManyLimit??100,P=l(v),z=y({model:v,where:S,action:"findMany"});v=c(v);let W,Q=!0;if(n.disableTransformJoin)W=R;else{let le=b(v,R,void 0);le&&(W=le.join),!r.experimental?.joins&&W&&Object.keys(W).length>0&&(Q=!1)}s({method:"findMany"},`${Et(M)} ${_t(1,3)}`,`${kt("findMany")}:`,{model:P,where:z,limit:D,sortBy:E,offset:C,join:W});let G=await T.findMany({model:P,where:z,limit:D,sortBy:E,offset:C,join:Q?W:void 0});s({method:"findMany"},`${Et(M)} ${_t(2,3)}`,`${kt("findMany")} ${Kt("DB Result")}:`,{model:P,data:G});let J=G;return n.disableTransformOutput||(J=await Promise.all(G.map(async le=>await p(le,v,void 0,W)))),s({method:"findMany"},`${Et(M)} ${_t(3,3)}`,`${kt("findMany")} ${Kt("Parsed Result")}:`,{model:P,data:J}),J},delete:async({model:v,where:S})=>{Nr++;let _=Nr,E=l(v),C=y({model:v,where:S,action:"delete"});v=c(v),s({method:"delete"},`${Et(_)} ${_t(1,2)}`,`${kt("delete")}:`,{model:E,where:C}),await T.delete({model:E,where:C}),s({method:"delete"},`${Et(_)} ${_t(2,2)}`,`${kt("delete")} ${Kt("DB Result")}:`,{model:E})},deleteMany:async({model:v,where:S})=>{Nr++;let _=Nr,E=l(v),C=y({model:v,where:S,action:"deleteMany"});v=c(v),s({method:"deleteMany"},`${Et(_)} ${_t(1,2)}`,`${kt("deleteMany")} ${Kt("DeleteMany")}:`,{model:E,where:C});let R=await T.deleteMany({model:E,where:C});return s({method:"deleteMany"},`${Et(_)} ${_t(2,2)}`,`${kt("deleteMany")} ${Kt("DB Result")}:`,{model:E,data:R}),R},count:async({model:v,where:S})=>{Nr++;let _=Nr,E=l(v),C=y({model:v,where:S,action:"count"});v=c(v),s({method:"count"},`${Et(_)} ${_t(1,2)}`,`${kt("count")}:`,{model:E,where:C});let R=await T.count({model:E,where:C});return s({method:"count"},`${Et(_)} ${_t(2,2)}`,`${kt("count")}:`,{model:E,data:R}),R},createSchema:T.createSchema?async(v,S)=>{let _=In(r);return r.secondaryStorage&&!r.session?.storeSessionInDatabase&&delete _.session,r.rateLimit&&r.rateLimit.storage==="database"&&(typeof r.rateLimit.enabled>"u"||r.rateLimit.enabled===!0)&&(_.ratelimit={modelName:r.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:r.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:r.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:r.rateLimit.fields?.lastRequest??"lastRequest"}}}),T.createSchema({file:S,tables:_})}:void 0,options:{adapterConfig:n,...T.options??{}},id:n.adapterId,...n.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){rg=rg.filter(v=>v.instance!==i)},printDebugLogs(){let v="\u2500".repeat(80),S=rg.filter(E=>E.instance===i);if(S.length===0)return;let _=S.reverse().map(E=>(E.args[0]=`
${E.args[0]}`,[...E.args,`
`])).reduce((E,C)=>[...C,...E],[`
${v}`]);console.log(..._)}}}:{}};return $}});var DP,LP=O(()=>{dr();Id();DP=(t,e)=>{let r=null,i=Jo({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:e?.debugLogs||!1,customTransformInput(n){return(n.options.advanced?.database?.useNumberId||n.options.advanced?.database?.generateId==="serial")&&n.field==="id"&&n.action==="create"?t[n.model].length+1:n.data},transaction:async n=>{let o=structuredClone(t);try{return await n(i(r))}catch(s){throw Object.keys(t).forEach(a=>{t[a]=o[a]}),s}}},adapter:({getFieldName:n,options:o,getModelName:s})=>{let a=(u,l,f)=>l?u.sort((d,m)=>{let h=n({model:f,field:l.field}),p=d[h],y=m[h],b=0;return p==null&&y==null?b=0:p==null?b=-1:y==null?b=1:typeof p=="string"&&typeof y=="string"?b=p.localeCompare(y):p instanceof Date&&y instanceof Date?b=p.getTime()-y.getTime():typeof p=="number"&&typeof y=="number"?b=p-y:typeof p=="boolean"&&typeof y=="boolean"?b=p===y?0:p?1:-1:b=String(p).localeCompare(String(y)),l.direction==="asc"?b:-b}):u;function c(u,l,f){let d=(y,b)=>{let N=t[b];if(!N)throw ye.error(`[MemoryAdapter] Model ${b} not found in the DB`,Object.keys(t)),new Error(`Model ${b} not found`);let T=(I,$)=>{let{field:v,value:S,operator:_}=$;switch(_){case"in":if(!Array.isArray(S))throw new Error("Value must be an array");return S.includes(I[v]);case"not_in":if(!Array.isArray(S))throw new Error("Value must be an array");return!S.includes(I[v]);case"contains":return I[v].includes(S);case"starts_with":return I[v].startsWith(S);case"ends_with":return I[v].endsWith(S);case"ne":return I[v]!==S;case"gt":return S!=null&&I[v]>S;case"gte":return S!=null&&I[v]>=S;case"lt":return S!=null&&I[v]<S;case"lte":return S!=null&&I[v]<=S;default:return I[v]===S}};return N.filter(I=>{if(!y.length||y.length===0)return!0;let $=T(I,y[0]);for(let v of y){let S=T(I,v);v.connector==="OR"?$=$||S:$=$&&S}return $})};if(!f)return d(u,l);let m=d(u,l),h=new Map,p=new Map;for(let y of m){let b=String(y.id);if(!h.has(b)){let T={...y};for(let[I,$]of Object.entries(f)){let v=s(I);$.relation==="one-to-one"?T[v]=null:(T[v]=[],p.set(`${b}-${I}`,new Set))}h.set(b,T)}let N=h.get(b);for(let[T,I]of Object.entries(f)){let $=s(T),v=t[$];if(!v)throw ye.error(`[MemoryAdapter] JoinOption model ${$} not found in the DB`,Object.keys(t)),new Error(`JoinOption model ${$} not found`);let S=v.filter(_=>_[I.on.to]===y[I.on.from]);if(I.relation==="one-to-one")N[$]=S[0]||null;else{let _=p.get(`${b}-${T}`),E=I.limit??100,C=0;for(let R of S){if(C>=E)break;_.has(R.id)||(N[$].push(R),_.add(R.id),C++)}}}}return Array.from(h.values())}return{create:async({model:u,data:l})=>((o.advanced?.database?.useNumberId||o.advanced?.database?.generateId==="serial")&&(l.id=t[s(u)].length+1),t[u]||(t[u]=[]),t[u].push(l),l),findOne:async({model:u,where:l,join:f})=>{let d=c(l,u,f);if(f){let m=d;return m.length?m[0]:null}return d[0]||null},findMany:async({model:u,where:l,sortBy:f,limit:d,offset:m,join:h})=>{let p=c(l||[],u,h);if(h){let b=p;if(!b.length)return[];a(b,f,u);let N=b;return m!==void 0&&(N=N.slice(m)),d!==void 0&&(N=N.slice(0,d)),N}let y=a(p,f,u);return m!==void 0&&(y=y.slice(m)),d!==void 0&&(y=y.slice(0,d)),y||[]},count:async({model:u,where:l})=>l?c(l,u).length:t[u].length,update:async({model:u,where:l,update:f})=>{let d=c(l,u);return d.forEach(m=>{Object.assign(m,f)}),d[0]||null},delete:async({model:u,where:l})=>{let f=t[u],d=c(l,u);t[u]=f.filter(m=>!d.includes(m))},deleteMany:async({model:u,where:l})=>{let f=t[u],d=c(l,u),m=0;return t[u]=f.filter(h=>d.includes(h)?(m++,!1):!d.includes(h)),m},updateMany({model:u,where:l,update:f}){let d=c(l,u);return d.forEach(m=>{Object.assign(m,f)}),d[0]||null}}}});return n=>(r=n,i(n))}});var zP={};ar(zP,{memoryAdapter:()=>DP});var jP=O(()=>{LP()});function Ur(t){return typeof t>"u"||t===void 0}function Ze(t){return typeof t=="string"}function ei(t){return typeof t=="number"}function so(t){return typeof t=="boolean"}function Qo(t){return t===null}function ig(t){return t instanceof Date}function Zo(t){return typeof t=="bigint"}function MP(t){return typeof Buffer<"u"&&Buffer.isBuffer(t)}function Ge(t){return typeof t=="function"}function Rt(t){return typeof t=="object"&&t!==null}function w(t){return Object.freeze(t)}function $d(t){return Ar(t)?t:[t]}function Ar(t){return Array.isArray(t)}function Dr(t){return t}var q=O(()=>{});var Me,ia=O(()=>{q();Me=w({is(t){return t.kind==="AlterTableNode"},create(t){return w({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return w({...t,...e})},cloneWithColumnAlteration(t,e){return w({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}})});var we,ot=O(()=>{q();we=w({is(t){return t.kind==="IdentifierNode"},create(t){return w({kind:"IdentifierNode",name:t})}})});var ti,og=O(()=>{q();ot();ti=w({is(t){return t.kind==="CreateIndexNode"},create(t){return w({kind:"CreateIndexNode",name:we.create(t)})},cloneWith(t,e){return w({...t,...e})},cloneWithColumns(t,e){return w({...t,columns:[...t.columns||[],...e]})}})});var sg,ag=O(()=>{q();ot();sg=w({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return w({kind:"CreateSchemaNode",schema:we.create(t),...e})},cloneWith(t,e){return w({...t,...e})}})});var BP,Er,Ic=O(()=>{q();BP=["preserve rows","delete rows","drop"],Er=w({is(t){return t.kind==="CreateTableNode"},create(t){return w({kind:"CreateTableNode",table:t,columns:w([])})},cloneWithColumn(t,e){return w({...t,columns:w([...t.columns,e])})},cloneWithConstraint(t,e){return w({...t,constraints:t.constraints?w([...t.constraints,e]):w([e])})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):w([e])})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):w([e])})},cloneWith(t,e){return w({...t,...e})}})});var _r,ao=O(()=>{q();ot();_r=w({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return w({kind:"SchemableIdentifierNode",identifier:we.create(t)})},createWithSchema(t,e){return w({kind:"SchemableIdentifierNode",schema:we.create(t),identifier:we.create(e)})}})});var Go,Cd=O(()=>{q();ao();Go=w({is(t){return t.kind==="DropIndexNode"},create(t,e){return w({kind:"DropIndexNode",name:_r.create(t),...e})},cloneWith(t,e){return w({...t,...e})}})});var Od,cg=O(()=>{q();ot();Od=w({is(t){return t.kind==="DropSchemaNode"},create(t,e){return w({kind:"DropSchemaNode",schema:we.create(t),...e})},cloneWith(t,e){return w({...t,...e})}})});var Pd,ug=O(()=>{q();Pd=w({is(t){return t.kind==="DropTableNode"},create(t,e){return w({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return w({...t,...e})}})});var tr,ri=O(()=>{q();tr=w({is(t){return t.kind==="AliasNode"},create(t,e){return w({kind:"AliasNode",node:t,alias:e})}})});var Vr,$c=O(()=>{q();ao();Vr=w({is(t){return t.kind==="TableNode"},create(t){return w({kind:"TableNode",table:_r.create(t)})},createWithSchema(t,e){return w({kind:"TableNode",table:_r.createWithSchema(t,e)})}})});function ft(t){return Rt(t)&&Ge(t.toOperationNode)}var Kr=O(()=>{q()});function lg(t){return Rt(t)&&"expressionType"in t&&ft(t)}function qP(t){return Rt(t)&&"expression"in t&&Ze(t.alias)&&ft(t)}var dg=O(()=>{Kr();q()});var $i,HA=O(()=>{q();$i=w({is(t){return t.kind==="SelectModifierNode"},create(t,e){return w({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return w({kind:"SelectModifierNode",rawModifier:t})}})});var Hr,Yo=O(()=>{q();Hr=w({is(t){return t.kind==="AndNode"},create(t,e){return w({kind:"AndNode",left:t,right:e})}})});var ni,oa=O(()=>{q();ni=w({is(t){return t.kind==="OrNode"},create(t,e){return w({kind:"OrNode",left:t,right:e})}})});var fg,JA=O(()=>{q();Yo();oa();fg=w({is(t){return t.kind==="OnNode"},create(t){return w({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return w({...t,on:e==="And"?Hr.create(t.on,r):ni.create(t.on,r)})}})});var ii,Cc=O(()=>{q();JA();ii=w({is(t){return t.kind==="JoinNode"},create(t,e){return w({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return w({kind:"JoinNode",joinType:t,table:e,on:fg.create(r)})},cloneWithOn(t,e){return w({...t,on:t.on?fg.cloneWithOperation(t.on,"And",e):fg.create(e)})}})});var Xo,pg=O(()=>{q();Xo=w({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return w({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}})});function QA(t){return Ze(t)&&WP.includes(t)}var PB,RB,WP,UB,DB,LB,FP,pn,sa=O(()=>{q();PB=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],RB=["+","-","*","/","%","^","&","|","#","<<",">>"],WP=["->","->>"],UB=[...PB,...RB,"&&","||"],DB=["exists","not exists"],LB=["not","-",...DB],FP=[...UB,...WP,...LB,"between","between symmetric"],pn=w({is(t){return t.kind==="OperatorNode"},create(t){return w({kind:"OperatorNode",operator:t})}})});var ze,kr=O(()=>{q();ot();ze=w({is(t){return t.kind==="ColumnNode"},create(t){return w({kind:"ColumnNode",column:we.create(t)})}})});var Oc,Rd=O(()=>{q();Oc=w({is(t){return t.kind==="SelectAllNode"},create(){return w({kind:"SelectAllNode"})}})});var Pc,mg=O(()=>{Rd();q();Pc=w({is(t){return t.kind==="ReferenceNode"},create(t,e){return w({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return w({kind:"ReferenceNode",table:t,column:Oc.create()})}})});function gg(t){return Rt(t)&&ft(t)&&Ze(t.dynamicReference)}var hg,Ud=O(()=>{Kr();fr();q();hg=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return ZA(this.#e)}}});var oi,yg=O(()=>{q();oi=w({is(t){return t.kind==="OrderByItemNode"},create(t,e){return w({kind:"OrderByItemNode",orderBy:t,direction:e})},cloneWith(t,e){return w({...t,...e})}})});var Be,$n=O(()=>{q();Be=w({is(t){return t.kind==="RawNode"},create(t,e){return w({kind:"RawNode",sqlFragments:w(t),parameters:w(e)})},createWithSql(t){return Be.create([t],[])},createWithChild(t){return Be.create(["",""],[t])},createWithChildren(t){return Be.create(new Array(t.length+1).fill(""),t)}})});var VP,GA=O(()=>{q();ot();VP=w({is(t){return t.kind==="CollateNode"},create(t){return w({kind:"CollateNode",collation:we.create(t)})}})});var wg,YA=O(()=>{GA();yg();$n();q();wg=class t{#e;constructor(e){this.#e=w(e)}desc(){return new t({node:oi.cloneWith(this.#e.node,{direction:Be.createWithSql("desc")})})}asc(){return new t({node:oi.cloneWith(this.#e.node,{direction:Be.createWithSql("asc")})})}nullsLast(){return new t({node:oi.cloneWith(this.#e.node,{nulls:"last"})})}nullsFirst(){return new t({node:oi.cloneWith(this.#e.node,{nulls:"first"})})}collate(e){return new t({node:oi.cloneWith(this.#e.node,{collation:VP.create(e)})})}toOperationNode(){return this.#e.node}}});function Ci(t){KP.has(t)||(KP.add(t),console.log(t))}var KP,Dd=O(()=>{KP=new Set});function eE(t){return t==="asc"||t==="desc"}function hn(t){if(t.length===2)return[XA(t[0],t[1])];if(t.length===1){let[e]=t;return Array.isArray(e)?(Ci("orderBy(array) is deprecated, use multiple orderBy calls instead."),e.map(r=>XA(r))):[XA(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function XA(t,e){let r=zB(t);if(oi.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return HP(r,e)}function zB(t){if(co(t))return Jr(t);if(gg(t))return t.toOperationNode();let[e,r]=t.split(" ");return r?(Ci("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),HP(mn(e),r)):mn(t)}function HP(t,e){if(typeof e=="string"){if(!eE(e))throw new Error(`Invalid order by direction: ${e}`);return oi.create(t,Be.createWithSql(e))}if(lg(e))return Ci("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),oi.create(t,e.toOperationNode());let r=oi.create(t);return e?e(new wg({node:r})).toOperationNode():r}var aa=O(()=>{Ud();dg();yg();$n();YA();Dd();si();fr()});var Rc,bg=O(()=>{q();Rc=w({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return w({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return w({...t,traversal:e})}})});var vg,xg=O(()=>{q();vg=w({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return w({kind:"JSONOperatorChainNode",operator:t,values:w([])})},cloneWithValue(t,e){return w({...t,values:w([...t.values,e])})}})});var es,Ld=O(()=>{q();es=w({is(t){return t.kind==="JSONPathNode"},create(t){return w({kind:"JSONPathNode",inOperator:t,pathLegs:w([])})},cloneWithLeg(t,e){return w({...t,pathLegs:w([...t.pathLegs,e])})}})});function ZA(t){return Ze(t)?mn(t):t.toOperationNode()}function uo(t){return Ar(t)?t.map(e=>pr(e)):[pr(t)]}function pr(t){return co(t)?Jr(t):ZA(t)}function JP(t,e){let r=mn(t);if(QA(e))return Rc.create(r,vg.create(pn.create(e)));let i=e.slice(0,-1);if(QA(i))return Rc.create(r,es.create(pn.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function mn(t){if(!t.includes("."))return Pc.create(ze.create(t));let r=t.split(".").map(rE);if(r.length===3)return jB(r);if(r.length===2)return MB(r);throw new Error(`invalid column reference ${t}`)}function QP(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(rE);return tr.create(mn(r),we.create(i))}else return mn(t)}function tE(t){return ze.create(t)}function Uc(t){if(t.includes(" ")){let[r,i]=t.split(" ").map(rE);if(!eE(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return hn([r,i])[0]}else return tE(t)}function jB(t){let[e,r,i]=t;return Pc.create(ze.create(i),Vr.createWithSchema(e,r))}function MB(t){let[e,r]=t;return Pc.create(ze.create(r),Vr.create(e))}function rE(t){return t.trim()}var fr=O(()=>{ri();kr();mg();$c();q();si();ot();aa();sa();bg();xg();Ld()});var Sg,Ng=O(()=>{q();Sg=w({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return w({kind:"PrimitiveValueListNode",values:w([...t])})}})});var ts,Dc=O(()=>{q();ts=w({is(t){return t.kind==="ValueListNode"},create(t){return w({kind:"ValueListNode",values:w(t)})}})});var Mt,Oi=O(()=>{q();Mt=w({is(t){return t.kind==="ValueNode"},create(t){return w({kind:"ValueNode",value:t})},createImmediate(t){return w({kind:"ValueNode",value:t,immediate:!0})}})});function ZP(t){return Ar(t)?BB(t):rt(t)}function rt(t){return co(t)?Jr(t):Mt.create(t)}function Ag(t){return ei(t)||so(t)||Qo(t)}function zd(t){if(!Ag(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Mt.createImmediate(t)}function BB(t){return t.some(co)?ts.create(t.map(e=>rt(e))):Sg.create(t)}var Pi=O(()=>{Ng();Dc();Oi();q();si()});var gn,Lc=O(()=>{q();gn=w({is(t){return t.kind==="ParensNode"},create(t){return w({kind:"ParensNode",node:t})}})});function st(t){if(t.length===3)return Eg(t[0],t[1],t[2]);if(t.length===1)return rt(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Eg(t,e,r){return qB(e)&&YP(r)?Xo.create(pr(t),nE(e),Mt.createImmediate(r)):Xo.create(pr(t),nE(e),ZP(r))}function rr(t,e,r){return Xo.create(pr(t),nE(e),pr(r))}function iE(t,e){return zc(Object.entries(t).filter(([,r])=>!Ur(r)).map(([r,i])=>Eg(r,YP(i)?"is":"=",i)),e)}function zc(t,e,r=!0){let i=e==="and"?Hr.create:ni.create;if(t.length===0)return Xo.create(Mt.createImmediate(1),pn.create("="),Mt.createImmediate(e==="and"?1:0));let n=GP(t[0]);for(let o=1;o<t.length;++o)n=i(n,GP(t[o]));return t.length>1&&r?gn.create(n):n}function qB(t){return t==="is"||t==="is not"}function YP(t){return Qo(t)||so(t)}function nE(t){if(Ze(t)&&FP.includes(t))return pn.create(t);if(ft(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function GP(t){return ft(t)?t.toOperationNode():t}var yn=O(()=>{pg();q();Kr();sa();fr();Pi();Oi();Yo();Lc();oa()});var lo,jd=O(()=>{q();lo=w({is(t){return t.kind==="OrderByNode"},create(t){return w({kind:"OrderByNode",items:w([...t])})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}})});var oE,sE=O(()=>{q();oE=w({is(t){return t.kind==="PartitionByNode"},create(t){return w({kind:"PartitionByNode",items:w(t)})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}})});var Md,_g=O(()=>{q();jd();sE();Md=w({is(t){return t.kind==="OverNode"},create(){return w({kind:"OverNode"})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?lo.cloneWithItems(t.orderBy,e):lo.create(e)})},cloneWithPartitionByItems(t,e){return w({...t,partitionBy:t.partitionBy?oE.cloneWithItems(t.partitionBy,e):oE.create(e)})}})});var ca,Bd=O(()=>{q();ca=w({is(t){return t.kind==="FromNode"},create(t){return w({kind:"FromNode",froms:w(t)})},cloneWithFroms(t,e){return w({...t,froms:w([...t.froms,...e])})}})});var aE,cE=O(()=>{q();aE=w({is(t){return t.kind==="GroupByNode"},create(t){return w({kind:"GroupByNode",items:w(t)})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}})});var uE,lE=O(()=>{q();Yo();oa();uE=w({is(t){return t.kind==="HavingNode"},create(t){return w({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return w({...t,having:e==="And"?Hr.create(t.having,r):ni.create(t.having,r)})}})});var Ct,ua=O(()=>{q();Ct=w({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return w({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},createWithoutInto(){return w({kind:"InsertQueryNode"})},cloneWith(t,e){return w({...t,...e})}})});var kg,Tg=O(()=>{q();kg=w({is(t){return t.kind==="ListNode"},create(t){return w({kind:"ListNode",items:w(t)})}})});var Ri,jc=O(()=>{q();Bd();Tg();Ri=w({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return w({kind:"UpdateQueryNode",table:t.length===1?t[0]:kg.create(t),...e&&{with:e}})},createWithoutTable(){return w({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return w({...t,from:t.from?ca.cloneWithFroms(t.from,e):ca.create(e)})},cloneWithUpdates(t,e){return w({...t,updates:t.updates?w([...t.updates,...e]):e})},cloneWithLimit(t,e){return w({...t,limit:e})}})});var qd,Ig=O(()=>{q();qd=w({is(t){return t.kind==="UsingNode"},create(t){return w({kind:"UsingNode",tables:w(t)})},cloneWithTables(t,e){return w({...t,tables:w([...t.tables,...e])})}})});var rs,Wd=O(()=>{q();Bd();Ig();Cn();rs=w({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return w({kind:"DeleteQueryNode",from:ca.create(t),...e&&{with:e}})},cloneWithOrderByItems:(t,e)=>ie.cloneWithOrderByItems(t,e),cloneWithoutOrderBy:t=>ie.cloneWithoutOrderBy(t),cloneWithLimit(t,e){return w({...t,limit:e})},cloneWithoutLimit(t){return w({...t,limit:void 0})},cloneWithUsing(t,e){return w({...t,using:t.using!==void 0?qd.cloneWithTables(t.using,e):qd.create(e)})}})});var mr,Fd=O(()=>{q();Yo();oa();mr=w({is(t){return t.kind==="WhereNode"},create(t){return w({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return w({...t,where:e==="And"?Hr.create(t.where,r):ni.create(t.where,r)})}})});var dE,fE=O(()=>{q();dE=w({is(t){return t.kind==="ReturningNode"},create(t){return w({kind:"ReturningNode",selections:w(t)})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})}})});var XP,pE=O(()=>{q();XP=w({is(t){return t.kind==="ExplainNode"},create(t,e){return w({kind:"ExplainNode",format:t,options:e})}})});var On,la=O(()=>{q();On=w({is(t){return t.kind==="WhenNode"},create(t){return w({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return w({...t,result:e})}})});var wn,Vd=O(()=>{q();la();wn=w({is(t){return t.kind==="MergeQueryNode"},create(t,e){return w({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return w({...t,using:e})},cloneWithWhen(t,e){return w({...t,whens:t.whens?w([...t.whens,e]):w([e])})},cloneWithThen(t,e){return w({...t,whens:t.whens?w([...t.whens.slice(0,-1),On.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}})});var mE,hE=O(()=>{q();mE=w({is(t){return t.kind==="OutputNode"},create(t){return w({kind:"OutputNode",selections:w(t)})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})}})});var ie,Cn=O(()=>{ua();da();jc();Wd();Fd();q();fE();pE();Vd();hE();jd();ie=w({is(t){return He.is(t)||Ct.is(t)||Ri.is(t)||rs.is(t)||wn.is(t)},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):w([e])})},cloneWithWhere(t,e){return w({...t,where:t.where?mr.cloneWithOperation(t.where,"And",e):mr.create(e)})},cloneWithJoin(t,e){return w({...t,joins:t.joins?w([...t.joins,e]):w([e])})},cloneWithReturning(t,e){return w({...t,returning:t.returning?dE.cloneWithSelections(t.returning,e):dE.create(e)})},cloneWithoutReturning(t){return w({...t,returning:void 0})},cloneWithoutWhere(t){return w({...t,where:void 0})},cloneWithExplain(t,e,r){return w({...t,explain:XP.create(e,r?.toOperationNode())})},cloneWithTop(t,e){return w({...t,top:e})},cloneWithOutput(t,e){return w({...t,output:t.output?mE.cloneWithSelections(t.output,e):mE.create(e)})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?lo.cloneWithItems(t.orderBy,e):lo.create(e)})},cloneWithoutOrderBy(t){return w({...t,orderBy:void 0})}})});var He,da=O(()=>{q();Bd();cE();lE();Cn();He=w({is(t){return t.kind==="SelectQueryNode"},create(t){return w({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return w({kind:"SelectQueryNode",from:ca.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})},cloneWithDistinctOn(t,e){return w({...t,distinctOn:t.distinctOn?w([...t.distinctOn,...e]):w(e)})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):w([e])})},cloneWithOrderByItems:(t,e)=>ie.cloneWithOrderByItems(t,e),cloneWithGroupByItems(t,e){return w({...t,groupBy:t.groupBy?aE.cloneWithItems(t.groupBy,e):aE.create(e)})},cloneWithLimit(t,e){return w({...t,limit:e})},cloneWithOffset(t,e){return w({...t,offset:e})},cloneWithFetch(t,e){return w({...t,fetch:e})},cloneWithHaving(t,e){return w({...t,having:t.having?uE.cloneWithOperation(t.having,"And",e):uE.create(e)})},cloneWithSetOperations(t,e){return w({...t,setOperations:t.setOperations?w([...t.setOperations,...e]):w([...e])})},cloneWithoutSelections(t){return w({...t,selections:[]})},cloneWithoutLimit(t){return w({...t,limit:void 0})},cloneWithoutOffset(t){return w({...t,offset:void 0})},cloneWithoutOrderBy:t=>ie.cloneWithoutOrderBy(t),cloneWithoutGroupBy(t){return w({...t,groupBy:void 0})}})});var $g,gE=O(()=>{Cc();$n();yn();q();$g=class t{#e;constructor(e){this.#e=w(e)}on(...e){return new t({...this.#e,joinNode:ii.cloneWithOn(this.#e.joinNode,st(e))})}onRef(e,r,i){return new t({...this.#e,joinNode:ii.cloneWithOn(this.#e.joinNode,rr(e,r,i))})}onTrue(){return new t({...this.#e,joinNode:ii.cloneWithOn(this.#e.joinNode,Be.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}});var eR,yE=O(()=>{q();eR=w({is(t){return t.kind==="PartitionByItemNode"},create(t){return w({kind:"PartitionByItemNode",partitionBy:t})}})});function tR(t){return uo(t).map(eR.create)}var rR=O(()=>{yE();fr()});var Cg,nR=O(()=>{_g();Cn();aa();rR();q();Cg=class t{#e;constructor(e){this.#e=w(e)}orderBy(...e){return new t({overNode:Md.cloneWithOrderByItems(this.#e.overNode,hn(e))})}clearOrderBy(){return new t({overNode:ie.cloneWithoutOrderBy(this.#e.overNode)})}partitionBy(e){return new t({overNode:Md.cloneWithPartitionByItems(this.#e.overNode,tR(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}});var Mc,wE=O(()=>{q();mg();Rd();Mc=w({is(t){return t.kind==="SelectionNode"},create(t){return w({kind:"SelectionNode",selection:t})},createSelectAll(){return w({kind:"SelectionNode",selection:Oc.create()})},createSelectAllFromTable(t){return w({kind:"SelectionNode",selection:Pc.createSelectAll(t)})}})});function Ht(t){return Ge(t)?Ht(t(ai())):Ar(t)?t.map(e=>iR(e)):[iR(t)]}function iR(t){return Ze(t)?Mc.create(QP(t)):gg(t)?Mc.create(t.toOperationNode()):Mc.create(Og(t))}function nr(t){return t?Array.isArray(t)?t.map(oR):[oR(t)]:[Mc.createSelectAll()]}function oR(t){if(Ze(t))return Mc.createSelectAllFromTable(qe(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}var ns=O(()=>{q();wE();fr();Ud();si();hr();fa()});var sR,bE=O(()=>{q();sR=w({is(t){return t.kind==="ValuesNode"},create(t){return w({kind:"ValuesNode",values:w(t)})}})});var aR,vE=O(()=>{q();aR=w({is(t){return t.kind==="DefaultInsertValueNode"},create(){return w({kind:"DefaultInsertValueNode"})}})});function Pg(t){let e=Ge(t)?t(ai()):t,r=Ar(e)?e:w([e]);return WB(r)}function WB(t){let e=FB(t);return[w([...e.keys()].map(ze.create)),sR.create(t.map(r=>VB(r,e)))]}function FB(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let n of i)!e.has(n)&&r[n]!==void 0&&e.set(n,e.size)}return e}function VB(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),n=!1,o=r.length;for(let a of r){let c=e.get(a);if(Ur(c)){o--;continue}let u=t[a];(Ur(u)||co(u))&&(n=!0),i[c]=u}if(o<e.size||n){let a=aR.create();return ts.create(i.map(c=>Ur(c)?a:rt(c)))}return Sg.create(i)}var xE=O(()=>{kr();Ng();Dc();q();Pi();bE();si();vE();fa()});var SE,NE=O(()=>{q();SE=w({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return w({kind:"ColumnUpdateNode",column:t,value:e})}})});function cR(...t){return t.length===2?[SE.create(pr(t[0]),rt(t[1]))]:Kd(t[0])}function Kd(t){let e=Ge(t)?t(ai()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>SE.create(ze.create(r),rt(i)))}var Rg=O(()=>{kr();NE();fa();q();Pi();fr()});var uR,AE=O(()=>{q();uR=w({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return w({kind:"OnDuplicateKeyNode",updates:t})}})});var Ug,EE=O(()=>{Ug=class{insertId;numInsertedOrUpdatedRows;constructor(e,r){this.insertId=e,this.numInsertedOrUpdatedRows=r}}});function Ui(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}var Pn,pa=O(()=>{Pn=class extends Error{node;constructor(e){super("no result"),this.node=e}}});var Lr,Dg=O(()=>{q();Fd();Lr=w({is(t){return t.kind==="OnConflictNode"},create(){return w({kind:"OnConflictNode"})},cloneWith(t,e){return w({...t,...e})},cloneWithIndexWhere(t,e){return w({...t,indexWhere:t.indexWhere?mr.cloneWithOperation(t.indexWhere,"And",e):mr.create(e)})},cloneWithIndexOrWhere(t,e){return w({...t,indexWhere:t.indexWhere?mr.cloneWithOperation(t.indexWhere,"Or",e):mr.create(e)})},cloneWithUpdateWhere(t,e){return w({...t,updateWhere:t.updateWhere?mr.cloneWithOperation(t.updateWhere,"And",e):mr.create(e)})},cloneWithUpdateOrWhere(t,e){return w({...t,updateWhere:t.updateWhere?mr.cloneWithOperation(t.updateWhere,"Or",e):mr.create(e)})},cloneWithoutIndexWhere(t){return w({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return w({...t,updateWhere:void 0})}})});var Lg,_E,kE,TE=O(()=>{kr();ot();Dg();yn();Rg();q();Lg=class t{#e;constructor(e){this.#e=w(e)}column(e){let r=ze.create(e);return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?w([...this.#e.onConflictNode.columns,r]):w([r])})})}columns(e){let r=e.map(ze.create);return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?w([...this.#e.onConflictNode.columns,...r]):w(r)})})}constraint(e){return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{constraint:we.create(e)})})}expression(e){return new t({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new t({...this.#e,onConflictNode:Lr.cloneWithIndexWhere(this.#e.onConflictNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:Lr.cloneWithIndexWhere(this.#e.onConflictNode,rr(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:Lr.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new _E({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new kE({...this.#e,onConflictNode:Lr.cloneWith(this.#e.onConflictNode,{updates:Kd(e)})})}$call(e){return e(this)}},_E=class{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.onConflictNode}},kE=class t{#e;constructor(e){this.#e=w(e)}where(...e){return new t({...this.#e,onConflictNode:Lr.cloneWithUpdateWhere(this.#e.onConflictNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:Lr.cloneWithUpdateWhere(this.#e.onConflictNode,rr(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:Lr.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}});var lR,IE=O(()=>{q();lR=w({is(t){return t.kind==="TopNode"},create(t,e){return w({kind:"TopNode",expression:t,modifiers:e})}})});function ci(t,e){if(!ei(t)&&!Zo(t))throw new Error(`Invalid top expression: ${t}`);if(!Ur(e)&&!KB(e))throw new Error(`Invalid top modifiers: ${e}`);return lR.create(t,e)}function KB(t){return t==="percent"||t==="with ties"||t==="percent with ties"}var Bc=O(()=>{IE();q()});var ma,$E=O(()=>{q();ma=w({is(t){return t.kind==="OrActionNode"},create(t){return w({kind:"OrActionNode",action:t})}})});var Hd,CE=O(()=>{ns();xE();ua();Cn();Rg();q();AE();EE();pa();si();kr();TE();Dg();Bc();$E();Hd=class t{#e;constructor(e){this.#e=w(e)}values(e){let[r,i]=Pg(e);return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{columns:w(e.map(ze.create))})})}expression(e){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{values:Jr(e)})})}defaultValues(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{orAction:ma.create("ignore")})})}orIgnore(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{orAction:ma.create("ignore")})})}orAbort(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{orAction:ma.create("abort")})})}orFail(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{orAction:ma.create("fail")})})}orReplace(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{orAction:ma.create("replace")})})}orRollback(){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{orAction:ma.create("rollback")})})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ci(e,r))})}onConflict(e){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{onConflict:e(new Lg({onConflictNode:Lr.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new t({...this.#e,queryNode:Ct.cloneWith(this.#e.queryNode,{onDuplicateKey:uR.create(Kd(e))})})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,nr())})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,nr(e))})}clearReturning(){return new t({...this.#e,queryNode:ie.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Ug(r.insertId,r.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Pn){let r=await this.executeTakeFirst();if(r===void 0)throw Ui(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}}});var zg,OE=O(()=>{zg=class{numDeletedRows;constructor(e){this.numDeletedRows=e}}});var qc,Jd=O(()=>{q();qc=w({is(t){return t.kind==="LimitNode"},create(t){return w({kind:"LimitNode",limit:t})}})});var jg,PE=O(()=>{Qd();hr();ns();Cn();q();pa();OE();Wd();Jd();aa();yn();Pi();Bc();jg=class t{#e;constructor(e){this.#e=w(e)}where(...e){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,rr(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:ie.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ci(e,r))})}using(e){return new t({...this.#e,queryNode:rs.cloneWithUsing(this.#e.queryNode,ui(e))})}innerJoin(...e){return this.#t("InnerJoin",e)}leftJoin(...e){return this.#t("LeftJoin",e)}rightJoin(...e){return this.#t("RightJoin",e)}fullJoin(...e){return this.#t("FullJoin",e)}#t(e,r){return new t({...this.#e,queryNode:ie.cloneWithJoin(this.#e.queryNode,is(e,r))})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,nr(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,nr(e))})}clearReturning(){return new t({...this.#e,queryNode:ie.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:rs.cloneWithoutLimit(this.#e.queryNode)})}orderBy(...e){return new t({...this.#e,queryNode:ie.cloneWithOrderByItems(this.#e.queryNode,hn(e))})}clearOrderBy(){return new t({...this.#e,queryNode:ie.cloneWithoutOrderBy(this.#e.queryNode)})}limit(e){return new t({...this.#e,queryNode:rs.cloneWithLimit(this.#e.queryNode,qc.create(rt(e)))})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new zg(r.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Pn){let r=await this.executeTakeFirst();if(r===void 0)throw Ui(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}}});var Mg,RE=O(()=>{Mg=class{numUpdatedRows;numChangedRows;constructor(e,r){this.numUpdatedRows=e,this.numChangedRows=r}}});var Wc,Bg=O(()=>{Qd();hr();ns();Cn();jc();Rg();q();RE();pa();yn();Pi();Jd();Bc();aa();Wc=class t{#e;constructor(e){this.#e=w(e)}where(...e){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,rr(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:ie.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ci(e,r))})}from(e){return new t({...this.#e,queryNode:Ri.cloneWithFromItems(this.#e.queryNode,ui(e))})}innerJoin(...e){return this.#t("InnerJoin",e)}leftJoin(...e){return this.#t("LeftJoin",e)}rightJoin(...e){return this.#t("RightJoin",e)}fullJoin(...e){return this.#t("FullJoin",e)}#t(e,r){return new t({...this.#e,queryNode:ie.cloneWithJoin(this.#e.queryNode,is(e,r))})}orderBy(...e){return new t({...this.#e,queryNode:ie.cloneWithOrderByItems(this.#e.queryNode,hn(e))})}clearOrderBy(){return new t({...this.#e,queryNode:ie.cloneWithoutOrderBy(this.#e.queryNode)})}limit(e){return new t({...this.#e,queryNode:Ri.cloneWithLimit(this.#e.queryNode,qc.create(rt(e)))})}set(...e){return new t({...this.#e,queryNode:Ri.cloneWithUpdates(this.#e.queryNode,cR(...e))})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,nr(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,nr(e))})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new t({...this.#e,queryNode:ie.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Mg(r.numAffectedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Pn){let r=await this.executeTakeFirst();if(r===void 0)throw Ui(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}}});var UE,DE=O(()=>{q();kr();$c();UE=w({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return w({kind:"CommonTableExpressionNameNode",table:Vr.create(t),columns:e?w(e.map(ze.create)):void 0})}})});var Fc,qg=O(()=>{q();Fc=w({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return w({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return w({...t,...e})}})});var Wg,dR=O(()=>{qg();q();Wg=class t{#e;constructor(e){this.#e=w(e)}materialized(){return new t({...this.#e,node:Fc.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new t({...this.#e,node:Fc.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}});function LE(t,e){let r=e(mR()).toOperationNode();return Ge(t)?t(HB(r)).toOperationNode():Fc.create(fR(t),r)}function HB(t){return e=>new Wg({node:Fc.create(fR(e),t)})}function fR(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(n=>n.trim());return UE.create(r,i)}else return UE.create(t)}var pR=O(()=>{DE();Fg();q();dR();qg()});var Zd,zE=O(()=>{q();Zd=w({is(t){return t.kind==="WithNode"},create(t,e){return w({kind:"WithNode",expressions:w([t]),...e})},cloneWithExpression(t,e){return w({...t,expressions:w([...t.expressions,e])})}})});function Vg(t){let e="";for(let r=0;r<t;++r)e+=JB();return e}function JB(){return hR[~~(Math.random()*hR.length)]}var hR,jE=O(()=>{hR=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]});function xe(){return new ME}var ME,Di=O(()=>{jE();ME=class{#e;get queryId(){return this.#e===void 0&&(this.#e=Vg(8)),this.#e}}});var Vc,Kg=O(()=>{q();Vc=class{nodeStack=[];#e=w({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(e,r){if(!e)return e;this.nodeStack.push(e);let i=this.transformNodeImpl(e,r);return this.nodeStack.pop(),w(i)}transformNodeImpl(e,r){return this.#e[e.kind](e,r)}transformNodeList(e,r){return e&&w(e.map(i=>this.transformNode(i,r)))}transformSelectQuery(e,r){return{kind:"SelectQueryNode",from:this.transformNode(e.from,r),selections:this.transformNodeList(e.selections,r),distinctOn:this.transformNodeList(e.distinctOn,r),joins:this.transformNodeList(e.joins,r),groupBy:this.transformNode(e.groupBy,r),orderBy:this.transformNode(e.orderBy,r),where:this.transformNode(e.where,r),frontModifiers:this.transformNodeList(e.frontModifiers,r),endModifiers:this.transformNodeList(e.endModifiers,r),limit:this.transformNode(e.limit,r),offset:this.transformNode(e.offset,r),with:this.transformNode(e.with,r),having:this.transformNode(e.having,r),explain:this.transformNode(e.explain,r),setOperations:this.transformNodeList(e.setOperations,r),fetch:this.transformNode(e.fetch,r),top:this.transformNode(e.top,r)}}transformSelection(e,r){return{kind:"SelectionNode",selection:this.transformNode(e.selection,r)}}transformColumn(e,r){return{kind:"ColumnNode",column:this.transformNode(e.column,r)}}transformAlias(e,r){return{kind:"AliasNode",node:this.transformNode(e.node,r),alias:this.transformNode(e.alias,r)}}transformTable(e,r){return{kind:"TableNode",table:this.transformNode(e.table,r)}}transformFrom(e,r){return{kind:"FromNode",froms:this.transformNodeList(e.froms,r)}}transformReference(e,r){return{kind:"ReferenceNode",column:this.transformNode(e.column,r),table:this.transformNode(e.table,r)}}transformAnd(e,r){return{kind:"AndNode",left:this.transformNode(e.left,r),right:this.transformNode(e.right,r)}}transformOr(e,r){return{kind:"OrNode",left:this.transformNode(e.left,r),right:this.transformNode(e.right,r)}}transformValueList(e,r){return{kind:"ValueListNode",values:this.transformNodeList(e.values,r)}}transformParens(e,r){return{kind:"ParensNode",node:this.transformNode(e.node,r)}}transformJoin(e,r){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table,r),on:this.transformNode(e.on,r)}}transformRaw(e,r){return{kind:"RawNode",sqlFragments:w([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters,r)}}transformWhere(e,r){return{kind:"WhereNode",where:this.transformNode(e.where,r)}}transformInsertQuery(e,r){return{kind:"InsertQueryNode",into:this.transformNode(e.into,r),columns:this.transformNodeList(e.columns,r),values:this.transformNode(e.values,r),returning:this.transformNode(e.returning,r),onConflict:this.transformNode(e.onConflict,r),onDuplicateKey:this.transformNode(e.onDuplicateKey,r),endModifiers:this.transformNodeList(e.endModifiers,r),with:this.transformNode(e.with,r),ignore:e.ignore,orAction:this.transformNode(e.orAction,r),replace:e.replace,explain:this.transformNode(e.explain,r),defaultValues:e.defaultValues,top:this.transformNode(e.top,r),output:this.transformNode(e.output,r)}}transformValues(e,r){return{kind:"ValuesNode",values:this.transformNodeList(e.values,r)}}transformDeleteQuery(e,r){return{kind:"DeleteQueryNode",from:this.transformNode(e.from,r),using:this.transformNode(e.using,r),joins:this.transformNodeList(e.joins,r),where:this.transformNode(e.where,r),returning:this.transformNode(e.returning,r),endModifiers:this.transformNodeList(e.endModifiers,r),with:this.transformNode(e.with,r),orderBy:this.transformNode(e.orderBy,r),limit:this.transformNode(e.limit,r),explain:this.transformNode(e.explain,r),top:this.transformNode(e.top,r),output:this.transformNode(e.output,r)}}transformReturning(e,r){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections,r)}}transformCreateTable(e,r){return{kind:"CreateTableNode",table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r),constraints:this.transformNodeList(e.constraints,r),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers,r),endModifiers:this.transformNodeList(e.endModifiers,r),selectQuery:this.transformNode(e.selectQuery,r)}}transformColumnDefinition(e,r){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column,r),dataType:this.transformNode(e.dataType,r),references:this.transformNode(e.references,r),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo,r),check:this.transformNode(e.check,r),generated:this.transformNode(e.generated,r),frontModifiers:this.transformNodeList(e.frontModifiers,r),endModifiers:this.transformNodeList(e.endModifiers,r),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e,r){return{kind:"AddColumnNode",column:this.transformNode(e.column,r)}}transformDropTable(e,r){return{kind:"DropTableNode",table:this.transformNode(e.table,r),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e,r){return{kind:"OrderByNode",items:this.transformNodeList(e.items,r)}}transformOrderByItem(e,r){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy,r),direction:this.transformNode(e.direction,r),collation:this.transformNode(e.collation,r),nulls:e.nulls}}transformGroupBy(e,r){return{kind:"GroupByNode",items:this.transformNodeList(e.items,r)}}transformGroupByItem(e,r){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy,r)}}transformUpdateQuery(e,r){return{kind:"UpdateQueryNode",table:this.transformNode(e.table,r),from:this.transformNode(e.from,r),joins:this.transformNodeList(e.joins,r),where:this.transformNode(e.where,r),updates:this.transformNodeList(e.updates,r),returning:this.transformNode(e.returning,r),endModifiers:this.transformNodeList(e.endModifiers,r),with:this.transformNode(e.with,r),explain:this.transformNode(e.explain,r),limit:this.transformNode(e.limit,r),top:this.transformNode(e.top,r),output:this.transformNode(e.output,r),orderBy:this.transformNode(e.orderBy,r)}}transformColumnUpdate(e,r){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column,r),value:this.transformNode(e.value,r)}}transformLimit(e,r){return{kind:"LimitNode",limit:this.transformNode(e.limit,r)}}transformOffset(e,r){return{kind:"OffsetNode",offset:this.transformNode(e.offset,r)}}transformOnConflict(e,r){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns,r),constraint:this.transformNode(e.constraint,r),indexExpression:this.transformNode(e.indexExpression,r),indexWhere:this.transformNode(e.indexWhere,r),updates:this.transformNodeList(e.updates,r),updateWhere:this.transformNode(e.updateWhere,r),doNothing:e.doNothing}}transformOnDuplicateKey(e,r){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates,r)}}transformCreateIndex(e,r){return{kind:"CreateIndexNode",name:this.transformNode(e.name,r),table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r),unique:e.unique,using:this.transformNode(e.using,r),ifNotExists:e.ifNotExists,where:this.transformNode(e.where,r),nullsNotDistinct:e.nullsNotDistinct}}transformList(e,r){return{kind:"ListNode",items:this.transformNodeList(e.items,r)}}transformDropIndex(e,r){return{kind:"DropIndexNode",name:this.transformNode(e.name,r),table:this.transformNode(e.table,r),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e,r){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns,r),name:this.transformNode(e.name,r),deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformUniqueConstraint(e,r){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns,r),name:this.transformNode(e.name,r),nullsNotDistinct:e.nullsNotDistinct,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformForeignKeyConstraint(e,r){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns,r),references:this.transformNode(e.references,r),name:this.transformNode(e.name,r),onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformSetOperation(e,r){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression,r),all:e.all}}transformReferences(e,r){return{kind:"ReferencesNode",table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e,r){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression,r),name:this.transformNode(e.name,r)}}transformWith(e,r){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions,r),recursive:e.recursive}}transformCommonTableExpression(e,r){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name,r),materialized:e.materialized,expression:this.transformNode(e.expression,r)}}transformCommonTableExpressionName(e,r){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table,r),columns:this.transformNodeList(e.columns,r)}}transformHaving(e,r){return{kind:"HavingNode",having:this.transformNode(e.having,r)}}transformCreateSchema(e,r){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema,r),ifNotExists:e.ifNotExists}}transformDropSchema(e,r){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema,r),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e,r){return{kind:"AlterTableNode",table:this.transformNode(e.table,r),renameTo:this.transformNode(e.renameTo,r),setSchema:this.transformNode(e.setSchema,r),columnAlterations:this.transformNodeList(e.columnAlterations,r),addConstraint:this.transformNode(e.addConstraint,r),dropConstraint:this.transformNode(e.dropConstraint,r),renameConstraint:this.transformNode(e.renameConstraint,r),addIndex:this.transformNode(e.addIndex,r),dropIndex:this.transformNode(e.dropIndex,r)}}transformDropColumn(e,r){return{kind:"DropColumnNode",column:this.transformNode(e.column,r)}}transformRenameColumn(e,r){return{kind:"RenameColumnNode",column:this.transformNode(e.column,r),renameTo:this.transformNode(e.renameTo,r)}}transformAlterColumn(e,r){return{kind:"AlterColumnNode",column:this.transformNode(e.column,r),dataType:this.transformNode(e.dataType,r),dataTypeExpression:this.transformNode(e.dataTypeExpression,r),setDefault:this.transformNode(e.setDefault,r),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e,r){return{kind:"ModifyColumnNode",column:this.transformNode(e.column,r)}}transformAddConstraint(e,r){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint,r)}}transformDropConstraint(e,r){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName,r),ifExists:e.ifExists,modifier:e.modifier}}transformRenameConstraint(e,r){return{kind:"RenameConstraintNode",oldName:this.transformNode(e.oldName,r),newName:this.transformNode(e.newName,r)}}transformCreateView(e,r){return{kind:"CreateViewNode",name:this.transformNode(e.name,r),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns,r),as:this.transformNode(e.as,r)}}transformRefreshMaterializedView(e,r){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(e.name,r),concurrently:e.concurrently,withNoData:e.withNoData}}transformDropView(e,r){return{kind:"DropViewNode",name:this.transformNode(e.name,r),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e,r){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression,r)}}transformDefaultValue(e,r){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue,r)}}transformOn(e,r){return{kind:"OnNode",on:this.transformNode(e.on,r)}}transformSelectModifier(e,r){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier,r),of:this.transformNodeList(e.of,r)}}transformCreateType(e,r){return{kind:"CreateTypeNode",name:this.transformNode(e.name,r),enum:this.transformNode(e.enum,r)}}transformDropType(e,r){return{kind:"DropTypeNode",name:this.transformNode(e.name,r),ifExists:e.ifExists}}transformExplain(e,r){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options,r)}}transformSchemableIdentifier(e,r){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema,r),identifier:this.transformNode(e.identifier,r)}}transformAggregateFunction(e,r){return{kind:"AggregateFunctionNode",func:e.func,aggregated:this.transformNodeList(e.aggregated,r),distinct:e.distinct,orderBy:this.transformNode(e.orderBy,r),withinGroup:this.transformNode(e.withinGroup,r),filter:this.transformNode(e.filter,r),over:this.transformNode(e.over,r)}}transformOver(e,r){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy,r),partitionBy:this.transformNode(e.partitionBy,r)}}transformPartitionBy(e,r){return{kind:"PartitionByNode",items:this.transformNodeList(e.items,r)}}transformPartitionByItem(e,r){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy,r)}}transformBinaryOperation(e,r){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand,r),operator:this.transformNode(e.operator,r),rightOperand:this.transformNode(e.rightOperand,r)}}transformUnaryOperation(e,r){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator,r),operand:this.transformNode(e.operand,r)}}transformUsing(e,r){return{kind:"UsingNode",tables:this.transformNodeList(e.tables,r)}}transformFunction(e,r){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments,r)}}transformCase(e,r){return{kind:"CaseNode",value:this.transformNode(e.value,r),when:this.transformNodeList(e.when,r),else:this.transformNode(e.else,r),isStatement:e.isStatement}}transformWhen(e,r){return{kind:"WhenNode",condition:this.transformNode(e.condition,r),result:this.transformNode(e.result,r)}}transformJSONReference(e,r){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference,r),traversal:this.transformNode(e.traversal,r)}}transformJSONPath(e,r){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator,r),pathLegs:this.transformNodeList(e.pathLegs,r)}}transformJSONPathLeg(e,r){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e,r){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator,r),values:this.transformNodeList(e.values,r)}}transformTuple(e,r){return{kind:"TupleNode",values:this.transformNodeList(e.values,r)}}transformMergeQuery(e,r){return{kind:"MergeQueryNode",into:this.transformNode(e.into,r),using:this.transformNode(e.using,r),whens:this.transformNodeList(e.whens,r),with:this.transformNode(e.with,r),top:this.transformNode(e.top,r),endModifiers:this.transformNodeList(e.endModifiers,r),output:this.transformNode(e.output,r),returning:this.transformNode(e.returning,r)}}transformMatched(e,r){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e,r){return{kind:"AddIndexNode",name:this.transformNode(e.name,r),columns:this.transformNodeList(e.columns,r),unique:e.unique,using:this.transformNode(e.using,r),ifNotExists:e.ifNotExists}}transformCast(e,r){return{kind:"CastNode",expression:this.transformNode(e.expression,r),dataType:this.transformNode(e.dataType,r)}}transformFetch(e,r){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount,r),modifier:e.modifier}}transformTop(e,r){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e,r){return{kind:"OutputNode",selections:this.transformNodeList(e.selections,r)}}transformDataType(e,r){return e}transformSelectAll(e,r){return e}transformIdentifier(e,r){return e}transformValue(e,r){return e}transformPrimitiveValueList(e,r){return e}transformOperator(e,r){return e}transformDefaultInsertValue(e,r){return e}transformOrAction(e,r){return e}transformCollate(e,r){return e}}});var QB,ZB,Hg,gR=O(()=>{ri();ot();Cc();Tg();Kg();ao();$c();Ig();q();QB=w({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),ZB={json_agg:!0,to_json:!0},Hg=class extends Vc{#e;#t=new Set;#r=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e,r){if(!this.#i(e))return super.transformNodeImpl(e,r);let i=this.#a(e);for(let s of i)this.#r.add(s);let n=this.#o(e);for(let s of n)this.#t.add(s);let o=super.transformNodeImpl(e,r);for(let s of n)this.#t.delete(s);for(let s of i)this.#r.delete(s);return o}transformSchemableIdentifier(e,r){let i=super.transformSchemableIdentifier(e,r);return i.schema||!this.#t.has(e.identifier.name)?i:{...i,schema:we.create(this.#e)}}transformReferences(e,r){let i=super.transformReferences(e,r);return i.table.table.schema?i:{...i,table:Vr.createWithSchema(this.#e,i.table.table.identifier.name)}}transformAggregateFunction(e,r){return{...super.transformAggregateFunction({...e,aggregated:[]},r),aggregated:this.#n(e,r,"aggregated")}}transformFunction(e,r){return{...super.transformFunction({...e,arguments:[]},r),arguments:this.#n(e,r,"arguments")}}transformSelectModifier(e,r){return{...super.transformSelectModifier({...e,of:void 0},r),of:e.of?.map(i=>Vr.is(i)&&!i.table.schema?{...i,table:this.transformIdentifier(i.table.identifier,r)}:this.transformNode(i,r))}}#n(e,r,i){return ZB[e.func]?e[i].map(n=>!Vr.is(n)||n.table.schema?this.transformNode(n,r):{...n,table:this.transformIdentifier(n.table.identifier,r)}):this.transformNodeList(e[i],r)}#i(e){return e.kind in QB}#o(e){let r=new Set;if("name"in e&&e.name&&_r.is(e.name)&&this.#c(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#s(i,r);if("into"in e&&e.into&&this.#s(e.into,r),"table"in e&&e.table&&this.#s(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#s(i.table,r);return"using"in e&&e.using&&(ii.is(e.using)?this.#s(e.using.table,r):this.#s(e.using,r)),r}#a(e){let r=new Set;return"with"in e&&e.with&&this.#u(e.with,r),r}#s(e,r){if(Vr.is(e))return this.#c(e.table,r);if(tr.is(e)&&Vr.is(e.node))return this.#c(e.node.table,r);if(kg.is(e)){for(let i of e.items)this.#s(i,r);return}if(qd.is(e)){for(let i of e.tables)this.#s(i,r);return}}#c(e,r){let i=e.identifier.name;!this.#t.has(i)&&!this.#r.has(i)&&r.add(i)}#u(e,r){for(let i of e.expressions){let n=i.name.table.table.identifier.name;this.#r.has(n)||r.add(n)}}}});var Rn,Kc=O(()=>{gR();Rn=class{#e;constructor(e){this.#e=new Hg(e)}transformQuery(e){return this.#e.transformNode(e.node,e.queryId)}async transformResult(e){return e.result}}});var yR,BE=O(()=>{q();yR=w({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return w({kind:"MatchedNode",not:t,bySource:e})}})});function qE(t,e,r){return On.create(zc([yR.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&r?rr(e[0],e[1],e[2]):st(e)]:[]],"and",!1))}function Hc(t){return Ze(t)?Be.create([t],[]):ft(t)?t.toOperationNode():t}var wR=O(()=>{BE();Kr();$n();la();q();yn()});var fo,WE=O(()=>{fo=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}}});async function Jg(t){let e=new fo,r=new fo;return t.provideConnection(async i=>(e.resolve(i),await r.promise)).catch(i=>e.reject(i)),w({connection:await e.promise,release:r.resolve})}var FE=O(()=>{WE();q()});var GB,Jc,VE=O(()=>{q();FE();Dd();GB=w([]),Jc=class{#e;constructor(e=GB){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let n=i.transformQuery({node:e,queryId:r});if(n.kind===e.kind)e=n;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${n.kind}`].join(" "))}return e}async executeQuery(e){return await this.provideConnection(async r=>{let i=await r.executeQuery(e);return"numUpdatedOrDeletedRows"in i&&Ci("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#t(i,e.queryId)})}async*stream(e,r){let{connection:i,release:n}=await Jg(this);try{for await(let o of i.streamQuery(e,r))yield await this.#t(o,e.queryId)}finally{n()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}}});var KE,os,Qc=O(()=>{VE();KE=class t extends Jc{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new t([...this.plugins,e])}withPlugins(e){return new t([...this.plugins,...e])}withPluginAtFront(e){return new t([e,...this.plugins])}withoutPlugins(){return new t([])}},os=new KE});var Qg,HE=O(()=>{Qg=class{numChangedRows;constructor(e){this.numChangedRows=e}}});var Zg,ss,Gg,JE,QE=O(()=>{ua();Vd();Cn();jc();xE();Qd();wR();ns();Bc();Qc();q();HE();pa();Bg();Zg=class t{#e;constructor(e){this.#e=w(e)}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ci(e,r))})}using(...e){return new ss({...this.#e,queryNode:wn.cloneWithUsing(this.#e.queryNode,is("Using",e))})}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,nr(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,nr(e))})}},ss=class t{#e;constructor(e){this.#e=w(e)}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ci(e,r))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,r,i){return this.#t([e,r,i],!0)}#t(e,r){return new Gg({...this.#e,queryNode:wn.cloneWithWhen(this.#e.queryNode,qE({isMatched:!0},e,r))})}whenNotMatched(){return this.#r([])}whenNotMatchedAnd(...e){return this.#r(e)}whenNotMatchedAndRef(e,r,i){return this.#r([e,r,i],!0)}whenNotMatchedBySource(){return this.#r([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#r(e,!1,!0)}whenNotMatchedBySourceAndRef(e,r,i){return this.#r([e,r,i],!0,!0)}returning(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,Ht(e))})}returningAll(e){return new t({...this.#e,queryNode:ie.cloneWithReturning(this.#e.queryNode,nr(e))})}output(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,Ht(e))})}outputAll(e){return new t({...this.#e,queryNode:ie.cloneWithOutput(this.#e.queryNode,nr(e))})}#r(e,r=!1,i=!1){let n={...this.#e,queryNode:wn.cloneWithWhen(this.#e.queryNode,qE({isMatched:!1,bySource:i},e,r))},o=i?Gg:JE;return new o(n)}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Qg(r.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Pn){let r=await this.executeTakeFirst();if(r===void 0)throw Ui(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}},Gg=class{#e;constructor(e){this.#e=w(e)}thenDelete(){return new ss({...this.#e,queryNode:wn.cloneWithThen(this.#e.queryNode,Hc("delete"))})}thenDoNothing(){return new ss({...this.#e,queryNode:wn.cloneWithThen(this.#e.queryNode,Hc("do nothing"))})}thenUpdate(e){return new ss({...this.#e,queryNode:wn.cloneWithThen(this.#e.queryNode,Hc(e(new Wc({queryId:this.#e.queryId,executor:os,queryNode:Ri.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(r=>r.set(...e))}},JE=class{#e;constructor(e){this.#e=w(e)}thenDoNothing(){return new ss({...this.#e,queryNode:wn.cloneWithThen(this.#e.queryNode,Hc("do nothing"))})}thenInsertValues(e){let[r,i]=Pg(e);return new ss({...this.#e,queryNode:wn.cloneWithThen(this.#e.queryNode,Hc(Ct.cloneWith(Ct.createWithoutInto(),{columns:r,values:i})))})}}});var Zc,Yg=O(()=>{Xg();CE();PE();Bg();Wd();ua();da();jc();hr();pR();zE();Di();Kc();q();ns();QE();Vd();Zc=class t{#e;constructor(e){this.#e=w(e)}selectFrom(e){return Gd({queryId:xe(),executor:this.#e.executor,queryNode:He.createFrom(ui(e),this.#e.withNode)})}selectNoFrom(e){return Gd({queryId:xe(),executor:this.#e.executor,queryNode:He.cloneWithSelections(He.create(this.#e.withNode),Ht(e))})}insertInto(e){return new Hd({queryId:xe(),executor:this.#e.executor,queryNode:Ct.create(qe(e),this.#e.withNode)})}replaceInto(e){return new Hd({queryId:xe(),executor:this.#e.executor,queryNode:Ct.create(qe(e),this.#e.withNode,!0)})}deleteFrom(e){return new jg({queryId:xe(),executor:this.#e.executor,queryNode:rs.create(ui(e),this.#e.withNode)})}updateTable(e){return new Wc({queryId:xe(),executor:this.#e.executor,queryNode:Ri.create(ui(e),this.#e.withNode)})}mergeInto(e){return new Zg({queryId:xe(),executor:this.#e.executor,queryNode:wn.create(ZE(e),this.#e.withNode)})}with(e,r){let i=LE(e,r);return new t({...this.#e,withNode:this.#e.withNode?Zd.cloneWithExpression(this.#e.withNode,i):Zd.create(i)})}withRecursive(e,r){let i=LE(e,r);return new t({...this.#e,withNode:this.#e.withNode?Zd.cloneWithExpression(this.#e.withNode,i):Zd.create(i,{recursive:!0})})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Rn(e))})}}});function mR(){return new Zc({executor:os})}function bR(t,e){return new $g({joinNode:ii.create(t,ha(e))})}function vR(){return new Cg({overNode:Md.create()})}var Fg=O(()=>{Cc();_g();gE();nR();Yg();Qc();hr()});function is(t,e){if(e.length===3)return XB(t,e[0],e[1],e[2]);if(e.length===2)return YB(t,e[0],e[1]);if(e.length===1)return eq(t,e[0]);throw new Error("not implemented")}function YB(t,e,r){return r(bR(t,e)).toOperationNode()}function XB(t,e,r,i){return ii.createWithOn(t,ha(e),rr(r,"=",i))}function eq(t,e){return ii.create(t,ha(e))}var Qd=O(()=>{Cc();yn();Fg();hr()});var xR,GE=O(()=>{q();xR=w({is(t){return t.kind==="OffsetNode"},create(t){return w({kind:"OffsetNode",offset:t})}})});var SR,YE=O(()=>{q();SR=w({is(t){return t.kind==="GroupByItemNode"},create(t){return w({kind:"GroupByItemNode",groupBy:t})}})});function NR(t){return t=Ge(t)?t(ai()):t,uo(t).map(SR.create)}var AR=O(()=>{YE();fa();q();fr()});var ey,ty=O(()=>{q();ey=w({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return w({kind:"SetOperationNode",operator:t,expression:e,all:r})}})});function ga(t,e,r){return Ge(e)&&(e=e(ry())),Ar(e)||(e=[e]),e.map(i=>ey.create(t,Jr(i),r))}var ER=O(()=>{fa();ty();q();si()});var Qe,Yd,XE,e_,Gc=O(()=>{ri();Yo();ot();Kr();oa();Lc();yn();Qe=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Yd(this,e)}or(...e){return new XE(ni.create(this.#e,st(e)))}and(...e){return new e_(Hr.create(this.#e,st(e)))}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}},Yd=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return tr.create(this.#e.toOperationNode(),ft(this.#t)?this.#t.toOperationNode():we.create(this.#t))}},XE=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Yd(this,e)}or(...e){return new t(ni.create(this.#e,st(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return gn.create(this.#e)}},e_=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Yd(this,e)}and(...e){return new t(Hr.create(this.#e,st(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return gn.create(this.#e)}}});var _R,t_=O(()=>{q();Oi();_R=w({is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:Mt.create(t),modifier:e}}})});function kR(t,e){if(!ei(t)&&!Zo(t))throw new Error(`Invalid fetch row count: ${t}`);if(!tq(e))throw new Error(`Invalid fetch modifier: ${e}`);return _R.create(t,e)}function tq(t){return t==="only"||t==="with ties"}var TR=O(()=>{t_();q()});function Gd(t){return new r_(t)}var r_,n_,Xg=O(()=>{ri();HA();Qd();hr();ns();fr();da();Cn();aa();Jd();GE();q();AR();pa();ot();ER();yn();Gc();Pi();TR();Bc();r_=class t{#e;constructor(e){this.#e=w(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,st(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:ie.cloneWithWhere(this.#e.queryNode,rr(e,r,i))})}having(...e){return new t({...this.#e,queryNode:He.cloneWithHaving(this.#e.queryNode,st(e))})}havingRef(e,r,i){return new t({...this.#e,queryNode:He.cloneWithHaving(this.#e.queryNode,rr(e,r,i))})}select(e){return new t({...this.#e,queryNode:He.cloneWithSelections(this.#e.queryNode,Ht(e))})}distinctOn(e){return new t({...this.#e,queryNode:He.cloneWithDistinctOn(this.#e.queryNode,uo(e))})}modifyFront(e){return new t({...this.#e,queryNode:He.cloneWithFrontModifier(this.#e.queryNode,$i.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.createWithExpression(e.toOperationNode()))})}distinct(){return new t({...this.#e,queryNode:He.cloneWithFrontModifier(this.#e.queryNode,$i.create("Distinct"))})}forUpdate(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.create("ForUpdate",e?$d(e).map(qe):void 0))})}forShare(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.create("ForShare",e?$d(e).map(qe):void 0))})}forKeyShare(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.create("ForKeyShare",e?$d(e).map(qe):void 0))})}forNoKeyUpdate(e){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.create("ForNoKeyUpdate",e?$d(e).map(qe):void 0))})}skipLocked(){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.create("SkipLocked"))})}noWait(){return new t({...this.#e,queryNode:ie.cloneWithEndModifier(this.#e.queryNode,$i.create("NoWait"))})}selectAll(e){return new t({...this.#e,queryNode:He.cloneWithSelections(this.#e.queryNode,nr(e))})}innerJoin(...e){return this.#t("InnerJoin",e)}leftJoin(...e){return this.#t("LeftJoin",e)}rightJoin(...e){return this.#t("RightJoin",e)}fullJoin(...e){return this.#t("FullJoin",e)}crossJoin(...e){return this.#t("CrossJoin",e)}innerJoinLateral(...e){return this.#t("LateralInnerJoin",e)}leftJoinLateral(...e){return this.#t("LateralLeftJoin",e)}crossJoinLateral(...e){return this.#t("LateralCrossJoin",e)}crossApply(...e){return this.#t("CrossApply",e)}outerApply(...e){return this.#t("OuterApply",e)}#t(e,r){return new t({...this.#e,queryNode:ie.cloneWithJoin(this.#e.queryNode,is(e,r))})}orderBy(...e){return new t({...this.#e,queryNode:ie.cloneWithOrderByItems(this.#e.queryNode,hn(e))})}groupBy(e){return new t({...this.#e,queryNode:He.cloneWithGroupByItems(this.#e.queryNode,NR(e))})}limit(e){return new t({...this.#e,queryNode:He.cloneWithLimit(this.#e.queryNode,qc.create(rt(e)))})}offset(e){return new t({...this.#e,queryNode:He.cloneWithOffset(this.#e.queryNode,xR.create(rt(e)))})}fetch(e,r="only"){return new t({...this.#e,queryNode:He.cloneWithFetch(this.#e.queryNode,kR(e,r))})}top(e,r){return new t({...this.#e,queryNode:ie.cloneWithTop(this.#e.queryNode,ci(e,r))})}union(e){return new t({...this.#e,queryNode:He.cloneWithSetOperations(this.#e.queryNode,ga("union",e,!1))})}unionAll(e){return new t({...this.#e,queryNode:He.cloneWithSetOperations(this.#e.queryNode,ga("union",e,!0))})}intersect(e){return new t({...this.#e,queryNode:He.cloneWithSetOperations(this.#e.queryNode,ga("intersect",e,!1))})}intersectAll(e){return new t({...this.#e,queryNode:He.cloneWithSetOperations(this.#e.queryNode,ga("intersect",e,!0))})}except(e){return new t({...this.#e,queryNode:He.cloneWithSetOperations(this.#e.queryNode,ga("except",e,!1))})}exceptAll(e){return new t({...this.#e,queryNode:He.cloneWithSetOperations(this.#e.queryNode,ga("except",e,!0))})}as(e){return new n_(this,e)}clearSelect(){return new t({...this.#e,queryNode:He.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new t({...this.#e,queryNode:ie.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:He.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new t({...this.#e,queryNode:He.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:ie.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new t({...this.#e,queryNode:He.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}$asTuple(){return new Qe(this.toOperationNode())}$asScalar(){return new Qe(this.toOperationNode())}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Pn){let r=await this.executeTakeFirst();if(r===void 0)throw Ui(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:ie.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};n_=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return tr.create(this.#e.toOperationNode(),we.create(this.#t))}}});var Li,ny=O(()=>{q();Fd();jd();Li=w({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return w({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return w({...t,distinct:!0})},cloneWithOrderBy(t,e,r=!1){let i=r?"withinGroup":"orderBy";return w({...t,[i]:t[i]?lo.cloneWithItems(t[i],e):lo.create(e)})},cloneWithFilter(t,e){return w({...t,filter:t.filter?mr.cloneWithOperation(t.filter,"And",e):mr.create(e)})},cloneWithOrFilter(t,e){return w({...t,filter:t.filter?mr.cloneWithOperation(t.filter,"Or",e):mr.create(e)})},cloneWithOver(t,e){return w({...t,over:e})}})});var i_,o_=O(()=>{q();i_=w({is(t){return t.kind==="FunctionNode"},create(t,e){return w({kind:"FunctionNode",func:t,arguments:e})}})});var Yc,s_,a_=O(()=>{q();ny();ri();ot();Fg();yn();aa();Cn();Yc=class t{#e;constructor(e){this.#e=w(e)}get expressionType(){}as(e){return new s_(this,e)}distinct(){return new t({...this.#e,aggregateFunctionNode:Li.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(...e){return new t({...this.#e,aggregateFunctionNode:ie.cloneWithOrderByItems(this.#e.aggregateFunctionNode,hn(e))})}clearOrderBy(){return new t({...this.#e,aggregateFunctionNode:ie.cloneWithoutOrderBy(this.#e.aggregateFunctionNode)})}withinGroupOrderBy(...e){return new t({...this.#e,aggregateFunctionNode:Li.cloneWithOrderBy(this.#e.aggregateFunctionNode,hn(e),!0)})}filterWhere(...e){return new t({...this.#e,aggregateFunctionNode:Li.cloneWithFilter(this.#e.aggregateFunctionNode,st(e))})}filterWhereRef(e,r,i){return new t({...this.#e,aggregateFunctionNode:Li.cloneWithFilter(this.#e.aggregateFunctionNode,rr(e,r,i))})}over(e){let r=vR();return new t({...this.#e,aggregateFunctionNode:Li.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}},s_=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return tr.create(this.#e.toOperationNode(),we.create(this.#t))}}});function iy(){let t=(r,i)=>new Qe(i_.create(r,uo(i??[]))),e=(r,i)=>new Yc({aggregateFunctionNode:Li.create(r,i?uo(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new Yc({aggregateFunctionNode:Li.create("count",nr(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new Yc({aggregateFunctionNode:Li.create("json_agg",[Ze(r)?qe(r):r.toOperationNode()])})},toJson(r){return new Qe(i_.create("to_json",[Ze(r)?qe(r):r.toOperationNode()]))}})}var oy=O(()=>{Gc();ny();o_();fr();ns();a_();q();hr()});var IR,c_=O(()=>{q();IR=w({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return w({kind:"UnaryOperationNode",operator:t,operand:e})}})});function $R(t,e){return IR.create(pn.create(t),pr(e))}var CR=O(()=>{sa();c_();fr()});var bn,Xd=O(()=>{q();la();bn=w({is(t){return t.kind==="CaseNode"},create(t){return w({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return w({...t,when:w(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return w({...t,when:t.when?w([...t.when.slice(0,-1),On.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return w({...t,...e})}})});var Xc,sy,u_,l_,ay=O(()=>{Gc();q();Xd();la();yn();Pi();Xc=class{#e;constructor(e){this.#e=w(e)}when(...e){return new sy({...this.#e,node:bn.cloneWithWhen(this.#e.node,On.create(st(e)))})}},sy=class{#e;constructor(e){this.#e=w(e)}then(e){return new u_({...this.#e,node:bn.cloneWithThen(this.#e.node,Ag(e)?zd(e):rt(e))})}},u_=class{#e;constructor(e){this.#e=w(e)}when(...e){return new sy({...this.#e,node:bn.cloneWithWhen(this.#e.node,On.create(st(e)))})}else(e){return new l_({...this.#e,node:bn.cloneWith(this.#e.node,{else:Ag(e)?zd(e):rt(e)})})}end(){return new Qe(bn.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Qe(bn.cloneWith(this.#e.node,{isStatement:!0}))}},l_=class{#e;constructor(e){this.#e=w(e)}end(){return new Qe(bn.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Qe(bn.cloneWith(this.#e.node,{isStatement:!0}))}}});var d_,f_=O(()=>{q();d_=w({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return w({kind:"JSONPathLegNode",type:t,value:e})}})});var eu,cy,p_,m_=O(()=>{ri();ot();xg();f_();Ld();bg();Kr();Oi();eu=class{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,r){return Rc.is(this.#e)?new cy(Rc.cloneWithTraversal(this.#e,es.is(this.#e.traversal)?es.cloneWithLeg(this.#e.traversal,d_.create(e,r)):vg.cloneWithValue(this.#e.traversal,Mt.createImmediate(r)))):new cy(es.cloneWithLeg(this.#e,d_.create(e,r)))}},cy=class t extends eu{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new p_(this,e)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}},p_=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return tr.create(this.#e.toOperationNode(),ft(this.#t)?this.#t.toOperationNode():we.create(this.#t))}}});var h_,g_=O(()=>{q();h_=w({is(t){return t.kind==="TupleNode"},create(t){return w({kind:"TupleNode",values:w(t)})}})});function PR(t){return!!(rq.includes(t)||nq.some(e=>e.test(t)))}var rq,nq,OR,y_=O(()=>{q();rq=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],nq=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],OR=w({is(t){return t.kind==="DataTypeNode"},create(t){return w({kind:"DataTypeNode",dataType:t})}})});function li(t){if(ft(t))return t.toOperationNode();if(PR(t))return OR.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}var ef=O(()=>{y_();Kr()});var RR,w_=O(()=>{q();RR=w({is(t){return t.kind==="CastNode"},create(t,e){return w({kind:"CastNode",expression:t,dataType:e})}})});function ry(t=os){function e(n,o,s){return new Qe(Eg(n,o,s))}function r(n,o){return new Qe($R(n,o))}let i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(n){return Gd({queryId:xe(),executor:t,queryNode:He.createFrom(ui(n))})},case(n){return new Xc({node:bn.create(Ur(n)?void 0:pr(n))})},ref(n,o){return Ur(o)?new Qe(mn(n)):new eu(JP(n,o))},jsonPath(){return new eu(es.create())},table(n){return new Qe(qe(n))},val(n){return new Qe(rt(n))},refTuple(...n){return new Qe(h_.create(n.map(pr)))},tuple(...n){return new Qe(h_.create(n.map(rt)))},lit(n){return new Qe(zd(n))},unary:r,not(n){return r("not",n)},exists(n){return r("exists",n)},neg(n){return r("-",n)},between(n,o,s){return new Qe(Xo.create(pr(n),pn.create("between"),Hr.create(rt(o),rt(s))))},betweenSymmetric(n,o,s){return new Qe(Xo.create(pr(n),pn.create("between symmetric"),Hr.create(rt(o),rt(s))))},and(n){return Ar(n)?new Qe(zc(n,"and")):new Qe(iE(n,"and"))},or(n){return Ar(n)?new Qe(zc(n,"or")):new Qe(iE(n,"or"))},parens(...n){let o=st(n);return gn.is(o)?new Qe(o):new Qe(gn.create(o))},cast(n,o){return new Qe(RR.create(pr(n),li(o)))},withSchema(n){return ry(t.withPluginAtFront(new Rn(n)))}});return i.fn=iy(),i.eb=i,i}function ai(t){return ry()}var fa=O(()=>{Xg();da();hr();Kc();Di();oy();fr();yn();Lc();Gc();sa();CR();Pi();Qc();ay();Xd();q();m_();pg();Yo();g_();Ld();ef();w_()});function Jr(t){if(ft(t))return t.toOperationNode();if(Ge(t))return t(ai()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Og(t){if(ft(t))return t.toOperationNode();if(Ge(t))return t(ai()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function co(t){return lg(t)||qP(t)||Ge(t)}var si=O(()=>{dg();Kr();fa();q()});function UR(t){return Rt(t)&&ft(t)&&Ze(t.table)&&Ze(t.alias)}var uy,b_,ly=O(()=>{ri();ot();Kr();hr();q();uy=class{#e;get table(){return this.#e}constructor(e){this.#e=e}as(e){return new b_(this.#e,e)}},b_=class{#e;#t;get table(){return this.#e}get alias(){return this.#t}constructor(e,r){this.#e=e,this.#t=r}toOperationNode(){return tr.create(qe(this.#e),we.create(this.#t))}}});function ui(t){return Ar(t)?t.map(e=>ha(e)):[ha(t)]}function ha(t){return Ze(t)?ZE(t):UR(t)?t.toOperationNode():Og(t)}function ZE(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(DR);return tr.create(qe(r),we.create(i))}else return qe(t)}function qe(t){if(t.includes(".")){let[r,i]=t.split(".").map(DR);return Vr.createWithSchema(r,i)}else return Vr.create(t)}function DR(t){return t.trim()}var hr=O(()=>{q();ri();$c();si();ot();ly()});var v_,x_=O(()=>{q();v_=w({is(t){return t.kind==="AddColumnNode"},create(t){return w({kind:"AddColumnNode",column:t})}})});var pt,tf=O(()=>{q();kr();pt=w({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return w({kind:"ColumnDefinitionNode",column:ze.create(t),dataType:e})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):[e]})},cloneWith(t,e){return w({...t,...e})}})});var S_,N_=O(()=>{q();kr();S_=w({is(t){return t.kind==="DropColumnNode"},create(t){return w({kind:"DropColumnNode",column:ze.create(t)})}})});var A_,E_=O(()=>{q();kr();A_=w({is(t){return t.kind==="RenameColumnNode"},create(t,e){return w({kind:"RenameColumnNode",column:ze.create(t),renameTo:ze.create(e)})}})});var tu,rf=O(()=>{q();ot();tu=w({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return w({kind:"CheckConstraintNode",expression:t,name:e?we.create(e):void 0})}})});var LR,ru,nf=O(()=>{q();LR=["no action","restrict","cascade","set null","set default"],ru=w({is(t){return t.kind==="ReferencesNode"},create(t,e){return w({kind:"ReferencesNode",table:t,columns:w([...e])})},cloneWithOnDelete(t,e){return w({...t,onDelete:e})},cloneWithOnUpdate(t,e){return w({...t,onUpdate:e})}})});function dy(t){return ft(t)?t.toOperationNode():Mt.createImmediate(t)}var __=O(()=>{Kr();Oi()});var of,k_=O(()=>{q();of=w({is(t){return t.kind==="GeneratedNode"},create(t){return w({kind:"GeneratedNode",...t})},createWithExpression(t){return w({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return w({...t,...e})}})});var zR,T_=O(()=>{q();zR=w({is(t){return t.kind==="DefaultValueNode"},create(t){return w({kind:"DefaultValueNode",defaultValue:t})}})});function nu(t){if(LR.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var I_=O(()=>{nf()});var po,fy=O(()=>{rf();nf();Rd();fr();tf();__();k_();T_();I_();po=class t{#e;constructor(e){this.#e=e}autoIncrement(){return new t(pt.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new t(pt.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new t(pt.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=mn(e);if(!r.table||Oc.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new t(pt.cloneWith(this.#e,{references:ru.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new t(pt.cloneWith(this.#e,{references:ru.cloneWithOnDelete(this.#e.references,nu(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new t(pt.cloneWith(this.#e,{references:ru.cloneWithOnUpdate(this.#e.references,nu(e))}))}unique(){return new t(pt.cloneWith(this.#e,{unique:!0}))}notNull(){return new t(pt.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new t(pt.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new t(pt.cloneWith(this.#e,{defaultTo:zR.create(dy(e))}))}check(e){return new t(pt.cloneWith(this.#e,{check:tu.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new t(pt.cloneWith(this.#e,{generated:of.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new t(pt.cloneWith(this.#e,{generated:of.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new t(pt.cloneWith(this.#e,{generated:of.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new t(pt.cloneWith(this.#e,{generated:of.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new t(pt.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new t(pt.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new t(pt.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new t(pt.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var $_,C_=O(()=>{q();$_=w({is(t){return t.kind==="ModifyColumnNode"},create(t){return w({kind:"ModifyColumnNode",column:t})}})});var di,sf=O(()=>{q();ot();nf();di=w({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return w({kind:"ForeignKeyConstraintNode",columns:t,references:ru.create(e,r),name:i?we.create(i):void 0})},cloneWith(t,e){return w({...t,...e})}})});var iu,py=O(()=>{sf();I_();iu=class t{#e;constructor(e){this.#e=e}onDelete(e){return new t(di.cloneWith(this.#e,{onDelete:nu(e)}))}onUpdate(e){return new t(di.cloneWith(this.#e,{onUpdate:nu(e)}))}deferrable(){return new t(di.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new t(di.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new t(di.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new t(di.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var ou,my=O(()=>{q();ou=w({is(t){return t.kind==="AddConstraintNode"},create(t){return w({kind:"AddConstraintNode",constraint:t})}})});var zi,af=O(()=>{q();kr();ot();zi=w({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return w({kind:"UniqueConstraintNode",columns:w(t.map(ze.create)),name:e?we.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return w({...t,...e})}})});var su,hy=O(()=>{q();ot();su=w({is(t){return t.kind==="DropConstraintNode"},create(t){return w({kind:"DropConstraintNode",constraintName:we.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var au,O_=O(()=>{q();kr();au=w({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return w({kind:"AlterColumnNode",column:ze.create(t),[e]:r})}})});var cf,ya,P_=O(()=>{O_();ef();__();cf=class{#e;constructor(e){this.#e=e}setDataType(e){return new ya(au.create(this.#e,"dataType",li(e)))}setDefault(e){return new ya(au.create(this.#e,"setDefault",dy(e)))}dropDefault(){return new ya(au.create(this.#e,"dropDefault",!0))}setNotNull(){return new ya(au.create(this.#e,"setNotNull",!0))}dropNotNull(){return new ya(au.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}},ya=class{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}});var mo,jR=O(()=>{q();mo=class{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var gy,MR=O(()=>{my();ia();q();gy=class t{#e;constructor(e){this.#e=w(e)}onDelete(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}deferrable(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.deferrable()})}notDeferrable(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.initiallyImmediate()})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Me.cloneWithTableProps(this.#e.node,{addConstraint:ou.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var uf,BR=O(()=>{ia();hy();q();uf=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{dropConstraint:su.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{dropConstraint:su.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{dropConstraint:su.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var ho,lf=O(()=>{q();kr();ot();ho=w({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return w({kind:"PrimaryKeyConstraintNode",columns:w(t.map(ze.create)),name:e?we.create(e):void 0})},cloneWith(t,e){return w({...t,...e})}})});var as,yy=O(()=>{q();ot();as=w({is(t){return t.kind==="AddIndexNode"},create(t){return w({kind:"AddIndexNode",name:we.create(t)})},cloneWith(t,e){return w({...t,...e})},cloneWithColumns(t,e){return w({...t,columns:[...t.columns||[],...e]})}})});var wy,qR=O(()=>{yy();ia();$n();fr();q();wy=class t{#e;constructor(e){this.#e=w(e)}unique(){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addIndex:as.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addIndex:as.cloneWithColumns(this.#e.node.addIndex,[Uc(e)])})})}columns(e){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addIndex:as.cloneWithColumns(this.#e.node.addIndex,e.map(Uc))})})}expression(e){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addIndex:as.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new t({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addIndex:as.cloneWith(this.#e.node.addIndex,{using:Be.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var cu,R_=O(()=>{af();cu=class t{#e;constructor(e){this.#e=e}nullsNotDistinct(){return new t(zi.cloneWith(this.#e,{nullsNotDistinct:!0}))}deferrable(){return new t(zi.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new t(zi.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new t(zi.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new t(zi.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var uu,U_=O(()=>{lf();uu=class t{#e;constructor(e){this.#e=e}deferrable(){return new t(ho.cloneWith(this.#e,{deferrable:!0}))}notDeferrable(){return new t(ho.cloneWith(this.#e,{deferrable:!1}))}initiallyDeferred(){return new t(ho.cloneWith(this.#e,{initiallyDeferred:!0}))}initiallyImmediate(){return new t(ho.cloneWith(this.#e,{initiallyDeferred:!1}))}$call(e){return e(this)}toOperationNode(){return this.#e}}});var lu,D_=O(()=>{lu=class{#e;constructor(e){this.#e=e}$call(e){return e(this)}toOperationNode(){return this.#e}}});var WR,L_=O(()=>{q();ot();WR=w({is(t){return t.kind==="RenameConstraintNode"},create(t,e){return w({kind:"RenameConstraintNode",oldName:we.create(t),newName:we.create(e)})}})});var by,wa,z_=O(()=>{x_();ia();tf();N_();ot();E_();q();fy();C_();ef();py();my();af();rf();sf();kr();hr();hy();P_();jR();MR();BR();lf();Cd();yy();qR();R_();U_();D_();L_();by=class{#e;constructor(e){this.#e=w(e)}renameTo(e){return new mo({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{renameTo:qe(e)})})}setSchema(e){return new mo({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{setSchema:we.create(e)})})}alterColumn(e,r){let i=r(new cf(e));return new wa({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new wa({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,S_.create(e))})}renameColumn(e,r){return new wa({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,A_.create(e,r))})}addColumn(e,r,i=Dr){let n=i(new po(pt.create(e,li(r))));return new wa({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,v_.create(n.toOperationNode()))})}modifyColumn(e,r,i=Dr){let n=i(new po(pt.create(e,li(r))));return new wa({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,$_.create(n.toOperationNode()))})}addUniqueConstraint(e,r,i=Dr){let n=i(new cu(zi.create(r,e)));return new mo({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addConstraint:ou.create(n.toOperationNode())})})}addCheckConstraint(e,r,i=Dr){let n=i(new lu(tu.create(r.toOperationNode(),e)));return new mo({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addConstraint:ou.create(n.toOperationNode())})})}addForeignKeyConstraint(e,r,i,n,o=Dr){let s=o(new iu(di.create(r.map(ze.create),qe(i),n.map(ze.create),e)));return new gy({...this.#e,constraintBuilder:s})}addPrimaryKeyConstraint(e,r,i=Dr){let n=i(new uu(ho.create(r,e)));return new mo({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addConstraint:ou.create(n.toOperationNode())})})}dropConstraint(e){return new uf({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{dropConstraint:su.create(e)})})}renameConstraint(e,r){return new uf({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{renameConstraint:WR.create(e,r)})})}addIndex(e){return new wy({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{addIndex:as.create(e)})})}dropIndex(e){return new mo({...this.#e,node:Me.cloneWithTableProps(this.#e.node,{dropIndex:Go.create(e)})})}$call(e){return e(this)}},wa=class t{#e;constructor(e){this.#e=w(e)}alterColumn(e,r){let i=r(new cf(e));return new t({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new t({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,S_.create(e))})}renameColumn(e,r){return new t({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,A_.create(e,r))})}addColumn(e,r,i=Dr){let n=i(new po(pt.create(e,li(r))));return new t({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,v_.create(n.toOperationNode()))})}modifyColumn(e,r,i=Dr){let n=i(new po(pt.create(e,li(r))));return new t({...this.#e,node:Me.cloneWithColumnAlteration(this.#e.node,$_.create(n.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var du,j_=O(()=>{Kg();Dc();Oi();du=class extends Vc{transformPrimitiveValueList(e){return ts.create(e.values.map(Mt.createImmediate))}transformValue(e){return Mt.createImmediate(e.value)}}});var vy,M_=O(()=>{og();$n();fr();hr();q();yn();Cn();j_();vy=class t{#e;constructor(e){this.#e=w(e)}ifNotExists(){return new t({...this.#e,node:ti.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new t({...this.#e,node:ti.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new t({...this.#e,node:ti.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new t({...this.#e,node:ti.cloneWith(this.#e.node,{table:qe(e)})})}column(e){return new t({...this.#e,node:ti.cloneWithColumns(this.#e.node,[Uc(e)])})}columns(e){return new t({...this.#e,node:ti.cloneWithColumns(this.#e.node,e.map(Uc))})}expression(e){return new t({...this.#e,node:ti.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new t({...this.#e,node:ti.cloneWith(this.#e.node,{using:Be.createWithSql(e)})})}where(...e){let r=new du;return new t({...this.#e,node:ie.cloneWithWhere(this.#e.node,r.transformNode(st(e),this.#e.queryId))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var xy,B_=O(()=>{ag();q();xy=class t{#e;constructor(e){this.#e=w(e)}ifNotExists(){return new t({...this.#e,node:sg.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});function FR(t){if(BP.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var VR=O(()=>{Ic()});var Sy,q_=O(()=>{tf();Ic();fy();q();sf();kr();py();ef();lf();af();rf();hr();VR();R_();si();U_();D_();Sy=class t{#e;constructor(e){this.#e=w(e)}temporary(){return new t({...this.#e,node:Er.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new t({...this.#e,node:Er.cloneWith(this.#e.node,{onCommit:FR(e)})})}ifNotExists(){return new t({...this.#e,node:Er.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=Dr){let n=i(new po(pt.create(e,li(r))));return new t({...this.#e,node:Er.cloneWithColumn(this.#e.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,r,i=Dr){let n=i(new uu(ho.create(r,e)));return new t({...this.#e,node:Er.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addUniqueConstraint(e,r,i=Dr){let n=i(new cu(zi.create(r,e)));return new t({...this.#e,node:Er.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addCheckConstraint(e,r,i=Dr){let n=i(new lu(tu.create(r.toOperationNode(),e)));return new t({...this.#e,node:Er.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addForeignKeyConstraint(e,r,i,n,o=Dr){let s=o(new iu(di.create(r.map(ze.create),qe(i),n.map(ze.create),e)));return new t({...this.#e,node:Er.cloneWithConstraint(this.#e.node,s.toOperationNode())})}modifyFront(e){return new t({...this.#e,node:Er.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new t({...this.#e,node:Er.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new t({...this.#e,node:Er.cloneWith(this.#e.node,{selectQuery:Jr(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var Ny,W_=O(()=>{Cd();hr();q();Ny=class t{#e;constructor(e){this.#e=w(e)}on(e){return new t({...this.#e,node:Go.cloneWith(this.#e.node,{table:qe(e)})})}ifExists(){return new t({...this.#e,node:Go.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Go.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var Ay,F_=O(()=>{cg();q();Ay=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:Od.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Od.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var Ey,V_=O(()=>{ug();q();Ey=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:Pd.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Pd.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var fi,df=O(()=>{q();ao();fi=w({is(t){return t.kind==="CreateViewNode"},create(t){return w({kind:"CreateViewNode",name:_r.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var _y,KR=O(()=>{j_();_y=class{#e=new du;transformQuery(e){return this.#e.transformNode(e.node,e.queryId)}transformResult(e){return Promise.resolve(e.result)}}});var ky,K_=O(()=>{q();df();fr();KR();ky=class t{#e;constructor(e){this.#e=w(e)}temporary(){return new t({...this.#e,node:fi.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new t({...this.#e,node:fi.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new t({...this.#e,node:fi.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new t({...this.#e,node:fi.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new t({...this.#e,node:fi.cloneWith(this.#e.node,{columns:e.map(tE)})})}as(e){let r=e.withPlugin(new _y).toOperationNode();return new t({...this.#e,node:fi.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var fu,Ty=O(()=>{q();ao();fu=w({is(t){return t.kind==="DropViewNode"},create(t){return w({kind:"DropViewNode",name:_r.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var Iy,H_=O(()=>{q();Ty();Iy=class t{#e;constructor(e){this.#e=w(e)}materialized(){return new t({...this.#e,node:fu.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new t({...this.#e,node:fu.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:fu.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var $y,Cy=O(()=>{q();Dc();Oi();$y=w({is(t){return t.kind==="CreateTypeNode"},create(t){return w({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return w({...t,enum:ts.create(e.map(Mt.createImmediate))})}})});var Oy,J_=O(()=>{q();Cy();Oy=class t{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new t({...this.#e,node:$y.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var Py,Ry=O(()=>{q();Py=w({is(t){return t.kind==="DropTypeNode"},create(t){return w({kind:"DropTypeNode",name:t})},cloneWith(t,e){return w({...t,...e})}})});var Uy,Q_=O(()=>{Ry();q();Uy=class t{#e;constructor(e){this.#e=w(e)}ifExists(){return new t({...this.#e,node:Py.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});function Z_(t){if(t.includes(".")){let r=t.split(".").map(iq);if(r.length===2)return _r.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return _r.create(t)}function iq(t){return t.trim()}var HR=O(()=>{ao()});var pu,Dy=O(()=>{q();ao();pu=w({is(t){return t.kind==="RefreshMaterializedViewNode"},create(t){return w({kind:"RefreshMaterializedViewNode",name:_r.create(t)})},cloneWith(t,e){return w({...t,...e})}})});var Ly,G_=O(()=>{q();Dy();Ly=class t{#e;constructor(e){this.#e=w(e)}concurrently(){return new t({...this.#e,node:pu.cloneWith(this.#e.node,{concurrently:!0,withNoData:!1})})}withData(){return new t({...this.#e,node:pu.cloneWith(this.#e.node,{withNoData:!1})})}withNoData(){return new t({...this.#e,node:pu.cloneWith(this.#e.node,{withNoData:!0,concurrently:!1})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile())}}});var zy,Y_=O(()=>{ia();og();ag();Ic();Cd();cg();ug();hr();z_();M_();B_();q_();W_();F_();V_();Di();Kc();K_();df();H_();Ty();J_();Q_();Cy();Ry();HR();G_();Dy();zy=class t{#e;constructor(e){this.#e=e}createTable(e){return new Sy({queryId:xe(),executor:this.#e,node:Er.create(qe(e))})}dropTable(e){return new Ey({queryId:xe(),executor:this.#e,node:Pd.create(qe(e))})}createIndex(e){return new vy({queryId:xe(),executor:this.#e,node:ti.create(e)})}dropIndex(e){return new Ny({queryId:xe(),executor:this.#e,node:Go.create(e)})}createSchema(e){return new xy({queryId:xe(),executor:this.#e,node:sg.create(e)})}dropSchema(e){return new Ay({queryId:xe(),executor:this.#e,node:Od.create(e)})}alterTable(e){return new by({queryId:xe(),executor:this.#e,node:Me.create(qe(e))})}createView(e){return new ky({queryId:xe(),executor:this.#e,node:fi.create(e)})}refreshMaterializedView(e){return new Ly({queryId:xe(),executor:this.#e,node:pu.create(e)})}dropView(e){return new Iy({queryId:xe(),executor:this.#e,node:fu.create(e)})}createType(e){return new Oy({queryId:xe(),executor:this.#e,node:$y.create(Z_(e))})}dropType(e){return new Uy({queryId:xe(),executor:this.#e,node:Py.create(Z_(e))})}withPlugin(e){return new t(this.#e.withPlugin(e))}withoutPlugins(){return new t(this.#e.withoutPlugins())}withSchema(e){return new t(this.#e.withPluginAtFront(new Rn(e)))}}});var jy,X_=O(()=>{Ud();ly();jy=class{ref(e){return new hg(e)}table(e){return new uy(e)}}});var My,ek=O(()=>{My=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}}});var By,tk=O(()=>{VE();By=class t extends Jc{#e;#t;#r;constructor(e,r,i,n=[]){super(n),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e,r){return this.#e.compileQuery(e,r)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new t(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new t(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new t(this.#e,this.#t,this.#r,[])}}});function qy(){return typeof performance<"u"&&Ge(performance.now)?performance.now():Date.now()}var JR=O(()=>{q()});var Wy,QR=O(()=>{JR();Wy=class{#e;#t;#r;#n;#i;#o=new WeakSet;constructor(e,r){this.#n=!1,this.#e=e,this.#t=r}async init(){if(this.#i)throw new Error("driver has already been destroyed");this.#r||(this.#r=this.#e.init().then(()=>{this.#n=!0}).catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){if(this.#i)throw new Error("driver has already been destroyed");this.#n||await this.init();let e=await this.#e.acquireConnection();return this.#o.has(e)||(this.#a()&&this.#s(e),this.#o.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}savepoint(e,r,i){if(this.#e.savepoint)return this.#e.savepoint(e,r,i);throw new Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(e,r,i){if(this.#e.rollbackToSavepoint)return this.#e.rollbackToSavepoint(e,r,i);throw new Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(e,r,i){if(this.#e.releaseSavepoint)return this.#e.releaseSavepoint(e,r,i);throw new Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){this.#r&&(await this.#r,this.#i||(this.#i=this.#e.destroy().catch(e=>(this.#i=void 0,Promise.reject(e)))),await this.#i)}#a(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#s(e){let r=e.executeQuery,i=e.streamQuery,n=this;e.executeQuery=async o=>{let s,a=qy();try{return await r.call(e,o)}catch(c){throw s=c,await n.#c(c,o,a),c}finally{s||await n.#u(o,a)}},e.streamQuery=async function*(o,s){let a,c=qy();try{for await(let u of i.call(e,o,s))yield u}catch(u){throw a=u,await n.#c(u,o,c),u}finally{a||await n.#u(o,c,!0)}}}async#c(e,r,i){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#l(i)}))}async#u(e,r,i=!1){await this.#t.query(()=>({level:"query",isStream:i,query:e,queryDurationMillis:this.#l(r)}))}#l(e){return qy()-e}}});var oq,mu,rk=O(()=>{oq=()=>{},mu=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(oq);return this.#t=this.#r(e).finally(()=>{this.#t=void 0}),this.#t}async#r(e){return await e(this.#e)}}});function nk(t){if(t.accessMode&&!sq.includes(t.accessMode))throw new Error(`invalid transaction access mode ${t.accessMode}`);if(t.isolationLevel&&!aq.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var sq,aq,ik=O(()=>{sq=["read only","read write"],aq=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});function uq(t){if(t.level==="query"){let e=`kysely:query:${t.isStream?"stream:":""}`;console.log(`${e} ${t.query.sql}`),console.log(`${e} duration: ${t.queryDurationMillis.toFixed(1)}ms`)}else t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}var cq,_me,Fy,ok=O(()=>{q();cq=["query","error"],_me=w(cq),Fy=class{#e;#t;constructor(e){Ge(e)?(this.#t=e,this.#e=w({query:!0,error:!0})):(this.#t=uq,this.#e=w({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}});function ZR(t){return Rt(t)&&Ge(t.compile)}var sk=O(()=>{q()});function lq(t){return Rt(t)&&Rt(t.config)&&Rt(t.driver)&&Rt(t.executor)&&Rt(t.dialect)}function va(t){if(t.isCommitted)throw new Error("Transaction is already committed");if(t.isRolledBack)throw new Error("Transaction is already rolled back")}var xa,Vy,ak,ck,uk,lk,ba,dk,GR=O(()=>{Y_();X_();ek();Yg();tk();q();QR();rk();ik();oy();ok();Di();sk();ay();Xd();si();Kc();FE();Dd();Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");xa=class t extends Zc{#e;constructor(e){let r,i;if(lq(e))r={executor:e.executor},i={...e};else{let n=e.dialect,o=n.createDriver(),s=n.createQueryCompiler(),a=n.createAdapter(),c=new Fy(e.log??[]),u=new Wy(o,c),l=new My(u),f=new By(s,a,l,e.plugins??[]);r={executor:f},i={config:e,executor:f,dialect:n,driver:u}}super(r),this.#e=w(i)}get schema(){return new zy(this.#e.executor)}get dynamic(){return new jy}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new Xc({node:bn.create(Ur(e)?void 0:Jr(e))})}get fn(){return iy()}transaction(){return new ck({...this.#e})}startTransaction(){return new uk({...this.#e})}connection(){return new ak({...this.#e})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Rn(e))})}withTables(){return new t({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r){r!==void 0&&Ci("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let i=ZR(e)?e.compile():e;return this.getExecutor().executeQuery(i)}async[Symbol.asyncDispose](){await this.destroy()}},Vy=class t extends xa{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Rn(e))})}withTables(){return new t({...this.#e})}};ak=class{#e;constructor(e){this.#e=w(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new mu(r)),n=new xa({...this.#e,executor:i});return await e(n)})}},ck=class t{#e;constructor(e){this.#e=w(e)}setAccessMode(e){return new t({...this.#e,accessMode:e})}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,accessMode:i,...n}=this.#e,o={isolationLevel:r,accessMode:i};return nk(o),this.#e.executor.provideConnection(async s=>{let a=this.#e.executor.withConnectionProvider(new mu(s)),c=new Vy({...n,executor:a}),u=!1;try{await this.#e.driver.beginTransaction(s,o),u=!0;let l=await e(c);return await this.#e.driver.commitTransaction(s),l}catch(l){throw u&&await this.#e.driver.rollbackTransaction(s),l}})}},uk=class t{#e;constructor(e){this.#e=w(e)}setAccessMode(e){return new t({...this.#e,accessMode:e})}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(){let{isolationLevel:e,accessMode:r,...i}=this.#e,n={isolationLevel:e,accessMode:r};nk(n);let o=await Jg(this.#e.executor);return await this.#e.driver.beginTransaction(o.connection,n),new lk({...i,connection:o,executor:this.#e.executor.withConnectionProvider(new mu(o.connection))})}},lk=class t extends Vy{#e;#t;#r;constructor(e){let r={isCommitted:!1,isRolledBack:!1};e={...e,executor:new dk(e.executor,r)};let{connection:i,...n}=e;super(n),this.#e=w(e),this.#r=r;let o=xe();this.#t=s=>e.executor.compileQuery(s,o)}get isCommitted(){return this.#r.isCommitted}get isRolledBack(){return this.#r.isRolledBack}commit(){return va(this.#r),new ba(async()=>{await this.#e.driver.commitTransaction(this.#e.connection.connection),this.#r.isCommitted=!0,this.#e.connection.release()})}rollback(){return va(this.#r),new ba(async()=>{await this.#e.driver.rollbackTransaction(this.#e.connection.connection),this.#r.isRolledBack=!0,this.#e.connection.release()})}savepoint(e){return va(this.#r),new ba(async()=>(await this.#e.driver.savepoint?.(this.#e.connection.connection,e,this.#t),new t({...this.#e})))}rollbackToSavepoint(e){return va(this.#r),new ba(async()=>(await this.#e.driver.rollbackToSavepoint?.(this.#e.connection.connection,e,this.#t),new t({...this.#e})))}releaseSavepoint(e){return va(this.#r),new ba(async()=>(await this.#e.driver.releaseSavepoint?.(this.#e.connection.connection,e,this.#t),new t({...this.#e})))}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new Rn(e))})}withTables(){return new t({...this.#e})}},ba=class{#e;constructor(e){this.#e=e}async execute(){return await this.#e()}};dk=class t{#e;#t;constructor(e,r){e instanceof t?this.#e=e.#e:this.#e=e,this.#t=r}get adapter(){return this.#e.adapter}get plugins(){return this.#e.plugins}transformQuery(e,r){return this.#e.transformQuery(e,r)}compileQuery(e,r){return this.#e.compileQuery(e,r)}provideConnection(e){return this.#e.provideConnection(e)}executeQuery(e){return va(this.#t),this.#e.executeQuery(e)}stream(e,r){return va(this.#t),this.#e.stream(e,r)}withConnectionProvider(e){return new t(this.#e.withConnectionProvider(e),this.#t)}withPlugin(e){return new t(this.#e.withPlugin(e),this.#t)}withPlugins(e){return new t(this.#e.withPlugins(e),this.#t)}withPluginAtFront(e){return new t(this.#e.withPluginAtFront(e),this.#t)}withoutPlugins(){return new t(this.#e.withoutPlugins(),this.#t)}}});var YR=O(()=>{});var XR=O(()=>{});var eU=O(()=>{});var tU=O(()=>{});var rU=O(()=>{});function go(t){return new fk(t)}var fk,pk,mk=O(()=>{ri();q();Qc();ot();Kr();fk=class t{#e;constructor(e){this.#e=w(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new pk(this,e)}$castTo(){return new t({...this.#e})}$notNull(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,plugins:this.#e.plugins!==void 0?w([...this.#e.plugins,e]):w([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#n(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#n(r))}#t(e){let r=e!==void 0?e.getExecutor():os;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#n(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};pk=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return tr.create(this.#e.toOperationNode(),ft(this.#t)?this.#t.toOperationNode():we.create(this.#t))}}});function nU(t){return ft(t)?t.toOperationNode():rt(t)}var Te,cs=O(()=>{ot();Kr();$n();Oi();fr();hr();Pi();Di();mk();Te=Object.assign((t,...e)=>go({queryId:xe(),rawNode:Be.create(t,e?.map(nU)??[])}),{ref(t){return go({queryId:xe(),rawNode:Be.createWithChild(mn(t))})},val(t){return go({queryId:xe(),rawNode:Be.createWithChild(rt(t))})},value(t){return this.val(t)},table(t){return go({queryId:xe(),rawNode:Be.createWithChild(qe(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",go({queryId:xe(),rawNode:Be.create(e,t.map(we.create))})},lit(t){return go({queryId:xe(),rawNode:Be.createWithChild(Mt.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return go({queryId:xe(),rawNode:Be.createWithSql(t)})},join(t,e=Te`, `){let r=new Array(Math.max(2*t.length-1,0)),i=e.toOperationNode();for(let n=0;n<t.length;++n)r[2*n]=nU(t[n]),n!==t.length-1&&(r[2*n+1]=i);return go({queryId:xe(),rawNode:Be.createWithChildren(r)})}})});var iU=O(()=>{});var oU=O(()=>{});var Ky,hk=O(()=>{q();Ky=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=w({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}});var dq,Qr,fq,sU,pq,Sa=O(()=>{Ic();ua();hk();sa();Lc();$n();q();df();ty();la();Dd();dq=/'/g,Qr=class extends Ky{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e,r){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),w({query:e,queryId:r,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!gn.is(this.parentNode)&&!Ct.is(this.parentNode)&&!Er.is(this.parentNode)&&!fi.is(this.parentNode)&&!ey.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let n=0;n<=i;n++)this.visitNode(e[n]),n<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.parentNode!==void 0&&!gn.is(this.parentNode)&&!Be.is(this.parentNode)&&!On.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&(Ci("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),e.orAction&&(this.append(" "),this.visitNode(e.orAction)),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.parentNode!==void 0&&!gn.is(this.parentNode)&&!Be.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Ze(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(pq[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let n=0;n<r.length;++n)this.append(r[n]),i.length>n&&this.visitNode(i[n])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.collation&&(this.append(" "),this.visitNode(e.collation)),e.direction&&(this.append(" "),this.visitNode(e.direction)),e.nulls&&(this.append(" nulls "),this.append(e.nulls))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.parentNode!==void 0&&!gn.is(this.parentNode)&&!Be.is(this.parentNode)&&!On.is(this.parentNode);if(this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins){if(!e.from)throw new Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(e.joins," ")}e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}buildDeferrable(e){e.deferrable!==void 0&&(e.deferrable?this.append(" deferrable"):this.append(" not deferrable")),e.initiallyDeferred!==void 0&&(e.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate)),this.buildDeferrable(e)}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),so(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.renameConstraint&&this.visitNode(e.renameConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitRenameConstraint(e){this.append("rename constraint "),this.visitNode(e.oldName),this.append(" to "),this.visitNode(e.newName)}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitRefreshMaterializedView(e){this.append("refresh materialized view "),e.concurrently&&this.append("concurrently "),this.visitNode(e.name),e.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(fq[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.withinGroup&&(this.append(" within group ("),this.visitNode(e.withinGroup),this.append(")")),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return pn.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(let r of e.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(e){let r=e.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(e.value)),r&&this.append("]")}visitJSONOperatorChain(e){for(let r=0,i=e.values.length;r<i;r++)r===i-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[r])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.returning&&(this.append(" "),this.visitNode(e.returning)),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}visitOrAction(e){this.append(e.action)}visitCollate(e){this.append("collate "),this.visitNode(e.collation)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),n="";for(let o of e)n+=o,o===r?n+=r:o===i&&(n+=i);return n}sanitizeStringLiteral(e){return e.replace(dq,"''")}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Ze(e))this.appendStringLiteral(e);else if(ei(e)||so(e)||Zo(e))this.append(e.toString());else if(Qo(e))this.append("null");else if(ig(e))this.appendImmediateValue(e.toISOString());else throw new Error(`invalid immediate value ${e}`)}appendStringLiteral(e){this.append("'"),this.append(this.sanitizeStringLiteral(e)),this.append("'")}sortSelectModifiers(e){return e.sort((r,i)=>r.modifier&&i.modifier?sU[r.modifier]-sU[i.modifier]:1),w(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}},fq=w({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),sU=w({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),pq=w({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})});var Tt,hu=O(()=>{$n();q();Di();Tt=w({raw(t,e=[]){return w({sql:t,query:Be.createWithSql(t),parameters:w(e),queryId:xe()})}})});var aU=O(()=>{});var cU=O(()=>{});var uU=O(()=>{});var lU=O(()=>{});var dU=O(()=>{});var ji,gu=O(()=>{ji=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}});var fU=O(()=>{});function Un(t,e){return Be.createWithChildren([Be.createWithSql(`${t} `),we.create(e)])}var Hy=O(()=>{ot();$n()});var Jy,gk,yk,wk=O(()=>{da();Hy();hu();q();Di();Jy=class{#e;#t=new yk;#r;#n;constructor(e){this.#e=w({...e})}async init(){this.#r=Ge(this.#e.database)?await this.#e.database():this.#e.database,this.#n=new gk(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#n)}async acquireConnection(){return await this.#t.lock(),this.#n}async beginTransaction(e){await e.executeQuery(Tt.raw("begin"))}async commitTransaction(e){await e.executeQuery(Tt.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(Tt.raw("rollback"))}async savepoint(e,r,i){await e.executeQuery(i(Un("savepoint",r),xe()))}async rollbackToSavepoint(e,r,i){await e.executeQuery(i(Un("rollback to",r),xe()))}async releaseSavepoint(e,r,i){await e.executeQuery(i(Un("release",r),xe()))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},gk=class{#e;constructor(e){this.#e=e}executeQuery(e){let{sql:r,parameters:i}=e,n=this.#e.prepare(r);if(n.reader)return Promise.resolve({rows:n.all(i)});let{changes:o,lastInsertRowid:s}=n.run(i);return Promise.resolve({numAffectedRows:o!=null?BigInt(o):void 0,insertId:s!=null?BigInt(s):void 0,rows:[]})}async*streamQuery(e,r){let{sql:i,parameters:n,query:o}=e,s=this.#e.prepare(i);if(He.is(o)){let a=s.iterate(n);for(let c of a)yield{rows:[c]}}else throw new Error("Sqlite driver only supports streaming of select queries")}},yk=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(e=>{this.#t=e})}unlock(){let e=this.#t;this.#e=void 0,this.#t=void 0,e?.()}}});var mq,Qy,bk=O(()=>{Sa();mq=/"/g,Qy=class extends Qr{visitOrAction(e){this.append("or "),this.append(e.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(mq,'""')}visitDefaultInsertValue(e){this.append("null")}}});var Zr,Dn,Vhe,Na=O(()=>{q();Zr="kysely_migration",Dn="kysely_migration_lock",Vhe=w({__noMigrations__:!0})});var Zy,vk=O(()=>{Na();cs();Zy=class{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){return await this.#r(e)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e,r){let i=e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");return r.withInternalKyselyTables||(i=i.where("name","!=",Zr).where("name","!=",Dn)),i}async#r(e){let r=await this.#t(this.#e,e).execute(),i=await this.#e.with("table_list",o=>this.#t(o,e)).selectFrom(["table_list as tl",Te`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),n={};for(let o of i)n[o.table]??=[],n[o.table].push(o);return r.map(({name:o,sql:s,type:a})=>{let c=s?.split(/[\(\),]/)?.find(l=>l.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),u=n[o]??[];if(!c){let l=u.filter(f=>f.pk>0);l.length===1&&l[0].type.toLowerCase()==="integer"&&(c=l[0].name)}return{name:o,isView:a==="view",columns:u.map(l=>({name:l.name,dataType:l.type,isNullable:!l.notnull,isAutoIncrementing:l.name===c,hasDefaultValue:l.dflt_value!=null,comment:void 0}))}})}}});var Gy,xk=O(()=>{gu();Gy=class extends ji{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}}});var ff,pU=O(()=>{wk();bk();vk();xk();q();ff=class{#e;constructor(e){this.#e=w({...e})}createDriver(){return new Jy(this.#e)}createQueryCompiler(){return new Qy}createAdapter(){return new Gy}createIntrospector(e){return new Zy(e)}}});var mU=O(()=>{});var hq,Yy,Sk=O(()=>{Sa();hq=/"/g,Yy=class extends Qr{sanitizeIdentifier(e){return e.replace(hq,'""')}}});var Xy,Nk=O(()=>{Na();q();cs();Xy=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",Te`col_description(a.attrelid, a.attnum)`.as("column_description"),Te`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(Te`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",Zr).where("c.relname","!=",Dn));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(o=>o.name===i.table&&o.schema===i.schema);return n||(n=w({name:i.table,isView:i.table_type==="v",schema:i.schema,columns:[]}),r.push(n)),n.columns.push(w({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:i.auto_incrementing!==null,hasDefaultValue:i.has_default,comment:i.column_description??void 0})),r},[])}}});var gq,ew,Ak=O(()=>{cs();gu();gq=BigInt("3853314791062309107"),ew=class extends ji{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,r){await Te`select pg_advisory_xact_lock(${Te.lit(gq)})`.execute(e)}async releaseMigrationLock(e,r){}}});function yu(t,e){if(yq(t)&&e.stack){let r=e.stack.split(`
`).slice(1).join(`
`);return t.stack+=`
${r}`,t}return t}function yq(t){return Rt(t)&&Ze(t.stack)}var tw=O(()=>{q()});function wq(t){return Rt(t)&&"insertId"in t&&"affectedRows"in t}var hU,rw,Ek,_k=O(()=>{Hy();hu();q();Di();tw();hU=Symbol(),rw=class{#e;#t=new WeakMap;#r;constructor(e){this.#e=w({...e})}async init(){this.#r=Ge(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#n(),r=this.#t.get(e);return r||(r=new Ek(e),this.#t.set(e,r),this.#e?.onCreateConnection&&await this.#e.onCreateConnection(r)),this.#e?.onReserveConnection&&await this.#e.onReserveConnection(r),r}async#n(){return new Promise((e,r)=>{this.#r.getConnection(async(i,n)=>{i?r(i):e(n)})})}async beginTransaction(e,r){if(r.isolationLevel||r.accessMode){let i=[];r.isolationLevel&&i.push(`isolation level ${r.isolationLevel}`),r.accessMode&&i.push(r.accessMode);let n=`set transaction ${i.join(", ")}`;await e.executeQuery(Tt.raw(n))}await e.executeQuery(Tt.raw("begin"))}async commitTransaction(e){await e.executeQuery(Tt.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(Tt.raw("rollback"))}async savepoint(e,r,i){await e.executeQuery(i(Un("savepoint",r),xe()))}async rollbackToSavepoint(e,r,i){await e.executeQuery(i(Un("rollback to",r),xe()))}async releaseSavepoint(e,r,i){await e.executeQuery(i(Un("release savepoint",r),xe()))}async releaseConnection(e){e[hU]()}async destroy(){return new Promise((e,r)=>{this.#r.end(i=>{i?r(i):e()})})}};Ek=class{#e;constructor(e){this.#e=e}async executeQuery(e){try{let r=await this.#t(e);if(wq(r)){let{insertId:i,affectedRows:n,changedRows:o}=r;return{insertId:i!=null&&i.toString()!=="0"?BigInt(i):void 0,numAffectedRows:n!=null?BigInt(n):void 0,numChangedRows:o!=null?BigInt(o):void 0,rows:[]}}else if(Array.isArray(r))return{rows:r};return{rows:[]}}catch(r){throw yu(r,new Error)}}#t(e){return new Promise((r,i)=>{this.#e.query(e.sql,e.parameters,(n,o)=>{n?i(n):r(o)})})}async*streamQuery(e,r){let i=this.#e.query(e.sql,e.parameters).stream({objectMode:!0});try{for await(let n of i)yield{rows:[n]}}catch(n){if(n&&typeof n=="object"&&"code"in n&&n.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw n}}[hU](){this.#e.release()}}});var bq,nw,kk=O(()=>{Sa();bq=/`/g,nw=class extends Qr{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(bq,"``")}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.using&&(this.append(" using "),this.visitNode(e.using)),e.table&&(this.append(" on "),this.visitNode(e.table)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}}});var iw,Tk=O(()=>{Na();q();cs();iw=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",n=>n.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",Te`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",Zr).where("columns.TABLE_NAME","!=",Dn));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(o=>o.name===i.TABLE_NAME);return n||(n=w({name:i.TABLE_NAME,isView:i.TABLE_TYPE==="VIEW",schema:i.TABLE_SCHEMA,columns:[]}),r.push(n)),n.columns.push(w({name:i.COLUMN_NAME,dataType:i.DATA_TYPE,isNullable:i.IS_NULLABLE==="YES",isAutoIncrementing:i.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:i.COLUMN_DEFAULT!==null,comment:i.COLUMN_COMMENT===""?void 0:i.COLUMN_COMMENT})),r},[])}}});var gU,vq,ow,Ik=O(()=>{cs();gu();gU="ea586330-2c93-47c8-908d-981d9d270f9d",vq=3600,ow=class extends ji{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e,r){await Te`select get_lock(${Te.lit(gU)}, ${Te.lit(vq)})`.execute(e)}async releaseMigrationLock(e,r){await Te`select release_lock(${Te.lit(gU)})`.execute(e)}}});var pf,yU=O(()=>{_k();kk();Tk();Ik();pf=class{#e;constructor(e){this.#e=e}createDriver(){return new rw(this.#e)}createQueryCompiler(){return new nw}createAdapter(){return new ow}createIntrospector(e){return new iw(e)}}});var wU=O(()=>{});var bU,sw,$k,Ck=O(()=>{Hy();hu();q();Di();tw();bU=Symbol(),sw=class{#e;#t=new WeakMap;#r;constructor(e){this.#e=w({...e})}async init(){this.#r=Ge(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#r.connect(),r=this.#t.get(e);return r||(r=new $k(e,{cursor:this.#e.cursor??null}),this.#t.set(e,r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(r)),this.#e.onReserveConnection&&await this.#e.onReserveConnection(r),r}async beginTransaction(e,r){if(r.isolationLevel||r.accessMode){let i="start transaction";r.isolationLevel&&(i+=` isolation level ${r.isolationLevel}`),r.accessMode&&(i+=` ${r.accessMode}`),await e.executeQuery(Tt.raw(i))}else await e.executeQuery(Tt.raw("begin"))}async commitTransaction(e){await e.executeQuery(Tt.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(Tt.raw("rollback"))}async savepoint(e,r,i){await e.executeQuery(i(Un("savepoint",r),xe()))}async rollbackToSavepoint(e,r,i){await e.executeQuery(i(Un("rollback to",r),xe()))}async releaseSavepoint(e,r,i){await e.executeQuery(i(Un("release",r),xe()))}async releaseConnection(e){e[bU]()}async destroy(){if(this.#r){let e=this.#r;this.#r=void 0,await e.end()}}},$k=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}async executeQuery(e){try{let{command:r,rowCount:i,rows:n}=await this.#e.query(e.sql,[...e.parameters]);return{numAffectedRows:r==="INSERT"||r==="UPDATE"||r==="DELETE"||r==="MERGE"?BigInt(i):void 0,rows:n??[]}}catch(r){throw yu(r,new Error)}}async*streamQuery(e,r){if(!this.#t.cursor)throw new Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(r)||r<=0)throw new Error("chunkSize must be a positive integer");let i=this.#e.query(new this.#t.cursor(e.sql,e.parameters.slice()));try{for(;;){let n=await i.read(r);if(n.length===0)break;yield{rows:n}}}finally{await i.close()}}[bU](){this.#e.release()}}});var vU=O(()=>{});var mf,xU=O(()=>{Ck();Nk();Sk();Ak();mf=class{#e;constructor(e){this.#e=e}createDriver(){return new sw(this.#e)}createQueryCompiler(){return new Yy}createAdapter(){return new ew}createIntrospector(e){return new Xy(e)}}});var aw,Ok=O(()=>{Na();cs();gu();aw=class extends ji{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(e){await Te`exec sp_getapplock @DbPrincipal = ${Te.lit("dbo")}, @Resource = ${Te.lit(Zr)}, @LockMode = ${Te.lit("Exclusive")}`.execute(e)}async releaseMigrationLock(){}}});var SU=O(()=>{});var NU,AU,EU,cw,Pk,hf,Rk=O(()=>{q();hu();tw();jE();WE();NU=Symbol(),AU=Symbol(),EU=Symbol(),cw=class{#e;#t;constructor(e){this.#e=w({...e});let{tarn:r,tedious:i,validateConnections:n}=this.#e,{validateConnections:o,...s}=r.options;this.#t=new r.Pool({...s,create:async()=>{let a=await i.connectionFactory();return await new Pk(a,i).connect()},destroy:async a=>{await a[AU]()},validate:n===!1||o===!1?void 0:a=>a[EU]()})}async init(){}async acquireConnection(){return await this.#t.acquire().promise}async beginTransaction(e,r){await e.beginTransaction(r)}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async savepoint(e,r){await e.savepoint(r)}async rollbackToSavepoint(e,r){await e.rollbackTransaction(r)}async releaseConnection(e){(this.#e.resetConnectionsOnRelease||this.#e.tedious.resetConnectionOnRelease)&&await e[NU](),this.#t.release(e)}async destroy(){await this.#t.destroy()}},Pk=class{#e;#t;#r;constructor(e,r){this.#e=e,this.#t=!1,this.#r=r}async beginTransaction(e){let{isolationLevel:r}=e;await new Promise((i,n)=>this.#e.beginTransaction(o=>{o?n(o):i(void 0)},r?Vg(8):void 0,r?this.#n(r):void 0))}async commitTransaction(){await new Promise((e,r)=>this.#e.commitTransaction(i=>{i?r(i):e(void 0)}))}async connect(){let{promise:e,reject:r,resolve:i}=new fo;this.#e.connect(o=>{if(o)return r(o);i()}),this.#e.on("error",o=>{o instanceof Error&&"code"in o&&o.code==="ESOCKET"&&(this.#t=!0),console.error(o),r(o)});function n(){r(new Error("The connection ended without ever completing the connection"))}return this.#e.once("end",n),await e,this.#e.off("end",n),this}async executeQuery(e){try{let r=new fo,i=new hf({compiledQuery:e,tedious:this.#r,onDone:r});this.#e.execSql(i.request);let{rowCount:n,rows:o}=await r.promise;return{numAffectedRows:n!==void 0?BigInt(n):void 0,rows:o}}catch(r){throw yu(r,new Error)}}async rollbackTransaction(e){await new Promise((r,i)=>this.#e.rollbackTransaction(n=>{n?i(n):r(void 0)},e))}async savepoint(e){await new Promise((r,i)=>this.#e.saveTransaction(n=>{n?i(n):r(void 0)},e))}async*streamQuery(e,r){if(!Number.isInteger(r)||r<=0)throw new Error("chunkSize must be a positive integer");let i=new hf({compiledQuery:e,streamChunkSize:r,tedious:this.#r});this.#e.execSql(i.request);try{for(;;){let n=await i.readChunk();if(n.length===0||(yield{rows:n},n.length<r))break}}finally{await this.#i(i)}}#n(e){let{ISOLATION_LEVEL:r}=this.#r,n={"read committed":r.READ_COMMITTED,"read uncommitted":r.READ_UNCOMMITTED,"repeatable read":r.REPEATABLE_READ,serializable:r.SERIALIZABLE,snapshot:r.SNAPSHOT}[e];if(n===void 0)throw new Error(`Unknown isolation level: ${e}`);return n}#i(e){return new Promise(r=>{e.request.once("requestCompleted",r),this.#e.cancel()||(e.request.off("requestCompleted",r),r())})}[AU](){return"closed"in this.#e&&this.#e.closed?Promise.resolve():new Promise(e=>{this.#e.once("end",e),this.#e.close()})}async[NU](){await new Promise((e,r)=>{this.#e.reset(i=>{if(i)return r(i);e()})})}async[EU](){if(this.#t||this.#o())return!1;try{let e=new fo,r=new hf({compiledQuery:Tt.raw("select 1"),onDone:e,tedious:this.#r});return this.#e.execSql(r.request),await e.promise,!0}catch{return!1}}#o(){return"closed"in this.#e&&!!this.#e.closed}},hf=class{#e;#t;#r;#n;#i;#o;constructor(e){let{compiledQuery:r,onDone:i,streamChunkSize:n,tedious:o}=e;if(this.#t=[],this.#r=n,this.#n={},this.#i=o,i){let s="onDone";this.#n[s]=(a,c)=>{if(a!=="chunkReady"){if(delete this.#n[s],a==="error")return i.reject(c);i.resolve({rowCount:this.#o,rows:this.#t})}}}this.#e=new this.#i.Request(r.sql,(s,a)=>{if(s)return Object.values(this.#n).forEach(c=>c("error",s instanceof AggregateError?s.errors:s));this.#o=a}),this.#a(r.parameters),this.#s()}get request(){return this.#e}readChunk(){let e=this.readChunk.name;return new Promise((r,i)=>{this.#n[e]=(n,o)=>{if(delete this.#n[e],n==="error")return i(o);r(this.#t.splice(0,this.#r))},this.#e.resume()})}#a(e){for(let r=0;r<e.length;r++){let i=e[r];this.#e.addParameter(String(r+1),this.#c(i),i)}}#s(){let e=this.#r?()=>{this.#r<=this.#t.length&&(this.#e.pause(),Object.values(this.#n).forEach(i=>i("chunkReady")))}:()=>{},r=i=>{let n={};for(let o of i)n[o.metadata.colName]=o.value;this.#t.push(n),e()};this.#e.on("row",r),this.#e.once("requestCompleted",()=>{Object.values(this.#n).forEach(i=>i("completed")),this.#e.off("row",r)})}#c(e){return Qo(e)||Ur(e)||Ze(e)?this.#i.TYPES.NVarChar:Zo(e)||ei(e)&&e%1===0?e<-2147483648||e>2147483647?this.#i.TYPES.BigInt:this.#i.TYPES.Int:ei(e)?this.#i.TYPES.Float:so(e)?this.#i.TYPES.Bit:ig(e)?this.#i.TYPES.DateTime:MP(e)?this.#i.TYPES.VarBinary:this.#i.TYPES.NVarChar}}});var uw,Uk=O(()=>{Na();q();uw=class{#e;constructor(e){this.#e=e}async getSchemas(){return await this.#e.selectFrom("sys.schemas").select("name").execute()}async getTables(e={withInternalKyselyTables:!1}){let r=await this.#e.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",n=>n.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!e.withInternalKyselyTables,n=>n.where("tables.name","!=",Zr).where("tables.name","!=",Dn)).select(["tables.name as table_name",n=>n.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#e.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",n=>n.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),i={};for(let n of r){let o=`${n.table_schema_name}.${n.table_name}`;(i[o]=i[o]||w({columns:[],isView:n.table_type==="V ",name:n.table_name,schema:n.table_schema_name??void 0})).columns.push(w({dataType:n.type_name,dataTypeSchema:n.type_schema_name??void 0,hasDefaultValue:n.column_default_object_id>0||n.column_generated_always_type!=="NOT_APPLICABLE"||n.column_is_identity||n.column_is_computed||n.column_is_rowguidcol,isAutoIncrementing:n.column_is_identity,isNullable:n.column_is_nullable&&n.type_is_nullable,name:n.column_name,comment:n.column_comment??void 0}))}return Object.values(i)}async getMetadata(e){return{tables:await this.getTables(e)}}}});var xq,lw,Dk=O(()=>{Sa();xq=/^[a-z0-9_]$/i,lw=class extends Qr{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(e){super.visitOffset(e),this.append(" rows")}compileColumnAlterations(e){let r={};for(let n of e)r[n.kind]||(r[n.kind]=[]),r[n.kind].push(n);let i=!0;r.AddColumnNode&&(this.append("add "),this.compileList(r.AddColumnNode),i=!1),r.AlterColumnNode&&(i||this.append(", "),this.compileList(r.AlterColumnNode)),r.DropColumnNode&&(i||this.append(", "),this.append("drop column "),this.compileList(r.DropColumnNode)),r.ModifyColumnNode&&(i||this.append(", "),this.compileList(r.ModifyColumnNode)),r.RenameColumnNode&&(i||this.append(", "),this.compileList(r.RenameColumnNode))}visitAddColumn(e){this.visitNode(e.column)}visitDropColumn(e){this.visitNode(e.column)}visitMergeQuery(e){super.visitMergeQuery(e),this.append(";")}visitCollate(e){this.append("collate ");let{name:r}=e.collation;for(let i of r)if(!xq.test(i))throw new Error(`Invalid collation: ${r}`);this.append(r)}announcesNewColumnDataType(){return!1}}});var dw,_U=O(()=>{Ok();Rk();Uk();Dk();dw=class{#e;constructor(e){this.#e=e}createDriver(){return new cw(this.#e)}createQueryCompiler(){return new lw}createAdapter(){return new aw}createIntrospector(e){return new uw(e)}}});var kU=O(()=>{});var TU=O(()=>{});var IU=O(()=>{});var $U=O(()=>{});var CU=O(()=>{});var OU=O(()=>{});var PU=O(()=>{});var RU=O(()=>{});var UU=O(()=>{});var DU=O(()=>{});var LU=O(()=>{});var zU=O(()=>{});var jU=O(()=>{});var MU=O(()=>{});var BU=O(()=>{});var wu=O(()=>{GR();Yg();dg();Gc();YR();XR();eU();tU();rU();Xg();CE();Bg();PE();pa();gE();oy();EE();OE();RE();TE();a_();ay();m_();QE();HE();YA();mk();cs();iU();tk();Qc();oU();Sa();hu();Y_();q_();J_();V_();Q_();M_();W_();B_();F_();fy();py();z_();K_();G_();H_();P_();X_();Ud();ly();ik();aU();cU();ek();rk();uU();lU();dU();gu();fU();pU();mU();wk();Sk();Nk();Ak();yU();wU();_k();kk();Tk();Ik();Ck();vU();xU();bk();vk();xk();Ok();SU();_U();Rk();Uk();Dk();Sa();kU();Na();TU();IU();$U();CU();Kc();OU();PU();RU();x_();my();yy();ny();ri();O_();ia();Yo();pg();Xd();w_();rf();GA();tf();kr();NE();DE();qg();UU();og();ag();Ic();Cy();df();Dy();y_();vE();T_();Wd();N_();hy();Cd();cg();ug();Ry();Ty();pE();t_();sf();Bd();o_();k_();YE();cE();lE();ot();ua();Cc();xg();f_();Ld();bg();Jd();Tg();BE();Vd();C_();GE();Dg();AE();JA();Kr();Kg();hk();DU();sa();$E();oa();yg();jd();hE();_g();Lc();yE();sE();lf();Ng();Cn();$n();mg();nf();E_();L_();fE();ao();Rd();HA();da();wE();ty();LU();$c();IE();g_();c_();af();jc();Ig();Dc();Oi();bE();la();Fd();zE();zU();sk();jU();MU();ok();BU()});var qU={};ar(qU,{BunSqliteDialect:()=>Tq});var Sq,Nq,Aq,Eq,_q,kq,Tq,WU=O(()=>{wu();Sq=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},Nq=class{#e;#t=new Eq;#r;#n;constructor(t){this.#e={...t}}async init(){this.#r=this.#e.database,this.#n=new Aq(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#n)}async acquireConnection(){return await this.#t.lock(),this.#n}async beginTransaction(t){await t.executeQuery(Tt.raw("begin"))}async commitTransaction(t){await t.executeQuery(Tt.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(Tt.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},Aq=class{#e;constructor(t){this.#e=t}executeQuery(t){let{sql:e,parameters:r}=t,i=this.#e.prepare(e);return Promise.resolve({rows:i.all(r)})}async*streamQuery(){throw new Error("Streaming query is not supported by SQLite driver.")}},Eq=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(t=>{this.#t=t})}unlock(){let t=this.#t;this.#e=void 0,this.#t=void 0,t?.()}},_q=class{#e;constructor(t){this.#e=t}async getSchemas(){return[]}async getTables(t={withInternalKyselyTables:!1}){let e=this.#e.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();t.withInternalKyselyTables||(e=e.where("name","!=",Zr).where("name","!=",Dn));let r=await e.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(t){return{tables:await this.getTables(t)}}async#t(t){let e=this.#e,r=(await e.selectFrom("sqlite_master").where("name","=",t).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(i=>i.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:t,columns:(await e.selectFrom(Te`pragma_table_info(${t})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(i=>({name:i.name,dataType:i.type,isNullable:!i.notnull,isAutoIncrementing:i.name===r,hasDefaultValue:i.dflt_value!=null})),isView:!0}}},kq=class extends Qr{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},Tq=class{#e;constructor(t){this.#e={...t}}createDriver(){return new Nq(this.#e)}createQueryCompiler(){return new kq}createAdapter(){return new Sq}createIntrospector(t){return new _q(t)}}});var FU={};ar(FU,{NodeSqliteDialect:()=>Uq});var Iq,$q,Cq,Oq,Pq,Rq,Uq,VU=O(()=>{wu();Iq=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},$q=class{#e;#t=new Oq;#r;#n;constructor(t){this.#e={...t}}async init(){this.#r=this.#e.database,this.#n=new Cq(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#n)}async acquireConnection(){return await this.#t.lock(),this.#n}async beginTransaction(t){await t.executeQuery(Tt.raw("begin"))}async commitTransaction(t){await t.executeQuery(Tt.raw("commit"))}async rollbackTransaction(t){await t.executeQuery(Tt.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}},Cq=class{#e;constructor(t){this.#e=t}executeQuery(t){let{sql:e,parameters:r}=t,i=this.#e.prepare(e).all(...r);return Promise.resolve({rows:i})}async*streamQuery(){throw new Error("Streaming query is not supported by SQLite driver.")}},Oq=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(t=>{this.#t=t})}unlock(){let t=this.#t;this.#e=void 0,this.#t=void 0,t?.()}},Pq=class{#e;constructor(t){this.#e=t}async getSchemas(){return[]}async getTables(t={withInternalKyselyTables:!1}){let e=this.#e.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();t.withInternalKyselyTables||(e=e.where("name","!=",Zr).where("name","!=",Dn));let r=await e.execute();return Promise.all(r.map(({name:i})=>this.#t(i)))}async getMetadata(t){return{tables:await this.getTables(t)}}async#t(t){let e=this.#e,r=(await e.selectFrom("sqlite_master").where("name","=",t).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(i=>i.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:t,columns:(await e.selectFrom(Te`pragma_table_info(${t})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(i=>({name:i.name,dataType:i.type,isNullable:!i.notnull,isAutoIncrementing:i.name===r,hasDefaultValue:i.dflt_value!=null})),isView:!0}}},Rq=class extends Qr{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},Uq=class{#e;constructor(t){this.#e={...t}}createDriver(){return new $q(this.#e)}createQueryCompiler(){return new Rq}createAdapter(){return new Iq}createIntrospector(t){return new Pq(t)}}});function bu(t){if(!t)return null;if("dialect"in t)return bu(t.dialect);if("createDriver"in t){if(t instanceof ff)return"sqlite";if(t instanceof pf)return"mysql";if(t instanceof mf)return"postgres";if(t instanceof dw)return"mssql"}return"aggregate"in t?"sqlite":"getConnection"in t?"mysql":"connect"in t?"postgres":"fileControl"in t||"open"in t&&"close"in t&&"prepare"in t?"sqlite":null}var fw,pw=O(()=>{wu();fw=async t=>{let e=t.database;if(!e)return{kysely:null,databaseType:null,transaction:void 0};if("db"in e)return{kysely:e.db,databaseType:e.type,transaction:e.transaction};if("dialect"in e)return{kysely:new xa({dialect:e.dialect}),databaseType:e.type,transaction:e.transaction};let r,i=bu(e);if("createDriver"in e&&(r=e),"aggregate"in e&&!("createSession"in e)&&(r=new ff({database:e})),"getConnection"in e&&(r=new pf(e)),"connect"in e&&(r=new mf({pool:e})),"fileControl"in e){let{BunSqliteDialect:n}=await Promise.resolve().then(()=>(WU(),qU));r=new n({database:e})}if("createSession"in e&&typeof window>"u"){let n;try{({DatabaseSync:n}=await import("node:sqlite"))}catch(o){if(o!==null&&typeof o=="object"&&"code"in o&&o.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw o}if(n&&e instanceof n){let{NodeSqliteDialect:o}=await Promise.resolve().then(()=>(VU(),FU));r=new o({database:e})}}return{kysely:r?new xa({dialect:r}):null,databaseType:i,transaction:void 0}}});var KU,HU=O(()=>{wu();Id();KU=(t,e)=>{let r=null,i=s=>({getFieldName:a,schema:c,getDefaultFieldName:u,getDefaultModelName:l,getFieldAttributes:f,getModelName:d})=>{let m=b=>{let N=[],T=[];if(b)for(let[I,$]of Object.entries(b)){let v=c[l(I)]?.fields,[S,_]=I.includes(".")?I.split("."):[void 0,I];if(v){v.id={type:"string"};for(let[E,C]of Object.entries(v))N.push(Te`${Te.ref(`join_${_}`)}.${Te.ref(C.fieldName||E)} as ${Te.ref(`_joined_${_}_${C.fieldName||E}`)}`),T.push({joinModel:I,joinModelRef:_,fieldName:C.fieldName||E})}}return{allSelectsStr:T,allSelects:N}},h=async(b,N,T,I)=>{let $;if(e?.type==="mysql"){await N.execute();let v=b.id?"id":I.length>0&&I[0]?.field?I[0].field:"id";if(!b.id&&I.length===0)return $=await s.selectFrom(T).selectAll().orderBy(a({model:T,field:v}),"desc").limit(1).executeTakeFirst(),$;let S=b[v]||I[0]?.value;return $=await s.selectFrom(T).selectAll().orderBy(a({model:T,field:v}),"desc").where(a({model:T,field:v}),"=",S).limit(1).executeTakeFirst(),$}return e?.type==="mssql"?($=await N.outputAll("inserted").executeTakeFirst(),$):($=await N.returningAll().executeTakeFirst(),$)};function p(b,N){if(!N)return{and:null,or:null};let T={and:[],or:[]};return N.forEach(I=>{let{field:$,value:v,operator:S="=",connector:_="AND"}=I,E=v,C=a({model:b,field:$}),R=M=>{let D=`${b}.${C}`;return S.toLowerCase()==="in"?M(D,"in",Array.isArray(E)?E:[E]):S.toLowerCase()==="not_in"?M(D,"not in",Array.isArray(E)?E:[E]):S==="contains"?M(D,"like",`%${E}%`):S==="starts_with"?M(D,"like",`${E}%`):S==="ends_with"?M(D,"like",`%${E}`):S==="eq"?M(D,"=",E):S==="ne"?M(D,"<>",E):S==="gt"?M(D,">",E):S==="gte"?M(D,">=",E):S==="lt"?M(D,"<",E):S==="lte"?M(D,"<=",E):M(D,S,E)};_==="OR"?T.or.push(R):T.and.push(R)}),{and:T.and.length?T.and:null,or:T.or.length?T.or:null}}function y(b,N,T){if(!N||!b.length)return b;let I=new Map;for(let v of b){let S={},_={};for(let[R]of Object.entries(N))_[d(R)]={};for(let[R,M]of Object.entries(v)){let D=String(R),P=!1;for(let{joinModel:z,fieldName:W,joinModelRef:Q}of T)if(D===`_joined_${Q}_${W}`){_[d(z)][a({model:z,field:W})]=M,P=!0;break}P||(S[R]=M)}let E=S.id;if(!E)continue;if(!I.has(E)){let R={...S};for(let[M,D]of Object.entries(N))R[d(M)]=D.relation==="one-to-one"?null:[];I.set(E,R)}let C=I.get(E);for(let[R,M]of Object.entries(N)){let D=M.relation==="one-to-one",P=M.limit??100,z=_[d(R)],W=z&&Object.keys(z).length>0&&Object.values(z).some(Q=>Q!=null);if(D)C[d(R)]=W?z:null;else{let Q=d(R);if(Array.isArray(C[Q])&&W){if(C[Q].length>=P)continue;let G=a({model:R,field:"id"}),J=z[G];J?!C[Q].some(le=>le[G]===J)&&C[Q].length<P&&C[Q].push(z):C[Q].length<P&&C[Q].push(z)}}}}let $=Array.from(I.values());for(let v of $)for(let[S,_]of Object.entries(N))if(_.relation!=="one-to-one"){let E=d(S);if(Array.isArray(v[E])){let C=_.limit??100;v[E].length>C&&(v[E]=v[E].slice(0,C))}}return $}return{async create({data:b,model:N}){return await h(b,s.insertInto(N).values(b),N,[])},async findOne({model:b,where:N,select:T,join:I}){let{and:$,or:v}=p(b,N),S=s.selectFrom(M=>{let D=M.selectFrom(b);return $&&(D=D.where(P=>P.and($.map(z=>z(P))))),v&&(D=D.where(P=>P.or(v.map(z=>z(P))))),D.selectAll().as("primary")}).selectAll("primary");if(I)for(let[M,D]of Object.entries(I)){let[P,z]=M.includes(".")?M.split("."):[void 0,M];S=S.leftJoin(`${M} as join_${z}`,W=>W.onRef(`join_${z}.${D.on.to}`,"=",`primary.${D.on.from}`))}let{allSelectsStr:_,allSelects:E}=m(I);S=S.select(E);let C=await S.execute();if(!C||!Array.isArray(C)||C.length===0)return null;let R=C[0];return I?y(C,I,_)[0]:R},async findMany({model:b,where:N,limit:T,offset:I,sortBy:$,join:v}){let{and:S,or:_}=p(b,N),E=s.selectFrom(D=>{let P=D.selectFrom(b);return e?.type==="mssql"?I!==void 0?($||(P=P.orderBy(a({model:b,field:"id"}))),P=P.offset(I).fetch(T||100)):T!==void 0&&(P=P.top(T)):(T!==void 0&&(P=P.limit(T)),I!==void 0&&(P=P.offset(I))),$?.field&&(P=P.orderBy(`${a({model:b,field:$.field})}`,$.direction)),S&&(P=P.where(z=>z.and(S.map(W=>W(z))))),_&&(P=P.where(z=>z.or(_.map(W=>W(z))))),P.selectAll().as("primary")}).selectAll("primary");if(v)for(let[D,P]of Object.entries(v)){let[z,W]=D.includes(".")?D.split("."):[void 0,D];E=E.leftJoin(`${D} as join_${W}`,Q=>Q.onRef(`join_${W}.${P.on.to}`,"=",`primary.${P.on.from}`))}let{allSelectsStr:C,allSelects:R}=m(v);E=E.select(R),$?.field&&(E=E.orderBy(`${a({model:b,field:$.field})}`,$.direction));let M=await E.execute();return M?v?y(M,v,C):M:[]},async update({model:b,where:N,update:T}){let{and:I,or:$}=p(b,N),v=s.updateTable(b).set(T);return I&&(v=v.where(S=>S.and(I.map(_=>_(S))))),$&&(v=v.where(S=>S.or($.map(_=>_(S))))),await h(T,v,b,N)},async updateMany({model:b,where:N,update:T}){let{and:I,or:$}=p(b,N),v=s.updateTable(b).set(T);I&&(v=v.where(_=>_.and(I.map(E=>E(_))))),$&&(v=v.where(_=>_.or($.map(E=>E(_)))));let S=(await v.executeTakeFirst()).numUpdatedRows;return S>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(S)},async count({model:b,where:N}){let{and:T,or:I}=p(b,N),$=s.selectFrom(b).select(s.fn.count("id").as("count"));T&&($=$.where(S=>S.and(T.map(_=>_(S))))),I&&($=$.where(S=>S.or(I.map(_=>_(S)))));let v=await $.execute();return typeof v[0].count=="number"?v[0].count:typeof v[0].count=="bigint"?Number(v[0].count):parseInt(v[0].count)},async delete({model:b,where:N}){let{and:T,or:I}=p(b,N),$=s.deleteFrom(b);T&&($=$.where(v=>v.and(T.map(S=>S(v))))),I&&($=$.where(v=>v.or(I.map(S=>S(v))))),await $.execute()},async deleteMany({model:b,where:N}){let{and:T,or:I}=p(b,N),$=s.deleteFrom(b);T&&($=$.where(S=>S.and(T.map(_=>_(S))))),I&&($=$.where(S=>S.or(I.map(_=>_(S)))));let v=(await $.executeTakeFirst()).numDeletedRows;return v>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(v)},options:e}},n=null;n={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:e?.usePlural,debugLogs:e?.debugLogs,supportsBooleans:!(e?.type==="sqlite"||e?.type==="mssql"||e?.type==="mysql"||!e?.type),supportsDates:!(e?.type==="sqlite"||e?.type==="mssql"||!e?.type),supportsJSON:e?.type==="postgres",supportsArrays:!1,supportsUUIDs:e?.type==="postgres",transaction:e?.transaction?s=>t.transaction().execute(a=>s(Jo({config:n.config,adapter:i(a)})(r))):!1},adapter:i(t)};let o=Jo(n);return s=>(r=s,o(s))}});var Lk={};ar(Lk,{createKyselyAdapter:()=>fw,getKyselyDatabaseType:()=>bu,kyselyAdapter:()=>KU});var zk=O(()=>{pw();HU()});var _b=(t,e,r)=>(i,n)=>{let o=-1;return s(0);async function s(a){if(a<=o)throw new Error("next() called multiple times");o=a;let c,u=!1,l;if(t[a]?(l=t[a][0][0],i.req.routeIndex=a):l=a===t.length&&n||void 0,l)try{c=await l(i,()=>s(a+1))}catch(f){if(f instanceof Error&&e)i.error=f,c=await e(f,i),u=!0;else throw f}else i.finalized===!1&&r&&(c=await r(i));return c&&(i.finalized===!1||u)&&(i.res=c),i}};var Ao=class extends Error{res;status;constructor(t=500,e){super(e?.message,{cause:e?.cause}),this.res=e?.res,this.status=t}getResponse(){return this.res?new Response(this.res.body,{status:this.status,headers:this.res.headers}):new Response(this.message,{status:this.status})}};var D$=Symbol();var L$=async(t,e=Object.create(null))=>{let{all:r=!1,dot:i=!1}=e,o=(t instanceof Yf?t.raw.headers:t.headers).get("Content-Type");return o?.startsWith("multipart/form-data")||o?.startsWith("application/x-www-form-urlencoded")?Oz(t,{all:r,dot:i}):{}};async function Oz(t,e){let r=await t.formData();return r?Pz(r,e):{}}function Pz(t,e){let r=Object.create(null);return t.forEach((i,n)=>{e.all||n.endsWith("[]")?Rz(r,n,i):r[n]=i}),e.dot&&Object.entries(r).forEach(([i,n])=>{i.includes(".")&&(Uz(r,i,n),delete r[i])}),r}var Rz=(t,e,r)=>{t[e]!==void 0?Array.isArray(t[e])?t[e].push(r):t[e]=[t[e],r]:e.endsWith("[]")?t[e]=[r]:t[e]=r},Uz=(t,e,r)=>{let i=t,n=e.split(".");n.forEach((o,s)=>{s===n.length-1?i[o]=r:((!i[o]||typeof i[o]!="object"||Array.isArray(i[o])||i[o]instanceof File)&&(i[o]=Object.create(null)),i=i[o])})};var Tb=t=>{let e=t.split("/");return e[0]===""&&e.shift(),e},z$=t=>{let{groups:e,path:r}=Dz(t),i=Tb(r);return Lz(i,e)},Dz=t=>{let e=[];return t=t.replace(/\{[^}]+\}/g,(r,i)=>{let n=`@${i}`;return e.push([n,r]),n}),{groups:e,path:t}},Lz=(t,e)=>{for(let r=e.length-1;r>=0;r--){let[i]=e[r];for(let n=t.length-1;n>=0;n--)if(t[n].includes(i)){t[n]=t[n].replace(i,e[r][1]);break}}return t},Xf={},j$=(t,e)=>{if(t==="*")return"*";let r=t.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let i=`${t}#${e}`;return Xf[i]||(r[2]?Xf[i]=e&&e[0]!==":"&&e[0]!=="*"?[i,r[1],new RegExp(`^${r[2]}(?=/${e})`)]:[t,r[1],new RegExp(`^${r[2]}$`)]:Xf[i]=[t,r[1],!0]),Xf[i]}return null},La=(t,e)=>{try{return e(t)}catch{return t.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return e(r)}catch{return r}})}},zz=t=>La(t,decodeURI),Ib=t=>{let e=t.url,r=e.indexOf("/",e.indexOf(":")+4),i=r;for(;i<e.length;i++){let n=e.charCodeAt(i);if(n===37){let o=e.indexOf("?",i),s=e.slice(r,o===-1?void 0:o);return zz(s.includes("%25")?s.replace(/%25/g,"%2525"):s)}else if(n===63)break}return e.slice(r,i)};var M$=t=>{let e=Ib(t);return e.length>1&&e.at(-1)==="/"?e.slice(0,-1):e},ws=(t,e,...r)=>(r.length&&(e=ws(e,...r)),`${t?.[0]==="/"?"":"/"}${t}${e==="/"?"":`${t?.at(-1)==="/"?"":"/"}${e?.[0]==="/"?e.slice(1):e}`}`),ep=t=>{if(t.charCodeAt(t.length-1)!==63||!t.includes(":"))return null;let e=t.split("/"),r=[],i="";return e.forEach(n=>{if(n!==""&&!/\:/.test(n))i+="/"+n;else if(/\:/.test(n))if(/\?/.test(n)){r.length===0&&i===""?r.push("/"):r.push(i);let o=n.replace("?","");i+="/"+o,r.push(i)}else i+="/"+n}),r.filter((n,o,s)=>s.indexOf(n)===o)},kb=t=>/[%+]/.test(t)?(t.indexOf("+")!==-1&&(t=t.replace(/\+/g," ")),t.indexOf("%")!==-1?La(t,Ku):t):t,B$=(t,e,r)=>{let i;if(!r&&e&&!/[%+]/.test(e)){let s=t.indexOf("?",8);if(s===-1)return;for(t.startsWith(e,s+1)||(s=t.indexOf(`&${e}`,s+1));s!==-1;){let a=t.charCodeAt(s+e.length+1);if(a===61){let c=s+e.length+2,u=t.indexOf("&",c);return kb(t.slice(c,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";s=t.indexOf(`&${e}`,s+1)}if(i=/[%+]/.test(t),!i)return}let n={};i??=/[%+]/.test(t);let o=t.indexOf("?",8);for(;o!==-1;){let s=t.indexOf("&",o+1),a=t.indexOf("=",o);a>s&&s!==-1&&(a=-1);let c=t.slice(o+1,a===-1?s===-1?void 0:s:a);if(i&&(c=kb(c)),o=s,c==="")continue;let u;a===-1?u="":(u=t.slice(a+1,s===-1?void 0:s),i&&(u=kb(u))),r?(n[c]&&Array.isArray(n[c])||(n[c]=[]),n[c].push(u)):n[c]??=u}return e?n[e]:n},q$=B$,W$=(t,e)=>B$(t,e,!0),Ku=decodeURIComponent;var F$=t=>La(t,Ku),Yf=class{raw;#e;#t;routeIndex=0;path;bodyCache={};constructor(t,e="/",r=[[]]){this.raw=t,this.path=e,this.#t=r,this.#e={}}param(t){return t?this.#r(t):this.#n()}#r(t){let e=this.#t[0][this.routeIndex][1][t],r=this.#i(e);return r&&/\%/.test(r)?F$(r):r}#n(){let t={},e=Object.keys(this.#t[0][this.routeIndex][1]);for(let r of e){let i=this.#i(this.#t[0][this.routeIndex][1][r]);i!==void 0&&(t[r]=/\%/.test(i)?F$(i):i)}return t}#i(t){return this.#t[1]?this.#t[1][t]:t}query(t){return q$(this.url,t)}queries(t){return W$(this.url,t)}header(t){if(t)return this.raw.headers.get(t)??void 0;let e={};return this.raw.headers.forEach((r,i)=>{e[i]=r}),e}async parseBody(t){return this.bodyCache.parsedBody??=await L$(this,t)}#o=t=>{let{bodyCache:e,raw:r}=this,i=e[t];if(i)return i;let n=Object.keys(e)[0];return n?e[n].then(o=>(n==="json"&&(o=JSON.stringify(o)),new Response(o)[t]())):e[t]=r[t]()};json(){return this.#o("text").then(t=>JSON.parse(t))}text(){return this.#o("text")}arrayBuffer(){return this.#o("arrayBuffer")}blob(){return this.#o("blob")}formData(){return this.#o("formData")}addValidatedData(t,e){this.#e[t]=e}valid(t){return this.#e[t]}get url(){return this.raw.url}get method(){return this.raw.method}get[D$](){return this.#t}get matchedRoutes(){return this.#t[0].map(([[,t]])=>t)}get routePath(){return this.#t[0].map(([[,t]])=>t)[this.routeIndex].path}};var tp={Stringify:1,BeforeStream:2,Stream:3},jz=(t,e)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=e,r};var Hu=async(t,e,r,i,n)=>{typeof t=="object"&&!(t instanceof String)&&(t instanceof Promise||(t=t.toString()),t instanceof Promise&&(t=await t));let o=t.callbacks;if(!o?.length)return Promise.resolve(t);n?n[0]+=t:n=[t];let s=Promise.all(o.map(a=>a({phase:e,buffer:n,context:i}))).then(a=>Promise.all(a.filter(Boolean).map(c=>Hu(c,e,!1,i,n))).then(()=>n[0]));return r?jz(await s,o):s};var V$="text/plain; charset=UTF-8",$b=(t,e)=>({"Content-Type":t,...e}),K$=class{#e;#t;env={};#r;finalized=!1;error;#n;#i;#o;#a;#s;#c;#u;#l;#f;constructor(t,e){this.#e=t,e&&(this.#i=e.executionCtx,this.env=e.env,this.#c=e.notFoundHandler,this.#f=e.path,this.#l=e.matchResult)}get req(){return this.#t??=new Yf(this.#e,this.#f,this.#l),this.#t}get event(){if(this.#i&&"respondWith"in this.#i)return this.#i;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#i)return this.#i;throw Error("This context has no ExecutionContext")}get res(){return this.#o||=new Response(null,{headers:this.#u??=new Headers})}set res(t){if(this.#o&&t){t=new Response(t.body,t);for(let[e,r]of this.#o.headers.entries())if(e!=="content-type")if(e==="set-cookie"){let i=this.#o.headers.getSetCookie();t.headers.delete("set-cookie");for(let n of i)t.headers.append("set-cookie",n)}else t.headers.set(e,r)}this.#o=t,this.finalized=!0}render=(...t)=>(this.#s??=e=>this.html(e),this.#s(...t));setLayout=t=>this.#a=t;getLayout=()=>this.#a;setRenderer=t=>{this.#s=t};header=(t,e,r)=>{this.finalized&&(this.#o=new Response(this.#o.body,this.#o));let i=this.#o?this.#o.headers:this.#u??=new Headers;e===void 0?i.delete(t):r?.append?i.append(t,e):i.set(t,e)};status=t=>{this.#n=t};set=(t,e)=>{this.#r??=new Map,this.#r.set(t,e)};get=t=>this.#r?this.#r.get(t):void 0;get var(){return this.#r?Object.fromEntries(this.#r):{}}#d(t,e,r){let i=this.#o?new Headers(this.#o.headers):this.#u??new Headers;if(typeof e=="object"&&"headers"in e){let o=e.headers instanceof Headers?e.headers:new Headers(e.headers);for(let[s,a]of o)s.toLowerCase()==="set-cookie"?i.append(s,a):i.set(s,a)}if(r)for(let[o,s]of Object.entries(r))if(typeof s=="string")i.set(o,s);else{i.delete(o);for(let a of s)i.append(o,a)}let n=typeof e=="number"?e:e?.status??this.#n;return new Response(t,{status:n,headers:i})}newResponse=(...t)=>this.#d(...t);body=(t,e,r)=>this.#d(t,e,r);text=(t,e,r)=>!this.#u&&!this.#n&&!e&&!r&&!this.finalized?new Response(t):this.#d(t,e,$b(V$,r));json=(t,e,r)=>this.#d(JSON.stringify(t),e,$b("application/json",r));html=(t,e,r)=>{let i=n=>this.#d(n,e,$b("text/html; charset=UTF-8",r));return typeof t=="object"?Hu(t,tp.Stringify,!1,{}).then(i):i(t)};redirect=(t,e)=>{let r=String(t);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,e??302)};notFound=()=>(this.#c??=()=>new Response,this.#c(this))};var Nt="ALL",H$="all",J$=["get","post","put","delete","options","patch"],rp="Can not add a route since the matcher is already built.",np=class extends Error{};var Q$="__COMPOSED_HANDLER";var Mz=t=>t.text("404 Not Found",404),Z$=(t,e)=>{if("getResponse"in t){let r=t.getResponse();return e.newResponse(r.body,r)}return console.error(t),e.text("Internal Server Error",500)},G$=class Y${get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#e="/";routes=[];constructor(e={}){[...J$,H$].forEach(o=>{this[o]=(s,...a)=>(typeof s=="string"?this.#e=s:this.#n(o,this.#e,s),a.forEach(c=>{this.#n(o,this.#e,c)}),this)}),this.on=(o,s,...a)=>{for(let c of[s].flat()){this.#e=c;for(let u of[o].flat())a.map(l=>{this.#n(u.toUpperCase(),this.#e,l)})}return this},this.use=(o,...s)=>(typeof o=="string"?this.#e=o:(this.#e="*",s.unshift(o)),s.forEach(a=>{this.#n(Nt,this.#e,a)}),this);let{strict:i,...n}=e;Object.assign(this,n),this.getPath=i??!0?e.getPath??Ib:M$}#t(){let e=new Y$({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#r=this.#r,e.routes=this.routes,e}#r=Mz;errorHandler=Z$;route(e,r){let i=this.basePath(e);return r.routes.map(n=>{let o;r.errorHandler===Z$?o=n.handler:(o=async(s,a)=>(await _b([],r.errorHandler)(s,()=>n.handler(s,a))).res,o[Q$]=n.handler),i.#n(n.method,n.path,o)}),this}basePath(e){let r=this.#t();return r._basePath=ws(this._basePath,e),r}onError=e=>(this.errorHandler=e,this);notFound=e=>(this.#r=e,this);mount(e,r,i){let n,o;i&&(typeof i=="function"?o=i:(o=i.optionHandler,i.replaceRequest===!1?n=c=>c:n=i.replaceRequest));let s=o?c=>{let u=o(c);return Array.isArray(u)?u:[u]}:c=>{let u;try{u=c.executionCtx}catch{}return[c.env,u]};n||=(()=>{let c=ws(this._basePath,e),u=c==="/"?0:c.length;return l=>{let f=new URL(l.url);return f.pathname=f.pathname.slice(u)||"/",new Request(f,l)}})();let a=async(c,u)=>{let l=await r(n(c.req.raw),...s(c));if(l)return l;await u()};return this.#n(Nt,ws(e,"*"),a),this}#n(e,r,i){e=e.toUpperCase(),r=ws(this._basePath,r);let n={basePath:this._basePath,path:r,method:e,handler:i};this.router.add(e,r,[i,n]),this.routes.push(n)}#i(e,r){if(e instanceof Error)return this.errorHandler(e,r);throw e}#o(e,r,i,n){if(n==="HEAD")return(async()=>new Response(null,await this.#o(e,r,i,"GET")))();let o=this.getPath(e,{env:i}),s=this.router.match(n,o),a=new K$(e,{path:o,matchResult:s,env:i,executionCtx:r,notFoundHandler:this.#r});if(s[0].length===1){let u;try{u=s[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(l){return this.#i(l,a)}return u instanceof Promise?u.then(l=>l||(a.finalized?a.res:this.#r(a))).catch(l=>this.#i(l,a)):u??this.#r(a)}let c=_b(s[0],this.errorHandler,this.#r);return(async()=>{try{let u=await c(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return this.#i(u,a)}})()}fetch=(e,...r)=>this.#o(e,r[1],r[0],e.method);request=(e,r,i,n)=>e instanceof Request?this.fetch(r?new Request(e,r):e,i,n):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${ws("/",e)}`,r),i,n));fire=()=>{addEventListener("fetch",e=>{e.respondWith(this.#o(e.request,e,void 0,e.request.method))})}};var ip=[];function Cb(t,e){let r=this.buildAllMatchers(),i=((n,o)=>{let s=r[n]||r[Nt],a=s[2][o];if(a)return a;let c=o.match(s[0]);if(!c)return[[],ip];let u=c.indexOf("",1);return[s[1][u],c]});return this.match=i,i(t,e)}var op="[^/]+",Ju=".*",Qu="(?:|/.*)",bs=Symbol(),Bz=new Set(".\\+*[^]$()");function qz(t,e){return t.length===1?e.length===1?t<e?-1:1:-1:e.length===1||t===Ju||t===Qu?1:e===Ju||e===Qu?-1:t===op?1:e===op?-1:t.length===e.length?t<e?-1:1:e.length-t.length}var X$=class Ob{#e;#t;#r=Object.create(null);insert(e,r,i,n,o){if(e.length===0){if(this.#e!==void 0)throw bs;if(o)return;this.#e=r;return}let[s,...a]=e,c=s==="*"?a.length===0?["","",Ju]:["","",op]:s==="/*"?["","",Qu]:s.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),u;if(c){let l=c[1],f=c[2]||op;if(l&&c[2]&&(f===".*"||(f=f.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(f))))throw bs;if(u=this.#r[f],!u){if(Object.keys(this.#r).some(d=>d!==Ju&&d!==Qu))throw bs;if(o)return;u=this.#r[f]=new Ob,l!==""&&(u.#t=n.varIndex++)}!o&&l!==""&&i.push([l,u.#t])}else if(u=this.#r[s],!u){if(Object.keys(this.#r).some(l=>l.length>1&&l!==Ju&&l!==Qu))throw bs;if(o)return;u=this.#r[s]=new Ob}u.insert(a,r,i,n,o)}buildRegExpStr(){let r=Object.keys(this.#r).sort(qz).map(i=>{let n=this.#r[i];return(typeof n.#t=="number"?`(${i})@${n.#t}`:Bz.has(i)?`\\${i}`:i)+n.buildRegExpStr()});return typeof this.#e=="number"&&r.unshift(`#${this.#e}`),r.length===0?"":r.length===1?r[0]:"(?:"+r.join("|")+")"}};var eC=class{#e={varIndex:0};#t=new X$;insert(t,e,r){let i=[],n=[];for(let s=0;;){let a=!1;if(t=t.replace(/\{[^}]+\}/g,c=>{let u=`@\\${s}`;return n[s]=[u,c],s++,a=!0,u}),!a)break}let o=t.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let s=n.length-1;s>=0;s--){let[a]=n[s];for(let c=o.length-1;c>=0;c--)if(o[c].indexOf(a)!==-1){o[c]=o[c].replace(a,n[s][1]);break}}return this.#t.insert(o,e,i,this.#e,r),i}buildRegExp(){let t=this.#t.buildRegExpStr();if(t==="")return[/^$/,[],[]];let e=0,r=[],i=[];return t=t.replace(/#(\d+)|@(\d+)|\.\*\$/g,(n,o,s)=>o!==void 0?(r[++e]=Number(o),"$()"):(s!==void 0&&(i[Number(s)]=++e),"")),[new RegExp(`^${t}`),r,i]}};var Wz=[/^$/,[],Object.create(null)],tC=Object.create(null);function rC(t){return tC[t]??=new RegExp(t==="*"?"":`^${t.replace(/\/\*$|([.\\+*[^\]$()])/g,(e,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}function Fz(){tC=Object.create(null)}function Vz(t){let e=new eC,r=[];if(t.length===0)return Wz;let i=t.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,l],[f,d])=>u?1:f?-1:l.length-d.length),n=Object.create(null);for(let u=0,l=-1,f=i.length;u<f;u++){let[d,m,h]=i[u];d?n[m]=[h.map(([y])=>[y,Object.create(null)]),ip]:l++;let p;try{p=e.insert(m,l,d)}catch(y){throw y===bs?new np(m):y}d||(r[l]=h.map(([y,b])=>{let N=Object.create(null);for(b-=1;b>=0;b--){let[T,I]=p[b];N[T]=I}return[y,N]}))}let[o,s,a]=e.buildRegExp();for(let u=0,l=r.length;u<l;u++)for(let f=0,d=r[u].length;f<d;f++){let m=r[u][f]?.[1];if(!m)continue;let h=Object.keys(m);for(let p=0,y=h.length;p<y;p++)m[h[p]]=a[m[h[p]]]}let c=[];for(let u in s)c[u]=r[s[u]];return[o,c,n]}function za(t,e){if(t){for(let r of Object.keys(t).sort((i,n)=>n.length-i.length))if(rC(r).test(e))return[...t[r]]}}var sp=class{name="RegExpRouter";#e;#t;constructor(){this.#e={[Nt]:Object.create(null)},this.#t={[Nt]:Object.create(null)}}add(t,e,r){let i=this.#e,n=this.#t;if(!i||!n)throw new Error(rp);i[t]||[i,n].forEach(a=>{a[t]=Object.create(null),Object.keys(a[Nt]).forEach(c=>{a[t][c]=[...a[Nt][c]]})}),e==="/*"&&(e="*");let o=(e.match(/\/:/g)||[]).length;if(/\*$/.test(e)){let a=rC(e);t===Nt?Object.keys(i).forEach(c=>{i[c][e]||=za(i[c],e)||za(i[Nt],e)||[]}):i[t][e]||=za(i[t],e)||za(i[Nt],e)||[],Object.keys(i).forEach(c=>{(t===Nt||t===c)&&Object.keys(i[c]).forEach(u=>{a.test(u)&&i[c][u].push([r,o])})}),Object.keys(n).forEach(c=>{(t===Nt||t===c)&&Object.keys(n[c]).forEach(u=>a.test(u)&&n[c][u].push([r,o]))});return}let s=ep(e)||[e];for(let a=0,c=s.length;a<c;a++){let u=s[a];Object.keys(n).forEach(l=>{(t===Nt||t===l)&&(n[l][u]||=[...za(i[l],u)||za(i[Nt],u)||[]],n[l][u].push([r,o-c+a+1]))})}}match=Cb;buildAllMatchers(){let t=Object.create(null);return Object.keys(this.#t).concat(Object.keys(this.#e)).forEach(e=>{t[e]||=this.#r(e)}),this.#e=this.#t=void 0,Fz(),t}#r(t){let e=[],r=t===Nt;return[this.#e,this.#t].forEach(i=>{let n=i[t]?Object.keys(i[t]).map(o=>[o,i[t][o]]):[];n.length!==0?(r||=!0,e.push(...n)):t!==Nt&&e.push(...Object.keys(i[Nt]).map(o=>[o,i[Nt][o]]))}),r?Vz(e):null}};var Pb=class{name="SmartRouter";#e=[];#t=[];constructor(t){this.#e=t.routers}add(t,e,r){if(!this.#t)throw new Error(rp);this.#t.push([t,e,r])}match(t,e){if(!this.#t)throw new Error("Fatal error");let r=this.#e,i=this.#t,n=r.length,o=0,s;for(;o<n;o++){let a=r[o];try{for(let c=0,u=i.length;c<u;c++)a.add(...i[c]);s=a.match(t,e)}catch(c){if(c instanceof np)continue;throw c}this.match=a.match.bind(a),this.#e=[a],this.#t=void 0;break}if(o===n)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,s}get activeRouter(){if(this.#t||this.#e.length!==1)throw new Error("No active router has been determined yet.");return this.#e[0]}};var Zu=Object.create(null),nC=class iC{#e;#t;#r;#n=0;#i=Zu;constructor(e,r,i){if(this.#t=i||Object.create(null),this.#e=[],e&&r){let n=Object.create(null);n[e]={handler:r,possibleKeys:[],score:0},this.#e=[n]}this.#r=[]}insert(e,r,i){this.#n=++this.#n;let n=this,o=z$(r),s=[];for(let a=0,c=o.length;a<c;a++){let u=o[a],l=o[a+1],f=j$(u,l),d=Array.isArray(f)?f[0]:u;if(d in n.#t){n=n.#t[d],f&&s.push(f[1]);continue}n.#t[d]=new iC,f&&(n.#r.push(f),s.push(f[1])),n=n.#t[d]}return n.#e.push({[e]:{handler:i,possibleKeys:s.filter((a,c,u)=>u.indexOf(a)===c),score:this.#n}}),n}#o(e,r,i,n){let o=[];for(let s=0,a=e.#e.length;s<a;s++){let c=e.#e[s],u=c[r]||c[Nt],l={};if(u!==void 0&&(u.params=Object.create(null),o.push(u),i!==Zu||n&&n!==Zu))for(let f=0,d=u.possibleKeys.length;f<d;f++){let m=u.possibleKeys[f],h=l[u.score];u.params[m]=n?.[m]&&!h?n[m]:i[m]??n?.[m],l[u.score]=!0}}return o}search(e,r){let i=[];this.#i=Zu;let o=[this],s=Tb(r),a=[];for(let c=0,u=s.length;c<u;c++){let l=s[c],f=c===u-1,d=[];for(let m=0,h=o.length;m<h;m++){let p=o[m],y=p.#t[l];y&&(y.#i=p.#i,f?(y.#t["*"]&&i.push(...this.#o(y.#t["*"],e,p.#i)),i.push(...this.#o(y,e,p.#i))):d.push(y));for(let b=0,N=p.#r.length;b<N;b++){let T=p.#r[b],I=p.#i===Zu?{}:{...p.#i};if(T==="*"){let C=p.#t["*"];C&&(i.push(...this.#o(C,e,p.#i)),C.#i=I,d.push(C));continue}let[$,v,S]=T;if(!l&&!(S instanceof RegExp))continue;let _=p.#t[$],E=s.slice(c).join("/");if(S instanceof RegExp){let C=S.exec(E);if(C){if(I[v]=C[0],i.push(...this.#o(_,e,p.#i,I)),Object.keys(_.#t).length){_.#i=I;let R=C[0].match(/\//)?.length??0;(a[R]||=[]).push(_)}continue}}(S===!0||S.test(l))&&(I[v]=l,f?(i.push(...this.#o(_,e,I,p.#i)),_.#t["*"]&&i.push(...this.#o(_.#t["*"],e,I,p.#i))):(_.#i=I,d.push(_)))}}o=d.concat(a.shift()??[])}return i.length>1&&i.sort((c,u)=>c.score-u.score),[i.map(({handler:c,params:u})=>[c,u])]}};var Rb=class{name="TrieRouter";#e;constructor(){this.#e=new nC}add(t,e,r){let i=ep(e);if(i){for(let n=0,o=i.length;n<o;n++)this.#e.insert(t,i[n],r);return}this.#e.insert(t,e,r)}match(t,e){return this.#e.search(t,e)}};var sn=class extends G${constructor(t={}){super(t),this.router=t.router??new Pb({routers:[new sp,new Rb]})}};var oC=t=>{let r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...t},i=(o=>typeof o=="string"?o==="*"?()=>o:s=>o===s?s:null:typeof o=="function"?o:s=>o.includes(s)?s:null)(r.origin),n=(o=>typeof o=="function"?o:Array.isArray(o)?()=>o:()=>[])(r.allowMethods);return async function(s,a){function c(l,f){s.res.headers.set(l,f)}let u=await i(s.req.header("origin")||"",s);if(u&&c("Access-Control-Allow-Origin",u),r.credentials&&c("Access-Control-Allow-Credentials","true"),r.exposeHeaders?.length&&c("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),s.req.method==="OPTIONS"){r.origin!=="*"&&c("Vary","Origin"),r.maxAge!=null&&c("Access-Control-Max-Age",r.maxAge.toString());let l=await n(s.req.header("origin")||"",s);l.length&&c("Access-Control-Allow-Methods",l.join(","));let f=r.allowHeaders;if(!f?.length){let d=s.req.header("Access-Control-Request-Headers");d&&(f=d.split(/\s*,\s*/))}return f?.length&&(c("Access-Control-Allow-Headers",f.join(",")),s.res.headers.append("Vary","Access-Control-Request-Headers")),s.res.headers.delete("Content-Length"),s.res.headers.delete("Content-Type"),new Response(null,{headers:s.res.headers,status:204,statusText:"No Content"})}await a(),r.origin!=="*"&&s.header("Vary","Origin",{append:!0})}};function Kz(){let{process:t,Deno:e}=globalThis;return!(typeof e?.noColor=="boolean"?e.noColor:t!==void 0?"NO_COLOR"in t?.env:!1)}async function sC(){let{navigator:t}=globalThis,e="cloudflare:workers";return!(t!==void 0&&t.userAgent==="Cloudflare-Workers"?await(async()=>{try{return"NO_COLOR"in((await import(e)).env??{})}catch{return!1}})():!Kz())}var Hz=t=>{let[e,r]=[",","."];return t.map(n=>n.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e)).join(r)},Jz=t=>{let e=Date.now()-t;return Hz([e<1e3?e+"ms":Math.round(e/1e3)+"s"])},Qz=async t=>{if(await sC())switch(t/100|0){case 5:return`\x1B[31m${t}\x1B[0m`;case 4:return`\x1B[33m${t}\x1B[0m`;case 3:return`\x1B[36m${t}\x1B[0m`;case 2:return`\x1B[32m${t}\x1B[0m`}return`${t}`};async function aC(t,e,r,i,n=0,o){let s=e==="<--"?`${e} ${r} ${i}`:`${e} ${r} ${i} ${await Qz(n)} ${o}`;t(s)}var cC=(t=console.log)=>async function(r,i){let{method:n,url:o}=r.req,s=o.slice(o.indexOf("/",8));await aC(t,"<--",n,s);let a=Date.now();await i(),await aC(t,"-->",n,s,r.res.status,Jz(a))};var Zz={crossOriginEmbedderPolicy:["Cross-Origin-Embedder-Policy","require-corp"],crossOriginResourcePolicy:["Cross-Origin-Resource-Policy","same-origin"],crossOriginOpenerPolicy:["Cross-Origin-Opener-Policy","same-origin"],originAgentCluster:["Origin-Agent-Cluster","?1"],referrerPolicy:["Referrer-Policy","no-referrer"],strictTransportSecurity:["Strict-Transport-Security","max-age=15552000; includeSubDomains"],xContentTypeOptions:["X-Content-Type-Options","nosniff"],xDnsPrefetchControl:["X-DNS-Prefetch-Control","off"],xDownloadOptions:["X-Download-Options","noopen"],xFrameOptions:["X-Frame-Options","SAMEORIGIN"],xPermittedCrossDomainPolicies:["X-Permitted-Cross-Domain-Policies","none"],xXssProtection:["X-XSS-Protection","0"]},Gz={crossOriginEmbedderPolicy:!1,crossOriginResourcePolicy:!0,crossOriginOpenerPolicy:!0,originAgentCluster:!0,referrerPolicy:!0,strictTransportSecurity:!0,xContentTypeOptions:!0,xDnsPrefetchControl:!0,xDownloadOptions:!0,xFrameOptions:!0,xPermittedCrossDomainPolicies:!0,xXssProtection:!0,removePoweredBy:!0,permissionsPolicy:{}};var Ub=t=>{let e={...Gz,...t},r=Yz(e),i=[];if(e.contentSecurityPolicy){let[n,o]=uC(e.contentSecurityPolicy);n&&i.push(n),r.push(["Content-Security-Policy",o])}if(e.contentSecurityPolicyReportOnly){let[n,o]=uC(e.contentSecurityPolicyReportOnly);n&&i.push(n),r.push(["Content-Security-Policy-Report-Only",o])}return e.permissionsPolicy&&Object.keys(e.permissionsPolicy).length>0&&r.push(["Permissions-Policy",Xz(e.permissionsPolicy)]),e.reportingEndpoints&&r.push(["Reporting-Endpoints",t6(e.reportingEndpoints)]),e.reportTo&&r.push(["Report-To",r6(e.reportTo)]),async function(o,s){let a=i.length===0?r:i.reduce((c,u)=>u(o,c),r);await s(),n6(o,a),e?.removePoweredBy&&o.res.headers.delete("X-Powered-By")}};function Yz(t){return Object.entries(Zz).filter(([e])=>t[e]).map(([e,r])=>{let i=t[e];return typeof i=="string"?[r[0],i]:r})}function uC(t){let e=[],r=[];for(let[i,n]of Object.entries(t)){let o=Array.isArray(n)?n:[n];o.forEach((s,a)=>{if(typeof s=="function"){let c=a*2+2+r.length;e.push((u,l)=>{l[c]=s(u,i)})}}),r.push(i.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(s,a)=>a?"-"+s.toLowerCase():s.toLowerCase()),...o.flatMap(s=>[" ",s]),"; ")}return r.pop(),e.length===0?[void 0,r.join("")]:[(i,n)=>n.map(o=>{if(o[0]==="Content-Security-Policy"||o[0]==="Content-Security-Policy-Report-Only"){let s=o[1].slice();return e.forEach(a=>{a(i,s)}),[o[0],s.join("")]}else return o}),r]}function Xz(t){return Object.entries(t).map(([e,r])=>{let i=e6(e);if(typeof r=="boolean")return`${i}=${r?"*":"none"}`;if(Array.isArray(r)){if(r.length===0)return`${i}=()`;if(r.length===1&&(r[0]==="*"||r[0]==="none"))return`${i}=${r[0]}`;let n=r.map(o=>["self","src"].includes(o)?o:`"${o}"`);return`${i}=(${n.join(" ")})`}return""}).filter(Boolean).join(", ")}function e6(t){return t.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function t6(t=[]){return t.map(e=>`${e.name}="${e.url}"`).join(", ")}function r6(t=[]){return t.map(e=>JSON.stringify(e)).join(", ")}function n6(t,e){e.forEach(([r,i])=>{t.res.headers.set(r,i)})}var i6=import("node:async_hooks").then(t=>t.AsyncLocalStorage).catch(t=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;if(typeof window<"u")return null;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),t});async function ap(){let t=await i6;if(t===null)throw new Error("getAsyncLocalStorage is only available in server code");return t}var Db=null,lC=async()=>(Db||(Db=new(await ap())),Db);async function Vi(){let t=(await lC()).getStore();if(!t)throw new Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return t}async function vs(t,e){return(await lC()).run(t,e)}var Lb=null,Mb=async()=>(Lb||(Lb=new(await ap())),Lb);async function Bb(){return(await Mb()).getStore()!==void 0}async function jb(){let t=(await Mb()).getStore();if(!t)throw new Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return t}async function qb(t,e){return(await Mb()).run(t,e)}function Wb(t){let e=Object.freeze({});return{get ref(){return e},async get(){let r=await jb();if(!r.has(e)){let i=await t();return r.set(e,i),i}return r.get(e)},async set(r){(await jb()).set(e,r)}}}var zb=null,Fb=async()=>(zb||(zb=new(await ap())),zb);var ut=async t=>Fb().then(e=>e.getStore()||t).catch(()=>t),Vb=async(t,e)=>{let r=!0;return Fb().then(i=>(r=!0,i.run(t,e))).catch(i=>{if(!r)return e();throw i})},Gu=async(t,e)=>{let r=!0;return Fb().then(i=>(r=!0,t.transaction(async n=>i.run(n,e)))).catch(i=>{if(!r)return e();throw i})};var{get:o6,set:Kb}=Wb(()=>null);cp();var Ma=ja("a-z","0-9","A-Z","-_");function Hb(t,e){typeof t=="string"&&(t=new TextEncoder().encode(t)),typeof e=="string"&&(e=new TextEncoder().encode(e));let r=new Uint8Array(t),i=new Uint8Array(e),n=r.length^i.length,o=Math.max(r.length,i.length);for(let s=0;s<o;s++)n|=(s<r.length?r[s]:0)^(s<i.length?i[s]:0);return n===0}function s6(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $r(t,e=""){if(!Number.isSafeInteger(t)||t<0){let r=e&&`"${e}" `;throw new Error(`${r}expected integer >= 0, got ${t}`)}}function Hi(t,e,r=""){let i=s6(t),n=t?.length,o=e!==void 0;if(!i||o&&n!==e){let s=r&&`"${r}" `,a=o?` of length ${e}`:"",c=i?`length=${n}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+c)}return t}function xs(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");$r(t.outputLen),$r(t.blockLen)}function Ba(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function pC(t,e){Hi(t,void 0,"digestInto() output");let r=e.outputLen;if(t.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function up(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function an(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function qa(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fn(t,e){return t<<32-e|t>>>e}function We(t,e){return t<<e|t>>>32-e>>>0}var a6=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function c6(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function u6(t){for(let e=0;e<t.length;e++)t[e]=c6(t[e]);return t}var Jb=a6?t=>t:u6,l6=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function";var Ki={_0:48,_9:57,A:65,F:70,a:97,f:102};function fC(t){if(t>=Ki._0&&t<=Ki._9)return t-Ki._0;if(t>=Ki.A&&t<=Ki.F)return t-(Ki.A-10);if(t>=Ki.a&&t<=Ki.f)return t-(Ki.a-10)}function mC(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(l6)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let n=0,o=0;n<r;n++,o+=2){let s=fC(t.charCodeAt(o)),a=fC(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}i[n]=s*16+a}return i}var d6=async()=>{};async function lp(t,e,r){let i=Date.now();for(let n=0;n<t;n++){r(n);let o=Date.now()-i;o>=0&&o<e||(await d6(),i+=o)}}function f6(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Qb(t,e=""){return typeof t=="string"?f6(t):Hi(t,void 0,e)}function dp(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options must be object or undefined");return Object.assign(t,e)}function hC(t,e={}){let r=(n,o)=>t(o).update(n).digest(),i=t(void 0);return r.outputLen=i.outputLen,r.blockLen=i.blockLen,r.create=n=>t(n),Object.assign(r,e),Object.freeze(r)}var gC=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});var fp=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,r){if(xs(e),Hi(r,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<n.length;o++)n[o]^=54;this.iHash.update(n),this.oHash=e.create();for(let o=0;o<n.length;o++)n[o]^=106;this.oHash.update(n),an(n)}update(e){return Ba(this),this.iHash.update(e),this}digestInto(e){Ba(this),Hi(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});let{oHash:r,iHash:i,finished:n,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Wa=(t,e,r)=>new fp(t,e).update(r).digest();Wa.create=(t,e)=>new fp(t,e);function p6(t,e,r){return xs(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Wa(t,r,e)}var Zb=Uint8Array.of(0),yC=Uint8Array.of();function m6(t,e,r,i=32){xs(t),$r(i,"length");let n=t.outputLen;if(i>255*n)throw new Error("Length must be <= 255*HashLen");let o=Math.ceil(i/n);r===void 0?r=yC:Hi(r,void 0,"info");let s=new Uint8Array(o*n),a=Wa.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<o;l++)Zb[0]=l+1,c.update(l===0?yC:u).update(r).update(Zb).digestInto(u),s.set(u,n*l),a._cloneInto(c);return a.destroy(),c.destroy(),an(u,Zb),s.slice(0,i)}var Gb=(t,e,r,i,n)=>m6(t,p6(t,e,r),i,n);function wC(t,e,r){return t&e^~t&r}function bC(t,e,r){return t&e^t&r^e&r}var pp=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,r,i,n){this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.buffer=new Uint8Array(e),this.view=qa(this.buffer)}update(e){Ba(this),Hi(e);let{view:r,buffer:i,blockLen:n}=this,o=e.length;for(let s=0;s<o;){let a=Math.min(n-this.pos,o-s);if(a===n){let c=qa(e);for(;n<=o-s;s+=n)this.process(c,s);continue}i.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ba(this),pC(e,this),this.finished=!0;let{buffer:r,view:i,blockLen:n,isLE:o}=this,{pos:s}=this;r[s++]=128,an(this.buffer.subarray(s)),this.padOffset>n-s&&(this.process(i,0),s=0);for(let f=s;f<n;f++)r[f]=0;i.setBigUint64(n-8,BigInt(this.length*8),o),this.process(i,0);let a=qa(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||=new this.constructor,e.set(...this.get());let{blockLen:r,buffer:i,length:n,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=n,e.pos=a,n%r&&e.buffer.set(i),e}clone(){return this._cloneInto()}},Ji=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var h6=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Eo=new Uint32Array(64),Yb=class extends pp{constructor(e){super(64,e,8,!1)}get(){let{A:e,B:r,C:i,D:n,E:o,F:s,G:a,H:c}=this;return[e,r,i,n,o,s,a,c]}set(e,r,i,n,o,s,a,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)Eo[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let d=Eo[f-15],m=Eo[f-2],h=Fn(d,7)^Fn(d,18)^d>>>3,p=Fn(m,17)^Fn(m,19)^m>>>10;Eo[f]=p+Eo[f-7]+h+Eo[f-16]|0}let{A:i,B:n,C:o,D:s,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){let d=Fn(a,6)^Fn(a,11)^Fn(a,25),m=l+d+wC(a,c,u)+h6[f]+Eo[f]|0,p=(Fn(i,2)^Fn(i,13)^Fn(i,22))+bC(i,n,o)|0;l=u,u=c,c=a,a=s+m|0,s=o,o=n,n=i,i=m+p|0}i=i+this.A|0,n=n+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(i,n,o,s,a,c,u,l)}roundClean(){an(Eo)}destroy(){this.set(0,0,0,0,0,0,0,0),an(this.buffer)}},Xb=class extends Yb{A=Ji[0]|0;B=Ji[1]|0;C=Ji[2]|0;D=Ji[3]|0;E=Ji[4]|0;F=Ji[5]|0;G=Ji[6]|0;H=Ji[7]|0;constructor(){super(32)}};var Fa=hC(()=>new Xb,gC(1));var Yu={};ar(Yu,{decode:()=>gt,encode:()=>At});var Ss=new TextEncoder,cr=new TextDecoder,mp=2**32;function Gt(...t){let e=t.reduce((n,{length:o})=>n+o,0),r=new Uint8Array(e),i=0;for(let n of t)r.set(n,i),i+=n.length;return r}function ev(t,e,r){if(e<0||e>=mp)throw new RangeError(`value must be >= 0 and <= ${mp-1}. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,e&255],r)}function hp(t){let e=Math.floor(t/mp),r=t%mp,i=new Uint8Array(8);return ev(i,e,0),ev(i,r,4),i}function gp(t){let e=new Uint8Array(4);return ev(e,t),e}function Ot(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>127)throw new TypeError("non-ASCII string encountered in encode()");e[r]=i}return e}function vC(t){if(Uint8Array.prototype.toBase64)return t.toBase64();let e=32768,r=[];for(let i=0;i<t.length;i+=e)r.push(String.fromCharCode.apply(null,t.subarray(i,i+e)));return btoa(r.join(""))}function xC(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);let e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}function gt(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:cr.decode(t),{alphabet:"base64url"});let e=t;e instanceof Uint8Array&&(e=cr.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/");try{return xC(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function At(t){let e=t;return typeof e=="string"&&(e=Ss.encode(e)),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64url",omitPadding:!0}):vC(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var Ft=class extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,r){super(e,r),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},ur=class extends Ft{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,r,i="unspecified",n="unspecified"){super(e,{cause:{claim:i,reason:n,payload:r}}),this.claim=i,this.reason=n,this.payload=r}},Ns=class extends Ft{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,r,i="unspecified",n="unspecified"){super(e,{cause:{claim:i,reason:n,payload:r}}),this.claim=i,this.reason=n,this.payload=r}},As=class extends Ft{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"},Ce=class extends Ft{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"},Va=class extends Ft{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",r){super(e,r)}},me=class extends Ft{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"},lt=class extends Ft{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"},yr=class extends Ft{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"},yp=class extends Ft{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"},Xu=class extends Ft{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"},Ka=class extends Ft{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",r){super(e,r)}},wp=class extends Ft{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",r){super(e,r)}},bp=class extends Ft{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",r){super(e,r)}},vp=class extends Ft{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",r){super(e,r)}};function tv(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Ce(`Unsupported JWE Algorithm: ${t}`)}}var SC=t=>crypto.getRandomValues(new Uint8Array(tv(t)>>3));function xp(t,e){if(e.length<<3!==tv(t))throw new me("Invalid Initialization Vector length")}function Ha(t,e){let r=t.byteLength<<3;if(r!==e)throw new me(`Invalid Content Encryption Key length. Expected ${e} bits, got ${r} bits`)}var Yt=(t,e="algorithm.name")=>new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`),bi=(t,e)=>t.name===e;function Sp(t){return parseInt(t.name.slice(4),10)}function g6(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function NC(t,e){if(e&&!t.usages.includes(e))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${e}.`)}function AC(t,e,r){switch(e){case"HS256":case"HS384":case"HS512":{if(!bi(t.algorithm,"HMAC"))throw Yt("HMAC");let i=parseInt(e.slice(2),10);if(Sp(t.algorithm.hash)!==i)throw Yt(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!bi(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Yt("RSASSA-PKCS1-v1_5");let i=parseInt(e.slice(2),10);if(Sp(t.algorithm.hash)!==i)throw Yt(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!bi(t.algorithm,"RSA-PSS"))throw Yt("RSA-PSS");let i=parseInt(e.slice(2),10);if(Sp(t.algorithm.hash)!==i)throw Yt(`SHA-${i}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!bi(t.algorithm,"Ed25519"))throw Yt("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!bi(t.algorithm,e))throw Yt(e);break}case"ES256":case"ES384":case"ES512":{if(!bi(t.algorithm,"ECDSA"))throw Yt("ECDSA");let i=g6(e);if(t.algorithm.namedCurve!==i)throw Yt(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}NC(t,r)}function Mr(t,e,r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!bi(t.algorithm,"AES-GCM"))throw Yt("AES-GCM");let i=parseInt(e.slice(1,4),10);if(t.algorithm.length!==i)throw Yt(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!bi(t.algorithm,"AES-KW"))throw Yt("AES-KW");let i=parseInt(e.slice(1,4),10);if(t.algorithm.length!==i)throw Yt(i,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":break;default:throw Yt("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!bi(t.algorithm,"PBKDF2"))throw Yt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!bi(t.algorithm,"RSA-OAEP"))throw Yt("RSA-OAEP");let i=parseInt(e.slice(9),10)||1;if(Sp(t.algorithm.hash)!==i)throw Yt(`SHA-${i}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}NC(t,r)}function EC(t,e,...r){if(r=r.filter(Boolean),r.length>2){let i=r.pop();t+=`one of type ${r.join(", ")}, or ${i}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor?.name&&(t+=` Received an instance of ${e.constructor.name}`),t}var Sn=(t,...e)=>EC("Key must be ",t,...e),rv=(t,e,...r)=>EC(`Key for the ${t} algorithm must be `,e,...r);function Es(t){if(!vi(t))throw new Error("CryptoKey instance expected")}var vi=t=>{if(t?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return t instanceof CryptoKey}catch{return!1}},el=t=>t?.[Symbol.toStringTag]==="KeyObject",tl=t=>vi(t)||el(t);async function y6(t,e){if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},i=await crypto.subtle.generateKey(r,!1,["sign"]),n=new Uint8Array(await crypto.subtle.sign(r,i,t)),o=new Uint8Array(await crypto.subtle.sign(r,i,e)),s=0,a=-1;for(;++a<32;)s|=n[a]^o[a];return s===0}async function w6(t,e,r,i,n,o){if(!(e instanceof Uint8Array))throw new TypeError(Sn(e,"Uint8Array"));let s=parseInt(t.slice(1,4),10),a=await crypto.subtle.importKey("raw",e.subarray(s>>3),"AES-CBC",!1,["decrypt"]),c=await crypto.subtle.importKey("raw",e.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),u=Gt(o,i,r,hp(o.length<<3)),l=new Uint8Array((await crypto.subtle.sign("HMAC",c,u)).slice(0,s>>3)),f;try{f=await y6(n,l)}catch{}if(!f)throw new Va;let d;try{d=new Uint8Array(await crypto.subtle.decrypt({iv:i,name:"AES-CBC"},a,r))}catch{}if(!d)throw new Va;return d}async function b6(t,e,r,i,n,o){let s;e instanceof Uint8Array?s=await crypto.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(Mr(e,t,"decrypt"),s=e);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:o,iv:i,name:"AES-GCM",tagLength:128},s,Gt(r,n)))}catch{throw new Va}}async function Np(t,e,r,i,n,o){if(!vi(e)&&!(e instanceof Uint8Array))throw new TypeError(Sn(e,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!i)throw new me("JWE Initialization Vector missing");if(!n)throw new me("JWE Authentication Tag missing");switch(xp(t,i),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&Ha(e,parseInt(t.slice(-3),10)),w6(t,e,r,i,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&Ha(e,parseInt(t.slice(1,4),10)),b6(t,e,r,i,n,o);default:throw new Ce("Unsupported JWE Content Encryption Algorithm")}}function _o(...t){let e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(let i of e){let n=Object.keys(i);if(!r||r.size===0){r=new Set(n);continue}for(let o of n){if(r.has(o))return!1;r.add(o)}}return!0}var v6=t=>typeof t=="object"&&t!==null;function wt(t){if(!v6(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _C(t,e){if(t.algorithm.length!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function kC(t,e,r){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"AES-KW",!0,[r]):(Mr(t,e,r),t)}async function rl(t,e,r){let i=await kC(e,t,"wrapKey");_C(i,t);let n=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",n,i,"AES-KW"))}async function nl(t,e,r){let i=await kC(e,t,"unwrapKey");_C(i,t);let n=await crypto.subtle.unwrapKey("raw",r,i,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",n))}async function Ap(t,e){let r=`SHA-${t.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,e))}function iv(t){return Gt(gp(t.length),t)}async function x6(t,e,r){let i=e>>3,n=32,o=Math.ceil(i/n),s=new Uint8Array(o*n);for(let a=1;a<=o;a++){let c=new Uint8Array(4+t.length+r.length);c.set(gp(a),0),c.set(t,4),c.set(r,4+t.length);let u=await Ap("sha256",c);s.set(u,(a-1)*n)}return s.slice(0,i)}async function Ep(t,e,r,i,n=new Uint8Array,o=new Uint8Array){Mr(t,"ECDH"),Mr(e,"ECDH","deriveBits");let s=iv(Ot(r)),a=iv(n),c=iv(o),u=gp(i),l=new Uint8Array,f=Gt(s,a,c,u,l),d=new Uint8Array(await crypto.subtle.deriveBits({name:t.algorithm.name,public:t},e,S6(t)));return x6(d,i,f)}function S6(t){return t.algorithm.name==="X25519"?256:Math.ceil(parseInt(t.algorithm.namedCurve.slice(-3),10)/8)<<3}function _p(t){switch(t.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return t.algorithm.name==="X25519"}}function N6(t,e){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]):(Mr(t,e,"deriveBits"),t)}var A6=(t,e)=>Gt(Ot(t),Uint8Array.of(0),e);async function IC(t,e,r,i){if(!(t instanceof Uint8Array)||t.length<8)throw new me("PBES2 Salt Input must be 8 or more octets");let n=A6(e,t),o=parseInt(e.slice(13,16),10),s={hash:`SHA-${e.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:n},a=await N6(i,e);return new Uint8Array(await crypto.subtle.deriveBits(s,a,o))}async function $C(t,e,r,i=2048,n=crypto.getRandomValues(new Uint8Array(16))){let o=await IC(n,t,i,e);return{encryptedKey:await rl(t.slice(-6),o,r),p2c:i,p2s:At(n)}}async function CC(t,e,r,i,n){let o=await IC(n,t,i,e);return nl(t.slice(-6),o,r)}function _s(t,e){if(t.startsWith("RS")||t.startsWith("PS")){let{modulusLength:r}=e.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}}var PC=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Ce(`alg ${t} is not supported either by JOSE or your javascript runtime`)}};async function RC(t,e,r){return Mr(e,t,"encrypt"),_s(t,e),new Uint8Array(await crypto.subtle.encrypt(PC(t),e,r))}async function UC(t,e,r){return Mr(e,t,"decrypt"),_s(t,e),new Uint8Array(await crypto.subtle.decrypt(PC(t),e,r))}function il(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Ce(`Unsupported JWE Algorithm: ${t}`)}}var ko=t=>crypto.getRandomValues(new Uint8Array(il(t)>>3));function E6(t){let e,r;switch(t.kty){case"AKP":{switch(t.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":e={name:t.alg},r=t.priv?["sign"]:["verify"];break;default:throw new Ce('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Ce('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new Ce('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":case"EdDSA":e={name:"Ed25519"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new Ce('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Ce('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}async function Ja(t){if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:e,keyUsages:r}=E6(t),i={...t};return i.kty!=="AKP"&&delete i.alg,delete i.use,crypto.subtle.importKey("jwk",i,e,t.ext??!(t.d||t.priv),t.key_ops??r)}async function Qi(t,e,r){if(!wt(t))throw new TypeError("JWK must be an object");let i;switch(e??=t.alg,i??=r?.extractable??t.ext,t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return gt(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new Ce('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return Ja({...t,alg:e,ext:i});case"AKP":{if(typeof t.alg!="string"||!t.alg)throw new TypeError('missing "alg" (Algorithm) Parameter value');if(e!==void 0&&e!==t.alg)throw new TypeError("JWK alg and alg option value mismatch");return Ja({...t,ext:i})}case"EC":case"OKP":return Ja({...t,alg:e,ext:i});default:throw new Ce('Unsupported "kty" (Key Type) Parameter value')}}async function _6(t,e,r,i,n){if(!(r instanceof Uint8Array))throw new TypeError(Sn(r,"Uint8Array"));let o=parseInt(t.slice(1,4),10),s=await crypto.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["encrypt"]),a=await crypto.subtle.importKey("raw",r.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:i,name:"AES-CBC"},s,e)),u=Gt(n,i,c,hp(n.length<<3)),l=new Uint8Array((await crypto.subtle.sign("HMAC",a,u)).slice(0,o>>3));return{ciphertext:c,tag:l,iv:i}}async function k6(t,e,r,i,n){let o;r instanceof Uint8Array?o=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Mr(r,t,"encrypt"),o=r);let s=new Uint8Array(await crypto.subtle.encrypt({additionalData:n,iv:i,name:"AES-GCM",tagLength:128},o,e)),a=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:a,iv:i}}async function kp(t,e,r,i,n){if(!vi(r)&&!(r instanceof Uint8Array))throw new TypeError(Sn(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(i?xp(t,i):i=SC(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Ha(r,parseInt(t.slice(-3),10)),_6(t,e,r,i,n);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Ha(r,parseInt(t.slice(1,4),10)),k6(t,e,r,i,n);default:throw new Ce("Unsupported JWE Content Encryption Algorithm")}}async function LC(t,e,r,i){let n=t.slice(0,7),o=await kp(n,r,e,i,new Uint8Array);return{encryptedKey:o.ciphertext,iv:At(o.iv),tag:At(o.tag)}}async function zC(t,e,r,i,n){let o=t.slice(0,7);return Np(o,e,r,i,n,new Uint8Array)}async function jC(t,e,r,i,n){switch(t){case"dir":{if(r!==void 0)throw new me("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(r!==void 0)throw new me("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!wt(i.epk))throw new me('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(Es(e),!_p(e))throw new Ce("ECDH with the provided key is not allowed or not supported by your javascript runtime");let o=await Qi(i.epk,t);Es(o);let s,a;if(i.apu!==void 0){if(typeof i.apu!="string")throw new me('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{s=gt(i.apu)}catch{throw new me("Failed to base64url decode the apu")}}if(i.apv!==void 0){if(typeof i.apv!="string")throw new me('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=gt(i.apv)}catch{throw new me("Failed to base64url decode the apv")}}let c=await Ep(o,e,t==="ECDH-ES"?i.enc:t,t==="ECDH-ES"?il(i.enc):parseInt(t.slice(-5,-2),10),s,a);if(t==="ECDH-ES")return c;if(r===void 0)throw new me("JWE Encrypted Key missing");return nl(t.slice(-6),c,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new me("JWE Encrypted Key missing");return Es(e),UC(t,e,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new me("JWE Encrypted Key missing");if(typeof i.p2c!="number")throw new me('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=n?.maxPBES2Count||1e4;if(i.p2c>o)throw new me('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof i.p2s!="string")throw new me('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let s;try{s=gt(i.p2s)}catch{throw new me("Failed to base64url decode the p2s")}return CC(t,e,r,i.p2c,s)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new me("JWE Encrypted Key missing");return nl(t,e,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new me("JWE Encrypted Key missing");if(typeof i.iv!="string")throw new me('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof i.tag!="string")throw new me('JOSE Header "tag" (Authentication Tag) missing or invalid');let o;try{o=gt(i.iv)}catch{throw new me("Failed to base64url decode the iv")}let s;try{s=gt(i.tag)}catch{throw new me("Failed to base64url decode the tag")}return zC(t,e,r,o,s)}default:throw new Ce('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function To(t,e,r,i,n){if(n.crit!==void 0&&i?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(s=>typeof s!="string"||s.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;r!==void 0?o=new Map([...Object.entries(r),...e.entries()]):o=e;for(let s of i.crit){if(!o.has(s))throw new Ce(`Extension Header Parameter "${s}" is not recognized`);if(n[s]===void 0)throw new t(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&i[s]===void 0)throw new t(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)}function ol(t,e){if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)}var ks=t=>wt(t)&&typeof t.kty=="string",MC=t=>t.kty!=="oct"&&(t.kty==="AKP"&&typeof t.priv=="string"||typeof t.d=="string"),BC=t=>t.kty!=="oct"&&t.d===void 0&&t.priv===void 0,qC=t=>t.kty==="oct"&&typeof t.k=="string";var Qa,WC=async(t,e,r,i=!1)=>{Qa||=new WeakMap;let n=Qa.get(t);if(n?.[r])return n[r];let o=await Ja({...e,alg:r});return i&&Object.freeze(t),n?n[r]=o:Qa.set(t,{[r]:o}),o},I6=(t,e)=>{Qa||=new WeakMap;let r=Qa.get(t);if(r?.[e])return r[e];let i=t.type==="public",n=!!i,o;if(t.asymmetricKeyType==="x25519"){switch(e){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}o=t.toCryptoKey(t.asymmetricKeyType,n,i?[]:["deriveBits"])}if(t.asymmetricKeyType==="ed25519"){if(e!=="EdDSA"&&e!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");o=t.toCryptoKey(t.asymmetricKeyType,n,[i?"verify":"sign"])}switch(t.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(e!==t.asymmetricKeyType.toUpperCase())throw new TypeError("given KeyObject instance cannot be used for this algorithm");o=t.toCryptoKey(t.asymmetricKeyType,n,[i?"verify":"sign"])}}if(t.asymmetricKeyType==="rsa"){let s;switch(e){case"RSA-OAEP":s="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":s="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":s="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":s="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(e.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:s},n,i?["encrypt"]:["decrypt"]);o=t.toCryptoKey({name:e.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:s},n,[i?"verify":"sign"])}if(t.asymmetricKeyType==="ec"){let a=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(t.asymmetricKeyDetails?.namedCurve);if(!a)throw new TypeError("given KeyObject instance cannot be used for this algorithm");e==="ES256"&&a==="P-256"&&(o=t.toCryptoKey({name:"ECDSA",namedCurve:a},n,[i?"verify":"sign"])),e==="ES384"&&a==="P-384"&&(o=t.toCryptoKey({name:"ECDSA",namedCurve:a},n,[i?"verify":"sign"])),e==="ES512"&&a==="P-521"&&(o=t.toCryptoKey({name:"ECDSA",namedCurve:a},n,[i?"verify":"sign"])),e.startsWith("ECDH-ES")&&(o=t.toCryptoKey({name:"ECDH",namedCurve:a},n,i?[]:["deriveBits"]))}if(!o)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[e]=o:Qa.set(t,{[e]:o}),o};async function xi(t,e){if(t instanceof Uint8Array||vi(t))return t;if(el(t)){if(t.type==="secret")return t.export();if("toCryptoKey"in t&&typeof t.toCryptoKey=="function")try{return I6(t,e)}catch(i){if(i instanceof TypeError)throw i}let r=t.export({format:"jwk"});return WC(t,r,e)}if(ks(t))return t.k?gt(t.k):WC(t,t,e,!0);throw new Error("unreachable")}var Za=t=>t?.[Symbol.toStringTag],ov=(t,e,r)=>{if(e.use!==void 0){let i;switch(r){case"sign":case"verify":i="sig";break;case"encrypt":case"decrypt":i="enc";break}if(e.use!==i)throw new TypeError(`Invalid key for this operation, its "use" must be "${i}" when present`)}if(e.alg!==void 0&&e.alg!==t)throw new TypeError(`Invalid key for this operation, its "alg" must be "${t}" when present`);if(Array.isArray(e.key_ops)){let i;switch(!0){case(r==="sign"||r==="verify"):case t==="dir":case t.includes("CBC-HS"):i=r;break;case t.startsWith("PBES2"):i="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):!t.includes("GCM")&&t.endsWith("KW")?i=r==="encrypt"?"wrapKey":"unwrapKey":i=r;break;case(r==="encrypt"&&t.startsWith("RSA")):i="wrapKey";break;case r==="decrypt":i=t.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(i&&e.key_ops?.includes?.(i)===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${i}" when present`)}return!0},$6=(t,e,r)=>{if(!(e instanceof Uint8Array)){if(ks(e)){if(qC(e)&&ov(t,e,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!tl(e))throw new TypeError(rv(t,e,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Za(e)} instances for symmetric algorithms must be of type "secret"`)}},C6=(t,e,r)=>{if(ks(e))switch(r){case"decrypt":case"sign":if(MC(e)&&ov(t,e,r))return;throw new TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(BC(e)&&ov(t,e,r))return;throw new TypeError("JSON Web Key for this operation must be a public JWK")}if(!tl(e))throw new TypeError(rv(t,e,"CryptoKey","KeyObject","JSON Web Key"));if(e.type==="secret")throw new TypeError(`${Za(e)} instances for asymmetric algorithms must not be of type "secret"`);if(e.type==="public")switch(r){case"sign":throw new TypeError(`${Za(e)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Za(e)} instances for asymmetric algorithm decryption must be of type "private"`)}if(e.type==="private")switch(r){case"verify":throw new TypeError(`${Za(e)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Za(e)} instances for asymmetric algorithm encryption must be of type "public"`)}};function Io(t,e,r){switch(t.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":$6(t,e,r);break;default:C6(t,e,r)}}async function FC(t,e,r){if(!wt(t))throw new me("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new me("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new me("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new me("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new me("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new me("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new me("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new me("JWE AAD incorrect type");if(t.header!==void 0&&!wt(t.header))throw new me("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!wt(t.unprotected))throw new me("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected)try{let I=gt(t.protected);i=JSON.parse(cr.decode(I))}catch{throw new me("JWE Protected Header is invalid")}if(!_o(i,t.header,t.unprotected))throw new me("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let n={...i,...t.header,...t.unprotected};if(To(me,new Map,r?.crit,i,n),n.zip!==void 0)throw new Ce('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:o,enc:s}=n;if(typeof o!="string"||!o)throw new me("missing JWE Algorithm (alg) in JWE Header");if(typeof s!="string"||!s)throw new me("missing JWE Encryption Algorithm (enc) in JWE Header");let a=r&&ol("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&ol("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(a&&!a.has(o)||!a&&o.startsWith("PBES2"))throw new As('"alg" (Algorithm) Header Parameter value not allowed');if(c&&!c.has(s))throw new As('"enc" (Encryption Algorithm) Header Parameter value not allowed');let u;if(t.encrypted_key!==void 0)try{u=gt(t.encrypted_key)}catch{throw new me("Failed to base64url decode the encrypted_key")}let l=!1;typeof e=="function"&&(e=await e(i,t),l=!0),Io(o==="dir"?s:o,e,"decrypt");let f=await xi(e,o),d;try{d=await jC(o,f,u,n,r)}catch(I){if(I instanceof TypeError||I instanceof me||I instanceof Ce)throw I;d=ko(s)}let m,h;if(t.iv!==void 0)try{m=gt(t.iv)}catch{throw new me("Failed to base64url decode the iv")}if(t.tag!==void 0)try{h=gt(t.tag)}catch{throw new me("Failed to base64url decode the tag")}let p=t.protected!==void 0?Ot(t.protected):new Uint8Array,y;t.aad!==void 0?y=Gt(p,Ot("."),Ot(t.aad)):y=p;let b;try{b=gt(t.ciphertext)}catch{throw new me("Failed to base64url decode the ciphertext")}let T={plaintext:await Np(s,d,b,m,h,y)};if(t.protected!==void 0&&(T.protectedHeader=i),t.aad!==void 0)try{T.additionalAuthenticatedData=gt(t.aad)}catch{throw new me("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(T.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(T.unprotectedHeader=t.header),l?{...T,key:f}:T}async function VC(t,e,r){if(t instanceof Uint8Array&&(t=cr.decode(t)),typeof t!="string")throw new me("Compact JWE must be a string or Uint8Array");let{0:i,1:n,2:o,3:s,4:a,length:c}=t.split(".");if(c!==5)throw new me("Invalid Compact JWE");let u=await FC({ciphertext:s,iv:o||void 0,protected:i,tag:a||void 0,encrypted_key:n||void 0},e,r),l={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return typeof e=="function"?{...l,key:u.key}:l}var KC=Symbol();async function HC(t){if(el(t))if(t.type==="secret")t=t.export();else return t.export({format:"jwk"});if(t instanceof Uint8Array)return{kty:"oct",k:At(t)};if(!vi(t))throw new TypeError(Sn(t,"CryptoKey","KeyObject","Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:e,key_ops:r,alg:i,use:n,...o}=await crypto.subtle.exportKey("jwk",t);return o.kty==="AKP"&&(o.alg=i),o}async function Tp(t){return HC(t)}async function JC(t,e,r,i,n={}){let o,s,a;switch(t){case"dir":{a=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(Es(r),!_p(r))throw new Ce("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=n,l;n.epk?l=await xi(n.epk,t):l=(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:f,y:d,crv:m,kty:h}=await Tp(l),p=await Ep(r,l,t==="ECDH-ES"?e:t,t==="ECDH-ES"?il(e):parseInt(t.slice(-5,-2),10),c,u);if(s={epk:{x:f,crv:m,kty:h}},h==="EC"&&(s.epk.y=d),c&&(s.apu=At(c)),u&&(s.apv=At(u)),t==="ECDH-ES"){a=p;break}a=i||ko(e);let y=t.slice(-6);o=await rl(y,p,a);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=i||ko(e),Es(r),o=await RC(t,r,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=i||ko(e);let{p2c:c,p2s:u}=n;({encryptedKey:o,...s}=await $C(t,r,a,c,u));break}case"A128KW":case"A192KW":case"A256KW":{a=i||ko(e),o=await rl(t,r,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=i||ko(e);let{iv:c}=n;({encryptedKey:o,...s}=await LC(t,r,a,c));break}default:throw new Ce('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:o,parameters:s}}var Ip=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#s)throw new TypeError("setKeyManagementParameters can only be called once");return this.#s=e,this}setProtectedHeader(e){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw new TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#o)throw new TypeError("setContentEncryptionKey can only be called once");return this.#o=e,this}setInitializationVector(e){if(this.#a)throw new TypeError("setInitializationVector can only be called once");return this.#a=e,this}async encrypt(e,r){if(!this.#t&&!this.#n&&!this.#r)throw new me("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!_o(this.#t,this.#n,this.#r))throw new me("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this.#t,...this.#n,...this.#r};if(To(me,new Map,r?.crit,this.#t,i),i.zip!==void 0)throw new Ce('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:n,enc:o}=i;if(typeof n!="string"||!n)throw new me('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof o!="string"||!o)throw new me('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let s;if(this.#o&&(n==="dir"||n==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${n}`);Io(n==="dir"?o:n,e,"encrypt");let a;{let y,b=await xi(e,n);({cek:a,encryptedKey:s,parameters:y}=await JC(n,o,b,this.#o,this.#s)),y&&(r&&KC in r?this.#n?this.#n={...this.#n,...y}:this.setUnprotectedHeader(y):this.#t?this.#t={...this.#t,...y}:this.setProtectedHeader(y))}let c,u,l,f;if(this.#t?(u=At(JSON.stringify(this.#t)),l=Ot(u)):(u="",l=new Uint8Array),this.#i){f=At(this.#i);let y=Ot(f);c=Gt(l,Ot("."),y)}else c=l;let{ciphertext:d,tag:m,iv:h}=await kp(o,this.#e,a,this.#a,c),p={ciphertext:At(d)};return h&&(p.iv=At(h)),m&&(p.tag=At(m)),s&&(p.encrypted_key=At(s)),f&&(p.aad=f),this.#t&&(p.protected=u),this.#r&&(p.unprotected=this.#r),this.#n&&(p.header=this.#n),p}};function $p(t,e){let r=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:parseInt(t.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:e.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:t};default:throw new Ce(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}async function Cp(t,e,r){if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(Sn(e,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",e,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[r])}return AC(e,t,r),e}async function QC(t,e,r,i){let n=await Cp(t,e,"verify");_s(t,n);let o=$p(t,n.algorithm);try{return await crypto.subtle.verify(o,n,r,i)}catch{return!1}}async function ZC(t,e,r){if(!wt(t))throw new lt("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new lt('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new lt("JWS Protected Header incorrect type");if(t.payload===void 0)throw new lt("JWS Payload missing");if(typeof t.signature!="string")throw new lt("JWS Signature missing or incorrect type");if(t.header!==void 0&&!wt(t.header))throw new lt("JWS Unprotected Header incorrect type");let i={};if(t.protected)try{let y=gt(t.protected);i=JSON.parse(cr.decode(y))}catch{throw new lt("JWS Protected Header is invalid")}if(!_o(i,t.header))throw new lt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...i,...t.header},o=To(lt,new Map([["b64",!0]]),r?.crit,i,n),s=!0;if(o.has("b64")&&(s=i.b64,typeof s!="boolean"))throw new lt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=n;if(typeof a!="string"||!a)throw new lt('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=r&&ol("algorithms",r.algorithms);if(c&&!c.has(a))throw new As('"alg" (Algorithm) Header Parameter value not allowed');if(s){if(typeof t.payload!="string")throw new lt("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new lt("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof e=="function"&&(e=await e(i,t),u=!0),Io(a,e,"verify");let l=Gt(t.protected!==void 0?Ot(t.protected):new Uint8Array,Ot("."),typeof t.payload=="string"?s?Ot(t.payload):Ss.encode(t.payload):t.payload),f;try{f=gt(t.signature)}catch{throw new lt("Failed to base64url decode the signature")}let d=await xi(e,a);if(!await QC(a,d,f,l))throw new vp;let h;if(s)try{h=gt(t.payload)}catch{throw new lt("Failed to base64url decode the payload")}else typeof t.payload=="string"?h=Ss.encode(t.payload):h=t.payload;let p={payload:h};return t.protected!==void 0&&(p.protectedHeader=i),t.header!==void 0&&(p.unprotectedHeader=t.header),u?{...p,key:d}:p}async function GC(t,e,r){if(t instanceof Uint8Array&&(t=cr.decode(t)),typeof t!="string")throw new lt("Compact JWS must be a string or Uint8Array");let{0:i,1:n,2:o,length:s}=t.split(".");if(s!==3)throw new lt("Invalid Compact JWS");let a=await ZC({payload:n,protected:i,signature:o},e,r),c={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...c,key:a.key}:c}var $o=t=>Math.floor(t.getTime()/1e3),XC=60,eO=XC*60,sv=eO*24,O6=sv*7,P6=sv*365.25,R6=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function sl(t){let e=R6.exec(t);if(!e||e[4]&&e[1])throw new TypeError("Invalid time period format");let r=parseFloat(e[2]),i=e[3].toLowerCase(),n;switch(i){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(r*XC);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(r*eO);break;case"day":case"days":case"d":n=Math.round(r*sv);break;case"week":case"weeks":case"w":n=Math.round(r*O6);break;default:n=Math.round(r*P6);break}return e[1]==="-"||e[4]==="ago"?-n:n}function Ts(t,e){if(!Number.isFinite(e))throw new TypeError(`Invalid ${t} input`);return e}var YC=t=>t.includes("/")?t.toLowerCase():`application/${t.toLowerCase()}`,U6=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1;function Op(t,e,r={}){let i;try{i=JSON.parse(cr.decode(e))}catch{}if(!wt(i))throw new yr("JWT Claims Set must be a top-level JSON object");let{typ:n}=r;if(n&&(typeof t.typ!="string"||YC(t.typ)!==YC(n)))throw new ur('unexpected "typ" JWT header value',i,"typ","check_failed");let{requiredClaims:o=[],issuer:s,subject:a,audience:c,maxTokenAge:u}=r,l=[...o];u!==void 0&&l.push("iat"),c!==void 0&&l.push("aud"),a!==void 0&&l.push("sub"),s!==void 0&&l.push("iss");for(let h of new Set(l.reverse()))if(!(h in i))throw new ur(`missing required "${h}" claim`,i,h,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(i.iss))throw new ur('unexpected "iss" claim value',i,"iss","check_failed");if(a&&i.sub!==a)throw new ur('unexpected "sub" claim value',i,"sub","check_failed");if(c&&!U6(i.aud,typeof c=="string"?[c]:c))throw new ur('unexpected "aud" claim value',i,"aud","check_failed");let f;switch(typeof r.clockTolerance){case"string":f=sl(r.clockTolerance);break;case"number":f=r.clockTolerance;break;case"undefined":f=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:d}=r,m=$o(d||new Date);if((i.iat!==void 0||u)&&typeof i.iat!="number")throw new ur('"iat" claim must be a number',i,"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new ur('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>m+f)throw new ur('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new ur('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=m-f)throw new Ns('"exp" claim timestamp check failed',i,"exp","check_failed")}if(u){let h=m-i.iat,p=typeof u=="number"?u:sl(u);if(h-f>p)throw new Ns('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(h<0-f)throw new ur('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i}var Ga=class{#e;constructor(e){if(!wt(e))throw new TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(e)}data(){return Ss.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(e){this.#e.iss=e}get sub(){return this.#e.sub}set sub(e){this.#e.sub=e}get aud(){return this.#e.aud}set aud(e){this.#e.aud=e}set jti(e){this.#e.jti=e}set nbf(e){typeof e=="number"?this.#e.nbf=Ts("setNotBefore",e):e instanceof Date?this.#e.nbf=Ts("setNotBefore",$o(e)):this.#e.nbf=$o(new Date)+sl(e)}set exp(e){typeof e=="number"?this.#e.exp=Ts("setExpirationTime",e):e instanceof Date?this.#e.exp=Ts("setExpirationTime",$o(e)):this.#e.exp=$o(new Date)+sl(e)}set iat(e){e===void 0?this.#e.iat=$o(new Date):e instanceof Date?this.#e.iat=Ts("setIssuedAt",$o(e)):typeof e=="string"?this.#e.iat=Ts("setIssuedAt",$o(new Date)+sl(e)):this.#e.iat=Ts("setIssuedAt",e)}};async function Si(t,e,r){let i=await GC(t,e,r);if(i.protectedHeader.crit?.includes("b64")&&i.protectedHeader.b64===!1)throw new yr("JWTs MUST NOT use unencoded payload");let o={payload:Op(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return typeof e=="function"?{...o,key:i.key}:o}async function av(t,e,r){let i=await VC(t,e,r),n=Op(i.protectedHeader,i.plaintext,r),{protectedHeader:o}=i;if(o.iss!==void 0&&o.iss!==n.iss)throw new ur('replicated "iss" claim header parameter mismatch',n,"iss","mismatch");if(o.sub!==void 0&&o.sub!==n.sub)throw new ur('replicated "sub" claim header parameter mismatch',n,"sub","mismatch");if(o.aud!==void 0&&JSON.stringify(o.aud)!==JSON.stringify(n.aud))throw new ur('replicated "aud" claim header parameter mismatch',n,"aud","mismatch");let s={payload:n,protectedHeader:o};return typeof e=="function"?{...s,key:i.key}:s}var Pp=class{#e;constructor(e){this.#e=new Ip(e)}setContentEncryptionKey(e){return this.#e.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#e.setInitializationVector(e),this}setProtectedHeader(e){return this.#e.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#e.setKeyManagementParameters(e),this}async encrypt(e,r){let i=await this.#e.encrypt(e,r);return[i.protected,i.encrypted_key,i.iv,i.ciphertext,i.tag].join(".")}};async function tO(t,e,r){let i=await Cp(t,e,"sign");_s(t,i);let n=await crypto.subtle.sign($p(t,i.algorithm),i,r);return new Uint8Array(n)}var Rp=class{#e;#t;#r;constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this.#e=e}setProtectedHeader(e){if(this.#t)throw new TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setUnprotectedHeader(e){if(this.#r)throw new TypeError("setUnprotectedHeader can only be called once");return this.#r=e,this}async sign(e,r){if(!this.#t&&!this.#r)throw new lt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!_o(this.#t,this.#r))throw new lt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...this.#t,...this.#r},n=To(lt,new Map([["b64",!0]]),r?.crit,this.#t,i),o=!0;if(n.has("b64")&&(o=this.#t.b64,typeof o!="boolean"))throw new lt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=i;if(typeof s!="string"||!s)throw new lt('JWS "alg" (Algorithm) Header Parameter missing or invalid');Io(s,e,"sign");let a,c;o?(a=At(this.#e),c=Ot(a)):(c=this.#e,a="");let u,l;this.#t?(u=At(JSON.stringify(this.#t)),l=Ot(u)):(u="",l=new Uint8Array);let f=Gt(l,Ot("."),c),d=await xi(e,s),m=await tO(s,d,f),h={signature:At(m),payload:a};return this.#r&&(h.header=this.#r),this.#t&&(h.protected=u),h}};var Up=class{#e;constructor(e){this.#e=new Rp(e)}setProtectedHeader(e){return this.#e.setProtectedHeader(e),this}async sign(e,r){let i=await this.#e.sign(e,r);if(i.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`}};var al=class{#e;#t;constructor(e={}){this.#t=new Ga(e)}setIssuer(e){return this.#t.iss=e,this}setSubject(e){return this.#t.sub=e,this}setAudience(e){return this.#t.aud=e,this}setJti(e){return this.#t.jti=e,this}setNotBefore(e){return this.#t.nbf=e,this}setExpirationTime(e){return this.#t.exp=e,this}setIssuedAt(e){return this.#t.iat=e,this}setProtectedHeader(e){return this.#e=e,this}async sign(e,r){let i=new Up(this.#t.data());if(i.setProtectedHeader(this.#e),Array.isArray(this.#e?.crit)&&this.#e.crit.includes("b64")&&this.#e.b64===!1)throw new yr("JWTs MUST NOT use unencoded payload");return i.sign(e,r)}};var cl=class{#e;#t;#r;#n;#i;#o;#a;#s;constructor(e={}){this.#s=new Ga(e)}setIssuer(e){return this.#s.iss=e,this}setSubject(e){return this.#s.sub=e,this}setAudience(e){return this.#s.aud=e,this}setJti(e){return this.#s.jti=e,this}setNotBefore(e){return this.#s.nbf=e,this}setExpirationTime(e){return this.#s.exp=e,this}setIssuedAt(e){return this.#s.iat=e,this}setProtectedHeader(e){if(this.#n)throw new TypeError("setProtectedHeader can only be called once");return this.#n=e,this}setKeyManagementParameters(e){if(this.#r)throw new TypeError("setKeyManagementParameters can only be called once");return this.#r=e,this}setContentEncryptionKey(e){if(this.#e)throw new TypeError("setContentEncryptionKey can only be called once");return this.#e=e,this}setInitializationVector(e){if(this.#t)throw new TypeError("setInitializationVector can only be called once");return this.#t=e,this}replicateIssuerAsHeader(){return this.#i=!0,this}replicateSubjectAsHeader(){return this.#o=!0,this}replicateAudienceAsHeader(){return this.#a=!0,this}async encrypt(e,r){let i=new Pp(this.#s.data());return this.#n&&(this.#i||this.#o||this.#a)&&(this.#n={...this.#n,iss:this.#i?this.#s.iss:void 0,sub:this.#o?this.#s.sub:void 0,aud:this.#a?this.#s.aud:void 0}),i.setProtectedHeader(this.#n),this.#t&&i.setInitializationVector(this.#t),this.#e&&i.setContentEncryptionKey(this.#e),this.#r&&i.setKeyManagementParameters(this.#r),i.encrypt(e,r)}};var Ni=(t,e)=>{if(typeof t!="string"||!t)throw new yp(`${e} missing or invalid`)};async function Dp(t,e){let r;if(ks(t))r=t;else if(tl(t))r=await Tp(t);else throw new TypeError(Sn(t,"CryptoKey","KeyObject","JSON Web Key"));if(e??="sha256",e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let i;switch(r.kty){case"AKP":Ni(r.alg,'"alg" (Algorithm) Parameter'),Ni(r.pub,'"pub" (Public key) Parameter'),i={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":Ni(r.crv,'"crv" (Curve) Parameter'),Ni(r.x,'"x" (X Coordinate) Parameter'),Ni(r.y,'"y" (Y Coordinate) Parameter'),i={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":Ni(r.crv,'"crv" (Subtype of Key Pair) Parameter'),Ni(r.x,'"x" (Public Key) Parameter'),i={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":Ni(r.e,'"e" (Exponent) Parameter'),Ni(r.n,'"n" (Modulus) Parameter'),i={e:r.e,kty:r.kty,n:r.n};break;case"oct":Ni(r.k,'"k" (Key Value) Parameter'),i={k:r.k,kty:r.kty};break;default:throw new Ce('"kty" (Key Type) Parameter missing or unsupported')}let n=Ot(JSON.stringify(i));return At(await Ap(e,n))}function D6(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new Ce('Unsupported "alg" value for a JSON Web Key Set')}}function L6(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(z6)}function z6(t){return wt(t)}var cv=class{#e;#t=new WeakMap;constructor(e){if(!L6(e))throw new Xu("JSON Web Key Set malformed");this.#e=structuredClone(e)}jwks(){return this.#e}async getKey(e,r){let{alg:i,kid:n}={...e,...r?.header},o=D6(i),s=this.#e.keys.filter(u=>{let l=o===u.kty;if(l&&typeof n=="string"&&(l=n===u.kid),l&&(typeof u.alg=="string"||o==="AKP")&&(l=i===u.alg),l&&typeof u.use=="string"&&(l=u.use==="sig"),l&&Array.isArray(u.key_ops)&&(l=u.key_ops.includes("verify")),l)switch(i){case"ES256":l=u.crv==="P-256";break;case"ES384":l=u.crv==="P-384";break;case"ES512":l=u.crv==="P-521";break;case"Ed25519":case"EdDSA":l=u.crv==="Ed25519";break}return l}),{0:a,length:c}=s;if(c===0)throw new Ka;if(c!==1){let u=new wp,l=this.#t;throw u[Symbol.asyncIterator]=async function*(){for(let f of s)try{yield await rO(l,f,i)}catch{}},u}return rO(this.#t,a,i)}};async function rO(t,e,r){let i=t.get(e)||t.set(e,{}).get(e);if(i[r]===void 0){let n=await Qi({...e,ext:!0},r);if(n instanceof Uint8Array||n.type!=="public")throw new Xu("JSON Web Key Set members must be public keys");i[r]=n}return i[r]}function uv(t){let e=new cv(t),r=async(i,n)=>e.getKey(i,n);return Object.defineProperties(r,{jwks:{value:()=>structuredClone(e.jwks()),enumerable:!1,configurable:!1,writable:!1}}),r}function j6(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var lv;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(lv="jose/v6.1.3");var nO=Symbol();async function M6(t,e,r,i=fetch){let n=await i(t,{method:"GET",signal:r,redirect:"manual",headers:e}).catch(o=>{throw o.name==="TimeoutError"?new bp:o});if(n.status!==200)throw new Ft("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await n.json()}catch{throw new Ft("Failed to parse the JSON Web Key Set HTTP response as JSON")}}var Lp=Symbol();function B6(t,e){return!(typeof t!="object"||t===null||!("uat"in t)||typeof t.uat!="number"||Date.now()-t.uat>=e||!("jwks"in t)||!wt(t.jwks)||!Array.isArray(t.jwks.keys)||!Array.prototype.every.call(t.jwks.keys,wt))}var dv=class{#e;#t;#r;#n;#i;#o;#a;#s;#c;#u;constructor(e,r){if(!(e instanceof URL))throw new TypeError("url must be an instance of URL");this.#e=new URL(e.href),this.#t=typeof r?.timeoutDuration=="number"?r?.timeoutDuration:5e3,this.#r=typeof r?.cooldownDuration=="number"?r?.cooldownDuration:3e4,this.#n=typeof r?.cacheMaxAge=="number"?r?.cacheMaxAge:6e5,this.#a=new Headers(r?.headers),lv&&!this.#a.has("User-Agent")&&this.#a.set("User-Agent",lv),this.#a.has("accept")||(this.#a.set("accept","application/json"),this.#a.append("accept","application/jwk-set+json")),this.#s=r?.[nO],r?.[Lp]!==void 0&&(this.#u=r?.[Lp],B6(r?.[Lp],this.#n)&&(this.#i=this.#u.uat,this.#c=uv(this.#u.jwks)))}pendingFetch(){return!!this.#o}coolingDown(){return typeof this.#i=="number"?Date.now()<this.#i+this.#r:!1}fresh(){return typeof this.#i=="number"?Date.now()<this.#i+this.#n:!1}jwks(){return this.#c?.jwks()}async getKey(e,r){(!this.#c||!this.fresh())&&await this.reload();try{return await this.#c(e,r)}catch(i){if(i instanceof Ka&&this.coolingDown()===!1)return await this.reload(),this.#c(e,r);throw i}}async reload(){this.#o&&j6()&&(this.#o=void 0),this.#o||=M6(this.#e.href,this.#a,AbortSignal.timeout(this.#t),this.#s).then(e=>{this.#c=uv(e),this.#u&&(this.#u.uat=Date.now(),this.#u.jwks=e),this.#i=Date.now(),this.#o=void 0}).catch(e=>{throw this.#o=void 0,e}),await this.#o}};function fv(t,e){let r=new dv(t,e),i=async(n,o)=>r.getKey(n,o);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>r.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>r.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}function ul(t){let e;if(typeof t=="string"){let r=t.split(".");(r.length===3||r.length===5)&&([e]=r)}else if(typeof t=="object"&&t)if("protected"in t)e=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;let r=JSON.parse(cr.decode(gt(e)));if(!wt(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function Vn(t){if(typeof t!="string")throw new yr("JWTs must use Compact JWS serialization, JWT must be a string");let{1:e,length:r}=t.split(".");if(r===5)throw new yr("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new yr("Invalid JWT");if(!e)throw new yr("JWTs must contain a payload");let i;try{i=gt(e)}catch{throw new yr("Failed to base64url decode the payload")}let n;try{n=JSON.parse(cr.decode(i))}catch{throw new yr("Failed to parse the decoded payload as JSON")}if(!wt(n))throw new yr("Invalid JWT Claims Set");return n}async function ll(t,e,r=3600){return await new al(t).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+r).sign(new TextEncoder().encode(e))}async function zp(t,e){try{return(await Si(t,new TextEncoder().encode(e))).payload}catch{return null}}var iO=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),q6=()=>Date.now()/1e3|0,oO="dir",sO="A256CBC-HS512";async function dl(t,e,r,i=3600){let n=Gb(Fa,new TextEncoder().encode(e),new TextEncoder().encode(r),iO,64),o=await Dp({kty:"oct",k:Yu.encode(n)},"sha256");return await new cl(t).setProtectedHeader({alg:oO,enc:sO,kid:o}).setIssuedAt().setExpirationTime(q6()+i).setJti(crypto.randomUUID()).encrypt(n)}async function Ya(t,e,r){if(!t)return null;try{let{payload:i}=await av(t,async({kid:n})=>{let o=Gb(Fa,new TextEncoder().encode(e),new TextEncoder().encode(r),iO,64);if(n===void 0||n===await Dp({kty:"oct",k:Yu.encode(o)},"sha256"))return o;throw new Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[oO],contentEncryptionAlgorithms:[sO,"A256GCM"]});return i}catch{return null}}Yi();ec();Wp();var Q6="0123456789abcdef",tc={encode:t=>{if(typeof t=="string"&&(t=new TextEncoder().encode(t)),t.byteLength===0)return"";let e=new Uint8Array(t),r="";for(let i of e)r+=i.toString(16).padStart(2,"0");return r},decode:t=>{if(!t)return"";if(typeof t=="string"){if(t.length%2!==0)throw new Error("Invalid hexadecimal string");if(!new RegExp(`^[${Q6}]+$`).test(t))throw new Error("Invalid hexadecimal string");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=parseInt(t.slice(r,r+2),16);return new TextDecoder().decode(e)}return new TextDecoder().decode(t)}};function Z6(t,e,r,i){xs(t);let n=dp({dkLen:32,asyncTick:10},i),{c:o,dkLen:s,asyncTick:a}=n;if($r(o,"c"),$r(s,"dkLen"),$r(a,"asyncTick"),o<1)throw new Error("iterations (c) must be >= 1");let c=Qb(e,"password"),u=Qb(r,"salt"),l=new Uint8Array(s),f=Wa.create(t,c),d=f._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:l,PRF:f,PRFSalt:d}}function G6(t,e,r,i,n){return t.destroy(),e.destroy(),i&&i.destroy(),an(n),r}function mv(t,e,r,i){let{c:n,dkLen:o,DK:s,PRF:a,PRFSalt:c}=Z6(t,e,r,i),u,l=new Uint8Array(4),f=qa(l),d=new Uint8Array(a.outputLen);for(let m=1,h=0;h<o;m++,h+=a.outputLen){let p=s.subarray(h,h+a.outputLen);f.setInt32(0,m,!1),(u=c._cloneInto(u)).update(l).digestInto(d),p.set(d.subarray(0,p.length));for(let y=1;y<n;y++){a._cloneInto(u).update(d).digestInto(d);for(let b=0;b<p.length;b++)p[b]^=d[b]}}return G6(a,c,s,u,d)}function cO(t,e,r,i,n,o){let s=t[e++]^r[i++],a=t[e++]^r[i++],c=t[e++]^r[i++],u=t[e++]^r[i++],l=t[e++]^r[i++],f=t[e++]^r[i++],d=t[e++]^r[i++],m=t[e++]^r[i++],h=t[e++]^r[i++],p=t[e++]^r[i++],y=t[e++]^r[i++],b=t[e++]^r[i++],N=t[e++]^r[i++],T=t[e++]^r[i++],I=t[e++]^r[i++],$=t[e++]^r[i++],v=s,S=a,_=c,E=u,C=l,R=f,M=d,D=m,P=h,z=p,W=y,Q=b,G=N,J=T,le=I,se=$;for(let be=0;be<8;be+=2)C^=We(v+G|0,7),P^=We(C+v|0,9),G^=We(P+C|0,13),v^=We(G+P|0,18),z^=We(R+S|0,7),J^=We(z+R|0,9),S^=We(J+z|0,13),R^=We(S+J|0,18),le^=We(W+M|0,7),_^=We(le+W|0,9),M^=We(_+le|0,13),W^=We(M+_|0,18),E^=We(se+Q|0,7),D^=We(E+se|0,9),Q^=We(D+E|0,13),se^=We(Q+D|0,18),S^=We(v+E|0,7),_^=We(S+v|0,9),E^=We(_+S|0,13),v^=We(E+_|0,18),M^=We(R+C|0,7),D^=We(M+R|0,9),C^=We(D+M|0,13),R^=We(C+D|0,18),Q^=We(W+z|0,7),P^=We(Q+W|0,9),z^=We(P+Q|0,13),W^=We(z+P|0,18),G^=We(se+le|0,7),J^=We(G+se|0,9),le^=We(J+G|0,13),se^=We(le+J|0,18);n[o++]=s+v|0,n[o++]=a+S|0,n[o++]=c+_|0,n[o++]=u+E|0,n[o++]=l+C|0,n[o++]=f+R|0,n[o++]=d+M|0,n[o++]=m+D|0,n[o++]=h+P|0,n[o++]=p+z|0,n[o++]=y+W|0,n[o++]=b+Q|0,n[o++]=N+G|0,n[o++]=T+J|0,n[o++]=I+le|0,n[o++]=$+se|0}function hv(t,e,r,i,n){let o=i+0,s=i+16*n;for(let a=0;a<16;a++)r[s+a]=t[e+(2*n-1)*16+a];for(let a=0;a<n;a++,o+=16,e+=16)cO(r,s,t,e,r,o),a>0&&(s+=16),cO(r,o,t,e+=16,r,s)}function Y6(t,e,r){let i=dp({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:n,r:o,p:s,dkLen:a,asyncTick:c,maxmem:u,onProgress:l}=i;if($r(n,"N"),$r(o,"r"),$r(s,"p"),$r(a,"dkLen"),$r(c,"asyncTick"),$r(u,"maxmem"),l!==void 0&&typeof l!="function")throw new Error("progressCb must be a function");let f=128*o,d=f/4,m=Math.pow(2,32);if(n<=1||(n&n-1)!==0||n>m)throw new Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(s<1||s>(m-1)*32/f)throw new Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(a<1||a>(m-1)*32)throw new Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(f*(n+s)>u)throw new Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+u);let p=mv(Fa,t,e,{c:1,dkLen:f*s}),y=up(p),b=up(new Uint8Array(f*n)),N=up(new Uint8Array(f)),T=()=>{};if(l){let I=2*n*s,$=Math.max(Math.floor(I/1e4),1),v=0;T=()=>{v++,l&&(!(v%$)||v===I)&&l(v/I)}}return{N:n,r:o,p:s,dkLen:a,blockSize32:d,V:b,B32:y,B:p,tmp:N,blockMixCb:T,asyncTick:c}}function X6(t,e,r,i,n){let o=mv(Fa,t,r,{c:1,dkLen:e});return an(r,i,n),o}async function uO(t,e,r){let{N:i,r:n,p:o,dkLen:s,blockSize32:a,V:c,B32:u,B:l,tmp:f,blockMixCb:d,asyncTick:m}=Y6(t,e,r);Jb(u);for(let h=0;h<o;h++){let p=a*h;for(let b=0;b<a;b++)c[b]=u[p+b];let y=0;await lp(i-1,m,()=>{hv(c,y,c,y+=a,n),d()}),hv(c,(i-1)*a,u,p,n),d(),await lp(i,m,()=>{let b=(u[p+a-16]&i-1)>>>0;for(let N=0;N<a;N++)f[N]=u[p+N]^c[b*a+N];hv(f,0,u,p,n),d()})}return Jb(u),X6(t,s,l,c,f)}var rc={N:16384,r:16,p:1,dkLen:64};async function lO(t,e){return await uO(t.normalize("NFKC"),e,{N:rc.N,p:rc.p,r:rc.r,dkLen:rc.dkLen,maxmem:128*rc.N*rc.r*2})}var gv=async t=>{let e=tc.encode(crypto.getRandomValues(new Uint8Array(16))),r=await lO(t,e);return`${e}:${tc.encode(r)}`},yv=async({hash:t,password:e})=>{let[r,i]=t.split(":");if(!r||!i)throw new de("Invalid password hash");return Hb(await lO(e,r),mC(i))};function Kn(){let t=typeof globalThis<"u"&&globalThis.crypto;if(t&&typeof t.subtle=="object"&&t.subtle!=null)return t.subtle;throw new Error("crypto.subtle must be defined")}function Fp(t){return t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function dO(t,e,r){let i="",n=0,o=0;for(let s of t)for(n=n<<8|s,o+=8;o>=6;)o-=6,i+=e[n>>o&63];if(o>0&&(i+=e[n<<6-o&63]),r){let s=(4-i.length%4)%4;i+="=".repeat(s)}return i}function fO(t,e){let r=new Map;for(let s=0;s<e.length;s++)r.set(e[s],s);let i=[],n=0,o=0;for(let s of t){if(s==="=")break;let a=r.get(s);if(a===void 0)throw new Error(`Invalid Base64 character: ${s}`);n=n<<6|a,o+=6,o>=8&&(o-=8,i.push(n>>o&255))}return Uint8Array.from(i)}var Cr={encode(t,e={}){let r=Fp(!1),i=typeof t=="string"?new TextEncoder().encode(t):new Uint8Array(t);return dO(i,r,e.padding??!0)},decode(t){typeof t!="string"&&(t=new TextDecoder().decode(t));let e=t.includes("-")||t.includes("_"),r=Fp(e);return fO(t,r)}},Ei={encode(t,e={}){let r=Fp(!0),i=typeof t=="string"?new TextEncoder().encode(t):new Uint8Array(t);return dO(i,r,e.padding??!0)},decode(t){let e=t.includes("-")||t.includes("_"),r=Fp(e);return fO(t,r)}};function hl(t,e){return{digest:async r=>{let i=new TextEncoder,n=typeof r=="string"?i.encode(r):r,o=await Kn().digest(t,n);return e==="hex"?Array.from(new Uint8Array(o)).map(c=>c.toString(16).padStart(2,"0")).join(""):e==="base64"||e==="base64url"||e==="base64urlnopad"?e.includes("url")?Ei.encode(o,{padding:e!=="base64urlnopad"}):Cr.encode(o):o}}}function e4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Vp(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function gl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Pt(t,e,r=""){let i=e4(t),n=t?.length,o=e!==void 0;if(!i||o&&n!==e){let s=r&&`"${r}" `,a=o?` of length ${e}`:"",c=i?`length=${n}`:`type=${typeof t}`;throw new Error(s+"expected Uint8Array"+a+", got "+c)}return t}function wv(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mO(t,e){Pt(t,void 0,"output");let r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function eo(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function to(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function t4(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}var r4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,hO=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",n4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bv(t){if(Pt(t),hO)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=n4[t[r]];return e}var Xi={_0:48,_9:57,A:65,F:70,a:97,f:102};function pO(t){if(t>=Xi._0&&t<=Xi._9)return t-Xi._0;if(t>=Xi.A&&t<=Xi.F)return t-(Xi.A-10);if(t>=Xi.a&&t<=Xi.f)return t-(Xi.a-10)}function gO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hO)return Uint8Array.fromHex(t);let e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(r);for(let n=0,o=0;n<r;n++,o+=2){let s=pO(t.charCodeAt(o)),a=pO(t.charCodeAt(o+1));if(s===void 0||a===void 0){let c=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}i[n]=s*16+a}return i}function yO(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function wO(...t){let e=0;for(let i=0;i<t.length;i++){let n=t[i];Pt(n),e+=n.length}let r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return r}function bO(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function vO(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}var vv=(t,e)=>{function r(i,...n){if(Pt(i,void 0,"key"),!r4)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){let l=n[0];Pt(l,t.varSizeNonce?void 0:t.nonceLength,"nonce")}let o=t.tagLength;o&&n[1]!==void 0&&Pt(n[1],void 0,"AAD");let s=e(i,...n),a=(l,f)=>{if(f!==void 0){if(l!==2)throw new Error("cipher output not supported");Pt(f,void 0,"output")}},c=!1;return{encrypt(l,f){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Pt(l),a(s.encrypt.length,f),s.encrypt(l,f)},decrypt(l,f){if(Pt(l),o&&l.length<o)throw new Error('"ciphertext" expected length bigger than tagLength='+o);return a(s.decrypt.length,f),s.decrypt(l,f)}}}return Object.assign(r,t),r};function xv(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error('"output" expected Uint8Array of length '+t+", got: "+e.length);if(r&&!i4(e))throw new Error("invalid output, must be aligned");return e}function xO(t,e,r){Vp(r);let i=new Uint8Array(16),n=t4(i);return n.setBigUint64(0,BigInt(e),r),n.setBigUint64(8,BigInt(t),r),i}function i4(t){return t.byteOffset%4===0}function nc(t){return Uint8Array.from(t)}function SO(t=32){let e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}function Sv(t,e=SO){let{nonceLength:r}=t;gl(r);let i=(n,o)=>{let s=wO(n,o);return o.fill(0),s};return((n,...o)=>({encrypt(s){Pt(s);let a=e(r),c=t(n,a,...o).encrypt(s);return c instanceof Promise?c.then(u=>i(a,u)):i(a,c)},decrypt(s){Pt(s);let a=s.subarray(0,r),c=s.subarray(r);return t(n,a,...o).decrypt(c)}}))}var AO=t=>Uint8Array.from(t.split(""),e=>e.charCodeAt(0)),o4=AO("expand 16-byte k"),s4=AO("expand 32-byte k"),a4=eo(o4),c4=eo(s4);function fe(t,e){return t<<e|t>>>32-e}function Nv(t){return t.byteOffset%4===0}var Kp=64,u4=16,EO=2**32-1,NO=Uint32Array.of();function l4(t,e,r,i,n,o,s,a){let c=n.length,u=new Uint8Array(Kp),l=eo(u),f=Nv(n)&&Nv(o),d=f?eo(n):NO,m=f?eo(o):NO;for(let h=0;h<c;s++){if(t(e,r,i,l,s,a),s>=EO)throw new Error("arx: counter overflow");let p=Math.min(Kp,c-h);if(f&&p===Kp){let y=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let b=0,N;b<u4;b++)N=y+b,m[N]=d[N]^l[b];h+=Kp;continue}for(let y=0,b;y<p;y++)b=h+y,o[b]=n[b]^u[y];h+=p}}function Av(t,e){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:o,rounds:s}=bO({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return gl(n),gl(s),Vp(o),Vp(r),(a,c,u,l,f=0)=>{Pt(a,void 0,"key"),Pt(c,void 0,"nonce"),Pt(u,void 0,"data");let d=u.length;if(l===void 0&&(l=new Uint8Array(d)),Pt(l,void 0,"output"),gl(f),f<0||f>=EO)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);let m=[],h=a.length,p,y;if(h===32)m.push(p=nc(a)),y=c4;else if(h===16&&r)p=new Uint8Array(32),p.set(a),p.set(a,16),y=a4,m.push(p);else throw Pt(a,32,"arx key"),new Error("invalid key size");Nv(c)||m.push(c=nc(c));let b=eo(p);if(i){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(y,b,eo(c.subarray(0,16)),b),c=c.subarray(16)}let N=16-n;if(N!==c.length)throw new Error(`arx: nonce must be ${N} or 16 bytes`);if(N!==12){let I=new Uint8Array(12);I.set(c,o?0:12-c.length),c=I,m.push(c)}let T=eo(c);return l4(t,y,b,T,u,l,f,s),to(...m),l}}function lr(t,e){return t[e++]&255|(t[e++]&255)<<8}var Ev=class{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(e){e=nc(Pt(e,32,"key"));let r=lr(e,0),i=lr(e,2),n=lr(e,4),o=lr(e,6),s=lr(e,8),a=lr(e,10),c=lr(e,12),u=lr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=lr(e,16+2*l)}process(e,r,i=!1){let n=i?0:2048,{h:o,r:s}=this,a=s[0],c=s[1],u=s[2],l=s[3],f=s[4],d=s[5],m=s[6],h=s[7],p=s[8],y=s[9],b=lr(e,r+0),N=lr(e,r+2),T=lr(e,r+4),I=lr(e,r+6),$=lr(e,r+8),v=lr(e,r+10),S=lr(e,r+12),_=lr(e,r+14),E=o[0]+(b&8191),C=o[1]+((b>>>13|N<<3)&8191),R=o[2]+((N>>>10|T<<6)&8191),M=o[3]+((T>>>7|I<<9)&8191),D=o[4]+((I>>>4|$<<12)&8191),P=o[5]+($>>>1&8191),z=o[6]+(($>>>14|v<<2)&8191),W=o[7]+((v>>>11|S<<5)&8191),Q=o[8]+((S>>>8|_<<8)&8191),G=o[9]+(_>>>5|n),J=0,le=J+E*a+C*(5*y)+R*(5*p)+M*(5*h)+D*(5*m);J=le>>>13,le&=8191,le+=P*(5*d)+z*(5*f)+W*(5*l)+Q*(5*u)+G*(5*c),J+=le>>>13,le&=8191;let se=J+E*c+C*a+R*(5*y)+M*(5*p)+D*(5*h);J=se>>>13,se&=8191,se+=P*(5*m)+z*(5*d)+W*(5*f)+Q*(5*l)+G*(5*u),J+=se>>>13,se&=8191;let be=J+E*u+C*c+R*a+M*(5*y)+D*(5*p);J=be>>>13,be&=8191,be+=P*(5*h)+z*(5*m)+W*(5*d)+Q*(5*f)+G*(5*l),J+=be>>>13,be&=8191;let Re=J+E*l+C*u+R*c+M*a+D*(5*y);J=Re>>>13,Re&=8191,Re+=P*(5*p)+z*(5*h)+W*(5*m)+Q*(5*d)+G*(5*f),J+=Re>>>13,Re&=8191;let Lt=J+E*f+C*l+R*u+M*c+D*a;J=Lt>>>13,Lt&=8191,Lt+=P*(5*y)+z*(5*p)+W*(5*h)+Q*(5*m)+G*(5*d),J+=Lt>>>13,Lt&=8191;let Bn=J+E*d+C*f+R*l+M*u+D*c;J=Bn>>>13,Bn&=8191,Bn+=P*a+z*(5*y)+W*(5*p)+Q*(5*h)+G*(5*m),J+=Bn>>>13,Bn&=8191;let xn=J+E*m+C*d+R*f+M*l+D*u;J=xn>>>13,xn&=8191,xn+=P*c+z*a+W*(5*y)+Q*(5*p)+G*(5*h),J+=xn>>>13,xn&=8191;let wi=J+E*h+C*m+R*d+M*f+D*l;J=wi>>>13,wi&=8191,wi+=P*u+z*c+W*a+Q*(5*y)+G*(5*p),J+=wi>>>13,wi&=8191;let on=J+E*p+C*h+R*m+M*d+D*f;J=on>>>13,on&=8191,on+=P*l+z*u+W*c+Q*a+G*(5*y),J+=on>>>13,on&=8191;let qn=J+E*y+C*p+R*h+M*m+D*d;J=qn>>>13,qn&=8191,qn+=P*f+z*l+W*u+Q*c+G*a,J+=qn>>>13,qn&=8191,J=(J<<2)+J|0,J=J+le|0,le=J&8191,J=J>>>13,se+=J,o[0]=le,o[1]=se,o[2]=be,o[3]=Re,o[4]=Lt,o[5]=Bn,o[6]=xn,o[7]=wi,o[8]=on,o[9]=qn}finalize(){let{h:e,pad:r}=this,i=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=n,n=e[a]>>>13,e[a]&=8191;e[0]+=n*5,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,i[0]=e[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=e[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let o=(n^1)-1;for(let a=0;a<10;a++)i[a]&=o;o=~o;for(let a=0;a<10;a++)e[a]=e[a]&o|i[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+r[0];e[0]=s&65535;for(let a=1;a<8;a++)s=(e[a]+r[a]|0)+(s>>>16)|0,e[a]=s&65535;to(i)}update(e){wv(this),Pt(e),e=nc(e);let{buffer:r,blockLen:i}=this,n=e.length;for(let o=0;o<n;){let s=Math.min(i-this.pos,n-o);if(s===i){for(;i<=n-o;o+=i)this.process(e,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){to(this.h,this.r,this.buffer,this.pad)}digestInto(e){wv(this),mO(e,this),this.finished=!0;let{buffer:r,h:i}=this,{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)e[o++]=i[s]>>>0,e[o++]=i[s]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let i=e.slice(0,r);return this.destroy(),i}};function d4(t){let e=(i,n)=>t(n).update(i).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}var _O=d4(t=>new Ev(t));function IO(t,e,r,i,n,o=20){let s=t[0],a=t[1],c=t[2],u=t[3],l=e[0],f=e[1],d=e[2],m=e[3],h=e[4],p=e[5],y=e[6],b=e[7],N=n,T=r[0],I=r[1],$=r[2],v=s,S=a,_=c,E=u,C=l,R=f,M=d,D=m,P=h,z=p,W=y,Q=b,G=N,J=T,le=I,se=$;for(let Re=0;Re<o;Re+=2)v=v+C|0,G=fe(G^v,16),P=P+G|0,C=fe(C^P,12),v=v+C|0,G=fe(G^v,8),P=P+G|0,C=fe(C^P,7),S=S+R|0,J=fe(J^S,16),z=z+J|0,R=fe(R^z,12),S=S+R|0,J=fe(J^S,8),z=z+J|0,R=fe(R^z,7),_=_+M|0,le=fe(le^_,16),W=W+le|0,M=fe(M^W,12),_=_+M|0,le=fe(le^_,8),W=W+le|0,M=fe(M^W,7),E=E+D|0,se=fe(se^E,16),Q=Q+se|0,D=fe(D^Q,12),E=E+D|0,se=fe(se^E,8),Q=Q+se|0,D=fe(D^Q,7),v=v+R|0,se=fe(se^v,16),W=W+se|0,R=fe(R^W,12),v=v+R|0,se=fe(se^v,8),W=W+se|0,R=fe(R^W,7),S=S+M|0,G=fe(G^S,16),Q=Q+G|0,M=fe(M^Q,12),S=S+M|0,G=fe(G^S,8),Q=Q+G|0,M=fe(M^Q,7),_=_+D|0,J=fe(J^_,16),P=P+J|0,D=fe(D^P,12),_=_+D|0,J=fe(J^_,8),P=P+J|0,D=fe(D^P,7),E=E+C|0,le=fe(le^E,16),z=z+le|0,C=fe(C^z,12),E=E+C|0,le=fe(le^E,8),z=z+le|0,C=fe(C^z,7);let be=0;i[be++]=s+v|0,i[be++]=a+S|0,i[be++]=c+_|0,i[be++]=u+E|0,i[be++]=l+C|0,i[be++]=f+R|0,i[be++]=d+M|0,i[be++]=m+D|0,i[be++]=h+P|0,i[be++]=p+z|0,i[be++]=y+W|0,i[be++]=b+Q|0,i[be++]=N+G|0,i[be++]=T+J|0,i[be++]=I+le|0,i[be++]=$+se|0}function f4(t,e,r,i){let n=t[0],o=t[1],s=t[2],a=t[3],c=e[0],u=e[1],l=e[2],f=e[3],d=e[4],m=e[5],h=e[6],p=e[7],y=r[0],b=r[1],N=r[2],T=r[3];for(let $=0;$<20;$+=2)n=n+c|0,y=fe(y^n,16),d=d+y|0,c=fe(c^d,12),n=n+c|0,y=fe(y^n,8),d=d+y|0,c=fe(c^d,7),o=o+u|0,b=fe(b^o,16),m=m+b|0,u=fe(u^m,12),o=o+u|0,b=fe(b^o,8),m=m+b|0,u=fe(u^m,7),s=s+l|0,N=fe(N^s,16),h=h+N|0,l=fe(l^h,12),s=s+l|0,N=fe(N^s,8),h=h+N|0,l=fe(l^h,7),a=a+f|0,T=fe(T^a,16),p=p+T|0,f=fe(f^p,12),a=a+f|0,T=fe(T^a,8),p=p+T|0,f=fe(f^p,7),n=n+u|0,T=fe(T^n,16),h=h+T|0,u=fe(u^h,12),n=n+u|0,T=fe(T^n,8),h=h+T|0,u=fe(u^h,7),o=o+l|0,y=fe(y^o,16),p=p+y|0,l=fe(l^p,12),o=o+l|0,y=fe(y^o,8),p=p+y|0,l=fe(l^p,7),s=s+f|0,b=fe(b^s,16),d=d+b|0,f=fe(f^d,12),s=s+f|0,b=fe(b^s,8),d=d+b|0,f=fe(f^d,7),a=a+c|0,N=fe(N^a,16),m=m+N|0,c=fe(c^m,12),a=a+c|0,N=fe(N^a,8),m=m+N|0,c=fe(c^m,7);let I=0;i[I++]=n,i[I++]=o,i[I++]=s,i[I++]=a,i[I++]=y,i[I++]=b,i[I++]=N,i[I++]=T}var p4=Av(IO,{counterRight:!1,counterLength:4,allowShortKeys:!1}),m4=Av(IO,{counterRight:!1,counterLength:8,extendNonceFn:f4,allowShortKeys:!1});var h4=new Uint8Array(16),kO=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(h4.subarray(r))},g4=new Uint8Array(32);function TO(t,e,r,i,n){n!==void 0&&Pt(n,void 0,"AAD");let o=t(e,r,g4),s=xO(i.length,n?n.length:0,!0),a=_O.create(o);n&&kO(a,n),kO(a,i),a.update(s);let c=a.digest();return to(o,s),c}var $O=t=>(e,r,i)=>({encrypt(o,s){let a=o.length;s=xv(a+16,s,!1),s.set(o);let c=s.subarray(0,-16);t(e,r,c,c,1);let u=TO(t,e,r,c,i);return s.set(u,a),to(u),s},decrypt(o,s){s=xv(o.length-16,s,!1);let a=o.subarray(0,-16),c=o.subarray(-16),u=TO(t,e,r,a,i);if(!vO(c,u))throw new Error("invalid tag");return s.set(o.subarray(0,-16)),t(e,r,s,s,1),to(u),s}}),R9=vv({blockSize:64,nonceLength:12,tagLength:16},$O(p4)),_v=vv({blockSize:64,nonceLength:24,tagLength:16},$O(m4));var Hp=async({key:t,data:e})=>{let r=await hl("SHA-256").digest(t),i=yO(e);return bv(Sv(_v)(new Uint8Array(r)).encrypt(i))},Jp=async({key:t,data:e})=>{let r=await hl("SHA-256").digest(t),i=gO(e),n=Sv(_v)(new Uint8Array(r));return new TextDecoder().decode(n.decrypt(i))};var Sr={};ar(Sr,{$brand:()=>wl,$input:()=>_m,$output:()=>Em,NEVER:()=>Qp,TimePrecision:()=>Hm,ZodAny:()=>hh,ZodArray:()=>bh,ZodBase64:()=>ld,ZodBase64URL:()=>dd,ZodBigInt:()=>Ys,ZodBigIntFormat:()=>md,ZodBoolean:()=>Gs,ZodCIDRv4:()=>cd,ZodCIDRv6:()=>ud,ZodCUID:()=>Xl,ZodCUID2:()=>ed,ZodCatch:()=>zh,ZodCodec:()=>xd,ZodCustom:()=>Ac,ZodCustomStringFormat:()=>Qs,ZodDate:()=>xc,ZodDefault:()=>Oh,ZodDiscriminatedUnion:()=>xh,ZodE164:()=>fd,ZodEmail:()=>Zl,ZodEmoji:()=>Gl,ZodEnum:()=>Hs,ZodError:()=>tP,ZodFile:()=>Ih,ZodFirstPartyTypeKind:()=>Zh,ZodFunction:()=>Hh,ZodGUID:()=>yc,ZodIPv4:()=>id,ZodIPv6:()=>sd,ZodISODate:()=>Fl,ZodISODateTime:()=>Wl,ZodISODuration:()=>Kl,ZodISOTime:()=>Vl,ZodIntersection:()=>Sh,ZodIssueCode:()=>rP,ZodJWT:()=>pd,ZodKSUID:()=>nd,ZodLazy:()=>Fh,ZodLiteral:()=>Th,ZodMAC:()=>lh,ZodMap:()=>_h,ZodNaN:()=>Mh,ZodNanoID:()=>Yl,ZodNever:()=>yh,ZodNonOptional:()=>bd,ZodNull:()=>ph,ZodNullable:()=>Ch,ZodNumber:()=>Zs,ZodNumberFormat:()=>Vo,ZodObject:()=>Gn,ZodOptional:()=>io,ZodPipe:()=>vd,ZodPrefault:()=>Rh,ZodPromise:()=>Kh,ZodReadonly:()=>Bh,ZodRealError:()=>Pr,ZodRecord:()=>Nc,ZodSet:()=>kh,ZodString:()=>Js,ZodStringFormat:()=>tt,ZodSuccess:()=>Lh,ZodSymbol:()=>dh,ZodTemplateLiteral:()=>Wh,ZodTransform:()=>$h,ZodTuple:()=>Ah,ZodType:()=>Ie,ZodULID:()=>td,ZodURL:()=>vc,ZodUUID:()=>Zn,ZodUndefined:()=>fh,ZodUnion:()=>Sc,ZodUnknown:()=>gh,ZodVoid:()=>wh,ZodXID:()=>rd,ZodXor:()=>vh,_ZodString:()=>Ql,_default:()=>Ph,_function:()=>mA,any:()=>Fr,array:()=>fn,base64:()=>PN,base64url:()=>RN,bigint:()=>VN,boolean:()=>Vt,catch:()=>jh,check:()=>hA,cidrv4:()=>CN,cidrv6:()=>ON,clone:()=>wr,codec:()=>dA,coerce:()=>Tn,config:()=>$t,core:()=>ki,cuid:()=>EN,cuid2:()=>_N,custom:()=>gA,date:()=>Ti,decode:()=>nh,decodeAsync:()=>oh,default:()=>nB,describe:()=>yA,discriminatedUnion:()=>eA,e164:()=>UN,email:()=>Rr,emoji:()=>NN,encode:()=>rh,encodeAsync:()=>ih,endsWith:()=>js,enum:()=>Xs,file:()=>aA,flattenError:()=>ac,float32:()=>BN,float64:()=>qN,formatError:()=>cc,fromJSONSchema:()=>SA,function:()=>mA,getErrorMap:()=>iP,globalRegistry:()=>br,gt:()=>Qn,gte:()=>vr,guid:()=>gN,hash:()=>MN,hex:()=>jN,hostname:()=>zN,httpUrl:()=>SN,includes:()=>Ls,instanceof:()=>bA,int:()=>Jl,int32:()=>WN,int64:()=>KN,intersection:()=>Nh,ipv4:()=>od,ipv6:()=>ad,iso:()=>Ks,json:()=>Ec,jwt:()=>DN,keyof:()=>GN,ksuid:()=>IN,lazy:()=>Vh,length:()=>Mo,literal:()=>sA,locales:()=>mc,looseObject:()=>gd,looseRecord:()=>rA,lowercase:()=>Us,lt:()=>Jn,lte:()=>Wr,mac:()=>$N,map:()=>nA,maxLength:()=>jo,maxSize:()=>zo,meta:()=>wA,mime:()=>Ms,minLength:()=>_i,minSize:()=>no,multipleOf:()=>ro,nan:()=>lA,nanoid:()=>AN,nativeEnum:()=>oA,negative:()=>zl,never:()=>hd,nonnegative:()=>Ml,nonoptional:()=>Dh,nonpositive:()=>jl,normalize:()=>Bs,null:()=>mh,nullable:()=>wc,nullish:()=>cA,number:()=>dn,object:()=>ke,optional:()=>_n,overwrite:()=>En,parse:()=>Ym,parseAsync:()=>Xm,partialRecord:()=>tA,pipe:()=>bc,positive:()=>Ll,prefault:()=>Uh,preprocess:()=>xA,prettifyError:()=>Xp,promise:()=>pA,property:()=>Bl,readonly:()=>qh,record:()=>kn,refine:()=>Jh,regex:()=>Rs,regexes:()=>ln,registry:()=>Rl,safeDecode:()=>ah,safeDecodeAsync:()=>uh,safeEncode:()=>sh,safeEncodeAsync:()=>ch,safeParse:()=>eh,safeParseAsync:()=>th,set:()=>iA,setErrorMap:()=>nP,size:()=>Ps,slugify:()=>Vs,startsWith:()=>zs,strictObject:()=>YN,string:()=>Y,stringFormat:()=>LN,stringbool:()=>vA,success:()=>uA,superRefine:()=>Qh,symbol:()=>JN,templateLiteral:()=>fA,toJSONSchema:()=>ql,toLowerCase:()=>Ws,toUpperCase:()=>Fs,transform:()=>wd,treeifyError:()=>Yp,trim:()=>qs,tuple:()=>Eh,uint32:()=>FN,uint64:()=>HN,ulid:()=>kN,undefined:()=>QN,union:()=>yd,unknown:()=>Fo,uppercase:()=>Ds,url:()=>xN,util:()=>ee,uuid:()=>yN,uuidv4:()=>wN,uuidv6:()=>bN,uuidv7:()=>vN,void:()=>ZN,xid:()=>TN,xor:()=>XN,z:()=>pe});var pe={};ar(pe,{$brand:()=>wl,$input:()=>_m,$output:()=>Em,NEVER:()=>Qp,TimePrecision:()=>Hm,ZodAny:()=>hh,ZodArray:()=>bh,ZodBase64:()=>ld,ZodBase64URL:()=>dd,ZodBigInt:()=>Ys,ZodBigIntFormat:()=>md,ZodBoolean:()=>Gs,ZodCIDRv4:()=>cd,ZodCIDRv6:()=>ud,ZodCUID:()=>Xl,ZodCUID2:()=>ed,ZodCatch:()=>zh,ZodCodec:()=>xd,ZodCustom:()=>Ac,ZodCustomStringFormat:()=>Qs,ZodDate:()=>xc,ZodDefault:()=>Oh,ZodDiscriminatedUnion:()=>xh,ZodE164:()=>fd,ZodEmail:()=>Zl,ZodEmoji:()=>Gl,ZodEnum:()=>Hs,ZodError:()=>tP,ZodFile:()=>Ih,ZodFirstPartyTypeKind:()=>Zh,ZodFunction:()=>Hh,ZodGUID:()=>yc,ZodIPv4:()=>id,ZodIPv6:()=>sd,ZodISODate:()=>Fl,ZodISODateTime:()=>Wl,ZodISODuration:()=>Kl,ZodISOTime:()=>Vl,ZodIntersection:()=>Sh,ZodIssueCode:()=>rP,ZodJWT:()=>pd,ZodKSUID:()=>nd,ZodLazy:()=>Fh,ZodLiteral:()=>Th,ZodMAC:()=>lh,ZodMap:()=>_h,ZodNaN:()=>Mh,ZodNanoID:()=>Yl,ZodNever:()=>yh,ZodNonOptional:()=>bd,ZodNull:()=>ph,ZodNullable:()=>Ch,ZodNumber:()=>Zs,ZodNumberFormat:()=>Vo,ZodObject:()=>Gn,ZodOptional:()=>io,ZodPipe:()=>vd,ZodPrefault:()=>Rh,ZodPromise:()=>Kh,ZodReadonly:()=>Bh,ZodRealError:()=>Pr,ZodRecord:()=>Nc,ZodSet:()=>kh,ZodString:()=>Js,ZodStringFormat:()=>tt,ZodSuccess:()=>Lh,ZodSymbol:()=>dh,ZodTemplateLiteral:()=>Wh,ZodTransform:()=>$h,ZodTuple:()=>Ah,ZodType:()=>Ie,ZodULID:()=>td,ZodURL:()=>vc,ZodUUID:()=>Zn,ZodUndefined:()=>fh,ZodUnion:()=>Sc,ZodUnknown:()=>gh,ZodVoid:()=>wh,ZodXID:()=>rd,ZodXor:()=>vh,_ZodString:()=>Ql,_default:()=>Ph,_function:()=>mA,any:()=>Fr,array:()=>fn,base64:()=>PN,base64url:()=>RN,bigint:()=>VN,boolean:()=>Vt,catch:()=>jh,check:()=>hA,cidrv4:()=>CN,cidrv6:()=>ON,clone:()=>wr,codec:()=>dA,coerce:()=>Tn,config:()=>$t,core:()=>ki,cuid:()=>EN,cuid2:()=>_N,custom:()=>gA,date:()=>Ti,decode:()=>nh,decodeAsync:()=>oh,describe:()=>yA,discriminatedUnion:()=>eA,e164:()=>UN,email:()=>Rr,emoji:()=>NN,encode:()=>rh,encodeAsync:()=>ih,endsWith:()=>js,enum:()=>Xs,file:()=>aA,flattenError:()=>ac,float32:()=>BN,float64:()=>qN,formatError:()=>cc,fromJSONSchema:()=>SA,function:()=>mA,getErrorMap:()=>iP,globalRegistry:()=>br,gt:()=>Qn,gte:()=>vr,guid:()=>gN,hash:()=>MN,hex:()=>jN,hostname:()=>zN,httpUrl:()=>SN,includes:()=>Ls,instanceof:()=>bA,int:()=>Jl,int32:()=>WN,int64:()=>KN,intersection:()=>Nh,ipv4:()=>od,ipv6:()=>ad,iso:()=>Ks,json:()=>Ec,jwt:()=>DN,keyof:()=>GN,ksuid:()=>IN,lazy:()=>Vh,length:()=>Mo,literal:()=>sA,locales:()=>mc,looseObject:()=>gd,looseRecord:()=>rA,lowercase:()=>Us,lt:()=>Jn,lte:()=>Wr,mac:()=>$N,map:()=>nA,maxLength:()=>jo,maxSize:()=>zo,meta:()=>wA,mime:()=>Ms,minLength:()=>_i,minSize:()=>no,multipleOf:()=>ro,nan:()=>lA,nanoid:()=>AN,nativeEnum:()=>oA,negative:()=>zl,never:()=>hd,nonnegative:()=>Ml,nonoptional:()=>Dh,nonpositive:()=>jl,normalize:()=>Bs,null:()=>mh,nullable:()=>wc,nullish:()=>cA,number:()=>dn,object:()=>ke,optional:()=>_n,overwrite:()=>En,parse:()=>Ym,parseAsync:()=>Xm,partialRecord:()=>tA,pipe:()=>bc,positive:()=>Ll,prefault:()=>Uh,preprocess:()=>xA,prettifyError:()=>Xp,promise:()=>pA,property:()=>Bl,readonly:()=>qh,record:()=>kn,refine:()=>Jh,regex:()=>Rs,regexes:()=>ln,registry:()=>Rl,safeDecode:()=>ah,safeDecodeAsync:()=>uh,safeEncode:()=>sh,safeEncodeAsync:()=>ch,safeParse:()=>eh,safeParseAsync:()=>th,set:()=>iA,setErrorMap:()=>nP,size:()=>Ps,slugify:()=>Vs,startsWith:()=>zs,strictObject:()=>YN,string:()=>Y,stringFormat:()=>LN,stringbool:()=>vA,success:()=>uA,superRefine:()=>Qh,symbol:()=>JN,templateLiteral:()=>fA,toJSONSchema:()=>ql,toLowerCase:()=>Ws,toUpperCase:()=>Fs,transform:()=>wd,treeifyError:()=>Yp,trim:()=>qs,tuple:()=>Eh,uint32:()=>FN,uint64:()=>HN,ulid:()=>kN,undefined:()=>QN,union:()=>yd,unknown:()=>Fo,uppercase:()=>Ds,url:()=>xN,util:()=>ee,uuid:()=>yN,uuidv4:()=>wN,uuidv6:()=>bN,uuidv7:()=>vN,void:()=>ZN,xid:()=>TN,xor:()=>XN});var ki={};ar(ki,{$ZodAny:()=>dS,$ZodArray:()=>gS,$ZodAsyncError:()=>Hn,$ZodBase64:()=>tS,$ZodBase64URL:()=>rS,$ZodBigInt:()=>bm,$ZodBigIntFormat:()=>aS,$ZodBoolean:()=>Il,$ZodCIDRv4:()=>Yx,$ZodCIDRv6:()=>Xx,$ZodCUID:()=>Mx,$ZodCUID2:()=>Bx,$ZodCatch:()=>RS,$ZodCheck:()=>dt,$ZodCheckBigIntFormat:()=>gx,$ZodCheckEndsWith:()=>Tx,$ZodCheckGreaterThan:()=>fm,$ZodCheckIncludes:()=>_x,$ZodCheckLengthEquals:()=>Sx,$ZodCheckLessThan:()=>dm,$ZodCheckLowerCase:()=>Ax,$ZodCheckMaxLength:()=>vx,$ZodCheckMaxSize:()=>yx,$ZodCheckMimeType:()=>$x,$ZodCheckMinLength:()=>xx,$ZodCheckMinSize:()=>wx,$ZodCheckMultipleOf:()=>mx,$ZodCheckNumberFormat:()=>hx,$ZodCheckOverwrite:()=>Cx,$ZodCheckProperty:()=>Ix,$ZodCheckRegex:()=>Nx,$ZodCheckSizeEquals:()=>bx,$ZodCheckStartsWith:()=>kx,$ZodCheckStringFormat:()=>pc,$ZodCheckUpperCase:()=>Ex,$ZodCodec:()=>Cl,$ZodCustom:()=>qS,$ZodCustomStringFormat:()=>oS,$ZodDate:()=>hS,$ZodDefault:()=>$S,$ZodDiscriminatedUnion:()=>bS,$ZodE164:()=>nS,$ZodEmail:()=>Dx,$ZodEmoji:()=>zx,$ZodEncodeError:()=>Oo,$ZodEnum:()=>AS,$ZodError:()=>El,$ZodFile:()=>_S,$ZodFunction:()=>jS,$ZodGUID:()=>Rx,$ZodIPv4:()=>Qx,$ZodIPv6:()=>Zx,$ZodISODate:()=>Kx,$ZodISODateTime:()=>Vx,$ZodISODuration:()=>Jx,$ZodISOTime:()=>Hx,$ZodIntersection:()=>vS,$ZodJWT:()=>iS,$ZodKSUID:()=>Fx,$ZodLazy:()=>BS,$ZodLiteral:()=>ES,$ZodMAC:()=>Gx,$ZodMap:()=>SS,$ZodNaN:()=>US,$ZodNanoID:()=>jx,$ZodNever:()=>pS,$ZodNonOptional:()=>OS,$ZodNull:()=>lS,$ZodNullable:()=>IS,$ZodNumber:()=>wm,$ZodNumberFormat:()=>sS,$ZodObject:()=>n1,$ZodObjectJIT:()=>yS,$ZodOptional:()=>TS,$ZodPipe:()=>DS,$ZodPrefault:()=>CS,$ZodPromise:()=>MS,$ZodReadonly:()=>LS,$ZodRealError:()=>qr,$ZodRecord:()=>xS,$ZodRegistry:()=>Am,$ZodSet:()=>NS,$ZodString:()=>Os,$ZodStringFormat:()=>it,$ZodSuccess:()=>PS,$ZodSymbol:()=>cS,$ZodTemplateLiteral:()=>zS,$ZodTransform:()=>kS,$ZodTuple:()=>vm,$ZodType:()=>Ee,$ZodULID:()=>qx,$ZodURL:()=>Lx,$ZodUUID:()=>Ux,$ZodUndefined:()=>uS,$ZodUnion:()=>$l,$ZodUnknown:()=>fS,$ZodVoid:()=>mS,$ZodXID:()=>Wx,$ZodXor:()=>wS,$brand:()=>wl,$constructor:()=>B,$input:()=>_m,$output:()=>Em,Doc:()=>Tl,JSONSchema:()=>X1,JSONSchemaGenerator:()=>Zm,NEVER:()=>Qp,TimePrecision:()=>Hm,_any:()=>f0,_array:()=>b0,_base64:()=>Wm,_base64url:()=>Fm,_bigint:()=>o0,_boolean:()=>n0,_catch:()=>BM,_check:()=>Y1,_cidrv4:()=>Bm,_cidrv6:()=>qm,_coercedBigint:()=>s0,_coercedBoolean:()=>i0,_coercedDate:()=>y0,_coercedNumber:()=>GS,_coercedString:()=>FS,_cuid:()=>Rm,_cuid2:()=>Um,_custom:()=>x0,_date:()=>g0,_decode:()=>nm,_decodeAsync:()=>om,_default:()=>zM,_discriminatedUnion:()=>_M,_e164:()=>Vm,_email:()=>km,_emoji:()=>Om,_encode:()=>rm,_encodeAsync:()=>im,_endsWith:()=>js,_enum:()=>OM,_file:()=>v0,_float32:()=>XS,_float64:()=>e0,_gt:()=>Qn,_gte:()=>vr,_guid:()=>Ul,_includes:()=>Ls,_int:()=>YS,_int32:()=>t0,_int64:()=>a0,_intersection:()=>kM,_ipv4:()=>jm,_ipv6:()=>Mm,_isoDate:()=>HS,_isoDateTime:()=>KS,_isoDuration:()=>QS,_isoTime:()=>JS,_jwt:()=>Km,_ksuid:()=>zm,_lazy:()=>VM,_length:()=>Mo,_literal:()=>RM,_lowercase:()=>Us,_lt:()=>Jn,_lte:()=>Wr,_mac:()=>VS,_map:()=>$M,_max:()=>Wr,_maxLength:()=>jo,_maxSize:()=>zo,_mime:()=>Ms,_min:()=>vr,_minLength:()=>_i,_minSize:()=>no,_multipleOf:()=>ro,_nan:()=>w0,_nanoid:()=>Pm,_nativeEnum:()=>PM,_negative:()=>zl,_never:()=>m0,_nonnegative:()=>Ml,_nonoptional:()=>jM,_nonpositive:()=>jl,_normalize:()=>Bs,_null:()=>d0,_nullable:()=>LM,_number:()=>ZS,_optional:()=>DM,_overwrite:()=>En,_parse:()=>uc,_parseAsync:()=>lc,_pipe:()=>qM,_positive:()=>Ll,_promise:()=>KM,_property:()=>Bl,_readonly:()=>WM,_record:()=>IM,_refine:()=>S0,_regex:()=>Rs,_safeDecode:()=>am,_safeDecodeAsync:()=>um,_safeEncode:()=>sm,_safeEncodeAsync:()=>cm,_safeParse:()=>dc,_safeParseAsync:()=>fc,_set:()=>CM,_size:()=>Ps,_slugify:()=>Vs,_startsWith:()=>zs,_string:()=>WS,_stringFormat:()=>hc,_stringbool:()=>_0,_success:()=>MM,_superRefine:()=>N0,_symbol:()=>u0,_templateLiteral:()=>FM,_toLowerCase:()=>Ws,_toUpperCase:()=>Fs,_transform:()=>UM,_trim:()=>qs,_tuple:()=>TM,_uint32:()=>r0,_uint64:()=>c0,_ulid:()=>Dm,_undefined:()=>l0,_union:()=>AM,_unknown:()=>p0,_uppercase:()=>Ds,_url:()=>Dl,_uuid:()=>Tm,_uuidv4:()=>Im,_uuidv6:()=>$m,_uuidv7:()=>Cm,_void:()=>h0,_xid:()=>Lm,_xor:()=>EM,clone:()=>wr,config:()=>$t,createStandardJSONSchemaMethod:()=>gc,createToJSONSchemaMethod:()=>k0,decode:()=>F4,decodeAsync:()=>K4,describe:()=>A0,encode:()=>W4,encodeAsync:()=>V4,extractDefs:()=>qo,finalize:()=>Wo,flattenError:()=>ac,formatError:()=>cc,globalConfig:()=>yl,globalRegistry:()=>br,initializeContext:()=>Bo,isValidBase64:()=>eS,isValidBase64URL:()=>XO,isValidJWT:()=>e1,locales:()=>mc,meta:()=>E0,parse:()=>em,parseAsync:()=>tm,prettifyError:()=>Xp,process:()=>et,regexes:()=>ln,registry:()=>Rl,safeDecode:()=>J4,safeDecodeAsync:()=>Z4,safeEncode:()=>H4,safeEncodeAsync:()=>Q4,safeParse:()=>Lv,safeParseAsync:()=>zv,toDotPath:()=>UO,toJSONSchema:()=>ql,treeifyError:()=>Yp,util:()=>ee,version:()=>Ox});var Qp=Object.freeze({status:"aborted"});function B(t,e,r){function i(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:s,traits:new Set},enumerable:!1}),a._zod.traits.has(t))return;a._zod.traits.add(t),e(a,c);let u=s.prototype,l=Object.keys(u);for(let f=0;f<l.length;f++){let d=l[f];d in a||(a[d]=u[d].bind(a))}}let n=r?.Parent??Object;class o extends n{}Object.defineProperty(o,"name",{value:t});function s(a){var c;let u=r?.Parent?new o:this;i(u,a),(c=u._zod).deferred??(c.deferred=[]);for(let l of u._zod.deferred)l();return u}return Object.defineProperty(s,"init",{value:i}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(s,"name",{value:t}),s}var wl=Symbol("zod_brand"),Hn=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Oo=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},yl={};function $t(t){return t&&Object.assign(yl,t),yl}var ee={};ar(ee,{BIGINT_FORMAT_RANGES:()=>Dv,Class:()=>Tv,NUMBER_FORMAT_RANGES:()=>Uv,aborted:()=>Lo,allowsEval:()=>Cv,assert:()=>x4,assertEqual:()=>y4,assertIs:()=>b4,assertNever:()=>v4,assertNotEqual:()=>w4,assignProp:()=>Ro,base64ToUint8Array:()=>OO,base64urlToUint8Array:()=>z4,cached:()=>oc,captureStackTrace:()=>Gp,cleanEnum:()=>L4,cleanRegex:()=>xl,clone:()=>wr,cloneDef:()=>N4,createTransparentProxy:()=>I4,defineLazy:()=>De,esc:()=>Zp,escapeRegex:()=>An,extend:()=>O4,finalizeIssue:()=>Br,floatSafeRemainder:()=>Iv,getElementAtPath:()=>A4,getEnumValues:()=>vl,getLengthableOrigin:()=>Al,getParsedType:()=>T4,getSizableOrigin:()=>Nl,hexToUint8Array:()=>M4,isObject:()=>$s,isPlainObject:()=>Do,issue:()=>sc,joinValues:()=>K,jsonStringifyReplacer:()=>ic,merge:()=>R4,mergeDefs:()=>Uo,normalizeParams:()=>te,nullish:()=>Po,numKeys:()=>k4,objectClone:()=>S4,omit:()=>C4,optionalKeys:()=>Rv,partial:()=>U4,pick:()=>$4,prefixIssues:()=>un,primitiveTypes:()=>Pv,promiseAllObject:()=>E4,propertyKeyTypes:()=>Sl,randomString:()=>_4,required:()=>D4,safeExtend:()=>P4,shallowClone:()=>Ov,slugify:()=>$v,stringifyPrimitive:()=>X,uint8ArrayToBase64:()=>PO,uint8ArrayToBase64url:()=>j4,uint8ArrayToHex:()=>B4,unwrapMessage:()=>bl});function y4(t){return t}function w4(t){return t}function b4(t){}function v4(t){throw new Error("Unexpected value in exhaustive check")}function x4(t){}function vl(t){let e=Object.values(t).filter(i=>typeof i=="number");return Object.entries(t).filter(([i,n])=>e.indexOf(+i)===-1).map(([i,n])=>n)}function K(t,e="|"){return t.map(r=>X(r)).join(e)}function ic(t,e){return typeof e=="bigint"?e.toString():e}function oc(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function Po(t){return t==null}function xl(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function Iv(t,e){let r=(t.toString().split(".")[1]||"").length,i=e.toString(),n=(i.split(".")[1]||"").length;if(n===0&&/\d?e-\d?/.test(i)){let c=i.match(/\d?e-(\d?)/);c?.[1]&&(n=Number.parseInt(c[1]))}let o=r>n?r:n,s=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return s%a/10**o}var CO=Symbol("evaluating");function De(t,e,r){let i;Object.defineProperty(t,e,{get(){if(i!==CO)return i===void 0&&(i=CO,i=r()),i},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function S4(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function Ro(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Uo(...t){let e={};for(let r of t){let i=Object.getOwnPropertyDescriptors(r);Object.assign(e,i)}return Object.defineProperties({},e)}function N4(t){return Uo(t._zod.def)}function A4(t,e){return e?e.reduce((r,i)=>r?.[i],t):t}function E4(t){let e=Object.keys(t),r=e.map(i=>t[i]);return Promise.all(r).then(i=>{let n={};for(let o=0;o<e.length;o++)n[e[o]]=i[o];return n})}function _4(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let i=0;i<t;i++)r+=e[Math.floor(Math.random()*e.length)];return r}function Zp(t){return JSON.stringify(t)}function $v(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var Gp="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function $s(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var Cv=oc(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function Do(t){if($s(t)===!1)return!1;let e=t.constructor;if(e===void 0||typeof e!="function")return!0;let r=e.prototype;return!($s(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Ov(t){return Do(t)?{...t}:Array.isArray(t)?[...t]:t}function k4(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}var T4=t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},Sl=new Set(["string","number","symbol"]),Pv=new Set(["string","number","bigint","boolean","symbol","undefined"]);function An(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wr(t,e,r){let i=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(i._zod.parent=t),i}function te(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function I4(t){let e;return new Proxy({},{get(r,i,n){return e??(e=t()),Reflect.get(e,i,n)},set(r,i,n,o){return e??(e=t()),Reflect.set(e,i,n,o)},has(r,i){return e??(e=t()),Reflect.has(e,i)},deleteProperty(r,i){return e??(e=t()),Reflect.deleteProperty(e,i)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,i){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,i)},defineProperty(r,i,n){return e??(e=t()),Reflect.defineProperty(e,i,n)}})}function X(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function Rv(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}var Uv={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Dv={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function $4(t,e){let r=t._zod.def,i=Uo(t._zod.def,{get shape(){let n={};for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(n[o]=r.shape[o])}return Ro(this,"shape",n),n},checks:[]});return wr(t,i)}function C4(t,e){let r=t._zod.def,i=Uo(t._zod.def,{get shape(){let n={...t._zod.def.shape};for(let o in e){if(!(o in r.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete n[o]}return Ro(this,"shape",n),n},checks:[]});return wr(t,i)}function O4(t,e){if(!Do(e))throw new Error("Invalid input to extend: expected a plain object");let r=t._zod.def.checks;if(r&&r.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=Uo(t._zod.def,{get shape(){let o={...t._zod.def.shape,...e};return Ro(this,"shape",o),o},checks:[]});return wr(t,n)}function P4(t,e){if(!Do(e))throw new Error("Invalid input to safeExtend: expected a plain object");let r={...t._zod.def,get shape(){let i={...t._zod.def.shape,...e};return Ro(this,"shape",i),i},checks:t._zod.def.checks};return wr(t,r)}function R4(t,e){let r=Uo(t._zod.def,{get shape(){let i={...t._zod.def.shape,...e._zod.def.shape};return Ro(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return wr(t,r)}function U4(t,e,r){let i=Uo(e._zod.def,{get shape(){let n=e._zod.def.shape,o={...n};if(r)for(let s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=t?new t({type:"optional",innerType:n[s]}):n[s])}else for(let s in n)o[s]=t?new t({type:"optional",innerType:n[s]}):n[s];return Ro(this,"shape",o),o},checks:[]});return wr(e,i)}function D4(t,e,r){let i=Uo(e._zod.def,{get shape(){let n=e._zod.def.shape,o={...n};if(r)for(let s in r){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=new t({type:"nonoptional",innerType:n[s]}))}else for(let s in n)o[s]=new t({type:"nonoptional",innerType:n[s]});return Ro(this,"shape",o),o},checks:[]});return wr(e,i)}function Lo(t,e=0){if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function un(t,e){return e.map(r=>{var i;return(i=r).path??(i.path=[]),r.path.unshift(t),r})}function bl(t){return typeof t=="string"?t:t?.message}function Br(t,e,r){let i={...t,path:t.path??[]};if(!t.message){let n=bl(t.inst?._zod.def?.error?.(t))??bl(e?.error?.(t))??bl(r.customError?.(t))??bl(r.localeError?.(t))??"Invalid input";i.message=n}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function Nl(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function Al(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function sc(...t){let[e,r,i]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:i}:{...e}}function L4(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function OO(t){let e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}function PO(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function z4(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-e.length%4)%4);return OO(e+r)}function j4(t){return PO(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function M4(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let r=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)r[i/2]=Number.parseInt(e.slice(i,i+2),16);return r}function B4(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}var Tv=class{constructor(...e){}};var RO=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,ic,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},El=B("$ZodError",RO),qr=B("$ZodError",RO,{Parent:Error});function ac(t,e=r=>r.message){let r={},i=[];for(let n of t.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):i.push(e(n));return{formErrors:i,fieldErrors:r}}function cc(t,e=r=>r.message){let r={_errors:[]},i=n=>{for(let o of n.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>i({issues:s}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)r._errors.push(e(o));else{let s=r,a=0;for(;a<o.path.length;){let c=o.path[a];a===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(e(o))):s[c]=s[c]||{_errors:[]},s=s[c],a++}}};return i(t),r}function Yp(t,e=r=>r.message){let r={errors:[]},i=(n,o=[])=>{var s,a;for(let c of n.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>i({issues:u},c.path));else if(c.code==="invalid_key")i({issues:c.issues},c.path);else if(c.code==="invalid_element")i({issues:c.issues},c.path);else{let u=[...o,...c.path];if(u.length===0){r.errors.push(e(c));continue}let l=r,f=0;for(;f<u.length;){let d=u[f],m=f===u.length-1;typeof d=="string"?(l.properties??(l.properties={}),(s=l.properties)[d]??(s[d]={errors:[]}),l=l.properties[d]):(l.items??(l.items=[]),(a=l.items)[d]??(a[d]={errors:[]}),l=l.items[d]),m&&l.errors.push(e(c)),f++}}};return i(t),r}function UO(t){let e=[],r=t.map(i=>typeof i=="object"?i.key:i);for(let i of r)typeof i=="number"?e.push(`[${i}]`):typeof i=="symbol"?e.push(`[${JSON.stringify(String(i))}]`):/[^\w$]/.test(i)?e.push(`[${JSON.stringify(i)}]`):(e.length&&e.push("."),e.push(i));return e.join("")}function Xp(t){let e=[],r=[...t.issues].sort((i,n)=>(i.path??[]).length-(n.path??[]).length);for(let i of r)e.push(`\u2716 ${i.message}`),i.path?.length&&e.push(`  \u2192 at ${UO(i.path)}`);return e.join(`
`)}var uc=t=>(e,r,i,n)=>{let o=i?Object.assign(i,{async:!1}):{async:!1},s=e._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new Hn;if(s.issues.length){let a=new(n?.Err??t)(s.issues.map(c=>Br(c,o,$t())));throw Gp(a,n?.callee),a}return s.value},em=uc(qr),lc=t=>async(e,r,i,n)=>{let o=i?Object.assign(i,{async:!0}):{async:!0},s=e._zod.run({value:r,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){let a=new(n?.Err??t)(s.issues.map(c=>Br(c,o,$t())));throw Gp(a,n?.callee),a}return s.value},tm=lc(qr),dc=t=>(e,r,i)=>{let n=i?{...i,async:!1}:{async:!1},o=e._zod.run({value:r,issues:[]},n);if(o instanceof Promise)throw new Hn;return o.issues.length?{success:!1,error:new(t??El)(o.issues.map(s=>Br(s,n,$t())))}:{success:!0,data:o.value}},Lv=dc(qr),fc=t=>async(e,r,i)=>{let n=i?Object.assign(i,{async:!0}):{async:!0},o=e._zod.run({value:r,issues:[]},n);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(s=>Br(s,n,$t())))}:{success:!0,data:o.value}},zv=fc(qr),rm=t=>(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return uc(t)(e,r,n)},W4=rm(qr),nm=t=>(e,r,i)=>uc(t)(e,r,i),F4=nm(qr),im=t=>async(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return lc(t)(e,r,n)},V4=im(qr),om=t=>async(e,r,i)=>lc(t)(e,r,i),K4=om(qr),sm=t=>(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return dc(t)(e,r,n)},H4=sm(qr),am=t=>(e,r,i)=>dc(t)(e,r,i),J4=am(qr),cm=t=>async(e,r,i)=>{let n=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return fc(t)(e,r,n)},Q4=cm(qr),um=t=>async(e,r,i)=>fc(t)(e,r,i),Z4=um(qr);var ln={};ar(ln,{base64:()=>ex,base64url:()=>lm,bigint:()=>sx,boolean:()=>ux,browserEmail:()=>ij,cidrv4:()=>Yv,cidrv6:()=>Xv,cuid:()=>jv,cuid2:()=>Mv,date:()=>rx,datetime:()=>ix,domain:()=>aj,duration:()=>Vv,e164:()=>tx,email:()=>Hv,emoji:()=>Jv,extendedDuration:()=>G4,guid:()=>Kv,hex:()=>cj,hostname:()=>sj,html5Email:()=>tj,idnEmail:()=>nj,integer:()=>ax,ipv4:()=>Qv,ipv6:()=>Zv,ksuid:()=>Wv,lowercase:()=>fx,mac:()=>Gv,md5_base64:()=>lj,md5_base64url:()=>dj,md5_hex:()=>uj,nanoid:()=>Fv,null:()=>lx,number:()=>cx,rfc5322Email:()=>rj,sha1_base64:()=>pj,sha1_base64url:()=>mj,sha1_hex:()=>fj,sha256_base64:()=>gj,sha256_base64url:()=>yj,sha256_hex:()=>hj,sha384_base64:()=>bj,sha384_base64url:()=>vj,sha384_hex:()=>wj,sha512_base64:()=>Sj,sha512_base64url:()=>Nj,sha512_hex:()=>xj,string:()=>ox,time:()=>nx,ulid:()=>Bv,undefined:()=>dx,unicodeEmail:()=>DO,uppercase:()=>px,uuid:()=>Cs,uuid4:()=>Y4,uuid6:()=>X4,uuid7:()=>ej,xid:()=>qv});var jv=/^[cC][^\s-]{8,}$/,Mv=/^[0-9a-z]+$/,Bv=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,qv=/^[0-9a-vA-V]{20}$/,Wv=/^[A-Za-z0-9]{27}$/,Fv=/^[a-zA-Z0-9_-]{21}$/,Vv=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,G4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Kv=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Cs=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Y4=Cs(4),X4=Cs(6),ej=Cs(7),Hv=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,tj=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rj=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,DO=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,nj=DO,ij=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,oj="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Jv(){return new RegExp(oj,"u")}var Qv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Zv=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Gv=t=>{let e=An(t??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},Yv=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Xv=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ex=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,lm=/^[A-Za-z0-9_-]*$/,sj=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,aj=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,tx=/^\+(?:[0-9]){6,14}[0-9]$/,LO="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",rx=new RegExp(`^${LO}$`);function zO(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function nx(t){return new RegExp(`^${zO(t)}$`)}function ix(t){let e=zO({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let i=`${e}(?:${r.join("|")})`;return new RegExp(`^${LO}T(?:${i})$`)}var ox=t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},sx=/^-?\d+n?$/,ax=/^-?\d+$/,cx=/^-?\d+(?:\.\d+)?/,ux=/^(?:true|false)$/i,lx=/^null$/i;var dx=/^undefined$/i;var fx=/^[^A-Z]*$/,px=/^[^a-z]*$/,cj=/^[0-9a-fA-F]*$/;function _l(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}function kl(t){return new RegExp(`^[A-Za-z0-9_-]{${t}}$`)}var uj=/^[0-9a-fA-F]{32}$/,lj=_l(22,"=="),dj=kl(22),fj=/^[0-9a-fA-F]{40}$/,pj=_l(27,"="),mj=kl(27),hj=/^[0-9a-fA-F]{64}$/,gj=_l(43,"="),yj=kl(43),wj=/^[0-9a-fA-F]{96}$/,bj=_l(64,""),vj=kl(64),xj=/^[0-9a-fA-F]{128}$/,Sj=_l(86,"=="),Nj=kl(86);var dt=B("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),MO={number:"number",bigint:"bigint",object:"date"},dm=B("$ZodCheckLessThan",(t,e)=>{dt.init(t,e);let r=MO[typeof e.value];t._zod.onattach.push(i=>{let n=i._zod.bag,o=(e.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?n.maximum=e.value:n.exclusiveMaximum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:r,code:"too_big",maximum:e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),fm=B("$ZodCheckGreaterThan",(t,e)=>{dt.init(t,e);let r=MO[typeof e.value];t._zod.onattach.push(i=>{let n=i._zod.bag,o=(e.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?n.minimum=e.value:n.exclusiveMinimum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:r,code:"too_small",minimum:e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),mx=B("$ZodCheckMultipleOf",(t,e)=>{dt.init(t,e),t._zod.onattach.push(r=>{var i;(i=r._zod.bag).multipleOf??(i.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):Iv(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),hx=B("$ZodCheckNumberFormat",(t,e)=>{dt.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),i=r?"int":"number",[n,o]=Uv[e.format];t._zod.onattach.push(s=>{let a=s._zod.bag;a.format=e.format,a.minimum=n,a.maximum=o,r&&(a.pattern=ax)}),t._zod.check=s=>{let a=s.value;if(r){if(!Number.isInteger(a)){s.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,continue:!e.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,continue:!e.abort});return}}a<n&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:t})}}),gx=B("$ZodCheckBigIntFormat",(t,e)=>{dt.init(t,e);let[r,i]=Dv[e.format];t._zod.onattach.push(n=>{let o=n._zod.bag;o.format=e.format,o.minimum=r,o.maximum=i}),t._zod.check=n=>{let o=n.value;o<r&&n.issues.push({origin:"bigint",input:o,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),o>i&&n.issues.push({origin:"bigint",input:o,code:"too_big",maximum:i,inst:t})}}),yx=B("$ZodCheckMaxSize",(t,e)=>{var r;dt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Po(n)&&n.size!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<n&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{let n=i.value;n.size<=e.maximum||i.issues.push({origin:Nl(n),code:"too_big",maximum:e.maximum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),wx=B("$ZodCheckMinSize",(t,e)=>{var r;dt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Po(n)&&n.size!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>n&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{let n=i.value;n.size>=e.minimum||i.issues.push({origin:Nl(n),code:"too_small",minimum:e.minimum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),bx=B("$ZodCheckSizeEquals",(t,e)=>{var r;dt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Po(n)&&n.size!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag;n.minimum=e.size,n.maximum=e.size,n.size=e.size}),t._zod.check=i=>{let n=i.value,o=n.size;if(o===e.size)return;let s=o>e.size;i.issues.push({origin:Nl(n),...s?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),vx=B("$ZodCheckMaxLength",(t,e)=>{var r;dt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Po(n)&&n.length!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<n&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{let n=i.value;if(n.length<=e.maximum)return;let s=Al(n);i.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),xx=B("$ZodCheckMinLength",(t,e)=>{var r;dt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Po(n)&&n.length!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>n&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{let n=i.value;if(n.length>=e.minimum)return;let s=Al(n);i.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:n,inst:t,continue:!e.abort})}}),Sx=B("$ZodCheckLengthEquals",(t,e)=>{var r;dt.init(t,e),(r=t._zod.def).when??(r.when=i=>{let n=i.value;return!Po(n)&&n.length!==void 0}),t._zod.onattach.push(i=>{let n=i._zod.bag;n.minimum=e.length,n.maximum=e.length,n.length=e.length}),t._zod.check=i=>{let n=i.value,o=n.length;if(o===e.length)return;let s=Al(n),a=o>e.length;i.issues.push({origin:s,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),pc=B("$ZodCheckStringFormat",(t,e)=>{var r,i;dt.init(t,e),t._zod.onattach.push(n=>{let o=n._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:e.format,input:n.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(i=t._zod).check??(i.check=()=>{})}),Nx=B("$ZodCheckRegex",(t,e)=>{pc.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Ax=B("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=fx),pc.init(t,e)}),Ex=B("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=px),pc.init(t,e)}),_x=B("$ZodCheckIncludes",(t,e)=>{dt.init(t,e);let r=An(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=i,t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),t._zod.check=n=>{n.value.includes(e.includes,e.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:n.value,inst:t,continue:!e.abort})}}),kx=B("$ZodCheckStartsWith",(t,e)=>{dt.init(t,e);let r=new RegExp(`^${An(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(i=>{let n=i._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:t,continue:!e.abort})}}),Tx=B("$ZodCheckEndsWith",(t,e)=>{dt.init(t,e);let r=new RegExp(`.*${An(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(i=>{let n=i._zod.bag;n.patterns??(n.patterns=new Set),n.patterns.add(r)}),t._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:t,continue:!e.abort})}});function jO(t,e,r){t.issues.length&&e.issues.push(...un(r,t.issues))}var Ix=B("$ZodCheckProperty",(t,e)=>{dt.init(t,e),t._zod.check=r=>{let i=e.schema._zod.run({value:r.value[e.property],issues:[]},{});if(i instanceof Promise)return i.then(n=>jO(n,r,e.property));jO(i,r,e.property)}}),$x=B("$ZodCheckMimeType",(t,e)=>{dt.init(t,e);let r=new Set(e.mime);t._zod.onattach.push(i=>{i._zod.bag.mime=e.mime}),t._zod.check=i=>{r.has(i.value.type)||i.issues.push({code:"invalid_value",values:e.mime,input:i.value.type,inst:t,continue:!e.abort})}}),Cx=B("$ZodCheckOverwrite",(t,e)=>{dt.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var Tl=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let i=e.split(`
`).filter(s=>s),n=Math.min(...i.map(s=>s.length-s.trimStart().length)),o=i.map(s=>s.slice(n)).map(s=>" ".repeat(this.indent*2)+s);for(let s of o)this.content.push(s)}compile(){let e=Function,r=this?.args,n=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...r,n.join(`
`))}};var Ox={major:4,minor:2,patch:1};var Ee=B("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=Ox;let i=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&i.unshift(t);for(let n of i)for(let o of n._zod.onattach)o(t);if(i.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let n=(s,a,c)=>{let u=Lo(s),l;for(let f of a){if(f._zod.def.when){if(!f._zod.def.when(s))continue}else if(u)continue;let d=s.issues.length,m=f._zod.check(s);if(m instanceof Promise&&c?.async===!1)throw new Hn;if(l||m instanceof Promise)l=(l??Promise.resolve()).then(async()=>{await m,s.issues.length!==d&&(u||(u=Lo(s,d)))});else{if(s.issues.length===d)continue;u||(u=Lo(s,d))}}return l?l.then(()=>s):s},o=(s,a,c)=>{if(Lo(s))return s.aborted=!0,s;let u=n(a,i,c);if(u instanceof Promise){if(c.async===!1)throw new Hn;return u.then(l=>t._zod.parse(l,c))}return t._zod.parse(u,c)};t._zod.run=(s,a)=>{if(a.skipChecks)return t._zod.parse(s,a);if(a.direction==="backward"){let u=t._zod.parse({value:s.value,issues:[]},{...a,skipChecks:!0});return u instanceof Promise?u.then(l=>o(l,s,a)):o(u,s,a)}let c=t._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new Hn;return c.then(u=>n(u,i,a))}return n(c,i,a)}}t["~standard"]={validate:n=>{try{let o=Lv(t,n);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return zv(t,n).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Os=B("$ZodString",(t,e)=>{Ee.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??ox(t._zod.bag),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),it=B("$ZodStringFormat",(t,e)=>{pc.init(t,e),Os.init(t,e)}),Rx=B("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Kv),it.init(t,e)}),Ux=B("$ZodUUID",(t,e)=>{if(e.version){let i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Cs(i))}else e.pattern??(e.pattern=Cs());it.init(t,e)}),Dx=B("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=Hv),it.init(t,e)}),Lx=B("$ZodURL",(t,e)=>{it.init(t,e),t._zod.check=r=>{try{let i=r.value.trim(),n=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(n.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),e.normalize?r.value=n.href:r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),zx=B("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=Jv()),it.init(t,e)}),jx=B("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Fv),it.init(t,e)}),Mx=B("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=jv),it.init(t,e)}),Bx=B("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Mv),it.init(t,e)}),qx=B("$ZodULID",(t,e)=>{e.pattern??(e.pattern=Bv),it.init(t,e)}),Wx=B("$ZodXID",(t,e)=>{e.pattern??(e.pattern=qv),it.init(t,e)}),Fx=B("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=Wv),it.init(t,e)}),Vx=B("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=ix(e)),it.init(t,e)}),Kx=B("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=rx),it.init(t,e)}),Hx=B("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=nx(e)),it.init(t,e)}),Jx=B("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=Vv),it.init(t,e)}),Qx=B("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=Qv),it.init(t,e),t._zod.bag.format="ipv4"}),Zx=B("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=Zv),it.init(t,e),t._zod.bag.format="ipv6",t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Gx=B("$ZodMAC",(t,e)=>{e.pattern??(e.pattern=Gv(e.delimiter)),it.init(t,e),t._zod.bag.format="mac"}),Yx=B("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Yv),it.init(t,e)}),Xx=B("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=Xv),it.init(t,e),t._zod.check=r=>{let i=r.value.split("/");try{if(i.length!==2)throw new Error;let[n,o]=i;if(!o)throw new Error;let s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function eS(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}var tS=B("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=ex),it.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=r=>{eS(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function XO(t){if(!lm.test(t))return!1;let e=t.replace(/[-_]/g,i=>i==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return eS(r)}var rS=B("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=lm),it.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=r=>{XO(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),nS=B("$ZodE164",(t,e)=>{e.pattern??(e.pattern=tx),it.init(t,e)});function e1(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[i]=r;if(!i)return!1;let n=JSON.parse(atob(i));return!("typ"in n&&n?.typ!=="JWT"||!n.alg||e&&(!("alg"in n)||n.alg!==e))}catch{return!1}}var iS=B("$ZodJWT",(t,e)=>{it.init(t,e),t._zod.check=r=>{e1(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),oS=B("$ZodCustomStringFormat",(t,e)=>{it.init(t,e),t._zod.check=r=>{e.fn(r.value)||r.issues.push({code:"invalid_format",format:e.format,input:r.value,inst:t,continue:!e.abort})}}),wm=B("$ZodNumber",(t,e)=>{Ee.init(t,e),t._zod.pattern=t._zod.bag.pattern??cx,t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let n=r.value;if(typeof n=="number"&&!Number.isNaN(n)&&Number.isFinite(n))return r;let o=typeof n=="number"?Number.isNaN(n)?"NaN":Number.isFinite(n)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:n,inst:t,...o?{received:o}:{}}),r}}),sS=B("$ZodNumberFormat",(t,e)=>{hx.init(t,e),wm.init(t,e)}),Il=B("$ZodBoolean",(t,e)=>{Ee.init(t,e),t._zod.pattern=ux,t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=!!r.value}catch{}let n=r.value;return typeof n=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:n,inst:t}),r}}),bm=B("$ZodBigInt",(t,e)=>{Ee.init(t,e),t._zod.pattern=sx,t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}}),aS=B("$ZodBigIntFormat",(t,e)=>{gx.init(t,e),bm.init(t,e)}),cS=B("$ZodSymbol",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;return typeof n=="symbol"||r.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:t}),r}}),uS=B("$ZodUndefined",(t,e)=>{Ee.init(t,e),t._zod.pattern=dx,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(r,i)=>{let n=r.value;return typeof n>"u"||r.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:t}),r}}),lS=B("$ZodNull",(t,e)=>{Ee.init(t,e),t._zod.pattern=lx,t._zod.values=new Set([null]),t._zod.parse=(r,i)=>{let n=r.value;return n===null||r.issues.push({expected:"null",code:"invalid_type",input:n,inst:t}),r}}),dS=B("$ZodAny",(t,e)=>{Ee.init(t,e),t._zod.parse=r=>r}),fS=B("$ZodUnknown",(t,e)=>{Ee.init(t,e),t._zod.parse=r=>r}),pS=B("$ZodNever",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)}),mS=B("$ZodVoid",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;return typeof n>"u"||r.issues.push({expected:"void",code:"invalid_type",input:n,inst:t}),r}}),hS=B("$ZodDate",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let n=r.value,o=n instanceof Date;return o&&!Number.isNaN(n.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:n,...o?{received:"Invalid Date"}:{},inst:t}),r}});function qO(t,e,r){t.issues.length&&e.issues.push(...un(r,t.issues)),e.value[r]=t.value}var gS=B("$ZodArray",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!Array.isArray(n))return r.issues.push({expected:"array",code:"invalid_type",input:n,inst:t}),r;r.value=Array(n.length);let o=[];for(let s=0;s<n.length;s++){let a=n[s],c=e.element._zod.run({value:a,issues:[]},i);c instanceof Promise?o.push(c.then(u=>qO(u,r,s))):qO(c,r,s)}return o.length?Promise.all(o).then(()=>r):r}});function ym(t,e,r,i){t.issues.length&&e.issues.push(...un(r,t.issues)),t.value===void 0?r in i&&(e.value[r]=void 0):e.value[r]=t.value}function t1(t){let e=Object.keys(t.shape);for(let i of e)if(!t.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);let r=Rv(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}}function r1(t,e,r,i,n,o){let s=[],a=n.keySet,c=n.catchall._zod,u=c.def.type;for(let l in e){if(a.has(l))continue;if(u==="never"){s.push(l);continue}let f=c.run({value:e[l],issues:[]},i);f instanceof Promise?t.push(f.then(d=>ym(d,r,l,e))):ym(f,r,l,e)}return s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:o}),t.length?Promise.all(t).then(()=>r):r}var n1=B("$ZodObject",(t,e)=>{if(Ee.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let a=e.shape;Object.defineProperty(e,"shape",{get:()=>{let c={...a};return Object.defineProperty(e,"shape",{value:c}),c}})}let i=oc(()=>t1(e));De(t._zod,"propValues",()=>{let a=e.shape,c={};for(let u in a){let l=a[u]._zod;if(l.values){c[u]??(c[u]=new Set);for(let f of l.values)c[u].add(f)}}return c});let n=$s,o=e.catchall,s;t._zod.parse=(a,c)=>{s??(s=i.value);let u=a.value;if(!n(u))return a.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),a;a.value={};let l=[],f=s.shape;for(let d of s.keys){let h=f[d]._zod.run({value:u[d],issues:[]},c);h instanceof Promise?l.push(h.then(p=>ym(p,a,d,u))):ym(h,a,d,u)}return o?r1(l,u,a,c,i.value,t):l.length?Promise.all(l).then(()=>a):a}}),yS=B("$ZodObjectJIT",(t,e)=>{n1.init(t,e);let r=t._zod.parse,i=oc(()=>t1(e)),n=d=>{let m=new Tl(["shape","payload","ctx"]),h=i.value,p=T=>{let I=Zp(T);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};m.write("const input = payload.value;");let y=Object.create(null),b=0;for(let T of h.keys)y[T]=`key_${b++}`;m.write("const newResult = {};");for(let T of h.keys){let I=y[T],$=Zp(T);m.write(`const ${I} = ${p(T)};`),m.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        
        if (${I}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${I}.value;
        }
        
      `)}m.write("payload.value = newResult;"),m.write("return payload;");let N=m.compile();return(T,I)=>N(d,T,I)},o,s=$s,a=!yl.jitless,u=a&&Cv.value,l=e.catchall,f;t._zod.parse=(d,m)=>{f??(f=i.value);let h=d.value;return s(h)?a&&u&&m?.async===!1&&m.jitless!==!0?(o||(o=n(e.shape)),d=o(d,m),l?r1([],h,d,m,f,t):d):r(d,m):(d.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),d)}});function WO(t,e,r,i){for(let o of t)if(o.issues.length===0)return e.value=o.value,e;let n=t.filter(o=>!Lo(o));return n.length===1?(e.value=n[0].value,n[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(s=>Br(s,i,$t())))}),e)}var $l=B("$ZodUnion",(t,e)=>{Ee.init(t,e),De(t._zod,"optin",()=>e.options.some(n=>n._zod.optin==="optional")?"optional":void 0),De(t._zod,"optout",()=>e.options.some(n=>n._zod.optout==="optional")?"optional":void 0),De(t._zod,"values",()=>{if(e.options.every(n=>n._zod.values))return new Set(e.options.flatMap(n=>Array.from(n._zod.values)))}),De(t._zod,"pattern",()=>{if(e.options.every(n=>n._zod.pattern)){let n=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${n.map(o=>xl(o.source)).join("|")})$`)}});let r=e.options.length===1,i=e.options[0]._zod.run;t._zod.parse=(n,o)=>{if(r)return i(n,o);let s=!1,a=[];for(let c of e.options){let u=c._zod.run({value:n.value,issues:[]},o);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(c=>WO(c,n,t,o)):WO(a,n,t,o)}});function FO(t,e,r,i){let n=t.filter(o=>o.issues.length===0);return n.length===1?(e.value=n[0].value,e):(n.length===0?e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(s=>Br(s,i,$t())))}):e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:[],inclusive:!1}),e)}var wS=B("$ZodXor",(t,e)=>{$l.init(t,e),e.inclusive=!1;let r=e.options.length===1,i=e.options[0]._zod.run;t._zod.parse=(n,o)=>{if(r)return i(n,o);let s=!1,a=[];for(let c of e.options){let u=c._zod.run({value:n.value,issues:[]},o);u instanceof Promise?(a.push(u),s=!0):a.push(u)}return s?Promise.all(a).then(c=>FO(c,n,t,o)):FO(a,n,t,o)}}),bS=B("$ZodDiscriminatedUnion",(t,e)=>{e.inclusive=!1,$l.init(t,e);let r=t._zod.parse;De(t._zod,"propValues",()=>{let n={};for(let o of e.options){let s=o._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(let[a,c]of Object.entries(s)){n[a]||(n[a]=new Set);for(let u of c)n[a].add(u)}}return n});let i=oc(()=>{let n=e.options,o=new Map;for(let s of n){let a=s._zod.propValues?.[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let c of a){if(o.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);o.set(c,s)}}return o});t._zod.parse=(n,o)=>{let s=n.value;if(!$s(s))return n.issues.push({code:"invalid_type",expected:"object",input:s,inst:t}),n;let a=i.value.get(s?.[e.discriminator]);return a?a._zod.run(n,o):e.unionFallback?r(n,o):(n.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:s,path:[e.discriminator],inst:t}),n)}}),vS=B("$ZodIntersection",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value,o=e.left._zod.run({value:n,issues:[]},i),s=e.right._zod.run({value:n,issues:[]},i);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,u])=>VO(r,c,u)):VO(r,o,s)}});function Px(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(Do(t)&&Do(e)){let r=Object.keys(e),i=Object.keys(t).filter(o=>r.indexOf(o)!==-1),n={...t,...e};for(let o of i){let s=Px(t[o],e[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};n[o]=s.data}return{valid:!0,data:n}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let i=0;i<t.length;i++){let n=t[i],o=e[i],s=Px(n,o);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function VO(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),Lo(t))return t;let i=Px(e.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return t.value=i.data,t}var vm=B("$ZodTuple",(t,e)=>{Ee.init(t,e);let r=e.items;t._zod.parse=(i,n)=>{let o=i.value;if(!Array.isArray(o))return i.issues.push({input:o,inst:t,expected:"tuple",code:"invalid_type"}),i;i.value=[];let s=[],a=[...r].reverse().findIndex(l=>l._zod.optin!=="optional"),c=a===-1?0:r.length-a;if(!e.rest){let l=o.length>r.length,f=o.length<c-1;if(l||f)return i.issues.push({...l?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:o,inst:t,origin:"array"}),i}let u=-1;for(let l of r){if(u++,u>=o.length&&u>=c)continue;let f=l._zod.run({value:o[u],issues:[]},n);f instanceof Promise?s.push(f.then(d=>pm(d,i,u))):pm(f,i,u)}if(e.rest){let l=o.slice(r.length);for(let f of l){u++;let d=e.rest._zod.run({value:f,issues:[]},n);d instanceof Promise?s.push(d.then(m=>pm(m,i,u))):pm(d,i,u)}}return s.length?Promise.all(s).then(()=>i):i}});function pm(t,e,r){t.issues.length&&e.issues.push(...un(r,t.issues)),e.value[r]=t.value}var xS=B("$ZodRecord",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!Do(n))return r.issues.push({expected:"record",code:"invalid_type",input:n,inst:t}),r;let o=[],s=e.keyType._zod.values;if(s){r.value={};let a=new Set;for(let u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){a.add(typeof u=="number"?u.toString():u);let l=e.valueType._zod.run({value:n[u],issues:[]},i);l instanceof Promise?o.push(l.then(f=>{f.issues.length&&r.issues.push(...un(u,f.issues)),r.value[u]=f.value})):(l.issues.length&&r.issues.push(...un(u,l.issues)),r.value[u]=l.value)}let c;for(let u in n)a.has(u)||(c=c??[],c.push(u));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:n,inst:t,keys:c})}else{r.value={};for(let a of Reflect.ownKeys(n)){if(a==="__proto__")continue;let c=e.keyType._zod.run({value:a,issues:[]},i);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){e.mode==="loose"?r.value[a]=n[a]:r.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(l=>Br(l,i,$t())),input:a,path:[a],inst:t});continue}let u=e.valueType._zod.run({value:n[a],issues:[]},i);u instanceof Promise?o.push(u.then(l=>{l.issues.length&&r.issues.push(...un(a,l.issues)),r.value[c.value]=l.value})):(u.issues.length&&r.issues.push(...un(a,u.issues)),r.value[c.value]=u.value)}}return o.length?Promise.all(o).then(()=>r):r}}),SS=B("$ZodMap",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!(n instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:n,inst:t}),r;let o=[];r.value=new Map;for(let[s,a]of n){let c=e.keyType._zod.run({value:s,issues:[]},i),u=e.valueType._zod.run({value:a,issues:[]},i);c instanceof Promise||u instanceof Promise?o.push(Promise.all([c,u]).then(([l,f])=>{KO(l,f,r,s,n,t,i)})):KO(c,u,r,s,n,t,i)}return o.length?Promise.all(o).then(()=>r):r}});function KO(t,e,r,i,n,o,s){t.issues.length&&(Sl.has(typeof i)?r.issues.push(...un(i,t.issues)):r.issues.push({code:"invalid_key",origin:"map",input:n,inst:o,issues:t.issues.map(a=>Br(a,s,$t()))})),e.issues.length&&(Sl.has(typeof i)?r.issues.push(...un(i,e.issues)):r.issues.push({origin:"map",code:"invalid_element",input:n,inst:o,key:i,issues:e.issues.map(a=>Br(a,s,$t()))})),r.value.set(t.value,e.value)}var NS=B("$ZodSet",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;if(!(n instanceof Set))return r.issues.push({input:n,inst:t,expected:"set",code:"invalid_type"}),r;let o=[];r.value=new Set;for(let s of n){let a=e.valueType._zod.run({value:s,issues:[]},i);a instanceof Promise?o.push(a.then(c=>HO(c,r))):HO(a,r)}return o.length?Promise.all(o).then(()=>r):r}});function HO(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}var AS=B("$ZodEnum",(t,e)=>{Ee.init(t,e);let r=vl(e.entries),i=new Set(r);t._zod.values=i,t._zod.pattern=new RegExp(`^(${r.filter(n=>Sl.has(typeof n)).map(n=>typeof n=="string"?An(n):n.toString()).join("|")})$`),t._zod.parse=(n,o)=>{let s=n.value;return i.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:t}),n}}),ES=B("$ZodLiteral",(t,e)=>{if(Ee.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let r=new Set(e.values);t._zod.values=r,t._zod.pattern=new RegExp(`^(${e.values.map(i=>typeof i=="string"?An(i):i?An(i.toString()):String(i)).join("|")})$`),t._zod.parse=(i,n)=>{let o=i.value;return r.has(o)||i.issues.push({code:"invalid_value",values:e.values,input:o,inst:t}),i}}),_S=B("$ZodFile",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{let n=r.value;return n instanceof File||r.issues.push({expected:"file",code:"invalid_type",input:n,inst:t}),r}}),kS=B("$ZodTransform",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Oo(t.constructor.name);let n=e.transform(r.value,r);if(i.async)return(n instanceof Promise?n:Promise.resolve(n)).then(s=>(r.value=s,r));if(n instanceof Promise)throw new Hn;return r.value=n,r}});function JO(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}var TS=B("$ZodOptional",(t,e)=>{Ee.init(t,e),t._zod.optin="optional",t._zod.optout="optional",De(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),De(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${xl(r.source)})?$`):void 0}),t._zod.parse=(r,i)=>{if(e.innerType._zod.optin==="optional"){let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>JO(o,r.value)):JO(n,r.value)}return r.value===void 0?r:e.innerType._zod.run(r,i)}}),IS=B("$ZodNullable",(t,e)=>{Ee.init(t,e),De(t._zod,"optin",()=>e.innerType._zod.optin),De(t._zod,"optout",()=>e.innerType._zod.optout),De(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${xl(r.source)}|null)$`):void 0}),De(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,i)=>r.value===null?r:e.innerType._zod.run(r,i)}),$S=B("$ZodDefault",(t,e)=>{Ee.init(t,e),t._zod.optin="optional",De(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,i)=>{if(i.direction==="backward")return e.innerType._zod.run(r,i);if(r.value===void 0)return r.value=e.defaultValue,r;let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>QO(o,e)):QO(n,e)}});function QO(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}var CS=B("$ZodPrefault",(t,e)=>{Ee.init(t,e),t._zod.optin="optional",De(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,i)=>(i.direction==="backward"||r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,i))}),OS=B("$ZodNonOptional",(t,e)=>{Ee.init(t,e),De(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(i=>i!==void 0)):void 0}),t._zod.parse=(r,i)=>{let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>ZO(o,t)):ZO(n,t)}});function ZO(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}var PS=B("$ZodSuccess",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Oo("ZodSuccess");let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>(r.value=o.issues.length===0,r)):(r.value=n.issues.length===0,r)}}),RS=B("$ZodCatch",(t,e)=>{Ee.init(t,e),De(t._zod,"optin",()=>e.innerType._zod.optin),De(t._zod,"optout",()=>e.innerType._zod.optout),De(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,i)=>{if(i.direction==="backward")return e.innerType._zod.run(r,i);let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(o=>(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(s=>Br(s,i,$t()))},input:r.value}),r.issues=[]),r)):(r.value=n.value,n.issues.length&&(r.value=e.catchValue({...r,error:{issues:n.issues.map(o=>Br(o,i,$t()))},input:r.value}),r.issues=[]),r)}}),US=B("$ZodNaN",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>((typeof r.value!="number"||!Number.isNaN(r.value))&&r.issues.push({input:r.value,inst:t,expected:"nan",code:"invalid_type"}),r)}),DS=B("$ZodPipe",(t,e)=>{Ee.init(t,e),De(t._zod,"values",()=>e.in._zod.values),De(t._zod,"optin",()=>e.in._zod.optin),De(t._zod,"optout",()=>e.out._zod.optout),De(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,i)=>{if(i.direction==="backward"){let o=e.out._zod.run(r,i);return o instanceof Promise?o.then(s=>mm(s,e.in,i)):mm(o,e.in,i)}let n=e.in._zod.run(r,i);return n instanceof Promise?n.then(o=>mm(o,e.out,i)):mm(n,e.out,i)}});function mm(t,e,r){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},r)}var Cl=B("$ZodCodec",(t,e)=>{Ee.init(t,e),De(t._zod,"values",()=>e.in._zod.values),De(t._zod,"optin",()=>e.in._zod.optin),De(t._zod,"optout",()=>e.out._zod.optout),De(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,i)=>{if((i.direction||"forward")==="forward"){let o=e.in._zod.run(r,i);return o instanceof Promise?o.then(s=>hm(s,e,i)):hm(o,e,i)}else{let o=e.out._zod.run(r,i);return o instanceof Promise?o.then(s=>hm(s,e,i)):hm(o,e,i)}}});function hm(t,e,r){if(t.issues.length)return t.aborted=!0,t;if((r.direction||"forward")==="forward"){let n=e.transform(t.value,t);return n instanceof Promise?n.then(o=>gm(t,o,e.out,r)):gm(t,n,e.out,r)}else{let n=e.reverseTransform(t.value,t);return n instanceof Promise?n.then(o=>gm(t,o,e.in,r)):gm(t,n,e.in,r)}}function gm(t,e,r,i){return t.issues.length?(t.aborted=!0,t):r._zod.run({value:e,issues:t.issues},i)}var LS=B("$ZodReadonly",(t,e)=>{Ee.init(t,e),De(t._zod,"propValues",()=>e.innerType._zod.propValues),De(t._zod,"values",()=>e.innerType._zod.values),De(t._zod,"optin",()=>e.innerType?._zod?.optin),De(t._zod,"optout",()=>e.innerType?._zod?.optout),t._zod.parse=(r,i)=>{if(i.direction==="backward")return e.innerType._zod.run(r,i);let n=e.innerType._zod.run(r,i);return n instanceof Promise?n.then(GO):GO(n)}});function GO(t){return t.value=Object.freeze(t.value),t}var zS=B("$ZodTemplateLiteral",(t,e)=>{Ee.init(t,e);let r=[];for(let i of e.parts)if(typeof i=="object"&&i!==null){if(!i._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...i._zod.traits].shift()}`);let n=i._zod.pattern instanceof RegExp?i._zod.pattern.source:i._zod.pattern;if(!n)throw new Error(`Invalid template literal part: ${i._zod.traits}`);let o=n.startsWith("^")?1:0,s=n.endsWith("$")?n.length-1:n.length;r.push(n.slice(o,s))}else if(i===null||Pv.has(typeof i))r.push(An(`${i}`));else throw new Error(`Invalid template literal part: ${i}`);t._zod.pattern=new RegExp(`^${r.join("")}$`),t._zod.parse=(i,n)=>typeof i.value!="string"?(i.issues.push({input:i.value,inst:t,expected:"template_literal",code:"invalid_type"}),i):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(i.value)||i.issues.push({input:i.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),i)}),jS=B("$ZodFunction",(t,e)=>(Ee.init(t,e),t._def=e,t._zod.def=e,t.implement=r=>{if(typeof r!="function")throw new Error("implement() must be called with a function");return function(...i){let n=t._def.input?em(t._def.input,i):i,o=Reflect.apply(r,this,n);return t._def.output?em(t._def.output,o):o}},t.implementAsync=r=>{if(typeof r!="function")throw new Error("implementAsync() must be called with a function");return async function(...i){let n=t._def.input?await tm(t._def.input,i):i,o=await Reflect.apply(r,this,n);return t._def.output?await tm(t._def.output,o):o}},t._zod.parse=(r,i)=>typeof r.value!="function"?(r.issues.push({code:"invalid_type",expected:"function",input:r.value,inst:t}),r):(t._def.output&&t._def.output._zod.def.type==="promise"?r.value=t.implementAsync(r.value):r.value=t.implement(r.value),r),t.input=(...r)=>{let i=t.constructor;return Array.isArray(r[0])?new i({type:"function",input:new vm({type:"tuple",items:r[0],rest:r[1]}),output:t._def.output}):new i({type:"function",input:r[0],output:t._def.output})},t.output=r=>{let i=t.constructor;return new i({type:"function",input:t._def.input,output:r})},t)),MS=B("$ZodPromise",(t,e)=>{Ee.init(t,e),t._zod.parse=(r,i)=>Promise.resolve(r.value).then(n=>e.innerType._zod.run({value:n,issues:[]},i))}),BS=B("$ZodLazy",(t,e)=>{Ee.init(t,e),De(t._zod,"innerType",()=>e.getter()),De(t._zod,"pattern",()=>t._zod.innerType?._zod?.pattern),De(t._zod,"propValues",()=>t._zod.innerType?._zod?.propValues),De(t._zod,"optin",()=>t._zod.innerType?._zod?.optin??void 0),De(t._zod,"optout",()=>t._zod.innerType?._zod?.optout??void 0),t._zod.parse=(r,i)=>t._zod.innerType._zod.run(r,i)}),qS=B("$ZodCustom",(t,e)=>{dt.init(t,e),Ee.init(t,e),t._zod.parse=(r,i)=>r,t._zod.check=r=>{let i=r.value,n=e.fn(i);if(n instanceof Promise)return n.then(o=>YO(o,r,i,t));YO(n,r,i,t)}});function YO(t,e,r,i){if(!t){let n={code:"custom",input:r,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(n.params=i._zod.def.params),e.issues.push(sc(n))}}var mc={};ar(mc,{ar:()=>i1,az:()=>o1,be:()=>a1,bg:()=>c1,ca:()=>u1,cs:()=>l1,da:()=>d1,de:()=>f1,en:()=>xm,eo:()=>p1,es:()=>m1,fa:()=>h1,fi:()=>g1,fr:()=>y1,frCA:()=>w1,he:()=>b1,hu:()=>v1,id:()=>x1,is:()=>S1,it:()=>N1,ja:()=>A1,ka:()=>E1,kh:()=>_1,km:()=>Sm,ko:()=>k1,lt:()=>I1,mk:()=>$1,ms:()=>C1,nl:()=>O1,no:()=>P1,ota:()=>R1,pl:()=>D1,ps:()=>U1,pt:()=>L1,ru:()=>j1,sl:()=>M1,sv:()=>B1,ta:()=>q1,th:()=>W1,tr:()=>F1,ua:()=>V1,uk:()=>Nm,ur:()=>K1,vi:()=>H1,yo:()=>Z1,zhCN:()=>J1,zhTW:()=>Q1});var Ej=()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return n=>{switch(n.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${n.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${X(n.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${n.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${n.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${n.minimum.toString()} ${s.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${n.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${n.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${i[o.format]??n.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${n.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${n.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${n.keys.length>1?"\u0629":""}: ${K(n.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${n.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function i1(){return{localeError:Ej()}}var _j=()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${n.expected}, daxil olan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${X(n.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${n.origin??"d\u0259y\u0259r"} ${o}${n.maximum.toString()} ${s.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${n.origin??"d\u0259y\u0259r"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${o}${n.minimum.toString()} ${s.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${i[o.format]??n.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${n.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${n.keys.length>1?"lar":""}: ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${n.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function o1(){return{localeError:_j()}}function s1(t,e,r,i){let n=Math.abs(t),o=n%10,s=n%100;return s>=11&&s<=19?i:o===1?e:o>=2&&o<=4?r:i}var kj=()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0456\u045E";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${n.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${X(n.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);if(s){let a=Number(n.maximum),c=s1(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${n.maximum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);if(s){let a=Number(n.minimum),c=s1(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${n.minimum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${n.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${i[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${n.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${K(n.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${n.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function a1(){return{localeError:kj()}}var Tj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(t))return"\u043C\u0430\u0441\u0438\u0432";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Ij=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(i){return t[i]??null}let r={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Tj(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${X(i.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${n}${i.maximum.toString()} ${o.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${n}${i.minimum.toString()} ${o.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${i.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;if(n.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${n.prefix}"`;if(n.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${n.suffix}"`;if(n.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${n.includes}"`;if(n.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${n.pattern}`;let o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return n.format==="emoji"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="datetime"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="date"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),n.format==="time"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),n.format==="duration"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${o} ${r[n.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${i.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u043E\u0432\u0435":""}: ${K(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function c1(){return{localeError:Ij()}}var $j=()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{switch(n.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${n.expected}, s'ha rebut ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Valor inv\xE0lid: s'esperava ${X(n.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${K(n.values," o ")}`;case"too_big":{let o=n.inclusive?"com a m\xE0xim":"menys de",s=e(n.origin);return s?`Massa gran: s'esperava que ${n.origin??"el valor"} contingu\xE9s ${o} ${n.maximum.toString()} ${s.unit??"elements"}`:`Massa gran: s'esperava que ${n.origin??"el valor"} fos ${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?"com a m\xEDnim":"m\xE9s de",s=e(n.origin);return s?`Massa petit: s'esperava que ${n.origin} contingu\xE9s ${o} ${n.minimum.toString()} ${s.unit}`:`Massa petit: s'esperava que ${n.origin} fos ${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${i[o.format]??n.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${n.divisor}`;case"unrecognized_keys":return`Clau${n.keys.length>1?"s":""} no reconeguda${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${n.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${n.origin}`;default:return"Entrada inv\xE0lida"}}};function u1(){return{localeError:$j()}}var Cj=()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(n))return"pole";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return n=>{switch(n.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${n.expected}, obdr\u017Eeno ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${X(n.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${n.origin??"hodnota"} mus\xED m\xEDt ${o}${n.maximum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${n.origin??"hodnota"} mus\xED b\xFDt ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${n.origin??"hodnota"} mus\xED m\xEDt ${o}${n.minimum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${n.origin??"hodnota"} mus\xED b\xFDt ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${i[o.format]??n.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${n.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${K(n.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${n.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${n.origin}`;default:return"Neplatn\xFD vstup"}}};function l1(){return{localeError:Cj()}}var Oj=()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function r(s){return t[s]??null}function i(s){return e[s]??s}let n=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"tal";case"object":return Array.isArray(s)?"liste":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype&&s.constructor?s.constructor.name:"objekt"}return a},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return s=>{switch(s.code){case"invalid_type":return`Ugyldigt input: forventede ${i(s.expected)}, fik ${i(n(s.input))}`;case"invalid_value":return s.values.length===1?`Ugyldig v\xE6rdi: forventede ${X(s.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${K(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=r(s.origin),u=i(s.origin);return c?`For stor: forventede ${u??"value"} ${c.verb} ${a} ${s.maximum.toString()} ${c.unit??"elementer"}`:`For stor: forventede ${u??"value"} havde ${a} ${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=r(s.origin),u=i(s.origin);return c?`For lille: forventede ${u} ${c.verb} ${a} ${s.minimum.toString()} ${c.unit}`:`For lille: forventede ${u} havde ${a} ${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Ugyldig streng: skal starte med "${a.prefix}"`:a.format==="ends_with"?`Ugyldig streng: skal ende med "${a.suffix}"`:a.format==="includes"?`Ugyldig streng: skal indeholde "${a.includes}"`:a.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${a.pattern}`:`Ugyldig ${o[a.format]??s.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${s.divisor}`;case"unrecognized_keys":return`${s.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${K(s.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${s.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${s.origin}`;default:return"Ugyldigt input"}}};function d1(){return{localeError:Oj()}}var Pj=()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"Zahl";case"object":{if(Array.isArray(n))return"Array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return n=>{switch(n.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${n.expected}, erhalten ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ung\xFCltige Eingabe: erwartet ${X(n.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Zu gro\xDF: erwartet, dass ${n.origin??"Wert"} ${o}${n.maximum.toString()} ${s.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${n.origin??"Wert"} ${o}${n.maximum.toString()} ist`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Zu klein: erwartet, dass ${n.origin} ${o}${n.minimum.toString()} ${s.unit} hat`:`Zu klein: erwartet, dass ${n.origin} ${o}${n.minimum.toString()} ist`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${i[o.format]??n.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${n.divisor} sein`;case"unrecognized_keys":return`${n.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${K(n.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${n.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${n.origin}`;default:return"Ung\xFCltige Eingabe"}}};function f1(){return{localeError:Pj()}}var Rj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Uj=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(i){return t[i]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Invalid input: expected ${i.expected}, received ${Rj(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${X(i.values[0])}`:`Invalid option: expected one of ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`Too big: expected ${i.origin??"value"} to have ${n}${i.maximum.toString()} ${o.unit??"elements"}`:`Too big: expected ${i.origin??"value"} to be ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`Too small: expected ${i.origin} to have ${n}${i.minimum.toString()} ${o.unit}`:`Too small: expected ${i.origin} to be ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Invalid string: must start with "${n.prefix}"`:n.format==="ends_with"?`Invalid string: must end with "${n.suffix}"`:n.format==="includes"?`Invalid string: must include "${n.includes}"`:n.format==="regex"?`Invalid string: must match pattern ${n.pattern}`:`Invalid ${r[n.format]??i.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${i.divisor}`;case"unrecognized_keys":return`Unrecognized key${i.keys.length>1?"s":""}: ${K(i.keys,", ")}`;case"invalid_key":return`Invalid key in ${i.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${i.origin}`;default:return"Invalid input"}}};function xm(){return{localeError:Uj()}}var Dj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Lj=()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(i){return t[i]??null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return i=>{switch(i.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${i.expected}, ricevi\u011Dis ${Dj(i.input)}`;case"invalid_value":return i.values.length===1?`Nevalida enigo: atendi\u011Dis ${X(i.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`Tro granda: atendi\u011Dis ke ${i.origin??"valoro"} havu ${n}${i.maximum.toString()} ${o.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${i.origin??"valoro"} havu ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`Tro malgranda: atendi\u011Dis ke ${i.origin} havu ${n}${i.minimum.toString()} ${o.unit}`:`Tro malgranda: atendi\u011Dis ke ${i.origin} estu ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${n.prefix}"`:n.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${n.suffix}"`:n.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${n.includes}"`:n.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${n.pattern}`:`Nevalida ${r[n.format]??i.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${i.divisor}`;case"unrecognized_keys":return`Nekonata${i.keys.length>1?"j":""} \u015Dlosilo${i.keys.length>1?"j":""}: ${K(i.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${i.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${i.origin}`;default:return"Nevalida enigo"}}};function p1(){return{localeError:Lj()}}var zj=()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(s){return t[s]??null}function i(s){return e[s]??s}let n=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"number";case"object":return Array.isArray(s)?"array":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype?s.constructor.name:"object"}return a},o={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return s=>{switch(s.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${i(s.expected)}, recibido ${i(n(s.input))}`;case"invalid_value":return s.values.length===1?`Entrada inv\xE1lida: se esperaba ${X(s.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${K(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=r(s.origin),u=i(s.origin);return c?`Demasiado grande: se esperaba que ${u??"valor"} tuviera ${a}${s.maximum.toString()} ${c.unit??"elementos"}`:`Demasiado grande: se esperaba que ${u??"valor"} fuera ${a}${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=r(s.origin),u=i(s.origin);return c?`Demasiado peque\xF1o: se esperaba que ${u} tuviera ${a}${s.minimum.toString()} ${c.unit}`:`Demasiado peque\xF1o: se esperaba que ${u} fuera ${a}${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${a.prefix}"`:a.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${a.suffix}"`:a.format==="includes"?`Cadena inv\xE1lida: debe incluir "${a.includes}"`:a.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${a.pattern}`:`Inv\xE1lido ${o[a.format]??s.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${s.divisor}`;case"unrecognized_keys":return`Llave${s.keys.length>1?"s":""} desconocida${s.keys.length>1?"s":""}: ${K(s.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${i(s.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${i(s.origin)}`;default:return"Entrada inv\xE1lida"}}};function m1(){return{localeError:zj()}}var jj=()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0622\u0631\u0627\u06CC\u0647";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return n=>{switch(n.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${n.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${r(n.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return n.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${X(n.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${K(n.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${n.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${n.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} ${s.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${i[o.format]??n.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${n.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${n.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${K(n.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${n.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${n.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function h1(){return{localeError:jj()}}var Mj=()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return n=>{switch(n.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${n.expected}, oli ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${X(n.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Liian suuri: ${s.subject} t\xE4ytyy olla ${o}${n.maximum.toString()} ${s.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Liian pieni: ${s.subject} t\xE4ytyy olla ${o}${n.minimum.toString()} ${s.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${i[o.format]??n.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${n.divisor} monikerta`;case"unrecognized_keys":return`${n.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${K(n.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function g1(){return{localeError:Mj()}}var Bj=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"nombre";case"object":{if(Array.isArray(n))return"tableau";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{switch(n.code){case"invalid_type":return`Entr\xE9e invalide : ${n.expected} attendu, ${r(n.input)} re\xE7u`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : ${X(n.values[0])} attendu`:`Option invalide : une valeur parmi ${K(n.values,"|")} attendue`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Trop grand : ${n.origin??"valeur"} doit ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${n.origin??"valeur"} doit \xEAtre ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Trop petit : ${n.origin} doit ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Trop petit : ${n.origin} doit \xEAtre ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${i[o.format]??n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${K(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function y1(){return{localeError:Bj()}}var qj=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return n=>{switch(n.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${n.expected}, re\xE7u ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entr\xE9e invalide : attendu ${X(n.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"\u2264":"<",s=e(n.origin);return s?`Trop grand : attendu que ${n.origin??"la valeur"} ait ${o}${n.maximum.toString()} ${s.unit}`:`Trop grand : attendu que ${n.origin??"la valeur"} soit ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?"\u2265":">",s=e(n.origin);return s?`Trop petit : attendu que ${n.origin} ait ${o}${n.minimum.toString()} ${s.unit}`:`Trop petit : attendu que ${n.origin} soit ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${i[o.format]??n.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${n.divisor}`;case"unrecognized_keys":return`Cl\xE9${n.keys.length>1?"s":""} non reconnue${n.keys.length>1?"s":""} : ${K(n.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${n.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${n.origin}`;default:return"Entr\xE9e invalide"}}};function w1(){return{localeError:qj()}}var Wj=()=>{let t={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},r=u=>u?t[u]:void 0,i=u=>{let l=r(u);return l?l.label:u??t.unknown.label},n=u=>`\u05D4${i(u)}`,o=u=>(r(u)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA",s=u=>u?e[u]??null:null,a=u=>{let l=typeof u;switch(l){case"number":return Number.isNaN(u)?"NaN":"number";case"object":return Array.isArray(u)?"array":u===null?"null":Object.getPrototypeOf(u)!==Object.prototype&&u.constructor?u.constructor.name:"object";default:return l}},c={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return u=>{switch(u.code){case"invalid_type":{let l=u.expected,f=i(l),d=a(u.input),m=t[d]?.label??d;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${f}, \u05D4\u05EA\u05E7\u05D1\u05DC ${m}`}case"invalid_value":{if(u.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${X(u.values[0])}`;let l=u.values.map(m=>X(m));if(u.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${l[0]} \u05D0\u05D5 ${l[1]}`;let f=l[l.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${l.slice(0,-1).join(", ")} \u05D0\u05D5 ${f}`}case"too_big":{let l=s(u.origin),f=n(u.origin??"value");if(u.origin==="string")return`${l?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.maximum.toString()} ${l?.unit??""} ${u.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(u.origin==="number"){let h=u.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${u.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}`}if(u.origin==="array"||u.origin==="set"){let h=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",p=u.inclusive?`${u.maximum} ${l?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${u.maximum} ${l?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${f} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${p}`.trim()}let d=u.inclusive?"<=":"<",m=o(u.origin??"value");return l?.unit?`${l.longLabel} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.maximum.toString()} ${l.unit}`:`${l?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.maximum.toString()}`}case"too_small":{let l=s(u.origin),f=n(u.origin??"value");if(u.origin==="string")return`${l?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${u.minimum.toString()} ${l?.unit??""} ${u.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(u.origin==="number"){let h=u.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${u.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${u.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}`}if(u.origin==="array"||u.origin==="set"){let h=u.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(u.minimum===1&&u.inclusive){let y=(u.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${y}`}let p=u.inclusive?`${u.minimum} ${l?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${u.minimum} ${l?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${f} ${h} \u05DC\u05D4\u05DB\u05D9\u05DC ${p}`.trim()}let d=u.inclusive?">=":">",m=o(u.origin??"value");return l?.unit?`${l.shortLabel} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.minimum.toString()} ${l.unit}`:`${l?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${f} ${m} ${d}${u.minimum.toString()}`}case"invalid_format":{let l=u;if(l.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${l.prefix}"`;if(l.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${l.suffix}"`;if(l.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${l.includes}"`;if(l.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${l.pattern}`;let f=c[l.format],d=f?.label??l.format,h=(f?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${d} \u05DC\u05D0 ${h}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${u.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${u.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${u.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${K(u.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${n(u.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function b1(){return{localeError:Wj()}}var Fj=()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(n))return"t\xF6mb";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return n=>{switch(n.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${n.expected}, a kapott \xE9rt\xE9k ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${X(n.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`T\xFAl nagy: ${n.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${n.maximum.toString()} ${s.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${n.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} m\xE9rete t\xFAl kicsi ${o}${n.minimum.toString()} ${s.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${n.origin} t\xFAl kicsi ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${i[o.format]??n.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${n.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${n.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${n.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function v1(){return{localeError:Fj()}}var Vj=()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input tidak valid: diharapkan ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak valid: diharapkan ${X(n.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Terlalu besar: diharapkan ${n.origin??"value"} memiliki ${o}${n.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: diharapkan ${n.origin??"value"} menjadi ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Terlalu kecil: diharapkan ${n.origin} memiliki ${o}${n.minimum.toString()} ${s.unit}`:`Terlalu kecil: diharapkan ${n.origin} menjadi ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${i[o.format]??n.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${n.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${n.origin}`;default:return"Input tidak valid"}}};function x1(){return{localeError:Vj()}}var Kj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},Hj=()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(i){return t[i]??null}let r={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return i=>{switch(i.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Kj(i.input)} \xFEar sem \xE1 a\xF0 vera ${i.expected}`;case"invalid_value":return i.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${X(i.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin??"gildi"} hafi ${n}${i.maximum.toString()} ${o.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin??"gildi"} s\xE9 ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin} hafi ${n}${i.minimum.toString()} ${o.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${i.origin} s\xE9 ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${n.prefix}"`:n.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${n.suffix}"`:n.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${n.includes}"`:n.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${n.pattern}`:`Rangt ${r[n.format]??i.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${i.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${i.keys.length>1?"ir lyklar":"ur lykill"}: ${K(i.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${i.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${i.origin}`;default:return"Rangt gildi"}}};function S1(){return{localeError:Hj()}}var Jj=()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"numero";case"object":{if(Array.isArray(n))return"vettore";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input non valido: atteso ${n.expected}, ricevuto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input non valido: atteso ${X(n.values[0])}`:`Opzione non valida: atteso uno tra ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Troppo grande: ${n.origin??"valore"} deve avere ${o}${n.maximum.toString()} ${s.unit??"elementi"}`:`Troppo grande: ${n.origin??"valore"} deve essere ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Troppo piccolo: ${n.origin} deve avere ${o}${n.minimum.toString()} ${s.unit}`:`Troppo piccolo: ${n.origin} deve essere ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${i[o.format]??n.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${n.divisor}`;case"unrecognized_keys":return`Chiav${n.keys.length>1?"i":"e"} non riconosciut${n.keys.length>1?"e":"a"}: ${K(n.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${n.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${n.origin}`;default:return"Input non valido"}}};function N1(){return{localeError:Jj()}}var Qj=()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(n))return"\u914D\u5217";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return n=>{switch(n.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${n.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${r(n.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return n.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${X(n.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${K(n.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=n.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",s=e(n.origin);return s?`\u5927\u304D\u3059\u304E\u308B\u5024: ${n.origin??"\u5024"}\u306F${n.maximum.toString()}${s.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${n.origin??"\u5024"}\u306F${n.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=n.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",s=e(n.origin);return s?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${s.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${n.origin}\u306F${n.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${i[o.format]??n.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${n.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${n.keys.length>1?"\u7FA4":""}: ${K(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${n.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function A1(){return{localeError:Qj()}}var Zj=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(t))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},Gj=()=>{let t={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(i){return t[i]??null}let r={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return i=>{switch(i.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${Zj(i.input)}`;case"invalid_value":return i.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${X(i.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${K(i.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${o.verb} ${n}${i.maximum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin} ${o.verb} ${n}${i.minimum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${i.origin} \u10D8\u10E7\u10DD\u10E1 ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${n.prefix}"-\u10D8\u10D7`:n.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${n.suffix}"-\u10D8\u10D7`:n.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${n.includes}"-\u10E1`:n.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${n.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${r[n.format]??i.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${i.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${i.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${K(i.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${i.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${i.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function E1(){return{localeError:Gj()}}var Yj=()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(n))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(n===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return n=>{switch(n.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${X(n.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${n.maximum.toString()} ${s.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${o} ${n.minimum.toString()} ${s.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${n.origin} ${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${n.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${K(n.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${n.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function Sm(){return{localeError:Yj()}}function _1(){return Sm()}var Xj=()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return n=>{switch(n.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${n.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${r(n.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return n.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${X(n.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${K(n.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=n.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",s=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(n.origin),c=a?.unit??"\uC694\uC18C";return a?`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()}${c} ${o}${s}`:`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${n.maximum.toString()} ${o}${s}`}case"too_small":{let o=n.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",s=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(n.origin),c=a?.unit??"\uC694\uC18C";return a?`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()}${c} ${o}${s}`:`${n.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${n.minimum.toString()} ${o}${s}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${i[o.format]??n.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${n.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${K(n.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${n.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${n.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function k1(){return{localeError:Xj()}}var eM=t=>Pl(typeof t,t),Pl=(t,e=void 0)=>{switch(t){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return t},Ol=t=>t.charAt(0).toUpperCase()+t.slice(1);function T1(t){let e=Math.abs(t),r=e%10,i=e%100;return i>=11&&i<=19||r===0?"many":r===1?"one":"few"}var tM=()=>{let t={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(i,n,o,s){let a=t[i]??null;return a===null?a:{unit:a.unit[n],verb:a.verb[s][o?"inclusive":"notInclusive"]}}let r={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return i=>{switch(i.code){case"invalid_type":return`Gautas tipas ${eM(i.input)}, o tik\u0117tasi - ${Pl(i.expected)}`;case"invalid_value":return i.values.length===1?`Privalo b\u016Bti ${X(i.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${K(i.values,"|")} pasirinkim\u0173`;case"too_big":{let n=Pl(i.origin),o=e(i.origin,T1(Number(i.maximum)),i.inclusive??!1,"smaller");if(o?.verb)return`${Ol(n??i.origin??"reik\u0161m\u0117")} ${o.verb} ${i.maximum.toString()} ${o.unit??"element\u0173"}`;let s=i.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${Ol(n??i.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${i.maximum.toString()} ${o?.unit}`}case"too_small":{let n=Pl(i.origin),o=e(i.origin,T1(Number(i.minimum)),i.inclusive??!1,"bigger");if(o?.verb)return`${Ol(n??i.origin??"reik\u0161m\u0117")} ${o.verb} ${i.minimum.toString()} ${o.unit??"element\u0173"}`;let s=i.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${Ol(n??i.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${i.minimum.toString()} ${o?.unit}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${n.prefix}"`:n.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${n.suffix}"`:n.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${n.includes}"`:n.format==="regex"?`Eilut\u0117 privalo atitikti ${n.pattern}`:`Neteisingas ${r[n.format]??i.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${i.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${i.keys.length>1?"i":"as"} rakt${i.keys.length>1?"ai":"as"}: ${K(i.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let n=Pl(i.origin);return`${Ol(n??i.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function I1(){return{localeError:tM()}}var rM=()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(n))return"\u043D\u0438\u0437\u0430";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return n=>{switch(n.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${X(n.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${n.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${n.minimum.toString()} ${s.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${n.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${i[o.format]??n.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${K(n.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${n.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${n.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function $1(){return{localeError:rM()}}var nM=()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"nombor";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Input tidak sah: dijangka ${n.expected}, diterima ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Input tidak sah: dijangka ${X(n.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Terlalu besar: dijangka ${n.origin??"nilai"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: dijangka ${n.origin??"nilai"} adalah ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Terlalu kecil: dijangka ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Terlalu kecil: dijangka ${n.origin} adalah ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${i[o.format]??n.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${n.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${K(n.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${n.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${n.origin}`;default:return"Input tidak sah"}}};function C1(){return{localeError:nM()}}var iM=()=>{let t={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"getal";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return n=>{switch(n.code){case"invalid_type":return`Ongeldige invoer: verwacht ${n.expected}, ontving ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ongeldige invoer: verwacht ${X(n.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Te groot: verwacht dat ${n.origin??"waarde"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"elementen"}`:`Te groot: verwacht dat ${n.origin??"waarde"} ${o}${n.maximum.toString()} is`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Te klein: verwacht dat ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Te klein: verwacht dat ${n.origin} ${o}${n.minimum.toString()} is`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${i[o.format]??n.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${n.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${n.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${n.origin}`;default:return"Ongeldige invoer"}}};function O1(){return{localeError:iM()}}var oM=()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"tall";case"object":{if(Array.isArray(n))return"liste";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Ugyldig input: forventet ${n.expected}, fikk ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ugyldig verdi: forventet ${X(n.values[0])}`:`Ugyldig valg: forventet en av ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`For stor(t): forventet ${n.origin??"value"} til \xE5 ha ${o}${n.maximum.toString()} ${s.unit??"elementer"}`:`For stor(t): forventet ${n.origin??"value"} til \xE5 ha ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`For lite(n): forventet ${n.origin} til \xE5 ha ${o}${n.minimum.toString()} ${s.unit}`:`For lite(n): forventet ${n.origin} til \xE5 ha ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${i[o.format]??n.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${K(n.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${n.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${n.origin}`;default:return"Ugyldig input"}}};function P1(){return{localeError:oM()}}var sM=()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"numara";case"object":{if(Array.isArray(n))return"saf";if(n===null)return"gayb";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return n=>{switch(n.code){case"invalid_type":return`F\xE2sit giren: umulan ${n.expected}, al\u0131nan ${r(n.input)}`;case"invalid_value":return n.values.length===1?`F\xE2sit giren: umulan ${X(n.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Fazla b\xFCy\xFCk: ${n.origin??"value"}, ${o}${n.maximum.toString()} ${s.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${n.origin??"value"}, ${o}${n.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${o}${n.minimum.toString()} ${s.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${n.origin}, ${o}${n.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=n;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${i[o.format]??n.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${n.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${n.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function R1(){return{localeError:sM()}}var aM=()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(n))return"\u0627\u0631\u06D0";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return n=>{switch(n.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${n.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${r(n.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return n.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${X(n.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${K(n.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${n.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${n.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${n.maximum.toString()} \u0648\u064A`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} ${s.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${n.origin} \u0628\u0627\u06CC\u062F ${o}${n.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${i[o.format]??n.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${n.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${n.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${K(n.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${n.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${n.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function U1(){return{localeError:aM()}}var cM=()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"liczba";case"object":{if(Array.isArray(n))return"tablica";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return n=>{switch(n.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${n.expected}, otrzymano ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${X(n.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${n.maximum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${n.minimum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${n.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${i[o.format]??n.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${n.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${n.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${n.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function D1(){return{localeError:cM()}}var uM=()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(n))return"array";if(n===null)return"nulo";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return n=>{switch(n.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${n.expected}, recebido ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Entrada inv\xE1lida: esperado ${X(n.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Muito grande: esperado que ${n.origin??"valor"} tivesse ${o}${n.maximum.toString()} ${s.unit??"elementos"}`:`Muito grande: esperado que ${n.origin??"valor"} fosse ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Muito pequeno: esperado que ${n.origin} tivesse ${o}${n.minimum.toString()} ${s.unit}`:`Muito pequeno: esperado que ${n.origin} fosse ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${i[o.format]??n.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${n.divisor}`;case"unrecognized_keys":return`Chave${n.keys.length>1?"s":""} desconhecida${n.keys.length>1?"s":""}: ${K(n.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${n.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${n.origin}`;default:return"Campo inv\xE1lido"}}};function L1(){return{localeError:uM()}}function z1(t,e,r,i){let n=Math.abs(t),o=n%10,s=n%100;return s>=11&&s<=19?i:o===1?e:o>=2&&o<=4?r:i}var lM=()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${X(n.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);if(s){let a=Number(n.maximum),c=z1(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${n.maximum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);if(s){let a=Number(n.minimum),c=z1(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${n.minimum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${n.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${n.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0438":""}: ${K(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function j1(){return{localeError:lM()}}var dM=()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(n))return"tabela";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return n=>{switch(n.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${n.expected}, prejeto ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${X(n.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Preveliko: pri\u010Dakovano, da bo ${n.origin??"vrednost"} imelo ${o}${n.maximum.toString()} ${s.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${n.origin??"vrednost"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Premajhno: pri\u010Dakovano, da bo ${n.origin} imelo ${o}${n.minimum.toString()} ${s.unit}`:`Premajhno: pri\u010Dakovano, da bo ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${i[o.format]??n.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${n.divisor}`;case"unrecognized_keys":return`Neprepoznan${n.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${K(n.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${n.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${n.origin}`;default:return"Neveljaven vnos"}}};function M1(){return{localeError:dM()}}var fM=()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"antal";case"object":{if(Array.isArray(n))return"lista";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return n=>{switch(n.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${n.expected}, fick ${r(n.input)}`;case"invalid_value":return n.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${X(n.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`F\xF6r stor(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${o}${n.maximum.toString()} ${s.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${n.origin??"v\xE4rdet"} att ha ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`F\xF6r lite(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${o}${n.minimum.toString()} ${s.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${n.origin??"v\xE4rdet"} att ha ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${i[o.format]??n.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${n.divisor}`;case"unrecognized_keys":return`${n.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${K(n.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${n.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${n.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function B1(){return{localeError:fM()}}var pM=()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(n))return"\u0B85\u0BA3\u0BBF";if(n===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X(n.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${K(n.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${n.maximum.toString()} ${s.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${n.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${o}${n.minimum.toString()} ${s.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n.origin} ${o}${n.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${n.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${n.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${n.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function q1(){return{localeError:pM()}}var mM=()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(n))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(n===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return n=>{switch(n.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${n.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${X(n.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",s=e(n.origin);return s?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.maximum.toString()} ${s.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",s=e(n.origin);return s?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.minimum.toString()} ${s.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${n.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${i[o.format]??n.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${n.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${K(n.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${n.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function W1(){return{localeError:mM()}}var hM=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},gM=()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(i){return t[i]??null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return i=>{switch(i.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${i.expected}, al\u0131nan ${hM(i.input)}`;case"invalid_value":return i.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${X(i.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${K(i.values,"|")}`;case"too_big":{let n=i.inclusive?"<=":"<",o=e(i.origin);return o?`\xC7ok b\xFCy\xFCk: beklenen ${i.origin??"de\u011Fer"} ${n}${i.maximum.toString()} ${o.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${i.origin??"de\u011Fer"} ${n}${i.maximum.toString()}`}case"too_small":{let n=i.inclusive?">=":">",o=e(i.origin);return o?`\xC7ok k\xFC\xE7\xFCk: beklenen ${i.origin} ${n}${i.minimum.toString()} ${o.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${i.origin} ${n}${i.minimum.toString()}`}case"invalid_format":{let n=i;return n.format==="starts_with"?`Ge\xE7ersiz metin: "${n.prefix}" ile ba\u015Flamal\u0131`:n.format==="ends_with"?`Ge\xE7ersiz metin: "${n.suffix}" ile bitmeli`:n.format==="includes"?`Ge\xE7ersiz metin: "${n.includes}" i\xE7ermeli`:n.format==="regex"?`Ge\xE7ersiz metin: ${n.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${r[n.format]??i.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${i.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${i.keys.length>1?"lar":""}: ${K(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${i.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function F1(){return{localeError:gM()}}var yM=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(n))return"\u043C\u0430\u0441\u0438\u0432";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${n.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${X(n.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${n.origin} \u0431\u0443\u0434\u0435 ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${n.keys.length>1?"\u0456":""}: ${K(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${n.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function Nm(){return{localeError:yM()}}function V1(){return Nm()}var wM=()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(n))return"\u0622\u0631\u06D2";if(n===null)return"\u0646\u0644";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return n=>{switch(n.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${n.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${r(n.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return n.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${X(n.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${K(n.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${n.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${n.maximum.toString()} ${s.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${n.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${n.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u06D2 ${o}${n.minimum.toString()} ${s.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${n.origin} \u06A9\u0627 ${o}${n.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${n.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${n.keys.length>1?"\u0632":""}: ${K(n.keys,"\u060C ")}`;case"invalid_key":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${n.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function K1(){return{localeError:wM()}}var bM=()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(n))return"m\u1EA3ng";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return n=>{switch(n.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${n.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${X(n.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${n.origin??"gi\xE1 tr\u1ECB"} ${s.verb} ${o}${n.maximum.toString()} ${s.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${n.origin??"gi\xE1 tr\u1ECB"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${s.verb} ${o}${n.minimum.toString()} ${s.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${i[o.format]??n.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${n.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${K(n.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${n.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function H1(){return{localeError:bM()}}var vM=()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(n))return"\u6570\u7EC4";if(n===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return n=>{switch(n.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${n.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${X(n.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${n.origin??"\u503C"} ${o}${n.maximum.toString()} ${s.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${n.origin??"\u503C"} ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${o}${n.minimum.toString()} ${s.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${n.origin} ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${i[o.format]??n.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${n.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${K(n.keys,", ")}`;case"invalid_key":return`${n.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${n.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function J1(){return{localeError:vM()}}var xM=()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"number";case"object":{if(Array.isArray(n))return"array";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return n=>{switch(n.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${n.expected}\uFF0C\u4F46\u6536\u5230 ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${X(n.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${n.origin??"\u503C"} \u61C9\u70BA ${o}${n.maximum.toString()} ${s.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${n.origin??"\u503C"} \u61C9\u70BA ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${o}${n.minimum.toString()} ${s.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${n.origin} \u61C9\u70BA ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${i[o.format]??n.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${n.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${n.keys.length>1?"\u5011":""}\uFF1A${K(n.keys,"\u3001")}`;case"invalid_key":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${n.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function Q1(){return{localeError:xM()}}var SM=()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(n){return t[n]??null}let r=n=>{let o=typeof n;switch(o){case"number":return Number.isNaN(n)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(n))return"akop\u1ECD";if(n===null)return"null";if(Object.getPrototypeOf(n)!==Object.prototype&&n.constructor)return n.constructor.name}}return o},i={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return n=>{switch(n.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${n.expected}, \xE0m\u1ECD\u0300 a r\xED ${r(n.input)}`;case"invalid_value":return n.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${X(n.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${K(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin??"iye"} ${s.verb} ${o}${n.maximum} ${s.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${n.maximum}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${n.origin} ${s.verb} ${o}${n.minimum} ${s.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${n.minimum}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${i[o.format]??n.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${n.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${K(n.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${n.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function Z1(){return{localeError:SM()}}var G1,Em=Symbol("ZodOutput"),_m=Symbol("ZodInput"),Am=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...r){let i=r[0];if(this._map.set(e,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let i={...this.get(r)??{}};delete i.id;let n={...i,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Rl(){return new Am}(G1=globalThis).__zod_globalRegistry??(G1.__zod_globalRegistry=Rl());var br=globalThis.__zod_globalRegistry;function WS(t,e){return new t({type:"string",...te(e)})}function FS(t,e){return new t({type:"string",coerce:!0,...te(e)})}function km(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...te(e)})}function Ul(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...te(e)})}function Tm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...te(e)})}function Im(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...te(e)})}function $m(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...te(e)})}function Cm(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...te(e)})}function Dl(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...te(e)})}function Om(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...te(e)})}function Pm(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...te(e)})}function Rm(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...te(e)})}function Um(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...te(e)})}function Dm(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...te(e)})}function Lm(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...te(e)})}function zm(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...te(e)})}function jm(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...te(e)})}function Mm(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...te(e)})}function VS(t,e){return new t({type:"string",format:"mac",check:"string_format",abort:!1,...te(e)})}function Bm(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...te(e)})}function qm(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...te(e)})}function Wm(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...te(e)})}function Fm(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...te(e)})}function Vm(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...te(e)})}function Km(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...te(e)})}var Hm={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function KS(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...te(e)})}function HS(t,e){return new t({type:"string",format:"date",check:"string_format",...te(e)})}function JS(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...te(e)})}function QS(t,e){return new t({type:"string",format:"duration",check:"string_format",...te(e)})}function ZS(t,e){return new t({type:"number",checks:[],...te(e)})}function GS(t,e){return new t({type:"number",coerce:!0,checks:[],...te(e)})}function YS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...te(e)})}function XS(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float32",...te(e)})}function e0(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"float64",...te(e)})}function t0(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"int32",...te(e)})}function r0(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"uint32",...te(e)})}function n0(t,e){return new t({type:"boolean",...te(e)})}function i0(t,e){return new t({type:"boolean",coerce:!0,...te(e)})}function o0(t,e){return new t({type:"bigint",...te(e)})}function s0(t,e){return new t({type:"bigint",coerce:!0,...te(e)})}function a0(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...te(e)})}function c0(t,e){return new t({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...te(e)})}function u0(t,e){return new t({type:"symbol",...te(e)})}function l0(t,e){return new t({type:"undefined",...te(e)})}function d0(t,e){return new t({type:"null",...te(e)})}function f0(t){return new t({type:"any"})}function p0(t){return new t({type:"unknown"})}function m0(t,e){return new t({type:"never",...te(e)})}function h0(t,e){return new t({type:"void",...te(e)})}function g0(t,e){return new t({type:"date",...te(e)})}function y0(t,e){return new t({type:"date",coerce:!0,...te(e)})}function w0(t,e){return new t({type:"nan",...te(e)})}function Jn(t,e){return new dm({check:"less_than",...te(e),value:t,inclusive:!1})}function Wr(t,e){return new dm({check:"less_than",...te(e),value:t,inclusive:!0})}function Qn(t,e){return new fm({check:"greater_than",...te(e),value:t,inclusive:!1})}function vr(t,e){return new fm({check:"greater_than",...te(e),value:t,inclusive:!0})}function Ll(t){return Qn(0,t)}function zl(t){return Jn(0,t)}function jl(t){return Wr(0,t)}function Ml(t){return vr(0,t)}function ro(t,e){return new mx({check:"multiple_of",...te(e),value:t})}function zo(t,e){return new yx({check:"max_size",...te(e),maximum:t})}function no(t,e){return new wx({check:"min_size",...te(e),minimum:t})}function Ps(t,e){return new bx({check:"size_equals",...te(e),size:t})}function jo(t,e){return new vx({check:"max_length",...te(e),maximum:t})}function _i(t,e){return new xx({check:"min_length",...te(e),minimum:t})}function Mo(t,e){return new Sx({check:"length_equals",...te(e),length:t})}function Rs(t,e){return new Nx({check:"string_format",format:"regex",...te(e),pattern:t})}function Us(t){return new Ax({check:"string_format",format:"lowercase",...te(t)})}function Ds(t){return new Ex({check:"string_format",format:"uppercase",...te(t)})}function Ls(t,e){return new _x({check:"string_format",format:"includes",...te(e),includes:t})}function zs(t,e){return new kx({check:"string_format",format:"starts_with",...te(e),prefix:t})}function js(t,e){return new Tx({check:"string_format",format:"ends_with",...te(e),suffix:t})}function Bl(t,e,r){return new Ix({check:"property",property:t,schema:e,...te(r)})}function Ms(t,e){return new $x({check:"mime_type",mime:t,...te(e)})}function En(t){return new Cx({check:"overwrite",tx:t})}function Bs(t){return En(e=>e.normalize(t))}function qs(){return En(t=>t.trim())}function Ws(){return En(t=>t.toLowerCase())}function Fs(){return En(t=>t.toUpperCase())}function Vs(){return En(t=>$v(t))}function b0(t,e,r){return new t({type:"array",element:e,...te(r)})}function AM(t,e,r){return new t({type:"union",options:e,...te(r)})}function EM(t,e,r){return new t({type:"union",options:e,inclusive:!1,...te(r)})}function _M(t,e,r,i){return new t({type:"union",options:r,discriminator:e,...te(i)})}function kM(t,e,r){return new t({type:"intersection",left:e,right:r})}function TM(t,e,r,i){let n=r instanceof Ee,o=n?i:r,s=n?r:null;return new t({type:"tuple",items:e,rest:s,...te(o)})}function IM(t,e,r,i){return new t({type:"record",keyType:e,valueType:r,...te(i)})}function $M(t,e,r,i){return new t({type:"map",keyType:e,valueType:r,...te(i)})}function CM(t,e,r){return new t({type:"set",valueType:e,...te(r)})}function OM(t,e,r){let i=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new t({type:"enum",entries:i,...te(r)})}function PM(t,e,r){return new t({type:"enum",entries:e,...te(r)})}function RM(t,e,r){return new t({type:"literal",values:Array.isArray(e)?e:[e],...te(r)})}function v0(t,e){return new t({type:"file",...te(e)})}function UM(t,e){return new t({type:"transform",transform:e})}function DM(t,e){return new t({type:"optional",innerType:e})}function LM(t,e){return new t({type:"nullable",innerType:e})}function zM(t,e,r){return new t({type:"default",innerType:e,get defaultValue(){return typeof r=="function"?r():Ov(r)}})}function jM(t,e,r){return new t({type:"nonoptional",innerType:e,...te(r)})}function MM(t,e){return new t({type:"success",innerType:e})}function BM(t,e,r){return new t({type:"catch",innerType:e,catchValue:typeof r=="function"?r:()=>r})}function qM(t,e,r){return new t({type:"pipe",in:e,out:r})}function WM(t,e){return new t({type:"readonly",innerType:e})}function FM(t,e,r){return new t({type:"template_literal",parts:e,...te(r)})}function VM(t,e){return new t({type:"lazy",getter:e})}function KM(t,e){return new t({type:"promise",innerType:e})}function x0(t,e,r){let i=te(r);return i.abort??(i.abort=!0),new t({type:"custom",check:"custom",fn:e,...i})}function S0(t,e,r){return new t({type:"custom",check:"custom",fn:e,...te(r)})}function N0(t){let e=Y1(r=>(r.addIssue=i=>{if(typeof i=="string")r.issues.push(sc(i,r.value,e._zod.def));else{let n=i;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=e),n.continue??(n.continue=!e._zod.def.abort),r.issues.push(sc(n))}},t(r.value,r)));return e}function Y1(t,e){let r=new dt({check:"custom",...te(e)});return r._zod.check=t,r}function A0(t){let e=new dt({check:"describe"});return e._zod.onattach=[r=>{let i=br.get(r)??{};br.add(r,{...i,description:t})}],e._zod.check=()=>{},e}function E0(t){let e=new dt({check:"meta"});return e._zod.onattach=[r=>{let i=br.get(r)??{};br.add(r,{...i,...t})}],e._zod.check=()=>{},e}function _0(t,e){let r=te(e),i=r.truthy??["true","1","yes","on","y","enabled"],n=r.falsy??["false","0","no","off","n","disabled"];r.case!=="sensitive"&&(i=i.map(m=>typeof m=="string"?m.toLowerCase():m),n=n.map(m=>typeof m=="string"?m.toLowerCase():m));let o=new Set(i),s=new Set(n),a=t.Codec??Cl,c=t.Boolean??Il,u=t.String??Os,l=new u({type:"string",error:r.error}),f=new c({type:"boolean",error:r.error}),d=new a({type:"pipe",in:l,out:f,transform:((m,h)=>{let p=m;return r.case!=="sensitive"&&(p=p.toLowerCase()),o.has(p)?!0:s.has(p)?!1:(h.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...s],input:h.value,inst:d,continue:!1}),{})}),reverseTransform:((m,h)=>m===!0?i[0]||"true":n[0]||"false"),error:r.error});return d}function hc(t,e,r,i={}){let n=te(i),o={...te(i),check:"string_format",type:"string",format:e,fn:typeof r=="function"?r:a=>r.test(a),...n};return r instanceof RegExp&&(o.pattern=r),new t(o)}function Bo(t){let e=t?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:t?.metadata??br,target:e,unrepresentable:t?.unrepresentable??"throw",override:t?.override??(()=>{}),io:t?.io??"output",counter:0,seen:new Map,cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0}}function et(t,e,r={path:[],schemaPath:[]}){var i;let n=t._zod.def,o=e.seen.get(t);if(o)return o.count++,r.schemaPath.includes(t)&&(o.cycle=r.path),o.schema;let s={schema:{},count:1,cycle:void 0,path:r.path};e.seen.set(t,s);let a=t._zod.toJSONSchema?.();if(a)s.schema=a;else{let l={...r,schemaPath:[...r.schemaPath,t],path:r.path},f=t._zod.parent;if(f)s.ref=f,et(f,e,l),e.seen.get(f).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,s.schema,l);else{let d=s.schema,m=e.processors[n.type];if(!m)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${n.type}`);m(t,e,d,l)}}let c=e.metadataRegistry.get(t);return c&&Object.assign(s.schema,c),e.io==="input"&&Or(t)&&(delete s.schema.examples,delete s.schema.default),e.io==="input"&&s.schema._prefault&&((i=s.schema).default??(i.default=s.schema._prefault)),delete s.schema._prefault,e.seen.get(t).schema}function qo(t,e){let r=t.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=o=>{let s=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){let l=t.external.registry.get(o[0])?.id,f=t.external.uri??(m=>m);if(l)return{ref:f(l)};let d=o[1].defId??o[1].schema.id??`schema${t.counter++}`;return o[1].defId=d,{defId:d,ref:`${f("__shared")}#/${s}/${d}`}}if(o[1]===r)return{ref:"#"};let c=`#/${s}/`,u=o[1].schema.id??`__schema${t.counter++}`;return{defId:u,ref:c+u}},n=o=>{if(o[1].schema.$ref)return;let s=o[1],{ref:a,defId:c}=i(o);s.def={...s.schema},c&&(s.defId=c);let u=s.schema;for(let l in u)delete u[l];u.$ref=a};if(t.cycles==="throw")for(let o of t.seen.entries()){let s=o[1];if(s.cycle)throw new Error(`Cycle detected: #/${s.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let o of t.seen.entries()){let s=o[1];if(e===o[0]){n(o);continue}if(t.external){let c=t.external.registry.get(o[0])?.id;if(e!==o[0]&&c){n(o);continue}}if(t.metadataRegistry.get(o[0])?.id){n(o);continue}if(s.cycle){n(o);continue}if(s.count>1&&t.reused==="ref"){n(o);continue}}}function Wo(t,e){let r=t.seen.get(e);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");let i=s=>{let a=t.seen.get(s),c=a.def??a.schema,u={...c};if(a.ref===null)return;let l=a.ref;if(a.ref=null,l){i(l);let f=t.seen.get(l).schema;f.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(f)):(Object.assign(c,f),Object.assign(c,u))}a.isParent||t.override({zodSchema:s,jsonSchema:c,path:a.path??[]})};for(let s of[...t.seen.entries()].reverse())i(s[0]);let n={};if(t.target==="draft-2020-12"?n.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?n.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?n.$schema="http://json-schema.org/draft-04/schema#":t.target,t.external?.uri){let s=t.external.registry.get(e)?.id;if(!s)throw new Error("Schema is missing an `id` property");n.$id=t.external.uri(s)}Object.assign(n,r.def??r.schema);let o=t.external?.defs??{};for(let s of t.seen.entries()){let a=s[1];a.def&&a.defId&&(o[a.defId]=a.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?n.$defs=o:n.definitions=o);try{let s=JSON.parse(JSON.stringify(n));return Object.defineProperty(s,"~standard",{value:{...e["~standard"],jsonSchema:{input:gc(e,"input"),output:gc(e,"output")}},enumerable:!1,writable:!1}),s}catch{throw new Error("Error converting schema to JSON.")}}function Or(t,e){let r=e??{seen:new Set};if(r.seen.has(t))return!1;r.seen.add(t);let i=t._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return Or(i.element,r);if(i.type==="set")return Or(i.valueType,r);if(i.type==="lazy")return Or(i.getter(),r);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return Or(i.innerType,r);if(i.type==="intersection")return Or(i.left,r)||Or(i.right,r);if(i.type==="record"||i.type==="map")return Or(i.keyType,r)||Or(i.valueType,r);if(i.type==="pipe")return Or(i.in,r)||Or(i.out,r);if(i.type==="object"){for(let n in i.shape)if(Or(i.shape[n],r))return!0;return!1}if(i.type==="union"){for(let n of i.options)if(Or(n,r))return!0;return!1}if(i.type==="tuple"){for(let n of i.items)if(Or(n,r))return!0;return!!(i.rest&&Or(i.rest,r))}return!1}var k0=(t,e={})=>r=>{let i=Bo({...r,processors:e});return et(t,i),qo(i,t),Wo(i,t)},gc=(t,e)=>r=>{let{libraryOptions:i,target:n}=r??{},o=Bo({...i??{},target:n,io:e,processors:{}});return et(t,o),qo(o,t),Wo(o,t)};var HM={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},T0=(t,e,r,i)=>{let n=r;n.type="string";let{minimum:o,maximum:s,format:a,patterns:c,contentEncoding:u}=t._zod.bag;if(typeof o=="number"&&(n.minLength=o),typeof s=="number"&&(n.maxLength=s),a&&(n.format=HM[a]??a,n.format===""&&delete n.format),u&&(n.contentEncoding=u),c&&c.size>0){let l=[...c];l.length===1?n.pattern=l[0].source:l.length>1&&(n.allOf=[...l.map(f=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:f.source}))])}},I0=(t,e,r,i)=>{let n=r,{minimum:o,maximum:s,format:a,multipleOf:c,exclusiveMaximum:u,exclusiveMinimum:l}=t._zod.bag;typeof a=="string"&&a.includes("int")?n.type="integer":n.type="number",typeof l=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(n.minimum=l,n.exclusiveMinimum=!0):n.exclusiveMinimum=l),typeof o=="number"&&(n.minimum=o,typeof l=="number"&&e.target!=="draft-04"&&(l>=o?delete n.minimum:delete n.exclusiveMinimum)),typeof u=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(n.maximum=u,n.exclusiveMaximum=!0):n.exclusiveMaximum=u),typeof s=="number"&&(n.maximum=s,typeof u=="number"&&e.target!=="draft-04"&&(u<=s?delete n.maximum:delete n.exclusiveMaximum)),typeof c=="number"&&(n.multipleOf=c)},$0=(t,e,r,i)=>{r.type="boolean"},C0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},O0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},P0=(t,e,r,i)=>{e.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},R0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},U0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},D0=(t,e,r,i)=>{r.not={}},L0=(t,e,r,i)=>{},z0=(t,e,r,i)=>{},j0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},M0=(t,e,r,i)=>{let n=t._zod.def,o=vl(n.entries);o.every(s=>typeof s=="number")&&(r.type="number"),o.every(s=>typeof s=="string")&&(r.type="string"),r.enum=o},B0=(t,e,r,i)=>{let n=t._zod.def,o=[];for(let s of n.values)if(s===void 0){if(e.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof s=="bigint"){if(e.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(s))}else o.push(s);if(o.length!==0)if(o.length===1){let s=o[0];r.type=s===null?"null":typeof s,e.target==="draft-04"||e.target==="openapi-3.0"?r.enum=[s]:r.const=s}else o.every(s=>typeof s=="number")&&(r.type="number"),o.every(s=>typeof s=="string")&&(r.type="string"),o.every(s=>typeof s=="boolean")&&(r.type="boolean"),o.every(s=>s===null)&&(r.type="null"),r.enum=o},q0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},W0=(t,e,r,i)=>{let n=r,o=t._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");n.type="string",n.pattern=o.source},F0=(t,e,r,i)=>{let n=r,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:s,maximum:a,mime:c}=t._zod.bag;s!==void 0&&(o.minLength=s),a!==void 0&&(o.maxLength=a),c?c.length===1?(o.contentMediaType=c[0],Object.assign(n,o)):n.anyOf=c.map(u=>({...o,contentMediaType:u})):Object.assign(n,o)},V0=(t,e,r,i)=>{r.type="boolean"},K0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},H0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},J0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Q0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},Z0=(t,e,r,i)=>{if(e.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},G0=(t,e,r,i)=>{let n=r,o=t._zod.def,{minimum:s,maximum:a}=t._zod.bag;typeof s=="number"&&(n.minItems=s),typeof a=="number"&&(n.maxItems=a),n.type="array",n.items=et(o.element,e,{...i,path:[...i.path,"items"]})},Y0=(t,e,r,i)=>{let n=r,o=t._zod.def;n.type="object",n.properties={};let s=o.shape;for(let u in s)n.properties[u]=et(s[u],e,{...i,path:[...i.path,"properties",u]});let a=new Set(Object.keys(s)),c=new Set([...a].filter(u=>{let l=o.shape[u]._zod;return e.io==="input"?l.optin===void 0:l.optout===void 0}));c.size>0&&(n.required=Array.from(c)),o.catchall?._zod.def.type==="never"?n.additionalProperties=!1:o.catchall?o.catchall&&(n.additionalProperties=et(o.catchall,e,{...i,path:[...i.path,"additionalProperties"]})):e.io==="output"&&(n.additionalProperties=!1)},Qm=(t,e,r,i)=>{let n=t._zod.def,o=n.inclusive===!1,s=n.options.map((a,c)=>et(a,e,{...i,path:[...i.path,o?"oneOf":"anyOf",c]}));o?r.oneOf=s:r.anyOf=s},X0=(t,e,r,i)=>{let n=t._zod.def,o=et(n.left,e,{...i,path:[...i.path,"allOf",0]}),s=et(n.right,e,{...i,path:[...i.path,"allOf",1]}),a=u=>"allOf"in u&&Object.keys(u).length===1,c=[...a(o)?o.allOf:[o],...a(s)?s.allOf:[s]];r.allOf=c},eN=(t,e,r,i)=>{let n=r,o=t._zod.def;n.type="array";let s=e.target==="draft-2020-12"?"prefixItems":"items",a=e.target==="draft-2020-12"||e.target==="openapi-3.0"?"items":"additionalItems",c=o.items.map((d,m)=>et(d,e,{...i,path:[...i.path,s,m]})),u=o.rest?et(o.rest,e,{...i,path:[...i.path,a,...e.target==="openapi-3.0"?[o.items.length]:[]]}):null;e.target==="draft-2020-12"?(n.prefixItems=c,u&&(n.items=u)):e.target==="openapi-3.0"?(n.items={anyOf:c},u&&n.items.anyOf.push(u),n.minItems=c.length,u||(n.maxItems=c.length)):(n.items=c,u&&(n.additionalItems=u));let{minimum:l,maximum:f}=t._zod.bag;typeof l=="number"&&(n.minItems=l),typeof f=="number"&&(n.maxItems=f)},tN=(t,e,r,i)=>{let n=r,o=t._zod.def;n.type="object",(e.target==="draft-07"||e.target==="draft-2020-12")&&(n.propertyNames=et(o.keyType,e,{...i,path:[...i.path,"propertyNames"]})),n.additionalProperties=et(o.valueType,e,{...i,path:[...i.path,"additionalProperties"]})},rN=(t,e,r,i)=>{let n=t._zod.def,o=et(n.innerType,e,i),s=e.seen.get(t);e.target==="openapi-3.0"?(s.ref=n.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},nN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType},iN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType,r.default=JSON.parse(JSON.stringify(n.defaultValue))},oN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType,e.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(n.defaultValue)))},sN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType;let s;try{s=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=s},aN=(t,e,r,i)=>{let n=t._zod.def,o=e.io==="input"?n.in._zod.def.type==="transform"?n.out:n.in:n.out;et(o,e,i);let s=e.seen.get(t);s.ref=o},cN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType,r.readOnly=!0},uN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType},lN=(t,e,r,i)=>{let n=t._zod.def;et(n.innerType,e,i);let o=e.seen.get(t);o.ref=n.innerType},dN=(t,e,r,i)=>{let n=t._zod.innerType;et(n,e,i);let o=e.seen.get(t);o.ref=n},Jm={string:T0,number:I0,boolean:$0,bigint:C0,symbol:O0,null:P0,undefined:R0,void:U0,never:D0,any:L0,unknown:z0,date:j0,enum:M0,literal:B0,nan:q0,template_literal:W0,file:F0,success:V0,custom:K0,function:H0,transform:J0,map:Q0,set:Z0,array:G0,object:Y0,union:Qm,intersection:X0,tuple:eN,record:tN,nullable:rN,nonoptional:nN,default:iN,prefault:oN,catch:sN,pipe:aN,readonly:cN,promise:uN,optional:lN,lazy:dN};function ql(t,e){if("_idmap"in t){let i=t,n=Bo({...e,processors:Jm}),o={};for(let c of i._idmap.entries()){let[u,l]=c;et(l,n)}let s={},a={registry:i,uri:e?.uri,defs:o};n.external=a;for(let c of i._idmap.entries()){let[u,l]=c;qo(n,l),s[u]=Wo(n,l)}if(Object.keys(o).length>0){let c=n.target==="draft-2020-12"?"$defs":"definitions";s.__shared={[c]:o}}return{schemas:s}}let r=Bo({...e,processors:Jm});return et(t,r),qo(r,t),Wo(r,t)}var Zm=class{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter(e){this.ctx.counter=e}get seen(){return this.ctx.seen}constructor(e){let r=e?.target??"draft-2020-12";r==="draft-4"&&(r="draft-04"),r==="draft-7"&&(r="draft-07"),this.ctx=Bo({processors:Jm,target:r,...e?.metadata&&{metadata:e.metadata},...e?.unrepresentable&&{unrepresentable:e.unrepresentable},...e?.override&&{override:e.override},...e?.io&&{io:e.io}})}process(e,r={path:[],schemaPath:[]}){return et(e,this.ctx,r)}emit(e,r){r&&(r.cycles&&(this.ctx.cycles=r.cycles),r.reused&&(this.ctx.reused=r.reused),r.external&&(this.ctx.external=r.external)),qo(this.ctx,e);let i=Wo(this.ctx,e),{"~standard":n,...o}=i;return o}};var X1={};var Hl={};ar(Hl,{ZodAny:()=>hh,ZodArray:()=>bh,ZodBase64:()=>ld,ZodBase64URL:()=>dd,ZodBigInt:()=>Ys,ZodBigIntFormat:()=>md,ZodBoolean:()=>Gs,ZodCIDRv4:()=>cd,ZodCIDRv6:()=>ud,ZodCUID:()=>Xl,ZodCUID2:()=>ed,ZodCatch:()=>zh,ZodCodec:()=>xd,ZodCustom:()=>Ac,ZodCustomStringFormat:()=>Qs,ZodDate:()=>xc,ZodDefault:()=>Oh,ZodDiscriminatedUnion:()=>xh,ZodE164:()=>fd,ZodEmail:()=>Zl,ZodEmoji:()=>Gl,ZodEnum:()=>Hs,ZodFile:()=>Ih,ZodFunction:()=>Hh,ZodGUID:()=>yc,ZodIPv4:()=>id,ZodIPv6:()=>sd,ZodIntersection:()=>Sh,ZodJWT:()=>pd,ZodKSUID:()=>nd,ZodLazy:()=>Fh,ZodLiteral:()=>Th,ZodMAC:()=>lh,ZodMap:()=>_h,ZodNaN:()=>Mh,ZodNanoID:()=>Yl,ZodNever:()=>yh,ZodNonOptional:()=>bd,ZodNull:()=>ph,ZodNullable:()=>Ch,ZodNumber:()=>Zs,ZodNumberFormat:()=>Vo,ZodObject:()=>Gn,ZodOptional:()=>io,ZodPipe:()=>vd,ZodPrefault:()=>Rh,ZodPromise:()=>Kh,ZodReadonly:()=>Bh,ZodRecord:()=>Nc,ZodSet:()=>kh,ZodString:()=>Js,ZodStringFormat:()=>tt,ZodSuccess:()=>Lh,ZodSymbol:()=>dh,ZodTemplateLiteral:()=>Wh,ZodTransform:()=>$h,ZodTuple:()=>Ah,ZodType:()=>Ie,ZodULID:()=>td,ZodURL:()=>vc,ZodUUID:()=>Zn,ZodUndefined:()=>fh,ZodUnion:()=>Sc,ZodUnknown:()=>gh,ZodVoid:()=>wh,ZodXID:()=>rd,ZodXor:()=>vh,_ZodString:()=>Ql,_default:()=>Ph,_function:()=>mA,any:()=>Fr,array:()=>fn,base64:()=>PN,base64url:()=>RN,bigint:()=>VN,boolean:()=>Vt,catch:()=>jh,check:()=>hA,cidrv4:()=>CN,cidrv6:()=>ON,codec:()=>dA,cuid:()=>EN,cuid2:()=>_N,custom:()=>gA,date:()=>Ti,describe:()=>yA,discriminatedUnion:()=>eA,e164:()=>UN,email:()=>Rr,emoji:()=>NN,enum:()=>Xs,file:()=>aA,float32:()=>BN,float64:()=>qN,function:()=>mA,guid:()=>gN,hash:()=>MN,hex:()=>jN,hostname:()=>zN,httpUrl:()=>SN,instanceof:()=>bA,int:()=>Jl,int32:()=>WN,int64:()=>KN,intersection:()=>Nh,ipv4:()=>od,ipv6:()=>ad,json:()=>Ec,jwt:()=>DN,keyof:()=>GN,ksuid:()=>IN,lazy:()=>Vh,literal:()=>sA,looseObject:()=>gd,looseRecord:()=>rA,mac:()=>$N,map:()=>nA,meta:()=>wA,nan:()=>lA,nanoid:()=>AN,nativeEnum:()=>oA,never:()=>hd,nonoptional:()=>Dh,null:()=>mh,nullable:()=>wc,nullish:()=>cA,number:()=>dn,object:()=>ke,optional:()=>_n,partialRecord:()=>tA,pipe:()=>bc,prefault:()=>Uh,preprocess:()=>xA,promise:()=>pA,readonly:()=>qh,record:()=>kn,refine:()=>Jh,set:()=>iA,strictObject:()=>YN,string:()=>Y,stringFormat:()=>LN,stringbool:()=>vA,success:()=>uA,superRefine:()=>Qh,symbol:()=>JN,templateLiteral:()=>fA,transform:()=>wd,tuple:()=>Eh,uint32:()=>FN,uint64:()=>HN,ulid:()=>kN,undefined:()=>QN,union:()=>yd,unknown:()=>Fo,url:()=>xN,uuid:()=>yN,uuidv4:()=>wN,uuidv6:()=>bN,uuidv7:()=>vN,void:()=>ZN,xid:()=>TN,xor:()=>XN});var Gm={};ar(Gm,{endsWith:()=>js,gt:()=>Qn,gte:()=>vr,includes:()=>Ls,length:()=>Mo,lowercase:()=>Us,lt:()=>Jn,lte:()=>Wr,maxLength:()=>jo,maxSize:()=>zo,mime:()=>Ms,minLength:()=>_i,minSize:()=>no,multipleOf:()=>ro,negative:()=>zl,nonnegative:()=>Ml,nonpositive:()=>jl,normalize:()=>Bs,overwrite:()=>En,positive:()=>Ll,property:()=>Bl,regex:()=>Rs,size:()=>Ps,slugify:()=>Vs,startsWith:()=>zs,toLowerCase:()=>Ws,toUpperCase:()=>Fs,trim:()=>qs,uppercase:()=>Ds});var Ks={};ar(Ks,{ZodISODate:()=>Fl,ZodISODateTime:()=>Wl,ZodISODuration:()=>Kl,ZodISOTime:()=>Vl,date:()=>pN,datetime:()=>fN,duration:()=>hN,time:()=>mN});var Wl=B("ZodISODateTime",(t,e)=>{Vx.init(t,e),tt.init(t,e)});function fN(t){return KS(Wl,t)}var Fl=B("ZodISODate",(t,e)=>{Kx.init(t,e),tt.init(t,e)});function pN(t){return HS(Fl,t)}var Vl=B("ZodISOTime",(t,e)=>{Hx.init(t,e),tt.init(t,e)});function mN(t){return JS(Vl,t)}var Kl=B("ZodISODuration",(t,e)=>{Jx.init(t,e),tt.init(t,e)});function hN(t){return QS(Kl,t)}var eP=(t,e)=>{El.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>cc(t,r)},flatten:{value:r=>ac(t,r)},addIssue:{value:r=>{t.issues.push(r),t.message=JSON.stringify(t.issues,ic,2)}},addIssues:{value:r=>{t.issues.push(...r),t.message=JSON.stringify(t.issues,ic,2)}},isEmpty:{get(){return t.issues.length===0}}})},tP=B("ZodError",eP),Pr=B("ZodError",eP,{Parent:Error});var Ym=uc(Pr),Xm=lc(Pr),eh=dc(Pr),th=fc(Pr),rh=rm(Pr),nh=nm(Pr),ih=im(Pr),oh=om(Pr),sh=sm(Pr),ah=am(Pr),ch=cm(Pr),uh=um(Pr);var Ie=B("ZodType",(t,e)=>(Ee.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:gc(t,"input"),output:gc(t,"output")}}),t.toJSONSchema=k0(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone(ee.mergeDefs(e,{checks:[...e.checks??[],...r.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),t.clone=(r,i)=>wr(t,r,i),t.brand=()=>t,t.register=((r,i)=>(r.add(t,i),t)),t.parse=(r,i)=>Ym(t,r,i,{callee:t.parse}),t.safeParse=(r,i)=>eh(t,r,i),t.parseAsync=async(r,i)=>Xm(t,r,i,{callee:t.parseAsync}),t.safeParseAsync=async(r,i)=>th(t,r,i),t.spa=t.safeParseAsync,t.encode=(r,i)=>rh(t,r,i),t.decode=(r,i)=>nh(t,r,i),t.encodeAsync=async(r,i)=>ih(t,r,i),t.decodeAsync=async(r,i)=>oh(t,r,i),t.safeEncode=(r,i)=>sh(t,r,i),t.safeDecode=(r,i)=>ah(t,r,i),t.safeEncodeAsync=async(r,i)=>ch(t,r,i),t.safeDecodeAsync=async(r,i)=>uh(t,r,i),t.refine=(r,i)=>t.check(Jh(r,i)),t.superRefine=r=>t.check(Qh(r)),t.overwrite=r=>t.check(En(r)),t.optional=()=>_n(t),t.nullable=()=>wc(t),t.nullish=()=>_n(wc(t)),t.nonoptional=r=>Dh(t,r),t.array=()=>fn(t),t.or=r=>yd([t,r]),t.and=r=>Nh(t,r),t.transform=r=>bc(t,wd(r)),t.default=r=>Ph(t,r),t.prefault=r=>Uh(t,r),t.catch=r=>jh(t,r),t.pipe=r=>bc(t,r),t.readonly=()=>qh(t),t.describe=r=>{let i=t.clone();return br.add(i,{description:r}),i},Object.defineProperty(t,"description",{get(){return br.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return br.get(t);let i=t.clone();return br.add(i,r[0]),i},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Ql=B("_ZodString",(t,e)=>{Os.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>T0(t,i,n,o);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...i)=>t.check(Rs(...i)),t.includes=(...i)=>t.check(Ls(...i)),t.startsWith=(...i)=>t.check(zs(...i)),t.endsWith=(...i)=>t.check(js(...i)),t.min=(...i)=>t.check(_i(...i)),t.max=(...i)=>t.check(jo(...i)),t.length=(...i)=>t.check(Mo(...i)),t.nonempty=(...i)=>t.check(_i(1,...i)),t.lowercase=i=>t.check(Us(i)),t.uppercase=i=>t.check(Ds(i)),t.trim=()=>t.check(qs()),t.normalize=(...i)=>t.check(Bs(...i)),t.toLowerCase=()=>t.check(Ws()),t.toUpperCase=()=>t.check(Fs()),t.slugify=()=>t.check(Vs())}),Js=B("ZodString",(t,e)=>{Os.init(t,e),Ql.init(t,e),t.email=r=>t.check(km(Zl,r)),t.url=r=>t.check(Dl(vc,r)),t.jwt=r=>t.check(Km(pd,r)),t.emoji=r=>t.check(Om(Gl,r)),t.guid=r=>t.check(Ul(yc,r)),t.uuid=r=>t.check(Tm(Zn,r)),t.uuidv4=r=>t.check(Im(Zn,r)),t.uuidv6=r=>t.check($m(Zn,r)),t.uuidv7=r=>t.check(Cm(Zn,r)),t.nanoid=r=>t.check(Pm(Yl,r)),t.guid=r=>t.check(Ul(yc,r)),t.cuid=r=>t.check(Rm(Xl,r)),t.cuid2=r=>t.check(Um(ed,r)),t.ulid=r=>t.check(Dm(td,r)),t.base64=r=>t.check(Wm(ld,r)),t.base64url=r=>t.check(Fm(dd,r)),t.xid=r=>t.check(Lm(rd,r)),t.ksuid=r=>t.check(zm(nd,r)),t.ipv4=r=>t.check(jm(id,r)),t.ipv6=r=>t.check(Mm(sd,r)),t.cidrv4=r=>t.check(Bm(cd,r)),t.cidrv6=r=>t.check(qm(ud,r)),t.e164=r=>t.check(Vm(fd,r)),t.datetime=r=>t.check(fN(r)),t.date=r=>t.check(pN(r)),t.time=r=>t.check(mN(r)),t.duration=r=>t.check(hN(r))});function Y(t){return WS(Js,t)}var tt=B("ZodStringFormat",(t,e)=>{it.init(t,e),Ql.init(t,e)}),Zl=B("ZodEmail",(t,e)=>{Dx.init(t,e),tt.init(t,e)});function Rr(t){return km(Zl,t)}var yc=B("ZodGUID",(t,e)=>{Rx.init(t,e),tt.init(t,e)});function gN(t){return Ul(yc,t)}var Zn=B("ZodUUID",(t,e)=>{Ux.init(t,e),tt.init(t,e)});function yN(t){return Tm(Zn,t)}function wN(t){return Im(Zn,t)}function bN(t){return $m(Zn,t)}function vN(t){return Cm(Zn,t)}var vc=B("ZodURL",(t,e)=>{Lx.init(t,e),tt.init(t,e)});function xN(t){return Dl(vc,t)}function SN(t){return Dl(vc,{protocol:/^https?$/,hostname:ln.domain,...ee.normalizeParams(t)})}var Gl=B("ZodEmoji",(t,e)=>{zx.init(t,e),tt.init(t,e)});function NN(t){return Om(Gl,t)}var Yl=B("ZodNanoID",(t,e)=>{jx.init(t,e),tt.init(t,e)});function AN(t){return Pm(Yl,t)}var Xl=B("ZodCUID",(t,e)=>{Mx.init(t,e),tt.init(t,e)});function EN(t){return Rm(Xl,t)}var ed=B("ZodCUID2",(t,e)=>{Bx.init(t,e),tt.init(t,e)});function _N(t){return Um(ed,t)}var td=B("ZodULID",(t,e)=>{qx.init(t,e),tt.init(t,e)});function kN(t){return Dm(td,t)}var rd=B("ZodXID",(t,e)=>{Wx.init(t,e),tt.init(t,e)});function TN(t){return Lm(rd,t)}var nd=B("ZodKSUID",(t,e)=>{Fx.init(t,e),tt.init(t,e)});function IN(t){return zm(nd,t)}var id=B("ZodIPv4",(t,e)=>{Qx.init(t,e),tt.init(t,e)});function od(t){return jm(id,t)}var lh=B("ZodMAC",(t,e)=>{Gx.init(t,e),tt.init(t,e)});function $N(t){return VS(lh,t)}var sd=B("ZodIPv6",(t,e)=>{Zx.init(t,e),tt.init(t,e)});function ad(t){return Mm(sd,t)}var cd=B("ZodCIDRv4",(t,e)=>{Yx.init(t,e),tt.init(t,e)});function CN(t){return Bm(cd,t)}var ud=B("ZodCIDRv6",(t,e)=>{Xx.init(t,e),tt.init(t,e)});function ON(t){return qm(ud,t)}var ld=B("ZodBase64",(t,e)=>{tS.init(t,e),tt.init(t,e)});function PN(t){return Wm(ld,t)}var dd=B("ZodBase64URL",(t,e)=>{rS.init(t,e),tt.init(t,e)});function RN(t){return Fm(dd,t)}var fd=B("ZodE164",(t,e)=>{nS.init(t,e),tt.init(t,e)});function UN(t){return Vm(fd,t)}var pd=B("ZodJWT",(t,e)=>{iS.init(t,e),tt.init(t,e)});function DN(t){return Km(pd,t)}var Qs=B("ZodCustomStringFormat",(t,e)=>{oS.init(t,e),tt.init(t,e)});function LN(t,e,r={}){return hc(Qs,t,e,r)}function zN(t){return hc(Qs,"hostname",ln.hostname,t)}function jN(t){return hc(Qs,"hex",ln.hex,t)}function MN(t,e){let r=e?.enc??"hex",i=`${t}_${r}`,n=ln[i];if(!n)throw new Error(`Unrecognized hash format: ${i}`);return hc(Qs,i,n,e)}var Zs=B("ZodNumber",(t,e)=>{wm.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>I0(t,i,n,o),t.gt=(i,n)=>t.check(Qn(i,n)),t.gte=(i,n)=>t.check(vr(i,n)),t.min=(i,n)=>t.check(vr(i,n)),t.lt=(i,n)=>t.check(Jn(i,n)),t.lte=(i,n)=>t.check(Wr(i,n)),t.max=(i,n)=>t.check(Wr(i,n)),t.int=i=>t.check(Jl(i)),t.safe=i=>t.check(Jl(i)),t.positive=i=>t.check(Qn(0,i)),t.nonnegative=i=>t.check(vr(0,i)),t.negative=i=>t.check(Jn(0,i)),t.nonpositive=i=>t.check(Wr(0,i)),t.multipleOf=(i,n)=>t.check(ro(i,n)),t.step=(i,n)=>t.check(ro(i,n)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function dn(t){return ZS(Zs,t)}var Vo=B("ZodNumberFormat",(t,e)=>{sS.init(t,e),Zs.init(t,e)});function Jl(t){return YS(Vo,t)}function BN(t){return XS(Vo,t)}function qN(t){return e0(Vo,t)}function WN(t){return t0(Vo,t)}function FN(t){return r0(Vo,t)}var Gs=B("ZodBoolean",(t,e)=>{Il.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>$0(t,r,i,n)});function Vt(t){return n0(Gs,t)}var Ys=B("ZodBigInt",(t,e)=>{bm.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>C0(t,i,n,o),t.gte=(i,n)=>t.check(vr(i,n)),t.min=(i,n)=>t.check(vr(i,n)),t.gt=(i,n)=>t.check(Qn(i,n)),t.gte=(i,n)=>t.check(vr(i,n)),t.min=(i,n)=>t.check(vr(i,n)),t.lt=(i,n)=>t.check(Jn(i,n)),t.lte=(i,n)=>t.check(Wr(i,n)),t.max=(i,n)=>t.check(Wr(i,n)),t.positive=i=>t.check(Qn(BigInt(0),i)),t.negative=i=>t.check(Jn(BigInt(0),i)),t.nonpositive=i=>t.check(Wr(BigInt(0),i)),t.nonnegative=i=>t.check(vr(BigInt(0),i)),t.multipleOf=(i,n)=>t.check(ro(i,n));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});function VN(t){return o0(Ys,t)}var md=B("ZodBigIntFormat",(t,e)=>{aS.init(t,e),Ys.init(t,e)});function KN(t){return a0(md,t)}function HN(t){return c0(md,t)}var dh=B("ZodSymbol",(t,e)=>{cS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>O0(t,r,i,n)});function JN(t){return u0(dh,t)}var fh=B("ZodUndefined",(t,e)=>{uS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>R0(t,r,i,n)});function QN(t){return l0(fh,t)}var ph=B("ZodNull",(t,e)=>{lS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>P0(t,r,i,n)});function mh(t){return d0(ph,t)}var hh=B("ZodAny",(t,e)=>{dS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>L0(t,r,i,n)});function Fr(){return f0(hh)}var gh=B("ZodUnknown",(t,e)=>{fS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>z0(t,r,i,n)});function Fo(){return p0(gh)}var yh=B("ZodNever",(t,e)=>{pS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>D0(t,r,i,n)});function hd(t){return m0(yh,t)}var wh=B("ZodVoid",(t,e)=>{mS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>U0(t,r,i,n)});function ZN(t){return h0(wh,t)}var xc=B("ZodDate",(t,e)=>{hS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>j0(t,i,n,o),t.min=(i,n)=>t.check(vr(i,n)),t.max=(i,n)=>t.check(Wr(i,n));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});function Ti(t){return g0(xc,t)}var bh=B("ZodArray",(t,e)=>{gS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>G0(t,r,i,n),t.element=e.element,t.min=(r,i)=>t.check(_i(r,i)),t.nonempty=r=>t.check(_i(1,r)),t.max=(r,i)=>t.check(jo(r,i)),t.length=(r,i)=>t.check(Mo(r,i)),t.unwrap=()=>t.element});function fn(t,e){return b0(bh,t,e)}function GN(t){let e=t._zod.def.shape;return Xs(Object.keys(e))}var Gn=B("ZodObject",(t,e)=>{yS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Y0(t,r,i,n),ee.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>Xs(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Fo()}),t.loose=()=>t.clone({...t._zod.def,catchall:Fo()}),t.strict=()=>t.clone({...t._zod.def,catchall:hd()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>ee.extend(t,r),t.safeExtend=r=>ee.safeExtend(t,r),t.merge=r=>ee.merge(t,r),t.pick=r=>ee.pick(t,r),t.omit=r=>ee.omit(t,r),t.partial=(...r)=>ee.partial(io,t,r[0]),t.required=(...r)=>ee.required(bd,t,r[0])});function ke(t,e){let r={type:"object",shape:t??{},...ee.normalizeParams(e)};return new Gn(r)}function YN(t,e){return new Gn({type:"object",shape:t,catchall:hd(),...ee.normalizeParams(e)})}function gd(t,e){return new Gn({type:"object",shape:t,catchall:Fo(),...ee.normalizeParams(e)})}var Sc=B("ZodUnion",(t,e)=>{$l.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Qm(t,r,i,n),t.options=e.options});function yd(t,e){return new Sc({type:"union",options:t,...ee.normalizeParams(e)})}var vh=B("ZodXor",(t,e)=>{Sc.init(t,e),wS.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Qm(t,r,i,n),t.options=e.options});function XN(t,e){return new vh({type:"union",options:t,inclusive:!1,...ee.normalizeParams(e)})}var xh=B("ZodDiscriminatedUnion",(t,e)=>{Sc.init(t,e),bS.init(t,e)});function eA(t,e,r){return new xh({type:"union",options:e,discriminator:t,...ee.normalizeParams(r)})}var Sh=B("ZodIntersection",(t,e)=>{vS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>X0(t,r,i,n)});function Nh(t,e){return new Sh({type:"intersection",left:t,right:e})}var Ah=B("ZodTuple",(t,e)=>{vm.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>eN(t,r,i,n),t.rest=r=>t.clone({...t._zod.def,rest:r})});function Eh(t,e,r){let i=e instanceof Ee,n=i?r:e,o=i?e:null;return new Ah({type:"tuple",items:t,rest:o,...ee.normalizeParams(n)})}var Nc=B("ZodRecord",(t,e)=>{xS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>tN(t,r,i,n),t.keyType=e.keyType,t.valueType=e.valueType});function kn(t,e,r){return new Nc({type:"record",keyType:t,valueType:e,...ee.normalizeParams(r)})}function tA(t,e,r){let i=wr(t);return i._zod.values=void 0,new Nc({type:"record",keyType:i,valueType:e,...ee.normalizeParams(r)})}function rA(t,e,r){return new Nc({type:"record",keyType:t,valueType:e,mode:"loose",...ee.normalizeParams(r)})}var _h=B("ZodMap",(t,e)=>{SS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Q0(t,r,i,n),t.keyType=e.keyType,t.valueType=e.valueType});function nA(t,e,r){return new _h({type:"map",keyType:t,valueType:e,...ee.normalizeParams(r)})}var kh=B("ZodSet",(t,e)=>{NS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>Z0(t,r,i,n),t.min=(...r)=>t.check(no(...r)),t.nonempty=r=>t.check(no(1,r)),t.max=(...r)=>t.check(zo(...r)),t.size=(...r)=>t.check(Ps(...r))});function iA(t,e){return new kh({type:"set",valueType:t,...ee.normalizeParams(e)})}var Hs=B("ZodEnum",(t,e)=>{AS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(i,n,o)=>M0(t,i,n,o),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(i,n)=>{let o={};for(let s of i)if(r.has(s))o[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Hs({...e,checks:[],...ee.normalizeParams(n),entries:o})},t.exclude=(i,n)=>{let o={...e.entries};for(let s of i)if(r.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Hs({...e,checks:[],...ee.normalizeParams(n),entries:o})}});function Xs(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(i=>[i,i])):t;return new Hs({type:"enum",entries:r,...ee.normalizeParams(e)})}function oA(t,e){return new Hs({type:"enum",entries:t,...ee.normalizeParams(e)})}var Th=B("ZodLiteral",(t,e)=>{ES.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>B0(t,r,i,n),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function sA(t,e){return new Th({type:"literal",values:Array.isArray(t)?t:[t],...ee.normalizeParams(e)})}var Ih=B("ZodFile",(t,e)=>{_S.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>F0(t,r,i,n),t.min=(r,i)=>t.check(no(r,i)),t.max=(r,i)=>t.check(zo(r,i)),t.mime=(r,i)=>t.check(Ms(Array.isArray(r)?r:[r],i))});function aA(t){return v0(Ih,t)}var $h=B("ZodTransform",(t,e)=>{kS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>J0(t,r,i,n),t._zod.parse=(r,i)=>{if(i.direction==="backward")throw new Oo(t.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(ee.issue(o,r.value,e));else{let s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),r.issues.push(ee.issue(s))}};let n=e.transform(r.value,r);return n instanceof Promise?n.then(o=>(r.value=o,r)):(r.value=n,r)}});function wd(t){return new $h({type:"transform",transform:t})}var io=B("ZodOptional",(t,e)=>{TS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>lN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function _n(t){return new io({type:"optional",innerType:t})}var Ch=B("ZodNullable",(t,e)=>{IS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>rN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function wc(t){return new Ch({type:"nullable",innerType:t})}function cA(t){return _n(wc(t))}var Oh=B("ZodDefault",(t,e)=>{$S.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>iN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Ph(t,e){return new Oh({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():ee.shallowClone(e)}})}var Rh=B("ZodPrefault",(t,e)=>{CS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>oN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function Uh(t,e){return new Rh({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():ee.shallowClone(e)}})}var bd=B("ZodNonOptional",(t,e)=>{OS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>nN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function Dh(t,e){return new bd({type:"nonoptional",innerType:t,...ee.normalizeParams(e)})}var Lh=B("ZodSuccess",(t,e)=>{PS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>V0(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function uA(t){return new Lh({type:"success",innerType:t})}var zh=B("ZodCatch",(t,e)=>{RS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>sN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function jh(t,e){return new zh({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}var Mh=B("ZodNaN",(t,e)=>{US.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>q0(t,r,i,n)});function lA(t){return w0(Mh,t)}var vd=B("ZodPipe",(t,e)=>{DS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>aN(t,r,i,n),t.in=e.in,t.out=e.out});function bc(t,e){return new vd({type:"pipe",in:t,out:e})}var xd=B("ZodCodec",(t,e)=>{vd.init(t,e),Cl.init(t,e)});function dA(t,e,r){return new xd({type:"pipe",in:t,out:e,transform:r.decode,reverseTransform:r.encode})}var Bh=B("ZodReadonly",(t,e)=>{LS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>cN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function qh(t){return new Bh({type:"readonly",innerType:t})}var Wh=B("ZodTemplateLiteral",(t,e)=>{zS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>W0(t,r,i,n)});function fA(t,e){return new Wh({type:"template_literal",parts:t,...ee.normalizeParams(e)})}var Fh=B("ZodLazy",(t,e)=>{BS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>dN(t,r,i,n),t.unwrap=()=>t._zod.def.getter()});function Vh(t){return new Fh({type:"lazy",getter:t})}var Kh=B("ZodPromise",(t,e)=>{MS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>uN(t,r,i,n),t.unwrap=()=>t._zod.def.innerType});function pA(t){return new Kh({type:"promise",innerType:t})}var Hh=B("ZodFunction",(t,e)=>{jS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>H0(t,r,i,n)});function mA(t){return new Hh({type:"function",input:Array.isArray(t?.input)?Eh(t?.input):t?.input??fn(Fo()),output:t?.output??Fo()})}var Ac=B("ZodCustom",(t,e)=>{qS.init(t,e),Ie.init(t,e),t._zod.processJSONSchema=(r,i,n)=>K0(t,r,i,n)});function hA(t){let e=new dt({check:"custom"});return e._zod.check=t,e}function gA(t,e){return x0(Ac,t??(()=>!0),e)}function Jh(t,e={}){return S0(Ac,t,e)}function Qh(t){return N0(t)}var yA=A0,wA=E0;function bA(t,e={error:`Input not instance of ${t.name}`}){let r=new Ac({type:"custom",check:"custom",fn:i=>i instanceof t,abort:!0,...ee.normalizeParams(e)});return r._zod.bag.Class=t,r}var vA=(...t)=>_0({Codec:xd,Boolean:Gs,String:Js},...t);function Ec(t){let e=Vh(()=>yd([Y(t),dn(),Vt(),mh(),fn(e),kn(Y(),e)]));return e}function xA(t,e){return bc(wd(t),e)}var rP={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function nP(t){$t({customError:t})}function iP(){return $t().customError}var Zh;Zh||(Zh={});var ae={...Hl,...Gm,iso:Ks};function ZM(t,e){let r=t.$schema;return r==="https://json-schema.org/draft/2020-12/schema"?"draft-2020-12":r==="http://json-schema.org/draft-07/schema#"?"draft-7":r==="http://json-schema.org/draft-04/schema#"?"draft-4":e??"draft-2020-12"}function GM(t,e){if(!t.startsWith("#"))throw new Error("External $ref is not supported, only local refs (#/...) are allowed");let r=t.slice(1).split("/").filter(Boolean);if(r.length===0)return e.rootSchema;let i=e.version==="draft-2020-12"?"$defs":"definitions";if(r[0]===i){let n=r[1];if(!n||!e.defs[n])throw new Error(`Reference not found: ${t}`);return e.defs[n]}throw new Error(`Reference not found: ${t}`)}function oP(t,e){if(t.not!==void 0){if(typeof t.not=="object"&&Object.keys(t.not).length===0)return ae.never();throw new Error("not is not supported in Zod (except { not: {} } for never)")}if(t.unevaluatedItems!==void 0)throw new Error("unevaluatedItems is not supported");if(t.unevaluatedProperties!==void 0)throw new Error("unevaluatedProperties is not supported");if(t.if!==void 0||t.then!==void 0||t.else!==void 0)throw new Error("Conditional schemas (if/then/else) are not supported");if(t.dependentSchemas!==void 0||t.dependentRequired!==void 0)throw new Error("dependentSchemas and dependentRequired are not supported");if(t.$ref){let n=t.$ref;if(e.refs.has(n))return e.refs.get(n);if(e.processing.has(n))return ae.lazy(()=>{if(!e.refs.has(n))throw new Error(`Circular reference not resolved: ${n}`);return e.refs.get(n)});e.processing.add(n);let o=GM(n,e),s=xr(o,e);return e.refs.set(n,s),e.processing.delete(n),s}if(t.enum!==void 0){let n=t.enum;if(e.version==="openapi-3.0"&&t.nullable===!0&&n.length===1&&n[0]===null)return ae.null();if(n.length===0)return ae.never();if(n.length===1)return ae.literal(n[0]);if(n.every(s=>typeof s=="string"))return ae.enum(n);let o=n.map(s=>ae.literal(s));return o.length<2?o[0]:ae.union([o[0],o[1],...o.slice(2)])}if(t.const!==void 0)return ae.literal(t.const);let r=t.type;if(Array.isArray(r)){let n=r.map(o=>{let s={...t,type:o};return oP(s,e)});return n.length===0?ae.never():n.length===1?n[0]:ae.union(n)}if(!r)return ae.any();let i;switch(r){case"string":{let n=ae.string();if(t.format){let o=t.format;o==="email"?n=n.check(ae.email()):o==="uri"||o==="uri-reference"?n=n.check(ae.url()):o==="uuid"||o==="guid"?n=n.check(ae.uuid()):o==="date-time"?n=n.check(ae.iso.datetime()):o==="date"?n=n.check(ae.iso.date()):o==="time"?n=n.check(ae.iso.time()):o==="duration"?n=n.check(ae.iso.duration()):o==="ipv4"?n=n.check(ae.ipv4()):o==="ipv6"?n=n.check(ae.ipv6()):o==="mac"?n=n.check(ae.mac()):o==="cidr"?n=n.check(ae.cidrv4()):o==="cidr-v6"?n=n.check(ae.cidrv6()):o==="base64"?n=n.check(ae.base64()):o==="base64url"?n=n.check(ae.base64url()):o==="e164"?n=n.check(ae.e164()):o==="jwt"?n=n.check(ae.jwt()):o==="emoji"?n=n.check(ae.emoji()):o==="nanoid"?n=n.check(ae.nanoid()):o==="cuid"?n=n.check(ae.cuid()):o==="cuid2"?n=n.check(ae.cuid2()):o==="ulid"?n=n.check(ae.ulid()):o==="xid"?n=n.check(ae.xid()):o==="ksuid"&&(n=n.check(ae.ksuid()))}typeof t.minLength=="number"&&(n=n.min(t.minLength)),typeof t.maxLength=="number"&&(n=n.max(t.maxLength)),t.pattern&&(n=n.regex(new RegExp(t.pattern))),i=n;break}case"number":case"integer":{let n=r==="integer"?ae.number().int():ae.number();typeof t.minimum=="number"&&(n=n.min(t.minimum)),typeof t.maximum=="number"&&(n=n.max(t.maximum)),typeof t.exclusiveMinimum=="number"?n=n.gt(t.exclusiveMinimum):t.exclusiveMinimum===!0&&typeof t.minimum=="number"&&(n=n.gt(t.minimum)),typeof t.exclusiveMaximum=="number"?n=n.lt(t.exclusiveMaximum):t.exclusiveMaximum===!0&&typeof t.maximum=="number"&&(n=n.lt(t.maximum)),typeof t.multipleOf=="number"&&(n=n.multipleOf(t.multipleOf)),i=n;break}case"boolean":{i=ae.boolean();break}case"null":{i=ae.null();break}case"object":{let n={},o=t.properties||{},s=new Set(t.required||[]);for(let[c,u]of Object.entries(o)){let l=xr(u,e);n[c]=s.has(c)?l:l.optional()}if(t.propertyNames){let c=xr(t.propertyNames,e),u=t.additionalProperties&&typeof t.additionalProperties=="object"?xr(t.additionalProperties,e):ae.any();if(Object.keys(n).length===0){i=ae.record(c,u);break}let l=ae.object(n).passthrough(),f=ae.looseRecord(c,u);i=ae.intersection(l,f);break}if(t.patternProperties){let c=t.patternProperties,u=Object.keys(c),l=[];for(let d of u){let m=xr(c[d],e),h=ae.string().regex(new RegExp(d));l.push(ae.looseRecord(h,m))}let f=[];if(Object.keys(n).length>0&&f.push(ae.object(n).passthrough()),f.push(...l),f.length===0)i=ae.object({}).passthrough();else if(f.length===1)i=f[0];else{let d=ae.intersection(f[0],f[1]);for(let m=2;m<f.length;m++)d=ae.intersection(d,f[m]);i=d}break}let a=ae.object(n);t.additionalProperties===!1?i=a.strict():typeof t.additionalProperties=="object"?i=a.catchall(xr(t.additionalProperties,e)):i=a.passthrough();break}case"array":{let n=t.prefixItems,o=t.items;if(n&&Array.isArray(n)){let s=n.map(c=>xr(c,e)),a=o&&typeof o=="object"&&!Array.isArray(o)?xr(o,e):void 0;a?i=ae.tuple(s).rest(a):i=ae.tuple(s),typeof t.minItems=="number"&&(i=i.check(ae.minLength(t.minItems))),typeof t.maxItems=="number"&&(i=i.check(ae.maxLength(t.maxItems)))}else if(Array.isArray(o)){let s=o.map(c=>xr(c,e)),a=t.additionalItems&&typeof t.additionalItems=="object"?xr(t.additionalItems,e):void 0;a?i=ae.tuple(s).rest(a):i=ae.tuple(s),typeof t.minItems=="number"&&(i=i.check(ae.minLength(t.minItems))),typeof t.maxItems=="number"&&(i=i.check(ae.maxLength(t.maxItems)))}else if(o!==void 0){let s=xr(o,e),a=ae.array(s);typeof t.minItems=="number"&&(a=a.min(t.minItems)),typeof t.maxItems=="number"&&(a=a.max(t.maxItems)),i=a}else i=ae.array(ae.any());break}default:throw new Error(`Unsupported type: ${r}`)}return t.description&&(i=i.describe(t.description)),t.default!==void 0&&(i=i.default(t.default)),i}function xr(t,e){if(typeof t=="boolean")return t?ae.any():ae.never();let r=oP(t,e),i=t.type||t.enum!==void 0||t.const!==void 0;if(t.anyOf&&Array.isArray(t.anyOf)){let n=t.anyOf.map(s=>xr(s,e)),o=ae.union(n);r=i?ae.intersection(r,o):o}if(t.oneOf&&Array.isArray(t.oneOf)){let n=t.oneOf.map(s=>xr(s,e)),o=ae.xor(n);r=i?ae.intersection(r,o):o}if(t.allOf&&Array.isArray(t.allOf))if(t.allOf.length===0)r=i?r:ae.any();else{let n=i?r:xr(t.allOf[0],e),o=i?0:1;for(let s=o;s<t.allOf.length;s++)n=ae.intersection(n,xr(t.allOf[s],e));r=n}return t.nullable===!0&&e.version==="openapi-3.0"&&(r=ae.nullable(r)),t.readOnly===!0&&(r=ae.readonly(r)),r}function SA(t,e){if(typeof t=="boolean")return t?ae.any():ae.never();let r=ZM(t,e?.defaultTarget),i=t.$defs||t.definitions||{};return xr(t,{version:r,defs:i,refs:new Map,processing:new Set,rootSchema:t})}var Tn={};ar(Tn,{bigint:()=>tB,boolean:()=>eB,date:()=>rB,number:()=>XM,string:()=>YM});function YM(t){return FS(Js,t)}function XM(t){return GS(Zs,t)}function eB(t){return i0(Gs,t)}function tB(t){return s0(Ys,t)}function rB(t){return y0(xc,t)}$t(xm());var nB=pe;function iB(){let t=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");return t===void 0?Object.isExtensible(Error):Object.prototype.hasOwnProperty.call(t,"writable")?t.writable:t.set!==void 0}function sP(t){let e=t.split(`
    at `);return e.length<=1?t:(e.splice(1,1),e.join(`
    at `))}function aP(t,e){class r extends t{#e;constructor(...n){if(iB()){let s=Error.stackTraceLimit;Error.stackTraceLimit=0,super(...n),Error.stackTraceLimit=s}else super(...n);let o=new Error().stack;o&&(this.#e=sP(o.replace(/^Error/,this.name)))}get errorStack(){return this.#e}}return Object.defineProperty(r.prototype,"constructor",{get(){return e},enumerable:!1,configurable:!0}),r}var cP={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},uP=class extends Error{constructor(t="INTERNAL_SERVER_ERROR",e=void 0,r={},i=typeof t=="number"?t:cP[t]){super(e?.message,e?.cause?{cause:e.cause}:void 0),this.status=t,this.body=e,this.headers=r,this.statusCode=i,this.name="APIError",this.status=t,this.headers=r,this.statusCode=i,this.body=e?{code:e?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...e}:void 0}},Sd=class extends uP{constructor(t,e){super(400,{message:t,code:"VALIDATION_ERROR"}),this.message=t,this.issues=e,this.issues=e}},Gh=class extends Error{constructor(t){super(t),this.name="BetterCallError"}},V=aP(uP,Error);var oB=/^application\/([a-z0-9.+-]*\+)?json/i;async function lP(t,e){let r=t.headers.get("content-type")||"",i=r.toLowerCase();if(t.body){if(e&&e.length>0&&!e.some(n=>{let o=i.split(";")[0].trim(),s=n.toLowerCase().trim();return o===s||o.includes(s)}))throw i?new V(415,{message:`Content-Type "${r}" is not allowed. Allowed types: ${e.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"}):new V(415,{message:`Content-Type is required. Allowed types: ${e.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});if(oB.test(i))return await t.json();if(i.includes("application/x-www-form-urlencoded")){let n=await t.formData(),o={};return n.forEach((s,a)=>{o[a]=s.toString()}),o}if(i.includes("multipart/form-data")){let n=await t.formData(),o={};return n.forEach((s,a)=>{o[a]=s}),o}return i.includes("text/plain")?await t.text():i.includes("application/octet-stream")?await t.arrayBuffer():i.includes("application/pdf")||i.includes("image/")||i.includes("video/")?await t.blob():i.includes("application/stream")||t.body instanceof ReadableStream?t.body:await t.text()}}function ea(t){return t instanceof V||t?.name==="APIError"}function dP(t){try{return t.includes("%")?decodeURIComponent(t):t}catch{return t}}async function fP(t){try{return{data:await t,error:null}}catch(e){return{data:null,error:e}}}function sB(t){if(t===void 0)return!1;let e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}function aB(t,e,r){let i=0,n=new WeakMap;return JSON.stringify(t,(s,a)=>{if(typeof a=="bigint")return a.toString();if(typeof a=="object"&&a!==null){if(n.has(a))return`[Circular ref-${n.get(a)}]`;n.set(a,i++)}return e?e(s,a):a},r)}function cB(t){return!t||typeof t!="object"?!1:"_flag"in t&&t._flag==="json"}function Yn(t,e){if(t instanceof Response)return e?.headers instanceof Headers&&e.headers.forEach((n,o)=>{t.headers.set(o,n)}),t;if(cB(t)){let n=t.body,o=t.routerResponse;if(o instanceof Response)return o;let s=new Headers;if(o?.headers){let a=new Headers(o.headers);for(let[c,u]of a.entries())a.set(c,u)}if(t.headers)for(let[a,c]of new Headers(t.headers).entries())s.set(a,c);if(e?.headers)for(let[a,c]of new Headers(e.headers).entries())s.set(a,c);return s.set("Content-Type","application/json"),new Response(JSON.stringify(n),{...o,headers:s,status:t.status??e?.status??o?.status,statusText:e?.statusText??o?.statusText})}if(ea(t))return Yn(t.body,{status:e?.status??t.statusCode,statusText:t.status.toString(),headers:e?.headers||t.headers});let r=t,i=new Headers(e?.headers);return t?typeof t=="string"?(r=t,i.set("Content-Type","text/plain")):t instanceof ArrayBuffer||ArrayBuffer.isView(t)?(r=t,i.set("Content-Type","application/octet-stream")):t instanceof Blob?(r=t,i.set("Content-Type",t.type||"application/octet-stream")):t instanceof FormData?r=t:t instanceof URLSearchParams?(r=t,i.set("Content-Type","application/x-www-form-urlencoded")):t instanceof ReadableStream?(r=t,i.set("Content-Type","application/octet-stream")):sB(t)&&(r=aB(t),i.set("Content-Type","application/json")):(t===null&&(r=JSON.stringify(null)),i.set("content-type","application/json")),new Response(r,{...e,headers:i})}var NA={name:"HMAC",hash:"SHA-256"},AA=async t=>{let e=typeof t=="string"?new TextEncoder().encode(t):t;return await Kn().importKey("raw",e,NA,!1,["sign","verify"])},pP=async(t,e,r)=>{try{let i=atob(t),n=new Uint8Array(i.length);for(let o=0,s=i.length;o<s;o++)n[o]=i.charCodeAt(o);return await Kn().verify(NA,r,n,new TextEncoder().encode(e))}catch{return!1}},uB=async(t,e)=>{let r=await AA(e),i=await Kn().sign(NA.name,r,new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(i)))},mP=async(t,e)=>{let r=await uB(t,e);return t=`${t}.${r}`,t=encodeURIComponent(t),t};var Yh=(t,e)=>{let r=t;if(e)if(e==="secure")r="__Secure-"+t;else if(e==="host")r="__Host-"+t;else return;return r};function EA(t){if(typeof t!="string")throw new TypeError("argument str must be a string");let e=new Map,r=0;for(;r<t.length;){let i=t.indexOf("=",r);if(i===-1)break;let n=t.indexOf(";",r);if(n===-1)n=t.length;else if(n<i){r=t.lastIndexOf(";",i-1)+1;continue}let o=t.slice(r,i).trim();if(!e.has(o)){let s=t.slice(i+1,n).trim();s.codePointAt(0)===34&&(s=s.slice(1,-1)),e.set(o,dP(s))}r=n+1}return e}var hP=(t,e,r={})=>{let i;if(r?.prefix==="secure"?i=`${`__Secure-${t}`}=${e}`:r?.prefix==="host"?i=`${`__Host-${t}`}=${e}`:i=`${t}=${e}`,t.startsWith("__Secure-")&&!r.secure&&(r.secure=!0),t.startsWith("__Host-")&&(r.secure||(r.secure=!0),r.path!=="/"&&(r.path="/"),r.domain&&(r.domain=void 0)),r&&typeof r.maxAge=="number"&&r.maxAge>=0){if(r.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");i+=`; Max-Age=${Math.floor(r.maxAge)}`}if(r.domain&&r.prefix!=="host"&&(i+=`; Domain=${r.domain}`),r.path&&(i+=`; Path=${r.path}`),r.expires){if(r.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");i+=`; Expires=${r.expires.toUTCString()}`}return r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite&&(i+=`; SameSite=${r.sameSite.charAt(0).toUpperCase()+r.sameSite.slice(1)}`),r.partitioned&&(r.secure||(r.secure=!0),i+="; Partitioned"),i},_A=(t,e,r)=>(e=encodeURIComponent(e),hP(t,e,r)),kA=async(t,e,r,i)=>(e=await mP(e,r),hP(t,e,i));async function yP(t,e={}){let r={body:e.body,query:e.query};if(t.body){let i=await t.body["~standard"].validate(e.body);if(i.issues)return{data:null,error:gP(i.issues,"body")};r.body=i.value}if(t.query){let i=await t.query["~standard"].validate(e.query);if(i.issues)return{data:null,error:gP(i.issues,"query")};r.query=i.value}return t.requireHeaders&&!e.headers?{data:null,error:{message:"Headers is required",issues:[]}}:t.requireRequest&&!e.request?{data:null,error:{message:"Request is required",issues:[]}}:{data:r,error:null}}function gP(t,e){return{message:t.map(r=>`[${r.path?.length?`${e}.`+r.path.map(i=>typeof i=="object"?i.key:i).join("."):e}] ${r.message}`).join("; "),issues:t}}var Nd=async(t,{options:e,path:r})=>{let i=new Headers,n,{data:o,error:s}=await yP(e,t);if(s)throw new Sd(s.message,s.issues);let a="headers"in t?t.headers instanceof Headers?t.headers:new Headers(t.headers):"request"in t&&t.request instanceof Request?t.request.headers:null,c=a?.get("cookie"),u=c?EA(c):void 0,l={...t,body:o.body,query:o.query,path:t.path||r||"virtual:",context:"context"in t&&t.context?t.context:{},returned:void 0,headers:t?.headers,request:t?.request,params:"params"in t?t.params:void 0,method:t.method??(Array.isArray(e.method)?e.method[0]:e.method==="*"?"GET":e.method),setHeader:(f,d)=>{i.set(f,d)},getHeader:f=>a?a.get(f):null,getCookie:(f,d)=>{let m=Yh(f,d);return m&&u?.get(m)||null},getSignedCookie:async(f,d,m)=>{let h=Yh(f,m);if(!h)return null;let p=u?.get(h);if(!p)return null;let y=p.lastIndexOf(".");if(y<1)return null;let b=p.substring(0,y),N=p.substring(y+1);return N.length!==44||!N.endsWith("=")?null:await pP(N,b,await AA(d))?b:!1},setCookie:(f,d,m)=>{let h=_A(f,d,m);return i.append("set-cookie",h),h},setSignedCookie:async(f,d,m,h)=>{let p=await kA(f,d,m,h);return i.append("set-cookie",p),p},redirect:f=>(i.set("location",f),new V("FOUND",void 0,i)),error:(f,d,m)=>new V(f,d,m),setStatus:f=>{n=f},json:(f,d)=>t.asResponse?{body:d?.body||f,routerResponse:d,_flag:"json"}:f,responseHeaders:i,get responseStatus(){return n}};for(let f of e.use||[]){let d=await f({...l,returnHeaders:!0,asResponse:!1});d.response&&Object.assign(l.context,d.response),d.headers&&d.headers.forEach((m,h)=>{l.responseHeaders.set(h,m)})}return l};function Ko(t,e,r){let i=typeof t=="string"?t:void 0,n=typeof e=="object"?e:t,o=typeof e=="function"?e:r;if((n.method==="GET"||n.method==="HEAD")&&n.body)throw new Gh("Body is not allowed with GET or HEAD methods");if(i&&/\/{2,}/.test(i))throw new Gh("Path cannot contain consecutive slashes");let s=async(...a)=>{let c=a[0]||{},{data:u,error:l}=await fP(Nd(c,{options:n,path:i}));if(l)throw l instanceof Sd?(n.onValidationError&&await n.onValidationError({message:l.message,issues:l.issues}),new V(400,{message:l.message,code:"VALIDATION_ERROR"})):l;let f=await o(u).catch(async h=>{if(ea(h)){let p=n.onAPIError;if(p&&await p(h),c.asResponse)return h}throw h}),d=u.responseHeaders,m=u.responseStatus;return c.asResponse?Yn(f,{headers:d,status:m}):c.returnHeaders?c.returnStatus?{headers:d,response:f,status:m}:{headers:d,response:f}:c.returnStatus?{response:f,status:m}:f};return s.options=n,s.path=i,s}Ko.create=t=>(e,r,i)=>Ko(e,{...r,use:[...r?.use||[],...t?.use||[]]},i);function Ho(t,e){let r=async i=>{let n=i,o=typeof t=="function"?t:e,s=await Nd(n,{options:typeof t=="function"?{}:t,path:"/"});if(!o)throw new Error("handler must be defined");let a=await o(s),c=s.responseHeaders;return n.returnHeaders?{headers:c,response:a}:a};return r.options=typeof t=="function"?{}:t,r}Ho.create=t=>{function e(r,i){if(typeof r=="function")return Ho({use:t?.use},r);if(!i)throw new Error("Middleware handler is required");return Ho({...r,method:"*",use:[...t?.use||[],...r.use||[]]},i)}return e};var TA={};function vP(t){switch(t.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function wP(t){let e=[];return t.metadata?.openapi?.parameters?(e.push(...t.metadata.openapi.parameters),e):(t.query instanceof Gn&&Object.entries(t.query.shape).forEach(([r,i])=>{i instanceof Gn&&e.push({name:r,in:"query",schema:{type:vP(i),..."minLength"in i&&i.minLength?{minLength:i.minLength}:{},description:i.description}})}),e)}function lB(t){if(t.metadata?.openapi?.requestBody)return t.metadata.openapi.requestBody;if(t.body&&(t.body instanceof Gn||t.body instanceof io)){let e=t.body.shape;if(!e)return;let r={},i=[];return Object.entries(e).forEach(([n,o])=>{o instanceof Gn&&(r[n]={type:vP(o),description:o.description},o instanceof io||i.push(n))}),{required:t.body instanceof io?!1:!!t.body,content:{"application/json":{schema:{type:"object",properties:r,required:i}}}}}}function bP(t){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...t}}async function IA(t,e){let r={schemas:{}};return Object.entries(t).forEach(([i,n])=>{let o=n.options;if(!(!n.path||o.metadata?.SERVER_ONLY)&&(o.method==="GET"&&(TA[n.path]={get:{tags:["Default",...o.metadata?.openapi?.tags||[]],description:o.metadata?.openapi?.description,operationId:o.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:wP(o),responses:bP(o.metadata?.openapi?.responses)}}),o.method==="POST")){let s=lB(o);TA[n.path]={post:{tags:["Default",...o.metadata?.openapi?.tags||[]],description:o.metadata?.openapi?.description,operationId:o.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:wP(o),...s?{requestBody:s}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:bP(o.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:r,security:[{apiKeyCookie:[]}],servers:[{url:e?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:TA}}var $A=(t,e)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(t)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${e?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(e.logo)}`:void 0} ,
	   	theme: ${e?.theme||"saturn"},
        metaData: {
			title: ${e?.title||"Open API Reference"},
			description: ${e?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`;var Xh=(()=>{let t=function(){};return t.prototype=Object.create(null),Object.freeze(t.prototype),t})();function PA(){return{root:{key:""},static:new Xh}}function RA(t){let[e,...r]=t.split("/");return r[r.length-1]===""?r.slice(0,-1):r}function xP(t,e){let r=new Xh;for(let[i,n]of e){let o=i<0?t.slice(-(i+1)).join("/"):t[i];if(typeof n=="string")r[n]=o;else{let s=o.match(n);if(s)for(let a in s.groups)r[a]=s.groups[a]}}return r}function UA(t,e="",r,i){e=e.toUpperCase(),r.charCodeAt(0)!==47&&(r=`/${r}`),r=r.replace(/\\:/g,"%3A");let n=RA(r),o=t.root,s=0,a=[],c=[];for(let l=0;l<n.length;l++){let f=n[l];if(f.startsWith("**")){o.wildcard||(o.wildcard={key:"**"}),o=o.wildcard,a.push([-(l+1),f.split(":")[1]||"_",f.length===2]);break}if(f==="*"||f.includes(":")){if(o.param||(o.param={key:"*"}),o=o.param,f==="*")a.push([l,`_${s++}`,!0]);else if(f.includes(":",1)){let m=dB(f);c[l]=m,o.hasRegexParam=!0,a.push([l,m,!1])}else a.push([l,f.slice(1),!1]);continue}f==="\\*"?f=n[l]="*":f==="\\*\\*"&&(f=n[l]="**");let d=o.static?.[f];if(d)o=d;else{let m={key:f};o.static||(o.static=new Xh),o.static[f]=m,o=m}}let u=a.length>0;o.methods||(o.methods=new Xh),o.methods[e]??=[],o.methods[e].push({data:i||null,paramsRegexp:c,paramsMap:u?a:void 0}),u||(t.static["/"+n.join("/")]=o)}function dB(t){let e=t.replace(/:(\w+)/g,(r,i)=>`(?<${i}>[^/]+)`).replace(/\./g,"\\.");return new RegExp(`^${e}$`)}function SP(t,e="",r,i){r.charCodeAt(r.length-1)===47&&(r=r.slice(0,-1));let n=t.static[r];if(n&&n.methods){let a=n.methods[e]||n.methods[""];if(a!==void 0)return a[0]}let o=RA(r),s=CA(t,t.root,e,o,0)?.[0];if(s!==void 0)return i?.params===!1?s:{data:s.data,params:s.paramsMap?xP(o,s.paramsMap):void 0}}function CA(t,e,r,i,n){if(n===i.length){if(e.methods){let s=e.methods[r]||e.methods[""];if(s)return s}if(e.param&&e.param.methods){let s=e.param.methods[r]||e.param.methods[""];if(s){let a=s[0].paramsMap;if(a?.[a?.length-1]?.[2])return s}}if(e.wildcard&&e.wildcard.methods){let s=e.wildcard.methods[r]||e.wildcard.methods[""];if(s){let a=s[0].paramsMap;if(a?.[a?.length-1]?.[2])return s}}return}let o=i[n];if(e.static){let s=e.static[o];if(s){let a=CA(t,s,r,i,n+1);if(a)return a}}if(e.param){let s=CA(t,e.param,r,i,n+1);if(s){if(e.param.hasRegexParam){let a=s.find(c=>c.paramsRegexp[n]?.test(o))||s.find(c=>!c.paramsRegexp[n]);return a?[a]:void 0}return s}}if(e.wildcard&&e.wildcard.methods)return e.wildcard.methods[r]||e.wildcard.methods[""]}function NP(t,e="",r,i){r.charCodeAt(r.length-1)===47&&(r=r.slice(0,-1));let n=RA(r),o=OA(t,t.root,e,n,0);return i?.params===!1?o:o.map(s=>({data:s.data,params:s.paramsMap?xP(n,s.paramsMap):void 0}))}function OA(t,e,r,i,n,o=[]){let s=i[n];if(e.wildcard&&e.wildcard.methods){let c=e.wildcard.methods[r]||e.wildcard.methods[""];c&&o.push(...c)}if(e.param&&(OA(t,e.param,r,i,n+1,o),n===i.length&&e.param.methods)){let c=e.param.methods[r]||e.param.methods[""];if(c){let u=c[0].paramsMap;u?.[u?.length-1]?.[2]&&o.push(...c)}}let a=e.static?.[s];if(a&&OA(t,a,r,i,n+1,o),n===i.length&&e.methods){let c=e.methods[r]||e.methods[""];c&&o.push(...c)}return o}var DA=(t,e)=>{if(!e?.openapi?.disabled){let o={path:"/api/reference",...e?.openapi};t.openapi=Ko(o.path,{method:"GET"},async s=>{let a=await IA(t);return new Response($A(a,o.scalar),{headers:{"Content-Type":"text/html"}})})}let r=PA(),i=PA();for(let o of Object.values(t)){if(!o.options||!o.path||o.options?.metadata?.SERVER_ONLY)continue;let s=Array.isArray(o.options?.method)?o.options.method:[o.options?.method];for(let a of s)UA(r,a,o.path,o)}if(e?.routerMiddleware?.length)for(let{path:o,middleware:s}of e.routerMiddleware)UA(i,"*",o,s);let n=async o=>{let s=new URL(o.url),a=s.pathname,c=e?.basePath&&e.basePath!=="/"?a.split(e.basePath).reduce((d,m,h)=>(h!==0&&(h>1?d.push(`${e.basePath}${m}`):d.push(m)),d),[]).join(""):s.pathname;if(!c?.length)return new Response(null,{status:404,statusText:"Not Found"});if(/\/{2,}/.test(c))return new Response(null,{status:404,statusText:"Not Found"});let u=SP(r,o.method,c);if(c.endsWith("/")!==u?.data?.path?.endsWith("/")&&!e?.skipTrailingSlashes)return new Response(null,{status:404,statusText:"Not Found"});if(!u?.data)return new Response(null,{status:404,statusText:"Not Found"});let l={};s.searchParams.forEach((d,m)=>{m in l?Array.isArray(l[m])?l[m].push(d):l[m]=[l[m],d]:l[m]=d});let f=u.data;try{let d=f.options.metadata?.allowedMediaTypes||e?.allowedMediaTypes,m={path:c,method:o.method,headers:o.headers,params:u.params?JSON.parse(JSON.stringify(u.params)):{},request:o,body:f.options.disableBody?void 0:await lP(f.options.cloneRequest?o.clone():o,d),query:l,_flag:"router",asResponse:!0,context:e?.routerContext},h=NP(i,"*",c);if(h?.length)for(let{data:p,params:y}of h){let b=await p({...m,params:y,asResponse:!1});if(b instanceof Response)return b}return await f(m)}catch(d){if(e?.onError)try{let m=await e.onError(d);if(m instanceof Response)return Yn(m)}catch(m){if(ea(m))return Yn(m);throw m}if(e?.throwError)throw d;return ea(d)?Yn(d):(console.error("# SERVER_ERROR: ",d),new Response(null,{status:500,statusText:"Internal Server Error"}))}};return{handler:async o=>{let s=await e?.onRequest?.(o);if(s instanceof Response)return s;let a=await n(s instanceof Request?s:o),c=await e?.onResponse?.(a);return c instanceof Response?c:a},endpoints:t}};async function Ad(t,e,r){let i=t.body?.callbackURL||t.context.options.baseURL;if(!i)throw new V("BAD_REQUEST",{message:"callbackURL is required"});let n=Ma(128),o=Ma(32),s=t.context.oauthConfig.storeStateStrategy,a={...r||{},callbackURL:i,codeVerifier:n,errorURL:t.body?.errorCallbackURL,newUserURL:t.body?.newUserCallbackURL,link:e,expiresAt:Date.now()+600*1e3,requestSignUp:t.body?.requestSignUp,state:o};if(await Kb(a),s==="cookie"){let f=await Hp({key:t.context.secret,data:JSON.stringify(a)}),d=t.context.createAuthCookie("oauth_state",{maxAge:600*1e3});return t.setCookie(d.name,f,d.attributes),{state:o,codeVerifier:n}}let c=t.context.createAuthCookie("state",{maxAge:300*1e3});await t.setSignedCookie(c.name,o,t.context.secret,c.attributes);let u=new Date;u.setMinutes(u.getMinutes()+10);let l=await t.context.internalAdapter.createVerificationValue({value:JSON.stringify(a),identifier:o,expiresAt:u});if(!l)throw t.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new V("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:l.identifier,codeVerifier:n}}async function LA(t){let e=t.query.state||t.body.state,r=t.context.oauthConfig.storeStateStrategy,i=gd({callbackURL:Y(),codeVerifier:Y(),errorURL:Y().optional(),newUserURL:Y().optional(),expiresAt:dn(),link:ke({email:Y(),userId:Tn.string()}).optional(),requestSignUp:Vt().optional(),state:Y().optional()}),n,o=t.context.oauthConfig?.skipStateCookieCheck;if(r==="cookie"){let s=t.context.createAuthCookie("oauth_state"),a=t.getCookie(s.name);if(!a){t.context.logger.error("State Mismatch. OAuth state cookie not found",{state:e});let c=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${c}?error=please_restart_the_process`)}try{let c=await Jp({key:t.context.secret,data:a});n=i.parse(JSON.parse(c))}catch(c){t.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:c});let u=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${u}?error=please_restart_the_process`)}if(!t.context.oauthConfig?.skipStateCookieCheck&&n.state&&n.state!==e){t.context.logger.error("State Mismatch. State parameter does not match",{expected:n.state,received:e});let c=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${c}?error=state_mismatch`)}t.setCookie(s.name,"",{maxAge:0})}else{let s=await t.context.internalAdapter.findVerificationValue(e);if(!s){t.context.logger.error("State Mismatch. Verification not found",{state:e});let u=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${u}?error=please_restart_the_process`)}n=i.parse(JSON.parse(s.value));let a=t.context.createAuthCookie("state"),c=await t.getSignedCookie(a.name,t.context.secret);if(!o&&(!c||c!==e)){let u=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${u}?error=state_mismatch`)}t.setCookie(a.name,"",{maxAge:0}),await t.context.internalAdapter.deleteVerificationValue(s.id)}if(n.errorURL||(n.errorURL=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`),n.expiresAt<Date.now()){let s=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${s}?error=please_restart_the_process`)}return n&&await Kb(n),n}var ta={scope:"server"};Yi();ec();dr();var fB="127.0.0.1";function Ed(t,e){if(e.advanced?.ipAddress?.disableIpTracking)return null;let r="headers"in t?t.headers:t,i=e.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"];for(let n of i){let o="get"in r?r.get(n):r[n];if(typeof o=="string"){let s=o.split(",")[0].trim();if(pB(s))return s}}return Zi()||Is()?fB:null}function pB(t){return!!(od().safeParse(t).success||ad().safeParse(t).success)}var zA=Ho(async()=>({})),oo=Ho.create({use:[zA,Ho(async()=>({}))]}),AP=[zA];function $e(t,e,r){let i=typeof t=="string"?t:void 0,n=typeof e=="object"?e:t,o=typeof e=="function"?e:r;return i?Ko(i,{...n,use:[...n?.use||[],...AP]},async s=>vs(s,()=>o(s))):Ko({...n,use:[...n?.use||[],...AP]},async s=>vs(s,()=>o(s)))}var EP=oo(async t=>{if(t.request?.method==="GET"||t.request?.method==="OPTIONS"||t.request?.method==="HEAD"||!t.request)return;let e=t.request?.headers,{body:r,query:i}=t,n=e?.get("origin")||e?.get("referer")||"",o=r?.callbackURL||i?.callbackURL,s=r?.redirectTo,a=r?.errorCallbackURL,c=r?.newUserCallbackURL,u=e?.has("cookie"),l=(f,d)=>{if(f&&!t.context.isTrustedOrigin(f,{allowRelativePaths:d!=="origin"}))throw t.context.logger.error(`Invalid ${d}: ${f}`),t.context.logger.info(`If it's a valid URL, please add ${f} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${t.context.trustedOrigins}`),new V("FORBIDDEN",{message:`Invalid ${d}`})};if(u&&!t.context.skipCSRFCheck&&!t.context.skipOriginCheck){if(!n||n==="null")throw new V("FORBIDDEN",{message:"Missing or null Origin"});l(n,"origin")}o&&l(o,"callbackURL"),s&&l(s,"redirectURL"),a&&l(a,"errorCallbackURL"),c&&l(c,"newUserCallbackURL")}),ra=t=>oo(async e=>{if(!e.request)return;let r=t(e),i=(o,s)=>{if(o&&!e.context.isTrustedOrigin(o,{allowRelativePaths:s!=="origin"}))throw e.context.logger.error(`Invalid ${s}: ${o}`),e.context.logger.info(`If it's a valid URL, please add ${o} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${e.context.trustedOrigins}`),new V("FORBIDDEN",{message:`Invalid ${s}`})},n=Array.isArray(r)?r:[r];for(let o of n)i(o,"callbackURL")});function jA(t){return t==="-"||t==="^"||t==="$"||t==="+"||t==="."||t==="("||t===")"||t==="|"||t==="["||t==="]"||t==="{"||t==="}"||t==="*"||t==="?"||t==="\\"?`\\${t}`:t}function mB(t){let e="";for(let r=0;r<t.length;r++)e+=jA(t[r]);return e}function _P(t,e=!0){if(Array.isArray(t))return`(?:${t.map(u=>`^${_P(u,e)}$`).join("|")})`;let r="",i="",n=".";e===!0?(r="/",i="[/\\\\]",n="[^/\\\\]"):e&&(r=e,i=mB(r),i.length>1?(i=`(?:${i})`,n=`((?!${i}).)`):n=`[^${i}]`);let o=e?`${i}+?`:"",s=e?`${i}*?`:"",a=e?t.split(r):[t],c="";for(let u=0;u<a.length;u++){let l=a[u],f=a[u+1],d="";if(!(!l&&u>0)){if(e&&(u===a.length-1?d=s:f!=="**"?d=o:d=""),e&&l==="**"){d&&(c+=u===0?"":d,c+=`(?:${n}*?${d})*?`);continue}for(let m=0;m<l.length;m++){let h=l[m];h==="\\"?m<l.length-1&&(c+=jA(l[m+1]),m++):h==="?"?c+=n:h==="*"?c+=`${n}*?`:c+=jA(h)}c+=d}}return c}function hB(t,e){if(typeof e!="string")throw new TypeError(`Sample must be a string, but ${typeof e} given`);return t.test(e)}function _d(t,e){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof t} given`);if((typeof e=="string"||typeof e=="boolean")&&(e={separator:e}),arguments.length===2&&!(typeof e>"u"||typeof e=="object"&&e!==null&&!Array.isArray(e)))throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof e} given`);if(e=e||{},e.separator==="\\")throw new Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let r=_P(t,e.separator),i=new RegExp(`^${r}$`,e.flags),n=hB.bind(null,i);return n.options=e,n.pattern=t,n.regexp=i,n}function gB(t,e,r){let i=Date.now(),n=e*1e3;return i-r.lastRequest<n&&r.count>=t}function yB(t){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":t.toString()}})}function wB(t,e){let r=Date.now(),i=e*1e3;return Math.ceil((t+i-r)/1e3)}function bB(t){let e="rateLimit",r=t.adapter;return{get:async i=>{let n=(await r.findMany({model:e,where:[{field:"key",value:i}]}))[0];return typeof n?.lastRequest=="bigint"&&(n.lastRequest=Number(n.lastRequest)),n},set:async(i,n,o)=>{try{o?await r.updateMany({model:e,where:[{field:"key",value:i}],update:{count:n.count,lastRequest:n.lastRequest}}):await r.create({model:e,data:{key:i,count:n.count,lastRequest:n.lastRequest}})}catch(s){t.logger.error("Error setting rate limit",s)}}}}var kP=new Map;function vB(t,e){if(t.options.rateLimit?.customStorage)return t.options.rateLimit.customStorage;let r=t.rateLimit.storage;return r==="secondary-storage"?{get:async i=>{let n=await t.options.secondaryStorage?.get(i);return n?bt(n):void 0},set:async(i,n,o)=>{let s=e?.window??t.options.rateLimit?.window??10;await t.options.secondaryStorage?.set?.(i,JSON.stringify(n),s)}}:r==="memory"?{async get(i){return kP.get(i)},async set(i,n,o){kP.set(i,n)}}:bB(t)}async function MA(t,e){if(!e.rateLimit.enabled)return;let r=new URL(t.url).pathname.replace(e.options.basePath||"/api/auth","").replace(/\/+$/,""),i=e.rateLimit.window,n=e.rateLimit.max,o=Ed(t,e.options);if(!o)return;let s=o+r,a=xB().find(f=>f.pathMatcher(r));a&&(i=a.window,n=a.max);for(let f of e.options.plugins||[])if(f.rateLimit){let d=f.rateLimit.find(m=>m.pathMatcher(r));if(d){i=d.window,n=d.max;break}}if(e.rateLimit.customRules){let f=Object.keys(e.rateLimit.customRules).find(d=>d.includes("*")?_d(d)(r):d===r);if(f){let d=e.rateLimit.customRules[f],m=typeof d=="function"?await d(t):d;if(m&&(i=m.window,n=m.max),m===!1)return}}let c=vB(e,{window:i}),u=await c.get(s),l=Date.now();if(!u)await c.set(s,{key:s,count:1,lastRequest:l});else{let f=l-u.lastRequest;if(gB(n,i,u))return yB(wB(u.lastRequest,i));f>i*1e3?await c.set(s,{...u,count:1,lastRequest:l},!0):await c.set(s,{...u,count:u.count+1,lastRequest:l},!0)}}function xB(){return[{pathMatcher(t){return t.startsWith("/sign-in")||t.startsWith("/sign-up")||t.startsWith("/change-password")||t.startsWith("/change-email")},window:10,max:3}]}var Ii=(t,e="ms")=>new Date(Date.now()+(e==="sec"?t*1e3:t));var eg=new WeakMap;function BA(t,e){let r=e.fields,i={};for(let n in t){let o=r[n];if(!o){i[n]=t[n];continue}o.returned!==!1&&(i[n]=t[n])}return i}function na(t,e){eg.has(t)||eg.set(t,new Map);let r=eg.get(t);if(r.has(e))return r.get(e);let i={...e==="user"?t.user?.additionalFields:{},...e==="session"?t.session?.additionalFields:{}};for(let n of t.plugins||[])n.schema&&n.schema[e]&&(i={...i,...n.schema[e].fields});return eg.get(t).set(e,i),i}function er(t,e){return{...BA(e,{fields:na(t,"user")}),id:e.id}}function TP(t,e){return BA(e,{fields:na(t,"account")})}function Xn(t,e){return BA(e,{fields:na(t,"session")})}function _c(t,e){let r=e.action||"create",i=e.fields,n=Object.assign(Object.create(null),null);for(let o in i){if(o in t){if(i[o].input===!1){if(i[o].defaultValue!==void 0&&r!=="update"){n[o]=i[o].defaultValue;continue}if(t[o])throw new V("BAD_REQUEST",{message:`${o} is not allowed to be set`});continue}if(i[o].validator?.input&&t[o]!==void 0){let s=i[o].validator.input["~standard"].validate(t[o]);if(s instanceof Promise)throw new V("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in s&&s.issues)throw new V("BAD_REQUEST",{message:s.issues[0]?.message||"Validation Error"});n[o]=s.value;continue}if(i[o].transform?.input&&t[o]!==void 0){n[o]=i[o].transform?.input(t[o]);continue}n[o]=t[o];continue}if(i[o].defaultValue!==void 0&&r==="create"){if(typeof i[o].defaultValue=="function"){n[o]=i[o].defaultValue();continue}n[o]=i[o].defaultValue;continue}if(i[o].required&&r==="create")throw new V("BAD_REQUEST",{message:`${o} is required`})}return n}function kc(t,e={},r){return _c(e,{fields:na(t,"user"),action:r})}function IP(t,e){let r=na(t,"user");return _c(e||{},{fields:r})}function $P(t,e){return _c(e,{fields:na(t,"account")})}function tg(t,e){return _c(e,{fields:na(t,"session")})}function CP(t,e){if(!e)return t;for(let r in e){let i=e[r]?.modelName;i&&(t[r].modelName=i);for(let n in t[r].fields){let o=e[r]?.fields?.[n];o&&(t[r].fields[n].fieldName=o)}}return t}var kd=Object.defineProperty,SB=Object.getOwnPropertyDescriptor,NB=Object.getOwnPropertyNames,AB=Object.prototype.hasOwnProperty,PP=(t,e)=>{let r={};for(var i in t)kd(r,i,{get:t[i],enumerable:!0});return e&&kd(r,Symbol.toStringTag,{value:"Module"}),r},OP=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(var n=NB(e),o=0,s=n.length,a;o<s;o++)a=n[o],!AB.call(t,a)&&a!==r&&kd(t,a,{get:(c=>e[c]).bind(null,a),enumerable:!(i=SB(e,a))||i.enumerable});return t},RP=(t,e,r,i)=>{i&&(kd(t,Symbol.toStringTag,{value:"Module"}),r&&kd(r,Symbol.toStringTag,{value:"Module"})),OP(t,e,"default"),r&&OP(r,e,"default")};var WA={};ar(WA,{accountSchema:()=>EB,coreSchema:()=>Td,getAuthTables:()=>In,rateLimitSchema:()=>_B,sessionSchema:()=>kB,userSchema:()=>TB,verificationSchema:()=>IB});qA();var Td=ke({id:Y(),createdAt:Ti().default(()=>new Date),updatedAt:Ti().default(()=>new Date)}),EB=Td.extend({providerId:Y(),accountId:Y(),userId:Tn.string(),accessToken:Y().nullish(),refreshToken:Y().nullish(),idToken:Y().nullish(),accessTokenExpiresAt:Ti().nullish(),refreshTokenExpiresAt:Ti().nullish(),scope:Y().nullish(),password:Y().nullish()}),_B=ke({key:Y(),count:dn(),lastRequest:dn()}),kB=Td.extend({userId:Tn.string(),expiresAt:Ti(),token:Y(),ipAddress:Y().nullish(),userAgent:Y().nullish()}),TB=Td.extend({email:Y().transform(t=>t.toLowerCase()),emailVerified:Vt().default(!1),name:Y(),image:Y().nullish()}),IB=Td.extend({value:Y(),expiresAt:Ti(),identifier:Y()});dr();async function ng(t,e){let r;if(t.database)typeof t.database=="function"?r=t.database(t):r=await e(t);else{let i=In(t),n=Object.keys(i).reduce((s,a)=>(s[a]=[],s),{}),{memoryAdapter:o}=await Promise.resolve().then(()=>(jP(),zP));r=o(n)(t)}return r.transaction||(ye.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),r.transaction=async i=>i(r)),r}async function mw(t){return ng(t,async e=>{let{createKyselyAdapter:r}=await Promise.resolve().then(()=>(zk(),Lk)),{kysely:i,databaseType:n,transaction:o}=await r(e);if(!i)throw new de("Failed to initialize database adapter");let{kyselyAdapter:s}=await Promise.resolve().then(()=>(zk(),Lk));return s(i,{type:n||"sqlite",debugLogs:e.database&&"debugLogs"in e.database?e.database.debugLogs:!1,transaction:o})(e)})}var JU=(t,e)=>({type:t,...e});function QU(t,e){let r=e.id?{id:e.id}:{};for(let i in t){let n=t[i],o=e[i];o!==void 0&&(r[n.fieldName||i]=o)}return r}function ZU(t,e){if(!e)return null;let r={id:e.id};for(let[i,n]of Object.entries(t))r[i]=e[n.fieldName||i];return r}function hw(t,e){let r=e.hooks;async function i(c,u,l){let f=await Vi().catch(()=>null),d=c;for(let p of r||[]){let y=p[u]?.create?.before;if(y){let b=await y(d,f);if(b===!1)return null;typeof b=="object"&&"data"in b&&(d={...d,...b.data})}}let m=l?await l.fn(d):null,h=!l||l.executeMainFn?await(await ut(t)).create({model:u,data:d,forceAllowId:!0}):m;for(let p of r||[]){let y=p[u]?.create?.after;y&&await y(h,f)}return h}async function n(c,u,l,f){let d=await Vi().catch(()=>null),m=c;for(let y of r||[]){let b=y[l]?.update?.before;if(b){let N=await b(c,d);if(N===!1)return null;typeof N=="object"&&"data"in N&&(m={...m,...N.data})}}let h=f?await f.fn(m):null,p=!f||f.executeMainFn?await(await ut(t)).update({model:l,update:m,where:u}):h;for(let y of r||[]){let b=y[l]?.update?.after;b&&await b(p,d)}return p}async function o(c,u,l,f){let d=await Vi().catch(()=>null),m=c;for(let y of r||[]){let b=y[l]?.update?.before;if(b){let N=await b(c,d);if(N===!1)return null;typeof N=="object"&&"data"in N&&(m={...m,...N.data})}}let h=f?await f.fn(m):null,p=!f||f.executeMainFn?await(await ut(t)).updateMany({model:l,update:m,where:u}):h;for(let y of r||[]){let b=y[l]?.update?.after;b&&await b(p,d)}return p}async function s(c,u,l){let f=await Vi().catch(()=>null),d=null;try{d=(await(await ut(t)).findMany({model:u,where:c,limit:1}))[0]||null}catch{}if(d)for(let p of r||[]){let y=p[u]?.delete?.before;if(y&&await y(d,f)===!1)return null}let m=l?await l.fn(c):null,h=!l||l.executeMainFn?await(await ut(t)).delete({model:u,where:c}):m;if(d)for(let p of r||[]){let y=p[u]?.delete?.after;y&&await y(d,f)}return h}async function a(c,u,l){let f=await Vi().catch(()=>null),d=[];try{d=await(await ut(t)).findMany({model:u,where:c})}catch{}for(let p of d)for(let y of r||[]){let b=y[u]?.delete?.before;if(b&&await b(p,f)===!1)return null}let m=l?await l.fn(c):null,h=!l||l.executeMainFn?await(await ut(t)).deleteMany({model:u,where:c}):m;for(let p of d)for(let y of r||[]){let b=y[u]?.delete?.after;b&&await b(p,f)}return h}return{createWithHooks:i,updateWithHooks:n,updateManyWithHooks:o,deleteWithHooks:s,deleteManyWithHooks:a}}var vu=(t,e)=>{let r=e.logger,i=e.options,n=i.secondaryStorage,o=i.session?.expiresIn||3600*24*7,{createWithHooks:s,updateWithHooks:a,updateManyWithHooks:c,deleteWithHooks:u,deleteManyWithHooks:l}=hw(t,e);async function f(d){if(!n)return;let m=await n.get(`active-sessions-${d.id}`);if(!m)return;let h=Date.now(),p=(bt(m)||[]).filter(y=>y.expiresAt>h);await Promise.all(p.map(async({token:y})=>{let b=await n.get(y);if(!b)return;let N=bt(b);if(!N)return;let T=Math.max(Math.floor(new Date(N.session.expiresAt).getTime()-h)/1e3,0);await n.set(y,JSON.stringify({session:N.session,user:d}),Math.floor(T))}))}return{createOAuthUser:async(d,m)=>Gu(t,async()=>{let h=await s({createdAt:new Date,updatedAt:new Date,...d},"user",void 0);return{user:h,account:await s({...m,userId:h.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}}),createUser:async d=>await s({createdAt:new Date,updatedAt:new Date,...d,email:d.email?.toLowerCase()},"user",void 0),createAccount:async d=>await s({createdAt:new Date,updatedAt:new Date,...d},"account",void 0),listSessions:async d=>{if(n){let m=await n.get(`active-sessions-${d}`);if(!m)return[];let h=bt(m)||[],p=Date.now(),y=h.filter(N=>N.expiresAt>p),b=[];for(let N of y){let T=await n.get(N.token);if(T){let I=bt(T);if(!I)return[];let $=Xn(e.options,{...I.session,expiresAt:new Date(I.session.expiresAt)});b.push($)}}return b}return await(await ut(t)).findMany({model:"session",where:[{field:"userId",value:d}]})},listUsers:async(d,m,h,p)=>await(await ut(t)).findMany({model:"user",limit:d,offset:m,sortBy:h,where:p}),countTotalUsers:async d=>{let m=await(await ut(t)).count({model:"user",where:d});return typeof m=="string"?parseInt(m):m},deleteUser:async d=>{(!n||i.session?.storeSessionInDatabase)&&await l([{field:"userId",value:d}],"session",void 0),await l([{field:"userId",value:d}],"account",void 0),await u([{field:"id",value:d}],"user",void 0)},createSession:async(d,m,h,p)=>{let y=await Vi().catch(()=>null),b=y?.headers||y?.request?.headers,{id:N,...T}=h||{},I=tg(y?.context.options??i,{}),$={ipAddress:(y?.request||y?.headers)&&Ed(y?.request||y?.headers,y?.context.options)||"",userAgent:b?.get("user-agent")||"",...T,expiresAt:m?Ii(3600*24,"sec"):Ii(o,"sec"),userId:d,token:Nn(32),createdAt:new Date,updatedAt:new Date,...I,...p?T:{}};return await s($,"session",n?{fn:async v=>{let S=await n.get(`active-sessions-${d}`),_=[],E=Date.now();S&&(_=bt(S)||[],_=_.filter(z=>z.expiresAt>E));let C=_.sort((z,W)=>z.expiresAt-W.expiresAt),R=C.at(-1)?.expiresAt;C.push({token:$.token,expiresAt:$.expiresAt.getTime()}),(!R||R<$.expiresAt.getTime())&&(R=$.expiresAt.getTime());let M=Math.max(Math.floor((R-E)/1e3),0);M>0&&await n.set(`active-sessions-${d}`,JSON.stringify(C),M);let D=await t.findOne({model:"user",where:[{field:"id",value:d}]}),P=Math.max(Math.floor(($.expiresAt.getTime()-E)/1e3),0);return P>0&&await n.set($.token,JSON.stringify({session:v,user:D}),P),v},executeMainFn:i.session?.storeSessionInDatabase}:void 0)},findSession:async d=>{if(n){let y=await n.get(d);if(!y&&!i.session?.storeSessionInDatabase)return null;if(y){let b=bt(y);return b?{session:Xn(e.options,{...b.session,expiresAt:new Date(b.session.expiresAt),createdAt:new Date(b.session.createdAt),updatedAt:new Date(b.session.updatedAt)}),user:er(e.options,{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)})}:null}}let m=await(await ut(t)).findOne({model:"session",where:[{value:d,field:"token"}],join:{user:!0}});if(!m)return null;let{user:h,...p}=m;return h?{session:Xn(e.options,p),user:er(e.options,h)}:null},findSessions:async d=>{if(n){let h=[];for(let p of d){let y=await n.get(p);if(y){let b=bt(y);if(!b)return[];let N={session:{...b.session,expiresAt:new Date(b.session.expiresAt)},user:{...b.user,createdAt:new Date(b.user.createdAt),updatedAt:new Date(b.user.updatedAt)}};h.push(N)}}return h}let m=await(await ut(t)).findMany({model:"session",where:[{field:"token",value:d,operator:"in"}],join:{user:!0}});return m.length?m.some(h=>!h.user)?[]:m.map(h=>{let{user:p,...y}=h;return{session:y,user:p}}):[]},updateSession:async(d,m)=>await a(m,[{field:"token",value:d}],"session",n?{async fn(h){let p=await n.get(d),y=null;if(p){let b=bt(p);return b?(y={...b.session,...h},y):null}else return null},executeMainFn:i.session?.storeSessionInDatabase}:void 0),deleteSession:async d=>{if(n){let m=await n.get(d);if(m){let{session:h}=bt(m)??{};if(!h){r.error("Session not found in secondary storage");return}let p=h.userId,y=await n.get(`active-sessions-${p}`);if(y){let b=bt(y)||[],N=Date.now(),T=b.filter($=>$.expiresAt>N&&$.token!==d),I=T.sort(($,v)=>$.expiresAt-v.expiresAt).at(-1)?.expiresAt;T.length>0&&I&&I>Date.now()?await n.set(`active-sessions-${p}`,JSON.stringify(T),Math.floor((I-N)/1e3)):await n.delete(`active-sessions-${p}`)}else r.error("Active sessions list not found in secondary storage")}if(await n.delete(d),!i.session?.storeSessionInDatabase||e.options.session?.preserveSessionInDatabase)return}await u([{field:"token",value:d}],"session",void 0)},deleteAccounts:async d=>{await l([{field:"userId",value:d}],"account",void 0)},deleteAccount:async d=>{await u([{field:"id",value:d}],"account",void 0)},deleteSessions:async d=>{if(n){if(typeof d=="string"){let m=await n.get(`active-sessions-${d}`),h=m?bt(m):[];if(!h)return;for(let p of h)await n.delete(p.token);await n.delete(`active-sessions-${d}`)}else for(let m of d)await n.get(m)&&await n.delete(m);if(!i.session?.storeSessionInDatabase||e.options.session?.preserveSessionInDatabase)return}await l([{field:Array.isArray(d)?"token":"userId",value:d,operator:Array.isArray(d)?"in":void 0}],"session",void 0)},findOAuthUser:async(d,m,h)=>{let p=await(await ut(t)).findMany({model:"account",where:[{value:m,field:"accountId"}],join:{user:!0}}).then(y=>y.find(b=>b.providerId===h));if(p){if(p.user)return{user:p.user,accounts:[p]};{let y=await(await ut(t)).findOne({model:"user",where:[{value:d.toLowerCase(),field:"email"}]});return y?{user:y,accounts:[p]}:null}}else{let y=await(await ut(t)).findOne({model:"user",where:[{value:d.toLowerCase(),field:"email"}]});return y?{user:y,accounts:await(await ut(t)).findMany({model:"account",where:[{value:y.id,field:"userId"}]})||[]}:null}},findUserByEmail:async(d,m)=>{let h=await(await ut(t)).findOne({model:"user",where:[{value:d.toLowerCase(),field:"email"}],join:{...m?.includeAccounts?{account:!0}:{}}});if(!h)return null;let{account:p,...y}=h;return{user:y,accounts:p??[]}},findUserById:async d=>d?await(await ut(t)).findOne({model:"user",where:[{field:"id",value:d}]}):null,linkAccount:async d=>await s({createdAt:new Date,updatedAt:new Date,...d},"account",void 0),updateUser:async(d,m)=>{let h=await a(m,[{field:"id",value:d}],"user",void 0);return await f(h),await f(h),h},updateUserByEmail:async(d,m)=>{let h=await a(m,[{field:"email",value:d.toLowerCase()}],"user",void 0);return await f(h),await f(h),h},updatePassword:async(d,m)=>{await c({password:m},[{field:"userId",value:d},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async d=>await(await ut(t)).findMany({model:"account",where:[{field:"userId",value:d}]}),findAccount:async d=>await(await ut(t)).findOne({model:"account",where:[{field:"accountId",value:d}]}),findAccountByProviderId:async(d,m)=>await(await ut(t)).findOne({model:"account",where:[{field:"accountId",value:d},{field:"providerId",value:m}]}),findAccountByUserId:async d=>await(await ut(t)).findMany({model:"account",where:[{field:"userId",value:d}]}),updateAccount:async(d,m)=>await a(m,[{field:"id",value:d}],"account",void 0),createVerificationValue:async d=>await s({createdAt:new Date,updatedAt:new Date,...d},"verification",void 0),findVerificationValue:async d=>{let m=await(await ut(t)).findMany({model:"verification",where:[{field:"identifier",value:d}],sortBy:{field:"createdAt",direction:"desc"},limit:1});return i.verification?.disableCleanup||await l([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0),m[0]},deleteVerificationValue:async d=>{await u([{field:"id",value:d}],"verification",void 0)},deleteVerificationByIdentifier:async d=>{await u([{field:"identifier",value:d}],"verification",void 0)},updateVerificationValue:async(d,m)=>await a(m,[{field:"id",value:d}],"verification",void 0)}};function GU({fields:t,isClientSide:e}){let r=Object.keys(t).reduce((i,n)=>{let o=t[n];if(!o||e&&o.input===!1)return i;let s;return o.type==="json"?s=Ec?Ec():Fr():o.type==="string[]"||o.type==="number[]"?s=fn(o.type==="string[]"?Y():dn()):Array.isArray(o.type)?s=Fr():s=Sr[o.type](),o?.required===!1&&(s=s.optional()),o?.returned===!1?i:{...i,[n]:s}},{});return ke(r)}function gw(t){let e=(0,jk.getAuthTables)(t),r={};for(let i in e){let n=e[i],o=n.fields,s={};if(Object.entries(o).forEach(([a,c])=>{if(s[c.fieldName||a]=c,c.references){let u=e[c.references.model];u&&(s[c.fieldName||a].references={...c.references,model:u.modelName,field:c.references.field})}}),r[n.modelName]){r[n.modelName].fields={...r[n.modelName].fields,...s};continue}r[n.modelName]={fields:s,order:n.order||1/0}}return r}pw();dr();wu();Id();var Dq={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function Mk(t,e,r){function i(o){return o.toLowerCase().split("(")[0].trim()}if(e==="string[]"||e==="number[]")return t.toLowerCase().includes("json");let n=Dq[r];return(Array.isArray(e)?n.string.map(o=>o.toLowerCase()):n[e].map(o=>o.toLowerCase())).includes(i(t))}async function Lq(t){try{let e=await Te`SHOW search_path`.execute(t);if(e.rows[0]?.search_path)return e.rows[0].search_path.split(",").map(r=>r.trim()).map(r=>r.replace(/^["']|["']$/g,"")).filter(r=>!r.startsWith("$"))[0]||"public"}catch{}return"public"}async function yw(t){let e=gw(t),r=Gi(t.logger),{kysely:i,databaseType:n}=await fw(t);n||(r.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),n="sqlite"),i||(r.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));let o="public";if(n==="postgres"){o=await Lq(i),r.debug(`PostgreSQL migration: Using schema '${o}' (from search_path)`);try{(await Te`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${o}
			`.execute(i)).rows[0]||r.warn(`Schema '${o}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(I){r.debug(`Could not verify schema existence: ${I instanceof Error?I.message:String(I)}`)}}let s=await i.introspection.getTables(),a=s;if(n==="postgres")try{let I=await Te`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${o}
				AND table_type = 'BASE TABLE'
			`.execute(i),$=new Set(I.rows.map(v=>v.table_name));a=s.filter(v=>v.schema===o&&$.has(v.name)),r.debug(`Found ${a.length} table(s) in schema '${o}': ${a.map(v=>v.name).join(", ")||"(none)"}`)}catch(I){r.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${I instanceof Error?I.message:String(I)}`)}let c=[],u=[];for(let[I,$]of Object.entries(e)){let v=a.find(_=>_.name===I);if(!v){let _=c.findIndex(R=>R.table===I),E={table:I,fields:$.fields,order:$.order||1/0},C=c.findIndex(R=>(R.order||1/0)>E.order);C===-1?_===-1?c.push(E):c[_].fields={...c[_].fields,...$.fields}:c.splice(C,0,E);continue}let S={};for(let[_,E]of Object.entries($.fields)){let C=v.columns.find(R=>R.name===_);if(!C){S[_]=E;continue}Mk(C.dataType,E.type,n)||r.warn(`Field ${_} in table ${I} has a different type in the database. Expected ${E.type} but got ${C.dataType}.`)}Object.keys(S).length>0&&u.push({table:I,fields:S,order:$.order||1/0})}let l=[],f=t.advanced?.database?.generateId==="uuid",d=t.advanced?.database?.useNumberId||t.advanced?.database?.generateId==="serial";function m(I,$){let v=I.type,S=n||"sqlite",_={string:{sqlite:"text",postgres:"text",mysql:I.unique?"varchar(255)":I.references?"varchar(36)":I.sortable||I.index?"varchar(255)":"text",mssql:I.unique||I.sortable?"varchar(255)":I.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:I.bigint?"bigint":"integer",postgres:I.bigint?"bigint":"integer",mysql:I.bigint?"bigint":"integer",mssql:I.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:Te`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:d?Te`integer GENERATED BY DEFAULT AS IDENTITY`:f?"uuid":"text",mysql:d?"integer":"varchar(36)",mssql:d?"integer":"varchar(36)",sqlite:d?"integer":"text"},foreignKeyId:{postgres:d?"integer":f?"uuid":"text",mysql:d?"integer":"varchar(36)",mssql:d?"integer":"varchar(36)",sqlite:d?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if($==="id"||I.references?.field==="id")return $==="id"?_.id[S]:_.foreignKeyId[S];if(Array.isArray(v))return"text";if(!(v in _))throw new Error(`Unsupported field type '${String(v)}' for field '${$}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return _[v][S]}let h=KA({schema:In(t),usePlural:!1}),p=VA({schema:In(t),usePlural:!1});function y(I,$){try{return`${h(I)}.${p({model:I,field:$})}`}catch{return`${I}.${$}`}}if(u.length)for(let I of u)for(let[$,v]of Object.entries(I.fields)){let S=m(v,$),_=i.schema.alterTable(I.table);if(v.index){let C=i.schema.alterTable(I.table).addIndex(`${I.table}_${$}_idx`);l.push(C)}let E=_.addColumn($,S,C=>(C=v.required!==!1?C.notNull():C,v.references&&(C=C.references(y(v.references.model,v.references.field)).onDelete(v.references.onDelete||"cascade")),v.unique&&(C=C.unique()),v.type==="date"&&typeof v.defaultValue=="function"&&(n==="postgres"||n==="mysql"||n==="mssql")&&(n==="mysql"?C=C.defaultTo(Te`CURRENT_TIMESTAMP(3)`):C=C.defaultTo(Te`CURRENT_TIMESTAMP`)),C));l.push(E)}let b=[];if(t.advanced?.database?.useNumberId&&r.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead."),c.length)for(let I of c){let $=m({type:d?"number":"string"},"id"),v=i.schema.createTable(I.table).addColumn("id",$,S=>d?n==="postgres"||n==="sqlite"?S.primaryKey().notNull():n==="mssql"?S.identity().primaryKey().notNull():S.autoIncrement().primaryKey().notNull():f&&n==="postgres"?S.primaryKey().defaultTo(Te`pg_catalog.gen_random_uuid()`).notNull():S.primaryKey().notNull());for(let[S,_]of Object.entries(I.fields)){let E=m(_,S);if(v=v.addColumn(S,E,C=>(C=_.required!==!1?C.notNull():C,_.references&&(C=C.references(y(_.references.model,_.references.field)).onDelete(_.references.onDelete||"cascade")),_.unique&&(C=C.unique()),_.type==="date"&&typeof _.defaultValue=="function"&&(n==="postgres"||n==="mysql"||n==="mssql")&&(n==="mysql"?C=C.defaultTo(Te`CURRENT_TIMESTAMP(3)`):C=C.defaultTo(Te`CURRENT_TIMESTAMP`)),C)),_.index){let C=i.schema.createIndex(`${I.table}_${S}_${_.unique?"uidx":"idx"}`).on(I.table).columns([S]);b.push(_.unique?C.unique():C)}}l.push(v)}if(b.length)for(let I of b)l.push(I);async function N(){for(let I of l)await I.execute()}async function T(){return l.map(I=>I.compile().sql).join(`;

`)+";"}return{toBeCreated:c,toBeAdded:u,runMigrations:N,compileMigrations:T}}var jk=PP({convertFromDB:()=>ZU,convertToDB:()=>QU,createFieldAttribute:()=>JU,createInternalAdapter:()=>vu,getAdapter:()=>mw,getBaseAdapter:()=>ng,getMigrations:()=>yw,getSchema:()=>gw,getWithHooks:()=>hw,matchType:()=>Mk,mergeSchema:()=>CP,parseAccountInput:()=>$P,parseAccountOutput:()=>TP,parseAdditionalUserInput:()=>IP,parseInputData:()=>_c,parseSessionInput:()=>tg,parseSessionOutput:()=>Xn,parseUserInput:()=>kc,parseUserOutput:()=>er,toZodSchema:()=>GU});RP(jk,WA);var Wk=4096,qk=200,Bk=Wk-qk;function zq(t){let e=t.headers?.get("cookie");if(!e)return{};let r={},i=e.split("; ");for(let n of i){let[o,...s]=n.split("=");o&&s.length>0&&(r[o]=s.join("="))}return r}function YU(t){let e=t.split("."),r=e[e.length-1],i=parseInt(r||"0",10);return isNaN(i)?0:i}function jq(t,e){let r={},i=zq(e);for(let[n,o]of Object.entries(i))n.startsWith(t)&&(r[n]=o);return r}function Mq(t){return Object.keys(t).sort((e,r)=>YU(e)-YU(r)).map(e=>t[e]).join("")}function Bq(t,e,r,i){let n=Math.ceil(e.value.length/Bk);if(n===1)return r[e.name]=e.value,[e];let o=[];for(let s=0;s<n;s++){let a=`${e.name}.${s}`,c=s*Bk,u=e.value.substring(c,c+Bk);o.push({...e,name:a,value:u}),r[a]=u}return i.debug(`CHUNKING_${t.toUpperCase()}_COOKIE`,{message:`${t} cookie exceeds allowed ${Wk} bytes.`,emptyCookieSize:qk,valueSize:e.value.length,chunkCount:n,chunks:o.map(s=>s.value.length+qk)}),o}function XU(t,e){let r={};for(let i in t)r[i]={name:i,value:"",options:{...e,maxAge:0}};return r}var eD=t=>(e,r,i)=>{let n=jq(e,i),o=i.context.logger;return{getValue(){return Mq(n)},hasChunks(){return Object.keys(n).length>0},chunk(s,a){let c=XU(n,r);for(let f in n)delete n[f];let u=c,l=Bq(t,{name:e,value:s,options:{...r,...a}},n,o);for(let f of l)u[f.name]=f;return Object.values(u)},clean(){let s=XU(n,r);for(let a in n)delete n[a];return Object.values(s)},setCookies(s){for(let a of s)i.setCookie(a.name,a.value,a.options)}}},bw=eD("Session"),ww=eD("Account");function vw(t,e){let r=t.getCookie(e);if(r)return r;let i=[],n=t.headers?.get("cookie");if(!n)return null;let o={},s=n.split("; ");for(let a of s){let[c,...u]=a.split("=");c&&u.length>0&&(o[c]=u.join("="))}for(let[a,c]of Object.entries(o))if(a.startsWith(e+".")){let u=a.split(".").at(-1),l=parseInt(u||"0",10);isNaN(l)||i.push({index:l,value:c})}return i.length>0?(i.sort((a,c)=>a.index-c.index),i.map(a=>a.value).join("")):null}async function xu(t,e){let r=t.context.authCookies.accountData,i={maxAge:300,...r.options},n=await dl(e,t.context.secret,"better-auth-account",i.maxAge);if(n.length>Wk){let o=ww(r.name,i,t),s=o.chunk(n,i);o.setCookies(s)}else{let o=ww(r.name,i,t);if(o.hasChunks()){let s=o.clean();o.setCookies(s)}t.setCookie(r.name,n,i)}}async function xw(t){let e=vw(t,t.context.authCookies.accountData.name);if(e){let r=bt(await Ya(e,t.context.secret,"better-auth-account"));if(r)return r}return null}var tD=_n(ke({disableCookieCache:Tn.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:Tn.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));var qq=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;function Wq(t){let e=qq.exec(t);if(!e||e[4]&&e[1])throw new TypeError(`Invalid time string format: "${t}". Use formats like "7d", "30m", "1 hour", etc.`);let r=parseFloat(e[2]),i=e[3].toLowerCase(),n;switch(i){case"years":case"year":case"yrs":case"yr":case"y":n=r*315576e5;break;case"months":case"month":case"mo":n=r*2592e6;break;case"weeks":case"week":case"w":n=r*6048e5;break;case"days":case"day":case"d":n=r*864e5;break;case"hours":case"hour":case"hrs":case"hr":case"h":n=r*36e5;break;case"minutes":case"minute":case"mins":case"min":case"m":n=r*6e4;break;case"seconds":case"second":case"secs":case"sec":case"s":n=r*1e3;break;default:throw new TypeError(`Unknown time unit: "${i}"`)}return e[1]==="-"||e[4]==="ago"?-n:n}function rD(t){return Math.round(Wq(t)/1e3)}dr();var Fk=new Map,Fq=new TextEncoder,Vk={decode:(t,e="utf-8")=>(Fk.has(e)||Fk.set(e,new TextDecoder(e)),Fk.get(e).decode(t)),encode:Fq.encode};var Sw=(t="SHA-256",e="none")=>{let r={importKey:async(i,n)=>Kn().importKey("raw",typeof i=="string"?new TextEncoder().encode(i):i,{name:"HMAC",hash:{name:t}},!1,[n]),sign:async(i,n)=>{typeof i=="string"&&(i=await r.importKey(i,"sign"));let o=await Kn().sign("HMAC",i,typeof n=="string"?new TextEncoder().encode(n):n);return e==="hex"?tc.encode(o):e==="base64"||e==="base64url"||e==="base64urlnopad"?Ei.encode(o,{padding:e!=="base64urlnopad"}):o},verify:async(i,n,o)=>(typeof i=="string"&&(i=await r.importKey(i,"verify")),e==="hex"&&(o=tc.decode(o)),(e==="base64"||e==="base64url"||e==="base64urlnopad")&&(o=await Cr.decode(o)),Kn().verify("HMAC",i,typeof o=="string"?new TextEncoder().encode(o):o,typeof n=="string"?new TextEncoder().encode(n):n))};return r};function Kk(t){let e=(t.advanced?.useSecureCookies!==void 0?t.advanced?.useSecureCookies:t.baseURL!==void 0?t.baseURL.startsWith("https://"):Co)?"__Secure-":"",r=!!t.advanced?.crossSubDomainCookies?.enabled,i=r?t.advanced?.crossSubDomainCookies?.domain||(t.baseURL?new URL(t.baseURL).hostname:void 0):void 0;if(r&&!i)throw new de("baseURL is required when crossSubdomainCookies are enabled");function n(o,s={}){let a=t.advanced?.cookiePrefix||"better-auth",c=t.advanced?.cookies?.[o]?.name||`${a}.${o}`,u=t.advanced?.cookies?.[o]?.attributes;return{name:`${e}${c}`,attributes:{secure:!!e,sameSite:"lax",path:"/",httpOnly:!0,...r?{domain:i}:{},...t.advanced?.defaultCookieAttributes,...s,...u}}}return n}function nD(t){let e=Kk(t),r=e("session_token",{maxAge:t.session?.expiresIn||rD("7d")}),i=e("session_data",{maxAge:t.session?.cookieCache?.maxAge||300}),n=e("account_data",{maxAge:t.session?.cookieCache?.maxAge||300}),o=e("dont_remember");return{sessionToken:{name:r.name,options:r.attributes},sessionData:{name:i.name,options:i.attributes},dontRememberToken:{name:o.name,options:o.attributes},accountData:{name:n.name,options:n.attributes}}}async function Nw(t,e,r){if(t.context.options.session?.cookieCache?.enabled){let i=Object.entries(e.session).reduce((d,[m,h])=>{let p=t.context.options.session?.additionalFields?.[m];return(!p||p.returned!==!1)&&(d[m]=h),d},{}),n=er(t.context.options,e.user),o=t.context.options.session?.cookieCache?.version,s="1";if(o){if(typeof o=="string")s=o;else if(typeof o=="function"){let d=o(e.session,e.user);s=d instanceof Promise?await d:d}}let a={session:i,user:n,updatedAt:Date.now(),version:s},c={...t.context.authCookies.sessionData.options,maxAge:r?void 0:t.context.authCookies.sessionData.options.maxAge},u=Ii(c.maxAge||60,"sec").getTime(),l=t.context.options.session?.cookieCache?.strategy||"compact",f;if(l==="jwe"?f=await dl(a,t.context.secret,"better-auth-session",c.maxAge||300):l==="jwt"?f=await ll(a,t.context.secret,c.maxAge||300):f=Ei.encode(JSON.stringify({session:a,expiresAt:u,signature:await Sw("SHA-256","base64urlnopad").sign(t.context.secret,JSON.stringify({...a,expiresAt:u}))}),{padding:!1}),f.length>4093){let d=bw(t.context.authCookies.sessionData.name,c,t),m=d.chunk(f,c);d.setCookies(m)}else{let d=bw(t.context.authCookies.sessionData.name,c,t);if(d.hasChunks()){let m=d.clean();d.setCookies(m)}t.setCookie(t.context.authCookies.sessionData.name,f,c)}}}async function ir(t,e,r,i){let n=await t.getSignedCookie(t.context.authCookies.dontRememberToken.name,t.context.secret);r=r!==void 0?r:!!n;let o=t.context.authCookies.sessionToken.options,s=r?void 0:t.context.sessionConfig.expiresIn;await t.setSignedCookie(t.context.authCookies.sessionToken.name,e.session.token,t.context.secret,{...o,maxAge:s,...i}),r&&await t.setSignedCookie(t.context.authCookies.dontRememberToken.name,"true",t.context.secret,t.context.authCookies.dontRememberToken.options),await Nw(t,e,r),t.context.setNewSession(e),t.context.options.secondaryStorage&&await t.context.secondaryStorage?.set(e.session.token,JSON.stringify({user:e.user,session:e.session}),Math.floor((new Date(e.session.expiresAt).getTime()-Date.now())/1e3))}function us(t,e){if(t.setCookie(t.context.authCookies.sessionToken.name,"",{...t.context.authCookies.sessionToken.options,maxAge:0}),t.setCookie(t.context.authCookies.sessionData.name,"",{...t.context.authCookies.sessionData.options,maxAge:0}),t.context.options.account?.storeAccountCookie){t.setCookie(t.context.authCookies.accountData.name,"",{...t.context.authCookies.accountData.options,maxAge:0});let n=ww(t.context.authCookies.accountData.name,t.context.authCookies.accountData.options,t),o=n.clean();n.setCookies(o)}if(t.context.oauthConfig.storeStateStrategy==="cookie"){let n=t.context.createAuthCookie("oauth_state");t.setCookie(n.name,"",{...n.attributes,maxAge:0})}let r=bw(t.context.authCookies.sessionData.name,t.context.authCookies.sessionData.options,t),i=r.clean();r.setCookies(i),e||t.setCookie(t.context.authCookies.dontRememberToken.name,"",{...t.context.authCookies.dontRememberToken.options,maxAge:0})}var Hk=()=>$e("/get-session",{method:"GET",operationId:"getSession",query:tD,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async t=>{try{let e=await t.getSignedCookie(t.context.authCookies.sessionToken.name,t.context.secret);if(!e)return null;let r=vw(t,t.context.authCookies.sessionData.name),i=null;if(r){let c=t.context.options.session?.cookieCache?.strategy||"compact";if(c==="jwe"){let u=await Ya(r,t.context.secret,"better-auth-session");if(u&&u.session&&u.user)i={session:{session:u.session,user:u.user,updatedAt:u.updatedAt,version:u.version},expiresAt:u.exp?u.exp*1e3:Date.now()};else{let l=t.context.authCookies.sessionData.name;return t.setCookie(l,"",{maxAge:0}),t.json(null)}}else if(c==="jwt"){let u=await zp(r,t.context.secret);if(u&&u.session&&u.user)i={session:{session:u.session,user:u.user,updatedAt:u.updatedAt,version:u.version},expiresAt:u.exp?u.exp*1e3:Date.now()};else{let l=t.context.authCookies.sessionData.name;return t.setCookie(l,"",{maxAge:0}),t.json(null)}}else{let u=bt(Vk.decode(Ei.decode(r)));if(u)if(await Sw("SHA-256","base64urlnopad").verify(t.context.secret,JSON.stringify({...u.session,expiresAt:u.expiresAt}),u.signature))i=u;else{let l=t.context.authCookies.sessionData.name;return t.setCookie(l,"",{maxAge:0}),t.json(null)}}}let n=await t.getSignedCookie(t.context.authCookies.dontRememberToken.name,t.context.secret);if(i?.session&&t.context.options.session?.cookieCache?.enabled&&!t.query?.disableCookieCache){let c=i.session,u=t.context.options.session?.cookieCache?.version,l="1";if(u){if(typeof u=="string")l=u;else if(typeof u=="function"){let f=u(c.session,c.user);l=f instanceof Promise?await f:f}}if((c.version||"1")!==l){let f=t.context.authCookies.sessionData.name;t.setCookie(f,"",{maxAge:0})}else{let f=new Date(c.session.expiresAt);if(i.expiresAt<Date.now()||f<new Date){let d=t.context.authCookies.sessionData.name;t.setCookie(d,"",{maxAge:0})}else{let d=t.context.sessionConfig.cookieRefreshCache;if(d===!1)return t.context.session=c,t.json({session:c.session,user:c.user});if(i.expiresAt-Date.now()<d.updateAge*1e3){let p=Ii(t.context.options.session?.cookieCache?.maxAge||300,"sec"),y={session:{...c.session,expiresAt:p},user:c.user,updatedAt:Date.now()};await Nw(t,y,!1);let b=Xn(t.context.options,{...y.session,expiresAt:new Date(y.session.expiresAt),createdAt:new Date(y.session.createdAt),updatedAt:new Date(y.session.updatedAt)}),N=er(t.context.options,{...y.user,createdAt:new Date(y.user.createdAt),updatedAt:new Date(y.user.updatedAt)});return t.context.session={session:b,user:N},t.json({session:b,user:N})}let m=Xn(t.context.options,{...c.session,expiresAt:new Date(c.session.expiresAt),createdAt:new Date(c.session.createdAt),updatedAt:new Date(c.session.updatedAt)}),h=er(t.context.options,{...c.user,createdAt:new Date(c.user.createdAt),updatedAt:new Date(c.user.updatedAt)});return t.context.session={session:m,user:h},t.json({session:m,user:h})}}}let o=await t.context.internalAdapter.findSession(e);if(t.context.session=o,!o||o.session.expiresAt<new Date)return us(t),o&&await t.context.internalAdapter.deleteSession(o.session.token),t.json(null);if(n||t.query?.disableRefresh){let c=Xn(t.context.options,o.session),u=er(t.context.options,o.user);return t.json({session:c,user:u})}let s=t.context.sessionConfig.expiresIn,a=t.context.sessionConfig.updateAge;if(o.session.expiresAt.valueOf()-s*1e3+a*1e3<=Date.now()&&(!t.query?.disableRefresh||!t.context.options.session?.disableSessionRefresh)){let c=await t.context.internalAdapter.updateSession(o.session.token,{expiresAt:Ii(t.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!c)return us(t),t.json(null,{status:401});let u=(c.expiresAt.valueOf()-Date.now())/1e3;await ir(t,{session:c,user:o.user},!1,{maxAge:u});let l=Xn(t.context.options,c),f=er(t.context.options,o.user);return t.json({session:l,user:f})}return await Nw(t,o,!!n),t.json(o)}catch(e){throw t.context.logger.error("INTERNAL_SERVER_ERROR",e),new V("INTERNAL_SERVER_ERROR",{message:ge.FAILED_TO_GET_SESSION})}}),Gr=async(t,e)=>{if(t.context.session)return t.context.session;let r=await Hk()({...t,asResponse:!1,headers:t.headers,returnHeaders:!1,returnStatus:!1,query:{...e,...t.query}}).catch(i=>null);return t.context.session=r,r},ls=oo(async t=>{let e=await Gr(t);if(!e?.session)throw new V("UNAUTHORIZED");return{session:e}}),yo=oo(async t=>{let e=await Gr(t,{disableCookieCache:!0});if(!e?.session)throw new V("UNAUTHORIZED");return{session:e}}),Vq=oo(async t=>{let e=await Gr(t);if(!e?.session&&(t.request||t.headers))throw new V("UNAUTHORIZED");return{session:e}}),Jk=oo(async t=>{let e=await Gr(t);if(!e?.session)throw new V("UNAUTHORIZED");if(t.context.sessionConfig.freshAge===0)return{session:e};let r=t.context.sessionConfig.freshAge,i=new Date(e.session.updatedAt||e.session.createdAt).getTime();if(!(Date.now()-i<r*1e3))throw new V("FORBIDDEN",{message:"Session is not fresh"});return{session:e}}),iD=()=>$e("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[ls],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async t=>{try{let e=(await t.context.internalAdapter.listSessions(t.context.session.user.id)).filter(r=>r.expiresAt>new Date);return t.json(e)}catch(e){throw t.context.logger.error(e),t.error("INTERNAL_SERVER_ERROR")}}),oD=$e("/revoke-session",{method:"POST",body:ke({token:Y().meta({description:"The token to revoke"})}),use:[yo],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async t=>{let e=t.body.token;if((await t.context.internalAdapter.findSession(e))?.session.userId===t.context.session.user.id)try{await t.context.internalAdapter.deleteSession(e)}catch(r){throw t.context.logger.error(r&&typeof r=="object"&&"name"in r?r.name:"",r),new V("INTERNAL_SERVER_ERROR")}return t.json({status:!0})}),sD=$e("/revoke-sessions",{method:"POST",use:[yo],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async t=>{try{await t.context.internalAdapter.deleteSessions(t.context.session.user.id)}catch(e){throw t.context.logger.error(e&&typeof e=="object"&&"name"in e?e.name:"",e),new V("INTERNAL_SERVER_ERROR")}return t.json({status:!0})}),aD=$e("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[yo],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async t=>{let e=t.context.session;if(!e.user)throw new V("UNAUTHORIZED");let r=(await t.context.internalAdapter.listSessions(e.user.id)).filter(i=>i.expiresAt>new Date).filter(i=>i.token!==t.context.session.session.token);return await Promise.all(r.map(i=>t.context.internalAdapter.deleteSession(i.token))),t.json({status:!0})});function Aw(t,e){return t&&(e.options.account?.encryptOAuthTokens?Jp({key:e.secret,data:t}):t)}function Jt(t,e){return e.options.account?.encryptOAuthTokens&&t?Hp({key:e.secret,data:t}):t}Yi();ec();Wp();Yi();var Kq=Object.defineProperty,Hq=Object.defineProperties,Jq=Object.getOwnPropertyDescriptors,cD=Object.getOwnPropertySymbols,Qq=Object.prototype.hasOwnProperty,Zq=Object.prototype.propertyIsEnumerable,uD=(t,e,r)=>e in t?Kq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Aa=(t,e)=>{for(var r in e||(e={}))Qq.call(e,r)&&uD(t,r,e[r]);if(cD)for(var r of cD(e))Zq.call(e,r)&&uD(t,r,e[r]);return t},Ea=(t,e)=>Hq(t,Jq(e)),Gq=class extends Error{constructor(t,e,r){super(e||t.toString(),{cause:r}),this.status=t,this.statusText=e,this.error=r,Error.captureStackTrace(this,this.constructor)}},Yq=async(t,e)=>{var r,i,n,o,s,a;let c=e||{},u={onRequest:[e?.onRequest],onResponse:[e?.onResponse],onSuccess:[e?.onSuccess],onError:[e?.onError],onRetry:[e?.onRetry]};if(!e||!e?.plugins)return{url:t,options:c,hooks:u};for(let l of e?.plugins||[]){if(l.init){let f=await((r=l.init)==null?void 0:r.call(l,t.toString(),e));c=f.options||c,t=f.url}u.onRequest.push((i=l.hooks)==null?void 0:i.onRequest),u.onResponse.push((n=l.hooks)==null?void 0:n.onResponse),u.onSuccess.push((o=l.hooks)==null?void 0:o.onSuccess),u.onError.push((s=l.hooks)==null?void 0:s.onError),u.onRetry.push((a=l.hooks)==null?void 0:a.onRetry)}return{url:t,options:c,hooks:u}},lD=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(){return this.options.delay}},Xq=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(t){return Math.min(this.options.maxDelay,this.options.baseDelay*2**t)}};function eW(t){if(typeof t=="number")return new lD({type:"linear",attempts:t,delay:1e3});switch(t.type){case"linear":return new lD(t);case"exponential":return new Xq(t);default:throw new Error("Invalid retry strategy")}}var tW=async t=>{let e={},r=async i=>typeof i=="function"?await i():i;if(t?.auth){if(t.auth.type==="Bearer"){let i=await r(t.auth.token);if(!i)return e;e.authorization=`Bearer ${i}`}else if(t.auth.type==="Basic"){let[i,n]=await Promise.all([r(t.auth.username),r(t.auth.password)]);if(!i||!n)return e;e.authorization=`Basic ${btoa(`${i}:${n}`)}`}else if(t.auth.type==="Custom"){let[i,n]=await Promise.all([r(t.auth.prefix),r(t.auth.value)]);if(!n)return e;e.authorization=`${i??""} ${n}`}}return e},rW=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function nW(t){let e=t.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!e)return"json";let i=e.split(";").shift()||"";return rW.test(i)?"json":r.has(i)||i.startsWith("text/")?"text":"blob"}function iW(t){try{return JSON.parse(t),!0}catch{return!1}}function Qk(t){if(t===void 0)return!1;let e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}function dD(t){try{return JSON.parse(t)}catch{return t}}function fD(t){return typeof t=="function"}function oW(t){if(t?.customFetchImpl)return t.customFetchImpl;if(typeof globalThis<"u"&&fD(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&fD(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function sW(t){let e=new Headers(t?.headers),r=await tW(t);for(let[i,n]of Object.entries(r||{}))e.set(i,n);if(!e.has("content-type")){let i=aW(t?.body);i&&e.set("content-type",i)}return e}function aW(t){return Qk(t)?"application/json":null}function cW(t){if(!t?.body)return null;let e=new Headers(t?.headers);if(Qk(t.body)&&!e.has("content-type")){for(let[r,i]of Object.entries(t?.body))i instanceof Date&&(t.body[r]=i.toISOString());return JSON.stringify(t.body)}return e.has("content-type")&&e.get("content-type")==="application/x-www-form-urlencoded"&&Qk(t.body)?new URLSearchParams(t.body).toString():t.body}function uW(t,e){var r;if(e?.method)return e.method.toUpperCase();if(t.startsWith("@")){let i=(r=t.split("@")[1])==null?void 0:r.split("/")[0];return mD.includes(i)?i.toUpperCase():e?.body?"POST":"GET"}return e?.body?"POST":"GET"}function lW(t,e){let r;return!t?.signal&&t?.timeout&&(r=setTimeout(()=>e?.abort(),t?.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}var dW=class pD extends Error{constructor(e,r){super(r||JSON.stringify(e,null,2)),this.issues=e,Object.setPrototypeOf(this,pD.prototype)}};async function fW(t,e){let r=await t["~standard"].validate(e);if(r.issues)throw new dW(r.issues);return r.value}var mD=["get","post","put","patch","delete"];function pW(t,e){let{baseURL:r,params:i,query:n}=e||{query:{},params:{},baseURL:""},o=t.startsWith("http")?t.split("/").slice(0,3).join("/"):r||"";if(t.startsWith("@")){let f=t.toString().split("@")[1].split("/")[0];mD.includes(f)&&(t=t.replace(`@${f}/`,"/"))}o.endsWith("/")||(o+="/");let[s,a]=t.replace(o,"").split("?"),c=new URLSearchParams(a);for(let[f,d]of Object.entries(n||{})){if(d==null)continue;let m;if(typeof d=="string")m=d;else if(Array.isArray(d)){for(let h of d)c.append(f,h);continue}else m=JSON.stringify(d);c.set(f,m)}if(i)if(Array.isArray(i)){let f=s.split("/").filter(d=>d.startsWith(":"));for(let[d,m]of f.entries()){let h=i[d];s=s.replace(m,h)}}else for(let[f,d]of Object.entries(i))s=s.replace(`:${f}`,String(d));s=s.split("/").map(encodeURIComponent).join("/"),s.startsWith("/")&&(s=s.slice(1));let u=c.toString();return u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",o.startsWith("http")?new URL(`${s}${u}`,o):`${o}${s}${u}`}var _e=async(t,e)=>{var r,i,n,o,s,a,c,u;let{hooks:l,url:f,options:d}=await Yq(t,e),m=oW(d),h=new AbortController,p=(r=d.signal)!=null?r:h.signal,y=pW(f,d),b=cW(d),N=await sW(d),T=uW(f,d),I=Ea(Aa({},d),{url:y,headers:N,body:b,method:T,signal:p});for(let D of l.onRequest)if(D){let P=await D(I);typeof P=="object"&&P!==null&&(I=P)}("pipeTo"in I&&typeof I.pipeTo=="function"||typeof((i=e?.body)==null?void 0:i.pipe)=="function")&&("duplex"in I||(I.duplex="half"));let{clearTimeout:$}=lW(d,h),v=await m(I.url,I);$();let S={response:v,request:I};for(let D of l.onResponse)if(D){let P=await D(Ea(Aa({},S),{response:(n=e?.hookOptions)!=null&&n.cloneResponse?v.clone():v}));P instanceof Response?v=P:typeof P=="object"&&P!==null&&(v=P.response)}if(v.ok){if(!(I.method!=="HEAD"))return{data:"",error:null};let P=nW(v),z={data:null,response:v,request:I};if(P==="json"||P==="text"){let W=await v.text(),Q=(o=I.jsonParser)!=null?o:dD;z.data=await Q(W)}else z.data=await v[P]();I?.output&&I.output&&!I.disableValidation&&(z.data=await fW(I.output,z.data));for(let W of l.onSuccess)W&&await W(Ea(Aa({},z),{response:(s=e?.hookOptions)!=null&&s.cloneResponse?v.clone():v}));return e?.throw?z.data:{data:z.data,error:null}}let _=(a=e?.jsonParser)!=null?a:dD,E=await v.text(),C=iW(E),R=C?await _(E):null,M={response:v,responseText:E,request:I,error:Ea(Aa({},R),{status:v.status,statusText:v.statusText})};for(let D of l.onError)D&&await D(Ea(Aa({},M),{response:(c=e?.hookOptions)!=null&&c.cloneResponse?v.clone():v}));if(e?.retry){let D=eW(e.retry),P=(u=e.retryAttempt)!=null?u:0;if(await D.shouldAttemptRetry(P,v)){for(let W of l.onRetry)W&&await W(S);let z=D.getDelay(P);return await new Promise(W=>setTimeout(W,z)),await _e(t,Ea(Aa({},e),{retryAttempt:P+1}))}}if(e?.throw)throw new Gq(v.status,v.statusText,C?R:E);return{data:null,error:Ea(Aa({},R),{status:v.status,statusText:v.statusText})}};function Ew(t){let e=r=>{let i=new Date;return new Date(i.getTime()+r*1e3)};return{tokenType:t.token_type,accessToken:t.access_token,refreshToken:t.refresh_token,accessTokenExpiresAt:t.expires_in?e(t.expires_in):void 0,refreshTokenExpiresAt:t.refresh_token_expires_in?e(t.refresh_token_expires_in):void 0,scopes:t?.scope?typeof t.scope=="string"?t.scope.split(" "):t.scope:[],idToken:t.id_token,raw:t}}async function _w(t){let e=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",e);return Ei.encode(new Uint8Array(r),{padding:!1})}async function Ye({id:t,options:e,authorizationEndpoint:r,state:i,codeVerifier:n,scopes:o,claims:s,redirectURI:a,duration:c,prompt:u,accessType:l,responseType:f,display:d,loginHint:m,hd:h,responseMode:p,additionalParams:y,scopeJoiner:b}){let N=new URL(r);N.searchParams.set("response_type",f||"code");let T=Array.isArray(e.clientId)?e.clientId[0]:e.clientId;if(N.searchParams.set("client_id",T),N.searchParams.set("state",i),o&&N.searchParams.set("scope",o.join(b||" ")),N.searchParams.set("redirect_uri",e.redirectURI||a),c&&N.searchParams.set("duration",c),d&&N.searchParams.set("display",d),m&&N.searchParams.set("login_hint",m),u&&N.searchParams.set("prompt",u),h&&N.searchParams.set("hd",h),l&&N.searchParams.set("access_type",l),p&&N.searchParams.set("response_mode",p),n){let I=await _w(n);N.searchParams.set("code_challenge_method","S256"),N.searchParams.set("code_challenge",I)}if(s){let I=s.reduce(($,v)=>($[v]=null,$),{});N.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...I}}))}return y&&Object.entries(y).forEach(([I,$])=>{N.searchParams.set(I,$)}),N}function hD({refreshToken:t,options:e,authentication:r,extraParams:i,resource:n}){let o=new URLSearchParams,s={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(o.set("grant_type","refresh_token"),o.set("refresh_token",t),r==="basic"){let a=Array.isArray(e.clientId)?e.clientId[0]:e.clientId;a?s.authorization="Basic "+Cr.encode(`${a}:${e.clientSecret??""}`):s.authorization="Basic "+Cr.encode(`:${e.clientSecret??""}`)}else{let a=Array.isArray(e.clientId)?e.clientId[0]:e.clientId;o.set("client_id",a),e.clientSecret&&o.set("client_secret",e.clientSecret)}if(n)if(typeof n=="string")o.append("resource",n);else for(let a of n)o.append("resource",a);if(i)for(let[a,c]of Object.entries(i))o.set(a,c);return{body:o,headers:s}}async function Fe({refreshToken:t,options:e,tokenEndpoint:r,authentication:i,extraParams:n}){let{body:o,headers:s}=hD({refreshToken:t,options:e,authentication:i,extraParams:n}),{data:a,error:c}=await _e(r,{method:"POST",body:o,headers:s});if(c)throw c;let u={accessToken:a.access_token,refreshToken:a.refresh_token,tokenType:a.token_type,scopes:a.scope?.split(" "),idToken:a.id_token};if(a.expires_in){let l=new Date;u.accessTokenExpiresAt=new Date(l.getTime()+a.expires_in*1e3)}return u}function gD({code:t,codeVerifier:e,redirectURI:r,options:i,authentication:n,deviceId:o,headers:s,additionalParams:a={},resource:c}){let u=new URLSearchParams,l={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...s};if(u.set("grant_type","authorization_code"),u.set("code",t),e&&u.set("code_verifier",e),i.clientKey&&u.set("client_key",i.clientKey),o&&u.set("device_id",o),u.set("redirect_uri",i.redirectURI||r),c)if(typeof c=="string")u.append("resource",c);else for(let f of c)u.append("resource",f);if(n==="basic"){let f=Array.isArray(i.clientId)?i.clientId[0]:i.clientId;l.authorization=`Basic ${Cr.encode(`${f}:${i.clientSecret??""}`)}`}else{let f=Array.isArray(i.clientId)?i.clientId[0]:i.clientId;u.set("client_id",f),i.clientSecret&&u.set("client_secret",i.clientSecret)}for(let[f,d]of Object.entries(a))u.has(f)||u.append(f,d);return{body:u,headers:l}}async function Ve({code:t,codeVerifier:e,redirectURI:r,options:i,tokenEndpoint:n,authentication:o,deviceId:s,headers:a,additionalParams:c={},resource:u}){let{body:l,headers:f}=gD({code:t,codeVerifier:e,redirectURI:r,options:i,authentication:o,deviceId:s,headers:a,additionalParams:c,resource:u}),{data:d,error:m}=await _e(n,{method:"POST",body:l,headers:f});if(m)throw m;return Ew(d)}var mW=t=>{let e="https://appleid.apple.com/auth/token";return{id:"apple",name:"Apple",async createAuthorizationURL({state:r,scopes:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["email","name"];return t.scope&&o.push(...t.scope),i&&o.push(...i),await Ye({id:"apple",options:t,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:o,state:r,redirectURI:n,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>Ve({code:r,codeVerifier:i,redirectURI:n,options:t,tokenEndpoint:e}),async verifyIdToken(r,i){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(r,i);let{kid:n,alg:o}=ul(r);if(!n||!o)return!1;let{payload:s}=await Si(r,await hW(n),{algorithms:[o],issuer:"https://appleid.apple.com",audience:t.audience&&t.audience.length?t.audience:t.appBundleIdentifier?t.appBundleIdentifier:t.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach(a=>{s[a]!==void 0&&(s[a]=!!s[a])}),i&&s.nonce!==i?!1:!!s},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);if(!r.idToken)return null;let i=Vn(r.idToken);if(!i)return null;let n=r.user?`${r.user.name?.firstName} ${r.user.name?.lastName}`:i.name||i.email,o=typeof i.email_verified=="boolean"?i.email_verified:i.email_verified==="true",s={...i,name:n},a=await t.mapProfileToUser?.(s);return{user:{id:i.sub,name:s.name,emailVerified:o,email:i.email,...a},data:s}},options:t}},hW=async t=>{let{data:e}=await _e("https://appleid.apple.com/auth/keys");if(!e?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let r=e.keys.find(i=>i.kid===t);if(!r)throw new Error(`JWK with kid ${t} not found`);return await Qi(r,r.alg)},gW=t=>({id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Secret are required for Atlassian"),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new de("codeVerifier is required for Atlassian");let o=t.disableDefaultScope?[]:["read:jira-user","offline_access"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ye({id:"atlassian",options:t,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n,additionalParams:{audience:"api.atlassian.com"},prompt:t.prompt})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.accessToken)return null;try{let{data:r}=await _e("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(!r)return null;let i=await t.mapProfileToUser?.(r);return{user:{id:r.account_id,name:r.name,email:r.email,image:r.picture,emailVerified:!1,...i},data:r}}catch(r){return ye.error("Failed to fetch user info from Figma:",r),null}},options:t}),yW=t=>{if(!t.domain||!t.region||!t.userPoolId)throw ye.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new de("DOMAIN_AND_REGION_REQUIRED");let e=t.domain.replace(/^https?:\/\//,""),r=`https://${e}/oauth2/authorize`,i=`https://${e}/oauth2/token`,n=`https://${e}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:o,scopes:s,codeVerifier:a,redirectURI:c}){if(!t.clientId)throw ye.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(t.requireClientSecret&&!t.clientSecret)throw ye.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new de("CLIENT_SECRET_REQUIRED");let u=t.disableDefaultScope?[]:["openid","profile","email"];t.scope&&u.push(...t.scope),s&&u.push(...s);let l=await Ye({id:"cognito",options:{...t},authorizationEndpoint:r,scopes:u,state:o,codeVerifier:a,redirectURI:c,prompt:t.prompt}),f=l.searchParams.get("scope");if(f){l.searchParams.delete("scope");let d=encodeURIComponent(f),m=l.toString(),h=m.includes("?")?"&":"?";return new URL(`${m}${h}scope=${d}`)}return l},validateAuthorizationCode:async({code:o,codeVerifier:s,redirectURI:a})=>Ve({code:o,codeVerifier:s,redirectURI:a,options:t,tokenEndpoint:i}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:i}),async verifyIdToken(o,s){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,s);try{let{kid:a,alg:c}=ul(o);if(!a||!c)return!1;let u=await wW(a,t.region,t.userPoolId),l=`https://cognito-idp.${t.region}.amazonaws.com/${t.userPoolId}`,{payload:f}=await Si(o,u,{algorithms:[c],issuer:l,audience:t.clientId,maxTokenAge:"1h"});return!(s&&f.nonce!==s)}catch(a){return ye.error("Failed to verify ID token:",a),!1}},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(o.idToken)try{let s=Vn(o.idToken);if(!s)return null;let a=s.name||s.given_name||s.username||s.email,c={...s,name:a},u=await t.mapProfileToUser?.(c);return{user:{id:s.sub,name:c.name,email:s.email,image:s.picture,emailVerified:s.email_verified,...u},data:c}}catch(s){ye.error("Failed to decode ID token:",s)}if(o.accessToken)try{let{data:s}=await _e(n,{headers:{Authorization:`Bearer ${o.accessToken}`}});if(s){let a=await t.mapProfileToUser?.(s);return{user:{id:s.sub,name:s.name||s.given_name||s.username,email:s.email,image:s.picture,emailVerified:s.email_verified,...a},data:s}}}catch(s){ye.error("Failed to fetch user info from Cognito:",s)}return null},options:t}},wW=async(t,e,r)=>{let i=`https://cognito-idp.${e}.amazonaws.com/${r}/.well-known/jwks.json`;try{let{data:n}=await _e(i);if(!n?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let o=n.keys.find(s=>s.kid===t);if(!o)throw new Error(`JWK with kid ${t} not found`);return await Qi(o,o.alg)}catch(n){throw ye.error("Failed to fetch Cognito public key:",n),n}},bW=t=>({id:"discord",name:"Discord",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["identify","email"];r&&n.push(...r),t.scope&&n.push(...t.scope);let o=n.includes("bot")&&t.permissions!==void 0?`&permissions=${t.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${n.join("+")}&response_type=code&client_id=${t.clientId}&redirect_uri=${encodeURIComponent(t.redirectURI||i)}&state=${e}&prompt=${t.prompt||"none"}${o}`)},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;if(r.avatar===null)r.image_url=`https://cdn.discordapp.com/embed/avatars/${r.discriminator==="0"?Number(BigInt(r.id)>>BigInt(22))%6:parseInt(r.discriminator)%5}.png`;else{let o=r.avatar.startsWith("a_")?"gif":"png";r.image_url=`https://cdn.discordapp.com/avatars/${r.id}/${r.avatar}.${o}`}let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.global_name||r.username||"",email:r.email,emailVerified:r.verified,image:r.image_url,...n},data:r}},options:t}),vW=t=>{let e="https://api.dropboxapi.com/oauth2/token";return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:r,scopes:i,codeVerifier:n,redirectURI:o})=>{let s=t.disableDefaultScope?[]:["account_info.read"];t.scope&&s.push(...t.scope),i&&s.push(...i);let a={};return t.accessType&&(a.token_access_type=t.accessType),await Ye({id:"dropbox",options:t,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:s,state:r,redirectURI:o,codeVerifier:n,additionalParams:a})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>await Ve({code:r,codeVerifier:i,redirectURI:n,options:t,tokenEndpoint:e}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${r.accessToken}`}});if(n)return null;let o=await t.mapProfileToUser?.(i);return{user:{id:i.account_id,name:i.name?.display_name,email:i.email,emailVerified:i.email_verified||!1,image:i.profile_photo_url,...o},data:i}},options:t}},xW=t=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:e,scopes:r,redirectURI:i,loginHint:n}){let o=t.disableDefaultScope?[]:["email","public_profile"];return t.scope&&o.push(...t.scope),r&&o.push(...r),await Ye({id:"facebook",options:t,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:o,state:e,redirectURI:i,loginHint:n,additionalParams:t.configId?{config_id:t.configId}:{}})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(e,r){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(e,r);if(e.split(".").length===3)try{let{payload:i}=await Si(e,fv(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:t.clientId,issuer:"https://www.facebook.com"});return r&&i.nonce!==r?!1:!!i}catch{return!1}return!0},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(e.idToken&&e.idToken.split(".").length===3){let o=Vn(e.idToken),s={id:o.sub,name:o.name,email:o.email,picture:{data:{url:o.picture,height:100,width:100,is_silhouette:!1}}},a=await t.mapProfileToUser?.({...s,email_verified:!1});return{user:{...s,emailVerified:!1,...a},data:o}}let{data:r,error:i}=await _e("https://graph.facebook.com/me?fields="+["id","name","email","picture",...t?.fields||[]].join(","),{auth:{type:"Bearer",token:e.accessToken}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.email,image:r.picture.data.url,emailVerified:r.email_verified,...n},data:r}},options:t}),SW=t=>({id:"figma",name:"Figma",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new de("codeVerifier is required for Figma");let o=t.disableDefaultScope?[]:["file_read"];return t.scope&&o.push(...t.scope),r&&o.push(...r),await Ye({id:"figma",options:t,authorizationEndpoint:"https://www.figma.com/oauth",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://www.figma.com/api/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);try{let{data:r}=await _e("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(!r)return ye.error("Failed to fetch user from Figma"),null;let i=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.handle,email:r.email,image:r.img_url,emailVerified:!1,...i},data:r}}catch(r){return ye.error("Failed to fetch user info from Figma:",r),null}},options:t}),NW=t=>{let e="https://github.com/login/oauth/access_token";return{id:"github",name:"GitHub",createAuthorizationURL({state:r,scopes:i,loginHint:n,codeVerifier:o,redirectURI:s}){let a=t.disableDefaultScope?[]:["read:user","user:email"];return t.scope&&a.push(...t.scope),i&&a.push(...i),Ye({id:"github",options:t,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:a,state:r,codeVerifier:o,redirectURI:s,loginHint:n,prompt:t.prompt})},validateAuthorizationCode:async({code:r,codeVerifier:i,redirectURI:n})=>Ve({code:r,codeVerifier:i,redirectURI:n,options:t,tokenEndpoint:e}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${r.accessToken}`}});if(n)return null;let{data:o}=await _e("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${r.accessToken}`,"User-Agent":"better-auth"}});!i.email&&o&&(i.email=(o.find(c=>c.primary)??o[0])?.email);let s=o?.find(c=>c.email===i.email)?.verified??!1,a=await t.mapProfileToUser?.(i);return{user:{id:i.id,name:i.name||i.login,email:i.email,image:i.avatar_url,emailVerified:s,...a},data:i}},options:t}},Zk=(t="")=>t.split("://").map(e=>e.replace(/\/{2,}/g,"/")).join("://"),AW=t=>{let e=t||"https://gitlab.com";return{authorizationEndpoint:Zk(`${e}/oauth/authorize`),tokenEndpoint:Zk(`${e}/oauth/token`),userinfoEndpoint:Zk(`${e}/api/v4/user`)}},EW=t=>{let{authorizationEndpoint:e,tokenEndpoint:r,userinfoEndpoint:i}=AW(t.issuer),n="gitlab";return{id:n,name:"Gitlab",createAuthorizationURL:async({state:o,scopes:s,codeVerifier:a,loginHint:c,redirectURI:u})=>{let l=t.disableDefaultScope?[]:["read_user"];return t.scope&&l.push(...t.scope),s&&l.push(...s),await Ye({id:n,options:t,authorizationEndpoint:e,scopes:l,state:o,redirectURI:u,codeVerifier:a,loginHint:c})},validateAuthorizationCode:async({code:o,redirectURI:s,codeVerifier:a})=>Ve({code:o,redirectURI:s,options:t,codeVerifier:a,tokenEndpoint:r}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:r}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);let{data:s,error:a}=await _e(i,{headers:{authorization:`Bearer ${o.accessToken}`}});if(a||s.state!=="active"||s.locked)return null;let c=await t.mapProfileToUser?.(s);return{user:{id:s.id,name:s.name??s.username,email:s.email,image:s.avatar_url,emailVerified:s.email_verified??!1,...c},data:s}},options:t}},_W=t=>({id:"google",name:"Google",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n,loginHint:o,display:s}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!i)throw new de("codeVerifier is required for Google");let a=t.disableDefaultScope?[]:["email","profile","openid"];return t.scope&&a.push(...t.scope),r&&a.push(...r),await Ye({id:"google",options:t,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:a,state:e,codeVerifier:i,redirectURI:n,prompt:t.prompt,accessType:t.accessType,display:s||t.display,loginHint:o,hd:t.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(e,r){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(e,r);let{kid:i,alg:n}=ul(e);if(!i||!n)return!1;let{payload:o}=await Si(e,await kW(i),{algorithms:[n],issuer:["https://accounts.google.com","accounts.google.com"],audience:t.clientId,maxTokenAge:"1h"});return!(r&&o.nonce!==r)},async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.idToken)return null;let r=Vn(e.idToken),i=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name,email:r.email,image:r.picture,emailVerified:r.email_verified,...i},data:r}},options:t}),kW=async t=>{let{data:e}=await _e("https://www.googleapis.com/oauth2/v3/certs");if(!e?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let r=e.keys.find(i=>i.kid===t);if(!r)throw new Error(`JWK with kid ${t} not found`);return await Qi(r,r.alg)},TW=t=>({id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["openid","profile","email"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ye({id:"huggingface",options:t,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://huggingface.co/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name||r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...n},data:r}},options:t}),IW=t=>({id:"kakao",name:"Kakao",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ye({id:"kakao",options:t,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:n,state:e,redirectURI:i})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i||!r)return null;let n=await t.mapProfileToUser?.(r),o=r.kakao_account||{},s=o.profile||{};return{user:{id:String(r.id),name:s.nickname||o.name||void 0,email:o.email,image:s.profile_image_url||s.thumbnail_image_url,emailVerified:!!o.is_email_valid&&!!o.is_email_verified,...n},data:r}},options:t}),$W=t=>({id:"kick",name:"Kick",createAuthorizationURL({state:e,scopes:r,redirectURI:i,codeVerifier:n}){let o=t.disableDefaultScope?[]:["user:read"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ye({id:"kick",redirectURI:i,options:t,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:o,codeVerifier:n,state:e})},async validateAuthorizationCode({code:e,redirectURI:r,codeVerifier:i}){return Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:i})},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=r.data[0],o=await t.mapProfileToUser?.(n);return{user:{id:n.user_id,name:n.name,email:n.email,image:n.profile_picture,emailVerified:!1,...o},data:n}},options:t}),CW=t=>{let e="https://access.line.me/oauth2/v2.1/authorize",r="https://api.line.me/oauth2/v2.1/token",i="https://api.line.me/oauth2/v2.1/userinfo",n="https://api.line.me/oauth2/v2.1/verify";return{id:"line",name:"LINE",async createAuthorizationURL({state:o,scopes:s,codeVerifier:a,redirectURI:c,loginHint:u}){let l=t.disableDefaultScope?[]:["openid","profile","email"];return t.scope&&l.push(...t.scope),s&&l.push(...s),await Ye({id:"line",options:t,authorizationEndpoint:e,scopes:l,state:o,codeVerifier:a,redirectURI:c,loginHint:u})},validateAuthorizationCode:async({code:o,codeVerifier:s,redirectURI:a})=>Ve({code:o,codeVerifier:s,redirectURI:a,options:t,tokenEndpoint:r}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:r}),async verifyIdToken(o,s){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,s);let a=new URLSearchParams;a.set("id_token",o),a.set("client_id",t.clientId),s&&a.set("nonce",s);let{data:c,error:u}=await _e(n,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:a});return!(u||!c||c.aud!==t.clientId||c.nonce&&c.nonce!==s)},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);let s=null;if(o.idToken)try{s=Vn(o.idToken)}catch{}if(!s){let{data:f}=await _e(i,{headers:{authorization:`Bearer ${o.accessToken}`}});s=f||null}if(!s)return null;let a=await t.mapProfileToUser?.(s),c=s.sub||s.userId,u=s.name||s.displayName,l=s.picture||s.pictureUrl||void 0;return{user:{id:c,name:u,email:s.email,image:l,emailVerified:!1,...a},data:s}},options:t}},OW=t=>{let e="https://api.linear.app/oauth/token";return{id:"linear",name:"Linear",createAuthorizationURL({state:r,scopes:i,loginHint:n,redirectURI:o}){let s=t.disableDefaultScope?[]:["read"];return t.scope&&s.push(...t.scope),i&&s.push(...i),Ye({id:"linear",options:t,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:s,state:r,redirectURI:o,loginHint:n})},validateAuthorizationCode:async({code:r,redirectURI:i})=>Ve({code:r,redirectURI:i,options:t,tokenEndpoint:e}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:e}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(n||!i?.data?.viewer)return null;let o=i.data.viewer,s=await t.mapProfileToUser?.(o);return{user:{id:i.data.viewer.id,name:i.data.viewer.name,email:i.data.viewer.email,image:i.data.viewer.avatarUrl,emailVerified:!1,...s},data:o}},options:t}},PW=t=>{let e="https://www.linkedin.com/oauth/v2/authorization",r="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:i,scopes:n,redirectURI:o,loginHint:s})=>{let a=t.disableDefaultScope?[]:["profile","email","openid"];return t.scope&&a.push(...t.scope),n&&a.push(...n),await Ye({id:"linkedin",options:t,authorizationEndpoint:e,scopes:a,state:i,loginHint:s,redirectURI:o})},validateAuthorizationCode:async({code:i,redirectURI:n})=>await Ve({code:i,redirectURI:n,options:t,tokenEndpoint:r}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async i=>Fe({refreshToken:i,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:r}),async getUserInfo(i){if(t.getUserInfo)return t.getUserInfo(i);let{data:n,error:o}=await _e("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${i.accessToken}`}});if(o)return null;let s=await t.mapProfileToUser?.(n);return{user:{id:n.sub,name:n.name,email:n.email,emailVerified:n.email_verified||!1,image:n.picture,...s},data:n}},options:t}},RW=t=>{let e=t.tenantId||"common",r=t.authority||"https://login.microsoftonline.com",i=`${r}/${e}/oauth2/v2.0/authorize`,n=`${r}/${e}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(o){let s=t.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return t.scope&&s.push(...t.scope),o.scopes&&s.push(...o.scopes),Ye({id:"microsoft",options:t,authorizationEndpoint:i,state:o.state,codeVerifier:o.codeVerifier,scopes:s,redirectURI:o.redirectURI,prompt:t.prompt,loginHint:o.loginHint})},validateAuthorizationCode({code:o,codeVerifier:s,redirectURI:a}){return Ve({code:o,codeVerifier:s,redirectURI:a,options:t,tokenEndpoint:n})},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(!o.idToken)return null;let s=Vn(o.idToken),a=t.profilePhotoSize||48;await _e(`https://graph.microsoft.com/v1.0/me/photos/${a}x${a}/$value`,{headers:{Authorization:`Bearer ${o.accessToken}`},async onResponse(l){if(!(t.disableProfilePhoto||!l.response.ok))try{let f=await l.response.clone().arrayBuffer();s.picture=`data:image/jpeg;base64, ${Cr.encode(f)}`}catch(f){ye.error(f&&typeof f=="object"&&"name"in f?f.name:"",f)}}});let c=await t.mapProfileToUser?.(s),u=s.email_verified!==void 0?s.email_verified:!!(s.email&&(s.verified_primary_email?.includes(s.email)||s.verified_secondary_email?.includes(s.email)));return{user:{id:s.sub,name:s.name,email:s.email,image:s.picture,emailVerified:u,...c},data:s}},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>{let s=t.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];return t.scope&&s.push(...t.scope),Fe({refreshToken:o,options:{clientId:t.clientId,clientSecret:t.clientSecret},extraParams:{scope:s.join(" ")},tokenEndpoint:n})},options:t}},UW=t=>({id:"naver",name:"Naver",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["profile","email"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ye({id:"naver",options:t,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:n,state:e,redirectURI:i})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i||!r||r.resultcode!=="00")return null;let n=await t.mapProfileToUser?.(r),o=r.response||{};return{user:{id:o.id,name:o.name||o.nickname,email:o.email,image:o.profile_image,emailVerified:!1,...n},data:r}},options:t}),DW=t=>{let e="https://api.notion.com/v1/oauth/token";return{id:"notion",name:"Notion",createAuthorizationURL({state:r,scopes:i,loginHint:n,redirectURI:o}){let s=t.disableDefaultScope?[]:[];return t.scope&&s.push(...t.scope),i&&s.push(...i),Ye({id:"notion",options:t,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:s,state:r,redirectURI:o,loginHint:n,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:r,redirectURI:i})=>Ve({code:r,redirectURI:i,options:t,tokenEndpoint:e,authentication:"basic"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:e}),async getUserInfo(r){if(t.getUserInfo)return t.getUserInfo(r);let{data:i,error:n}=await _e("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${r.accessToken}`,"Notion-Version":"2022-06-28"}});if(n||!i)return null;let o=i.bot?.owner?.user;if(!o)return null;let s=await t.mapProfileToUser?.(o);return{user:{id:o.id,name:o.name||"Notion User",email:o.person?.email||null,image:o.avatar_url,emailVerified:!1,...s},data:o}},options:t}},LW=t=>{let e=t.issuer||"https://idp.paybin.io",r=`${e}/oauth2/authorize`,i=`${e}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:n,scopes:o,codeVerifier:s,redirectURI:a,loginHint:c}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!s)throw new de("codeVerifier is required for Paybin");let u=t.disableDefaultScope?[]:["openid","email","profile"];return t.scope&&u.push(...t.scope),o&&u.push(...o),await Ye({id:"paybin",options:t,authorizationEndpoint:r,scopes:u,state:n,codeVerifier:s,redirectURI:a,prompt:t.prompt,loginHint:c})},validateAuthorizationCode:async({code:n,codeVerifier:o,redirectURI:s})=>Ve({code:n,codeVerifier:o,redirectURI:s,options:t,tokenEndpoint:i}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async n=>Fe({refreshToken:n,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:i}),async getUserInfo(n){if(t.getUserInfo)return t.getUserInfo(n);if(!n.idToken)return null;let o=Vn(n.idToken),s=await t.mapProfileToUser?.(o);return{user:{id:o.sub,name:o.name||o.preferred_username||(o.email?o.email.split("@")[0]:"User")||"User",email:o.email,image:o.picture,emailVerified:o.email_verified||!1,...s},data:o}},options:t}},zW=t=>{let e=(t.environment||"sandbox")==="sandbox",r=e?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",i=e?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",n=e?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:o,codeVerifier:s,redirectURI:a}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");return await Ye({id:"paypal",options:t,authorizationEndpoint:r,scopes:[],state:o,codeVerifier:s,redirectURI:a,prompt:t.prompt})},validateAuthorizationCode:async({code:o,redirectURI:s})=>{let a=Cr.encode(`${t.clientId}:${t.clientSecret}`);try{let c=await _e(i,{method:"POST",headers:{Authorization:`Basic ${a}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:o,redirect_uri:s}).toString()});if(!c.data)throw new de("FAILED_TO_GET_ACCESS_TOKEN");let u=c.data;return{accessToken:u.access_token,refreshToken:u.refresh_token,accessTokenExpiresAt:u.expires_in?new Date(Date.now()+u.expires_in*1e3):void 0,idToken:u.id_token}}catch(c){throw ye.error("PayPal token exchange failed:",c),new de("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>{let s=Cr.encode(`${t.clientId}:${t.clientSecret}`);try{let a=await _e(i,{method:"POST",headers:{Authorization:`Basic ${s}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:o}).toString()});if(!a.data)throw new de("FAILED_TO_REFRESH_ACCESS_TOKEN");let c=a.data;return{accessToken:c.access_token,refreshToken:c.refresh_token,accessTokenExpiresAt:c.expires_in?new Date(Date.now()+c.expires_in*1e3):void 0}}catch(a){throw ye.error("PayPal token refresh failed:",a),new de("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(o,s){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,s);try{return!!Vn(o).sub}catch(a){return ye.error("Failed to verify PayPal ID token:",a),!1}},async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(!o.accessToken)return ye.error("Access token is required to fetch PayPal user info"),null;try{let s=await _e(`${n}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${o.accessToken}`,Accept:"application/json"}});if(!s.data)return ye.error("Failed to fetch user info from PayPal"),null;let a=s.data,c=await t.mapProfileToUser?.(a);return{user:{id:a.user_id,name:a.name,email:a.email,image:a.picture,emailVerified:a.email_verified,...c},data:a}}catch(s){return ye.error("Failed to fetch user info from PayPal:",s),null}},options:t}},jW=t=>({id:"polar",name:"Polar",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["openid","profile","email"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ye({id:"polar",options:t,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n,prompt:t.prompt})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.public_name||r.username,email:r.email,image:r.avatar_url,emailVerified:r.email_verified??!1,...n},data:r}},options:t}),MW=t=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["identity"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ye({id:"reddit",options:t,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:n,state:e,redirectURI:i,duration:t.duration})},validateAuthorizationCode:async({code:e,redirectURI:r})=>{let i=new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:t.redirectURI||r}),{data:n,error:o}=await _e("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${Cr.encode(`${t.clientId}:${t.clientSecret}`)}`},body:i.toString()});if(o)throw o;return Ew(n)},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${e.accessToken}`,"User-Agent":"better-auth"}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.name,email:r.oauth_client_id,emailVerified:r.has_verified_email,image:r.icon_img?.split("?")[0],...n},data:r}},options:t}),BW=t=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["openid","profile"];return t.scope&&n.push(...t.scope),r&&n.push(...r),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${n.join("+")}&response_type=code&client_id=${t.clientId}&redirect_uri=${encodeURIComponent(t.redirectURI||i)}&state=${e}&prompt=${t.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:t.redirectURI||r,options:t,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.nickname||r.preferred_username||"",image:r.picture,email:r.preferred_username||null,emailVerified:!1,...n},data:{...r}}},options:t}),qW=t=>{let e=(t.environment??"production")==="sandbox",r=t.loginUrl?`https://${t.loginUrl}/services/oauth2/authorize`:e?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",i=t.loginUrl?`https://${t.loginUrl}/services/oauth2/token`:e?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",n=t.loginUrl?`https://${t.loginUrl}/services/oauth2/userinfo`:e?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:o,scopes:s,codeVerifier:a,redirectURI:c}){if(!t.clientId||!t.clientSecret)throw ye.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new de("CLIENT_ID_AND_SECRET_REQUIRED");if(!a)throw new de("codeVerifier is required for Salesforce");let u=t.disableDefaultScope?[]:["openid","email","profile"];return t.scope&&u.push(...t.scope),s&&u.push(...s),Ye({id:"salesforce",options:t,authorizationEndpoint:r,scopes:u,state:o,codeVerifier:a,redirectURI:t.redirectURI||c})},validateAuthorizationCode:async({code:o,codeVerifier:s,redirectURI:a})=>Ve({code:o,codeVerifier:s,redirectURI:t.redirectURI||a,options:t,tokenEndpoint:i}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async o=>Fe({refreshToken:o,options:{clientId:t.clientId,clientSecret:t.clientSecret},tokenEndpoint:i}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);try{let{data:s}=await _e(n,{headers:{Authorization:`Bearer ${o.accessToken}`}});if(!s)return ye.error("Failed to fetch user info from Salesforce"),null;let a=await t.mapProfileToUser?.(s);return{user:{id:s.user_id,name:s.name,email:s.email,image:s.photos?.picture||s.photos?.thumbnail,emailVerified:s.email_verified??!1,...a},data:s}}catch(s){return ye.error("Failed to fetch user info from Salesforce:",s),null}},options:t}},WW=t=>({id:"slack",name:"Slack",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["openid","profile","email"];r&&n.push(...r),t.scope&&n.push(...t.scope);let o=new URL("https://slack.com/openid/connect/authorize");return o.searchParams.set("scope",n.join(" ")),o.searchParams.set("response_type","code"),o.searchParams.set("client_id",t.clientId),o.searchParams.set("redirect_uri",t.redirectURI||i),o.searchParams.set("state",e),o},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://slack.com/api/openid.connect.token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r["https://slack.com/user_id"],name:r.name||"",email:r.email,emailVerified:r.email_verified,image:r.picture||r["https://slack.com/user_image_512"],...n},data:r}},options:t}),FW=t=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["user-read-email"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ye({id:"spotify",options:t,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.id,name:r.display_name,email:r.email,image:r.images[0]?.url,emailVerified:!1,...n},data:r}},options:t}),VW=t=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["user.info.profile"];return t.scope&&n.push(...t.scope),r&&n.push(...r),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${n.join(",")}&response_type=code&client_key=${t.clientKey}&redirect_uri=${encodeURIComponent(t.redirectURI||i)}&state=${e}`)},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:t.redirectURI||r,options:{clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientSecret:t.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:t.clientKey}}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e(`https://open.tiktokapis.com/v2/user/info/?fields=${["open_id","avatar_large_url","display_name","username"].join(",")}`,{headers:{authorization:`Bearer ${e.accessToken}`}});return i?null:{user:{email:r.data.user.email||r.data.user.username,id:r.data.user.open_id,name:r.data.user.display_name||r.data.user.username,image:r.data.user.avatar_large_url,emailVerified:!1},data:r}},options:t}),KW=t=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:e,scopes:r,redirectURI:i}){let n=t.disableDefaultScope?[]:["user:read:email","openid"];return t.scope&&n.push(...t.scope),r&&n.push(...r),Ye({id:"twitch",redirectURI:i,options:t,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:n,state:e,claims:t.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:e,redirectURI:r})=>Ve({code:e,redirectURI:r,options:t,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let r=e.idToken;if(!r)return ye.error("No idToken found in token"),null;let i=Vn(r),n=await t.mapProfileToUser?.(i);return{user:{id:i.sub,name:i.preferred_username,email:i.email,image:i.picture,emailVerified:i.email_verified,...n},data:i}},options:t}),HW=t=>({id:"twitter",name:"Twitter",createAuthorizationURL(e){let r=t.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return t.scope&&r.push(...t.scope),e.scopes&&r.push(...e.scopes),Ye({id:"twitter",options:t,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:r,state:e.state,codeVerifier:e.codeVerifier,redirectURI:e.redirectURI})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,authentication:"basic",redirectURI:i,options:t,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}});if(i)return null;let{data:n,error:o}=await _e("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${e.accessToken}`}}),s=!1;!o&&n?.data?.confirmed_email&&(r.data.email=n.data.confirmed_email,s=!0);let a=await t.mapProfileToUser?.(r);return{user:{id:r.data.id,name:r.data.name,email:r.data.email||r.data.username||null,image:r.data.profile_image_url,emailVerified:s,...a},data:r}},options:t}),JW=t=>({id:"vercel",name:"Vercel",createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){if(!i)throw new de("codeVerifier is required for Vercel");let o;return(t.scope!==void 0||r!==void 0)&&(o=[],t.scope&&o.push(...t.scope),r&&o.push(...r)),Ye({id:"vercel",options:t,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:o,state:e,codeVerifier:i,redirectURI:n})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i})=>Ve({code:e,codeVerifier:r,redirectURI:i,options:t,tokenEndpoint:"https://api.vercel.com/login/oauth/token"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);let{data:r,error:i}=await _e("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${e.accessToken}`}});if(i||!r)return null;let n=await t.mapProfileToUser?.(r);return{user:{id:r.sub,name:r.name??r.preferred_username,email:r.email,image:r.picture,emailVerified:r.email_verified??!1,...n},data:r}},options:t}),QW=t=>({id:"vk",name:"VK",async createAuthorizationURL({state:e,scopes:r,codeVerifier:i,redirectURI:n}){let o=t.disableDefaultScope?[]:["email","phone"];return t.scope&&o.push(...t.scope),r&&o.push(...r),Ye({id:"vk",options:t,authorizationEndpoint:"https://id.vk.com/authorize",scopes:o,state:e,redirectURI:n,codeVerifier:i})},validateAuthorizationCode:async({code:e,codeVerifier:r,redirectURI:i,deviceId:n})=>Ve({code:e,codeVerifier:r,redirectURI:t.redirectURI||i,options:t,deviceId:n,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>Fe({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.accessToken)return null;let r=new URLSearchParams({access_token:e.accessToken,client_id:t.clientId}).toString(),{data:i,error:n}=await _e("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(n)return null;let o=await t.mapProfileToUser?.(i);return!i.user.email&&!o?.email?null:{user:{id:i.user.user_id,first_name:i.user.first_name,last_name:i.user.last_name,email:i.user.email,image:i.user.avatar,emailVerified:!1,birthday:i.user.birthday,sex:i.user.sex,name:`${i.user.first_name} ${i.user.last_name}`,...o},data:i}},options:t}),ZW=t=>{let e={pkce:!0,...t};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:r,redirectURI:i,codeVerifier:n})=>{let o=new URLSearchParams({response_type:"code",redirect_uri:e.redirectURI?e.redirectURI:i,client_id:e.clientId,state:r});if(e.pkce){let a=await _w(n);o.set("code_challenge_method","S256"),o.set("code_challenge",a)}let s=new URL("https://zoom.us/oauth/authorize");return s.search=o.toString(),s},validateAuthorizationCode:async({code:r,redirectURI:i,codeVerifier:n})=>Ve({code:r,redirectURI:e.redirectURI||i,codeVerifier:n,options:e,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async r=>Fe({refreshToken:r,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(r){if(e.getUserInfo)return e.getUserInfo(r);let{data:i,error:n}=await _e("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${r.accessToken}`}});if(n)return null;let o=await e.mapProfileToUser?.(i);return{user:{id:i.id,name:i.display_name,image:i.pic_url,email:i.email,emailVerified:!!i.verified,...o},data:{...i}}}}},Gk={apple:mW,atlassian:gW,cognito:yW,discord:bW,facebook:xW,figma:SW,github:NW,microsoft:RW,google:_W,huggingface:TW,slack:WW,spotify:FW,twitch:KW,twitter:HW,dropbox:vW,kick:$W,linear:OW,linkedin:PW,gitlab:EW,tiktok:VW,reddit:MW,roblox:BW,salesforce:qW,vk:QW,zoom:ZW,notion:DW,kakao:IW,naver:UW,line:CW,paybin:LW,paypal:zW,polar:jW,vercel:JW},GW=Object.keys(Gk),kw=Xs(GW).or(Y());var yD=$e("/list-accounts",{method:"GET",use:[ls],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async t=>{let e=t.context.session,r=await t.context.internalAdapter.findAccounts(e.user.id);return t.json(r.map(i=>({id:i.id,providerId:i.providerId,createdAt:i.createdAt,updatedAt:i.updatedAt,accountId:i.accountId,userId:i.userId,scopes:i.scope?.split(",")||[]})))}),wD=$e("/link-social",{method:"POST",requireHeaders:!0,body:ke({callbackURL:Y().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:kw,idToken:ke({token:Y(),nonce:Y().optional(),accessToken:Y().optional(),refreshToken:Y().optional(),scopes:fn(Y()).optional()}).optional(),requestSignUp:Vt().optional(),scopes:fn(Y()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:Y().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:Vt().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:kn(Y(),Fr()).optional()}),use:[ls],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async t=>{let e=t.context.session,r=t.context.socialProviders.find(o=>o.id===t.body.provider);if(!r)throw t.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.PROVIDER_NOT_FOUND});if(t.body.idToken){if(!r.verifyIdToken)throw t.context.logger.error("Provider does not support id token verification",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.ID_TOKEN_NOT_SUPPORTED});let{token:o,nonce:s}=t.body.idToken;if(!await r.verifyIdToken(o,s))throw t.context.logger.error("Invalid id token",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.INVALID_TOKEN});let a=await r.getUserInfo({idToken:o,accessToken:t.body.idToken.accessToken,refreshToken:t.body.idToken.refreshToken});if(!a||!a?.user)throw t.context.logger.error("Failed to get user info",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.FAILED_TO_GET_USER_INFO});let c=String(a.user.id);if(!a.user.email)throw t.context.logger.error("User email not found",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.USER_EMAIL_NOT_FOUND});if((await t.context.internalAdapter.findAccounts(e.user.id)).find(u=>u.providerId===r.id&&u.accountId===c))return t.json({url:"",status:!0,redirect:!1});if(!t.context.options.account?.accountLinking?.trustedProviders?.includes(r.id)&&!a.user.emailVerified||t.context.options.account?.accountLinking?.enabled===!1)throw new V("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(a.user.email!==e.user.email&&t.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new V("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await t.context.internalAdapter.createAccount({userId:e.user.id,providerId:r.id,accountId:c,accessToken:t.body.idToken.accessToken,idToken:o,refreshToken:t.body.idToken.refreshToken,scope:t.body.idToken.scopes?.join(",")})}catch{throw new V("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(t.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await t.context.internalAdapter.updateUser(e.user.id,{name:a.user?.name,image:a.user?.image})}catch(u){console.warn("Could not update user - "+u.toString())}return t.json({url:"",status:!0,redirect:!1})}let i=await Ad(t,{userId:e.user.id,email:e.user.email},t.body.additionalData),n=await r.createAuthorizationURL({state:i.state,codeVerifier:i.codeVerifier,redirectURI:`${t.context.baseURL}/callback/${r.id}`,scopes:t.body.scopes});return t.json({url:n.toString(),redirect:!t.body.disableRedirect})}),bD=$e("/unlink-account",{method:"POST",body:ke({providerId:Y(),accountId:Y().optional()}),use:[Jk],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async t=>{let{providerId:e,accountId:r}=t.body,i=await t.context.internalAdapter.findAccounts(t.context.session.user.id);if(i.length===1&&!t.context.options.account?.accountLinking?.allowUnlinkingAll)throw new V("BAD_REQUEST",{message:ge.FAILED_TO_UNLINK_LAST_ACCOUNT});let n=i.find(o=>r?o.accountId===r&&o.providerId===e:o.providerId===e);if(!n)throw new V("BAD_REQUEST",{message:ge.ACCOUNT_NOT_FOUND});return await t.context.internalAdapter.deleteAccount(n.id),t.json({status:!0})}),Yk=$e("/get-access-token",{method:"POST",body:ke({providerId:Y().meta({description:"The provider ID for the OAuth provider"}),accountId:Y().meta({description:"The account ID associated with the refresh token"}).optional(),userId:Y().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async t=>{let{providerId:e,accountId:r,userId:i}=t.body||{},n=t.request,o=await Gr(t);if(n&&!o)throw t.error("UNAUTHORIZED");let s=o?.user?.id||i;if(!s)throw t.error("UNAUTHORIZED");if(!t.context.socialProviders.find(l=>l.id===e))throw new V("BAD_REQUEST",{message:`Provider ${e} is not supported.`});let a=await xw(t),c;if(a&&e===a.providerId&&(!r||a.id===r)?c=a:c=(await t.context.internalAdapter.findAccounts(s)).find(l=>r?l.id===r&&l.providerId===e:l.providerId===e),!c)throw new V("BAD_REQUEST",{message:"Account not found"});let u=t.context.socialProviders.find(l=>l.id===e);if(!u)throw new V("BAD_REQUEST",{message:`Provider ${e} not found.`});try{let l=null,f=c.accessTokenExpiresAt&&new Date(c.accessTokenExpiresAt).getTime()-Date.now()<5e3;if(c.refreshToken&&f&&u.refreshAccessToken){let m=await Aw(c.refreshToken,t.context);l=await u.refreshAccessToken(m);let h={accessToken:await Jt(l.accessToken,t.context),accessTokenExpiresAt:l.accessTokenExpiresAt,refreshToken:await Jt(l.refreshToken,t.context),refreshTokenExpiresAt:l.refreshTokenExpiresAt},p=null;c.id&&(p=await t.context.internalAdapter.updateAccount(c.id,h)),t.context.options.account?.storeAccountCookie&&await xu(t,{...c,...p??h})}let d={accessToken:l?.accessToken??await Aw(c.accessToken??"",t.context),accessTokenExpiresAt:l?.accessTokenExpiresAt??c.accessTokenExpiresAt??void 0,scopes:c.scope?.split(",")??[],idToken:l?.idToken??c.idToken??void 0};return t.json(d)}catch(l){throw new V("BAD_REQUEST",{message:"Failed to get a valid access token",cause:l})}}),vD=$e("/refresh-token",{method:"POST",body:ke({providerId:Y().meta({description:"The provider ID for the OAuth provider"}),accountId:Y().meta({description:"The account ID associated with the refresh token"}).optional(),userId:Y().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async t=>{let{providerId:e,accountId:r,userId:i}=t.body,n=t.request,o=await Gr(t);if(n&&!o)throw t.error("UNAUTHORIZED");let s=o?.user?.id||i;if(!s)throw new V("BAD_REQUEST",{message:"Either userId or session is required"});let a=t.context.socialProviders.find(f=>f.id===e);if(!a)throw new V("BAD_REQUEST",{message:`Provider ${e} not found.`});if(!a.refreshAccessToken)throw new V("BAD_REQUEST",{message:`Provider ${e} does not support token refreshing.`});let c,u=await xw(t);if(u&&(!e||e===u?.providerId)?c=u:c=(await t.context.internalAdapter.findAccounts(s)).find(f=>r?f.id===r&&f.providerId===e:f.providerId===e),!c)throw new V("BAD_REQUEST",{message:"Account not found"});let l;if(u&&e===u.providerId?l=u.refreshToken??void 0:l=c.refreshToken??void 0,!l)throw new V("BAD_REQUEST",{message:"Refresh token not found"});try{let f=await Aw(l,t.context),d=await a.refreshAccessToken(f);if(c.id){let m={...c||{},accessToken:await Jt(d.accessToken,t.context),refreshToken:await Jt(d.refreshToken,t.context),accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scopes?.join(",")||c.scope,idToken:d.idToken||c.idToken};await t.context.internalAdapter.updateAccount(c.id,m)}return u&&e===u.providerId&&t.context.options.account?.storeAccountCookie&&await xu(t,{...u,accessToken:await Jt(d.accessToken,t.context),refreshToken:await Jt(d.refreshToken,t.context),accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scopes?.join(",")||u.scope,idToken:d.idToken||u.idToken}),t.json({accessToken:d.accessToken,refreshToken:d.refreshToken,accessTokenExpiresAt:d.accessTokenExpiresAt,refreshTokenExpiresAt:d.refreshTokenExpiresAt,scope:d.scopes?.join(",")||c.scope,idToken:d.idToken||c.idToken,providerId:c.providerId,accountId:c.accountId})}catch(f){throw new V("BAD_REQUEST",{message:"Failed to refresh access token",cause:f})}}),YW=_n(ke({accountId:Y().meta({description:"The provider given account id for which to get the account info"}).optional()})),xD=$e("/account-info",{method:"GET",use:[ls],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:YW},async t=>{let e=t.query?.accountId,r;if(e){let s=await t.context.internalAdapter.findAccount(e);s&&(r=s)}else if(t.context.options.account?.storeAccountCookie){let s=await xw(t);s&&(r=s)}if(!r||r.userId!==t.context.session.user.id)throw new V("BAD_REQUEST",{message:"Account not found"});let i=t.context.socialProviders.find(s=>s.id===r.providerId);if(!i)throw new V("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${r.providerId} but it is not configured`});let n=await Yk({...t,method:"POST",body:{accountId:r.id,providerId:r.providerId},returnHeaders:!1,returnStatus:!1});if(!n.accessToken)throw new V("BAD_REQUEST",{message:"Access token not found"});let o=await i.getUserInfo({...n,accessToken:n.accessToken});return t.json(o)});async function zr(t,e,r,i=3600,n){return await ll({email:e.toLowerCase(),updateTo:r,...n},t,i)}async function Xk(t,e){if(!t.context.options.emailVerification?.sendVerificationEmail)throw t.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await zr(t.context.secret,e.email,void 0,t.context.options.emailVerification?.expiresIn),i=t.body.callbackURL?encodeURIComponent(t.body.callbackURL):encodeURIComponent("/"),n=`${t.context.baseURL}/verify-email?token=${r}&callbackURL=${i}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:e,url:n,token:r},t.request))}var SD=$e("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:ke({email:Rr().meta({description:"The email to send the verification email to"}),callbackURL:Y().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async t=>{if(!t.context.options.emailVerification?.sendVerificationEmail)throw t.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:e}=t.body,r=await Gr(t);if(!r){let i=await t.context.internalAdapter.findUserByEmail(e);return i?(await Xk(t,i.user),t.json({status:!0})):(await zr(t.context.secret,e,void 0,t.context.options.emailVerification?.expiresIn),t.json({status:!0}))}if(r?.user.emailVerified)throw new V("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(r?.user.email!==e)throw new V("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await Xk(t,r.user),t.json({status:!0})}),ND=$e("/verify-email",{method:"GET",operationId:"verifyEmail",query:ke({token:Y().meta({description:"The token to verify the email"}),callbackURL:Y().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[ra(t=>t.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async t=>{function e(a){throw t.query.callbackURL?t.query.callbackURL.includes("?")?t.redirect(`${t.query.callbackURL}&error=${a}`):t.redirect(`${t.query.callbackURL}?error=${a}`):new V("UNAUTHORIZED",{message:a})}let{token:r}=t.query,i;try{i=await Si(r,new TextEncoder().encode(t.context.secret),{algorithms:["HS256"]})}catch(a){return a instanceof Ns?e("token_expired"):e("invalid_token")}let n=ke({email:Rr(),updateTo:Y().optional(),requestType:Y().optional()}).parse(i.payload),o=await t.context.internalAdapter.findUserByEmail(n.email);if(!o)return e("user_not_found");if(n.updateTo){let a=await Gr(t);if(a&&a.user.email!==n.email)return e("unauthorized");if(n.requestType==="change-email-confirmation"){let f=await zr(t.context.secret,n.email,n.updateTo,t.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),d=t.query.callbackURL?encodeURIComponent(t.query.callbackURL):encodeURIComponent("/"),m=`${t.context.baseURL}/verify-email?token=${f}&callbackURL=${d}`;if(t.context.options.emailVerification?.sendVerificationEmail&&await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:{...o.user,email:n.updateTo},url:m,token:f},t.request)),t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0})}if(!a){let f=await t.context.internalAdapter.createSession(o.user.id);if(!f)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});a={session:f,user:o.user}}if(n.requestType==="change-email-verification"){let f=await t.context.internalAdapter.updateUserByEmail(n.email,{email:n.updateTo,emailVerified:!0});if(await ir(t,{session:a.session,user:{...a.user,email:n.updateTo,emailVerified:!0}}),t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:f})}let c=await t.context.internalAdapter.updateUserByEmail(n.email,{email:n.updateTo,emailVerified:!1}),u=await zr(t.context.secret,n.updateTo),l=t.query.callbackURL?encodeURIComponent(t.query.callbackURL):encodeURIComponent("/");if(t.context.options.emailVerification?.sendVerificationEmail&&await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:c,url:`${t.context.baseURL}/verify-email?token=${u}&callbackURL=${l}`,token:u},t.request)),await ir(t,{session:a.session,user:{...a.user,email:n.updateTo,emailVerified:!1}}),t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:{id:c.id,email:c.email,name:c.name,image:c.image,emailVerified:c.emailVerified,createdAt:c.createdAt,updatedAt:c.updatedAt}})}if(o.user.emailVerified){if(t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:null})}t.context.options.emailVerification?.onEmailVerification&&await t.context.options.emailVerification.onEmailVerification(o.user,t.request);let s=await t.context.internalAdapter.updateUserByEmail(n.email,{emailVerified:!0});if(t.context.options.emailVerification?.afterEmailVerification&&await t.context.options.emailVerification.afterEmailVerification(s,t.request),t.context.options.emailVerification?.autoSignInAfterVerification){let a=await Gr(t);if(!a||a.user.email!==n.email){let c=await t.context.internalAdapter.createSession(o.user.id);if(!c)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await ir(t,{session:c,user:{...o.user,emailVerified:!0}})}else await ir(t,{session:a.session,user:{...a.user,emailVerified:!0}})}if(t.query.callbackURL)throw t.redirect(t.query.callbackURL);return t.json({status:!0,user:null})});dr();async function Tw(t,e){let{userInfo:r,account:i,callbackURL:n,disableSignUp:o,overrideUserInfo:s}=e,a=await t.context.internalAdapter.findOAuthUser(r.email.toLowerCase(),i.accountId,i.providerId).catch(f=>{ye.error(`Better auth was unable to query your database.
Error: `,f);let d=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;throw t.redirect(`${d}?error=internal_server_error`)}),c=a?.user,u=!c;if(a){let f=a.accounts.find(d=>d.providerId===i.providerId&&d.accountId===i.accountId);if(f){if(t.context.options.account?.updateAccountOnSignIn!==!1){let d=Object.fromEntries(Object.entries({idToken:i.idToken,accessToken:await Jt(i.accessToken,t.context),refreshToken:await Jt(i.refreshToken,t.context),accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope}).filter(([m,h])=>h!==void 0));t.context.options.account?.storeAccountCookie&&await xu(t,{...i,...d}),Object.keys(d).length>0&&await t.context.internalAdapter.updateAccount(f.id,d)}r.emailVerified&&!a.user.emailVerified&&r.email.toLowerCase()===a.user.email&&await t.context.internalAdapter.updateUser(a.user.id,{emailVerified:!0})}else{let d=t.context.options.account?.accountLinking?.trustedProviders;if(!(e.isTrustedProvider||d?.includes(i.providerId))&&!r.emailVerified||t.context.options.account?.accountLinking?.enabled===!1)return Is()&&ye.warn(`User already exist but account isn't linked to ${i.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await t.context.internalAdapter.linkAccount({providerId:i.providerId,accountId:r.id.toString(),userId:a.user.id,accessToken:await Jt(i.accessToken,t.context),refreshToken:await Jt(i.refreshToken,t.context),idToken:i.idToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope})}catch(m){return ye.error("Unable to link account",m),{error:"unable to link account",data:null}}r.emailVerified&&!a.user.emailVerified&&r.email.toLowerCase()===a.user.email&&await t.context.internalAdapter.updateUser(a.user.id,{emailVerified:!0})}if(s){let{id:d,...m}=r;c=await t.context.internalAdapter.updateUser(a.user.id,{...m,email:r.email.toLowerCase(),emailVerified:r.email.toLowerCase()===a.user.email&&a.user.emailVerified||r.emailVerified})}}else{if(o)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:f,...d}=r,m={accessToken:await Jt(i.accessToken,t.context),refreshToken:await Jt(i.refreshToken,t.context),idToken:i.idToken,accessTokenExpiresAt:i.accessTokenExpiresAt,refreshTokenExpiresAt:i.refreshTokenExpiresAt,scope:i.scope,providerId:i.providerId,accountId:r.id.toString()},{user:h,account:p}=await t.context.internalAdapter.createOAuthUser({...d,email:r.email.toLowerCase()},m);if(c=h,t.context.options.account?.storeAccountCookie&&await xu(t,p),!r.emailVerified&&c&&t.context.options.emailVerification?.sendOnSignUp&&t.context.options.emailVerification?.sendVerificationEmail){let y=await zr(t.context.secret,c.email,void 0,t.context.options.emailVerification?.expiresIn),b=`${t.context.baseURL}/verify-email?token=${y}&callbackURL=${n}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:c,url:b,token:y},t.request))}}catch(f){return ye.error(f),f instanceof V?{error:f.message,data:null,isRegister:!1}:{error:"unable to create user",data:null,isRegister:!1}}}if(!c)return{error:"unable to create user",data:null,isRegister:!1};let l=await t.context.internalAdapter.createSession(c.id);return l?{data:{session:l,user:c},error:null,isRegister:u}:{error:"unable to create session",data:null,isRegister:!1}}var _a=ke({code:Y().optional(),error:Y().optional(),device_id:Y().optional(),error_description:Y().optional(),state:Y().optional(),user:Y().optional()}),AD=$e("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:_a.optional(),query:_a.optional(),metadata:{...ta,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async t=>{let e,r=t.context.options.onAPIError?.errorURL||`${t.context.baseURL}/error`;if(t.method==="POST"){let S=t.body?_a.parse(t.body):{},_=t.query?_a.parse(t.query):{},E=_a.parse({...S,..._}),C=new URLSearchParams;for(let[M,D]of Object.entries(E))D!=null&&C.set(M,String(D));let R=`${t.context.baseURL}/callback/${t.params.id}?${C.toString()}`;throw t.redirect(R)}try{if(t.method==="GET")e=_a.parse(t.query);else if(t.method==="POST")e=_a.parse(t.body);else throw new Error("Unsupported method")}catch(S){throw t.context.logger.error("INVALID_CALLBACK_REQUEST",S),t.redirect(`${r}?error=invalid_callback_request`)}let{code:i,error:n,state:o,error_description:s,device_id:a}=e;if(!o){t.context.logger.error("State not found",n);let S=`${r}${r.includes("?")?"&":"?"}state=state_not_found`;throw t.redirect(S)}let{codeVerifier:c,callbackURL:u,link:l,errorURL:f,newUserURL:d,requestSignUp:m}=await LA(t);function h(S,_){let E=f??r,C=new URLSearchParams({error:S});_&&C.set("error_description",_);let R=`${E}${E.includes("?")?"&":"?"}${C.toString()}`;throw t.redirect(R)}if(n&&h(n,s),!i)throw t.context.logger.error("Code not found"),h("no_code");let p=t.context.socialProviders.find(S=>S.id===t.params.id);if(!p)throw t.context.logger.error("Oauth provider with id",t.params.id,"not found"),h("oauth_provider_not_found");let y;try{y=await p.validateAuthorizationCode({code:i,codeVerifier:c,deviceId:a,redirectURI:`${t.context.baseURL}/callback/${p.id}`})}catch(S){throw t.context.logger.error("",S),h("invalid_code")}let b=await p.getUserInfo({...y,user:t.body?.user?bt(t.body.user):void 0}).then(S=>S?.user);if(!b)return t.context.logger.error("Unable to get user info"),h("unable_to_get_user_info");if(!u)throw t.context.logger.error("No callback URL found"),h("no_callback_url");if(l){if(!t.context.options.account?.accountLinking?.trustedProviders?.includes(p.id)&&!b.emailVerified||t.context.options.account?.accountLinking?.enabled===!1)return t.context.logger.error("Unable to link account - untrusted provider"),h("unable_to_link_account");if(b.email!==l.email&&t.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return h("email_doesn't_match");let S=await t.context.internalAdapter.findAccount(String(b.id));if(S){if(S.userId.toString()!==l.userId.toString())return h("account_already_linked_to_different_user");let E=Object.fromEntries(Object.entries({accessToken:await Jt(y.accessToken,t.context),refreshToken:await Jt(y.refreshToken,t.context),idToken:y.idToken,accessTokenExpiresAt:y.accessTokenExpiresAt,refreshTokenExpiresAt:y.refreshTokenExpiresAt,scope:y.scopes?.join(",")}).filter(([C,R])=>R!==void 0));await t.context.internalAdapter.updateAccount(S.id,E)}else if(!await t.context.internalAdapter.createAccount({userId:l.userId,providerId:p.id,accountId:String(b.id),...y,accessToken:await Jt(y.accessToken,t.context),refreshToken:await Jt(y.refreshToken,t.context),scope:y.scopes?.join(",")}))return h("unable_to_link_account");let _;try{_=u.toString()}catch{_=u}throw t.redirect(_)}if(!b.email)return t.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),h("email_not_found");let N={providerId:p.id,accountId:String(b.id),...y,scope:y.scopes?.join(",")},T=await Tw(t,{userInfo:{...b,id:String(b.id),email:b.email,name:b.name||b.email},account:N,callbackURL:u,disableSignUp:p.disableImplicitSignUp&&!m||p.options?.disableSignUp,overrideUserInfo:p.options?.overrideUserInfoOnSignIn});if(T.error)return t.context.logger.error(T.error.split(" ").join("_")),h(T.error.split(" ").join("_"));let{session:I,user:$}=T.data;await ir(t,{session:I,user:$});let v;try{v=(T.isRegister&&d||u).toString()}catch{v=T.isRegister&&d||u}throw t.redirect(v)});dr();function ED(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}var XW=(t,e="Unknown",r=null)=>{let i=t.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${i?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${i?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${i?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${i?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${i?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${i?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${i?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${i?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${i?.colors?.primary||"black"};
        --primary-foreground: ${i?.colors?.primaryForeground||"white"};
        --background: ${i?.colors?.background||"white"};
        --foreground: ${i?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${i?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${i?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${i?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${i?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${i?.colors?.primary||"white"};
          --primary-foreground: ${i?.colors?.primaryForeground||"black"};
          --background: ${i?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${i?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${i?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${i?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${i?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${i?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${i?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${i?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${i?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${i?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${i?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${i?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${i?.disableTitleBorder?"transparent":i?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${i?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${ED(e)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${r||`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(e)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(e)}?askai=${encodeURIComponent(`What does the error code ${e} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`},_D=$e("/error",{method:"GET",metadata:{...ta,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async t=>{let e=new URL(t.request?.url||""),r=e.searchParams.get("error")||"UNKNOWN",i=e.searchParams.get("error_description")||null,n=/^[\'A-Za-z0-9_-]+$/.test(r||"")?r:"UNKNOWN",o=i?ED(i):null,s=new URLSearchParams;s.set("error",n),i&&s.set("error_description",i);let a=t.context.options,c=a.onAPIError?.errorURL;return c?new Response(null,{status:302,headers:{Location:`${c}${c.includes("?")?"&":"?"}${s.toString()}`}}):Co&&!a.onAPIError?.customizeDefaultErrorPage?new Response(null,{status:302,headers:{Location:`/?${s.toString()}`}}):new Response(XW(t.context.options,n,o),{headers:{"Content-Type":"text/html"}})});var kD=$e("/ok",{method:"GET",metadata:{...ta,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async t=>t.json({ok:!0}));function TD(t,e,r){let i=e?new URL(e,t.baseURL):new URL(`${t.baseURL}/error`);return r&&Object.entries(r).forEach(([n,o])=>i.searchParams.set(n,o)),i.href}function e3(t,e,r){let i=new URL(e,t.baseURL);return r&&Object.entries(r).forEach(([n,o])=>i.searchParams.set(n,o)),i.href}var ID=$e("/request-password-reset",{method:"POST",body:ke({email:Rr().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:Y().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async t=>{if(!t.context.options.emailAndPassword?.sendResetPassword)throw t.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new V("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:e,redirectTo:r}=t.body,i=await t.context.internalAdapter.findUserByEmail(e,{includeAccounts:!0});if(!i)return Nn(24),await t.context.internalAdapter.findVerificationValue("dummy-verification-token"),t.context.logger.error("Reset Password: User not found",{email:e}),t.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let n=Ii(t.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600*1,"sec"),o=Nn(24);await t.context.internalAdapter.createVerificationValue({value:i.user.id,identifier:`reset-password:${o}`,expiresAt:n});let s=r?encodeURIComponent(r):"",a=`${t.context.baseURL}/reset-password/${o}?callbackURL=${s}`;return await t.context.runInBackgroundOrAwait(t.context.options.emailAndPassword.sendResetPassword({user:i.user,url:a,token:o},t.request)),t.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),$D=$e("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:ke({callbackURL:Y().meta({description:"The URL to redirect the user to reset their password"})}),use:[ra(t=>t.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async t=>{let{token:e}=t.params,{callbackURL:r}=t.query;if(!e||!r)throw t.redirect(TD(t.context,r,{error:"INVALID_TOKEN"}));let i=await t.context.internalAdapter.findVerificationValue(`reset-password:${e}`);throw!i||i.expiresAt<new Date?t.redirect(TD(t.context,r,{error:"INVALID_TOKEN"})):t.redirect(e3(t.context,r,{token:e}))}),CD=$e("/reset-password",{method:"POST",operationId:"resetPassword",query:ke({token:Y().optional()}).optional(),body:ke({newPassword:Y().meta({description:"The new password to set"}),token:Y().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async t=>{let e=t.body.token||t.query?.token;if(!e)throw new V("BAD_REQUEST",{message:ge.INVALID_TOKEN});let{newPassword:r}=t.body,i=t.context.password?.config.minPasswordLength,n=t.context.password?.config.maxPasswordLength;if(r.length<i)throw new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});if(r.length>n)throw new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});let o=`reset-password:${e}`,s=await t.context.internalAdapter.findVerificationValue(o);if(!s||s.expiresAt<new Date)throw new V("BAD_REQUEST",{message:ge.INVALID_TOKEN});let a=s.value,c=await t.context.password.hash(r);if((await t.context.internalAdapter.findAccounts(a)).find(u=>u.providerId==="credential")?await t.context.internalAdapter.updatePassword(a,c):await t.context.internalAdapter.createAccount({userId:a,providerId:"credential",password:c,accountId:a}),await t.context.internalAdapter.deleteVerificationValue(s.id),t.context.options.emailAndPassword?.onPasswordReset){let u=await t.context.internalAdapter.findUserById(a);u&&await t.context.options.emailAndPassword.onPasswordReset({user:u},t.request)}return t.context.options.emailAndPassword?.revokeSessionsOnPasswordReset&&await t.context.internalAdapter.deleteSessions(a),t.json({status:!0})});var t3=ke({callbackURL:Y().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:Y().optional(),errorCallbackURL:Y().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:kw,disableRedirect:Vt().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:_n(ke({token:Y().meta({description:"ID token from the provider"}),nonce:Y().meta({description:"Nonce used to generate the token"}).optional(),accessToken:Y().meta({description:"Access token from the provider"}).optional(),refreshToken:Y().meta({description:"Refresh token from the provider"}).optional(),expiresAt:dn().meta({description:"Expiry date of the token"}).optional()})),scopes:fn(Y()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:Vt().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:Y().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:kn(Y(),Fr()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),OD=()=>$e("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:t3,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async t=>{let e=t.context.socialProviders.find(o=>o.id===t.body.provider);if(!e)throw t.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.PROVIDER_NOT_FOUND});if(t.body.idToken){if(!e.verifyIdToken)throw t.context.logger.error("Provider does not support id token verification",{provider:t.body.provider}),new V("NOT_FOUND",{message:ge.ID_TOKEN_NOT_SUPPORTED});let{token:o,nonce:s}=t.body.idToken;if(!await e.verifyIdToken(o,s))throw t.context.logger.error("Invalid id token",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.INVALID_TOKEN});let a=await e.getUserInfo({idToken:o,accessToken:t.body.idToken.accessToken,refreshToken:t.body.idToken.refreshToken});if(!a||!a?.user)throw t.context.logger.error("Failed to get user info",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.FAILED_TO_GET_USER_INFO});if(!a.user.email)throw t.context.logger.error("User email not found",{provider:t.body.provider}),new V("UNAUTHORIZED",{message:ge.USER_EMAIL_NOT_FOUND});let c=await Tw(t,{userInfo:{...a.user,email:a.user.email,id:String(a.user.id),name:a.user.name||"",image:a.user.image,emailVerified:a.user.emailVerified||!1},account:{providerId:e.id,accountId:String(a.user.id),accessToken:t.body.idToken.accessToken},callbackURL:t.body.callbackURL,disableSignUp:e.disableImplicitSignUp&&!t.body.requestSignUp||e.disableSignUp});if(c.error)throw new V("UNAUTHORIZED",{message:c.error});return await ir(t,c.data),t.json({redirect:!1,token:c.data.session.token,url:void 0,user:er(t.context.options,c.data.user)})}let{codeVerifier:r,state:i}=await Ad(t,void 0,t.body.additionalData),n=await e.createAuthorizationURL({state:i,codeVerifier:r,redirectURI:`${t.context.baseURL}/callback/${e.id}`,scopes:t.body.scopes,loginHint:t.body.loginHint});return t.json({url:n.toString(),redirect:!t.body.disableRedirect})}),PD=()=>$e("/sign-in/email",{method:"POST",operationId:"signInEmail",body:ke({email:Y().meta({description:"Email of the user"}),password:Y().meta({description:"Password of the user"}),callbackURL:Y().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:Vt().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async t=>{if(!t.context.options?.emailAndPassword?.enabled)throw t.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new V("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:e,password:r}=t.body;if(!Rr().safeParse(e).success)throw new V("BAD_REQUEST",{message:ge.INVALID_EMAIL});let i=await t.context.internalAdapter.findUserByEmail(e,{includeAccounts:!0});if(!i)throw await t.context.password.hash(r),t.context.logger.error("User not found",{email:e}),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});let n=i.accounts.find(a=>a.providerId==="credential");if(!n)throw await t.context.password.hash(r),t.context.logger.error("Credential account not found",{email:e}),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});let o=n?.password;if(!o)throw await t.context.password.hash(r),t.context.logger.error("Password not found",{email:e}),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});if(!await t.context.password.verify({hash:o,password:r}))throw t.context.logger.error("Invalid password"),new V("UNAUTHORIZED",{message:ge.INVALID_EMAIL_OR_PASSWORD});if(t.context.options?.emailAndPassword?.requireEmailVerification&&!i.user.emailVerified){if(!t.context.options?.emailVerification?.sendVerificationEmail)throw new V("FORBIDDEN",{message:ge.EMAIL_NOT_VERIFIED});if(t.context.options?.emailVerification?.sendOnSignIn){let a=await zr(t.context.secret,i.user.email,void 0,t.context.options.emailVerification?.expiresIn),c=t.body.callbackURL?encodeURIComponent(t.body.callbackURL):encodeURIComponent("/"),u=`${t.context.baseURL}/verify-email?token=${a}&callbackURL=${c}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:i.user,url:u,token:a},t.request))}throw new V("FORBIDDEN",{message:ge.EMAIL_NOT_VERIFIED})}let s=await t.context.internalAdapter.createSession(i.user.id,t.body.rememberMe===!1);if(!s)throw t.context.logger.error("Failed to create session"),new V("UNAUTHORIZED",{message:ge.FAILED_TO_CREATE_SESSION});return await ir(t,{session:s,user:i.user},t.body.rememberMe===!1),t.json({redirect:!!t.body.callbackURL,token:s.token,url:t.body.callbackURL,user:er(t.context.options,i.user)})});var RD=$e("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async t=>{let e=await t.getSignedCookie(t.context.authCookies.sessionToken.name,t.context.secret);if(e)try{await t.context.internalAdapter.deleteSession(e)}catch(r){t.context.logger.error("Failed to delete session from database",r)}return us(t),t.json({success:!0})});dr();var r3=ke({name:Y().nonempty(),email:Rr(),password:Y().nonempty(),image:Y().optional(),callbackURL:Y().optional(),rememberMe:Vt().optional()}).and(kn(Y(),Fr())),UD=()=>$e("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",body:r3,metadata:{$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},422:{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async t=>Gu(t.context.adapter,async()=>{if(!t.context.options.emailAndPassword?.enabled||t.context.options.emailAndPassword?.disableSignUp)throw new V("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let e=t.body,{name:r,email:i,password:n,image:o,callbackURL:s,rememberMe:a,...c}=e;if(!Rr().safeParse(i).success)throw new V("BAD_REQUEST",{message:ge.INVALID_EMAIL});let u=t.context.password.config.minPasswordLength;if(n.length<u)throw t.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});let l=t.context.password.config.maxPasswordLength;if(n.length>l)throw t.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});if((await t.context.internalAdapter.findUserByEmail(i))?.user)throw t.context.logger.info(`Sign-up attempt for existing email: ${i}`),new V("UNPROCESSABLE_ENTITY",{message:ge.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let f=await t.context.password.hash(n),d;try{let h=kc(t.context.options,c,"create");if(d=await t.context.internalAdapter.createUser({email:i.toLowerCase(),name:r,image:o,...h,emailVerified:!1}),!d)throw new V("BAD_REQUEST",{message:ge.FAILED_TO_CREATE_USER})}catch(h){throw Is()&&t.context.logger.error("Failed to create user",h),h instanceof V?h:(t.context.logger?.error("Failed to create user",h),new V("UNPROCESSABLE_ENTITY",{message:ge.FAILED_TO_CREATE_USER}))}if(!d)throw new V("UNPROCESSABLE_ENTITY",{message:ge.FAILED_TO_CREATE_USER});if(await t.context.internalAdapter.linkAccount({userId:d.id,providerId:"credential",accountId:d.id,password:f}),t.context.options.emailVerification?.sendOnSignUp||t.context.options.emailAndPassword.requireEmailVerification){let h=await zr(t.context.secret,d.email,void 0,t.context.options.emailVerification?.expiresIn),p=e.callbackURL?encodeURIComponent(e.callbackURL):encodeURIComponent("/"),y=`${t.context.baseURL}/verify-email?token=${h}&callbackURL=${p}`;t.context.options.emailVerification?.sendVerificationEmail&&await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:d,url:y,token:h},t.request))}if(t.context.options.emailAndPassword.autoSignIn===!1||t.context.options.emailAndPassword.requireEmailVerification)return t.json({token:null,user:er(t.context.options,d)});let m=await t.context.internalAdapter.createSession(d.id,a===!1);if(!m)throw new V("BAD_REQUEST",{message:ge.FAILED_TO_CREATE_SESSION});return await ir(t,{session:m,user:d},a===!1),t.json({token:m.token,user:er(t.context.options,d)})}));var n3=kn(Y().meta({description:"Field name must be a string"}),Fr()),DD=()=>$e("/update-user",{method:"POST",operationId:"updateUser",body:n3,use:[ls],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async t=>{let e=t.body;if(typeof e!="object"||Array.isArray(e))throw new V("BAD_REQUEST",{message:"Body must be an object"});if(e.email)throw new V("BAD_REQUEST",{message:ge.EMAIL_CAN_NOT_BE_UPDATED});let{name:r,image:i,...n}=e,o=t.context.session,s=kc(t.context.options,n,"update");if(i===void 0&&r===void 0&&Object.keys(s).length===0)throw new V("BAD_REQUEST",{message:"No fields to update"});let a=await t.context.internalAdapter.updateUser(o.user.id,{name:r,image:i,...s})??{...o.user,...r!==void 0&&{name:r},...i!==void 0&&{image:i},...s};return await ir(t,{session:o.session,user:a}),t.json({status:!0})}),LD=$e("/change-password",{method:"POST",operationId:"changePassword",body:ke({newPassword:Y().meta({description:"The new password to set"}),currentPassword:Y().meta({description:"The current password is required"}),revokeOtherSessions:Vt().meta({description:"Must be a boolean value"}).optional()}),use:[yo],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async t=>{let{newPassword:e,currentPassword:r,revokeOtherSessions:i}=t.body,n=t.context.session,o=t.context.password.config.minPasswordLength;if(e.length<o)throw t.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});let s=t.context.password.config.maxPasswordLength;if(e.length>s)throw t.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});let a=(await t.context.internalAdapter.findAccounts(n.user.id)).find(l=>l.providerId==="credential"&&l.password);if(!a||!a.password)throw new V("BAD_REQUEST",{message:ge.CREDENTIAL_ACCOUNT_NOT_FOUND});let c=await t.context.password.hash(e);if(!await t.context.password.verify({hash:a.password,password:r}))throw new V("BAD_REQUEST",{message:ge.INVALID_PASSWORD});await t.context.internalAdapter.updateAccount(a.id,{password:c});let u=null;if(i){await t.context.internalAdapter.deleteSessions(n.user.id);let l=await t.context.internalAdapter.createSession(n.user.id);if(!l)throw new V("INTERNAL_SERVER_ERROR",{message:ge.FAILED_TO_GET_SESSION});await ir(t,{session:l,user:n.user}),u=l.token}return t.json({token:u,user:{id:n.user.id,email:n.user.email,name:n.user.name,image:n.user.image,emailVerified:n.user.emailVerified,createdAt:n.user.createdAt,updatedAt:n.user.updatedAt}})}),zD=$e({method:"POST",body:ke({newPassword:Y().meta({description:"The new password to set is required"})}),use:[yo]},async t=>{let{newPassword:e}=t.body,r=t.context.session,i=t.context.password.config.minPasswordLength;if(e.length<i)throw t.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_SHORT});let n=t.context.password.config.maxPasswordLength;if(e.length>n)throw t.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:ge.PASSWORD_TOO_LONG});let o=(await t.context.internalAdapter.findAccounts(r.user.id)).find(a=>a.providerId==="credential"&&a.password),s=await t.context.password.hash(e);if(!o)return await t.context.internalAdapter.linkAccount({userId:r.user.id,providerId:"credential",accountId:r.user.id,password:s}),t.json({status:!0});throw new V("BAD_REQUEST",{message:"user already has a password"})}),jD=$e("/delete-user",{method:"POST",use:[yo],body:ke({callbackURL:Y().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:Y().meta({description:"The password of the user is required to delete the user"}).optional(),token:Y().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async t=>{if(!t.context.options.user?.deleteUser?.enabled)throw t.context.logger.error("Delete user is disabled. Enable it in the options"),new V("NOT_FOUND");let e=t.context.session;if(t.body.password){let n=(await t.context.internalAdapter.findAccounts(e.user.id)).find(o=>o.providerId==="credential"&&o.password);if(!n||!n.password)throw new V("BAD_REQUEST",{message:ge.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await t.context.password.verify({hash:n.password,password:t.body.password}))throw new V("BAD_REQUEST",{message:ge.INVALID_PASSWORD})}if(t.body.token)return await eT({...t,query:{token:t.body.token}}),t.json({success:!0,message:"User deleted"});if(t.context.options.user.deleteUser?.sendDeleteAccountVerification){let n=Ma(32,"0-9","a-z");await t.context.internalAdapter.createVerificationValue({value:e.user.id,identifier:`delete-account-${n}`,expiresAt:new Date(Date.now()+(t.context.options.user.deleteUser?.deleteTokenExpiresIn||3600*24)*1e3)});let o=`${t.context.baseURL}/delete-user/callback?token=${n}&callbackURL=${t.body.callbackURL||"/"}`;return await t.context.runInBackgroundOrAwait(t.context.options.user.deleteUser.sendDeleteAccountVerification({user:e.user,url:o,token:n},t.request)),t.json({success:!0,message:"Verification email sent"})}if(!t.body.password&&t.context.sessionConfig.freshAge!==0){let n=new Date(e.session.createdAt).getTime(),o=t.context.sessionConfig.freshAge*1e3;if(Date.now()-n>o*1e3)throw new V("BAD_REQUEST",{message:ge.SESSION_EXPIRED})}let r=t.context.options.user.deleteUser?.beforeDelete;r&&await r(e.user,t.request),await t.context.internalAdapter.deleteUser(e.user.id),await t.context.internalAdapter.deleteSessions(e.user.id),us(t);let i=t.context.options.user.deleteUser?.afterDelete;return i&&await i(e.user,t.request),t.json({success:!0,message:"User deleted"})}),eT=$e("/delete-user/callback",{method:"GET",query:ke({token:Y().meta({description:"The token to verify the deletion request"}),callbackURL:Y().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[ra(t=>t.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async t=>{if(!t.context.options.user?.deleteUser?.enabled)throw t.context.logger.error("Delete user is disabled. Enable it in the options"),new V("NOT_FOUND");let e=await Gr(t);if(!e)throw new V("NOT_FOUND",{message:ge.FAILED_TO_GET_USER_INFO});let r=await t.context.internalAdapter.findVerificationValue(`delete-account-${t.query.token}`);if(!r||r.expiresAt<new Date)throw new V("NOT_FOUND",{message:ge.INVALID_TOKEN});if(r.value!==e.user.id)throw new V("NOT_FOUND",{message:ge.INVALID_TOKEN});let i=t.context.options.user.deleteUser?.beforeDelete;i&&await i(e.user,t.request),await t.context.internalAdapter.deleteUser(e.user.id),await t.context.internalAdapter.deleteSessions(e.user.id),await t.context.internalAdapter.deleteAccounts(e.user.id),await t.context.internalAdapter.deleteVerificationValue(r.id),us(t);let n=t.context.options.user.deleteUser?.afterDelete;if(n&&await n(e.user,t.request),t.query.callbackURL)throw t.redirect(t.query.callbackURL||"/");return t.json({success:!0,message:"User deleted"})}),MD=$e("/change-email",{method:"POST",body:ke({newEmail:Rr().meta({description:"The new email address to set must be a valid email address"}),callbackURL:Y().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[yo],metadata:{openapi:{operationId:"changeEmail",responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},422:{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async t=>{if(!t.context.options.user?.changeEmail?.enabled)throw t.context.logger.error("Change email is disabled."),new V("BAD_REQUEST",{message:"Change email is disabled"});let e=t.body.newEmail.toLowerCase();if(e===t.context.session.user.email)throw t.context.logger.error("Email is the same"),new V("BAD_REQUEST",{message:"Email is the same"});if(await t.context.internalAdapter.findUserByEmail(e))throw t.context.logger.error("Email already exists"),new V("UNPROCESSABLE_ENTITY",{message:ge.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(t.context.session.user.emailVerified!==!0&&t.context.options.user.changeEmail.updateEmailWithoutVerification){if(await t.context.internalAdapter.updateUserByEmail(t.context.session.user.email,{email:e}),await ir(t,{session:t.context.session.session,user:{...t.context.session.user,email:e}}),t.context.options.emailVerification?.sendVerificationEmail){let n=await zr(t.context.secret,e,void 0,t.context.options.emailVerification?.expiresIn),o=`${t.context.baseURL}/verify-email?token=${n}&callbackURL=${t.body.callbackURL||"/"}`;await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:{...t.context.session.user,email:e},url:o,token:n},t.request))}return t.json({status:!0})}if(t.context.session.user.emailVerified&&(t.context.options.user.changeEmail.sendChangeEmailConfirmation||t.context.options.user.changeEmail.sendChangeEmailVerification)){let n=await zr(t.context.secret,t.context.session.user.email,e,t.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),o=`${t.context.baseURL}/verify-email?token=${n}&callbackURL=${t.body.callbackURL||"/"}`,s=t.context.options.user.changeEmail.sendChangeEmailConfirmation||t.context.options.user.changeEmail.sendChangeEmailVerification;return s&&await t.context.runInBackgroundOrAwait(s({user:t.context.session.user,newEmail:e,url:o,token:n},t.request)),t.json({status:!0})}if(!t.context.options.emailVerification?.sendVerificationEmail)throw t.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let r=await zr(t.context.secret,t.context.session.user.email,e,t.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),i=`${t.context.baseURL}/verify-email?token=${r}&callbackURL=${t.body.callbackURL||"/"}`;return await t.context.runInBackgroundOrAwait(t.context.options.emailVerification.sendVerificationEmail({user:{...t.context.session.user,email:e},url:i,token:r},t.request)),t.json({status:!0})});dr();function tT(t){if(t===null||typeof t!="object")return!1;let e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function rT(t,e,r=".",i){if(!tT(e))return rT(t,{},r,i);let n=Object.assign({},e);for(let o in t){if(o==="__proto__"||o==="constructor")continue;let s=t[o];s!=null&&(i&&i(n,o,s,r)||(Array.isArray(s)&&Array.isArray(n[o])?n[o]=[...s,...n[o]]:tT(s)&&tT(n[o])?n[o]=rT(s,n[o],(r?`${r}.`:"")+o.toString(),i):n[o]=s))}return n}function gf(t){return(...e)=>e.reduce((r,i)=>rT(r,i,"",t),{})}var Iw=gf(),HAe=gf((t,e,r)=>{if(t[e]!==void 0&&typeof r=="function")return t[e]=r(t[e]),!0}),JAe=gf((t,e,r)=>{if(Array.isArray(t[e])&&typeof r=="function")return t[e]=r(t[e]),!0});var BD=gf((t,e,r)=>{if(Array.isArray(t[e])&&Array.isArray(r))return t[e]=r,!0});function qD(t,e){let r={};for(let[i,n]of Object.entries(t))r[i]=async o=>{let s=async()=>{let a=await e,c={...o,context:{...a,returned:void 0,responseHeaders:void 0,session:null},path:n.path,headers:o?.headers?new Headers(o?.headers):void 0};return vs(c,async()=>{let{beforeHooks:u,afterHooks:l}=s3(a),f=await i3(c,u);if("context"in f&&f.context&&typeof f.context=="object"){let{headers:h,...p}=f.context;h&&h.forEach((y,b)=>{c.headers.set(b,y)}),c=BD(p,c)}else if(f)return o?.asResponse?Yn(f,{headers:o?.headers}):o?.returnHeaders?{headers:o?.headers,response:f}:f;c.asResponse=!1,c.returnHeaders=!0,c.returnStatus=!0;let d=await vs(c,()=>n(c)).catch(h=>{if(h instanceof V)return{response:h,status:h.statusCode,headers:h.headers?new Headers(h.headers):null};throw h});if(d&&d instanceof Response)return d;c.context.returned=d.response,c.context.responseHeaders=d.headers;let m=await o3(c,l);if(m.response&&(d.response=m.response),d.response instanceof V&&Xa(a.logger.level,"debug")&&(d.response.stack=d.response.errorStack),d.response instanceof V&&!o?.asResponse)throw d.response;return o?.asResponse?Yn(d.response,{headers:d.headers,status:d.status}):o?.returnHeaders?o?.returnStatus?{headers:d.headers,response:d.response,status:d.status}:{headers:d.headers,response:d.response}:o?.returnStatus?{response:d.response,status:d.status}:d.response})};return await Bb()?s():qb(new WeakMap,s)},r[i].path=n.path,r[i].options=n.options;return r}async function i3(t,e){let r={};for(let i of e)if(i.matcher(t)){let n=await i.handler({...t,returnHeaders:!1}).catch(o=>{throw o instanceof V&&Xa(t.context.logger.level,"debug")&&(o.stack=o.errorStack),o});if(n&&typeof n=="object"){if("context"in n&&typeof n.context=="object"){let{headers:o,...s}=n.context;o instanceof Headers&&(r.headers?o.forEach((a,c)=>{r.headers?.set(c,a)}):r.headers=o),r=BD(s,r);continue}return n}}return{context:r}}async function o3(t,e){for(let r of e)if(r.matcher(t)){let i=await r.handler(t).catch(n=>{if(n instanceof V)return Xa(t.context.logger.level,"debug")&&(n.stack=n.errorStack),{response:n,headers:n.headers?new Headers(n.headers):null};throw n});i.headers&&i.headers.forEach((n,o)=>{t.context.responseHeaders?o.toLowerCase()==="set-cookie"?t.context.responseHeaders.append(o,n):t.context.responseHeaders.set(o,n):t.context.responseHeaders=new Headers({[o]:n})}),i.response&&(t.context.returned=i.response)}return{response:t.context.returned,headers:t.context.responseHeaders}}function s3(t){let e=t.options.plugins||[],r=[],i=[];t.options.hooks?.before&&r.push({matcher:()=>!0,handler:t.options.hooks.before}),t.options.hooks?.after&&i.push({matcher:()=>!0,handler:t.options.hooks.after});let n=e.map(s=>{if(s.hooks?.before)return s.hooks.before}).filter(s=>s!==void 0).flat(),o=e.map(s=>{if(s.hooks?.after)return s.hooks.after}).filter(s=>s!==void 0).flat();return n.length&&r.push(...n),o.length&&i.push(...o),{beforeHooks:r,afterHooks:i}}dr();function WD(t,e){let r=new Map;t.plugins?.forEach(n=>{if(n.endpoints){for(let[o,s]of Object.entries(n.endpoints))if(s&&"path"in s&&typeof s.path=="string"){let a=s.path,c=[];s.options&&"method"in s.options&&(Array.isArray(s.options.method)?c=s.options.method:typeof s.options.method=="string"&&(c=[s.options.method])),c.length===0&&(c=["*"]),r.has(a)||r.set(a,[]),r.get(a).push({pluginId:n.id,endpointKey:o,methods:c})}}});let i=[];for(let[n,o]of r.entries())if(o.length>1){let s=new Map,a=!1;for(let c of o)for(let u of c.methods)s.has(u)||s.set(u,[]),s.get(u).push(c.pluginId),s.get(u).length>1&&(a=!0),(u==="*"&&o.length>1||u!=="*"&&s.has("*"))&&(a=!0);if(a){let c=[...new Set(o.map(l=>l.pluginId))],u=[];for(let[l,f]of s.entries())(f.length>1||l==="*"&&o.length>1||l!=="*"&&s.has("*"))&&u.push(l);i.push({path:n,plugins:c,conflictingMethods:u})}}if(i.length>0){let n=i.map(o=>`  - "${o.path}" [${o.conflictingMethods.join(", ")}] used by plugins: ${o.plugins.join(", ")}`).join(`
`);e.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${n}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function nT(t,e){let r=e.plugins?.reduce((n,o)=>({...n,...o.endpoints}),{})??{},i=e.plugins?.map(n=>n.middlewares?.map(o=>{let s=(async a=>{let c=await t;return o.middleware({...a,context:{...c,...a.context}})});return s.options=o.middleware.options,{path:o.path,middleware:s}})).filter(n=>n!==void 0).flat()||[];return{api:qD({signInSocial:OD(),callbackOAuth:AD,getSession:Hk(),signOut:RD,signUpEmail:UD(),signInEmail:PD(),resetPassword:CD,verifyEmail:ND,sendVerificationEmail:SD,changeEmail:MD,changePassword:LD,setPassword:zD,updateUser:DD(),deleteUser:jD,requestPasswordReset:ID,requestPasswordResetCallback:$D,listSessions:iD(),revokeSession:oD,revokeSessions:sD,revokeOtherSessions:aD,linkSocialAccount:wD,listUserAccounts:yD,deleteUserCallback:eT,unlinkAccount:bD,refreshToken:vD,getAccessToken:Yk,accountInfo:xD,...r,ok:kD,error:_D},t),middlewares:i}}var FD=(t,e)=>{let{api:r,middlewares:i}=nT(t,e),n=new URL(t.baseURL).pathname;return DA(r,{routerContext:t,openapi:{disabled:!0},basePath:n,routerMiddleware:[{path:"/**",middleware:EP},...i],allowedMediaTypes:["application/json"],async onRequest(o){let s=t.options.disabledPaths||[],a=new URL(o.url).pathname.replace(/\/+$/,"")||"/",c=n==="/"?a:a.startsWith(n)?a.slice(n.length).replace(/\/+$/,"")||"/":a;if(s.includes(c))return new Response("Not Found",{status:404});for(let u of t.options.plugins||[])if(u.onRequest){let l=await u.onRequest(o,t);if(l&&"response"in l)return l.response;if(l&&"request"in l){let f=await MA(l.request,t);return f||l.request}}return MA(o,t)},async onResponse(o){for(let s of t.options.plugins||[])if(s.onResponse){let a=await s.onResponse(o,t);if(a)return a.response}return o},onError(o){if(o instanceof V&&o.status==="FOUND")return;if(e.onAPIError?.throw)throw o;if(e.onAPIError?.onError){e.onAPIError.onError(o,t);return}let s=e.logger?.level,a=s==="error"||s==="warn"||s==="debug"?ye:void 0;if(e.logger?.disabled!==!0){if(o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&(o.message.includes("no column")||o.message.includes("column")||o.message.includes("relation")||o.message.includes("table")||o.message.includes("does not exist"))){t.logger?.error(o.message);return}o instanceof V?(o.status==="INTERNAL_SERVER_ERROR"&&t.logger.error(o.status,o),a?.error(o.message)):t.logger?.error(o&&typeof o=="object"&&"name"in o?o.name:"",o)}}})};pw();dr();function a3(t){try{return(new URL(t).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new de(`Invalid base URL: ${t}. Please provide a valid base URL.`)}}function c3(t){try{let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new de(`Invalid base URL: ${t}. URL must include 'http://' or 'https://'`)}catch(e){throw e instanceof de?e:new de(`Invalid base URL: ${t}. Please provide a valid base URL.`,String(e))}}function yf(t,e="/api/auth"){if(c3(t),a3(t))return t;let r=t.replace(/\/+$/,"");return!e||e==="/"?r:(e=e.startsWith("/")?e:`/${e}`,`${r}${e}`)}function VD(t,e){return!t||t.trim()===""?!1:e==="proto"?t==="http"||t==="https":e==="host"?[/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some(r=>r.test(t))?!1:/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(t)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test(t)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test(t)||/^localhost(:[0-9]{1,5})?$/i.test(t):!1}function Su(t,e,r,i,n){if(t)return yf(t,e);if(i!==!1){let a=je.BETTER_AUTH_URL||je.NEXT_PUBLIC_BETTER_AUTH_URL||je.PUBLIC_BETTER_AUTH_URL||je.NUXT_PUBLIC_BETTER_AUTH_URL||je.NUXT_PUBLIC_AUTH_URL||(je.BASE_URL!=="/"?je.BASE_URL:void 0);if(a)return yf(a,e)}let o=r?.headers.get("x-forwarded-host"),s=r?.headers.get("x-forwarded-proto");if(o&&s&&n&&VD(s,"proto")&&VD(o,"host"))try{return yf(`${s}://${o}`,e)}catch{}if(r){let a=Nu(r.url);if(!a)throw new de("Could not get origin from request. Please provide a valid base URL.");return yf(a,e)}if(typeof window<"u"&&window.location)return yf(window.location.origin,e)}function Nu(t){try{let e=new URL(t);return e.origin==="null"?null:e.origin}catch{return null}}function KD(t){try{return new URL(t).protocol}catch{return null}}function HD(t){try{return new URL(t).host}catch{return null}}var JD=(t,e,r)=>{if(t.startsWith("/"))return r?.allowRelativePaths?t.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(t):!1;if(e.includes("*")||e.includes("?")){if(e.includes("://"))return _d(e)(Nu(t)||t);let n=HD(t);return n?_d(e)(n):!1}let i=KD(t);return i==="http:"||i==="https:"||!i?e===Nu(t):t.startsWith(e)};var iT="better-auth-secret-12345678901234567890";function $w(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}async function QD(t,e){let r=(await e.context.internalAdapter.findAccounts(t))?.find(n=>n.providerId==="credential"),i=r?.password;if(!r||!i||!e.body.password)throw new V("BAD_REQUEST",{message:"No password credential found"});if(!await e.context.password.verify({hash:i,password:e.body.password}))throw new V("BAD_REQUEST",{message:"Invalid password"});return!0}dr();async function ZD(t){let e=t.options,r=e.plugins||[],i=t,n=[];for(let o of r)if(o.init){let s=o.init(i),a;if($w(s)?a=await s:a=s,typeof a=="object"){if(a.options){let{databaseHooks:c,...u}=a.options;c&&n.push(c),e=Iw(e,u)}a.context&&(i={...i,...a.context})}}return n.push(e.databaseHooks),i.internalAdapter=vu(i.adapter,{options:e,logger:i.logger,hooks:n.filter(o=>o!==void 0),generateId:i.generateId}),i.options=e,{context:i}}function GD(t){let e=[];return t.advanced?.crossSubDomainCookies?.enabled,e}async function Cw(t,e){let r=Su(t.baseURL,t.basePath),i=r?[new URL(r).origin]:[];t.trustedOrigins&&(Array.isArray(t.trustedOrigins)&&i.push(...t.trustedOrigins),typeof t.trustedOrigins=="function"&&i.push(...await t.trustedOrigins(e)));let n=je.BETTER_AUTH_TRUSTED_ORIGINS;if(n&&i.push(...n.split(",")),i.filter(o=>!o).length)throw new de("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return i}dr();dr();cp();function rL(t,e){return{database:e?.database,adapter:e?.adapter,emailVerification:{sendVerificationEmail:!!t.emailVerification?.sendVerificationEmail,sendOnSignUp:!!t.emailVerification?.sendOnSignUp,sendOnSignIn:!!t.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!t.emailVerification?.autoSignInAfterVerification,expiresIn:t.emailVerification?.expiresIn,onEmailVerification:!!t.emailVerification?.onEmailVerification,afterEmailVerification:!!t.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!t.emailAndPassword?.enabled,disableSignUp:!!t.emailAndPassword?.disableSignUp,requireEmailVerification:!!t.emailAndPassword?.requireEmailVerification,maxPasswordLength:t.emailAndPassword?.maxPasswordLength,minPasswordLength:t.emailAndPassword?.minPasswordLength,sendResetPassword:!!t.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:t.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!t.emailAndPassword?.onPasswordReset,password:{hash:!!t.emailAndPassword?.password?.hash,verify:!!t.emailAndPassword?.password?.verify},autoSignIn:!!t.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!t.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(t.socialProviders||{}).map(r=>{let i=t.socialProviders?.[r];return i?{id:r,mapProfileToUser:!!i.mapProfileToUser,disableDefaultScope:!!i.disableDefaultScope,disableIdTokenSignIn:!!i.disableIdTokenSignIn,disableImplicitSignUp:i.disableImplicitSignUp,disableSignUp:i.disableSignUp,getUserInfo:!!i.getUserInfo,overrideUserInfoOnSignIn:!!i.overrideUserInfoOnSignIn,prompt:i.prompt,verifyIdToken:!!i.verifyIdToken,scope:i.scope,refreshAccessToken:!!i.refreshAccessToken}:{}}),plugins:t.plugins?.map(r=>r.id.toString()),user:{modelName:t.user?.modelName,fields:t.user?.fields,additionalFields:t.user?.additionalFields,changeEmail:{enabled:t.user?.changeEmail?.enabled,sendChangeEmailVerification:!!t.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:t.verification?.modelName,disableCleanup:t.verification?.disableCleanup,fields:t.verification?.fields},session:{modelName:t.session?.modelName,additionalFields:t.session?.additionalFields,cookieCache:{enabled:t.session?.cookieCache?.enabled,maxAge:t.session?.cookieCache?.maxAge,strategy:t.session?.cookieCache?.strategy},disableSessionRefresh:t.session?.disableSessionRefresh,expiresIn:t.session?.expiresIn,fields:t.session?.fields,freshAge:t.session?.freshAge,preserveSessionInDatabase:t.session?.preserveSessionInDatabase,storeSessionInDatabase:t.session?.storeSessionInDatabase,updateAge:t.session?.updateAge},account:{modelName:t.account?.modelName,fields:t.account?.fields,encryptOAuthTokens:t.account?.encryptOAuthTokens,updateAccountOnSignIn:t.account?.updateAccountOnSignIn,accountLinking:{enabled:t.account?.accountLinking?.enabled,trustedProviders:t.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:t.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:t.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!t.hooks?.after,before:!!t.hooks?.before},secondaryStorage:!!t.secondaryStorage,advanced:{cookiePrefix:!!t.advanced?.cookiePrefix,cookies:!!t.advanced?.cookies,crossSubDomainCookies:{domain:!!t.advanced?.crossSubDomainCookies?.domain,enabled:t.advanced?.crossSubDomainCookies?.enabled,additionalCookies:t.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!t.advanced?.database?.useNumberId||t.advanced?.database?.generateId==="serial",generateId:t.advanced?.database?.generateId,defaultFindManyLimit:t.advanced?.database?.defaultFindManyLimit},useSecureCookies:t.advanced?.useSecureCookies,ipAddress:{disableIpTracking:t.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:t.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:t.advanced?.disableCSRFCheck,cookieAttributes:{expires:t.advanced?.defaultCookieAttributes?.expires,secure:t.advanced?.defaultCookieAttributes?.secure,sameSite:t.advanced?.defaultCookieAttributes?.sameSite,domain:!!t.advanced?.defaultCookieAttributes?.domain,path:t.advanced?.defaultCookieAttributes?.path,httpOnly:t.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:t.trustedOrigins?.length,rateLimit:{storage:t.rateLimit?.storage,modelName:t.rateLimit?.modelName,window:t.rateLimit?.window,customStorage:!!t.rateLimit?.customStorage,enabled:t.rateLimit?.enabled,max:t.rateLimit?.max},onAPIError:{errorURL:t.onAPIError?.errorURL,onError:!!t.onAPIError?.onError,throw:t.onAPIError?.throw},logger:{disabled:t.logger?.disabled,level:t.logger?.level,log:!!t.logger?.log},databaseHooks:{user:{create:{after:!!t.databaseHooks?.user?.create?.after,before:!!t.databaseHooks?.user?.create?.before},update:{after:!!t.databaseHooks?.user?.update?.after,before:!!t.databaseHooks?.user?.update?.before}},session:{create:{after:!!t.databaseHooks?.session?.create?.after,before:!!t.databaseHooks?.session?.create?.before},update:{after:!!t.databaseHooks?.session?.update?.after,before:!!t.databaseHooks?.session?.update?.before}},account:{create:{after:!!t.databaseHooks?.account?.create?.after,before:!!t.databaseHooks?.account?.create?.before},update:{after:!!t.databaseHooks?.account?.update?.after,before:!!t.databaseHooks?.account?.update?.before}},verification:{create:{after:!!t.databaseHooks?.verification?.create?.after,before:!!t.databaseHooks?.verification?.create?.before},update:{after:!!t.databaseHooks?.verification?.update?.after,before:!!t.databaseHooks?.verification?.update?.before}}}}}var fs;async function nL(){if(fs)return fs;try{let t=typeof process<"u"&&typeof process.cwd=="function"?process.cwd():"";if(!t)return;let e=o=>Function("mm","return import(mm)")(o),[{default:r},{default:i}]=await Promise.all([e("fs/promises"),e("path")]),n=await r.readFile(i.join(t,"package.json"),"utf-8");return fs=JSON.parse(n),fs}catch{}}async function iL(t){if(fs)return fs.dependencies?.[t]||fs.devDependencies?.[t]||fs.peerDependencies?.[t];try{let e=typeof process<"u"&&typeof process.cwd=="function"?process.cwd():"";if(!e)throw new Error("no-cwd");let r=a=>Function("mm","return import(mm)")(a),[{default:i},{default:n}]=await Promise.all([r("fs/promises"),r("path")]),o=n.join(e,"node_modules",t,"package.json"),s=await i.readFile(o,"utf-8");return JSON.parse(s).version||await YD(t)||void 0}catch{}return await YD(t)}async function YD(t){let e=await nL();if(e)return{...e.dependencies,...e.devDependencies,...e.peerDependencies}[t]}async function u3(){return(await nL())?.name}var l3={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function d3(){for(let[t,e]of Object.entries(l3)){let r=await iL(t);if(r)return{name:e,version:r}}}var f3={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function p3(){for(let[t,e]of Object.entries(f3)){let r=await iL(t);if(r)return{name:e,version:r}}}function m3(){let t=je.npm_config_user_agent;if(!t)return;let e=t.split(" ")[0],r=e.lastIndexOf("/"),i=e.substring(0,r);return{name:i==="npminstall"?"cnpm":i,version:e.substring(r+1)}}var Au=t=>Function("mm","return import(mm)")(t);function ka(){let t=(...e)=>e.some(r=>!!je[r]);return t("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"?"cloudflare":t("VERCEL","VERCEL_URL","VERCEL_ENV")?"vercel":t("NETLIFY","NETLIFY_URL")?"netlify":t("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID")?"render":t("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT")?"aws":t("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE")?"gcp":t("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME")?"azure":t("DENO_DEPLOYMENT_ID","DENO_REGION")?"deno-deploy":t("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID")?"fly-io":t("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME")?"railway":t("DYNO","HEROKU_APP_NAME")?"heroku":t("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN")?"digitalocean":t("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME")?"koyeb":null}async function h3(){try{if(ka()==="cloudflare")return"cloudflare";let t=await Au("os"),e=t.cpus();return{deploymentVendor:ka(),systemPlatform:t.platform(),systemRelease:t.release(),systemArchitecture:t.arch(),cpuCount:e.length,cpuModel:e.length?e[0].model:null,cpuSpeed:e.length?e[0].speed:null,memory:t.totalmem(),isWSL:await w3(),isDocker:await oL(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}var oT;async function g3(){if(ka()==="cloudflare")return!1;try{return(await Au("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function y3(){if(ka()==="cloudflare")return!1;try{return(await Au("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function oL(){return ka()==="cloudflare"?!1:(oT===void 0&&(oT=await g3()||await y3()),oT)}async function w3(){try{if(ka()==="cloudflare"||typeof process>"u"||process?.platform!=="linux")return!1;let t=await Au("fs");return(await Au("os")).release().toLowerCase().includes("microsoft")?!await XD():t.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!await XD():!1}catch{return!1}}var sT,b3=async()=>{if(ka()==="cloudflare")return!1;try{return(await Au("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function XD(){return sT===void 0&&(sT=await b3()||await oL()),sT}function v3(){return je.CI!=="false"&&("BUILD_ID"in je||"BUILD_NUMBER"in je||"CI"in je||"CI_APP_ID"in je||"CI_BUILD_ID"in je||"CI_BUILD_NUMBER"in je||"CI_NAME"in je||"CONTINUOUS_INTEGRATION"in je||"RUN_ID"in je)}function x3(){return typeof Deno<"u"?{name:"deno",version:Deno?.version?.deno??null}:typeof Bun<"u"?{name:"bun",version:Bun?.version??null}:typeof process<"u"&&process?.versions?.node?{name:"node",version:process.versions.node??null}:{name:"edge",version:null}}function S3(){return Je("NODE_ENV")==="production"?"production":v3()?"ci":Zi()?"test":"development"}async function eL(t){let e=await hl("SHA-256").digest(t);return Cr.encode(e)}var N3=t=>ja("a-z","A-Z","0-9")(t||32),ds=null;async function tL(t){if(ds)return ds;let e=await u3();return e?(ds=await eL(t?t+e:e),ds):t?(ds=await eL(t),ds):(ds=N3(32),ds)}async function aT(t,e){let r=t.telemetry?.debug||Bp("BETTER_AUTH_TELEMETRY_DEBUG",!1),i=pv.BETTER_AUTH_TELEMETRY_ENDPOINT,n=async c=>{e?.customTrack?await e.customTrack(c).catch(ye.error):r?ye.info("telemetry event",JSON.stringify(c,null,2)):await _e(i,{method:"POST",body:c}).catch(ye.error)},s=await(async()=>{let c=t.telemetry?.enabled!==void 0?t.telemetry.enabled:!1;return(Bp("BETTER_AUTH_TELEMETRY",!1)||c)&&(e?.skipTestCheck||!Zi())})(),a;return s&&(a=await tL(t.baseURL),n({type:"init",payload:{config:rL(t,e),runtime:x3(),database:await d3(),framework:await p3(),environment:S3(),systemInfo:await h3(),packageManager:m3()},anonymousId:a})),{publish:async c=>{s&&(a||(a=await tL(t.baseURL)),await n({type:c.type,payload:c.payload,anonymousId:a}))}}}function A3(t){let e=new Set(t).size;return e===0?0:Math.log2(Math.pow(e,t.length))}function E3(t,e){let r=t===iT;if(!Zi()){if(r&&Co)throw new de("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!t)throw new de("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");if(t.length<32)throw new de("Invalid BETTER_AUTH_SECRET: must be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`.");A3(t)<120&&e.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}}async function sL(t,e,r){e.database||(e=Iw(e,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}}));let i=e.plugins||[],n=GD(e),o=Gi(e.logger),s=Su(e.baseURL,e.basePath);s||o.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.");let a=e.secret||je.BETTER_AUTH_SECRET||je.AUTH_SECRET||iT;E3(a,o),e={...e,secret:a,baseURL:s?new URL(s).origin:"",basePath:e.basePath||"/api/auth",plugins:i.concat(n)},WD(e,o);let c=nD(e),u=In(e),l=Object.entries(e.socialProviders||{}).map(([y,b])=>{if(b==null||b.enabled===!1)return null;b.clientId||o.warn(`Social provider ${y} is missing clientId or clientSecret`);let N=Gk[y](b);return N.disableImplicitSignUp=b.disableImplicitSignUp,N}).filter(y=>y!==null),f=({model:y,size:b})=>typeof e.advanced?.generateId=="function"?e.advanced.generateId({model:y,size:b}):typeof e?.advanced?.database?.generateId=="function"?e.advanced.database.generateId({model:y,size:b}):Nn(b),{publish:d}=await aT(e,{adapter:t.id,database:typeof e.database=="function"?"adapter":r(e.database)}),m={appName:e.appName||"Better Auth",socialProviders:l,options:e,oauthConfig:{storeStateStrategy:e.account?.storeStateStrategy||(e.database?"database":"cookie"),skipStateCookieCheck:!!e.account?.skipStateCookieCheck},tables:u,trustedOrigins:await Cw(e),isTrustedOrigin(y,b){return m.trustedOrigins.some(N=>JD(y,N,b))},baseURL:s||"",sessionConfig:{updateAge:e.session?.updateAge!==void 0?e.session.updateAge:1440*60,expiresIn:e.session?.expiresIn||3600*24*7,freshAge:e.session?.freshAge===void 0?3600*24:e.session.freshAge,cookieRefreshCache:(()=>{let y=e.session?.cookieCache?.refreshCache,b=e.session?.cookieCache?.maxAge||300;return(e.database||e.secondaryStorage)&&y?(o.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache` \u2014 remove it from your config to silence this warning."),!1):y===!1||y===void 0?!1:y===!0?{enabled:!0,updateAge:Math.floor(b*.2)}:{enabled:!0,updateAge:y.updateAge!==void 0?y.updateAge:Math.floor(b*.2)}})()},secret:a,rateLimit:{...e.rateLimit,enabled:e.rateLimit?.enabled??Co,window:e.rateLimit?.window||10,max:e.rateLimit?.max||100,storage:e.rateLimit?.storage||(e.secondaryStorage?"secondary-storage":"memory")},authCookies:c,logger:o,generateId:f,session:null,secondaryStorage:e.secondaryStorage,password:{hash:e.emailAndPassword?.password?.hash||gv,verify:e.emailAndPassword?.password?.verify||yv,config:{minPasswordLength:e.emailAndPassword?.minPasswordLength||8,maxPasswordLength:e.emailAndPassword?.maxPasswordLength||128},checkPassword:QD},setNewSession(y){this.newSession=y},newSession:null,adapter:t,internalAdapter:vu(t,{options:e,logger:o,hooks:e.databaseHooks?[e.databaseHooks]:[],generateId:f}),createAuthCookie:Kk(e),async runMigrations(){throw new de("runMigrations will be set by the specific init implementation")},publishTelemetry:d,skipCSRFCheck:!!e.advanced?.disableCSRFCheck,skipOriginCheck:e.advanced?.disableOriginCheck!==void 0?e.advanced.disableOriginCheck:!!Zi(),runInBackground:e.advanced?.backgroundTasks?.handler??(y=>{y.catch(()=>{})}),async runInBackgroundOrAwait(y){try{e.advanced?.backgroundTasks?.handler?y instanceof Promise&&e.advanced.backgroundTasks.handler(y.catch(b=>{o.error("Failed to run background task:",b)})):await y}catch(b){o.error("Failed to run background task:",b)}}},h=ZD(m),p;return $w(h)?{context:p}=await h:{context:p}=h,p}var aL=async t=>{let e=await mw(t),i=await sL(e,t,n=>bu(n)||"unknown");return i.runMigrations=async function(){if(!t.database||"updateMany"in t.database)throw new de("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:n}=await yw(t);await n()},i};var cL=(t,e)=>{let r=e(t),{api:i}=nT(r,t);return{handler:async n=>{let o=await r,s=o.options.basePath||"/api/auth";if(!o.options.baseURL){let c=Su(void 0,s,n,void 0,o.options.advanced?.trustedProxyHeaders);if(c)o.baseURL=c,o.options.baseURL=Nu(o.baseURL)||void 0;else throw new de("Could not get base URL from request. Please provide a valid base URL.")}o.trustedOrigins=await Cw(o.options,n);let{handler:a}=FD(o,t);return Vb(o.adapter,()=>a(n))},api:i,options:t,$context:r,$ERROR_CODES:{...t.plugins?.reduce((n,o)=>o.$ERROR_CODES?{...n,...o.$ERROR_CODES}:n,{}),...ge}}};var cT=t=>cL(t,aL);dr();Yi();dr();Id();var U=Symbol.for("drizzle:entityKind");function H(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,U))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(U in r&&r[U]===e[U])return!0;r=Object.getPrototypeOf(r)}return!1}var nt=class{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[U]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Ow=class{static[U]="ColumnBuilder";config;constructor(e,r,i){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:i,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var pi=Symbol.for("drizzle:Name");var Pw=class{static[U]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{let{name:i,columns:n,foreignColumns:o}=e();return{name:i,columns:n,foreignTable:o[0].table,foreignColumns:o}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new uT(e,this)}},uT=class{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[U]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:r,foreignColumns:i}=this.reference(),n=r.map(a=>a.name),o=i.map(a=>a.name),s=[this.table[pi],...n,i[0].table[pi],...o];return e??`${s.join("_")}_fk`}};function Rw(t,...e){return t(...e)}function fT(t,e){return`${t[pi]}_${e.join("_")}_unique`}var lT=class{constructor(e,r){this.name=r,this.columns=e}static[U]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new dT(e,this.columns,this.nullsNotDistinctConfig,this.name)}},uL=class{static[U]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new lT(e,this.name)}},dT=class{constructor(e,r,i,n){this.table=e,this.columns=r,this.name=n??fT(this.table,this.columns.map(o=>o.name)),this.nullsNotDistinct=i}static[U]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function lL(t,e,r){for(let i=e;i<t.length;i++){let n=t[i];if(n==="\\"){i++;continue}if(n==='"')return[t.slice(e,i).replace(/\\/g,""),i+1];if(!r&&(n===","||n==="}"))return[t.slice(e,i).replace(/\\/g,""),i]}return[t.slice(e).replace(/\\/g,""),t.length]}function dL(t,e=0){let r=[],i=e,n=!1;for(;i<t.length;){let o=t[i];if(o===","){(n||i===e)&&r.push(""),n=!0,i++;continue}if(n=!1,o==="\\"){i+=2;continue}if(o==='"'){let[c,u]=lL(t,i+1,!0);r.push(c),i=u;continue}if(o==="}")return[r,i+1];if(o==="{"){let[c,u]=dL(t,i+1);r.push(c),i=u;continue}let[s,a]=lL(t,i,!1);r.push(s),i=a}return[r,i]}function fL(t){let[e]=dL(t,1);return e}function pT(t){return`{${t.map(e=>Array.isArray(e)?pT(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var ue=class extends Ow{foreignKeyConfigs=[];static[U]="PgColumnBuilder";array(e){return new hT(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:i,actions:n})=>Rw((o,s)=>{let a=new Pw(()=>{let c=o();return{columns:[e],foreignColumns:[c]}});return s.onUpdate&&a.onUpdate(s.onUpdate),s.onDelete&&a.onDelete(s.onDelete),a.build(r)},i,n))}buildExtraConfigColumn(e){return new mT(e,this.config)}},ne=class extends nt{constructor(e,r){r.uniqueName||(r.uniqueName=fT(e,[r.name])),super(e,r),this.table=e}static[U]="PgColumn"},mT=class extends ne{static[U]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},Eu=class{static[U]="IndexedColumn";constructor(e,r,i,n){this.name=e,this.keyAsName=r,this.type=i,this.indexConfig=n}name;keyAsName;type;indexConfig},hT=class extends ue{static[U]="PgArrayBuilder";constructor(e,r,i){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=i}build(e){let r=this.config.baseBuilder.build(e);return new gT(e,this.config,r)}},gT=class t extends ne{constructor(e,r,i,n){super(e,r),this.baseColumn=i,this.range=n,this.size=r.size}size;static[U]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=fL(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){let i=e.map(n=>n===null?null:H(this.baseColumn,t)?this.baseColumn.mapToDriverValue(n,!0):this.baseColumn.mapToDriverValue(n));return r?i:pT(i)}};var pL=class extends ue{static[U]="PgEnumObjectColumnBuilder";constructor(e,r){super(e,"string","PgEnumObjectColumn"),this.config.enum=r}build(e){return new yT(e,this.config)}},yT=class extends ne{static[U]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}},mL=Symbol.for("drizzle:isPgEnum");function gL(t){return!!t&&typeof t=="function"&&mL in t&&t[mL]===!0}var hL=class extends ue{static[U]="PgEnumColumnBuilder";constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new wT(e,this.config)}},wT=class extends ne{static[U]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,r){super(e,r),this.enum=r.enum}getSQLType(){return this.enum.enumName}};var vt=class{static[U]="Subquery";constructor(e,r,i,n=!1,o=[]){this._={brand:"Subquery",sql:e,selectedFields:r,alias:i,isWith:n,usedTables:o}}},_u=class extends vt{static[U]="WithSubquery"};var yL="0.45.1";var bT,vT,Bt={startActiveSpan(t,e){return bT?(vT||(vT=bT.trace.getTracer("drizzle-orm",yL)),Rw((r,i)=>i.startActiveSpan(t,n=>{try{return e(n)}catch(o){throw n.setStatus({code:r.SpanStatusCode.ERROR,message:o instanceof Error?o.message:"Unknown error"}),o}finally{n.end()}}),bT,vT)):e()}};var yt=Symbol.for("drizzle:ViewBaseConfig");var Ta=Symbol.for("drizzle:Schema"),Uw=Symbol.for("drizzle:Columns"),wL=Symbol.for("drizzle:ExtraConfigColumns"),xT=Symbol.for("drizzle:OriginalName"),ST=Symbol.for("drizzle:BaseName"),wf=Symbol.for("drizzle:IsAlias"),bL=Symbol.for("drizzle:ExtraConfigBuilder"),_3=Symbol.for("drizzle:IsDrizzleTable"),oe=class{static[U]="Table";static Symbol={Name:pi,Schema:Ta,OriginalName:xT,Columns:Uw,ExtraConfigColumns:wL,BaseName:ST,IsAlias:wf,ExtraConfigBuilder:bL};[pi];[xT];[Ta];[Uw];[wL];[ST];[wf]=!1;[_3]=!0;[bL]=void 0;constructor(e,r,i){this[pi]=this[xT]=e,this[Ta]=r,this[ST]=i}};function Yr(t){return t[pi]}function Ia(t){return`${t[Ta]??"public"}.${t[pi]}`}var vL=class{static[U]="FakePrimitiveParam"};function NT(t){return t!=null&&typeof t.getSQL=="function"}function k3(t){let e={sql:"",params:[]};for(let r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var qt=class{static[U]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new ce([this])}},ce=class t{constructor(e){this.queryChunks=e;for(let r of e)if(H(r,oe)){let i=r[oe.Symbol.Schema];this.usedTables.push(i===void 0?r[oe.Symbol.Name]:i+"."+r[oe.Symbol.Name])}}static[U]="SQL";decoder=SL;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Bt.startActiveSpan("drizzle.buildSQL",r=>{let i=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i})}buildQueryFromSourceParams(e,r){let i=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:n,escapeName:o,escapeParam:s,prepareTyping:a,inlineParams:c,paramStartIndex:u}=i;return k3(e.map(l=>{if(H(l,qt))return{sql:l.value.join(""),params:[]};if(H(l,bf))return{sql:o(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){let f=[new qt("(")];for(let[d,m]of l.entries())f.push(m),d<l.length-1&&f.push(new qt(", "));return f.push(new qt(")")),this.buildQueryFromSourceParams(f,i)}if(H(l,t))return this.buildQueryFromSourceParams(l.queryChunks,{...i,inlineParams:c||l.shouldInlineParams});if(H(l,oe)){let f=l[oe.Symbol.Schema],d=l[oe.Symbol.Name];return{sql:f===void 0||l[wf]?o(d):o(f)+"."+o(d),params:[]}}if(H(l,nt)){let f=n.getColumnCasing(l);if(r.invokeSource==="indexes")return{sql:o(f),params:[]};let d=l.table[oe.Symbol.Schema];return{sql:l.table[wf]||d===void 0?o(l.table[oe.Symbol.Name])+"."+o(f):o(d)+"."+o(l.table[oe.Symbol.Name])+"."+o(f),params:[]}}if(H(l,jr)){let f=l[yt].schema,d=l[yt].name;return{sql:f===void 0||l[yt].isAlias?o(d):o(f)+"."+o(d),params:[]}}if(H(l,Xr)){if(H(l.value,wo))return{sql:s(u.value++,l),params:[l],typings:["none"]};let f=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(H(f,t))return this.buildQueryFromSourceParams([f],i);if(c)return{sql:this.mapInlineParam(f,i),params:[]};let d=["none"];return a&&(d=[a(l.encoder)]),{sql:s(u.value++,f),params:[f],typings:d}}return H(l,wo)?{sql:s(u.value++,l),params:[l],typings:["none"]}:H(l,t.Aliased)&&l.fieldAlias!==void 0?{sql:o(l.fieldAlias),params:[]}:H(l,vt)?l._.isWith?{sql:o(l._.alias),params:[]}:this.buildQueryFromSourceParams([new qt("("),l._.sql,new qt(") "),new bf(l._.alias)],i):gL(l)?l.schema?{sql:o(l.schema)+"."+o(l.enumName),params:[]}:{sql:o(l.enumName),params:[]}:NT(l)?l.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([l.getSQL()],i):this.buildQueryFromSourceParams([new qt("("),l.getSQL(),new qt(")")],i):c?{sql:this.mapInlineParam(l,i),params:[]}:{sql:s(u.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){let i=e.toString();return r(i==="[object Object]"?JSON.stringify(e):i)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new t.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},bf=class{constructor(e){this.value=e}static[U]="Name";brand;getSQL(){return new ce([this])}};function xL(t){return typeof t=="object"&&t!==null&&"mapToDriverValue"in t&&typeof t.mapToDriverValue=="function"}var SL={mapFromDriverValue:t=>t},NL={mapToDriverValue:t=>t},jke={...SL,...NL},Xr=class{constructor(e,r=NL){this.value=e,this.encoder=r}static[U]="Param";brand;getSQL(){return new ce([this])}};function j(t,...e){let r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new qt(t[0]));for(let[i,n]of e.entries())r.push(n,new qt(t[i+1]));return new ce(r)}(t=>{function e(){return new ce([])}t.empty=e;function r(c){return new ce(c)}t.fromList=r;function i(c){return new ce([new qt(c)])}t.raw=i;function n(c,u){let l=[];for(let[f,d]of c.entries())f>0&&u!==void 0&&l.push(u),l.push(d);return new ce(l)}t.join=n;function o(c){return new bf(c)}t.identifier=o;function s(c){return new wo(c)}t.placeholder=s;function a(c,u){return new Xr(c,u)}t.param=a})(j||(j={}));(t=>{class e{constructor(i,n){this.sql=i,this.fieldAlias=n}static[U]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(ce||(ce={}));var wo=class{constructor(e){this.name=e}static[U]="Placeholder";getSQL(){return new ce([this])}};function Dw(t,e){return t.map(r=>{if(H(r,wo)){if(!(r.name in e))throw new Error(`No value for placeholder "${r.name}" was provided`);return e[r.name]}if(H(r,Xr)&&H(r.value,wo)){if(!(r.value.name in e))throw new Error(`No value for placeholder "${r.value.name}" was provided`);return r.encoder.mapToDriverValue(e[r.value.name])}return r})}var T3=Symbol.for("drizzle:IsDrizzleView"),jr=class{static[U]="View";[yt];[T3]=!0;constructor({name:e,schema:r,selectedFields:i,query:n}){this[yt]={name:e,originalName:e,schema:r,selectedFields:i,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new ce([this])}};nt.prototype.getSQL=function(){return new ce([this])};oe.prototype.getSQL=function(){return new ce([this])};vt.prototype.getSQL=function(){return new ce([this])};var $a=class{constructor(e){this.table=e}static[U]="ColumnAliasProxyHandler";get(e,r){return r==="table"?this.table:e[r]}},ku=class{constructor(e,r){this.alias=e,this.replaceOriginalName=r}static[U]="TableAliasProxyHandler";get(e,r){if(r===oe.Symbol.IsAlias)return!0;if(r===oe.Symbol.Name)return this.alias;if(this.replaceOriginalName&&r===oe.Symbol.OriginalName)return this.alias;if(r===yt)return{...e[yt],name:this.alias,isAlias:!0};if(r===oe.Symbol.Columns){let n=e[oe.Symbol.Columns];if(!n)return n;let o={};return Object.keys(n).map(s=>{o[s]=new Proxy(n[s],new $a(new Proxy(e,this)))}),o}let i=e[r];return H(i,nt)?new Proxy(i,new $a(new Proxy(e,this))):i}},AL=class{constructor(e){this.alias=e}static[U]="RelationTableAliasProxyHandler";get(e,r){return r==="sourceTable"?vf(e.sourceTable,this.alias):e[r]}};function vf(t,e){return new Proxy(t,new ku(e,!1))}function Mi(t,e){return new Proxy(t,new $a(new Proxy(t.table,new ku(e,!1))))}function AT(t,e){return new ce.Aliased(xf(t.sql,e),t.fieldAlias)}function xf(t,e){return j.join(t.queryChunks.map(r=>H(r,nt)?Mi(r,e):H(r,ce)?xf(r,e):H(r,ce.Aliased)?AT(r,e):r))}var Sf=class extends Error{static[U]="DrizzleError";constructor({message:e,cause:r}){super(e),this.name="DrizzleError",this.cause=r}},bo=class t extends Error{constructor(e,r,i){super(`Failed query: ${e}
params: ${r}`),this.query=e,this.params=r,this.cause=i,Error.captureStackTrace(this,t),i&&(this.cause=i)}},Lw=class extends Sf{static[U]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var ET=class{static[U]="ConsoleLogWriter";write(e){console.log(e)}},zw=class{static[U]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new ET}logQuery(e,r){let i=r.map(o=>{try{return JSON.stringify(o)}catch{return String(o)}}),n=i.length?` -- params: [${i.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}},jw=class{static[U]="NoopLogger";logQuery(){}};var Tr=class{static[U]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}then(e,r){return this.execute().then(e,r)}};function EL(t,e,r){let i={},n=t.reduce((o,{path:s,field:a},c)=>{let u;H(a,nt)?u=a:H(a,ce)?u=a.decoder:H(a,vt)?u=a._.sql.decoder:u=a.sql.decoder;let l=o;for(let[f,d]of s.entries())if(f<s.length-1)d in l||(l[d]={}),l=l[d];else{let m=e[c],h=l[d]=m===null?null:u.mapFromDriverValue(m);if(r&&H(a,nt)&&s.length===2){let p=s[0];p in i?typeof i[p]=="string"&&i[p]!==Yr(a.table)&&(i[p]=!1):i[p]=h===null?Yr(a.table):!1}}return o},{});if(r&&Object.keys(i).length>0)for(let[o,s]of Object.entries(i))typeof s=="string"&&!r[s]&&(n[o]=null);return n}function Ln(t,e){return Object.entries(t).reduce((r,[i,n])=>{if(typeof i!="string")return r;let o=e?[...e,i]:[i];return H(n,nt)||H(n,ce)||H(n,ce.Aliased)||H(n,vt)?r.push({path:o,field:n}):H(n,oe)?r.push(...Ln(n[oe.Symbol.Columns],o)):r.push(...Ln(n,o)),r},[])}function Nf(t,e){let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let[n,o]of r.entries())if(o!==i[n])return!1;return!0}function Mw(t,e){let r=Object.entries(e).filter(([,i])=>i!==void 0).map(([i,n])=>H(n,ce)||H(n,nt)?[i,n]:[i,new Xr(n,t[oe.Symbol.Columns][i])]);if(r.length===0)throw new Error("No values to set");return Object.fromEntries(r)}function _L(t,e){for(let r of e)for(let i of Object.getOwnPropertyNames(r.prototype))i!=="constructor"&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i)||Object.create(null))}function kL(t){return t[oe.Symbol.Columns]}function vo(t){return H(t,vt)?t._.alias:H(t,jr)?t[yt].name:H(t,ce)?void 0:t[oe.Symbol.IsAlias]?t[oe.Symbol.Name]:t[oe.Symbol.BaseName]}function Le(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}function TL(t){if(typeof t!="object"||t===null||t.constructor.name!=="Object")return!1;if("logger"in t){let e=typeof t.logger;return!(e!=="boolean"&&(e!=="object"||typeof t.logger.logQuery!="function")&&e!=="undefined")}if("schema"in t){let e=typeof t.schema;return!(e!=="object"&&e!=="undefined")}if("casing"in t){let e=typeof t.casing;return!(e!=="string"&&e!=="undefined")}if("mode"in t)return!(t.mode!=="default"||t.mode!=="planetscale"||t.mode!==void 0);if("connection"in t){let e=typeof t.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in t){let e=typeof t.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(t).length===0}var oTe=typeof TextDecoder>"u"?null:new TextDecoder;var xo=class extends ue{static[U]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:r,...i}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:r,...i}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:i}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var _T=class extends xo{static[U]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new kT(e,this.config)}},kT=class extends ne{static[U]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},TT=class extends xo{static[U]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new IT(e,this.config)}},IT=class extends ne{static[U]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function IL(t,e){let{name:r,config:i}=Le(t,e);return i.mode==="number"?new _T(r):new TT(r)}var $T=class extends ue{static[U]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new CT(e,this.config)}},CT=class extends ne{static[U]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},OT=class extends ue{static[U]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new PT(e,this.config)}},PT=class extends ne{static[U]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function $L(t,e){let{name:r,config:i}=Le(t,e);return i.mode==="number"?new $T(r):new OT(r)}var RT=class extends ue{static[U]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new UT(e,this.config)}},UT=class extends ne{static[U]="PgBoolean";getSQLType(){return"boolean"}};function Af(t){return new RT(t??"")}var DT=class extends ue{static[U]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new LT(e,this.config)}},LT=class extends ne{static[U]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function CL(t,e={}){let{name:r,config:i}=Le(t,e);return new DT(r,i)}var zT=class extends ue{static[U]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new jT(e,this.config)}},jT=class extends ne{static[U]="PgCidr";getSQLType(){return"cidr"}};function OL(t){return new zT(t??"")}var MT=class extends ue{static[U]="PgCustomColumnBuilder";constructor(e,r,i){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=i}build(e){return new BT(e,this.config)}},BT=class extends ne{static[U]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function PL(t){return(e,r)=>{let{name:i,config:n}=Le(e,r);return new MT(i,n,t)}}var Bi=class extends ue{static[U]="PgDateColumnBaseBuilder";defaultNow(){return this.default(j`now()`)}};var qT=class extends Bi{static[U]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Ef(e,this.config)}},Ef=class extends ne{static[U]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return typeof e=="string"?new Date(e):e}mapToDriverValue(e){return e.toISOString()}},WT=class extends Bi{static[U]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new _f(e,this.config)}},_f=class extends ne{static[U]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(e){return typeof e=="string"?e:e.toISOString().slice(0,-14)}};function RL(t,e){let{name:r,config:i}=Le(t,e);return i?.mode==="date"?new qT(r):new WT(r)}var FT=class extends ue{static[U]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new VT(e,this.config)}},VT=class extends ne{static[U]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function UL(t){return new FT(t??"")}var KT=class extends ue{static[U]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new HT(e,this.config)}},HT=class extends ne{static[U]="PgInet";getSQLType(){return"inet"}};function DL(t){return new KT(t??"")}var JT=class extends xo{static[U]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new QT(e,this.config)}},QT=class extends ne{static[U]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function kf(t){return new JT(t??"")}var ZT=class extends ue{static[U]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new GT(e,this.config)}},GT=class extends ne{static[U]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}};function LL(t,e={}){let{name:r,config:i}=Le(t,e);return new ZT(r,i)}var YT=class extends ue{static[U]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Tf(e,this.config)}},Tf=class extends ne{static[U]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function Ca(t){return new YT(t??"")}var XT=class extends ue{static[U]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new If(e,this.config)}},If=class extends ne{static[U]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function zL(t){return new XT(t??"")}var eI=class extends ue{static[U]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new tI(e,this.config)}},tI=class extends ne{static[U]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[r,i,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},rI=class extends ue{static[U]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new nI(e,this.config)}},nI=class extends ne{static[U]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[r,i,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(i),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function jL(t,e){let{name:r,config:i}=Le(t,e);return!i?.mode||i.mode==="tuple"?new eI(r):new rI(r)}var iI=class extends ue{static[U]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new oI(e,this.config)}},oI=class extends ne{static[U]="PgMacaddr";getSQLType(){return"macaddr"}};function ML(t){return new iI(t??"")}var sI=class extends ue{static[U]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new aI(e,this.config)}},aI=class extends ne{static[U]="PgMacaddr8";getSQLType(){return"macaddr8"}};function BL(t){return new sI(t??"")}var cI=class extends ue{static[U]="PgNumericBuilder";constructor(e,r,i){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=i}build(e){return new $f(e,this.config)}},$f=class extends ne{static[U]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="string"?e:String(e)}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},uI=class extends ue{static[U]="PgNumericNumberBuilder";constructor(e,r,i){super(e,"number","PgNumericNumber"),this.config.precision=r,this.config.scale=i}build(e){return new lI(e,this.config)}},lI=class extends ne{static[U]="PgNumericNumber";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}},dI=class extends ue{static[U]="PgNumericBigIntBuilder";constructor(e,r,i){super(e,"bigint","PgNumericBigInt"),this.config.precision=r,this.config.scale=i}build(e){return new fI(e,this.config)}},fI=class extends ne{static[U]="PgNumericBigInt";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function qL(t,e){let{name:r,config:i}=Le(t,e),n=i?.mode;return n==="number"?new uI(r,i?.precision,i?.scale):n==="bigint"?new dI(r,i?.precision,i?.scale):new cI(r,i?.precision,i?.scale)}var pI=class extends ue{static[U]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new mI(e,this.config)}},mI=class extends ne{static[U]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(i)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},hI=class extends ue{static[U]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new gI(e,this.config)}},gI=class extends ne{static[U]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[r,i]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(i)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function WL(t,e){let{name:r,config:i}=Le(t,e);return!i?.mode||i.mode==="tuple"?new pI(r):new hI(r)}function I3(t){let e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function FL(t,e){let r=new ArrayBuffer(8),i=new DataView(r);for(let n=0;n<8;n++)i.setUint8(n,t[e+n]);return i.getFloat64(0,!0)}function yI(t){let e=I3(t),r=0,i=e[r];r+=1;let n=new DataView(e.buffer),o=n.getUint32(r,i===1);r+=4;let s;if(o&536870912&&(s=n.getUint32(r,i===1),r+=4),(o&65535)===1){let a=FL(e,r);r+=8;let c=FL(e,r);return r+=8,[a,c]}throw new Error("Unsupported geometry type")}var wI=class extends ue{static[U]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new bI(e,this.config)}},bI=class extends ne{static[U]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return yI(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},vI=class extends ue{static[U]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new xI(e,this.config)}},xI=class extends ne{static[U]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let r=yI(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function VL(t,e){let{name:r,config:i}=Le(t,e);return!i?.mode||i.mode==="tuple"?new wI(r):new vI(r)}var SI=class extends ue{static[U]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new NI(e,this.config)}},NI=class extends ne{static[U]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function KL(t){return new SI(t??"")}var AI=class extends ue{static[U]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new EI(e,this.config)}},EI=class extends ne{static[U]="PgSerial";getSQLType(){return"serial"}};function HL(t){return new AI(t??"")}var _I=class extends xo{static[U]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new kI(e,this.config)}},kI=class extends ne{static[U]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function JL(t){return new _I(t??"")}var TI=class extends ue{static[U]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new II(e,this.config)}},II=class extends ne{static[U]="PgSmallSerial";getSQLType(){return"smallserial"}};function QL(t){return new TI(t??"")}var $I=class extends ue{static[U]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new CI(e,this.config)}},CI=class extends ne{static[U]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function Ue(t,e={}){let{name:r,config:i}=Le(t,e);return new $I(r,i)}var OI=class extends Bi{constructor(e,r,i){super(e,"string","PgTime"),this.withTimezone=r,this.precision=i,this.config.withTimezone=r,this.config.precision=i}static[U]="PgTimeBuilder";build(e){return new Cf(e,this.config)}},Cf=class extends ne{static[U]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function ZL(t,e={}){let{name:r,config:i}=Le(t,e);return new OI(r,i.withTimezone??!1,i.precision)}var PI=class extends Bi{static[U]="PgTimestampBuilder";constructor(e,r,i){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=i}build(e){return new Of(e,this.config)}},Of=class extends ne{static[U]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){return typeof e=="string"?new Date(this.withTimezone?e:e+"+0000"):e}mapToDriverValue=e=>e.toISOString()},RI=class extends Bi{static[U]="PgTimestampStringBuilder";constructor(e,r,i){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=i}build(e){return new Pf(e,this.config)}},Pf=class extends ne{static[U]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){if(typeof e=="string")return e;let r=e.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let i=e.getTimezoneOffset(),n=i<=0?"+":"-";return`${r}${n}${Math.floor(Math.abs(i)/60).toString().padStart(2,"0")}`}return r}};function It(t,e={}){let{name:r,config:i}=Le(t,e);return i?.mode==="string"?new RI(r,i.withTimezone??!1,i.precision):new PI(r,i?.withTimezone??!1,i?.precision)}var UI=class extends ue{static[U]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(j`gen_random_uuid()`)}build(e){return new Rf(e,this.config)}},Rf=class extends ne{static[U]="PgUUID";getSQLType(){return"uuid"}};function GL(t){return new UI(t??"")}var DI=class extends ue{static[U]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new LI(e,this.config)}},LI=class extends ne{static[U]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function YL(t,e={}){let{name:r,config:i}=Le(t,e);return new DI(r,i)}var zI=class extends ue{static[U]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new jI(e,this.config)}},jI=class extends ne{static[U]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function XL(t,e){let{name:r,config:i}=Le(t,e);return new zI(r,i)}var MI=class extends ue{static[U]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new BI(e,this.config)}},BI=class extends ne{static[U]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function e2(t,e){let{name:r,config:i}=Le(t,e);return new MI(r,i)}var qI=class extends ue{static[U]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new WI(e,this.config)}},WI=class extends ne{static[U]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function t2(t,e){let{name:r,config:i}=Le(t,e);return new qI(r,i)}var FI=class extends ue{static[U]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new VI(e,this.config)}},VI=class extends ne{static[U]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}};function r2(t,e){let{name:r,config:i}=Le(t,e);return new FI(r,i)}function n2(){return{bigint:IL,bigserial:$L,boolean:Af,char:CL,cidr:OL,customType:PL,date:RL,doublePrecision:UL,inet:DL,integer:kf,interval:LL,json:Ca,jsonb:zL,line:jL,macaddr:ML,macaddr8:BL,numeric:qL,point:WL,geometry:VL,real:KL,serial:HL,smallint:JL,smallserial:QL,text:Ue,time:ZL,timestamp:It,uuid:GL,varchar:YL,bit:XL,halfvec:e2,sparsevec:t2,vector:r2}}var KI=Symbol.for("drizzle:PgInlineForeignKeys"),i2=Symbol.for("drizzle:EnableRLS"),Wt=class extends oe{static[U]="PgTable";static Symbol=Object.assign({},oe.Symbol,{InlineForeignKeys:KI,EnableRLS:i2});[KI]=[];[i2]=!1;[oe.Symbol.ExtraConfigBuilder]=void 0;[oe.Symbol.ExtraConfigColumns]={}};function $3(t,e,r,i,n=t){let o=new Wt(t,i,n),s=typeof e=="function"?e(n2()):e,a=Object.fromEntries(Object.entries(s).map(([l,f])=>{let d=f;d.setName(l);let m=d.build(o);return o[KI].push(...d.buildForeignKeys(m,o)),[l,m]})),c=Object.fromEntries(Object.entries(s).map(([l,f])=>{let d=f;d.setName(l);let m=d.buildExtraConfigColumn(o);return[l,m]})),u=Object.assign(o,a);return u[oe.Symbol.Columns]=a,u[oe.Symbol.ExtraConfigColumns]=c,r&&(u[Wt.Symbol.ExtraConfigBuilder]=r),Object.assign(u,{enableRLS:()=>(u[Wt.Symbol.EnableRLS]=!0,u)})}var So=(t,e,r)=>$3(t,e,r,void 0);var Bw=class{static[U]="PgPrimaryKeyBuilder";columns;name;constructor(e,r){this.columns=e,this.name=r}build(e){return new HI(e,this.columns,this.name)}},HI=class{constructor(e,r,i){this.table=e,this.columns=r,this.name=i}static[U]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[Wt.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function en(t,e){return xL(e)&&!NT(t)&&!H(t,Xr)&&!H(t,wo)&&!H(t,nt)&&!H(t,oe)&&!H(t,jr)?new Xr(t,e):t}var Se=(t,e)=>j`${t} = ${en(e,t)}`,Tu=(t,e)=>j`${t} <> ${en(e,t)}`;function xt(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new ce(e):new ce([new qt("("),j.join(e,new qt(" and ")),new qt(")")])}function Oa(...t){let e=t.filter(r=>r!==void 0);if(e.length!==0)return e.length===1?new ce(e):new ce([new qt("("),j.join(e,new qt(" or ")),new qt(")")])}function o2(t){return j`not ${t}`}var mi=(t,e)=>j`${t} > ${en(e,t)}`,Iu=(t,e)=>j`${t} >= ${en(e,t)}`,$u=(t,e)=>j`${t} < ${en(e,t)}`,Cu=(t,e)=>j`${t} <= ${en(e,t)}`;function Ou(t,e){return Array.isArray(e)?e.length===0?j`false`:j`${t} in ${e.map(r=>en(r,t))}`:j`${t} in ${en(e,t)}`}function Pu(t,e){return Array.isArray(e)?e.length===0?j`true`:j`${t} not in ${e.map(r=>en(r,t))}`:j`${t} not in ${en(e,t)}`}function Pa(t){return j`${t} is null`}function s2(t){return j`${t} is not null`}function a2(t){return j`exists ${t}`}function c2(t){return j`not exists ${t}`}function u2(t,e,r){return j`${t} between ${en(e,t)} and ${en(r,t)}`}function l2(t,e,r){return j`${t} not between ${en(e,t)} and ${en(r,t)}`}function zn(t,e){return j`${t} like ${e}`}function d2(t,e){return j`${t} not like ${e}`}function f2(t,e){return j`${t} ilike ${e}`}function p2(t,e){return j`${t} not ilike ${e}`}function qw(t){return j`${t} asc`}function Ru(t){return j`${t} desc`}var Ww=class{constructor(e,r,i){this.sourceTable=e,this.referencedTable=r,this.relationName=i,this.referencedTableName=r[oe.Symbol.Name]}static[U]="Relation";referencedTableName;fieldName},Fw=class{constructor(e,r){this.table=e,this.config=r}static[U]="Relations"},ps=class t extends Ww{constructor(e,r,i,n){super(e,r,i?.relationName),this.config=i,this.isNullable=n}static[U]="One";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config,this.isNullable);return r.fieldName=e,r}},Uf=class t extends Ww{constructor(e,r,i){super(e,r,i?.relationName),this.config=i}static[U]="Many";withFieldName(e){let r=new t(this.sourceTable,this.referencedTable,this.config);return r.fieldName=e,r}};function m2(){return{and:xt,between:u2,eq:Se,exists:a2,gt:mi,gte:Iu,ilike:f2,inArray:Ou,isNull:Pa,isNotNull:s2,like:zn,lt:$u,lte:Cu,ne:Tu,not:o2,notBetween:l2,notExists:c2,notLike:d2,notIlike:p2,notInArray:Pu,or:Oa,sql:j}}function h2(){return{sql:j,asc:qw,desc:Ru}}function g2(t,e){Object.keys(t).length===1&&"default"in t&&!H(t.default,oe)&&(t=t.default);let r={},i={},n={};for(let[o,s]of Object.entries(t))if(H(s,oe)){let a=Ia(s),c=i[a];r[a]=o,n[o]={tsName:o,dbName:s[oe.Symbol.Name],schema:s[oe.Symbol.Schema],columns:s[oe.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]};for(let l of Object.values(s[oe.Symbol.Columns]))l.primary&&n[o].primaryKey.push(l);let u=s[oe.Symbol.ExtraConfigBuilder]?.(s[oe.Symbol.ExtraConfigColumns]);if(u)for(let l of Object.values(u))H(l,Bw)&&n[o].primaryKey.push(...l.columns)}else if(H(s,Fw)){let a=Ia(s.table),c=r[a],u=s.config(e(s.table)),l;for(let[f,d]of Object.entries(u))if(c){let m=n[c];m.relations[f]=d,l&&m.primaryKey.push(...l)}else a in i||(i[a]={relations:{},primaryKey:l}),i[a].relations[f]=d}return{tables:n,tableNamesMap:r}}function ms(t,e){return new Fw(t,r=>Object.fromEntries(Object.entries(e(r)).map(([i,n])=>[i,n.withFieldName(i)])))}function C3(t){return function(r,i){return new ps(t,r,i,i?.fields.reduce((n,o)=>n&&o.notNull,!0)??!1)}}function O3(t){return function(r,i){return new Uf(t,r,i)}}function y2(t,e,r){if(H(r,ps)&&r.config)return{fields:r.config.fields,references:r.config.references};let i=e[Ia(r.referencedTable)];if(!i)throw new Error(`Table "${r.referencedTable[oe.Symbol.Name]}" not found in schema`);let n=t[i];if(!n)throw new Error(`Table "${i}" not found in schema`);let o=r.sourceTable,s=e[Ia(o)];if(!s)throw new Error(`Table "${o[oe.Symbol.Name]}" not found in schema`);let a=[];for(let c of Object.values(n.relations))(r.relationName&&r!==c&&c.relationName===r.relationName||!r.relationName&&c.referencedTable===r.sourceTable)&&a.push(c);if(a.length>1)throw r.relationName?new Error(`There are multiple relations with name "${r.relationName}" in table "${i}"`):new Error(`There are multiple relations between "${i}" and "${r.sourceTable[oe.Symbol.Name]}". Please specify relation name`);if(a[0]&&H(a[0],ps)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${s}.${r.fieldName}"`)}function w2(t){return{one:C3(t),many:O3(t)}}function Vw(t,e,r,i,n=o=>o){let o={};for(let[s,a]of i.entries())if(a.isJson){let c=e.relations[a.tsKey],u=r[s],l=typeof u=="string"?JSON.parse(u):u;o[a.tsKey]=H(c,ps)?l&&Vw(t,t[a.relationTableTsKey],l,a.selection,n):l.map(f=>Vw(t,t[a.relationTableTsKey],f,a.selection,n))}else{let c=n(r[s]),u=a.field,l;H(u,nt)?l=u:H(u,ce)?l=u.decoder:l=u.sql.decoder,o[a.tsKey]=c===null?null:l.mapFromDriverValue(c)}return o}function b2(t){return j`count(${t||j.raw("*")})`.mapWith(Number)}var JI=(t,e)=>{let r=null,i=s=>({getFieldName:a,options:c})=>{function u(m){let h=e.schema||s._.fullSchema;if(!h)throw new de("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let p=h[m];if(!p)throw new de(`[# Drizzle Adapter]: The model "${m}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return p}let l=async(m,h,p,y)=>{if(e.provider!=="mysql")return(await h.returning())[0];await h.execute();let b=u(m),N=h.config?.values;if(y?.length){let T=f(y.map(I=>p[I.field]!==void 0?{...I,value:p[I.field]}:I),m);return(await s.select().from(b).where(...T))[0]}else if(N&&N[0]?.id?.value){let T=N[0]?.id?.value;return T||(T=(await s.select({id:j`LAST_INSERT_ID()`}).from(b).orderBy(Ru(b.id)).limit(1))[0].id),(await s.select().from(b).where(Se(b.id,T)).limit(1).execute())[0]}else{if(p.id)return(await s.select().from(b).where(Se(b.id,p.id)).limit(1).execute())[0];if(!("id"in b))throw new de(`The model "${m}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await s.select().from(b).orderBy(Ru(b.id)).limit(1).execute())[0]}};function f(m,h){let p=u(h);if(!m)return[];if(m.length===1){let $=m[0];if(!$)return[];let v=a({model:h,field:$.field});if(!p[v])throw new de(`The field "${$.field}" does not exist in the schema for the model "${h}". Please update your schema.`);if($.operator==="in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "in" operator.`);return[Ou(p[v],$.value)]}if($.operator==="not_in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "not_in" operator.`);return[Pu(p[v],$.value)]}return $.operator==="contains"?[zn(p[v],`%${$.value}%`)]:$.operator==="starts_with"?[zn(p[v],`${$.value}%`)]:$.operator==="ends_with"?[zn(p[v],`%${$.value}`)]:$.operator==="lt"?[$u(p[v],$.value)]:$.operator==="lte"?[Cu(p[v],$.value)]:$.operator==="ne"?[Tu(p[v],$.value)]:$.operator==="gt"?[mi(p[v],$.value)]:$.operator==="gte"?[Iu(p[v],$.value)]:[Se(p[v],$.value)]}let y=m.filter($=>$.connector==="AND"||!$.connector),b=m.filter($=>$.connector==="OR"),N=xt(...y.map($=>{let v=a({model:h,field:$.field});if($.operator==="in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "in" operator.`);return Ou(p[v],$.value)}if($.operator==="not_in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "not_in" operator.`);return Pu(p[v],$.value)}return $.operator==="contains"?zn(p[v],`%${$.value}%`):$.operator==="starts_with"?zn(p[v],`${$.value}%`):$.operator==="ends_with"?zn(p[v],`%${$.value}`):$.operator==="lt"?$u(p[v],$.value):$.operator==="lte"?Cu(p[v],$.value):$.operator==="gt"?mi(p[v],$.value):$.operator==="gte"?Iu(p[v],$.value):$.operator==="ne"?Tu(p[v],$.value):Se(p[v],$.value)})),T=Oa(...b.map($=>{let v=a({model:h,field:$.field});if($.operator==="in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "in" operator.`);return Ou(p[v],$.value)}if($.operator==="not_in"){if(!Array.isArray($.value))throw new de(`The value for the field "${$.field}" must be an array when using the "not_in" operator.`);return Pu(p[v],$.value)}return $.operator==="contains"?zn(p[v],`%${$.value}%`):$.operator==="starts_with"?zn(p[v],`${$.value}%`):$.operator==="ends_with"?zn(p[v],`%${$.value}`):$.operator==="lt"?$u(p[v],$.value):$.operator==="lte"?Cu(p[v],$.value):$.operator==="gt"?mi(p[v],$.value):$.operator==="gte"?Iu(p[v],$.value):$.operator==="ne"?Tu(p[v],$.value):Se(p[v],$.value)})),I=[];return y.length&&I.push(N),b.length&&I.push(T),I}function d(m,h,p){if(!m)throw new de("Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.");for(let y in p)if(!m[y])throw new de(`The field "${y}" does not exist in the "${h}" Drizzle schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli@latest generate".`)}return{async create({model:m,data:h}){let p=u(m);return d(p,m,h),await l(m,s.insert(p).values(h),h)},async findOne({model:m,where:h,join:p}){let y=u(m),b=f(h,m);if(c.experimental?.joins)if(!s.query||!s.query[m])ye.error(`[# Drizzle Adapter]: The model "${m}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),ye.info("Falling back to regular query");else{let T,I=[];if(p){T={};let v=Object.entries(p);for(let[S,_]of v){let E=_.limit??c.advanced?.database?.defaultFindManyLimit??100,C=_.relation==="one-to-one",R=C||e.usePlural?"":"s";T[`${S}${R}`]=C?!0:{limit:E},C||I.push(`${S}${R}`)}}let $=await s.query[m].findFirst({where:b[0],with:T});if($)for(let v of I){let S=e.usePlural?v:v.slice(0,-1);$[S]=$[v],v!==S&&delete $[v]}return $}let N=await s.select().from(y).where(...b);return N.length?N[0]:null},async findMany({model:m,where:h,sortBy:p,limit:y,offset:b,join:N}){let T=u(m),I=h?f(h,m):[],$=p?.direction==="desc"?Ru:qw;if(c.experimental?.joins)if(!s.query[m])ye.error(`[# Drizzle Adapter]: The model "${m}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),ye.info("Falling back to regular query");else{let E,C=[];if(N){E={};let D=Object.entries(N);for(let[P,z]of D){let W=z.relation==="one-to-one",Q=z.limit??c.advanced?.database?.defaultFindManyLimit??100,G=W||e.usePlural?"":"s";E[`${P}${G}`]=W?!0:{limit:Q},W||C.push(`${P}${G}`)}}let R;p?.field&&(R=[$(T[a({model:m,field:p?.field})])]);let M=await s.query[m].findMany({where:I[0],with:E,limit:y??100,offset:b??0,orderBy:R});if(M)for(let D of M)for(let P of C){let z=e.usePlural?P:P.slice(0,-1);z!==P&&(D[z]=D[P],delete D[P])}return M}let v=s.select().from(T),S=y,_=b;return typeof S<"u"&&(v=v.limit(S)),typeof _<"u"&&(v=v.offset(_)),p?.field&&(v=v.orderBy($(T[a({model:m,field:p?.field})]))),await v.where(...I)},async count({model:m,where:h}){let p=u(m),y=h?f(h,m):[];return(await s.select({count:b2()}).from(p).where(...y))[0].count},async update({model:m,where:h,update:p}){let y=u(m),b=f(h,m);return await l(m,s.update(y).set(p).where(...b),p,h)},async updateMany({model:m,where:h,update:p}){let y=u(m),b=f(h,m);return await s.update(y).set(p).where(...b)},async delete({model:m,where:h}){let p=u(m),y=f(h,m);return await s.delete(p).where(...y)},async deleteMany({model:m,where:h}){let p=u(m),y=f(h,m),b=await s.delete(p).where(...y),N=0;return b&&"rowCount"in b?N=b.rowCount:Array.isArray(b)?N=b.length:b&&("affectedRows"in b||"rowsAffected"in b||"changes"in b)&&(N=b.affectedRows??b.rowsAffected??b.changes),typeof N!="number"&&ye.error("[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.",{res:b,model:m,where:h}),N},options:e}},n=null;n={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:e.usePlural??!1,debugLogs:e.debugLogs??!1,supportsUUIDs:e.provider==="pg",supportsJSON:e.provider==="pg",supportsArrays:e.provider==="pg",transaction:e.transaction??!1?s=>t.transaction(a=>s(Jo({config:n.config,adapter:i(a)})(r))):!1},adapter:i(t)};let o=Jo(n);return s=>(r=s,o(s))};var P3=Object.create,Du=Object.defineProperty,R3=Object.getOwnPropertyDescriptor,U3=Object.getOwnPropertyNames,D3=Object.getPrototypeOf,L3=Object.prototype.hasOwnProperty,z3=(t,e,r)=>e in t?Du(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,k=(t,e)=>Du(t,"name",{value:e,configurable:!0}),tn=(t,e)=>()=>(t&&(e=t(t=0)),e),Pe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hi=(t,e)=>{for(var r in e)Du(t,r,{get:e[r],enumerable:!0})},_2=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of U3(e))!L3.call(t,n)&&n!==r&&Du(t,n,{get:()=>e[n],enumerable:!(i=R3(e,n))||i.enumerable});return t},Ra=(t,e,r)=>(r=t!=null?P3(D3(t)):{},_2(e||!t||!t.__esModule?Du(r,"default",{value:t,enumerable:!0}):r,t)),or=t=>_2(Du({},"__esModule",{value:!0}),t),Ae=(t,e,r)=>z3(t,typeof e!="symbol"?e+"":e,r),j3=Pe(t=>{"use strict";he(),t.byteLength=c,t.toByteArray=l,t.fromByteArray=m;var e=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,s=n.length;o<s;++o)e[o]=n[o],r[n.charCodeAt(o)]=o;var o,s;r[45]=62,r[95]=63;function a(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=p);var b=y===p?0:4-y%4;return[y,b]}k(a,"getLens");function c(h){var p=a(h),y=p[0],b=p[1];return(y+b)*3/4-b}k(c,"byteLength");function u(h,p,y){return(p+y)*3/4-y}k(u,"_byteLength");function l(h){var p,y=a(h),b=y[0],N=y[1],T=new i(u(h,b,N)),I=0,$=N>0?b-4:b,v;for(v=0;v<$;v+=4)p=r[h.charCodeAt(v)]<<18|r[h.charCodeAt(v+1)]<<12|r[h.charCodeAt(v+2)]<<6|r[h.charCodeAt(v+3)],T[I++]=p>>16&255,T[I++]=p>>8&255,T[I++]=p&255;return N===2&&(p=r[h.charCodeAt(v)]<<2|r[h.charCodeAt(v+1)]>>4,T[I++]=p&255),N===1&&(p=r[h.charCodeAt(v)]<<10|r[h.charCodeAt(v+1)]<<4|r[h.charCodeAt(v+2)]>>2,T[I++]=p>>8&255,T[I++]=p&255),T}k(l,"toByteArray");function f(h){return e[h>>18&63]+e[h>>12&63]+e[h>>6&63]+e[h&63]}k(f,"tripletToBase64");function d(h,p,y){for(var b,N=[],T=p;T<y;T+=3)b=(h[T]<<16&16711680)+(h[T+1]<<8&65280)+(h[T+2]&255),N.push(f(b));return N.join("")}k(d,"encodeChunk");function m(h){for(var p,y=h.length,b=y%3,N=[],T=16383,I=0,$=y-b;I<$;I+=T)N.push(d(h,I,I+T>$?$:I+T));return b===1?(p=h[y-1],N.push(e[p>>2]+e[p<<4&63]+"==")):b===2&&(p=(h[y-2]<<8)+h[y-1],N.push(e[p>>10]+e[p>>4&63]+e[p<<2&63]+"=")),N.join("")}k(m,"fromByteArray")}),M3=Pe(t=>{he(),t.read=function(e,r,i,n,o){var s,a,c=o*8-n-1,u=(1<<c)-1,l=u>>1,f=-7,d=i?o-1:0,m=i?-1:1,h=e[r+d];for(d+=m,s=h&(1<<-f)-1,h>>=-f,f+=c;f>0;s=s*256+e[r+d],d+=m,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+e[r+d],d+=m,f-=8);if(s===0)s=1-l;else{if(s===u)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-l}return(h?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,r,i,n,o,s){var a,c,u,l=s*8-o-1,f=(1<<l)-1,d=f>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,p=n?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,a=f):(a=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+d>=1?r+=m/u:r+=m*Math.pow(2,1-d),r*u>=2&&(a++,u/=2),a+d>=f?(c=0,a=f):a+d>=1?(c=(r*u-1)*Math.pow(2,o),a=a+d):(c=r*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[i+h]=c&255,h+=p,c/=256,o-=8);for(a=a<<o|c,l+=o;l>0;e[i+h]=a&255,h+=p,a/=256,l-=8);e[i+h-p]|=y*128}}),B3=Pe(t=>{"use strict";he();var e=j3(),r=M3(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;var n=2147483647;t.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let g=new Uint8Array(1),x={foo:k(function(){return 42},"foo")};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(g,x),g.foo()===42}catch{return!1}}k(o,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:k(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:k(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function s(g){if(g>n)throw new RangeError('The value "'+g+'" is invalid for option "size"');let x=new Uint8Array(g);return Object.setPrototypeOf(x,a.prototype),x}k(s,"createBuffer");function a(g,x,A){if(typeof g=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(g)}return c(g,x,A)}k(a,"Buffer"),a.poolSize=8192;function c(g,x,A){if(typeof g=="string")return d(g,x);if(ArrayBuffer.isView(g))return h(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Wn(g,ArrayBuffer)||g&&Wn(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Wn(g,SharedArrayBuffer)||g&&Wn(g.buffer,SharedArrayBuffer)))return p(g,x,A);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let L=g.valueOf&&g.valueOf();if(L!=null&&L!==g)return a.from(L,x,A);let F=y(g);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return a.from(g[Symbol.toPrimitive]("string"),x,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}k(c,"from"),a.from=function(g,x,A){return c(g,x,A)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}k(u,"assertSize");function l(g,x,A){return u(g),g<=0?s(g):x!==void 0?typeof A=="string"?s(g).fill(x,A):s(g).fill(x):s(g)}k(l,"alloc"),a.alloc=function(g,x,A){return l(g,x,A)};function f(g){return u(g),s(g<0?0:b(g)|0)}k(f,"allocUnsafe"),a.allocUnsafe=function(g){return f(g)},a.allocUnsafeSlow=function(g){return f(g)};function d(g,x){if((typeof x!="string"||x==="")&&(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);let A=T(g,x)|0,L=s(A),F=L.write(g,x);return F!==A&&(L=L.slice(0,F)),L}k(d,"fromString");function m(g){let x=g.length<0?0:b(g.length)|0,A=s(x);for(let L=0;L<x;L+=1)A[L]=g[L]&255;return A}k(m,"fromArrayLike");function h(g){if(Wn(g,Uint8Array)){let x=new Uint8Array(g);return p(x.buffer,x.byteOffset,x.byteLength)}return m(g)}k(h,"fromArrayView");function p(g,x,A){if(x<0||g.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<x+(A||0))throw new RangeError('"length" is outside of buffer bounds');let L;return x===void 0&&A===void 0?L=new Uint8Array(g):A===void 0?L=new Uint8Array(g,x):L=new Uint8Array(g,x,A),Object.setPrototypeOf(L,a.prototype),L}k(p,"fromArrayBuffer");function y(g){if(a.isBuffer(g)){let x=b(g.length)|0,A=s(x);return A.length===0||g.copy(A,0,0,x),A}if(g.length!==void 0)return typeof g.length!="number"||Gf(g.length)?s(0):m(g);if(g.type==="Buffer"&&Array.isArray(g.data))return m(g.data)}k(y,"fromObject");function b(g){if(g>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return g|0}k(b,"checked");function N(g){return+g!=g&&(g=0),a.alloc(+g)}k(N,"SlowBuffer"),a.isBuffer=k(function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},"isBuffer"),a.compare=k(function(g,x){if(Wn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),Wn(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(g)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===x)return 0;let A=g.length,L=x.length;for(let F=0,Z=Math.min(A,L);F<Z;++F)if(g[F]!==x[F]){A=g[F],L=x[F];break}return A<L?-1:L<A?1:0},"compare"),a.isEncoding=k(function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=k(function(g,x){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let A;if(x===void 0)for(x=0,A=0;A<g.length;++A)x+=g[A].length;let L=a.allocUnsafe(x),F=0;for(A=0;A<g.length;++A){let Z=g[A];if(Wn(Z,Uint8Array))F+Z.length>L.length?(a.isBuffer(Z)||(Z=a.from(Z)),Z.copy(L,F)):Uint8Array.prototype.set.call(L,Z,F);else if(a.isBuffer(Z))Z.copy(L,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=Z.length}return L},"concat");function T(g,x){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Wn(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);let A=g.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&A===0)return 0;let F=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return Zf(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return Eb(g).length;default:if(F)return L?-1:Zf(g).length;x=(""+x).toLowerCase(),F=!0}}k(T,"byteLength"),a.byteLength=T;function I(g,x,A){let L=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,x>>>=0,A<=x))return"";for(g||(g="utf8");;)switch(g){case"hex":return J(this,x,A);case"utf8":case"utf-8":return P(this,x,A);case"ascii":return Q(this,x,A);case"latin1":case"binary":return G(this,x,A);case"base64":return D(this,x,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,x,A);default:if(L)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),L=!0}}k(I,"slowToString"),a.prototype._isBuffer=!0;function $(g,x,A){let L=g[x];g[x]=g[A],g[A]=L}k($,"swap"),a.prototype.swap16=k(function(){let g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<g;x+=2)$(this,x,x+1);return this},"swap16"),a.prototype.swap32=k(function(){let g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<g;x+=4)$(this,x,x+3),$(this,x+1,x+2);return this},"swap32"),a.prototype.swap64=k(function(){let g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<g;x+=8)$(this,x,x+7),$(this,x+1,x+6),$(this,x+2,x+5),$(this,x+3,x+4);return this},"swap64"),a.prototype.toString=k(function(){let g=this.length;return g===0?"":arguments.length===0?P(this,0,g):I.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=k(function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},"equals"),a.prototype.inspect=k(function(){let g="",x=t.INSPECT_MAX_BYTES;return g=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(g+=" ... "),"<Buffer "+g+">"},"inspect"),i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=k(function(g,x,A,L,F){if(Wn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(x===void 0&&(x=0),A===void 0&&(A=g?g.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),x<0||A>g.length||L<0||F>this.length)throw new RangeError("out of range index");if(L>=F&&x>=A)return 0;if(L>=F)return-1;if(x>=A)return 1;if(x>>>=0,A>>>=0,L>>>=0,F>>>=0,this===g)return 0;let Z=F-L,re=A-x,mt=Math.min(Z,re),Zt=this.slice(L,F),St=g.slice(x,A);for(let ht=0;ht<mt;++ht)if(Zt[ht]!==St[ht]){Z=Zt[ht],re=St[ht];break}return Z<re?-1:re<Z?1:0},"compare");function v(g,x,A,L,F){if(g.length===0)return-1;if(typeof A=="string"?(L=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Gf(A)&&(A=F?0:g.length-1),A<0&&(A=g.length+A),A>=g.length){if(F)return-1;A=g.length-1}else if(A<0)if(F)A=0;else return-1;if(typeof x=="string"&&(x=a.from(x,L)),a.isBuffer(x))return x.length===0?-1:S(g,x,A,L,F);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(g,x,A):Uint8Array.prototype.lastIndexOf.call(g,x,A):S(g,[x],A,L,F);throw new TypeError("val must be string, number or Buffer")}k(v,"bidirectionalIndexOf");function S(g,x,A,L,F){let Z=1,re=g.length,mt=x.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(g.length<2||x.length<2)return-1;Z=2,re/=2,mt/=2,A/=2}function Zt(ht,jt){return Z===1?ht[jt]:ht.readUInt16BE(jt*Z)}k(Zt,"read");let St;if(F){let ht=-1;for(St=A;St<re;St++)if(Zt(g,St)===Zt(x,ht===-1?0:St-ht)){if(ht===-1&&(ht=St),St-ht+1===mt)return ht*Z}else ht!==-1&&(St-=St-ht),ht=-1}else for(A+mt>re&&(A=re-mt),St=A;St>=0;St--){let ht=!0;for(let jt=0;jt<mt;jt++)if(Zt(g,St+jt)!==Zt(x,jt)){ht=!1;break}if(ht)return St}return-1}k(S,"arrayIndexOf"),a.prototype.includes=k(function(g,x,A){return this.indexOf(g,x,A)!==-1},"includes"),a.prototype.indexOf=k(function(g,x,A){return v(this,g,x,A,!0)},"indexOf"),a.prototype.lastIndexOf=k(function(g,x,A){return v(this,g,x,A,!1)},"lastIndexOf");function _(g,x,A,L){A=Number(A)||0;let F=g.length-A;L?(L=Number(L),L>F&&(L=F)):L=F;let Z=x.length;L>Z/2&&(L=Z/2);let re;for(re=0;re<L;++re){let mt=parseInt(x.substr(re*2,2),16);if(Gf(mt))return re;g[A+re]=mt}return re}k(_,"hexWrite");function E(g,x,A,L){return Vu(Zf(x,g.length-A),g,A,L)}k(E,"utf8Write");function C(g,x,A,L){return Vu(P$(x),g,A,L)}k(C,"asciiWrite");function R(g,x,A,L){return Vu(Eb(x),g,A,L)}k(R,"base64Write");function M(g,x,A,L){return Vu(R$(x,g.length-A),g,A,L)}k(M,"ucs2Write"),a.prototype.write=k(function(g,x,A,L){if(x===void 0)L="utf8",A=this.length,x=0;else if(A===void 0&&typeof x=="string")L=x,A=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(A)?(A=A>>>0,L===void 0&&(L="utf8")):(L=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let F=this.length-x;if((A===void 0||A>F)&&(A=F),g.length>0&&(A<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Z=!1;for(;;)switch(L){case"hex":return _(this,g,x,A);case"utf8":case"utf-8":return E(this,g,x,A);case"ascii":case"latin1":case"binary":return C(this,g,x,A);case"base64":return R(this,g,x,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,g,x,A);default:if(Z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Z=!0}},"write"),a.prototype.toJSON=k(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function D(g,x,A){return x===0&&A===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(x,A))}k(D,"base64Slice");function P(g,x,A){A=Math.min(g.length,A);let L=[],F=x;for(;F<A;){let Z=g[F],re=null,mt=Z>239?4:Z>223?3:Z>191?2:1;if(F+mt<=A){let Zt,St,ht,jt;switch(mt){case 1:Z<128&&(re=Z);break;case 2:Zt=g[F+1],(Zt&192)===128&&(jt=(Z&31)<<6|Zt&63,jt>127&&(re=jt));break;case 3:Zt=g[F+1],St=g[F+2],(Zt&192)===128&&(St&192)===128&&(jt=(Z&15)<<12|(Zt&63)<<6|St&63,jt>2047&&(jt<55296||jt>57343)&&(re=jt));break;case 4:Zt=g[F+1],St=g[F+2],ht=g[F+3],(Zt&192)===128&&(St&192)===128&&(ht&192)===128&&(jt=(Z&15)<<18|(Zt&63)<<12|(St&63)<<6|ht&63,jt>65535&&jt<1114112&&(re=jt))}}re===null?(re=65533,mt=1):re>65535&&(re-=65536,L.push(re>>>10&1023|55296),re=56320|re&1023),L.push(re),F+=mt}return W(L)}k(P,"utf8Slice");var z=4096;function W(g){let x=g.length;if(x<=z)return String.fromCharCode.apply(String,g);let A="",L=0;for(;L<x;)A+=String.fromCharCode.apply(String,g.slice(L,L+=z));return A}k(W,"decodeCodePointsArray");function Q(g,x,A){let L="";A=Math.min(g.length,A);for(let F=x;F<A;++F)L+=String.fromCharCode(g[F]&127);return L}k(Q,"asciiSlice");function G(g,x,A){let L="";A=Math.min(g.length,A);for(let F=x;F<A;++F)L+=String.fromCharCode(g[F]);return L}k(G,"latin1Slice");function J(g,x,A){let L=g.length;(!x||x<0)&&(x=0),(!A||A<0||A>L)&&(A=L);let F="";for(let Z=x;Z<A;++Z)F+=$z[g[Z]];return F}k(J,"hexSlice");function le(g,x,A){let L=g.slice(x,A),F="";for(let Z=0;Z<L.length-1;Z+=2)F+=String.fromCharCode(L[Z]+L[Z+1]*256);return F}k(le,"utf16leSlice"),a.prototype.slice=k(function(g,x){let A=this.length;g=~~g,x=x===void 0?A:~~x,g<0?(g+=A,g<0&&(g=0)):g>A&&(g=A),x<0?(x+=A,x<0&&(x=0)):x>A&&(x=A),x<g&&(x=g);let L=this.subarray(g,x);return Object.setPrototypeOf(L,a.prototype),L},"slice");function se(g,x,A){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+x>A)throw new RangeError("Trying to access beyond buffer length")}k(se,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=this[g],F=1,Z=0;for(;++Z<x&&(F*=256);)L+=this[g+Z]*F;return L},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=this[g+--x],F=1;for(;x>0&&(F*=256);)L+=this[g+--x]*F;return L},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=k(function(g,x){return g=g>>>0,x||se(g,1,this.length),this[g]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=k(function(g,x){return g=g>>>0,x||se(g,2,this.length),this[g]|this[g+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=k(function(g,x){return g=g>>>0,x||se(g,2,this.length),this[g]<<8|this[g+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=Fi(k(function(g){g=g>>>0,ys(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Da(g,this.length-8);let L=x+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,F=this[++g]+this[++g]*2**8+this[++g]*2**16+A*2**24;return BigInt(L)+(BigInt(F)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=Fi(k(function(g){g=g>>>0,ys(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Da(g,this.length-8);let L=x*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],F=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+A;return(BigInt(L)<<BigInt(32))+BigInt(F)},"readBigUInt64BE")),a.prototype.readIntLE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=this[g],F=1,Z=0;for(;++Z<x&&(F*=256);)L+=this[g+Z]*F;return F*=128,L>=F&&(L-=Math.pow(2,8*x)),L},"readIntLE"),a.prototype.readIntBE=k(function(g,x,A){g=g>>>0,x=x>>>0,A||se(g,x,this.length);let L=x,F=1,Z=this[g+--L];for(;L>0&&(F*=256);)Z+=this[g+--L]*F;return F*=128,Z>=F&&(Z-=Math.pow(2,8*x)),Z},"readIntBE"),a.prototype.readInt8=k(function(g,x){return g=g>>>0,x||se(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},"readInt8"),a.prototype.readInt16LE=k(function(g,x){g=g>>>0,x||se(g,2,this.length);let A=this[g]|this[g+1]<<8;return A&32768?A|4294901760:A},"readInt16LE"),a.prototype.readInt16BE=k(function(g,x){g=g>>>0,x||se(g,2,this.length);let A=this[g+1]|this[g]<<8;return A&32768?A|4294901760:A},"readInt16BE"),a.prototype.readInt32LE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},"readInt32LE"),a.prototype.readInt32BE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},"readInt32BE"),a.prototype.readBigInt64LE=Fi(k(function(g){g=g>>>0,ys(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Da(g,this.length-8);let L=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(A<<24);return(BigInt(L)<<BigInt(32))+BigInt(x+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=Fi(k(function(g){g=g>>>0,ys(g,"offset");let x=this[g],A=this[g+7];(x===void 0||A===void 0)&&Da(g,this.length-8);let L=(x<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(L)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+A)},"readBigInt64BE")),a.prototype.readFloatLE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),r.read(this,g,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=k(function(g,x){return g=g>>>0,x||se(g,4,this.length),r.read(this,g,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=k(function(g,x){return g=g>>>0,x||se(g,8,this.length),r.read(this,g,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=k(function(g,x){return g=g>>>0,x||se(g,8,this.length),r.read(this,g,!1,52,8)},"readDoubleBE");function be(g,x,A,L,F,Z){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>F||x<Z)throw new RangeError('"value" argument is out of bounds');if(A+L>g.length)throw new RangeError("Index out of range")}k(be,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=k(function(g,x,A,L){if(g=+g,x=x>>>0,A=A>>>0,!L){let re=Math.pow(2,8*A)-1;be(this,g,x,A,re,0)}let F=1,Z=0;for(this[x]=g&255;++Z<A&&(F*=256);)this[x+Z]=g/F&255;return x+A},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=k(function(g,x,A,L){if(g=+g,x=x>>>0,A=A>>>0,!L){let re=Math.pow(2,8*A)-1;be(this,g,x,A,re,0)}let F=A-1,Z=1;for(this[x+F]=g&255;--F>=0&&(Z*=256);)this[x+F]=g/Z&255;return x+A},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,1,255,0),this[x]=g&255,x+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,65535,0),this[x]=g&255,this[x+1]=g>>>8,x+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,65535,0),this[x]=g>>>8,this[x+1]=g&255,x+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,4294967295,0),this[x+3]=g>>>24,this[x+2]=g>>>16,this[x+1]=g>>>8,this[x]=g&255,x+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,4294967295,0),this[x]=g>>>24,this[x+1]=g>>>16,this[x+2]=g>>>8,this[x+3]=g&255,x+4},"writeUInt32BE");function Re(g,x,A,L,F){Ab(x,L,F,g,A,7);let Z=Number(x&BigInt(4294967295));g[A++]=Z,Z=Z>>8,g[A++]=Z,Z=Z>>8,g[A++]=Z,Z=Z>>8,g[A++]=Z;let re=Number(x>>BigInt(32)&BigInt(4294967295));return g[A++]=re,re=re>>8,g[A++]=re,re=re>>8,g[A++]=re,re=re>>8,g[A++]=re,A}k(Re,"wrtBigUInt64LE");function Lt(g,x,A,L,F){Ab(x,L,F,g,A,7);let Z=Number(x&BigInt(4294967295));g[A+7]=Z,Z=Z>>8,g[A+6]=Z,Z=Z>>8,g[A+5]=Z,Z=Z>>8,g[A+4]=Z;let re=Number(x>>BigInt(32)&BigInt(4294967295));return g[A+3]=re,re=re>>8,g[A+2]=re,re=re>>8,g[A+1]=re,re=re>>8,g[A]=re,A+8}k(Lt,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=Fi(k(function(g,x=0){return Re(this,g,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=Fi(k(function(g,x=0){return Lt(this,g,x,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=k(function(g,x,A,L){if(g=+g,x=x>>>0,!L){let mt=Math.pow(2,8*A-1);be(this,g,x,A,mt-1,-mt)}let F=0,Z=1,re=0;for(this[x]=g&255;++F<A&&(Z*=256);)g<0&&re===0&&this[x+F-1]!==0&&(re=1),this[x+F]=(g/Z>>0)-re&255;return x+A},"writeIntLE"),a.prototype.writeIntBE=k(function(g,x,A,L){if(g=+g,x=x>>>0,!L){let mt=Math.pow(2,8*A-1);be(this,g,x,A,mt-1,-mt)}let F=A-1,Z=1,re=0;for(this[x+F]=g&255;--F>=0&&(Z*=256);)g<0&&re===0&&this[x+F+1]!==0&&(re=1),this[x+F]=(g/Z>>0)-re&255;return x+A},"writeIntBE"),a.prototype.writeInt8=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,1,127,-128),g<0&&(g=255+g+1),this[x]=g&255,x+1},"writeInt8"),a.prototype.writeInt16LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,32767,-32768),this[x]=g&255,this[x+1]=g>>>8,x+2},"writeInt16LE"),a.prototype.writeInt16BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,2,32767,-32768),this[x]=g>>>8,this[x+1]=g&255,x+2},"writeInt16BE"),a.prototype.writeInt32LE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,2147483647,-2147483648),this[x]=g&255,this[x+1]=g>>>8,this[x+2]=g>>>16,this[x+3]=g>>>24,x+4},"writeInt32LE"),a.prototype.writeInt32BE=k(function(g,x,A){return g=+g,x=x>>>0,A||be(this,g,x,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[x]=g>>>24,this[x+1]=g>>>16,this[x+2]=g>>>8,this[x+3]=g&255,x+4},"writeInt32BE"),a.prototype.writeBigInt64LE=Fi(k(function(g,x=0){return Re(this,g,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=Fi(k(function(g,x=0){return Lt(this,g,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function Bn(g,x,A,L,F,Z){if(A+L>g.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}k(Bn,"checkIEEE754");function xn(g,x,A,L,F){return x=+x,A=A>>>0,F||Bn(g,x,A,4,34028234663852886e22,-34028234663852886e22),r.write(g,x,A,L,23,4),A+4}k(xn,"writeFloat"),a.prototype.writeFloatLE=k(function(g,x,A){return xn(this,g,x,!0,A)},"writeFloatLE"),a.prototype.writeFloatBE=k(function(g,x,A){return xn(this,g,x,!1,A)},"writeFloatBE");function wi(g,x,A,L,F){return x=+x,A=A>>>0,F||Bn(g,x,A,8,17976931348623157e292,-17976931348623157e292),r.write(g,x,A,L,52,8),A+8}k(wi,"writeDouble"),a.prototype.writeDoubleLE=k(function(g,x,A){return wi(this,g,x,!0,A)},"writeDoubleLE"),a.prototype.writeDoubleBE=k(function(g,x,A){return wi(this,g,x,!1,A)},"writeDoubleBE"),a.prototype.copy=k(function(g,x,A,L){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(A||(A=0),!L&&L!==0&&(L=this.length),x>=g.length&&(x=g.length),x||(x=0),L>0&&L<A&&(L=A),L===A||g.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),g.length-x<L-A&&(L=g.length-x+A);let F=L-A;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,A,L):Uint8Array.prototype.set.call(g,this.subarray(A,L),x),F},"copy"),a.prototype.fill=k(function(g,x,A,L){if(typeof g=="string"){if(typeof x=="string"?(L=x,x=0,A=this.length):typeof A=="string"&&(L=A,A=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(g.length===1){let Z=g.charCodeAt(0);(L==="utf8"&&Z<128||L==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(x<0||this.length<x||this.length<A)throw new RangeError("Out of range index");if(A<=x)return this;x=x>>>0,A=A===void 0?this.length:A>>>0,g||(g=0);let F;if(typeof g=="number")for(F=x;F<A;++F)this[F]=g;else{let Z=a.isBuffer(g)?g:a.from(g,L),re=Z.length;if(re===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(F=0;F<A-x;++F)this[F+x]=Z[F%re]}return this},"fill");var on={};function qn(g,x,A){var L;on[g]=(L=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}},k(L,"NodeError"),L)}k(qn,"E"),qn("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qn("ERR_INVALID_ARG_TYPE",function(g,x){return`The "${g}" argument must be of type number. Received type ${typeof x}`},TypeError),qn("ERR_OUT_OF_RANGE",function(g,x,A){let L=`The value of "${g}" is out of range.`,F=A;return Number.isInteger(A)&&Math.abs(A)>2**32?F=Nb(String(A)):typeof A=="bigint"&&(F=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(F=Nb(F)),F+="n"),L+=` It must be ${x}. Received ${F}`,L},RangeError);function Nb(g){let x="",A=g.length,L=g[0]==="-"?1:0;for(;A>=L+4;A-=3)x=`_${g.slice(A-3,A)}${x}`;return`${g.slice(0,A)}${x}`}k(Nb,"addNumericalSeparator");function C$(g,x,A){ys(x,"offset"),(g[x]===void 0||g[x+A]===void 0)&&Da(x,g.length-(A+1))}k(C$,"checkBounds");function Ab(g,x,A,L,F,Z){if(g>A||g<x){let re=typeof x=="bigint"?"n":"",mt;throw Z>3?x===0||x===BigInt(0)?mt=`>= 0${re} and < 2${re} ** ${(Z+1)*8}${re}`:mt=`>= -(2${re} ** ${(Z+1)*8-1}${re}) and < 2 ** ${(Z+1)*8-1}${re}`:mt=`>= ${x}${re} and <= ${A}${re}`,new on.ERR_OUT_OF_RANGE("value",mt,g)}C$(L,F,Z)}k(Ab,"checkIntBI");function ys(g,x){if(typeof g!="number")throw new on.ERR_INVALID_ARG_TYPE(x,"number",g)}k(ys,"validateNumber");function Da(g,x,A){throw Math.floor(g)!==g?(ys(g,A),new on.ERR_OUT_OF_RANGE(A||"offset","an integer",g)):x<0?new on.ERR_BUFFER_OUT_OF_BOUNDS:new on.ERR_OUT_OF_RANGE(A||"offset",`>= ${A?1:0} and <= ${x}`,g)}k(Da,"boundsError");var Iz=/[^+/0-9A-Za-z-_]/g;function O$(g){if(g=g.split("=")[0],g=g.trim().replace(Iz,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}k(O$,"base64clean");function Zf(g,x){x=x||1/0;let A,L=g.length,F=null,Z=[];for(let re=0;re<L;++re){if(A=g.charCodeAt(re),A>55295&&A<57344){if(!F){if(A>56319){(x-=3)>-1&&Z.push(239,191,189);continue}else if(re+1===L){(x-=3)>-1&&Z.push(239,191,189);continue}F=A;continue}if(A<56320){(x-=3)>-1&&Z.push(239,191,189),F=A;continue}A=(F-55296<<10|A-56320)+65536}else F&&(x-=3)>-1&&Z.push(239,191,189);if(F=null,A<128){if((x-=1)<0)break;Z.push(A)}else if(A<2048){if((x-=2)<0)break;Z.push(A>>6|192,A&63|128)}else if(A<65536){if((x-=3)<0)break;Z.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((x-=4)<0)break;Z.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return Z}k(Zf,"utf8ToBytes");function P$(g){let x=[];for(let A=0;A<g.length;++A)x.push(g.charCodeAt(A)&255);return x}k(P$,"asciiToBytes");function R$(g,x){let A,L,F,Z=[];for(let re=0;re<g.length&&!((x-=2)<0);++re)A=g.charCodeAt(re),L=A>>8,F=A%256,Z.push(F),Z.push(L);return Z}k(R$,"utf16leToBytes");function Eb(g){return e.toByteArray(O$(g))}k(Eb,"base64ToBytes");function Vu(g,x,A,L){let F;for(F=0;F<L&&!(F+A>=x.length||F>=g.length);++F)x[F+A]=g[F];return F}k(Vu,"blitBuffer");function Wn(g,x){return g instanceof x||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===x.name}k(Wn,"isInstance");function Gf(g){return g!==g}k(Gf,"numberIsNaN");var $z=(function(){let g="0123456789abcdef",x=new Array(256);for(let A=0;A<16;++A){let L=A*16;for(let F=0;F<16;++F)x[L+F]=g[A]+g[F]}return x})();function Fi(g){return typeof BigInt>"u"?U$:g}k(Fi,"defineBigIntMethod");function U$(){throw new Error("BigInt not supported")}k(U$,"BufferBigIntNotDefined")}),Zw,e$,q3,Ne,Oe,he=tn(()=>{"use strict";Zw=globalThis,e$=globalThis.setImmediate??(t=>setTimeout(t,0)),q3=globalThis.clearImmediate??(t=>clearTimeout(t)),Ne=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:B3().Buffer,Oe=globalThis.process??{},Oe.env??(Oe.env={});try{Oe.nextTick(()=>{})}catch{let t=Promise.resolve();Oe.nextTick=t.then.bind(t)}}),Ua=Pe((t,e)=>{"use strict";he();var r=typeof Reflect=="object"?Reflect:null,i=r&&typeof r.apply=="function"?r.apply:k(function(v,S,_){return Function.prototype.apply.call(v,S,_)},"ReflectApply"),n;r&&typeof r.ownKeys=="function"?n=r.ownKeys:Object.getOwnPropertySymbols?n=k(function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))},"ReflectOwnKeys"):n=k(function(v){return Object.getOwnPropertyNames(v)},"ReflectOwnKeys");function o(v){console&&console.warn&&console.warn(v)}k(o,"ProcessEmitWarning");var s=Number.isNaN||k(function(v){return v!==v},"NumberIsNaN");function a(){a.init.call(this)}k(a,"EventEmitter"),e.exports=a,e.exports.once=T,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(v){if(typeof v!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof v)}k(u,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:k(function(){return c},"get"),set:k(function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+v+".");c=v},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=k(function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this},"setMaxListeners");function l(v){return v._maxListeners===void 0?a.defaultMaxListeners:v._maxListeners}k(l,"_getMaxListeners"),a.prototype.getMaxListeners=k(function(){return l(this)},"getMaxListeners"),a.prototype.emit=k(function(v){for(var S=[],_=1;_<arguments.length;_++)S.push(arguments[_]);var E=v==="error",C=this._events;if(C!==void 0)E=E&&C.error===void 0;else if(!E)return!1;if(E){var R;if(S.length>0&&(R=S[0]),R instanceof Error)throw R;var M=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw M.context=R,M}var D=C[v];if(D===void 0)return!1;if(typeof D=="function")i(D,this,S);else for(var P=D.length,z=y(D,P),_=0;_<P;++_)i(z[_],this,S);return!0},"emit");function f(v,S,_,E){var C,R,M;if(u(_),R=v._events,R===void 0?(R=v._events=Object.create(null),v._eventsCount=0):(R.newListener!==void 0&&(v.emit("newListener",S,_.listener?_.listener:_),R=v._events),M=R[S]),M===void 0)M=R[S]=_,++v._eventsCount;else if(typeof M=="function"?M=R[S]=E?[_,M]:[M,_]:E?M.unshift(_):M.push(_),C=l(v),C>0&&M.length>C&&!M.warned){M.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=v,D.type=S,D.count=M.length,o(D)}return v}k(f,"_addListener"),a.prototype.addListener=k(function(v,S){return f(this,v,S,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=k(function(v,S){return f(this,v,S,!0)},"prependListener");function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}k(d,"onceWrapper");function m(v,S,_){var E={fired:!1,wrapFn:void 0,target:v,type:S,listener:_},C=d.bind(E);return C.listener=_,E.wrapFn=C,C}k(m,"_onceWrap"),a.prototype.once=k(function(v,S){return u(S),this.on(v,m(this,v,S)),this},"once"),a.prototype.prependOnceListener=k(function(v,S){return u(S),this.prependListener(v,m(this,v,S)),this},"prependOnceListener"),a.prototype.removeListener=k(function(v,S){var _,E,C,R,M;if(u(S),E=this._events,E===void 0)return this;if(_=E[v],_===void 0)return this;if(_===S||_.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete E[v],E.removeListener&&this.emit("removeListener",v,_.listener||S));else if(typeof _!="function"){for(C=-1,R=_.length-1;R>=0;R--)if(_[R]===S||_[R].listener===S){M=_[R].listener,C=R;break}if(C<0)return this;C===0?_.shift():b(_,C),_.length===1&&(E[v]=_[0]),E.removeListener!==void 0&&this.emit("removeListener",v,M||S)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=k(function(v){var S,_,E;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[v]),this;if(arguments.length===0){var C=Object.keys(_),R;for(E=0;E<C.length;++E)R=C[E],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=_[v],typeof S=="function")this.removeListener(v,S);else if(S!==void 0)for(E=S.length-1;E>=0;E--)this.removeListener(v,S[E]);return this},"removeAllListeners");function h(v,S,_){var E=v._events;if(E===void 0)return[];var C=E[S];return C===void 0?[]:typeof C=="function"?_?[C.listener||C]:[C]:_?N(C):y(C,C.length)}k(h,"_listeners"),a.prototype.listeners=k(function(v){return h(this,v,!0)},"listeners"),a.prototype.rawListeners=k(function(v){return h(this,v,!1)},"rawListeners"),a.listenerCount=function(v,S){return typeof v.listenerCount=="function"?v.listenerCount(S):p.call(v,S)},a.prototype.listenerCount=p;function p(v){var S=this._events;if(S!==void 0){var _=S[v];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}k(p,"listenerCount"),a.prototype.eventNames=k(function(){return this._eventsCount>0?n(this._events):[]},"eventNames");function y(v,S){for(var _=new Array(S),E=0;E<S;++E)_[E]=v[E];return _}k(y,"arrayClone");function b(v,S){for(;S+1<v.length;S++)v[S]=v[S+1];v.pop()}k(b,"spliceOne");function N(v){for(var S=new Array(v.length),_=0;_<S.length;++_)S[_]=v[_].listener||v[_];return S}k(N,"unwrapListeners");function T(v,S){return new Promise(function(_,E){function C(M){v.removeListener(S,R),E(M)}k(C,"errorListener");function R(){typeof v.removeListener=="function"&&v.removeListener("error",C),_([].slice.call(arguments))}k(R,"resolver"),$(v,S,R,{once:!0}),S!=="error"&&I(v,C,{once:!0})})}k(T,"once");function I(v,S,_){typeof v.on=="function"&&$(v,"error",S,_)}k(I,"addErrorHandlerIfEventEmitter");function $(v,S,_,E){if(typeof v.on=="function")E.once?v.once(S,_):v.on(S,_);else if(typeof v.addEventListener=="function")v.addEventListener(S,k(function C(R){E.once&&v.removeEventListener(S,C),_(R)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof v)}k($,"eventTargetAgnosticAddListener")}),k2={};hi(k2,{Socket:()=>jf,isIP:()=>T2});function T2(t){return 0}var v2,QI,Df,jf,Mf=tn(()=>{"use strict";he(),v2=Ra(Ua(),1),k(T2,"isIP"),QI=/^[^.]+\./,Df=class ve extends v2.EventEmitter{constructor(){super(...arguments),Ae(this,"opts",{}),Ae(this,"connecting",!1),Ae(this,"pending",!0),Ae(this,"writable",!0),Ae(this,"encrypted",!1),Ae(this,"authorized",!1),Ae(this,"destroyed",!1),Ae(this,"ws",null),Ae(this,"writeBuffer"),Ae(this,"tlsState",0),Ae(this,"tlsRead"),Ae(this,"tlsWrite")}static get poolQueryViaFetch(){return ve.opts.poolQueryViaFetch??ve.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){ve.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return ve.opts.fetchEndpoint??ve.defaults.fetchEndpoint}static set fetchEndpoint(e){ve.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return ve.opts.fetchFunction??ve.defaults.fetchFunction}static set fetchFunction(e){ve.opts.fetchFunction=e}static get webSocketConstructor(){return ve.opts.webSocketConstructor??ve.defaults.webSocketConstructor}static set webSocketConstructor(e){ve.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??ve.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return ve.opts.wsProxy??ve.defaults.wsProxy}static set wsProxy(e){ve.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??ve.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return ve.opts.coalesceWrites??ve.defaults.coalesceWrites}static set coalesceWrites(e){ve.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??ve.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return ve.opts.useSecureWebSocket??ve.defaults.useSecureWebSocket}static set useSecureWebSocket(e){ve.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??ve.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return ve.opts.forceDisablePgSSL??ve.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){ve.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??ve.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return ve.opts.disableSNI??ve.defaults.disableSNI}static set disableSNI(e){ve.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??ve.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get disableWarningInBrowsers(){return ve.opts.disableWarningInBrowsers??ve.defaults.disableWarningInBrowsers}static set disableWarningInBrowsers(e){ve.opts.disableWarningInBrowsers=e}get disableWarningInBrowsers(){return this.opts.disableWarningInBrowsers??ve.disableWarningInBrowsers}set disableWarningInBrowsers(e){this.opts.disableWarningInBrowsers=e}static get pipelineConnect(){return ve.opts.pipelineConnect??ve.defaults.pipelineConnect}static set pipelineConnect(e){ve.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??ve.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return ve.opts.subtls??ve.defaults.subtls}static set subtls(e){ve.opts.subtls=e}get subtls(){return this.opts.subtls??ve.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return ve.opts.pipelineTLS??ve.defaults.pipelineTLS}static set pipelineTLS(e){ve.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??ve.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return ve.opts.rootCerts??ve.defaults.rootCerts}static set rootCerts(e){ve.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??ve.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,r){let i=this.wsProxy;if(i===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof i=="function"?i(e,r):`${i}?address=${e}:${r}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,r,i){this.connecting=!0,i&&this.once("connect",i);let n=k(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),o=k((a,c=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",u=>{this.emit("error",u),this.emit("close")}),a.addEventListener("message",u=>{if(this.tlsState===0){let l=Ne.from(u.data);this.emit("data",l)}}),a.addEventListener("close",()=>{this.emit("close")}),c?n():a.addEventListener("open",n)},"configureWebSocket"),s;try{s=this.wsProxyAddrForHost(r,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+s;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),o(this.ws);else try{this.ws=new WebSocket(a),o(this.ws)}catch{this.ws=new __unstable_WebSocket(a),o(this.ws)}}catch(a){let c=(this.useSecureWebSocket?"https:":"http:")+"//"+s;fetch(c,{headers:{Upgrade:"websocket"}}).then(u=>{if(this.ws=u.webSocket,this.ws==null)throw a;this.ws.accept(),o(this.ws,!0)}).catch(u=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${u}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let r=await this.subtls.TrustedCert.databaseFromPEM(this.rootCerts),i=new this.subtls.WebSocketReadQueue(this.ws),n=i.read.bind(i),o=this.rawWrite.bind(this),{read:s,write:a}=await this.subtls.startTls(e,r,n,o,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=s,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let r=Ne.from(e);this.emit("data",r)}}}rawWrite(e){if(!this.coalesceWrites){this.ws&&this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws&&this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let r=new Uint8Array(this.writeBuffer.length+e.length);r.set(this.writeBuffer),r.set(e,this.writeBuffer.length),this.writeBuffer=r}}write(e,r="utf8",i=n=>{}){return e.length===0?(i(),!0):(typeof e=="string"&&(e=Ne.from(e,r)),this.tlsState===0?(this.rawWrite(e),i()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,r,i)}):(this.tlsWrite(e),i()),!0)}end(e=Ne.alloc(0),r="utf8",i=()=>{}){return this.write(e,r,()=>{this.ws.close(),i()}),this}destroy(){return this.destroyed=!0,this.end()}},k(Df,"Socket"),Ae(Df,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:k((t,e,r)=>{let i;return r?.jwtAuth?i=t.replace(QI,"apiauth."):i=t.replace(QI,"api."),"https://"+i+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:k(t=>t+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1,disableWarningInBrowsers:!1}),Ae(Df,"opts",{}),jf=Df}),I2={};hi(I2,{parse:()=>t$});function t$(t,e=!1){let{protocol:r}=new URL(t),i="http:"+t.substring(r.length),{username:n,password:o,host:s,hostname:a,port:c,pathname:u,search:l,searchParams:f,hash:d}=new URL(i);o=decodeURIComponent(o),n=decodeURIComponent(n),u=decodeURIComponent(u);let m=n+":"+o,h=e?Object.fromEntries(f.entries()):l;return{href:t,protocol:r,auth:m,username:n,password:o,host:s,hostname:a,port:c,pathname:u,search:l,query:h,hash:d}}var $2=tn(()=>{"use strict";he(),k(t$,"parse")}),C2=Pe(t=>{"use strict";he(),t.parse=function(n,o){return new r(n,o).parse()};var e=class O2{constructor(o,s){this.source=o,this.transform=s||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var o=this.source[this.position++];return o==="\\"?{value:this.source[this.position++],escaped:!0}:{value:o,escaped:!1}}record(o){this.recorded.push(o)}newEntry(o){var s;(this.recorded.length>0||o)&&(s=this.recorded.join(""),s==="NULL"&&!o&&(s=null),s!==null&&(s=this.transform(s)),this.entries.push(s),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var o=this.nextCharacter();if(o.value==="=")break}}parse(o){var s,a,c;for(this.consumeDimensions();!this.isEof();)if(s=this.nextCharacter(),s.value==="{"&&!c)this.dimension++,this.dimension>1&&(a=new O2(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(s.value==="}"&&!c){if(this.dimension--,!this.dimension&&(this.newEntry(),o))return this.entries}else s.value==='"'&&!s.escaped?(c&&this.newEntry(!0),c=!c):s.value===","&&!c?this.newEntry():this.record(s.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};k(e,"ArrayParser");var r=e;function i(n){return n}k(i,"identity")}),P2=Pe((t,e)=>{he();var r=C2();e.exports={create:k(function(i,n){return{parse:k(function(){return r.parse(i,n)},"parse")}},"create")}}),W3=Pe((t,e)=>{"use strict";he();var r=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,i=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,n=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,o=/^-?infinity$/;e.exports=k(function(l){if(o.test(l))return Number(l.replace("i","I"));var f=r.exec(l);if(!f)return s(l)||null;var d=!!f[8],m=parseInt(f[1],10);d&&(m=c(m));var h=parseInt(f[2],10)-1,p=f[3],y=parseInt(f[4],10),b=parseInt(f[5],10),N=parseInt(f[6],10),T=f[7];T=T?1e3*parseFloat(T):0;var I,$=a(l);return $!=null?(I=new Date(Date.UTC(m,h,p,y,b,N,T)),u(m)&&I.setUTCFullYear(m),$!==0&&I.setTime(I.getTime()-$)):(I=new Date(m,h,p,y,b,N,T),u(m)&&I.setFullYear(m)),I},"parseDate");function s(l){var f=i.exec(l);if(f){var d=parseInt(f[1],10),m=!!f[4];m&&(d=c(d));var h=parseInt(f[2],10)-1,p=f[3],y=new Date(d,h,p);return u(d)&&y.setFullYear(d),y}}k(s,"getDate");function a(l){if(l.endsWith("+00"))return 0;var f=n.exec(l.split(" ")[1]);if(f){var d=f[1];if(d==="Z")return 0;var m=d==="-"?-1:1,h=parseInt(f[2],10)*3600+parseInt(f[3]||0,10)*60+parseInt(f[4]||0,10);return h*m*1e3}}k(a,"timeZoneOffset");function c(l){return-(l-1)}k(c,"bcYearToNegativeYear");function u(l){return l>=0&&l<100}k(u,"is0To99")}),F3=Pe((t,e)=>{he(),e.exports=i;var r=Object.prototype.hasOwnProperty;function i(n){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var a in s)r.call(s,a)&&(n[a]=s[a])}return n}k(i,"extend")}),V3=Pe((t,e)=>{"use strict";he();var r=F3();e.exports=i;function i(N){if(!(this instanceof i))return new i(N);r(this,b(N))}k(i,"PostgresInterval");var n=["seconds","minutes","hours","days","months","years"];i.prototype.toPostgres=function(){var N=n.filter(this.hasOwnProperty,this);return this.milliseconds&&N.indexOf("seconds")<0&&N.push("seconds"),N.length===0?"0":N.map(function(T){var I=this[T]||0;return T==="seconds"&&this.milliseconds&&(I=(I+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),I+" "+T},this).join(" ")};var o={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},s=["years","months","days"],a=["hours","minutes","seconds"];i.prototype.toISOString=i.prototype.toISO=function(){var N=s.map(I,this).join(""),T=a.map(I,this).join("");return"P"+N+"T"+T;function I($){var v=this[$]||0;return $==="seconds"&&this.milliseconds&&(v=(v+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),v+o[$]}};var c="([+-]?\\d+)",u=c+"\\s+years?",l=c+"\\s+mons?",f=c+"\\s+days?",d="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",m=new RegExp([u,l,f,d].map(function(N){return"("+N+")?"}).join("\\s*")),h={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},p=["hours","minutes","seconds","milliseconds"];function y(N){var T=N+"000000".slice(N.length);return parseInt(T,10)/1e3}k(y,"parseMilliseconds");function b(N){if(!N)return{};var T=m.exec(N),I=T[8]==="-";return Object.keys(h).reduce(function($,v){var S=h[v],_=T[S];return!_||(_=v==="milliseconds"?y(_):parseInt(_,10),!_)||(I&&~p.indexOf(v)&&(_*=-1),$[v]=_),$},{})}k(b,"parse")}),K3=Pe((t,e)=>{"use strict";he(),e.exports=k(function(r){if(/^\\x/.test(r))return new Ne(r.substr(2),"hex");for(var i="",n=0;n<r.length;)if(r[n]!=="\\")i+=r[n],++n;else if(/[0-7]{3}/.test(r.substr(n+1,3)))i+=String.fromCharCode(parseInt(r.substr(n+1,3),8)),n+=4;else{for(var o=1;n+o<r.length&&r[n+o]==="\\";)o++;for(var s=0;s<Math.floor(o/2);++s)i+="\\";n+=Math.floor(o/2)*2}return new Ne(i,"binary")},"parseBytea")}),H3=Pe((t,e)=>{he();var r=C2(),i=P2(),n=W3(),o=V3(),s=K3();function a(E){return k(function(C){return C===null?C:E(C)},"nullAllowed")}k(a,"allowNull");function c(E){return E===null?E:E==="TRUE"||E==="t"||E==="true"||E==="y"||E==="yes"||E==="on"||E==="1"}k(c,"parseBool");function u(E){return E?r.parse(E,c):null}k(u,"parseBoolArray");function l(E){return parseInt(E,10)}k(l,"parseBaseTenInt");function f(E){return E?r.parse(E,a(l)):null}k(f,"parseIntegerArray");function d(E){return E?r.parse(E,a(function(C){return I(C).trim()})):null}k(d,"parseBigIntegerArray");var m=k(function(E){if(!E)return null;var C=i.create(E,function(R){return R!==null&&(R=v(R)),R});return C.parse()},"parsePointArray"),h=k(function(E){if(!E)return null;var C=i.create(E,function(R){return R!==null&&(R=parseFloat(R)),R});return C.parse()},"parseFloatArray"),p=k(function(E){if(!E)return null;var C=i.create(E);return C.parse()},"parseStringArray"),y=k(function(E){if(!E)return null;var C=i.create(E,function(R){return R!==null&&(R=n(R)),R});return C.parse()},"parseDateArray"),b=k(function(E){if(!E)return null;var C=i.create(E,function(R){return R!==null&&(R=o(R)),R});return C.parse()},"parseIntervalArray"),N=k(function(E){return E?r.parse(E,a(s)):null},"parseByteAArray"),T=k(function(E){return parseInt(E,10)},"parseInteger"),I=k(function(E){var C=String(E);return/^\d+$/.test(C)?C:E},"parseBigInteger"),$=k(function(E){return E?r.parse(E,a(JSON.parse)):null},"parseJsonArray"),v=k(function(E){return E[0]!=="("?null:(E=E.substring(1,E.length-1).split(","),{x:parseFloat(E[0]),y:parseFloat(E[1])})},"parsePoint"),S=k(function(E){if(E[0]!=="<"&&E[1]!=="(")return null;for(var C="(",R="",M=!1,D=2;D<E.length-1;D++){if(M||(C+=E[D]),E[D]===")"){M=!0;continue}else if(!M)continue;E[D]!==","&&(R+=E[D])}var P=v(C);return P.radius=parseFloat(R),P},"parseCircle"),_=k(function(E){E(20,I),E(21,T),E(23,T),E(26,T),E(700,parseFloat),E(701,parseFloat),E(16,c),E(1082,n),E(1114,n),E(1184,n),E(600,v),E(651,p),E(718,S),E(1e3,u),E(1001,N),E(1005,f),E(1007,f),E(1028,f),E(1016,d),E(1017,m),E(1021,h),E(1022,h),E(1231,h),E(1014,p),E(1015,p),E(1008,p),E(1009,p),E(1040,p),E(1041,p),E(1115,y),E(1182,y),E(1185,y),E(1186,o),E(1187,b),E(17,s),E(114,JSON.parse.bind(JSON)),E(3802,JSON.parse.bind(JSON)),E(199,$),E(3807,$),E(3907,p),E(2951,p),E(791,p),E(1183,p),E(1270,p)},"init");e.exports={init:_}}),J3=Pe((t,e)=>{"use strict";he();var r=1e6;function i(n){var o=n.readInt32BE(0),s=n.readUInt32BE(4),a="";o<0&&(o=~o+(s===0),s=~s+1>>>0,a="-");var c="",u,l,f,d,m,h;{if(u=o%r,o=o/r>>>0,l=4294967296*u+s,s=l/r>>>0,f=""+(l-r*s),s===0&&o===0)return a+f+c;for(d="",m=6-f.length,h=0;h<m;h++)d+="0";c=d+f+c}{if(u=o%r,o=o/r>>>0,l=4294967296*u+s,s=l/r>>>0,f=""+(l-r*s),s===0&&o===0)return a+f+c;for(d="",m=6-f.length,h=0;h<m;h++)d+="0";c=d+f+c}{if(u=o%r,o=o/r>>>0,l=4294967296*u+s,s=l/r>>>0,f=""+(l-r*s),s===0&&o===0)return a+f+c;for(d="",m=6-f.length,h=0;h<m;h++)d+="0";c=d+f+c}return u=o%r,l=4294967296*u+s,f=""+l%r,a+f+c}k(i,"readInt8"),e.exports=i}),Q3=Pe((t,e)=>{he();var r=J3(),i=k(function(p,y,b,N,T){b=b||0,N=N||!1,T=T||function(M,D,P){return M*Math.pow(2,P)+D};var I=b>>3,$=k(function(M){return N?~M&255:M},"inv"),v=255,S=8-b%8;y<S&&(v=255<<8-y&255,S=y),b&&(v=v>>b%8);var _=0;b%8+y>=8&&(_=T(0,$(p[I])&v,S));for(var E=y+b>>3,C=I+1;C<E;C++)_=T(_,$(p[C]),8);var R=(y+b)%8;return R>0&&(_=T(_,$(p[E])>>8-R,R)),_},"parseBits"),n=k(function(p,y,b){var N=Math.pow(2,b-1)-1,T=i(p,1),I=i(p,b,1);if(I===0)return 0;var $=1,v=k(function(_,E,C){_===0&&(_=1);for(var R=1;R<=C;R++)$/=2,(E&1<<C-R)>0&&(_+=$);return _},"parsePrecisionBits"),S=i(p,y,b+1,!1,v);return I==Math.pow(2,b+1)-1?S===0?T===0?1/0:-1/0:NaN:(T===0?1:-1)*Math.pow(2,I-N)*S},"parseFloatFromBits"),o=k(function(p){return i(p,1)==1?-1*(i(p,15,1,!0)+1):i(p,15,1)},"parseInt16"),s=k(function(p){return i(p,1)==1?-1*(i(p,31,1,!0)+1):i(p,31,1)},"parseInt32"),a=k(function(p){return n(p,23,8)},"parseFloat32"),c=k(function(p){return n(p,52,11)},"parseFloat64"),u=k(function(p){var y=i(p,16,32);if(y==49152)return NaN;for(var b=Math.pow(1e4,i(p,16,16)),N=0,T=[],I=i(p,16),$=0;$<I;$++)N+=i(p,16,64+16*$)*b,b/=1e4;var v=Math.pow(10,i(p,16,48));return(y===0?1:-1)*Math.round(N*v)/v},"parseNumeric"),l=k(function(p,y){var b=i(y,1),N=i(y,63,1),T=new Date((b===0?1:-1)*N/1e3+9466848e5);return p||T.setTime(T.getTime()+T.getTimezoneOffset()*6e4),T.usec=N%1e3,T.getMicroSeconds=function(){return this.usec},T.setMicroSeconds=function(I){this.usec=I},T.getUTCMicroSeconds=function(){return this.usec},T},"parseDate"),f=k(function(p){for(var y=i(p,32),b=i(p,32,32),N=i(p,32,64),T=96,I=[],$=0;$<y;$++)I[$]=i(p,32,T),T+=32,T+=32;var v=k(function(_){var E=i(p,32,T);if(T+=32,E==4294967295)return null;var C;if(_==23||_==20)return C=i(p,E*8,T),T+=E*8,C;if(_==25)return C=p.toString(this.encoding,T>>3,(T+=E<<3)>>3),C;console.log("ERROR: ElementType not implemented: "+_)},"parseElement"),S=k(function(_,E){var C=[],R;if(_.length>1){var M=_.shift();for(R=0;R<M;R++)C[R]=S(_,E);_.unshift(M)}else for(R=0;R<_[0];R++)C[R]=v(E);return C},"parse");return S(I,N)},"parseArray"),d=k(function(p){return p.toString("utf8")},"parseText"),m=k(function(p){return p===null?null:i(p,8)>0},"parseBool"),h=k(function(p){p(20,r),p(21,o),p(23,s),p(26,s),p(1700,u),p(700,a),p(701,c),p(16,m),p(1114,l.bind(null,!1)),p(1184,l.bind(null,!0)),p(1e3,f),p(1007,f),p(1016,f),p(1008,f),p(1009,f),p(25,d)},"init");e.exports={init:h}}),Z3=Pe((t,e)=>{he(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Gw=Pe(t=>{he();var e=H3(),r=Q3(),i=P2(),n=Z3();t.getTypeParser=a,t.setTypeParser=c,t.arrayParser=i,t.builtins=n;var o={text:{},binary:{}};function s(u){return String(u)}k(s,"noParse");function a(u,l){return l=l||"text",o[l]&&o[l][u]||s}k(a,"getTypeParser");function c(u,l,f){typeof l=="function"&&(f=l,l="text"),o[l][u]=f}k(c,"setTypeParser"),e.init(function(u,l){o.text[u]=l}),r.init(function(u,l){o.binary[u]=l})}),r$=Pe((t,e)=>{"use strict";he();var r=Gw();function i(n){this._types=n||r,this.text={},this.binary={}}k(i,"TypeOverrides"),i.prototype.getOverrides=function(n){switch(n){case"text":return this.text;case"binary":return this.binary;default:return{}}},i.prototype.setTypeParser=function(n,o,s){typeof o=="function"&&(s=o,o="text"),this.getOverrides(o)[n]=s},i.prototype.getTypeParser=function(n,o){return o=o||"text",this.getOverrides(o)[n]||this._types.getTypeParser(n,o)},e.exports=i});function zf(t){let e=1779033703,r=3144134277,i=1013904242,n=2773480762,o=1359893119,s=2600822924,a=528734635,c=1541459225,u=0,l=0,f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=k((N,T)=>N>>>T|N<<32-T,"rrot"),m=new Uint32Array(64),h=new Uint8Array(64),p=k(()=>{for(let C=0,R=0;C<16;C++,R+=4)m[C]=h[R]<<24|h[R+1]<<16|h[R+2]<<8|h[R+3];for(let C=16;C<64;C++){let R=d(m[C-15],7)^d(m[C-15],18)^m[C-15]>>>3,M=d(m[C-2],17)^d(m[C-2],19)^m[C-2]>>>10;m[C]=m[C-16]+R+m[C-7]+M|0}let N=e,T=r,I=i,$=n,v=o,S=s,_=a,E=c;for(let C=0;C<64;C++){let R=d(v,6)^d(v,11)^d(v,25),M=v&S^~v&_,D=E+R+M+f[C]+m[C]|0,P=d(N,2)^d(N,13)^d(N,22),z=N&T^N&I^T&I,W=P+z|0;E=_,_=S,S=v,v=$+D|0,$=I,I=T,T=N,N=D+W|0}e=e+N|0,r=r+T|0,i=i+I|0,n=n+$|0,o=o+v|0,s=s+S|0,a=a+_|0,c=c+E|0,l=0},"process"),y=k(N=>{typeof N=="string"&&(N=new TextEncoder().encode(N));for(let T=0;T<N.length;T++)h[l++]=N[T],l===64&&p();u+=N.length},"add"),b=k(()=>{if(h[l++]=128,l==64&&p(),l+8>64){for(;l<64;)h[l++]=0;p()}for(;l<58;)h[l++]=0;let N=u*8;h[l++]=N/1099511627776&255,h[l++]=N/4294967296&255,h[l++]=N>>>24,h[l++]=N>>>16&255,h[l++]=N>>>8&255,h[l++]=N&255,p();let T=new Uint8Array(32);return T[0]=e>>>24,T[1]=e>>>16&255,T[2]=e>>>8&255,T[3]=e&255,T[4]=r>>>24,T[5]=r>>>16&255,T[6]=r>>>8&255,T[7]=r&255,T[8]=i>>>24,T[9]=i>>>16&255,T[10]=i>>>8&255,T[11]=i&255,T[12]=n>>>24,T[13]=n>>>16&255,T[14]=n>>>8&255,T[15]=n&255,T[16]=o>>>24,T[17]=o>>>16&255,T[18]=o>>>8&255,T[19]=o&255,T[20]=s>>>24,T[21]=s>>>16&255,T[22]=s>>>8&255,T[23]=s&255,T[24]=a>>>24,T[25]=a>>>16&255,T[26]=a>>>8&255,T[27]=a&255,T[28]=c>>>24,T[29]=c>>>16&255,T[30]=c>>>8&255,T[31]=c&255,T},"digest");return t===void 0?{add:y,digest:b}:(y(t),b())}var G3=tn(()=>{"use strict";he(),k(zf,"sha256")}),No,GI,Y3=tn(()=>{"use strict";he(),No=class jn{constructor(){Ae(this,"_dataLength",0),Ae(this,"_bufferLength",0),Ae(this,"_state",new Int32Array(4)),Ae(this,"_buffer",new ArrayBuffer(68)),Ae(this,"_buffer8"),Ae(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,r=!1){return this.onePassHasher.start().appendByteArray(e).end(r)}static hashStr(e,r=!1){return this.onePassHasher.start().appendStr(e).end(r)}static hashAsciiStr(e,r=!1){return this.onePassHasher.start().appendAsciiStr(e).end(r)}static _hex(e){let r=jn.hexChars,i=jn.hexOut,n,o,s,a;for(a=0;a<4;a+=1)for(o=a*8,n=e[a],s=0;s<8;s+=2)i[o+1+s]=r.charAt(n&15),n>>>=4,i[o+0+s]=r.charAt(n&15),n>>>=4;return i.join("")}static _md5cycle(e,r){let i=e[0],n=e[1],o=e[2],s=e[3];i+=(n&o|~n&s)+r[0]-680876936|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[1]-389564586|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[2]+606105819|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[3]-1044525330|0,n=(n<<22|n>>>10)+o|0,i+=(n&o|~n&s)+r[4]-176418897|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[5]+1200080426|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[6]-1473231341|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[7]-45705983|0,n=(n<<22|n>>>10)+o|0,i+=(n&o|~n&s)+r[8]+1770035416|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[9]-1958414417|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[10]-42063|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[11]-1990404162|0,n=(n<<22|n>>>10)+o|0,i+=(n&o|~n&s)+r[12]+1804603682|0,i=(i<<7|i>>>25)+n|0,s+=(i&n|~i&o)+r[13]-40341101|0,s=(s<<12|s>>>20)+i|0,o+=(s&i|~s&n)+r[14]-1502002290|0,o=(o<<17|o>>>15)+s|0,n+=(o&s|~o&i)+r[15]+1236535329|0,n=(n<<22|n>>>10)+o|0,i+=(n&s|o&~s)+r[1]-165796510|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[6]-1069501632|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[11]+643717713|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[0]-373897302|0,n=(n<<20|n>>>12)+o|0,i+=(n&s|o&~s)+r[5]-701558691|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[10]+38016083|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[15]-660478335|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[4]-405537848|0,n=(n<<20|n>>>12)+o|0,i+=(n&s|o&~s)+r[9]+568446438|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[14]-1019803690|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[3]-187363961|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[8]+1163531501|0,n=(n<<20|n>>>12)+o|0,i+=(n&s|o&~s)+r[13]-1444681467|0,i=(i<<5|i>>>27)+n|0,s+=(i&o|n&~o)+r[2]-51403784|0,s=(s<<9|s>>>23)+i|0,o+=(s&n|i&~n)+r[7]+1735328473|0,o=(o<<14|o>>>18)+s|0,n+=(o&i|s&~i)+r[12]-1926607734|0,n=(n<<20|n>>>12)+o|0,i+=(n^o^s)+r[5]-378558|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[8]-2022574463|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[11]+1839030562|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[14]-35309556|0,n=(n<<23|n>>>9)+o|0,i+=(n^o^s)+r[1]-1530992060|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[4]+1272893353|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[7]-155497632|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[10]-1094730640|0,n=(n<<23|n>>>9)+o|0,i+=(n^o^s)+r[13]+681279174|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[0]-358537222|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[3]-722521979|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[6]+76029189|0,n=(n<<23|n>>>9)+o|0,i+=(n^o^s)+r[9]-640364487|0,i=(i<<4|i>>>28)+n|0,s+=(i^n^o)+r[12]-421815835|0,s=(s<<11|s>>>21)+i|0,o+=(s^i^n)+r[15]+530742520|0,o=(o<<16|o>>>16)+s|0,n+=(o^s^i)+r[2]-995338651|0,n=(n<<23|n>>>9)+o|0,i+=(o^(n|~s))+r[0]-198630844|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[7]+1126891415|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[14]-1416354905|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[5]-57434055|0,n=(n<<21|n>>>11)+o|0,i+=(o^(n|~s))+r[12]+1700485571|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[3]-1894986606|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[10]-1051523|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[1]-2054922799|0,n=(n<<21|n>>>11)+o|0,i+=(o^(n|~s))+r[8]+1873313359|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[15]-30611744|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[6]-1560198380|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[13]+1309151649|0,n=(n<<21|n>>>11)+o|0,i+=(o^(n|~s))+r[4]-145523070|0,i=(i<<6|i>>>26)+n|0,s+=(n^(i|~o))+r[11]-1120210379|0,s=(s<<10|s>>>22)+i|0,o+=(i^(s|~n))+r[2]+718787259|0,o=(o<<15|o>>>17)+s|0,n+=(s^(o|~i))+r[9]-343485551|0,n=(n<<21|n>>>11)+o|0,e[0]=i+e[0]|0,e[1]=n+e[1]|0,e[2]=o+e[2]|0,e[3]=s+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(jn.stateIdentity),this}appendStr(e){let r=this._buffer8,i=this._buffer32,n=this._bufferLength,o,s;for(s=0;s<e.length;s+=1){if(o=e.charCodeAt(s),o<128)r[n++]=o;else if(o<2048)r[n++]=(o>>>6)+192,r[n++]=o&63|128;else if(o<55296||o>56319)r[n++]=(o>>>12)+224,r[n++]=o>>>6&63|128,r[n++]=o&63|128;else{if(o=(o-55296)*1024+(e.charCodeAt(++s)-56320)+65536,o>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[n++]=(o>>>18)+240,r[n++]=o>>>12&63|128,r[n++]=o>>>6&63|128,r[n++]=o&63|128}n>=64&&(this._dataLength+=64,jn._md5cycle(this._state,i),n-=64,i[0]=i[16])}return this._bufferLength=n,this}appendAsciiStr(e){let r=this._buffer8,i=this._buffer32,n=this._bufferLength,o,s=0;for(;;){for(o=Math.min(e.length-s,64-n);o--;)r[n++]=e.charCodeAt(s++);if(n<64)break;this._dataLength+=64,jn._md5cycle(this._state,i),n=0}return this._bufferLength=n,this}appendByteArray(e){let r=this._buffer8,i=this._buffer32,n=this._bufferLength,o,s=0;for(;;){for(o=Math.min(e.length-s,64-n);o--;)r[n++]=e[s++];if(n<64)break;this._dataLength+=64,jn._md5cycle(this._state,i),n=0}return this._bufferLength=n,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let r=e.buffer,i=e.state,n=this._state,o;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],o=0;o<r.length;o+=1)this._buffer8[o]=r.charCodeAt(o)}end(e=!1){let r=this._bufferLength,i=this._buffer8,n=this._buffer32,o=(r>>2)+1;this._dataLength+=r;let s=this._dataLength*8;if(i[r]=128,i[r+1]=i[r+2]=i[r+3]=0,n.set(jn.buffer32Identity.subarray(o),o),r>55&&(jn._md5cycle(this._state,n),n.set(jn.buffer32Identity)),s<=4294967295)n[14]=s;else{let a=s.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let c=parseInt(a[2],16),u=parseInt(a[1],16)||0;n[14]=c,n[15]=u}return jn._md5cycle(this._state,n),e?this._state:jn._hex(this._state)}},k(No,"Md5"),Ae(No,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),Ae(No,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Ae(No,"hexChars","0123456789abcdef"),Ae(No,"hexOut",[]),Ae(No,"onePassHasher",new No),GI=No}),n$={};hi(n$,{createHash:()=>U2,createHmac:()=>D2,randomBytes:()=>R2});function R2(t){return crypto.getRandomValues(Ne.alloc(t))}function U2(t){if(t==="sha256")return{update:k(function(e){return{digest:k(function(){return Ne.from(zf(e))},"digest")}},"update")};if(t==="md5")return{update:k(function(e){return{digest:k(function(){return typeof e=="string"?GI.hashStr(e):GI.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${t}' not supported`)}function D2(t,e){if(t!=="sha256")throw new Error(`Only sha256 is supported (requested: '${t}')`);return{update:k(function(r){return{digest:k(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof r=="string"&&(r=new TextEncoder().encode(r));let i=e.length;if(i>64)e=zf(e);else if(i<64){let c=new Uint8Array(64);c.set(e),e=c}let n=new Uint8Array(64),o=new Uint8Array(64);for(let c=0;c<64;c++)n[c]=54^e[c],o[c]=92^e[c];let s=new Uint8Array(r.length+64);s.set(n,0),s.set(r,64);let a=new Uint8Array(96);return a.set(o,0),a.set(zf(s),64),Ne.from(zf(a))},"digest")}},"update")}}var L2=tn(()=>{"use strict";he(),G3(),Y3(),k(R2,"randomBytes"),k(U2,"createHash"),k(D2,"createHmac")}),Yw=Pe((t,e)=>{"use strict";he(),e.exports={host:"localhost",user:Oe.platform==="win32"?Oe.env.USERNAME:Oe.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var r=Gw(),i=r.getTypeParser(20,"text"),n=r.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(o){r.setTypeParser(20,"text",o?r.getTypeParser(23,"text"):i),r.setTypeParser(1016,"text",o?r.getTypeParser(1007,"text"):n)})}),Xw=Pe((t,e)=>{"use strict";he();var r=(L2(),or(n$)),i=Yw();function n(h){var p=h.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+p+'"'}k(n,"escapeElement");function o(h){for(var p="{",y=0;y<h.length;y++)y>0&&(p=p+","),h[y]===null||typeof h[y]>"u"?p=p+"NULL":Array.isArray(h[y])?p=p+o(h[y]):h[y]instanceof Ne?p+="\\\\x"+h[y].toString("hex"):p+=n(s(h[y]));return p=p+"}",p}k(o,"arrayString");var s=k(function(h,p){if(h==null)return null;if(h instanceof Ne)return h;if(ArrayBuffer.isView(h)){var y=Ne.from(h.buffer,h.byteOffset,h.byteLength);return y.length===h.byteLength?y:y.slice(h.byteOffset,h.byteOffset+h.byteLength)}return h instanceof Date?i.parseInputDatesAsUTC?l(h):u(h):Array.isArray(h)?o(h):typeof h=="object"?a(h,p):h.toString()},"prepareValue");function a(h,p){if(h&&typeof h.toPostgres=="function"){if(p=p||[],p.indexOf(h)!==-1)throw new Error('circular reference detected while preparing "'+h+'" for query');return p.push(h),s(h.toPostgres(s),p)}return JSON.stringify(h)}k(a,"prepareObject");function c(h,p){for(h=""+h;h.length<p;)h="0"+h;return h}k(c,"pad");function u(h){var p=-h.getTimezoneOffset(),y=h.getFullYear(),b=y<1;b&&(y=Math.abs(y)+1);var N=c(y,4)+"-"+c(h.getMonth()+1,2)+"-"+c(h.getDate(),2)+"T"+c(h.getHours(),2)+":"+c(h.getMinutes(),2)+":"+c(h.getSeconds(),2)+"."+c(h.getMilliseconds(),3);return p<0?(N+="-",p*=-1):N+="+",N+=c(Math.floor(p/60),2)+":"+c(p%60,2),b&&(N+=" BC"),N}k(u,"dateToString");function l(h){var p=h.getUTCFullYear(),y=p<1;y&&(p=Math.abs(p)+1);var b=c(p,4)+"-"+c(h.getUTCMonth()+1,2)+"-"+c(h.getUTCDate(),2)+"T"+c(h.getUTCHours(),2)+":"+c(h.getUTCMinutes(),2)+":"+c(h.getUTCSeconds(),2)+"."+c(h.getUTCMilliseconds(),3);return b+="+00:00",y&&(b+=" BC"),b}k(l,"dateToStringUTC");function f(h,p,y){return h=typeof h=="string"?{text:h}:h,p&&(typeof p=="function"?h.callback=p:h.values=p),y&&(h.callback=y),h}k(f,"normalizeQueryConfig");var d=k(function(h){return r.createHash("md5").update(h,"utf-8").digest("hex")},"md5"),m=k(function(h,p,y){var b=d(p+h),N=d(Ne.concat([Ne.from(b),y]));return"md5"+N},"postgresMd5PasswordHash");e.exports={prepareValue:k(function(h){return s(h)},"prepareValueWrapper"),normalizeQueryConfig:f,postgresMd5PasswordHash:m,md5:d}}),Bf={};hi(Bf,{default:()=>z2});var z2,eb=tn(()=>{"use strict";he(),z2={}}),X3=Pe((t,e)=>{"use strict";he();var r=(L2(),or(n$));function i(p){if(p.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let y=r.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:y,response:"n,,n=*,r="+y,message:"SASLInitialResponse"}}k(i,"startSession");function n(p,y,b){if(p.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof y!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof b!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let N=u(b);if(N.nonce.startsWith(p.clientNonce)){if(N.nonce.length===p.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var T=Ne.from(N.salt,"base64"),I=h(y,T,N.iteration),$=m(I,"Client Key"),v=d($),S="n=*,r="+p.clientNonce,_="r="+N.nonce+",s="+N.salt+",i="+N.iteration,E="c=biws,r="+N.nonce,C=S+","+_+","+E,R=m(v,C),M=f($,R),D=M.toString("base64"),P=m(I,"Server Key"),z=m(P,C);p.message="SASLResponse",p.serverSignature=z.toString("base64"),p.response=E+",p="+D}k(n,"continueSession");function o(p,y){if(p.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof y!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:b}=l(y);if(b!==p.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}k(o,"finalizeSession");function s(p){if(typeof p!="string")throw new TypeError("SASL: text must be a string");return p.split("").map((y,b)=>p.charCodeAt(b)).every(y=>y>=33&&y<=43||y>=45&&y<=126)}k(s,"isPrintableChars");function a(p){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(p)}k(a,"isBase64");function c(p){if(typeof p!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(p.split(",").map(y=>{if(!/^.=/.test(y))throw new Error("SASL: Invalid attribute pair entry");let b=y[0],N=y.substring(2);return[b,N]}))}k(c,"parseAttributePairs");function u(p){let y=c(p),b=y.get("r");if(b){if(!s(b))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let N=y.get("s");if(N){if(!a(N))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let T=y.get("i");if(T){if(!/^[1-9][0-9]*$/.test(T))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let I=parseInt(T,10);return{nonce:b,salt:N,iteration:I}}k(u,"parseServerFirstMessage");function l(p){let y=c(p).get("v");if(y){if(!a(y))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:y}}k(l,"parseServerFinalMessage");function f(p,y){if(!Ne.isBuffer(p))throw new TypeError("first argument must be a Buffer");if(!Ne.isBuffer(y))throw new TypeError("second argument must be a Buffer");if(p.length!==y.length)throw new Error("Buffer lengths must match");if(p.length===0)throw new Error("Buffers cannot be empty");return Ne.from(p.map((b,N)=>p[N]^y[N]))}k(f,"xorBuffers");function d(p){return r.createHash("sha256").update(p).digest()}k(d,"sha256");function m(p,y){return r.createHmac("sha256",p).update(y).digest()}k(m,"hmacSha256");function h(p,y,b){for(var N=m(p,Ne.concat([y,Ne.from([0,0,0,1])])),T=N,I=0;I<b-1;I++)N=m(p,N),T=f(T,N);return T}k(h,"Hi"),e.exports={startSession:i,continueSession:n,finalizeSession:o}}),i$={};hi(i$,{join:()=>j2});function j2(...t){return t.join("/")}var M2=tn(()=>{"use strict";he(),k(j2,"join")}),o$={};hi(o$,{stat:()=>B2});function B2(t,e){e(new Error("No filesystem"))}var q2=tn(()=>{"use strict";he(),k(B2,"stat")}),s$={};hi(s$,{default:()=>W2});var W2,F2=tn(()=>{"use strict";he(),W2={}}),V2={};hi(V2,{StringDecoder:()=>K2});var ZI,K2,eF=tn(()=>{"use strict";he(),ZI=class{constructor(e){Ae(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},k(ZI,"StringDecoder"),K2=ZI}),tF=Pe((t,e)=>{"use strict";he();var{Transform:r}=(F2(),or(s$)),{StringDecoder:i}=(eF(),or(V2)),n=Symbol("last"),o=Symbol("decoder");function s(f,d,m){let h;if(this.overflow){if(h=this[o].write(f).split(this.matcher),h.length===1)return m();h.shift(),this.overflow=!1}else this[n]+=this[o].write(f),h=this[n].split(this.matcher);this[n]=h.pop();for(let p=0;p<h.length;p++)try{c(this,this.mapper(h[p]))}catch(y){return m(y)}if(this.overflow=this[n].length>this.maxLength,this.overflow&&!this.skipOverflow){m(new Error("maximum buffer reached"));return}m()}k(s,"transform");function a(f){if(this[n]+=this[o].end(),this[n])try{c(this,this.mapper(this[n]))}catch(d){return f(d)}f()}k(a,"flush");function c(f,d){d!==void 0&&f.push(d)}k(c,"push");function u(f){return f}k(u,"noop");function l(f,d,m){switch(f=f||/\r?\n/,d=d||u,m=m||{},arguments.length){case 1:typeof f=="function"?(d=f,f=/\r?\n/):typeof f=="object"&&!(f instanceof RegExp)&&!f[Symbol.split]&&(m=f,f=/\r?\n/);break;case 2:typeof f=="function"?(m=d,d=f,f=/\r?\n/):typeof d=="object"&&(m=d,d=u)}m=Object.assign({},m),m.autoDestroy=!0,m.transform=s,m.flush=a,m.readableObjectMode=!0;let h=new r(m);return h[n]="",h[o]=new i("utf8"),h.matcher=f,h.mapper=d,h.maxLength=m.maxLength,h.skipOverflow=m.skipOverflow||!1,h.overflow=!1,h._destroy=function(p,y){this._writableState.errorEmitted=!1,y(p)},h}k(l,"split"),e.exports=l}),rF=Pe((t,e)=>{"use strict";he();var r=(M2(),or(i$)),i=(F2(),or(s$)).Stream,n=tF(),o=(eb(),or(Bf)),s=5432,a=Oe.platform==="win32",c=Oe.stderr,u=56,l=7,f=61440,d=32768;function m($){return($&f)==d}k(m,"isRegFile");var h=["host","port","database","user","password"],p=h.length,y=h[p-1];function b(){var $=c instanceof i&&c.writable===!0;if($){var v=Array.prototype.slice.call(arguments).concat(`
`);c.write(o.format.apply(o,v))}}k(b,"warn"),Object.defineProperty(e.exports,"isWin",{get:k(function(){return a},"get"),set:k(function($){a=$},"set")}),e.exports.warnTo=function($){var v=c;return c=$,v},e.exports.getFileName=function($){var v=$||Oe.env,S=v.PGPASSFILE||(a?r.join(v.APPDATA||"./","postgresql","pgpass.conf"):r.join(v.HOME||"./",".pgpass"));return S},e.exports.usePgPass=function($,v){return Object.prototype.hasOwnProperty.call(Oe.env,"PGPASSWORD")?!1:a?!0:(v=v||"<unkn>",m($.mode)?$.mode&(u|l)?(b('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',v),!1):!0:(b('WARNING: password file "%s" is not a plain file',v),!1))};var N=e.exports.match=function($,v){return h.slice(0,-1).reduce(function(S,_,E){return E==1&&Number($[_]||s)===Number(v[_])?S&&!0:S&&(v[_]==="*"||v[_]===$[_])},!0)};e.exports.getPassword=function($,v,S){var _,E=v.pipe(n());function C(D){var P=T(D);P&&I(P)&&N($,P)&&(_=P[y],E.end())}k(C,"onLine");var R=k(function(){v.destroy(),S(_)},"onEnd"),M=k(function(D){v.destroy(),b("WARNING: error on reading file: %s",D),S(void 0)},"onErr");v.on("error",M),E.on("data",C).on("end",R).on("error",M)};var T=e.exports.parseLine=function($){if($.length<11||$.match(/^\s+#/))return null;for(var v="",S="",_=0,E=0,C=0,R={},M=!1,D=k(function(z,W,Q){var G=$.substring(W,Q);Object.hasOwnProperty.call(Oe.env,"PGPASS_NO_DEESCAPE")||(G=G.replace(/\\([:\\])/g,"$1")),R[h[z]]=G},"addToObj"),P=0;P<$.length-1;P+=1){if(v=$.charAt(P+1),S=$.charAt(P),M=_==p-1,M){D(_,E);break}P>=0&&v==":"&&S!=="\\"&&(D(_,E,P+1),E=P+2,_+=1)}return R=Object.keys(R).length===p?R:null,R},I=e.exports.isValidEntry=function($){for(var v={0:function(R){return R.length>0},1:function(R){return R==="*"?!0:(R=Number(R),isFinite(R)&&R>0&&R<9007199254740992&&Math.floor(R)===R)},2:function(R){return R.length>0},3:function(R){return R.length>0},4:function(R){return R.length>0}},S=0;S<h.length;S+=1){var _=v[S],E=$[h[S]]||"",C=_(E);if(!C)return!1}return!0}}),nF=Pe((t,e)=>{"use strict";he();var r=(M2(),or(i$)),i=(q2(),or(o$)),n=rF();e.exports=function(o,s){var a=n.getFileName();i.stat(a,function(c,u){if(c||!n.usePgPass(u,a))return s(void 0);var l=i.createReadStream(a);n.getPassword(o,l,s)})},e.exports.warnTo=n.warnTo}),H2={};hi(H2,{default:()=>J2});var J2,iF=tn(()=>{"use strict";he(),J2={}}),oF=Pe((t,e)=>{"use strict";he();var r=($2(),or(I2)),i=(q2(),or(o$));function n(o){if(o.charAt(0)==="/"){var a=o.split(" ");return{host:a[0],database:a[1]}}var s=r.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(o)?encodeURI(o).replace(/\%25(\d\d)/g,"%$1"):o,!0),a=s.query;for(var c in a)Array.isArray(a[c])&&(a[c]=a[c][a[c].length-1]);var u=(s.auth||":").split(":");if(a.user=u[0],a.password=u.splice(1).join(":"),a.port=s.port,s.protocol=="socket:")return a.host=decodeURI(s.pathname),a.database=s.query.db,a.client_encoding=s.query.encoding,a;a.host||(a.host=s.hostname);var l=s.pathname;if(!a.host&&l&&/^%2f/i.test(l)){var f=l.split("/");a.host=decodeURIComponent(f[0]),l=f.splice(1).join("/")}switch(l&&l.charAt(0)==="/"&&(l=l.slice(1)||null),a.database=l&&decodeURI(l),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=i.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=i.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=i.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}k(n,"parse"),e.exports=n,n.parse=n}),a$=Pe((t,e)=>{"use strict";he();var r=(iF(),or(H2)),i=Yw(),n=oF().parse,o=k(function(f,d,m){return m===void 0?m=Oe.env["PG"+f.toUpperCase()]:m===!1||(m=Oe.env[m]),d[f]||m||i[f]},"val"),s=k(function(){switch(Oe.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return i.ssl},"readSSLConfigFromEnvironment"),a=k(function(f){return"'"+(""+f).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),c=k(function(f,d,m){var h=d[m];h!=null&&f.push(m+"="+a(h))},"add"),u=class{constructor(d){d=typeof d=="string"?n(d):d||{},d.connectionString&&(d=Object.assign({},d,n(d.connectionString))),this.user=o("user",d),this.database=o("database",d),this.database===void 0&&(this.database=this.user),this.port=parseInt(o("port",d),10),this.host=o("host",d),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:o("password",d)}),this.binary=o("binary",d),this.options=o("options",d),this.ssl=typeof d.ssl>"u"?s():d.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=o("client_encoding",d),this.replication=o("replication",d),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=o("application_name",d,"PGAPPNAME"),this.fallback_application_name=o("fallback_application_name",d,!1),this.statement_timeout=o("statement_timeout",d,!1),this.lock_timeout=o("lock_timeout",d,!1),this.idle_in_transaction_session_timeout=o("idle_in_transaction_session_timeout",d,!1),this.query_timeout=o("query_timeout",d,!1),d.connectionTimeoutMillis===void 0?this.connect_timeout=Oe.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(d.connectionTimeoutMillis/1e3),d.keepAlive===!1?this.keepalives=0:d.keepAlive===!0&&(this.keepalives=1),typeof d.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(d.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(d){var m=[];c(m,this,"user"),c(m,this,"password"),c(m,this,"port"),c(m,this,"application_name"),c(m,this,"fallback_application_name"),c(m,this,"connect_timeout"),c(m,this,"options");var h=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(c(m,h,"sslmode"),c(m,h,"sslca"),c(m,h,"sslkey"),c(m,h,"sslcert"),c(m,h,"sslrootcert"),this.database&&m.push("dbname="+a(this.database)),this.replication&&m.push("replication="+a(this.replication)),this.host&&m.push("host="+a(this.host)),this.isDomainSocket)return d(null,m.join(" "));this.client_encoding&&m.push("client_encoding="+a(this.client_encoding)),r.lookup(this.host,function(p,y){return p?d(p,null):(m.push("hostaddr="+a(y)),d(null,m.join(" ")))})}};k(u,"ConnectionParameters");var l=u;e.exports=l}),sF=Pe((t,e)=>{"use strict";he();var r=Gw(),i=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,n=class{constructor(a,c){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=c,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var c;a.text?c=i.exec(a.text):c=i.exec(a.command),c&&(this.command=c[1],c[3]?(this.oid=parseInt(c[2],10),this.rowCount=parseInt(c[3],10)):c[2]&&(this.rowCount=parseInt(c[2],10)))}_parseRowAsArray(a){for(var c=new Array(a.length),u=0,l=a.length;u<l;u++){var f=a[u];f!==null?c[u]=this._parsers[u](f):c[u]=null}return c}parseRow(a){for(var c={},u=0,l=a.length;u<l;u++){var f=a[u],d=this.fields[u].name;f!==null?c[d]=this._parsers[u](f):c[d]=null}return c}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var c=0;c<a.length;c++){var u=a[c];this._types?this._parsers[c]=this._types.getTypeParser(u.dataTypeID,u.format||"text"):this._parsers[c]=r.getTypeParser(u.dataTypeID,u.format||"text")}}};k(n,"Result");var o=n;e.exports=o}),aF=Pe((t,e)=>{"use strict";he();var{EventEmitter:r}=Ua(),i=sF(),n=Xw(),o=class extends r{constructor(c,u,l){super(),c=n.normalizeQueryConfig(c,u,l),this.text=c.text,this.values=c.values,this.rows=c.rows,this.types=c.types,this.name=c.name,this.binary=c.binary,this.portal=c.portal||"",this.callback=c.callback,this._rowMode=c.rowMode,Oe.domain&&c.callback&&(this.callback=Oe.domain.bind(c.callback)),this._result=new i(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new i(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(c){this._checkForMultirow(),this._result.addFields(c.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(c){let u;if(!this._canceledDueToError){try{u=this._result.parseRow(c.fields)}catch(l){this._canceledDueToError=l;return}this.emit("row",u,this._result),this._accumulateRows&&this._result.addRow(u)}}handleCommandComplete(c,u){this._checkForMultirow(),this._result.addCommandComplete(c),this.rows&&u.sync()}handleEmptyQuery(c){this.rows&&c.sync()}handleError(c,u){if(this._canceledDueToError&&(c=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(c);this.emit("error",c)}handleReadyForQuery(c){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,c);if(this.callback)try{this.callback(null,this._results)}catch(u){Oe.nextTick(()=>{throw u})}this.emit("end",this._results)}submit(c){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let u=c.parsedStatements[this.name];return this.text&&u&&this.text!==u?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(c):c.query(this.text),null)}hasBeenParsed(c){return this.name&&c.parsedStatements[this.name]}handlePortalSuspended(c){this._getRows(c,this.rows)}_getRows(c,u){c.execute({portal:this.portal,rows:u}),u?c.flush():c.sync()}prepare(c){this.isPreparedStatement=!0,this.hasBeenParsed(c)||c.parse({text:this.text,name:this.name,types:this.types});try{c.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:n.prepareValue})}catch(u){this.handleError(u,c);return}c.describe({type:"P",name:this.portal||""}),this._getRows(c,this.rows)}handleCopyInResponse(c){c.sendCopyFail("No source stream defined")}handleCopyData(c,u){}};k(o,"Query");var s=o;e.exports=s}),Q2=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(P,z,W){super(P),this.length=z,this.name=W}};k(e,"DatabaseError");var r=e;t.DatabaseError=r;var i=class{constructor(P,z){this.length=P,this.chunk=z,this.name="copyData"}};k(i,"CopyDataMessage");var n=i;t.CopyDataMessage=n;var o=class{constructor(P,z,W,Q){this.length=P,this.name=z,this.binary=W,this.columnTypes=new Array(Q)}};k(o,"CopyResponse");var s=o;t.CopyResponse=s;var a=class{constructor(P,z,W,Q,G,J,le){this.name=P,this.tableID=z,this.columnID=W,this.dataTypeID=Q,this.dataTypeSize=G,this.dataTypeModifier=J,this.format=le}};k(a,"Field");var c=a;t.Field=c;var u=class{constructor(P,z){this.length=P,this.fieldCount=z,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};k(u,"RowDescriptionMessage");var l=u;t.RowDescriptionMessage=l;var f=class{constructor(P,z){this.length=P,this.parameterCount=z,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};k(f,"ParameterDescriptionMessage");var d=f;t.ParameterDescriptionMessage=d;var m=class{constructor(P,z,W){this.length=P,this.parameterName=z,this.parameterValue=W,this.name="parameterStatus"}};k(m,"ParameterStatusMessage");var h=m;t.ParameterStatusMessage=h;var p=class{constructor(P,z){this.length=P,this.salt=z,this.name="authenticationMD5Password"}};k(p,"AuthenticationMD5Password");var y=p;t.AuthenticationMD5Password=y;var b=class{constructor(P,z,W){this.length=P,this.processID=z,this.secretKey=W,this.name="backendKeyData"}};k(b,"BackendKeyDataMessage");var N=b;t.BackendKeyDataMessage=N;var T=class{constructor(P,z,W,Q){this.length=P,this.processId=z,this.channel=W,this.payload=Q,this.name="notification"}};k(T,"NotificationResponseMessage");var I=T;t.NotificationResponseMessage=I;var $=class{constructor(P,z){this.length=P,this.status=z,this.name="readyForQuery"}};k($,"ReadyForQueryMessage");var v=$;t.ReadyForQueryMessage=v;var S=class{constructor(P,z){this.length=P,this.text=z,this.name="commandComplete"}};k(S,"CommandCompleteMessage");var _=S;t.CommandCompleteMessage=_;var E=class{constructor(P,z){this.length=P,this.fields=z,this.name="dataRow",this.fieldCount=z.length}};k(E,"DataRowMessage");var C=E;t.DataRowMessage=C;var R=class{constructor(P,z){this.length=P,this.message=z,this.name="notice"}};k(R,"NoticeMessage");var M=R;t.NoticeMessage=M}),cF=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;var e=class{constructor(n=256){this.size=n,this.offset=5,this.headerPosition=0,this.buffer=Ne.allocUnsafe(n)}ensure(n){if(this.buffer.length-this.offset<n){let o=this.buffer,s=o.length+(o.length>>1)+n;this.buffer=Ne.allocUnsafe(s),o.copy(this.buffer)}}addInt32(n){return this.ensure(4),this.buffer[this.offset++]=n>>>24&255,this.buffer[this.offset++]=n>>>16&255,this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addInt16(n){return this.ensure(2),this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addCString(n){if(!n)this.ensure(1);else{let o=Ne.byteLength(n);this.ensure(o+1),this.buffer.write(n,this.offset,"utf-8"),this.offset+=o}return this.buffer[this.offset++]=0,this}addString(n=""){let o=Ne.byteLength(n);return this.ensure(o),this.buffer.write(n,this.offset),this.offset+=o,this}add(n){return this.ensure(n.length),n.copy(this.buffer,this.offset),this.offset+=n.length,this}join(n){if(n){this.buffer[this.headerPosition]=n;let o=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(o,this.headerPosition+1)}return this.buffer.slice(n?0:5,this.offset)}flush(n){let o=this.join(n);return this.offset=5,this.headerPosition=0,this.buffer=Ne.allocUnsafe(this.size),o}};k(e,"Writer");var r=e;t.Writer=r}),uF=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;var e=cF(),r=new e.Writer,i=k(P=>{r.addInt16(3).addInt16(0);for(let Q of Object.keys(P))r.addCString(Q).addCString(P[Q]);r.addCString("client_encoding").addCString("UTF8");let z=r.addCString("").flush(),W=z.length+4;return new e.Writer().addInt32(W).add(z).flush()},"startup"),n=k(()=>{let P=Ne.allocUnsafe(8);return P.writeInt32BE(8,0),P.writeInt32BE(80877103,4),P},"requestSsl"),o=k(P=>r.addCString(P).flush(112),"password"),s=k(function(P,z){return r.addCString(P).addInt32(Ne.byteLength(z)).addString(z),r.flush(112)},"sendSASLInitialResponseMessage"),a=k(function(P){return r.addString(P).flush(112)},"sendSCRAMClientFinalMessage"),c=k(P=>r.addCString(P).flush(81),"query"),u=[],l=k(P=>{let z=P.name||"";z.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",z,z.length),console.error("This can cause conflicts and silent errors executing queries"));let W=P.types||u,Q=W.length,G=r.addCString(z).addCString(P.text).addInt16(Q);for(let J=0;J<Q;J++)G.addInt32(W[J]);return r.flush(80)},"parse"),f=new e.Writer,d=k(function(P,z){for(let W=0;W<P.length;W++){let Q=z?z(P[W],W):P[W];Q==null?(r.addInt16(0),f.addInt32(-1)):Q instanceof Ne?(r.addInt16(1),f.addInt32(Q.length),f.add(Q)):(r.addInt16(0),f.addInt32(Ne.byteLength(Q)),f.addString(Q))}},"writeValues"),m=k((P={})=>{let z=P.portal||"",W=P.statement||"",Q=P.binary||!1,G=P.values||u,J=G.length;return r.addCString(z).addCString(W),r.addInt16(J),d(G,P.valueMapper),r.addInt16(J),r.add(f.flush()),r.addInt16(Q?1:0),r.flush(66)},"bind"),h=Ne.from([69,0,0,0,9,0,0,0,0,0]),p=k(P=>{if(!P||!P.portal&&!P.rows)return h;let z=P.portal||"",W=P.rows||0,Q=Ne.byteLength(z),G=4+Q+1+4,J=Ne.allocUnsafe(1+G);return J[0]=69,J.writeInt32BE(G,1),J.write(z,5,"utf-8"),J[Q+5]=0,J.writeUInt32BE(W,J.length-4),J},"execute"),y=k((P,z)=>{let W=Ne.allocUnsafe(16);return W.writeInt32BE(16,0),W.writeInt16BE(1234,4),W.writeInt16BE(5678,6),W.writeInt32BE(P,8),W.writeInt32BE(z,12),W},"cancel"),b=k((P,z)=>{let W=4+Ne.byteLength(z)+1,Q=Ne.allocUnsafe(1+W);return Q[0]=P,Q.writeInt32BE(W,1),Q.write(z,5,"utf-8"),Q[W]=0,Q},"cstringMessage"),N=r.addCString("P").flush(68),T=r.addCString("S").flush(68),I=k(P=>P.name?b(68,`${P.type}${P.name||""}`):P.type==="P"?N:T,"describe"),$=k(P=>{let z=`${P.type}${P.name||""}`;return b(67,z)},"close"),v=k(P=>r.add(P).flush(100),"copyData"),S=k(P=>b(102,P),"copyFail"),_=k(P=>Ne.from([P,0,0,0,4]),"codeOnlyBuffer"),E=_(72),C=_(83),R=_(88),M=_(99),D={startup:i,password:o,requestSsl:n,sendSASLInitialResponseMessage:s,sendSCRAMClientFinalMessage:a,query:c,parse:l,bind:m,execute:p,describe:I,close:$,flush:k(()=>E,"flush"),sync:k(()=>C,"sync"),end:k(()=>R,"end"),copyData:v,copyDone:k(()=>M,"copyDone"),copyFail:S,cancel:y};t.serialize=D}),lF=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;var e=Ne.allocUnsafe(0),r=class{constructor(o=0){this.offset=o,this.buffer=e,this.encoding="utf-8"}setBuffer(o,s){this.offset=o,this.buffer=s}int16(){let o=this.buffer.readInt16BE(this.offset);return this.offset+=2,o}byte(){let o=this.buffer[this.offset];return this.offset++,o}int32(){let o=this.buffer.readInt32BE(this.offset);return this.offset+=4,o}uint32(){let o=this.buffer.readUInt32BE(this.offset);return this.offset+=4,o}string(o){let s=this.buffer.toString(this.encoding,this.offset,this.offset+o);return this.offset+=o,s}cstring(){let o=this.offset,s=o;for(;this.buffer[s++]!==0;);return this.offset=s,this.buffer.toString(this.encoding,o,s-1)}bytes(o){let s=this.buffer.slice(this.offset,this.offset+o);return this.offset+=o,s}};k(r,"BufferReader");var i=r;t.BufferReader=i}),dF=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var e=Q2(),r=lF(),i=1,n=4,o=i+n,s=Ne.allocUnsafe(0),a=class{constructor(l){if(this.buffer=s,this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,l?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=l?.mode||"text"}parse(l,f){this.mergeBuffer(l);let d=this.bufferOffset+this.bufferLength,m=this.bufferOffset;for(;m+o<=d;){let h=this.buffer[m],p=this.buffer.readUInt32BE(m+i),y=i+p;if(y+m<=d){let b=this.handlePacket(m+o,h,p,this.buffer);f(b),m+=y}else break}m===d?(this.buffer=s,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=d-m,this.bufferOffset=m)}mergeBuffer(l){if(this.bufferLength>0){let f=this.bufferLength+l.byteLength;if(f+this.bufferOffset>this.buffer.byteLength){let d;if(f<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)d=this.buffer;else{let m=this.buffer.byteLength*2;for(;f>=m;)m*=2;d=Ne.allocUnsafe(m)}this.buffer.copy(d,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=d,this.bufferOffset=0}l.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=f}else this.buffer=l,this.bufferOffset=0,this.bufferLength=l.byteLength}handlePacket(l,f,d,m){switch(f){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(l,d,m);case 67:return this.parseCommandCompleteMessage(l,d,m);case 90:return this.parseReadyForQueryMessage(l,d,m);case 65:return this.parseNotificationMessage(l,d,m);case 82:return this.parseAuthenticationResponse(l,d,m);case 83:return this.parseParameterStatusMessage(l,d,m);case 75:return this.parseBackendKeyData(l,d,m);case 69:return this.parseErrorMessage(l,d,m,"error");case 78:return this.parseErrorMessage(l,d,m,"notice");case 84:return this.parseRowDescriptionMessage(l,d,m);case 116:return this.parseParameterDescriptionMessage(l,d,m);case 71:return this.parseCopyInMessage(l,d,m);case 72:return this.parseCopyOutMessage(l,d,m);case 100:return this.parseCopyData(l,d,m);default:return new e.DatabaseError("received invalid response: "+f.toString(16),d,"error")}}parseReadyForQueryMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.string(1);return new e.ReadyForQueryMessage(f,m)}parseCommandCompleteMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.cstring();return new e.CommandCompleteMessage(f,m)}parseCopyData(l,f,d){let m=d.slice(l,l+(f-4));return new e.CopyDataMessage(f,m)}parseCopyInMessage(l,f,d){return this.parseCopyMessage(l,f,d,"copyInResponse")}parseCopyOutMessage(l,f,d){return this.parseCopyMessage(l,f,d,"copyOutResponse")}parseCopyMessage(l,f,d,m){this.reader.setBuffer(l,d);let h=this.reader.byte()!==0,p=this.reader.int16(),y=new e.CopyResponse(f,m,h,p);for(let b=0;b<p;b++)y.columnTypes[b]=this.reader.int16();return y}parseNotificationMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int32(),h=this.reader.cstring(),p=this.reader.cstring();return new e.NotificationResponseMessage(f,m,h,p)}parseRowDescriptionMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int16(),h=new e.RowDescriptionMessage(f,m);for(let p=0;p<m;p++)h.fields[p]=this.parseField();return h}parseField(){let l=this.reader.cstring(),f=this.reader.uint32(),d=this.reader.int16(),m=this.reader.uint32(),h=this.reader.int16(),p=this.reader.int32(),y=this.reader.int16()===0?"text":"binary";return new e.Field(l,f,d,m,h,p,y)}parseParameterDescriptionMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int16(),h=new e.ParameterDescriptionMessage(f,m);for(let p=0;p<m;p++)h.dataTypeIDs[p]=this.reader.int32();return h}parseDataRowMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int16(),h=new Array(m);for(let p=0;p<m;p++){let y=this.reader.int32();h[p]=y===-1?null:this.reader.string(y)}return new e.DataRowMessage(f,h)}parseParameterStatusMessage(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.cstring(),h=this.reader.cstring();return new e.ParameterStatusMessage(f,m,h)}parseBackendKeyData(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int32(),h=this.reader.int32();return new e.BackendKeyDataMessage(f,m,h)}parseAuthenticationResponse(l,f,d){this.reader.setBuffer(l,d);let m=this.reader.int32(),h={name:"authenticationOk",length:f};switch(m){case 0:break;case 3:h.length===8&&(h.name="authenticationCleartextPassword");break;case 5:if(h.length===12){h.name="authenticationMD5Password";let p=this.reader.bytes(4);return new e.AuthenticationMD5Password(f,p)}break;case 10:{h.name="authenticationSASL",h.mechanisms=[];let p;do p=this.reader.cstring(),p&&h.mechanisms.push(p);while(p)}break;case 11:h.name="authenticationSASLContinue",h.data=this.reader.string(f-8);break;case 12:h.name="authenticationSASLFinal",h.data=this.reader.string(f-8);break;default:throw new Error("Unknown authenticationOk message type "+m)}return h}parseErrorMessage(l,f,d,m){this.reader.setBuffer(l,d);let h={},p=this.reader.string(1);for(;p!=="\0";)h[p]=this.reader.cstring(),p=this.reader.string(1);let y=h.M,b=m==="notice"?new e.NoticeMessage(f,y):new e.DatabaseError(y,f,m);return b.severity=h.S,b.code=h.C,b.detail=h.D,b.hint=h.H,b.position=h.P,b.internalPosition=h.p,b.internalQuery=h.q,b.where=h.W,b.schema=h.s,b.table=h.t,b.column=h.c,b.dataType=h.d,b.constraint=h.n,b.file=h.F,b.line=h.L,b.routine=h.R,b}};k(a,"Parser");var c=a;t.Parser=c}),Z2=Pe(t=>{"use strict";he(),Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;var e=Q2();Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:k(function(){return e.DatabaseError},"get")});var r=uF();Object.defineProperty(t,"serialize",{enumerable:!0,get:k(function(){return r.serialize},"get")});var i=dF();function n(o,s){let a=new i.Parser;return o.on("data",c=>a.parse(c,s)),new Promise(c=>o.on("end",()=>c()))}k(n,"parse"),t.parse=n}),G2={};hi(G2,{connect:()=>Y2});function Y2({socket:t,servername:e}){return t.startTls(e),t}var fF=tn(()=>{"use strict";he(),k(Y2,"connect")}),X2=Pe((t,e)=>{"use strict";he();var r=(Mf(),or(k2)),i=Ua().EventEmitter,{parse:n,serialize:o}=Z2(),s=o.flush(),a=o.sync(),c=o.end(),u=class extends i{constructor(d){super(),d=d||{},this.stream=d.stream||new r.Socket,this._keepAlive=d.keepAlive,this._keepAliveInitialDelayMillis=d.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=d.ssl||!1,this._ending=!1,this._emitMessage=!1;var m=this;this.on("newListener",function(h){h==="message"&&(m._emitMessage=!0)})}connect(d,m){var h=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(d,m),this.stream.once("connect",function(){h._keepAlive&&h.stream.setKeepAlive(!0,h._keepAliveInitialDelayMillis),h.emit("connect")});let p=k(function(y){h._ending&&(y.code==="ECONNRESET"||y.code==="EPIPE")||h.emit("error",y)},"reportStreamError");if(this.stream.on("error",p),this.stream.on("close",function(){h.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(y){var b=y.toString("utf8");switch(b){case"S":break;case"N":return h.stream.end(),h.emit("error",new Error("The server does not support SSL connections"));default:return h.stream.end(),h.emit("error",new Error("There was an error establishing an SSL connection"))}var N=(fF(),or(G2));let T={socket:h.stream};h.ssl!==!0&&(Object.assign(T,h.ssl),"key"in h.ssl&&(T.key=h.ssl.key)),r.isIP(m)===0&&(T.servername=m);try{h.stream=N.connect(T)}catch(I){return h.emit("error",I)}h.attachListeners(h.stream),h.stream.on("error",p),h.emit("sslconnect")})}attachListeners(d){d.on("end",()=>{this.emit("end")}),n(d,m=>{var h=m.name==="error"?"errorMessage":m.name;this._emitMessage&&this.emit("message",m),this.emit(h,m)})}requestSsl(){this.stream.write(o.requestSsl())}startup(d){this.stream.write(o.startup(d))}cancel(d,m){this._send(o.cancel(d,m))}password(d){this._send(o.password(d))}sendSASLInitialResponseMessage(d,m){this._send(o.sendSASLInitialResponseMessage(d,m))}sendSCRAMClientFinalMessage(d){this._send(o.sendSCRAMClientFinalMessage(d))}_send(d){return this.stream.writable?this.stream.write(d):!1}query(d){this._send(o.query(d))}parse(d){this._send(o.parse(d))}bind(d){this._send(o.bind(d))}execute(d){this._send(o.execute(d))}flush(){this.stream.writable&&this.stream.write(s)}sync(){this._ending=!0,this._send(s),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(c,()=>{this.stream.end()})}close(d){this._send(o.close(d))}describe(d){this._send(o.describe(d))}sendCopyFromChunk(d){this._send(o.copyData(d))}endCopyFrom(){this._send(o.copyDone())}sendCopyFail(d){this._send(o.copyFail(d))}};k(u,"Connection");var l=u;e.exports=l}),pF=Pe((t,e)=>{"use strict";he();var r=Ua().EventEmitter,i=(eb(),or(Bf)),n=Xw(),o=X3(),s=nF(),a=r$(),c=a$(),u=aF(),l=Yw(),f=X2(),d=class extends r{constructor(p){super(),this.connectionParameters=new c(p),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var y=p||{};this._Promise=y.Promise||Zw.Promise,this._types=new a(y.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=y.connection||new f({stream:y.stream,ssl:this.connectionParameters.ssl,keepAlive:y.keepAlive||!1,keepAliveInitialDelayMillis:y.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=y.binary||l.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=y.connectionTimeoutMillis||0}_errorAllQueries(p){let y=k(b=>{Oe.nextTick(()=>{b.handleError(p,this.connection)})},"enqueueError");this.activeQuery&&(y(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(y),this.queryQueue.length=0}_connect(p){var y=this,b=this.connection;if(this._connectionCallback=p,this._connecting||this._connected){let N=new Error("Client has already been connected. You cannot reuse a client.");Oe.nextTick(()=>{p(N)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{b._ending=!0,b.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?b.connect(this.host+"/.s.PGSQL."+this.port):b.connect(this.port,this.host),b.on("connect",function(){y.ssl?b.requestSsl():b.startup(y.getStartupConf())}),b.on("sslconnect",function(){b.startup(y.getStartupConf())}),this._attachListeners(b),b.once("end",()=>{let N=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(N),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(N):this._handleErrorEvent(N):this._connectionError||this._handleErrorEvent(N)),Oe.nextTick(()=>{this.emit("end")})})}connect(p){if(p){this._connect(p);return}return new this._Promise((y,b)=>{this._connect(N=>{N?b(N):y()})})}_attachListeners(p){p.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),p.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),p.on("authenticationSASL",this._handleAuthSASL.bind(this)),p.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),p.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),p.on("backendKeyData",this._handleBackendKeyData.bind(this)),p.on("error",this._handleErrorEvent.bind(this)),p.on("errorMessage",this._handleErrorMessage.bind(this)),p.on("readyForQuery",this._handleReadyForQuery.bind(this)),p.on("notice",this._handleNotice.bind(this)),p.on("rowDescription",this._handleRowDescription.bind(this)),p.on("dataRow",this._handleDataRow.bind(this)),p.on("portalSuspended",this._handlePortalSuspended.bind(this)),p.on("emptyQuery",this._handleEmptyQuery.bind(this)),p.on("commandComplete",this._handleCommandComplete.bind(this)),p.on("parseComplete",this._handleParseComplete.bind(this)),p.on("copyInResponse",this._handleCopyInResponse.bind(this)),p.on("copyData",this._handleCopyData.bind(this)),p.on("notification",this._handleNotification.bind(this))}_checkPgPass(p){let y=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(b=>{if(b!==void 0){if(typeof b!="string"){y.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=b}else this.connectionParameters.password=this.password=null;p()}).catch(b=>{y.emit("error",b)}):this.password!==null?p():s(this.connectionParameters,b=>{b!==void 0&&(this.connectionParameters.password=this.password=b),p()})}_handleAuthCleartextPassword(p){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(p){this._checkPgPass(()=>{let y=n.postgresMd5PasswordHash(this.user,this.password,p.salt);this.connection.password(y)})}_handleAuthSASL(p){this._checkPgPass(()=>{this.saslSession=o.startSession(p.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(p){o.continueSession(this.saslSession,this.password,p.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(p){o.finalizeSession(this.saslSession,p.data),this.saslSession=null}_handleBackendKeyData(p){this.processID=p.processID,this.secretKey=p.secretKey}_handleReadyForQuery(p){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:y}=this;this.activeQuery=null,this.readyForQuery=!0,y&&y.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(p){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(p);this.emit("error",p)}}_handleErrorEvent(p){if(this._connecting)return this._handleErrorWhileConnecting(p);this._queryable=!1,this._errorAllQueries(p),this.emit("error",p)}_handleErrorMessage(p){if(this._connecting)return this._handleErrorWhileConnecting(p);let y=this.activeQuery;if(!y){this._handleErrorEvent(p);return}this.activeQuery=null,y.handleError(p,this.connection)}_handleRowDescription(p){this.activeQuery.handleRowDescription(p)}_handleDataRow(p){this.activeQuery.handleDataRow(p)}_handlePortalSuspended(p){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(p){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(p){this.activeQuery.handleCommandComplete(p,this.connection)}_handleParseComplete(p){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(p){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(p){this.activeQuery.handleCopyData(p,this.connection)}_handleNotification(p){this.emit("notification",p)}_handleNotice(p){this.emit("notice",p)}getStartupConf(){var p=this.connectionParameters,y={user:p.user,database:p.database},b=p.application_name||p.fallback_application_name;return b&&(y.application_name=b),p.replication&&(y.replication=""+p.replication),p.statement_timeout&&(y.statement_timeout=String(parseInt(p.statement_timeout,10))),p.lock_timeout&&(y.lock_timeout=String(parseInt(p.lock_timeout,10))),p.idle_in_transaction_session_timeout&&(y.idle_in_transaction_session_timeout=String(parseInt(p.idle_in_transaction_session_timeout,10))),p.options&&(y.options=p.options),y}cancel(p,y){if(p.activeQuery===y){var b=this.connection;this.host&&this.host.indexOf("/")===0?b.connect(this.host+"/.s.PGSQL."+this.port):b.connect(this.port,this.host),b.on("connect",function(){b.cancel(p.processID,p.secretKey)})}else p.queryQueue.indexOf(y)!==-1&&p.queryQueue.splice(p.queryQueue.indexOf(y),1)}setTypeParser(p,y,b){return this._types.setTypeParser(p,y,b)}getTypeParser(p,y){return this._types.getTypeParser(p,y)}escapeIdentifier(p){return'"'+p.replace(/"/g,'""')+'"'}escapeLiteral(p){for(var y=!1,b="'",N=0;N<p.length;N++){var T=p[N];T==="'"?b+=T+T:T==="\\"?(b+=T+T,y=!0):b+=T}return b+="'",y===!0&&(b=" E"+b),b}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let p=this.activeQuery.submit(this.connection);p&&Oe.nextTick(()=>{this.activeQuery.handleError(p,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(p,y,b){var N,T,I,$,v;if(p==null)throw new TypeError("Client was passed a null or undefined query");return typeof p.submit=="function"?(I=p.query_timeout||this.connectionParameters.query_timeout,T=N=p,typeof y=="function"&&(N.callback=N.callback||y)):(I=this.connectionParameters.query_timeout,N=new u(p,y,b),N.callback||(T=new this._Promise((S,_)=>{N.callback=(E,C)=>E?_(E):S(C)}))),I&&(v=N.callback,$=setTimeout(()=>{var S=new Error("Query read timeout");Oe.nextTick(()=>{N.handleError(S,this.connection)}),v(S),N.callback=()=>{};var _=this.queryQueue.indexOf(N);_>-1&&this.queryQueue.splice(_,1),this._pulseQueryQueue()},I),N.callback=(S,_)=>{clearTimeout($),v(S,_)}),this.binary&&!N.binary&&(N.binary=!0),N._result&&!N._result._types&&(N._result._types=this._types),this._queryable?this._ending?(Oe.nextTick(()=>{N.handleError(new Error("Client was closed and is not queryable"),this.connection)}),T):(this.queryQueue.push(N),this._pulseQueryQueue(),T):(Oe.nextTick(()=>{N.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),T)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(p){if(this._ending=!0,!this.connection._connecting)if(p)p();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),p)this.connection.once("end",p);else return new this._Promise(y=>{this.connection.once("end",y)})}};k(d,"Client");var m=d;m.Query=u,e.exports=m}),mF=Pe((t,e)=>{"use strict";he();var r=Ua().EventEmitter,i=k(function(){},"NOOP"),n=k((h,p)=>{let y=h.findIndex(p);return y===-1?void 0:h.splice(y,1)[0]},"removeWhere"),o=class{constructor(p,y,b){this.client=p,this.idleListener=y,this.timeoutId=b}};k(o,"IdleItem");var s=o,a=class{constructor(p){this.callback=p}};k(a,"PendingItem");var c=a;function u(){throw new Error("Release called on client which has already been released to the pool.")}k(u,"throwOnDoubleRelease");function l(h,p){if(p)return{callback:p,result:void 0};let y,b,N=k(function(I,$){I?y(I):b($)},"cb"),T=new h(function(I,$){b=I,y=$}).catch(I=>{throw Error.captureStackTrace(I),I});return{callback:N,result:T}}k(l,"promisify");function f(h,p){return k(function y(b){b.client=p,p.removeListener("error",y),p.on("error",()=>{h.log("additional client error after disconnection due to error",b)}),h._remove(p),h.emit("error",b,p)},"idleListener")}k(f,"makeIdleListener");var d=class extends r{constructor(p,y){super(),this.options=Object.assign({},p),p!=null&&"password"in p&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:p.password}),p!=null&&p.ssl&&p.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||y||tb().Client,this.Promise=this.options.Promise||Zw.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(y=>{this._remove(y.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let p=this._pendingQueue.shift();if(this._idle.length){let y=this._idle.pop();clearTimeout(y.timeoutId);let b=y.client;b.ref&&b.ref();let N=y.idleListener;return this._acquireClient(b,p,N,!1)}if(!this._isFull())return this.newClient(p);throw new Error("unexpected condition")}_remove(p){let y=n(this._idle,b=>b.client===p);y!==void 0&&clearTimeout(y.timeoutId),this._clients=this._clients.filter(b=>b!==p),p.end(),this.emit("remove",p)}connect(p){if(this.ending){let N=new Error("Cannot use a pool after calling end on the pool");return p?p(N):this.Promise.reject(N)}let y=l(this.Promise,p),b=y.result;if(this._isFull()||this._idle.length){if(this._idle.length&&Oe.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new c(y.callback)),b;let N=k(($,v,S)=>{clearTimeout(I),y.callback($,v,S)},"queueCallback"),T=new c(N),I=setTimeout(()=>{n(this._pendingQueue,$=>$.callback===N),T.timedOut=!0,y.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return I.unref&&I.unref(),this._pendingQueue.push(T),b}return this.newClient(new c(y.callback)),b}newClient(p){let y=new this.Client(this.options);this._clients.push(y);let b=f(this,y);this.log("checking client timeout");let N,T=!1;this.options.connectionTimeoutMillis&&(N=setTimeout(()=>{this.log("ending client due to timeout"),T=!0,y.connection?y.connection.stream.destroy():y.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),y.connect(I=>{if(N&&clearTimeout(N),y.on("error",b),I)this.log("client failed to connect",I),this._clients=this._clients.filter($=>$!==y),T&&(I=new Error("Connection terminated due to connection timeout",{cause:I})),this._pulseQueue(),p.timedOut||p.callback(I,void 0,i);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let $=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(y),this._idle.findIndex(v=>v.client===y)!==-1&&this._acquireClient(y,new c((v,S,_)=>_()),b,!1)},this.options.maxLifetimeSeconds*1e3);$.unref(),y.once("end",()=>clearTimeout($))}return this._acquireClient(y,p,b,!0)}})}_acquireClient(p,y,b,N){N&&this.emit("connect",p),this.emit("acquire",p),p.release=this._releaseOnce(p,b),p.removeListener("error",b),y.timedOut?N&&this.options.verify?this.options.verify(p,p.release):p.release():N&&this.options.verify?this.options.verify(p,T=>{if(T)return p.release(T),y.callback(T,void 0,i);y.callback(void 0,p,p.release)}):y.callback(void 0,p,p.release)}_releaseOnce(p,y){let b=!1;return N=>{b&&u(),b=!0,this._release(p,y,N)}}_release(p,y,b){if(p.on("error",y),p._poolUseCount=(p._poolUseCount||0)+1,this.emit("release",b,p),b||this.ending||!p._queryable||p._ending||p._poolUseCount>=this.options.maxUses){p._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(p),this._pulseQueue();return}if(this._expired.has(p)){this.log("remove expired client"),this._expired.delete(p),this._remove(p),this._pulseQueue();return}let N;this.options.idleTimeoutMillis&&this._isAboveMin()&&(N=setTimeout(()=>{this.log("remove idle client"),this._remove(p)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&N.unref()),this.options.allowExitOnIdle&&p.unref(),this._idle.push(new s(p,y,N)),this._pulseQueue()}query(p,y,b){if(typeof p=="function"){let T=l(this.Promise,p);return e$(function(){return T.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),T.result}typeof y=="function"&&(b=y,y=void 0);let N=l(this.Promise,b);return b=N.callback,this.connect((T,I)=>{if(T)return b(T);let $=!1,v=k(S=>{$||($=!0,I.release(S),b(S))},"onError");I.once("error",v),this.log("dispatching query");try{I.query(p,y,(S,_)=>{if(this.log("query dispatched"),I.removeListener("error",v),!$)return $=!0,I.release(S),S?b(S):b(void 0,_)})}catch(S){return I.release(S),b(S)}}),N.result}end(p){if(this.log("ending"),this.ending){let b=new Error("Called end on pool more than once");return p?p(b):this.Promise.reject(b)}this.ending=!0;let y=l(this.Promise,p);return this._endCallback=y.callback,this._pulseQueue(),y.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((p,y)=>p+(this._expired.has(y)?1:0),0)}get totalCount(){return this._clients.length}};k(d,"Pool");var m=d;e.exports=m}),ez={};hi(ez,{default:()=>tz});var tz,hF=tn(()=>{"use strict";he(),tz={}}),gF=Pe((t,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),yF=Pe((t,e)=>{"use strict";he();var r=Ua().EventEmitter,i=(eb(),or(Bf)),n=Xw(),o=e.exports=function(a,c,u){r.call(this),a=n.normalizeQueryConfig(a,c,u),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(l){l==="row"&&(this._emitRowEvents=!0)}.bind(this))};i.inherits(o,r);var s={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};o.prototype.handleError=function(a){var c=this.native.pq.resultErrorFields();if(c)for(var u in c){var l=s[u]||u;a[l]=c[u]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},o.prototype.then=function(a,c){return this._getPromise().then(a,c)},o.prototype.catch=function(a){return this._getPromise().catch(a)},o.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(a,c){this._once("end",a),this._once("error",c)}.bind(this)),this._promise)},o.prototype.submit=function(a){this.state="running";var c=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var u=k(function(d,m,h){if(a.native.arrayMode=!1,e$(function(){c.emit("_done")}),d)return c.handleError(d);c._emitRowEvents&&(h.length>1?m.forEach((p,y)=>{p.forEach(b=>{c.emit("row",b,h[y])})}):m.forEach(function(p){c.emit("row",p,h)})),c.state="end",c.emit("end",h),c.callback&&c.callback(null,h)},"after");if(Oe.domain&&(u=Oe.domain.bind(u)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var l=(this.values||[]).map(n.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let d=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return u(d)}return a.native.execute(this.name,l,u)}return a.native.prepare(this.name,this.text,l.length,function(d){return d?u(d):(a.namedQueries[c.name]=c.text,c.native.execute(c.name,l,u))})}else if(this.values){if(!Array.isArray(this.values)){let d=new Error("Query values must be an array");return u(d)}var f=this.values.map(n.prepareValue);a.native.query(this.text,f,u)}else a.native.query(this.text,u)}}),wF=Pe((t,e)=>{"use strict";he();var r=(hF(),or(ez)),i=r$(),n=gF(),o=Ua().EventEmitter,s=(eb(),or(Bf)),a=a$(),c=yF(),u=e.exports=function(l){o.call(this),l=l||{},this._Promise=l.Promise||Zw.Promise,this._types=new i(l.types),this.native=new r({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var f=this.connectionParameters=new a(l);this.user=f.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),this.database=f.database,this.host=f.host,this.port=f.port,this.namedQueries={}};u.Query=c,s.inherits(u,o),u.prototype._errorAllQueries=function(l){let f=k(d=>{Oe.nextTick(()=>{d.native=this.native,d.handleError(l)})},"enqueueError");this._hasActiveQuery()&&(f(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(f),this._queryQueue.length=0},u.prototype._connect=function(l){var f=this;if(this._connecting){Oe.nextTick(()=>l(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(d,m){if(d)return l(d);f.native.connect(m,function(h){if(h)return f.native.end(),l(h);f._connected=!0,f.native.on("error",function(p){f._queryable=!1,f._errorAllQueries(p),f.emit("error",p)}),f.native.on("notification",function(p){f.emit("notification",{channel:p.relname,payload:p.extra})}),f.emit("connect"),f._pulseQueryQueue(!0),l()})})},u.prototype.connect=function(l){if(l){this._connect(l);return}return new this._Promise((f,d)=>{this._connect(m=>{m?d(m):f()})})},u.prototype.query=function(l,f,d){var m,h,p,y,b;if(l==null)throw new TypeError("Client was passed a null or undefined query");if(typeof l.submit=="function")p=l.query_timeout||this.connectionParameters.query_timeout,h=m=l,typeof f=="function"&&(l.callback=f);else if(p=this.connectionParameters.query_timeout,m=new c(l,f,d),!m.callback){let N,T;h=new this._Promise((I,$)=>{N=I,T=$}),m.callback=(I,$)=>I?T(I):N($)}return p&&(b=m.callback,y=setTimeout(()=>{var N=new Error("Query read timeout");Oe.nextTick(()=>{m.handleError(N,this.connection)}),b(N),m.callback=()=>{};var T=this._queryQueue.indexOf(m);T>-1&&this._queryQueue.splice(T,1),this._pulseQueryQueue()},p),m.callback=(N,T)=>{clearTimeout(y),b(N,T)}),this._queryable?this._ending?(m.native=this.native,Oe.nextTick(()=>{m.handleError(new Error("Client was closed and is not queryable"))}),h):(this._queryQueue.push(m),this._pulseQueryQueue(),h):(m.native=this.native,Oe.nextTick(()=>{m.handleError(new Error("Client has encountered a connection error and is not queryable"))}),h)},u.prototype.end=function(l){var f=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,l));var d;return l||(d=new this._Promise(function(m,h){l=k(p=>p?h(p):m(),"cb")})),this.native.end(function(){f._errorAllQueries(new Error("Connection terminated")),Oe.nextTick(()=>{f.emit("end"),l&&l()})}),d},u.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},u.prototype._pulseQueryQueue=function(l){if(this._connected&&!this._hasActiveQuery()){var f=this._queryQueue.shift();if(!f){l||this.emit("drain");return}this._activeQuery=f,f.submit(this);var d=this;f.once("_done",function(){d._pulseQueryQueue()})}},u.prototype.cancel=function(l){this._activeQuery===l?this.native.cancel(function(){}):this._queryQueue.indexOf(l)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(l),1)},u.prototype.ref=function(){},u.prototype.unref=function(){},u.prototype.setTypeParser=function(l,f,d){return this._types.setTypeParser(l,f,d)},u.prototype.getTypeParser=function(l,f){return this._types.getTypeParser(l,f)}}),x2=Pe((t,e)=>{"use strict";he(),e.exports=wF()}),tb=Pe((t,e)=>{"use strict";he();var r=pF(),i=Yw(),n=X2(),o=mF(),{DatabaseError:s}=Z2(),a=k(u=>{var l;return l=class extends o{constructor(f){super(f,u)}},k(l,"BoundPool"),l},"poolFactory"),c=k(function(u){this.defaults=i,this.Client=u,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=n,this.types=Gw(),this.DatabaseError=s},"PG");typeof Oe.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new c(x2()):(e.exports=new c(r),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var u=null;try{u=new c(x2())}catch(l){if(l.code!=="MODULE_NOT_FOUND")throw l}return Object.defineProperty(e.exports,"native",{value:u}),u}}))});he();he();Mf();$2();he();var bF=Object.defineProperty,vF=Object.defineProperties,xF=Object.getOwnPropertyDescriptors,S2=Object.getOwnPropertySymbols,SF=Object.prototype.hasOwnProperty,NF=Object.prototype.propertyIsEnumerable,N2=k((t,e,r)=>e in t?bF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,"__defNormalProp"),AF=k((t,e)=>{for(var r in e||(e={}))SF.call(e,r)&&N2(t,r,e[r]);if(S2)for(var r of S2(e))NF.call(e,r)&&N2(t,r,e[r]);return t},"__spreadValues"),EF=k((t,e)=>vF(t,xF(e)),"__spreadProps"),_F=1008e3,A2=new Uint8Array(new Uint16Array([258]).buffer)[0]===2,kF=new TextDecoder,c$=new TextEncoder,Kw=c$.encode("0123456789abcdef"),Hw=c$.encode("0123456789ABCDEF"),TF=c$.encode("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),rz=TF.slice();rz[62]=45;rz[63]=95;var Lf,Jw;function nz(t,{alphabet:e,scratchArr:r}={}){if(!Lf)if(Lf=new Uint16Array(256),Jw=new Uint16Array(256),A2)for(let m=0;m<256;m++)Lf[m]=Kw[m&15]<<8|Kw[m>>>4],Jw[m]=Hw[m&15]<<8|Hw[m>>>4];else for(let m=0;m<256;m++)Lf[m]=Kw[m&15]|Kw[m>>>4]<<8,Jw[m]=Hw[m&15]|Hw[m>>>4]<<8;t.byteOffset%4!==0&&(t=new Uint8Array(t));let i=t.length,n=i>>>1,o=i>>>2,s=r||new Uint16Array(i),a=new Uint32Array(t.buffer,t.byteOffset,o),c=new Uint32Array(s.buffer,s.byteOffset,n),u=e==="upper"?Jw:Lf,l=0,f=0,d;if(A2)for(;l<o;)d=a[l++],c[f++]=u[d>>>8&255]<<16|u[d&255],c[f++]=u[d>>>24]<<16|u[d>>>16&255];else for(;l<o;)d=a[l++],c[f++]=u[d>>>24]<<16|u[d>>>16&255],c[f++]=u[d>>>8&255]<<16|u[d&255];for(l<<=2;l<i;)s[l]=u[t[l++]];return kF.decode(s.subarray(0,i))}k(nz,"_toHex");function iz(t,e={}){let r="",i=t.length,n=_F>>>1,o=Math.ceil(i/n),s=new Uint16Array(o>1?n:i);for(let a=0;a<o;a++){let c=a*n,u=c+n;r+=nz(t.subarray(c,u),EF(AF({},e),{scratchArr:s}))}return r}k(iz,"_toHexChunked");function oz(t,e={}){return e.alphabet!=="upper"&&typeof t.toHex=="function"?t.toHex():iz(t,e)}k(oz,"toHex");he();var sz=class az{constructor(e,r){this.strings=e,this.values=r}toParameterizedQuery(e={query:"",params:[]}){let{strings:r,values:i}=this;for(let n=0,o=r.length;n<o;n++)if(e.query+=r[n],n<i.length){let s=i[n];if(s instanceof lz)e.query+=s.sql;else if(s instanceof Qw)if(s.queryData instanceof az)s.queryData.toParameterizedQuery(e);else{if(s.queryData.params?.length)throw new Error("This query is not composable");e.query+=s.queryData.query}else{let{params:a}=e;a.push(s),e.query+="$"+a.length,(s instanceof Ne||ArrayBuffer.isView(s))&&(e.query+="::bytea")}}return e}};k(sz,"SqlTemplate");var cz=sz,uz=class{constructor(e){this.sql=e}};k(uz,"UnsafeRawSql");var lz=uz;he();function u$(){typeof window<"u"&&typeof document<"u"&&typeof console<"u"&&typeof console.warn=="function"&&console.warn(`          
        ************************************************************
        *                                                          *
        *  WARNING: Running SQL directly from the browser can have *
        *  security implications. Even if your database is         *
        *  protected by Row-Level Security (RLS), use it at your   *
        *  own risk. This approach is great for fast prototyping,  *
        *  but ensure proper safeguards are in place to prevent    *
        *  misuse or execution of expensive SQL queries by your    *
        *  end users.                                              *
        *                                                          *
        *  If you've assessed the risks, suppress this message     *
        *  using the disableWarningInBrowsers configuration        *
        *  parameter.                                              *
        *                                                          *
        ************************************************************`)}k(u$,"warnIfBrowser");Mf();var IF=Ra(r$()),$F=Ra(Xw()),dz=class fz extends Error{constructor(e){super(e),Ae(this,"name","NeonDbError"),Ae(this,"severity"),Ae(this,"code"),Ae(this,"detail"),Ae(this,"hint"),Ae(this,"position"),Ae(this,"internalPosition"),Ae(this,"internalQuery"),Ae(this,"where"),Ae(this,"schema"),Ae(this,"table"),Ae(this,"column"),Ae(this,"dataType"),Ae(this,"constraint"),Ae(this,"file"),Ae(this,"line"),Ae(this,"routine"),Ae(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,fz)}};k(dz,"NeonDbError");var Uu=dz,E2="transaction() expects an array of queries, or a function returning an array of queries",CF=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function pz(t){return t instanceof Ne?"\\x"+oz(t):t}k(pz,"encodeBuffersAsBytea");function YI(t){let{query:e,params:r}=t instanceof cz?t.toParameterizedQuery():t;return{query:e,params:r.map(i=>pz((0,$F.prepareValue)(i)))}}k(YI,"prepareQuery");function hs(t,{arrayMode:e,fullResults:r,fetchOptions:i,isolationLevel:n,readOnly:o,deferrable:s,authToken:a,disableWarningInBrowsers:c}={}){if(!t)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let u;try{u=t$(t)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(t))}let{protocol:l,username:f,hostname:d,port:m,pathname:h}=u;if(l!=="postgres:"&&l!=="postgresql:"||!f||!d||!h)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function p(b,...N){if(!(Array.isArray(b)&&Array.isArray(b.raw)&&Array.isArray(N)))throw new Error('This function can now be called only as a tagged-template function: sql`SELECT ${value}`, not sql("SELECT $1", [value], options). For a conventional function call with value placeholders ($1, $2, etc.), use sql.query("SELECT $1", [value], options).');return new Qw(y,new cz(b,N))}k(p,"templateFn"),p.query=(b,N,T)=>new Qw(y,{query:b,params:N??[]},T),p.unsafe=b=>new lz(b),p.transaction=async(b,N)=>{if(typeof b=="function"&&(b=b(p)),!Array.isArray(b))throw new Error(E2);b.forEach($=>{if(!($ instanceof Qw))throw new Error(E2)});let T=b.map($=>$.queryData),I=b.map($=>$.opts??{});return y(T,I,N)};async function y(b,N,T){let{fetchEndpoint:I,fetchFunction:$}=jf,v=Array.isArray(b)?{queries:b.map(G=>YI(G))}:YI(b),S=i??{},_=e??!1,E=r??!1,C=n,R=o,M=s;T!==void 0&&(T.fetchOptions!==void 0&&(S={...S,...T.fetchOptions}),T.arrayMode!==void 0&&(_=T.arrayMode),T.fullResults!==void 0&&(E=T.fullResults),T.isolationLevel!==void 0&&(C=T.isolationLevel),T.readOnly!==void 0&&(R=T.readOnly),T.deferrable!==void 0&&(M=T.deferrable)),N!==void 0&&!Array.isArray(N)&&N.fetchOptions!==void 0&&(S={...S,...N.fetchOptions});let D=a;!Array.isArray(N)&&N?.authToken!==void 0&&(D=N.authToken);let P=typeof I=="function"?I(d,m,{jwtAuth:D!==void 0}):I,z={"Neon-Connection-String":t,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},W=await hz(D);W&&(z.Authorization=`Bearer ${W}`),Array.isArray(b)&&(C!==void 0&&(z["Neon-Batch-Isolation-Level"]=C),R!==void 0&&(z["Neon-Batch-Read-Only"]=String(R)),M!==void 0&&(z["Neon-Batch-Deferrable"]=String(M))),c||jf.disableWarningInBrowsers||u$();let Q;try{Q=await($??fetch)(P,{method:"POST",body:JSON.stringify(v),headers:z,...S})}catch(G){let J=new Uu(`Error connecting to database: ${G}`);throw J.sourceError=G,J}if(Q.ok){let G=await Q.json();if(Array.isArray(b)){let J=G.results;if(!Array.isArray(J))throw new Uu("Neon internal error: unexpected result format");return J.map((le,se)=>{let be=N[se]??{},Re=be.arrayMode??_,Lt=be.fullResults??E;return XI(le,{arrayMode:Re,fullResults:Lt,types:be.types})})}else{let J=N??{},le=J.arrayMode??_,se=J.fullResults??E;return XI(G,{arrayMode:le,fullResults:se,types:J.types})}}else{let{status:G}=Q;if(G===400){let J=await Q.json(),le=new Uu(J.message);for(let se of CF)le[se]=J[se]??void 0;throw le}else{let J=await Q.text();throw new Uu(`Server error (HTTP status ${G}): ${J}`)}}}return k(y,"execute"),p}k(hs,"neon");var mz=class{constructor(e,r,i){this.execute=e,this.queryData=r,this.opts=i}then(e,r){return this.execute(this.queryData,this.opts).then(e,r)}catch(e){return this.execute(this.queryData,this.opts).catch(e)}finally(e){return this.execute(this.queryData,this.opts).finally(e)}};k(mz,"NeonQueryPromise");var Qw=mz;function XI(t,{arrayMode:e,fullResults:r,types:i}){let n=new IF.default(i),o=t.fields.map(c=>c.name),s=t.fields.map(c=>n.getTypeParser(c.dataTypeID)),a=e===!0?t.rows.map(c=>c.map((u,l)=>u===null?null:s[l](u))):t.rows.map(c=>Object.fromEntries(c.map((u,l)=>[o[l],u===null?null:s[l](u)])));return r?(t.viaNeonFetch=!0,t.rowAsArray=e,t.rows=a,t._parsers=s,t._types=n,t):a}k(XI,"processQueryResult");async function hz(t){if(typeof t=="string")return t;if(typeof t=="function")try{return await Promise.resolve(t())}catch(e){let r=new Uu("Error getting auth token.");throw e instanceof Error&&(r=new Uu(`Error getting auth token: ${e.message}`)),r}}k(hz,"getAuthToken");he();var OF=Ra(tb());he();var PF=Ra(tb()),gz=class extends PF.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:r}=this;r.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&r.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let i=typeof this.config!="string"&&this.config?.host!==void 0||typeof this.config!="string"&&this.config?.connectionString!==void 0||Oe.env.PGHOST!==void 0,n=Oe.env.USER??Oe.env.USERNAME;if(!i&&this.host==="localhost"&&this.user===n&&this.database===n&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${n}, db: ${n}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let o=super.connect(e),s=r.pipelineTLS&&this.ssl,a=r.pipelineConnect==="password";if(!s&&!r.pipelineConnect)return o;let c=this.connection;if(s&&c.on("connect",()=>c.stream.emit("data","S")),a){c.removeAllListeners("authenticationCleartextPassword"),c.removeAllListeners("readyForQuery"),c.once("readyForQuery",()=>c.on("readyForQuery",this._handleReadyForQuery.bind(this)));let u=this.ssl?"sslconnect":"connect";c.on(u,()=>{this.neonConfig.disableWarningInBrowsers||u$(),this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return o}async _handleAuthSASLContinue(e){if(typeof crypto>"u"||crypto.subtle===void 0||crypto.subtle.importKey===void 0)throw new Error("Cannot use SASL auth when `crypto.subtle` is not defined");let r=crypto.subtle,i=this.saslSession,n=this.password,o=e.data;if(i.message!=="SASLInitialResponse"||typeof n!="string"||typeof o!="string")throw new Error("SASL: protocol error");let s=Object.fromEntries(o.split(",").map(G=>{if(!/^.=/.test(G))throw new Error("SASL: Invalid attribute pair entry");let J=G[0],le=G.substring(2);return[J,le]})),a=s.r,c=s.s,u=s.i;if(!a||!/^[!-+--~]+$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!c||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(c))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!u||!/^[1-9][0-9]*$/.test(u))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!a.startsWith(i.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(a.length===i.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let l=parseInt(u,10),f=Ne.from(c,"base64"),d=new TextEncoder,m=d.encode(n),h=await r.importKey("raw",m,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=new Uint8Array(await r.sign("HMAC",h,Ne.concat([f,Ne.from([0,0,0,1])]))),y=p;for(var b=0;b<l-1;b++)p=new Uint8Array(await r.sign("HMAC",h,p)),y=Ne.from(y.map((G,J)=>y[J]^p[J]));let N=y,T=await r.importKey("raw",N,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),I=new Uint8Array(await r.sign("HMAC",T,d.encode("Client Key"))),$=await r.digest("SHA-256",I),v="n=*,r="+i.clientNonce,S="r="+a+",s="+c+",i="+l,_="c=biws,r="+a,E=v+","+S+","+_,C=await r.importKey("raw",$,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var R=new Uint8Array(await r.sign("HMAC",C,d.encode(E))),M=Ne.from(I.map((G,J)=>I[J]^R[J])),D=M.toString("base64");let P=await r.importKey("raw",N,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),z=await r.sign("HMAC",P,d.encode("Server Key")),W=await r.importKey("raw",z,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var Q=Ne.from(await r.sign("HMAC",W,d.encode(E)));i.message="SASLResponse",i.serverSignature=Q.toString("base64"),i.response=_+",p="+D,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};k(gz,"NeonClient");var RF=gz;Mf();var UF=Ra(a$());function yz(t,e){if(e)return{callback:e,result:void 0};let r,i,n=k(function(s,a){s?r(s):i(a)},"cb"),o=new t(function(s,a){i=s,r=a});return{callback:n,result:o}}k(yz,"promisify");var DF=class extends OF.Pool{constructor(){super(...arguments),Ae(this,"Client",RF),Ae(this,"hasFetchUnsupportedListeners",!1),Ae(this,"addListener",this.on)}on(e,r){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,r)}query(e,r,i){if(!jf.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,r,i);typeof r=="function"&&(i=r,r=void 0);let n=yz(this.Promise,i);i=n.callback;try{let o=new UF.default(this.options),s=encodeURIComponent,a=encodeURI,c=`postgresql://${s(o.user)}:${s(o.password)}@${s(o.host)}/${a(o.database)}`,u=typeof e=="string"?e:e.text,l=r??e.values??[];hs(c,{fullResults:!0,arrayMode:e.rowMode==="array"}).query(u,l,{types:e.types??this.options?.types}).then(f=>i(void 0,f)).catch(f=>i(f))}catch(o){i(o)}return n.result}};k(DF,"NeonPool");Mf();var qf=Ra(tb());var mOe=qf.DatabaseError,hOe=qf.defaults,gOe=qf.escapeIdentifier,yOe=qf.escapeLiteral,rn=qf.types;var Ut=class t{static[U]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,r){if(r==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(r===yt)return{...e[yt],selectedFields:new Proxy(e[yt].selectedFields,this)};if(typeof r=="symbol")return e[r];let n=(H(e,vt)?e._.selectedFields:H(e,jr)?e[yt].selectedFields:e)[r];if(H(n,ce.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!n.isSelectionField)return n.sql;let o=n.clone();return o.isSelectionField=!0,o}if(H(n,ce)){if(this.config.sqlBehavior==="sql")return n;throw new Error(`You tried to reference "${r}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return H(n,nt)?this.config.alias?new Proxy(n,new $a(new Proxy(n.table,new ku(this.config.alias,this.config.replaceOriginalName??!1)))):n:typeof n!="object"||n===null?n:new Proxy(n,new t(this.config))}};var l$=class{constructor(e,r){this.unique=e,this.name=r}static[U]="PgIndexBuilderOn";on(...e){return new Wf(e.map(r=>{if(H(r,ce))return r;r=r;let i=new Eu(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),i}),this.unique,!1,this.name)}onOnly(...e){return new Wf(e.map(r=>{if(H(r,ce))return r;r=r;let i=new Eu(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,i}),this.unique,!0,this.name)}using(e,...r){return new Wf(r.map(i=>{if(H(i,ce))return i;i=i;let n=new Eu(i.name,!!i.keyAsName,i.columnType,i.indexConfig);return i.indexConfig=JSON.parse(JSON.stringify(i.defaultConfig)),n}),this.unique,!0,this.name,e)}},Wf=class{static[U]="PgIndexBuilder";config;constructor(e,r,i,n,o="btree"){this.config={name:n,columns:e,unique:r,only:i,method:o}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new d$(this.config,e)}},d$=class{static[U]="PgIndex";config;constructor(e,r){this.config={...e,table:r}}};function gi(t){return new l$(!1,t)}function LF(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(r=>r.toLowerCase()).join("_")}function zF(t){return(t.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((r,i,n)=>{let o=n===0?i.toLowerCase():`${i[0].toUpperCase()}${i.slice(1)}`;return r+o},"")}function jF(t){return t}var rb=class{static[U]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?LF:e==="camelCase"?zF:jF}getColumnCasing(e){if(!e.keyAsName)return e.name;let r=e.table[oe.Symbol.Schema]??"public",i=e.table[oe.Symbol.OriginalName],n=`${r}.${i}.${e.name}`;return this.cache[n]||this.cacheTable(e.table),this.cache[n]}cacheTable(e){let r=e[oe.Symbol.Schema]??"public",i=e[oe.Symbol.OriginalName],n=`${r}.${i}`;if(!this.cachedTables[n]){for(let o of Object.values(e[oe.Symbol.Columns])){let s=`${n}.${o.name}`;this.cache[s]=this.convert(o.name)}this.cachedTables[n]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Lu=class extends jr{static[U]="PgViewBase"};var gs=class{static[U]="PgDialect";casing;constructor(e){this.casing=new rb(e?.casing)}async migrate(e,r,i){let n=typeof i=="string"?"__drizzle_migrations":i.migrationsTable??"__drizzle_migrations",o=typeof i=="string"?"drizzle":i.migrationsSchema??"drizzle",s=j`
			CREATE TABLE IF NOT EXISTS ${j.identifier(o)}.${j.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await r.execute(j`CREATE SCHEMA IF NOT EXISTS ${j.identifier(o)}`),await r.execute(s);let c=(await r.all(j`select id, hash, created_at from ${j.identifier(o)}.${j.identifier(n)} order by created_at desc limit 1`))[0];await r.transaction(async u=>{for await(let l of e)if(!c||Number(c.created_at)<l.folderMillis){for(let f of l.sql)await u.execute(j.raw(f));await u.execute(j`insert into ${j.identifier(o)}.${j.identifier(n)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let r=[j`with `];for(let[i,n]of e.entries())r.push(j`${j.identifier(n._.alias)} as (${n._.sql})`),i<e.length-1&&r.push(j`, `);return r.push(j` `),j.join(r)}buildDeleteQuery({table:e,where:r,returning:i,withList:n}){let o=this.buildWithCTE(n),s=i?j` returning ${this.buildSelection(i,{isSingleTable:!0})}`:void 0,a=r?j` where ${r}`:void 0;return j`${o}delete from ${e}${a}${s}`}buildUpdateSet(e,r){let i=e[oe.Symbol.Columns],n=Object.keys(i).filter(s=>r[s]!==void 0||i[s]?.onUpdateFn!==void 0),o=n.length;return j.join(n.flatMap((s,a)=>{let c=i[s],u=c.onUpdateFn?.(),l=r[s]??(H(u,ce)?u:j.param(u,c)),f=j`${j.identifier(this.casing.getColumnCasing(c))} = ${l}`;return a<o-1?[f,j.raw(", ")]:[f]}))}buildUpdateQuery({table:e,set:r,where:i,returning:n,withList:o,from:s,joins:a}){let c=this.buildWithCTE(o),u=e[Wt.Symbol.Name],l=e[Wt.Symbol.Schema],f=e[Wt.Symbol.OriginalName],d=u===f?void 0:u,m=j`${l?j`${j.identifier(l)}.`:void 0}${j.identifier(f)}${d&&j` ${j.identifier(d)}`}`,h=this.buildUpdateSet(e,r),p=s&&j.join([j.raw(" from "),this.buildFromTable(s)]),y=this.buildJoins(a),b=n?j` returning ${this.buildSelection(n,{isSingleTable:!s})}`:void 0,N=i?j` where ${i}`:void 0;return j`${c}update ${m} set ${h}${p}${y}${N}${b}`}buildSelection(e,{isSingleTable:r=!1}={}){let i=e.length,n=e.flatMap(({field:o},s)=>{let a=[];if(H(o,ce.Aliased)&&o.isSelectionField)a.push(j.identifier(o.fieldAlias));else if(H(o,ce.Aliased)||H(o,ce)){let c=H(o,ce.Aliased)?o.sql:o;r?a.push(new ce(c.queryChunks.map(u=>H(u,ne)?j.identifier(this.casing.getColumnCasing(u)):u))):a.push(c),H(o,ce.Aliased)&&a.push(j` as ${j.identifier(o.fieldAlias)}`)}else if(H(o,nt))r?a.push(j.identifier(this.casing.getColumnCasing(o))):a.push(o);else if(H(o,vt)){let c=Object.entries(o._.selectedFields);if(c.length===1){let u=c[0][1],l=H(u,ce)?u.decoder:H(u,nt)?{mapFromDriverValue:f=>u.mapFromDriverValue(f)}:u.sql.decoder;l&&(o._.sql.decoder=l)}a.push(o)}return s<i-1&&a.push(j`, `),a});return j.join(n)}buildJoins(e){if(!e||e.length===0)return;let r=[];for(let[i,n]of e.entries()){i===0&&r.push(j` `);let o=n.table,s=n.lateral?j` lateral`:void 0,a=n.on?j` on ${n.on}`:void 0;if(H(o,Wt)){let c=o[Wt.Symbol.Name],u=o[Wt.Symbol.Schema],l=o[Wt.Symbol.OriginalName],f=c===l?void 0:n.alias;r.push(j`${j.raw(n.joinType)} join${s} ${u?j`${j.identifier(u)}.`:void 0}${j.identifier(l)}${f&&j` ${j.identifier(f)}`}${a}`)}else if(H(o,jr)){let c=o[yt].name,u=o[yt].schema,l=o[yt].originalName,f=c===l?void 0:n.alias;r.push(j`${j.raw(n.joinType)} join${s} ${u?j`${j.identifier(u)}.`:void 0}${j.identifier(l)}${f&&j` ${j.identifier(f)}`}${a}`)}else r.push(j`${j.raw(n.joinType)} join${s} ${o}${a}`);i<e.length-1&&r.push(j` `)}return j.join(r)}buildFromTable(e){if(H(e,oe)&&e[oe.Symbol.IsAlias]){let r=j`${j.identifier(e[oe.Symbol.OriginalName])}`;return e[oe.Symbol.Schema]&&(r=j`${j.identifier(e[oe.Symbol.Schema])}.${r}`),j`${r} ${j.identifier(e[oe.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:r,fieldsFlat:i,where:n,having:o,table:s,joins:a,orderBy:c,groupBy:u,limit:l,offset:f,lockingClause:d,distinct:m,setOperators:h}){let p=i??Ln(r);for(let P of p)if(H(P.field,nt)&&Yr(P.field.table)!==(H(s,vt)?s._.alias:H(s,Lu)?s[yt].name:H(s,ce)?void 0:Yr(s))&&!(z=>a?.some(({alias:W})=>W===(z[oe.Symbol.IsAlias]?Yr(z):z[oe.Symbol.BaseName])))(P.field.table)){let z=Yr(P.field.table);throw new Error(`Your "${P.path.join("->")}" field references a column "${z}"."${P.field.name}", but the table "${z}" is not part of the query! Did you forget to join it?`)}let y=!a||a.length===0,b=this.buildWithCTE(e),N;m&&(N=m===!0?j` distinct`:j` distinct on (${j.join(m.on,j`, `)})`);let T=this.buildSelection(p,{isSingleTable:y}),I=this.buildFromTable(s),$=this.buildJoins(a),v=n?j` where ${n}`:void 0,S=o?j` having ${o}`:void 0,_;c&&c.length>0&&(_=j` order by ${j.join(c,j`, `)}`);let E;u&&u.length>0&&(E=j` group by ${j.join(u,j`, `)}`);let C=typeof l=="object"||typeof l=="number"&&l>=0?j` limit ${l}`:void 0,R=f?j` offset ${f}`:void 0,M=j.empty();if(d){let P=j` for ${j.raw(d.strength)}`;d.config.of&&P.append(j` of ${j.join(Array.isArray(d.config.of)?d.config.of:[d.config.of],j`, `)}`),d.config.noWait?P.append(j` nowait`):d.config.skipLocked&&P.append(j` skip locked`),M.append(P)}let D=j`${b}select${N} ${T} from ${I}${$}${v}${E}${S}${_}${C}${R}${M}`;return h.length>0?this.buildSetOperations(D,h):D}buildSetOperations(e,r){let[i,...n]=r;if(!i)throw new Error("Cannot pass undefined values to any set operator");return n.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:i}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:i}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:r,isAll:i,rightSelect:n,limit:o,orderBy:s,offset:a}}){let c=j`(${e.getSQL()}) `,u=j`(${n.getSQL()})`,l;if(s&&s.length>0){let h=[];for(let p of s)if(H(p,ne))h.push(j.identifier(p.name));else if(H(p,ce)){for(let y=0;y<p.queryChunks.length;y++){let b=p.queryChunks[y];H(b,ne)&&(p.queryChunks[y]=j.identifier(b.name))}h.push(j`${p}`)}else h.push(j`${p}`);l=j` order by ${j.join(h,j`, `)} `}let f=typeof o=="object"||typeof o=="number"&&o>=0?j` limit ${o}`:void 0,d=j.raw(`${r} ${i?"all ":""}`),m=a?j` offset ${a}`:void 0;return j`${c}${d}${u}${l}${f}${m}`}buildInsertQuery({table:e,values:r,onConflict:i,returning:n,withList:o,select:s,overridingSystemValue_:a}){let c=[],u=e[oe.Symbol.Columns],l=Object.entries(u).filter(([b,N])=>!N.shouldDisableInsert()),f=l.map(([,b])=>j.identifier(this.casing.getColumnCasing(b)));if(s){let b=r;H(b,ce)?c.push(b):c.push(b.getSQL())}else{let b=r;c.push(j.raw("values "));for(let[N,T]of b.entries()){let I=[];for(let[$,v]of l){let S=T[$];if(S===void 0||H(S,Xr)&&S.value===void 0)if(v.defaultFn!==void 0){let _=v.defaultFn(),E=H(_,ce)?_:j.param(_,v);I.push(E)}else if(!v.default&&v.onUpdateFn!==void 0){let _=v.onUpdateFn(),E=H(_,ce)?_:j.param(_,v);I.push(E)}else I.push(j`default`);else I.push(S)}c.push(I),N<b.length-1&&c.push(j`, `)}}let d=this.buildWithCTE(o),m=j.join(c),h=n?j` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,p=i?j` on conflict ${i}`:void 0,y=a===!0?j`overriding system value `:void 0;return j`${d}insert into ${e} ${f} ${y}${m}${p}${h}`}buildRefreshMaterializedViewQuery({view:e,concurrently:r,withNoData:i}){let n=r?j` concurrently`:void 0,o=i?j` with no data`:void 0;return j`refresh materialized view${n} ${e}${o}`}prepareTyping(e){return H(e,If)||H(e,Tf)?"json":H(e,$f)?"decimal":H(e,Cf)?"time":H(e,Of)||H(e,Pf)?"timestamp":H(e,Ef)||H(e,_f)?"date":H(e,Rf)?"uuid":"none"}sqlToQuery(e,r){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:r})}buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:i,table:n,tableConfig:o,queryConfig:s,tableAlias:a,nestedQueryRelation:c,joinOn:u}){let l=[],f,d,m=[],h,p=[];if(s===!0)l=Object.entries(o.columns).map(([N,T])=>({dbKey:T.name,tsKey:N,field:Mi(T,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let b=Object.fromEntries(Object.entries(o.columns).map(([S,_])=>[S,Mi(_,a)]));if(s.where){let S=typeof s.where=="function"?s.where(b,m2()):s.where;h=S&&xf(S,a)}let N=[],T=[];if(s.columns){let S=!1;for(let[_,E]of Object.entries(s.columns))E!==void 0&&_ in o.columns&&(!S&&E===!0&&(S=!0),T.push(_));T.length>0&&(T=S?T.filter(_=>s.columns?.[_]===!0):Object.keys(o.columns).filter(_=>!T.includes(_)))}else T=Object.keys(o.columns);for(let S of T){let _=o.columns[S];N.push({tsKey:S,value:_})}let I=[];s.with&&(I=Object.entries(s.with).filter(S=>!!S[1]).map(([S,_])=>({tsKey:S,queryConfig:_,relation:o.relations[S]})));let $;if(s.extras){$=typeof s.extras=="function"?s.extras(b,{sql:j}):s.extras;for(let[S,_]of Object.entries($))N.push({tsKey:S,value:AT(_,a)})}for(let{tsKey:S,value:_}of N)l.push({dbKey:H(_,ce.Aliased)?_.fieldAlias:o.columns[S].name,tsKey:S,field:H(_,nt)?Mi(_,a):_,relationTableTsKey:void 0,isJson:!1,selection:[]});let v=typeof s.orderBy=="function"?s.orderBy(b,h2()):s.orderBy??[];Array.isArray(v)||(v=[v]),m=v.map(S=>H(S,nt)?Mi(S,a):xf(S,a)),f=s.limit,d=s.offset;for(let{tsKey:S,queryConfig:_,relation:E}of I){let C=y2(r,i,E),R=Ia(E.referencedTable),M=i[R],D=`${a}_${S}`,P=xt(...C.fields.map((Q,G)=>Se(Mi(C.references[G],D),Mi(Q,a)))),z=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:r,tableNamesMap:i,table:e[M],tableConfig:r[M],queryConfig:H(E,ps)?_===!0?{limit:1}:{..._,limit:1}:_,tableAlias:D,joinOn:P,nestedQueryRelation:E}),W=j`${j.identifier(D)}.${j.identifier("data")}`.as(S);p.push({on:j`true`,table:new vt(z.sql,{},D),alias:D,joinType:"left",lateral:!0}),l.push({dbKey:S,tsKey:S,field:W,relationTableTsKey:M,isJson:!0,selection:z.selection})}}if(l.length===0)throw new Sf({message:`No fields selected for table "${o.tsName}" ("${a}")`});let y;if(h=xt(u,h),c){let b=j`json_build_array(${j.join(l.map(({field:I,tsKey:$,isJson:v})=>v?j`${j.identifier(`${a}_${$}`)}.${j.identifier("data")}`:H(I,ce.Aliased)?I.sql:I),j`, `)})`;H(c,Uf)&&(b=j`coalesce(json_agg(${b}${m.length>0?j` order by ${j.join(m,j`, `)}`:void 0}), '[]'::json)`);let N=[{dbKey:"data",tsKey:"data",field:b.as("data"),isJson:!0,relationTableTsKey:o.tsName,selection:l}];f!==void 0||d!==void 0||m.length>0?(y=this.buildSelectQuery({table:vf(n,a),fields:{},fieldsFlat:[{path:[],field:j.raw("*")}],where:h,limit:f,offset:d,orderBy:m,setOperators:[]}),h=void 0,f=void 0,d=void 0,m=[]):y=vf(n,a),y=this.buildSelectQuery({table:H(y,Wt)?y:new vt(y,{},a),fields:{},fieldsFlat:N.map(({field:I})=>({path:[],field:H(I,nt)?Mi(I,a):I})),joins:p,where:h,limit:f,offset:d,orderBy:m,setOperators:[]})}else y=this.buildSelectQuery({table:vf(n,a),fields:{},fieldsFlat:l.map(({field:b})=>({path:[],field:H(b,nt)?Mi(b,a):b})),joins:p,where:h,limit:f,offset:d,orderBy:m,setOperators:[]});return{tableTsKey:o.tsName,sql:y,selection:l}}};var nb=class{static[U]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Ir=class{static[U]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let r=!!this.fields,i=e,n;return this.fields?n=this.fields:H(i,vt)?n=Object.fromEntries(Object.keys(i._.selectedFields).map(o=>[o,i[o]])):H(i,Lu)?n=i[yt].selectedFields:H(i,ce)?n={}:n=kL(i),new ib({table:i,fields:n,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},f$=class extends nb{static[U]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:r,isPartialSelect:i,session:n,dialect:o,withList:s,distinct:a}){super(),this.config={withList:s,table:e,fields:{...r},distinct:a,setOperators:[]},this.isPartialSelect=i,this.session=n,this.dialect=o,this._={selectedFields:r,config:this.config},this.tableName=vo(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{};for(let c of yi(e))this.usedTables.add(c)}getUsedTables(){return[...this.usedTables]}createJoin(e,r){return(i,n)=>{let o=this.tableName,s=vo(i);for(let a of yi(i))this.usedTables.add(a);if(typeof s=="string"&&this.config.joins?.some(a=>a.alias===s))throw new Error(`Alias "${s}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof o=="string"&&(this.config.fields={[o]:this.config.fields}),typeof s=="string"&&!H(i,ce))){let a=H(i,vt)?i._.selectedFields:H(i,jr)?i[yt].selectedFields:i[oe.Symbol.Columns];this.config.fields[s]=a}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:i,joinType:e,alias:s,lateral:r}),typeof s=="string")switch(e){case"left":{this.joinsNotNullableMap[s]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[s]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[s]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[s]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,r){return i=>{let n=typeof i=="function"?i(MF()):i;if(!Nf(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:r,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(r)?r:[r]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let r=e[0](new Proxy(this.config.fields,new Ut({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),i=Array.isArray(r)?r:[r];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=i:this.config.orderBy=i}else{let r=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,r={}){return this.config.lockingClause={strength:e,config:r},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}as(e){let r=[];if(r.push(...yi(this.config.table)),this.config.joins)for(let i of this.config.joins)r.push(...yi(i.table));return new Proxy(new vt(this.getSQL(),this.config.fields,e,!1,[...new Set(r)]),new Ut({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Ut({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=e===void 0?{config:{},enable:!0,autoInvalidate:!0}:e===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}},ib=class extends f${static[U]="PgSelect";_prepare(e){let{session:r,config:i,dialect:n,joinsNotNullableMap:o,authToken:s,cacheConfig:a,usedTables:c}=this;if(!r)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:u}=i;return Bt.startActiveSpan("drizzle.prepareQuery",()=>{let l=Ln(u),f=r.prepareQuery(n.sqlToQuery(this.getSQL()),l,e,!0,void 0,{type:"select",tables:[...c]},a);return f.joinsNotNullableMap=o,f.setToken(s)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Bt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};_L(ib,[Tr]);function zu(t,e){return(r,i,...n)=>{let o=[i,...n].map(s=>({type:t,isAll:e,rightSelect:s}));for(let s of o)if(!Nf(r.getSelectedFields(),s.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(o)}}var MF=()=>({union:BF,unionAll:qF,intersect:WF,intersectAll:FF,except:VF,exceptAll:KF}),BF=zu("union",!1),qF=zu("union",!0),WF=zu("intersect",!1),FF=zu("intersect",!0),VF=zu("except",!1),KF=zu("except",!0);var ju=class{static[U]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=H(e,gs)?e:void 0,this.dialectConfig=H(e,gs)?void 0:e}$with=(e,r)=>{let i=this;return{as:o=>(typeof o=="function"&&(o=o(i)),new Proxy(new _u(o.getSQL(),r??("getSelectedFields"in o?o.getSelectedFields()??{}:{}),e,!0),new Ut({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let r=this;function i(s){return new Ir({fields:s??void 0,session:void 0,dialect:r.getDialect(),withList:e})}function n(s){return new Ir({fields:s??void 0,session:void 0,dialect:r.getDialect(),distinct:!0})}function o(s,a){return new Ir({fields:a??void 0,session:void 0,dialect:r.getDialect(),distinct:{on:s}})}return{select:i,selectDistinct:n,selectDistinctOn:o}}select(e){return new Ir({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Ir({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,r){return new Ir({fields:r??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new gs(this.dialectConfig)),this.dialect}};function yi(t){return H(t,Wt)?[t[Ta]?`${t[Ta]}.${t[oe.Symbol.BaseName]}`:t[oe.Symbol.BaseName]]:H(t,vt)?t._.usedTables??[]:H(t,ce)?t.usedTables??[]:[]}var Ff=class extends Tr{constructor(e,r,i,n){super(),this.session=r,this.dialect=i,this.config={table:e,withList:n}}static[U]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[oe.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Ln(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return Bt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:yi(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Bt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ut({alias:Yr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Vf=class{constructor(e,r,i,n,o){this.table=e,this.session=r,this.dialect=i,this.withList=n,this.overridingSystemValue_=o}static[U]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let r=e.map(i=>{let n={},o=this.table[oe.Symbol.Columns];for(let s of Object.keys(i)){let a=i[s];n[s]=H(a,ce)?a:new Xr(a,o[s])}return n});return new ob(this.table,r,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let r=typeof e=="function"?e(new ju):e;if(!H(r,ce)&&!Nf(this.table[Uw],r._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new ob(this.table,r,this.session,this.dialect,this.withList,!0)}},ob=class extends Tr{constructor(e,r,i,n,o,s,a){super(),this.session=i,this.dialect=n,this.config={table:e,values:r,withList:o,select:s,overridingSystemValue_:a}}static[U]="PgInsert";config;cacheConfig;returning(e=this.config.table[oe.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Ln(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=j`do nothing`;else{let r="";r=Array.isArray(e.target)?e.target.map(n=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(n))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let i=e.where?j` where ${e.where}`:void 0;this.config.onConflict=j`(${j.raw(r)})${i} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let r=e.where?j` where ${e.where}`:void 0,i=e.targetWhere?j` where ${e.targetWhere}`:void 0,n=e.setWhere?j` where ${e.setWhere}`:void 0,o=this.dialect.buildUpdateSet(this.config.table,Mw(this.config.table,e.set)),s="";return s=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=j`(${j.raw(s)})${i} do update set ${o}${r}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return Bt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:yi(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Bt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ut({alias:Yr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var sb=class extends Tr{constructor(e,r,i){super(),this.session=r,this.dialect=i,this.config={view:e}}static[U]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){return Bt.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>Bt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var Kf=class{constructor(e,r,i,n){this.table=e,this.session=r,this.dialect=i,this.withList=n}static[U]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new p$(this.table,Mw(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},p$=class extends Tr{constructor(e,r,i,n,o){super(),this.session=i,this.dialect=n,this.config={set:r,table:e,withList:o,joins:[]},this.tableName=vo(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[U]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let r=e,i=vo(r);return typeof i=="string"&&(this.joinsNotNullableMap[i]=!0),this.config.from=r,this}getTableLikeFields(e){return H(e,Wt)?e[oe.Symbol.Columns]:H(e,vt)?e._.selectedFields:e[yt].selectedFields}createJoin(e){return(r,i)=>{let n=vo(r);if(typeof n=="string"&&this.config.joins.some(o=>o.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(typeof i=="function"){let o=this.config.from&&!H(this.config.from,ce)?this.getTableLikeFields(this.config.from):void 0;i=i(new Proxy(this.config.table[oe.Symbol.Columns],new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),o&&new Proxy(o,new Ut({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:i,table:r,joinType:e,alias:n}),typeof n=="string")switch(e){case"left":{this.joinsNotNullableMap[n]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[n]=!0;break}case"inner":{this.joinsNotNullableMap[n]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[n]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[oe.Symbol.Columns]),this.config.from)){let r=vo(this.config.from);if(typeof r=="string"&&this.config.from&&!H(this.config.from,ce)){let i=this.getTableLikeFields(this.config.from);e[r]=i}for(let i of this.config.joins){let n=vo(i.table);if(typeof n=="string"&&!H(i.table,ce)){let o=this.getTableLikeFields(i.table);e[n]=o}}}return this.config.returningFields=e,this.config.returning=Ln(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...r}=this.dialect.sqlToQuery(this.getSQL());return r}_prepare(e){let r=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:yi(this.config.table)},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ut({alias:Yr(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var ab=class t extends ce{constructor(e){super(t.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=t.buildCount(e.source,e.filters)}sql;token;static[U]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,r){return j`(select count(*) from ${e}${j.raw(" where ").if(r)}${r})`}static buildCount(e,r){return j`select count(*) as count from ${e}${j.raw(" where ").if(r)}${r};`}setToken(e){return this.token=e,this}then(e,r){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,r)}catch(e){return this.then(void 0,e)}finally(e){return this.then(r=>(e?.(),r),r=>{throw e?.(),r})}};var cb=class{constructor(e,r,i,n,o,s,a){this.fullSchema=e,this.schema=r,this.tableNamesMap=i,this.table=n,this.tableConfig=o,this.dialect=s,this.session=a}static[U]="PgRelationalQueryBuilder";findMany(e){return new ub(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new ub(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},ub=class extends Tr{constructor(e,r,i,n,o,s,a,c,u){super(),this.fullSchema=e,this.schema=r,this.tableNamesMap=i,this.table=n,this.tableConfig=o,this.dialect=s,this.session=a,this.config=c,this.mode=u}static[U]="PgRelationalQuery";_prepare(e){return Bt.startActiveSpan("drizzle.prepareQuery",()=>{let{query:r,builtQuery:i}=this._toSQL();return this.session.prepareQuery(i,void 0,e,!0,(n,o)=>{let s=n.map(a=>Vw(this.schema,this.tableConfig,a,r.selection,o));return this.mode==="first"?s[0]:s})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),r=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:r}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return Bt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var lb=class extends Tr{constructor(e,r,i,n){super(),this.execute=e,this.sql=r,this.query=i,this.mapBatchResult=n}static[U]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,r){return r?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Mu=class{constructor(e,r,i){if(this.dialect=e,this.session=r,this._=i?{schema:i.schema,fullSchema:i.fullSchema,tableNamesMap:i.tableNamesMap,session:r}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:r},this.query={},this._.schema)for(let[n,o]of Object.entries(this._.schema))this.query[n]=new cb(i.fullSchema,this._.schema,this._.tableNamesMap,i.fullSchema[n],o,e,r);this.$cache={invalidate:async n=>{}}}static[U]="PgDatabase";query;$with=(e,r)=>{let i=this;return{as:o=>(typeof o=="function"&&(o=o(new ju(i.dialect))),new Proxy(new _u(o.getSQL(),r??("getSelectedFields"in o?o.getSelectedFields()??{}:{}),e,!0),new Ut({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,r){return new ab({source:e,filters:r,session:this.session})}$cache;with(...e){let r=this;function i(u){return new Ir({fields:u??void 0,session:r.session,dialect:r.dialect,withList:e})}function n(u){return new Ir({fields:u??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:!0})}function o(u,l){return new Ir({fields:l??void 0,session:r.session,dialect:r.dialect,withList:e,distinct:{on:u}})}function s(u){return new Kf(u,r.session,r.dialect,e)}function a(u){return new Vf(u,r.session,r.dialect,e)}function c(u){return new Ff(u,r.session,r.dialect,e)}return{select:i,selectDistinct:n,selectDistinctOn:o,update:s,insert:a,delete:c}}select(e){return new Ir({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Ir({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,r){return new Ir({fields:r??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Kf(e,this.session,this.dialect)}insert(e){return new Vf(e,this.session,this.dialect)}delete(e){return new Ff(e,this.session,this.dialect)}refreshMaterializedView(e){return new sb(e,this.session,this.dialect)}authToken;execute(e){let r=typeof e=="string"?j.raw(e):e.getSQL(),i=this.dialect.sqlToQuery(r),n=this.session.prepareQuery(i,void 0,void 0,!1);return new lb(()=>n.execute(void 0,this.authToken),r,i,o=>n.mapResult(o,!0))}transaction(e,r){return this.session.transaction(e,r)}};var m$=class{static[U]="Cache"},Bu=class extends m${strategy(){return"all"}static[U]="NoopCache";async get(e){}async put(e,r,i,n){}async onMutate(e){}};async function h$(t,e){let r=`${t}-${JSON.stringify(e)}`,n=new TextEncoder().encode(r),o=await crypto.subtle.digest("SHA-256",n);return[...new Uint8Array(o)].map(c=>c.toString(16).padStart(2,"0")).join("")}var db=class{constructor(e,r,i,n){this.query=e,this.cache=r,this.queryMetadata=i,this.cacheConfig=n,r&&r.strategy()==="all"&&n===void 0&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,r){return e}setToken(e){return this.authToken=e,this}static[U]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,r,i){if(this.cache===void 0||H(this.cache,Bu)||this.queryMetadata===void 0)try{return await i()}catch(n){throw new bo(e,r,n)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await i()}catch(n){throw new bo(e,r,n)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[n]=await Promise.all([i(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return n}catch(n){throw new bo(e,r,n)}if(!this.cacheConfig)try{return await i()}catch(n){throw new bo(e,r,n)}if(this.queryMetadata.type==="select"){let n=await this.cache.get(this.cacheConfig.tag??await h$(e,r),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(n===void 0){let o;try{o=await i()}catch(s){throw new bo(e,r,s)}return await this.cache.put(this.cacheConfig.tag??await h$(e,r),o,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),o}return n}try{return await i()}catch(n){throw new bo(e,r,n)}}},fb=class{constructor(e){this.dialect=e}static[U]="PgSession";execute(e,r){return Bt.startActiveSpan("drizzle.operation",()=>Bt.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(r).execute(void 0,r))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,r){let i=await this.execute(e,r);return Number(i[0].count)}},pb=class extends Mu{constructor(e,r,i,n=0){super(e,r,i),this.schema=i,this.nestedIndex=n}static[U]="PgTransaction";rollback(){throw new Lw}getTransactionConfigSQL(e){let r=[];return e.isolationLevel&&r.push(`isolation level ${e.isolationLevel}`),e.accessMode&&r.push(e.accessMode),typeof e.deferrable=="boolean"&&r.push(e.deferrable?"deferrable":"not deferrable"),j.raw(r.join(" "))}setTransaction(e){return this.session.execute(j`set transaction ${this.getTransactionConfigSQL(e)}`)}};var mb={arrayMode:!1,fullResults:!0},g$={arrayMode:!0,fullResults:!0},y$=class extends db{constructor(e,r,i,n,o,s,a,c,u){super(r,n,o,s),this.client=e,this.logger=i,this.fields=a,this._isResponseInArrayMode=c,this.customResultMapper=u,this.clientQuery=e.query??e}static[U]="NeonHttpPreparedQuery";clientQuery;async execute(e={},r=this.authToken){let i=Dw(this.query.params,e);this.logger.logQuery(this.query.sql,i);let{fields:n,clientQuery:o,query:s,customResultMapper:a}=this;if(!n&&!a)return this.queryWithCache(s.sql,i,async()=>o(s.sql,i,r===void 0?mb:{...mb,authToken:r}));let c=await this.queryWithCache(s.sql,i,async()=>await o(s.sql,i,r===void 0?g$:{...g$,authToken:r}));return this.mapResult(c)}mapResult(e){if(!this.fields&&!this.customResultMapper)return e;let r=e.rows;return this.customResultMapper?this.customResultMapper(r):r.map(i=>EL(this.fields,i,this.joinsNotNullableMap))}all(e={}){let r=Dw(this.query.params,e);return this.logger.logQuery(this.query.sql,r),this.clientQuery(this.query.sql,r,this.authToken===void 0?mb:{...mb,authToken:this.authToken}).then(i=>i.rows)}values(e={},r){let i=Dw(this.query.params,e);return this.logger.logQuery(this.query.sql,i),this.clientQuery(this.query.sql,i,{arrayMode:!0,fullResults:!0,authToken:r}).then(n=>n.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},hb=class extends fb{constructor(e,r,i,n={}){super(r),this.client=e,this.schema=i,this.options=n,this.clientQuery=e.query??e,this.logger=n.logger??new jw,this.cache=n.cache??new Bu}static[U]="NeonHttpSession";clientQuery;logger;cache;prepareQuery(e,r,i,n,o,s,a){return new y$(this.client,e,this.logger,this.cache,s,a,r,n,o)}async batch(e){let r=[],i=[];for(let o of e){let s=o._prepare(),a=s.getQuery();r.push(s),i.push(this.clientQuery(a.sql,a.params,{fullResults:!0,arrayMode:s.isResponseInArrayMode()}))}return(await this.client.transaction(i,g$)).map((o,s)=>r[s].mapResult(o,!0))}async query(e,r){return this.logger.logQuery(e,r),await this.clientQuery(e,r,{arrayMode:!0,fullResults:!0})}async queryObjects(e,r){return this.clientQuery(e,r,{arrayMode:!1,fullResults:!0})}async count(e,r){let i=await this.execute(e,r);return Number(i.rows[0].count)}async transaction(e,r={}){throw new Error("No transactions support in neon-http driver")}},wz=class extends pb{static[U]="NeonHttpTransaction";async transaction(e){throw new Error("No transactions support in neon-http driver")}};var w$=class{constructor(e,r,i={}){this.client=e,this.dialect=r,this.options=i,this.initMappers()}static[U]="NeonHttpDriver";createSession(e){return new hb(this.client,this.dialect,e,{logger:this.options.logger,cache:this.options.cache})}initMappers(){rn.setTypeParser(rn.builtins.TIMESTAMPTZ,e=>e),rn.setTypeParser(rn.builtins.TIMESTAMP,e=>e),rn.setTypeParser(rn.builtins.DATE,e=>e),rn.setTypeParser(rn.builtins.INTERVAL,e=>e),rn.setTypeParser(1231,e=>e),rn.setTypeParser(1115,e=>e),rn.setTypeParser(1185,e=>e),rn.setTypeParser(1187,e=>e),rn.setTypeParser(1182,e=>e)}};function gb(t,e,r,i){return new Proxy(t,{get(n,o){let s=n[o];return typeof s!="function"&&(typeof s!="object"||s===null)?s:i?gb(s,e,r):o==="query"?gb(s,e,r,!0):new Proxy(s,{apply(a,c,u){let l=a.call(c,...u);return typeof l=="object"&&l!==null&&"setToken"in l&&typeof l.setToken=="function"&&l.setToken(e),r(a,o,l)}})}})}var b$=class extends Mu{static[U]="NeonHttpDatabase";$withAuth(e){return this.authToken=e,gb(this,e,(r,i,n)=>i==="with"?gb(n,e,(o,s,a)=>a):n)}async batch(e){return this.session.batch(e)}};function qu(t,e={}){let r=new gs({casing:e.casing}),i;e.logger===!0?i=new zw:e.logger!==!1&&(i=e.logger);let n;if(e.schema){let c=g2(e.schema,w2);n={fullSchema:e.schema,schema:c.tables,tableNamesMap:c.tableNamesMap}}let s=new w$(t,r,{logger:i,cache:e.cache}).createSession(n),a=new b$(r,s,n);return a.$client=t,a.$cache=e.cache,a.$cache&&(a.$cache.invalidate=e.cache?.onMutate),a}function yb(...t){if(typeof t[0]=="string"){let e=hs(t[0]);return qu(e,t[1])}if(TL(t[0])){let{connection:e,client:r,...i}=t[0];if(r)return qu(r,i);if(typeof e=="object"){let{connectionString:o,...s}=e,a=hs(o,s);return qu(a,i)}let n=hs(e);return qu(n,i)}return qu(t[0],t[1])}(t=>{function e(r){return qu({},r)}t.mock=e})(yb||(yb={}));var wb={};ar(wb,{accounts:()=>Qt,accountsRelations:()=>QF,documents:()=>at,documentsRelations:()=>GF,folders:()=>Xe,foldersRelations:()=>ZF,sessions:()=>Wu,sessionsRelations:()=>JF,userSessionState:()=>qi,userSessionStateRelations:()=>XF,userSettings:()=>Mn,userSettingsRelations:()=>YF,users:()=>Dt,usersRelations:()=>HF,verifications:()=>v$});var Dt=So("users",{id:Ue("id").primaryKey(),name:Ue("name").notNull(),email:Ue("email").notNull().unique(),emailVerified:Af("email_verified").notNull().default(!1),image:Ue("image"),createdAt:It("created_at").notNull().defaultNow(),updatedAt:It("updated_at").notNull().defaultNow()}),Wu=So("sessions",{id:Ue("id").primaryKey(),userId:Ue("user_id").notNull().references(()=>Dt.id,{onDelete:"cascade"}),token:Ue("token").notNull().unique(),expiresAt:It("expires_at").notNull(),ipAddress:Ue("ip_address"),userAgent:Ue("user_agent"),createdAt:It("created_at").notNull().defaultNow(),updatedAt:It("updated_at").notNull().defaultNow()},t=>[gi("sessions_user_id_idx").on(t.userId),gi("sessions_token_idx").on(t.token)]),Qt=So("accounts",{id:Ue("id").primaryKey(),userId:Ue("user_id").notNull().references(()=>Dt.id,{onDelete:"cascade"}),accountId:Ue("account_id").notNull(),providerId:Ue("provider_id").notNull(),accessToken:Ue("access_token"),refreshToken:Ue("refresh_token"),accessTokenExpiresAt:It("access_token_expires_at"),refreshTokenExpiresAt:It("refresh_token_expires_at"),scope:Ue("scope"),idToken:Ue("id_token"),createdAt:It("created_at").notNull().defaultNow(),updatedAt:It("updated_at").notNull().defaultNow()},t=>[gi("accounts_user_id_idx").on(t.userId),gi("accounts_provider_idx").on(t.providerId,t.accountId)]),v$=So("verifications",{id:Ue("id").primaryKey(),identifier:Ue("identifier").notNull(),value:Ue("value").notNull(),expiresAt:It("expires_at").notNull(),createdAt:It("created_at").notNull().defaultNow(),updatedAt:It("updated_at").notNull().defaultNow()},t=>[gi("verifications_identifier_idx").on(t.identifier)]),Xe=So("folders",{id:Ue("id").primaryKey(),userId:Ue("user_id").notNull().references(()=>Dt.id,{onDelete:"cascade"}),name:Ue("name").notNull(),parentId:Ue("parent_id"),color:Ue("color"),sortOrder:kf("sort_order").notNull().default(0),createdAt:It("created_at").notNull().defaultNow(),updatedAt:It("updated_at").notNull().defaultNow(),deletedAt:It("deleted_at")},t=>[gi("folders_user_id_idx").on(t.userId),gi("folders_parent_id_idx").on(t.parentId)]),at=So("documents",{id:Ue("id").primaryKey(),userId:Ue("user_id").notNull().references(()=>Dt.id,{onDelete:"cascade"}),name:Ue("name").notNull(),content:Ue("content").notNull().default(""),folderId:Ue("folder_id").references(()=>Xe.id,{onDelete:"set null"}),isManuallyNamed:Af("is_manually_named").notNull().default(!1),cursor:Ca("cursor").$type(),scroll:Ca("scroll").$type(),syncVersion:kf("sync_version").notNull().default(1),createdAt:It("created_at").notNull().defaultNow(),updatedAt:It("updated_at").notNull().defaultNow(),syncedAt:It("synced_at"),deletedAt:It("deleted_at")},t=>[gi("documents_user_id_idx").on(t.userId),gi("documents_folder_id_idx").on(t.folderId),gi("documents_updated_at_idx").on(t.updatedAt)]),Mn=So("user_settings",{id:Ue("id").primaryKey(),userId:Ue("user_id").notNull().unique().references(()=>Dt.id,{onDelete:"cascade"}),settings:Ca("settings").$type().notNull().default({}),updatedAt:It("updated_at").notNull().defaultNow()}),qi=So("user_session_state",{id:Ue("id").primaryKey(),userId:Ue("user_id").notNull().unique().references(()=>Dt.id,{onDelete:"cascade"}),openDocumentIds:Ca("open_document_ids").$type().notNull().default([]),activeDocumentId:Ue("active_document_id"),updatedAt:It("updated_at").notNull().defaultNow()}),HF=ms(Dt,({many:t,one:e})=>({sessions:t(Wu),accounts:t(Qt),folders:t(Xe),documents:t(at),settings:e(Mn),sessionState:e(qi)})),JF=ms(Wu,({one:t})=>({user:t(Dt,{fields:[Wu.userId],references:[Dt.id]})})),QF=ms(Qt,({one:t})=>({user:t(Dt,{fields:[Qt.userId],references:[Dt.id]})})),ZF=ms(Xe,({one:t,many:e})=>({user:t(Dt,{fields:[Xe.userId],references:[Dt.id]}),parent:t(Xe,{fields:[Xe.parentId],references:[Xe.id],relationName:"folderHierarchy"}),children:e(Xe,{relationName:"folderHierarchy"}),documents:e(at)})),GF=ms(at,({one:t})=>({user:t(Dt,{fields:[at.userId],references:[Dt.id]}),folder:t(Xe,{fields:[at.folderId],references:[Xe.id]})})),YF=ms(Mn,({one:t})=>({user:t(Dt,{fields:[Mn.userId],references:[Dt.id]})})),XF=ms(qi,({one:t})=>({user:t(Dt,{fields:[qi.userId],references:[Dt.id]})}));var bz=process.env.DATABASE_URL;if(!bz)throw new Error("DATABASE_URL environment variable is required");var e5=hs(bz),Ke=yb(e5,{schema:wb});function t5(){return process.env.BETTER_AUTH_URL?process.env.BETTER_AUTH_URL:process.env.NEXT_PUBLIC_APP_URL?process.env.NEXT_PUBLIC_APP_URL:process.env.VERCEL?"https://qazuor-markview.vercel.app":"http://localhost:5173"}var r5=t5(),x$=cT({database:JI(Ke,{provider:"pg",schema:{user:Dt,session:Wu,account:Qt,verification:v$}}),emailAndPassword:{enabled:!1},socialProviders:{github:{clientId:process.env.GITHUB_CLIENT_ID||"",clientSecret:process.env.GITHUB_CLIENT_SECRET||"",scope:["user:email","repo"]},google:{clientId:process.env.GOOGLE_CLIENT_ID||"",clientSecret:process.env.GOOGLE_CLIENT_SECRET||"",scope:["openid","email","profile","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.metadata.readonly"],accessType:"offline",prompt:"consent"}},session:{expiresIn:3600*24*7,updateAge:3600*24,cookieCache:{enabled:!0,maxAge:300}},account:{accountLinking:{enabled:!0,trustedProviders:["github","google"]}},baseURL:r5,secret:process.env.BETTER_AUTH_SECRET,trustedOrigins:["http://localhost:5173","http://localhost:3000","https://qazuor-markview.vercel.app",process.env.NEXT_PUBLIC_APP_URL||""].filter(Boolean),advanced:{cookiePrefix:"markview",useSecureCookies:!0,defaultCookieAttributes:{sameSite:"lax",secure:!0,httpOnly:!0,path:"/"}}});var S$={consoleLog:!1,jsonFormat:!0};function n5(t){let e=t.req.header("x-forwarded-for");if(e){let n=e.split(",")[0];return n?n.trim():null}let r=t.req.header("x-real-ip");if(r)return r;let i=t.req.header("cf-connecting-ip");return i||null}function i5(t){return t.req.header("user-agent")||null}function o5(t){if(S$.jsonFormat)return JSON.stringify(t);let e=t.success?"\u2713":"\u2717",r=t.userId?`user:${t.userId}`:"anonymous",i=Object.keys(t.metadata).length>0?` | ${JSON.stringify(t.metadata)}`:"",n=t.error?` | error: ${t.error}`:"";return`[AUDIT] ${t.timestamp} ${e} ${t.event} | ${r} | ip:${t.ip||"unknown"}${i}${n}`}function gr(t,e={}){let{c:r,userId:i=null,success:n=!0,error:o,metadata:s={}}=e,a={timestamp:new Date().toISOString(),event:t,userId:i||r&&r.get("user")?.id||null,ip:r?n5(r):null,userAgent:r?i5(r):null,metadata:s,success:n,error:o};if(S$.consoleLog||S$.jsonFormat){let c=o5(a);n?console.log(c):console.warn(c)}return a}var N$={loginSuccess:(t,e)=>gr("auth.login",{c:t,metadata:{provider:e}}),loginFailed:(t,e,r)=>gr("auth.login.failed",{c:t,success:!1,error:r,metadata:{provider:e}}),logout:t=>gr("auth.logout",{c:t}),tokenRefresh:(t,e)=>gr("auth.token.refresh",{c:t,metadata:{provider:e}}),rateLimited:(t,e)=>gr("security.rate_limited",{c:t,success:!1,metadata:{endpoint:e}}),unauthorized:(t,e)=>gr("security.unauthorized",{c:t,success:!1,metadata:{endpoint:e}}),forbidden:(t,e,r)=>gr("security.forbidden",{c:t,success:!1,metadata:{endpoint:e,reason:r}}),documentCreated:(t,e)=>gr("document.created",{c:t,metadata:{documentId:e}}),documentUpdated:(t,e)=>gr("document.updated",{c:t,metadata:{documentId:e}}),documentDeleted:(t,e)=>gr("document.deleted",{c:t,metadata:{documentId:e}}),settingsUpdated:t=>gr("user.settings.updated",{c:t}),githubFileCreated:(t,e,r)=>gr("github.file.created",{c:t,metadata:{repo:e,path:r}}),githubFileUpdated:(t,e,r)=>gr("github.file.updated",{c:t,metadata:{repo:e,path:r}}),githubFileDeleted:(t,e,r)=>gr("github.file.deleted",{c:t,metadata:{repo:e,path:r}}),googleFileCreated:(t,e,r)=>gr("google.file.created",{c:t,metadata:{fileId:e,name:r}}),googleFileUpdated:(t,e,r)=>gr("google.file.updated",{c:t,metadata:{fileId:e,name:r}}),googleFileDeleted:(t,e,r)=>gr("google.file.deleted",{c:t,metadata:{fileId:e,name:r}})};var vb=new Map,s5=60*1e3,bb=null;function a5(){bb||(bb=setInterval(()=>{let t=Date.now();for(let[e,r]of vb.entries())r.resetAt<t&&vb.delete(e)},s5),typeof bb.unref=="function"&&bb.unref())}function c5(t){let e=t.req.header("x-forwarded-for");if(e){let n=e.split(",")[0];return n?n.trim():"unknown"}let r=t.req.header("x-real-ip");if(r)return r;let i=t.req.header("cf-connecting-ip");return i||"unknown"}var u5={standard:{limit:100,windowSeconds:60},auth:{limit:10,windowSeconds:60},sync:{limit:60,windowSeconds:60},externalProxy:{limit:30,windowSeconds:60},heavy:{limit:10,windowSeconds:60}};function l5(t){let{limit:e,windowSeconds:r,keyGenerator:i,skipAuthenticated:n=!1}=t;return a5(),async(o,s)=>{if(n&&o.get("user"))return s();let a=i?i(o):`ip:${c5(o)}:${o.req.path}`,c=Date.now(),u=r*1e3,l=vb.get(a);!l||l.resetAt<c?(l={count:1,resetAt:c+u},vb.set(a,l)):l.count++;let f=Math.max(0,e-l.count),d=Math.ceil((l.resetAt-c)/1e3);return o.header("X-RateLimit-Limit",e.toString()),o.header("X-RateLimit-Remaining",f.toString()),o.header("X-RateLimit-Reset",Math.ceil(l.resetAt/1e3).toString()),l.count>e?(o.header("Retry-After",d.toString()),o.json({error:"Too Many Requests",message:`Rate limit exceeded. Try again in ${d} seconds.`,retryAfter:d},429)):s()}}function Fu(t,e){let r=u5[t];return l5({...r,...e})}var d5=/^[\w!#$%&'*.^`|~+-]+$/,f5=/^[ !#-:<-[\]-~]*$/,A$=(t,e)=>{if(e&&t.indexOf(e)===-1)return{};let r=t.trim().split(";"),i={};for(let n of r){n=n.trim();let o=n.indexOf("=");if(o===-1)continue;let s=n.substring(0,o).trim();if(e&&e!==s||!d5.test(s))continue;let a=n.substring(o+1).trim();if(a.startsWith('"')&&a.endsWith('"')&&(a=a.slice(1,-1)),f5.test(a)&&(i[s]=a.indexOf("%")!==-1?La(a,Ku):a,e))break}return i};var vz=(t,e,r)=>{let i=t.req.raw.headers.get("Cookie");if(typeof e=="string"){if(!i)return;let o=e;return r==="secure"?o="__Secure-"+e:r==="host"&&(o="__Host-"+e),A$(i,o)[o]}return i?A$(i):{}};var xz=(t,e)=>new Response(t,{headers:{"Content-Type":e}}).formData();var p5=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,m5=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,h5=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,E$=(t,e)=>async(r,i)=>{let n={},o=r.req.header("Content-Type");switch(t){case"json":if(!o||!p5.test(o))break;try{n=await r.req.json()}catch{let a="Malformed JSON in request body";throw new Ao(400,{message:a})}break;case"form":{if(!o||!(m5.test(o)||h5.test(o)))break;let a;if(r.req.bodyCache.formData)a=await r.req.bodyCache.formData;else try{let u=await r.req.arrayBuffer();a=await xz(u,o),r.req.bodyCache.formData=a}catch(u){let l="Malformed FormData request.";throw l+=u instanceof Error?` ${u.message}`:` ${String(u)}`,new Ao(400,{message:l})}let c={};a.forEach((u,l)=>{l.endsWith("[]")?(c[l]??=[]).push(u):Array.isArray(c[l])?c[l].push(u):l in c?c[l]=[c[l],u]:c[l]=u}),n=c;break}case"query":n=Object.fromEntries(Object.entries(r.req.queries()).map(([a,c])=>c.length===1?[a,c[0]]:[a,c]));break;case"param":n=r.req.param();break;case"header":n=r.req.header();break;case"cookie":n=vz(r);break}let s=await e(n,r);return s instanceof Response?s:(r.req.addValidatedData(t,s),await i())};function g5(t,e,r,i){return E$(t,async(n,o)=>{let s=n;if(t==="header"&&"_def"in e||t==="header"&&"_zod"in e){let c=Object.keys("in"in e?e.in.shape:e.shape),u=Object.fromEntries(c.map(l=>[l.toLowerCase(),l]));s=Object.fromEntries(Object.entries(n).map(([l,f])=>[u[l]||l,f]))}let a=i&&i.validationFunction?await i.validationFunction(e,s):await e.safeParseAsync(s);if(r){let c=await r({data:s,...a,target:t},o);if(c){if(c instanceof Response)return c;if("response"in c)return c.response}}return a.success?a.data:o.json(a,400)})}var vn=g5;function ct(t){let e=t.get("user");if(!e)throw new Ao(401,{message:"Authentication required"});return e}var Hf=new sn,y5=pe.object({endpoint:pe.string(),method:pe.enum(["GET","POST","PUT","PATCH","DELETE"]).default("GET"),body:pe.unknown().optional()}),w5=pe.object({repo:pe.string(),path:pe.string(),content:pe.string(),message:pe.string().min(1),sha:pe.string().optional(),branch:pe.string().optional()});async function _$(t){return(await Ke.query.accounts.findFirst({where:xt(Se(Qt.userId,t),Se(Qt.providerId,"github"))}))?.accessToken||null}Hf.post("/proxy",vn("json",y5),async t=>{let e=ct(t),{endpoint:r,method:i,body:n}=t.req.valid("json"),o=await _$(e.id);if(!o)return t.json({error:"GitHub not connected"},401);let s=r.startsWith("https://")?r:`https://api.github.com${r}`;try{let a=await fetch(s,{method:i,headers:{Authorization:`Bearer ${o}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:n?JSON.stringify(n):void 0}),c=await a.json(),u={limit:a.headers.get("x-ratelimit-limit"),remaining:a.headers.get("x-ratelimit-remaining"),reset:a.headers.get("x-ratelimit-reset")};return a.ok?t.json({data:c,rateLimit:u}):t.json({error:c.message||"GitHub API error",status:a.status,rateLimit:u},a.status)}catch(a){return console.error("GitHub proxy error:",a),t.json({error:"Failed to connect to GitHub"},500)}});Hf.post("/commit",vn("json",w5),async t=>{let e=ct(t),{repo:r,path:i,content:n,message:o,sha:s,branch:a}=t.req.valid("json"),c=await _$(e.id);if(!c)return t.json({error:"GitHub not connected"},401);let u=a;u||(u=(await(await fetch(`https://api.github.com/repos/${r}`,{headers:{Authorization:`Bearer ${c}`,Accept:"application/vnd.github+json"}})).json()).default_branch);let l=`https://api.github.com/repos/${r}/contents/${i}`,f={message:o,content:Buffer.from(n).toString("base64"),branch:u||"main"};s&&(f.sha=s);try{let d=await fetch(l,{method:"PUT",headers:{Authorization:`Bearer ${c}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:JSON.stringify(f)}),m=await d.json();return d.ok?t.json({success:!0,sha:m.content?.sha,commit:{sha:m.commit?.sha,url:m.commit?.html_url}}):d.status===409?t.json({error:"Conflict",message:"File has been modified on GitHub. Please refresh and try again.",details:m},409):t.json({error:m.message||"Failed to commit",status:d.status},d.status)}catch(d){return console.error("GitHub commit error:",d),t.json({error:"Failed to commit to GitHub"},500)}});Hf.delete("/file",vn("json",pe.object({repo:pe.string(),path:pe.string(),message:pe.string(),sha:pe.string(),branch:pe.string().optional()})),async t=>{let e=ct(t),{repo:r,path:i,message:n,sha:o,branch:s}=t.req.valid("json"),a=await _$(e.id);if(!a)return t.json({error:"GitHub not connected"},401);let c=`https://api.github.com/repos/${r}/contents/${i}`;try{let u=await fetch(c,{method:"DELETE",headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:JSON.stringify({message:n,sha:o,branch:s||"main"})});if(!u.ok){let l=await u.json();return t.json({error:l.message||"Failed to delete",status:u.status},u.status)}return t.json({success:!0})}catch(u){return console.error("GitHub delete error:",u),t.json({error:"Failed to delete from GitHub"},500)}});Hf.get("/connection",async t=>{let e=ct(t),r=await Ke.query.accounts.findFirst({where:xt(Se(Qt.userId,e.id),Se(Qt.providerId,"github"))});if(!r||!r.accessToken)return t.json({connected:!1});try{let i=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${r.accessToken}`,Accept:"application/vnd.github+json"}});if(!i.ok)return t.json({connected:!1,error:"Token expired"});let n=await i.json();return t.json({connected:!0,user:{login:n.login,name:n.name,avatar:n.avatar_url}})}catch{return t.json({connected:!1,error:"Failed to verify"})}});var Sz=Hf;var Jf=new sn,b5=pe.object({endpoint:pe.string(),method:pe.enum(["GET","POST","PUT","PATCH","DELETE"]).default("GET"),body:pe.unknown().optional(),isUpload:pe.boolean().optional()}),v5=pe.object({operation:pe.enum(["create","update","delete","rename","move"]),fileId:pe.string().optional(),name:pe.string().optional(),content:pe.string().optional(),parentId:pe.string().optional(),mimeType:pe.string().optional()});async function xb(t){let e=await Ke.query.accounts.findFirst({where:xt(Se(Qt.userId,t),Se(Qt.providerId,"google"))});return e?.accessToken?e.accessTokenExpiresAt&&new Date(e.accessTokenExpiresAt)<new Date?e.refreshToken?await x5(t,e.refreshToken):null:e.accessToken:null}async function x5(t,e){try{let r=await fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:process.env.GOOGLE_CLIENT_ID||"",client_secret:process.env.GOOGLE_CLIENT_SECRET||"",refresh_token:e,grant_type:"refresh_token"})});if(!r.ok)return console.error("Failed to refresh Google token"),null;let i=await r.json();return await Ke.update(Qt).set({accessToken:i.access_token,accessTokenExpiresAt:new Date(Date.now()+i.expires_in*1e3),updatedAt:new Date}).where(xt(Se(Qt.userId,t),Se(Qt.providerId,"google"))),i.access_token}catch(r){return console.error("Error refreshing Google token:",r),null}}Jf.post("/proxy",vn("json",b5),async t=>{let e=ct(t),{endpoint:r,method:i,body:n}=t.req.valid("json"),o=await xb(e.id);if(!o)return t.json({error:"Google Drive not connected"},401);let s=r.startsWith("https://")?r:`https://www.googleapis.com${r}`;try{let a=await fetch(s,{method:i,headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:n?JSON.stringify(n):void 0});if(r.includes("alt=media")){let u=await a.text();return t.json({content:u})}let c=await a.json();return a.ok?t.json({data:c}):t.json({error:c.error?.message||"Google API error",status:a.status},a.status)}catch(a){return console.error("Google proxy error:",a),t.json({error:"Failed to connect to Google"},500)}});Jf.post("/files",vn("json",v5),async t=>{let e=ct(t),{operation:r,fileId:i,name:n,content:o,parentId:s,mimeType:a}=t.req.valid("json"),c=await xb(e.id);if(!c)return t.json({error:"Google Drive not connected"},401);try{let u,l;switch(r){case"create":{let f={name:n||"Untitled.md",mimeType:a||"text/markdown",parents:s?[s]:void 0},d="-------314159265358979323846",m=`\r
--${d}\r
`,h=`\r
--${d}--`,p=`${m}Content-Type: application/json; charset=UTF-8\r
\r
${JSON.stringify(f)}${m}Content-Type: text/markdown\r
\r
${o||""}${h}`;u=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,name,mimeType,modifiedTime",{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":`multipart/related; boundary="${d}"`},body:p});break}case"update":{if(!i)return t.json({error:"fileId required for update"},400);u=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${i}?uploadType=media&fields=id,name,modifiedTime`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"text/markdown"},body:o||""});break}case"delete":{if(!i)return t.json({error:"fileId required for delete"},400);u=await fetch(`https://www.googleapis.com/drive/v3/files/${i}`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({trashed:!0})});break}case"rename":{if(!i||!n)return t.json({error:"fileId and name required for rename"},400);u=await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=id,name,modifiedTime`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({name:n})});break}case"move":{if(!i||!s)return t.json({error:"fileId and parentId required for move"},400);let m=((await(await fetch(`https://www.googleapis.com/drive/v3/files/${i}?fields=parents`,{headers:{Authorization:`Bearer ${c}`}})).json()).parents||[]).join(",");u=await fetch(`https://www.googleapis.com/drive/v3/files/${i}?addParents=${s}&removeParents=${m}&fields=id,name,parents`,{method:"PATCH",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});break}default:return t.json({error:"Invalid operation"},400)}return l=await u.json(),u.ok?t.json({success:!0,file:l}):t.json({error:l.error?.message||"Operation failed",status:u.status},u.status)}catch(u){return console.error("Google file operation error:",u),t.json({error:"File operation failed"},500)}});Jf.get("/quota",async t=>{let e=ct(t),r=await xb(e.id);if(!r)return t.json({error:"Google Drive not connected"},401);try{let i=await fetch("https://www.googleapis.com/drive/v3/about?fields=storageQuota",{headers:{Authorization:`Bearer ${r}`}});if(!i.ok)return t.json({error:"Failed to get quota"},i.status);let o=(await i.json()).storageQuota;return t.json({used:Number.parseInt(o.usage||"0"),limit:Number.parseInt(o.limit||"0"),usedInDrive:Number.parseInt(o.usageInDrive||"0"),usedInTrash:Number.parseInt(o.usageInDriveTrash||"0")})}catch(i){return console.error("Google quota error:",i),t.json({error:"Failed to get quota"},500)}});Jf.get("/connection",async t=>{let e=ct(t);if(!(await Ke.query.accounts.findFirst({where:xt(Se(Qt.userId,e.id),Se(Qt.providerId,"google"))}))?.accessToken)return t.json({connected:!1});try{let i=await xb(e.id);if(!i)return t.json({connected:!1,error:"Token expired"});let n=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${i}`}});if(!n.ok)return t.json({connected:!1,error:"Token invalid"});let o=await n.json();return t.json({connected:!0,user:{email:o.email,name:o.name,picture:o.picture}})}catch{return t.json({connected:!1,error:"Failed to verify"})}});var Nz=Jf;var k$=class{writer;encoder;writable;abortSubscribers=[];responseReadable;aborted=!1;closed=!1;constructor(t,e){this.writable=t,this.writer=t.getWriter(),this.encoder=new TextEncoder;let r=e.getReader();this.abortSubscribers.push(async()=>{await r.cancel()}),this.responseReadable=new ReadableStream({async pull(i){let{done:n,value:o}=await r.read();n?i.close():i.enqueue(o)},cancel:()=>{this.abort()}})}async write(t){try{typeof t=="string"&&(t=this.encoder.encode(t)),await this.writer.write(t)}catch{}return this}async writeln(t){return await this.write(t+`
`),this}sleep(t){return new Promise(e=>setTimeout(e,t))}async close(){try{await this.writer.close()}catch{}this.closed=!0}async pipe(t){this.writer.releaseLock(),await t.pipeTo(this.writable,{preventClose:!0}),this.writer=this.writable.getWriter()}onAbort(t){this.abortSubscribers.push(t)}abort(){this.aborted||(this.aborted=!0,this.abortSubscribers.forEach(t=>t()))}};var Sb=()=>{let t=typeof Bun<"u"?Bun.version:void 0;if(t===void 0)return!1;let e=t.startsWith("1.1")||t.startsWith("1.0")||t.startsWith("0.");return Sb=()=>e,e};var Az=class extends k${constructor(t,e){super(t,e)}async writeSSE(t){let r=(await Hu(t.data,tp.Stringify,!1,{})).split(`
`).map(n=>`data: ${n}`).join(`
`),i=[t.event&&`event: ${t.event}`,r,t.id&&`id: ${t.id}`,t.retry&&`retry: ${t.retry}`].filter(Boolean).join(`
`)+`

`;await this.write(i)}},S5=async(t,e,r)=>{try{await e(t)}catch(i){i instanceof Error&&r?(await r(i,t),await t.writeSSE({event:"error",data:i.message})):console.error(i)}finally{t.close()}},N5=new WeakMap,T$=(t,e,r)=>{let{readable:i,writable:n}=new TransformStream,o=new Az(n,i);return Sb()&&t.req.raw.signal.addEventListener("abort",()=>{o.closed||o.abort()}),N5.set(o.responseReadable,t),t.header("Transfer-Encoding","chunked"),t.header("Content-Type","text/event-stream"),t.header("Cache-Control","no-cache"),t.header("Connection","keep-alive"),S5(o,e,r),t.newResponse(o.responseReadable)};var I$=class{connections=new Map;connectionById=new Map;cleanupInterval=null;constructor(){this.startCleanup()}addConnection(e,r,i){let n=crypto.randomUUID(),o={id:n,userId:e,deviceId:r,stream:i,lastHeartbeat:Date.now(),createdAt:Date.now()};return this.connections.has(e)||this.connections.set(e,new Set),this.connections.get(e).add(o),this.connectionById.set(n,o),console.log(`[SSE] Connection added: ${n} for user ${e} (device: ${r})`),n}removeConnection(e){let r=this.connectionById.get(e);if(!r)return;let i=this.connections.get(r.userId);i&&(i.delete(r),i.size===0&&this.connections.delete(r.userId)),this.connectionById.delete(e),console.log(`[SSE] Connection removed: ${e} for user ${r.userId}`)}getConnectionsForUser(e){let r=this.connections.get(e);return r?Array.from(r):[]}getConnection(e){return this.connectionById.get(e)}updateHeartbeat(e){let r=this.connectionById.get(e);r&&(r.lastHeartbeat=Date.now())}async broadcast(e,r,i,n){let o=this.connections.get(e);if(!o||o.size===0)return;let s=JSON.stringify({...i,originDeviceId:n}),a=[];for(let c of o)if(!(n&&c.deviceId===n))try{await c.stream.writeSSE({event:r,data:s})}catch(u){console.error(`[SSE] Failed to send to connection ${c.id}:`,u),a.push(c)}for(let c of a)this.removeConnection(c.id)}async sendHeartbeats(){let e=[];for(let[,r]of this.connections)for(let i of r)try{await i.stream.writeSSE({event:"heartbeat",data:JSON.stringify({timestamp:Date.now()})}),i.lastHeartbeat=Date.now()}catch(n){console.error(`[SSE] Heartbeat failed for connection ${i.id}:`,n),e.push(i)}for(let r of e)this.removeConnection(r.id)}startCleanup(){this.cleanupInterval=setInterval(()=>{this.cleanup()},6e4)}cleanup(){let e=Date.now(),r=9e4,i=[];for(let[,n]of this.connections)for(let o of n)e-o.lastHeartbeat>r&&i.push(o);for(let n of i)console.log(`[SSE] Cleaning up stale connection ${n.id}`),this.removeConnection(n.id);i.length>0&&console.log(`[SSE] Cleaned up ${i.length} stale connections`)}stop(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null)}getStats(){let e=0;for(let[,r]of this.connections)e+=r.size;return{totalConnections:e,totalUsers:this.connections.size}}},nn=new I$;var $$=new sn;$$.get("/",async t=>{let e=ct(t),r=t.req.query("deviceId");return r?(t.header("Content-Type","text/event-stream"),t.header("Cache-Control","no-cache"),t.header("Connection","keep-alive"),t.header("X-Accel-Buffering","no"),T$(t,async i=>{let n=nn.addConnection(e.id,r,i);await i.writeSSE({event:"connected",data:JSON.stringify({connectionId:n,deviceId:r,userId:e.id})});let o=setInterval(async()=>{try{await i.writeSSE({event:"heartbeat",data:JSON.stringify({timestamp:Date.now()})}),nn.updateHeartbeat(n)}catch{clearInterval(o)}},3e4);i.onAbort(()=>{clearInterval(o),nn.removeConnection(n),console.log(`[SSE] Client disconnected: ${n}`)})})):t.json({error:"deviceId query parameter is required"},400)});$$.get("/stats",t=>{let e=ct(t),r=nn.getStats(),i=nn.getConnectionsForUser(e.id);return t.json({global:r,user:{connections:i.length,devices:i.map(n=>({deviceId:n.deviceId,connectedAt:new Date(n.createdAt).toISOString(),lastHeartbeat:new Date(n.lastHeartbeat).toISOString()}))}})});var Ez=$$;var Wi=new sn,E5=pe.object({id:pe.string(),name:pe.string().min(1),content:pe.string(),folderId:pe.string().nullable().optional(),isManuallyNamed:pe.boolean().optional(),cursor:pe.object({line:pe.number(),column:pe.number()}).nullable().optional(),scroll:pe.object({line:pe.number(),percentage:pe.number()}).nullable().optional(),syncVersion:pe.number().optional()}),_5=pe.object({id:pe.string(),name:pe.string().min(1),parentId:pe.string().nullable().optional(),color:pe.string().nullable().optional(),sortOrder:pe.number().optional()}),k5=pe.object({openDocumentIds:pe.array(pe.string()),activeDocumentId:pe.string().nullable()});Wi.get("/documents",async t=>{let e=ct(t),r=t.req.query("since"),i=r?new Date(r):null,o=await Ke.query.documents.findMany({where:xt(Se(at.userId,e.id),i?Oa(mi(at.updatedAt,i),at.deletedAt?mi(at.deletedAt,i):void 0):void 0),orderBy:(s,{desc:a})=>[a(s.updatedAt)]});return t.json({documents:o,syncedAt:new Date().toISOString()})});Wi.put("/documents/:id",vn("json",E5),async t=>{let e=ct(t),r=t.req.param("id"),i=t.req.valid("json"),n=t.req.header("X-Device-Id"),o=await Ke.query.documents.findFirst({where:xt(Se(at.id,r),Se(at.userId,e.id))});if(o){if(i.syncVersion&&o.syncVersion>i.syncVersion)return t.json({error:"Conflict",message:"Document has been modified on server",serverVersion:o.syncVersion,serverDocument:o},409);let[a]=await Ke.update(at).set({name:i.name,content:i.content,folderId:i.folderId,isManuallyNamed:i.isManuallyNamed??o.isManuallyNamed,cursor:i.cursor,scroll:i.scroll,syncVersion:o.syncVersion+1,updatedAt:new Date,syncedAt:new Date,deletedAt:null}).where(xt(Se(at.id,r),Se(at.userId,e.id))).returning();return a&&nn.broadcast(e.id,"document:updated",{documentId:r,syncVersion:a.syncVersion,updatedAt:a.updatedAt?.toISOString()},n),t.json({document:a})}let[s]=await Ke.insert(at).values({id:r,userId:e.id,name:i.name,content:i.content,folderId:i.folderId,isManuallyNamed:i.isManuallyNamed??!1,cursor:i.cursor,scroll:i.scroll,syncVersion:1,syncedAt:new Date}).returning();return s&&nn.broadcast(e.id,"document:updated",{documentId:r,syncVersion:s.syncVersion,updatedAt:s.updatedAt?.toISOString()},n),t.json({document:s},201)});Wi.delete("/documents/:id",async t=>{let e=ct(t),r=t.req.param("id"),i=t.req.header("X-Device-Id"),[n]=await Ke.update(at).set({deletedAt:new Date,updatedAt:new Date,syncVersion:Ke.select({v:at.syncVersion}).from(at).where(Se(at.id,r)).limit(1)}).where(xt(Se(at.id,r),Se(at.userId,e.id),Pa(at.deletedAt))).returning();return n?(nn.broadcast(e.id,"document:deleted",{documentId:r},i),t.json({success:!0,document:n})):t.json({error:"Document not found"},404)});Wi.get("/folders",async t=>{let e=ct(t),r=t.req.query("since"),i=r?new Date(r):null,n=await Ke.query.folders.findMany({where:xt(Se(Xe.userId,e.id),i?Oa(mi(Xe.updatedAt,i),Xe.deletedAt?mi(Xe.deletedAt,i):void 0):void 0),orderBy:(o,{asc:s})=>[s(o.sortOrder),s(o.name)]});return t.json({folders:n,syncedAt:new Date().toISOString()})});Wi.put("/folders/:id",vn("json",_5),async t=>{let e=ct(t),r=t.req.param("id"),i=t.req.valid("json"),n=t.req.header("X-Device-Id"),o=await Ke.query.folders.findFirst({where:xt(Se(Xe.id,r),Se(Xe.userId,e.id))});if(o){let[a]=await Ke.update(Xe).set({name:i.name,parentId:i.parentId,color:i.color,sortOrder:i.sortOrder??o.sortOrder,updatedAt:new Date,deletedAt:null}).where(xt(Se(Xe.id,r),Se(Xe.userId,e.id))).returning();return a&&nn.broadcast(e.id,"folder:updated",{folderId:r,updatedAt:a.updatedAt?.toISOString()},n),t.json({folder:a})}let[s]=await Ke.insert(Xe).values({id:r,userId:e.id,name:i.name,parentId:i.parentId,color:i.color,sortOrder:i.sortOrder??0}).returning();return s&&nn.broadcast(e.id,"folder:updated",{folderId:r,updatedAt:s.updatedAt?.toISOString()},n),t.json({folder:s},201)});Wi.delete("/folders/:id",async t=>{let e=ct(t),r=t.req.param("id"),i=t.req.header("X-Device-Id"),[n]=await Ke.update(Xe).set({deletedAt:new Date,updatedAt:new Date}).where(xt(Se(Xe.id,r),Se(Xe.userId,e.id),Pa(Xe.deletedAt))).returning();return n?(nn.broadcast(e.id,"folder:deleted",{folderId:r},i),t.json({success:!0,folder:n})):t.json({error:"Folder not found"},404)});Wi.get("/status",async t=>{let e=ct(t),[r]=await Ke.select({count:at.id}).from(at).where(xt(Se(at.userId,e.id),Pa(at.deletedAt))),[i]=await Ke.select({count:Xe.id}).from(Xe).where(xt(Se(Xe.userId,e.id),Pa(Xe.deletedAt)));return t.json({documentsCount:r?.count||0,foldersCount:i?.count||0,timestamp:new Date().toISOString()})});Wi.get("/session",async t=>{let e=ct(t),r=await Ke.query.userSessionState.findFirst({where:Se(qi.userId,e.id)});return r?t.json({openDocumentIds:r.openDocumentIds,activeDocumentId:r.activeDocumentId,updatedAt:r.updatedAt?.toISOString()}):t.json({openDocumentIds:[],activeDocumentId:null,updatedAt:null})});Wi.put("/session",vn("json",k5),async t=>{let e=ct(t),r=t.req.valid("json"),i=t.req.header("X-Device-Id"),n=await Ke.query.userSessionState.findFirst({where:Se(qi.userId,e.id)}),o;if(n){let[s]=await Ke.update(qi).set({openDocumentIds:r.openDocumentIds,activeDocumentId:r.activeDocumentId,updatedAt:new Date}).where(Se(qi.userId,e.id)).returning();o=s}else{let[s]=await Ke.insert(qi).values({id:crypto.randomUUID(),userId:e.id,openDocumentIds:r.openDocumentIds,activeDocumentId:r.activeDocumentId,updatedAt:new Date}).returning();o=s}return o?(nn.broadcast(e.id,"session:updated",{openDocumentIds:o.openDocumentIds,activeDocumentId:o.activeDocumentId,updatedAt:o.updatedAt?.toISOString()},i),t.json({openDocumentIds:o.openDocumentIds,activeDocumentId:o.activeDocumentId,updatedAt:o.updatedAt?.toISOString()})):t.json({error:"Failed to update session state"},500)});var _z=Wi;var Qf=new sn,T5=pe.object({settings:pe.record(pe.string(),pe.unknown())});Qf.get("/me",async t=>{let e=ct(t);return t.json({user:{id:e.id,name:e.name,email:e.email,image:e.image}})});Qf.get("/settings",async t=>{let e=ct(t),r=await Ke.query.userSettings.findFirst({where:Se(Mn.userId,e.id)});return t.json({settings:r?.settings||{}})});Qf.put("/settings",vn("json",T5),async t=>{let e=ct(t),{settings:r}=t.req.valid("json"),i=await Ke.query.userSettings.findFirst({where:Se(Mn.userId,e.id)});if(i){let o={...i.settings,...r};return await Ke.update(Mn).set({settings:o,updatedAt:new Date}).where(Se(Mn.userId,e.id)),t.json({settings:o})}let n=crypto.randomUUID();return await Ke.insert(Mn).values({id:n,userId:e.id,settings:r}),t.json({settings:r},201)});Qf.delete("/settings",async t=>{let e=ct(t);return await Ke.delete(Mn).where(Se(Mn.userId,e.id)),t.json({success:!0,settings:{}})});var kz=Qf;var sr=new sn;sr.use("*",cC());sr.use("*",Ub());sr.use("*",oC({origin:["http://localhost:5173","http://localhost:3000","https://qazuor-markview.vercel.app",process.env.NEXT_PUBLIC_APP_URL||""].filter(Boolean),credentials:!0,allowHeaders:["Content-Type","Authorization","Cookie","X-Device-Id"],allowMethods:["GET","POST","PUT","DELETE","PATCH","OPTIONS"],exposeHeaders:["Set-Cookie"]}));sr.use("*",async(t,e)=>{if(t.req.path.startsWith("/api/auth/"))return t.set("user",null),t.set("session",null),e();try{let r=await x$.api.getSession({headers:t.req.raw.headers});t.set("user",r?.user||null),t.set("session",r?.session||null)}catch{t.set("user",null),t.set("session",null)}await e()});sr.onError((t,e)=>(console.error("API Error:",t),t instanceof Ao?(t.status===401?N$.unauthorized(e,e.req.path):t.status===403&&N$.forbidden(e,e.req.path,t.message),e.json({error:t.message,status:t.status},t.status)):e.json({error:"Internal Server Error",message:void 0},500)));sr.get("/api/health",t=>t.json({status:"ok",timestamp:new Date().toISOString()}));sr.use("/api/auth/*",Fu("auth"));sr.on(["GET","POST"],"/api/auth/*",t=>x$.handler(t.req.raw));sr.use("/api/sync/*",Fu("sync"));sr.route("/api/sync",_z);sr.route("/api/sync/sse",Ez);sr.use("/api/github/*",Fu("externalProxy"));sr.route("/api/github",Sz);sr.use("/api/google/*",Fu("externalProxy"));sr.route("/api/google",Nz);sr.use("/api/user/*",Fu("standard"));sr.route("/api/user",kz);var Tz=sr;var JUe={runtime:"nodejs",maxDuration:30};async function I5(t,e){try{let r=t.headers["x-forwarded-proto"]||"https",i=t.headers["x-forwarded-host"]||t.headers.host||"localhost",n=new URL(t.url||"/",`${r}://${i}`),o=new Headers;for(let[l,f]of Object.entries(t.headers))if(f)if(Array.isArray(f))for(let d of f)o.append(l,d);else o.set(l,f);let s=null;t.method!=="GET"&&t.method!=="HEAD"&&t.body&&(typeof t.body=="object"?s=JSON.stringify(t.body):typeof t.body=="string"&&(s=t.body));let a=new Request(n.toString(),{method:t.method||"GET",headers:o,body:s}),c=await Tz.fetch(a),u=c.headers.getSetCookie?.()||[];if(c.headers.forEach((l,f)=>{f.toLowerCase()!=="set-cookie"&&e.setHeader(f,l)}),u.length>0&&e.setHeader("Set-Cookie",u),e.status(c.status),c.body){let l=await c.arrayBuffer();e.send(Buffer.from(l))}else e.end()}catch(r){console.error("Handler error:",r),e.status(500).json({error:"Internal Server Error",message:r instanceof Error?r.message:"Unknown error"})}}export{JUe as config,I5 as default};
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
